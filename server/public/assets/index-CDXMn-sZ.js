var hI=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var KU=hI((ft,ze)=>{function pI(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const c in s)if(c!=="default"&&!(c in e)){const i=Object.getOwnPropertyDescriptor(s,c);i&&Object.defineProperty(e,c,i.get?i:{enumerable:!0,get:()=>s[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const i of c)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(c){const i={};return c.integrity&&(i.integrity=c.integrity),c.referrerPolicy&&(i.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?i.credentials="include":c.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(c){if(c.ep)return;c.ep=!0;const i=n(c);fetch(c.href,i)}})();var ca=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yu(e){return e&&Object.prototype.hasOwnProperty.call(e,"default")&&Object.keys(e).length===1?e.default:e}var Op={exports:{}},Yc={},Np={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NS;function mI(){if(NS)return ct;NS=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),u=Symbol.iterator;function m(Z){return Z===null||typeof Z!="object"?null:(Z=u&&Z[u]||Z["@@iterator"],typeof Z=="function"?Z:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,S={};function w(Z,oe,ce){this.props=Z,this.context=oe,this.refs=S,this.updater=ce||g}w.prototype.isReactComponent={},w.prototype.setState=function(Z,oe){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,oe,"setState")},w.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function C(){}C.prototype=w.prototype;function N(Z,oe,ce){this.props=Z,this.context=oe,this.refs=S,this.updater=ce||g}var I=N.prototype=new C;I.constructor=N,v(I,w.prototype),I.isPureReactComponent=!0;var R=Array.isArray,D=Object.prototype.hasOwnProperty,A={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function x(Z,oe,ce){var Y,re={},me=null,xe=null;if(oe!=null)for(Y in oe.ref!==void 0&&(xe=oe.ref),oe.key!==void 0&&(me=""+oe.key),oe)D.call(oe,Y)&&!O.hasOwnProperty(Y)&&(re[Y]=oe[Y]);var Oe=arguments.length-2;if(Oe===1)re.children=ce;else if(1<Oe){for(var qe=Array(Oe),lt=0;lt<Oe;lt++)qe[lt]=arguments[lt+2];re.children=qe}if(Z&&Z.defaultProps)for(Y in Oe=Z.defaultProps,Oe)re[Y]===void 0&&(re[Y]=Oe[Y]);return{$$typeof:e,type:Z,key:me,ref:xe,props:re,_owner:A.current}}function M(Z,oe){return{$$typeof:e,type:Z.type,key:oe,ref:Z.ref,props:Z.props,_owner:Z._owner}}function G(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===e}function V(Z){var oe={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(ce){return oe[ce]})}var z=/\/+/g;function q(Z,oe){return typeof Z=="object"&&Z!==null&&Z.key!=null?V(""+Z.key):oe.toString(36)}function H(Z,oe,ce,Y,re){var me=typeof Z;(me==="undefined"||me==="boolean")&&(Z=null);var xe=!1;if(Z===null)xe=!0;else switch(me){case"string":case"number":xe=!0;break;case"object":switch(Z.$$typeof){case e:case t:xe=!0}}if(xe)return xe=Z,re=re(xe),Z=Y===""?"."+q(xe,0):Y,R(re)?(ce="",Z!=null&&(ce=Z.replace(z,"$&/")+"/"),H(re,oe,ce,"",function(lt){return lt})):re!=null&&(G(re)&&(re=M(re,ce+(!re.key||xe&&xe.key===re.key?"":(""+re.key).replace(z,"$&/")+"/")+Z)),oe.push(re)),1;if(xe=0,Y=Y===""?".":Y+":",R(Z))for(var Oe=0;Oe<Z.length;Oe++){me=Z[Oe];var qe=Y+q(me,Oe);xe+=H(me,oe,ce,qe,re)}else if(qe=m(Z),typeof qe=="function")for(Z=qe.call(Z),Oe=0;!(me=Z.next()).done;)me=me.value,qe=Y+q(me,Oe++),xe+=H(me,oe,ce,qe,re);else if(me==="object")throw oe=String(Z),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.");return xe}function $(Z,oe,ce){if(Z==null)return Z;var Y=[],re=0;return H(Z,Y,"","",function(me){return oe.call(ce,me,re++)}),Y}function K(Z){if(Z._status===-1){var oe=Z._result;oe=oe(),oe.then(function(ce){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=ce)},function(ce){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=ce)}),Z._status===-1&&(Z._status=0,Z._result=oe)}if(Z._status===1)return Z._result.default;throw Z._result}var X={current:null},B={transition:null},te={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:B,ReactCurrentOwner:A};function ae(){throw Error("act(...) is not supported in production builds of React.")}return ct.Children={map:$,forEach:function(Z,oe,ce){$(Z,function(){oe.apply(this,arguments)},ce)},count:function(Z){var oe=0;return $(Z,function(){oe++}),oe},toArray:function(Z){return $(Z,function(oe){return oe})||[]},only:function(Z){if(!G(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},ct.Component=w,ct.Fragment=n,ct.Profiler=c,ct.PureComponent=N,ct.StrictMode=s,ct.Suspense=f,ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,ct.act=ae,ct.cloneElement=function(Z,oe,ce){if(Z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Z+".");var Y=v({},Z.props),re=Z.key,me=Z.ref,xe=Z._owner;if(oe!=null){if(oe.ref!==void 0&&(me=oe.ref,xe=A.current),oe.key!==void 0&&(re=""+oe.key),Z.type&&Z.type.defaultProps)var Oe=Z.type.defaultProps;for(qe in oe)D.call(oe,qe)&&!O.hasOwnProperty(qe)&&(Y[qe]=oe[qe]===void 0&&Oe!==void 0?Oe[qe]:oe[qe])}var qe=arguments.length-2;if(qe===1)Y.children=ce;else if(1<qe){Oe=Array(qe);for(var lt=0;lt<qe;lt++)Oe[lt]=arguments[lt+2];Y.children=Oe}return{$$typeof:e,type:Z.type,key:re,ref:me,props:Y,_owner:xe}},ct.createContext=function(Z){return Z={$$typeof:o,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Z.Provider={$$typeof:i,_context:Z},Z.Consumer=Z},ct.createElement=x,ct.createFactory=function(Z){var oe=x.bind(null,Z);return oe.type=Z,oe},ct.createRef=function(){return{current:null}},ct.forwardRef=function(Z){return{$$typeof:l,render:Z}},ct.isValidElement=G,ct.lazy=function(Z){return{$$typeof:h,_payload:{_status:-1,_result:Z},_init:K}},ct.memo=function(Z,oe){return{$$typeof:p,type:Z,compare:oe===void 0?null:oe}},ct.startTransition=function(Z){var oe=B.transition;B.transition={};try{Z()}finally{B.transition=oe}},ct.unstable_act=ae,ct.useCallback=function(Z,oe){return X.current.useCallback(Z,oe)},ct.useContext=function(Z){return X.current.useContext(Z)},ct.useDebugValue=function(){},ct.useDeferredValue=function(Z){return X.current.useDeferredValue(Z)},ct.useEffect=function(Z,oe){return X.current.useEffect(Z,oe)},ct.useId=function(){return X.current.useId()},ct.useImperativeHandle=function(Z,oe,ce){return X.current.useImperativeHandle(Z,oe,ce)},ct.useInsertionEffect=function(Z,oe){return X.current.useInsertionEffect(Z,oe)},ct.useLayoutEffect=function(Z,oe){return X.current.useLayoutEffect(Z,oe)},ct.useMemo=function(Z,oe){return X.current.useMemo(Z,oe)},ct.useReducer=function(Z,oe,ce){return X.current.useReducer(Z,oe,ce)},ct.useRef=function(Z){return X.current.useRef(Z)},ct.useState=function(Z){return X.current.useState(Z)},ct.useSyncExternalStore=function(Z,oe,ce){return X.current.useSyncExternalStore(Z,oe,ce)},ct.useTransition=function(){return X.current.useTransition()},ct.version="18.3.1",ct}var LS;function gv(){return LS||(LS=1,Np.exports=mI()),Np.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jS;function gI(){if(jS)return Yc;jS=1;var e=gv(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,c=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,f,p){var h,u={},m=null,g=null;p!==void 0&&(m=""+p),f.key!==void 0&&(m=""+f.key),f.ref!==void 0&&(g=f.ref);for(h in f)s.call(f,h)&&!i.hasOwnProperty(h)&&(u[h]=f[h]);if(l&&l.defaultProps)for(h in f=l.defaultProps,f)u[h]===void 0&&(u[h]=f[h]);return{$$typeof:t,type:l,key:m,ref:g,props:u,_owner:c.current}}return Yc.Fragment=n,Yc.jsx=o,Yc.jsxs=o,Yc}var DS;function yI(){return DS||(DS=1,Op.exports=gI()),Op.exports}var b=yI(),$S={},US;function vI(){if(US)return $S;if(US=1,typeof process>"u"){const e={env:{},version:"v18.0.0",versions:{node:"18.0.0",v8:"10.0.0",uv:"1.0.0",zlib:"1.0.0",ares:"1.0.0",modules:"108",nghttp2:"1.0.0",napi:"8",llhttp:"6.0.0",openssl:"3.0.0",cldr:"41.0",icu:"71.1",tz:"2022a",unicode:"14.0",ngtcp2:"0.8.1",nghttp3:"0.7.0"},platform:"browser",arch:"x64",pid:1,nextTick:function(t){setTimeout(t,0)},cwd:function(){return"/"},exit:function(t){console.warn("process.exit called with code:",t)},on:function(){},off:function(){},emit:function(){},browser:!0,type:"browser"};typeof window<"u"&&(window.process=e),typeof ca<"u"&&(ca.process=e),typeof globalThis<"u"&&(globalThis.process=e)}if(typeof Buffer>"u"){class e{static from(n,s){const c=new e;return c._data=n,c._encoding=s,c}static alloc(n,s,c){const i=new e;return i._size=n,i._fill=s,i._encoding=c,i}static allocUnsafe(n){return e.alloc(n)}static isBuffer(n){return n instanceof e}toString(n){if(this._data!==void 0){if(typeof this._data=="string")return this._data;if(this._data&&typeof this._data.toString=="function")return this._data.toString()}return""}toJSON(){return{type:"Buffer",data:[]}}length=0}typeof window<"u"&&(window.Buffer=e),typeof ca<"u"&&(ca.Buffer=e),typeof globalThis<"u"&&(globalThis.Buffer=e)}return typeof ca>"u"&&(typeof window<"u"?window.global=window:typeof globalThis<"u"&&(globalThis.global=globalThis)),console.log("âœ… Node.js globals polyfill loaded"),$S}vI();class Zn{static from(t,n){const s=new Zn;return s._data=t,s}static alloc(t,n,s){const c=new Zn;return c._size=t,c._fill=n,c}static allocUnsafe(t){return Zn.alloc(t)}static isBuffer(t){return t instanceof Zn}_data;_encoding;_size;_fill;toString(t){if(this._data!==void 0){if(typeof this._data=="string")return this._data;if(this._data&&typeof this._data.toString=="function")return this._data.toString()}return""}toJSON(){return{type:"Buffer",data:[]}}length=0}const wI=Zn,oc={Buffer:Zn};typeof ze<"u"&&typeof ze.exports<"u"&&(ze.exports=oc,ze.exports.Buffer=Zn,ze.exports.default=oc,ze.exports.buffer=oc);typeof ft<"u"&&(ft.default=oc,ft.buffer=oc,ft.Buffer=Zn);typeof window<"u"&&(window.Buffer=Zn);typeof globalThis<"u"&&(globalThis.Buffer=Zn);typeof global<"u"&&(global.Buffer=Zn);const EI=Object.freeze(Object.defineProperty({__proto__:null,Buffer:wI,default:oc},Symbol.toStringTag,{value:"Module"}));function yv(e,t){if(!t)return;let n=t.prototype;if(!n)try{Object.isExtensible&&Object.isExtensible(t)?(t.prototype={},n=t.prototype):n=Object.prototype}catch{n=Object.prototype}(typeof n!="object"||n===null)&&(n=Object.prototype),e.super_=t;try{e.prototype=Object.create(n,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}catch{try{if(e.prototype=Object.create(Object.prototype),e.prototype.constructor=e,n&&typeof n=="object"&&n!==Object.prototype){for(const c in n)if(n.hasOwnProperty(c))try{e.prototype[c]=n[c]}catch{}}}catch{e.prototype||(e.prototype={}),e.prototype.constructor||(e.prototype.constructor=e)}}}const vi={inherits:yv,inspect:e=>{try{return JSON.stringify(e,null,2)}catch{return String(e)}},promisify:e=>function(...t){return new Promise((n,s)=>{e(...t,(c,i)=>{c?s(c):n(i)})})}};if(typeof ze<"u"&&typeof ze.exports<"u"){const e={...vi,inherits:yv,default:vi,util:vi,inspect:vi.inspect,promisify:vi.promisify};ze.exports=e}typeof ft<"u"&&(ft.default=vi,ft.util=vi,ft.inherits=yv,ft.inspect=vi.inspect,ft.promisify=vi.promisify);const fu={env:{},version:"v18.0.0",versions:{node:"18.0.0",v8:"10.0.0",uv:"1.0.0",zlib:"1.0.0",ares:"1.0.0",modules:"108",nghttp2:"1.0.0",napi:"8",llhttp:"6.0.0",openssl:"3.0.0",cldr:"41.0",icu:"71.1",tz:"2022a",unicode:"14.0",ngtcp2:"0.8.1",nghttp3:"0.7.0"},platform:"browser",arch:"x64",pid:1,nextTick:function(e){setTimeout(e,0)},cwd:function(){return"/"},exit:function(e){console.warn("process.exit called with code:",e)},on:function(){},off:function(){},emit:function(){},browser:!0,type:"browser"};typeof window<"u"&&(window.process=fu);typeof global<"u"&&(global.process=fu);typeof globalThis<"u"&&(globalThis.process=fu);typeof ze<"u"&&typeof ze.exports<"u"&&(ze.exports=fu,ze.exports.default=fu);let vv=class{_events=new Map;on(t,n){return this._events.has(t)||this._events.set(t,[]),this._events.get(t).push(n),this}once(t,n){const s=(...c)=>{this.removeListener(t,s),n(...c)};return Promise.resolve(this.on(t,s))}emit(t,...n){const s=this._events.get(t);return s&&s.length>0?(s.forEach(c=>{try{c(...n)}catch(i){console.error("EventEmitter error:",i)}}),!0):!1}removeListener(t,n){const s=this._events.get(t);if(s){const c=s.indexOf(n);c>-1&&s.splice(c,1)}return this}removeAllListeners(t){return t?this._events.delete(t):this._events.clear(),this}off(t,n){return this.removeListener(t,n)}addListener(t,n){return this.on(t,n)}};const au={EventEmitter:vv};typeof ze<"u"&&typeof ze.exports<"u"&&(ze.exports=au,ze.exports.default=au,ze.exports.EventEmitter=vv,ze.exports.events=au);typeof ft<"u"&&(ft.default=au,ft.events=au,ft.EventEmitter=vv);var _d={},Lp={exports:{}},hn={},jp={exports:{}},Dp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qS;function SI(){return qS||(qS=1,(function(e){function t(B,te){var ae=B.length;B.push(te);e:for(;0<ae;){var Z=ae-1>>>1,oe=B[Z];if(0<c(oe,te))B[Z]=te,B[ae]=oe,ae=Z;else break e}}function n(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var te=B[0],ae=B.pop();if(ae!==te){B[0]=ae;e:for(var Z=0,oe=B.length,ce=oe>>>1;Z<ce;){var Y=2*(Z+1)-1,re=B[Y],me=Y+1,xe=B[me];if(0>c(re,ae))me<oe&&0>c(xe,re)?(B[Z]=xe,B[me]=ae,Z=me):(B[Z]=re,B[Y]=ae,Z=Y);else if(me<oe&&0>c(xe,ae))B[Z]=xe,B[me]=ae,Z=me;else break e}}return te}function c(B,te){var ae=B.sortIndex-te.sortIndex;return ae!==0?ae:B.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var f=[],p=[],h=1,u=null,m=3,g=!1,v=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(B){for(var te=n(p);te!==null;){if(te.callback===null)s(p);else if(te.startTime<=B)s(p),te.sortIndex=te.expirationTime,t(f,te);else break;te=n(p)}}function R(B){if(S=!1,I(B),!v)if(n(f)!==null)v=!0,K(D);else{var te=n(p);te!==null&&X(R,te.startTime-B)}}function D(B,te){v=!1,S&&(S=!1,C(x),x=-1),g=!0;var ae=m;try{for(I(te),u=n(f);u!==null&&(!(u.expirationTime>te)||B&&!V());){var Z=u.callback;if(typeof Z=="function"){u.callback=null,m=u.priorityLevel;var oe=Z(u.expirationTime<=te);te=e.unstable_now(),typeof oe=="function"?u.callback=oe:u===n(f)&&s(f),I(te)}else s(f);u=n(f)}if(u!==null)var ce=!0;else{var Y=n(p);Y!==null&&X(R,Y.startTime-te),ce=!1}return ce}finally{u=null,m=ae,g=!1}}var A=!1,O=null,x=-1,M=5,G=-1;function V(){return!(e.unstable_now()-G<M)}function z(){if(O!==null){var B=e.unstable_now();G=B;var te=!0;try{te=O(!0,B)}finally{te?q():(A=!1,O=null)}}else A=!1}var q;if(typeof N=="function")q=function(){N(z)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,$=H.port2;H.port1.onmessage=z,q=function(){$.postMessage(null)}}else q=function(){w(z,0)};function K(B){O=B,A||(A=!0,q())}function X(B,te){x=w(function(){B(e.unstable_now())},te)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,K(D))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(f)},e.unstable_next=function(B){switch(m){case 1:case 2:case 3:var te=3;break;default:te=m}var ae=m;m=te;try{return B()}finally{m=ae}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,te){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ae=m;m=B;try{return te()}finally{m=ae}},e.unstable_scheduleCallback=function(B,te,ae){var Z=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?Z+ae:Z):ae=Z,B){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=ae+oe,B={id:h++,callback:te,priorityLevel:B,startTime:ae,expirationTime:oe,sortIndex:-1},ae>Z?(B.sortIndex=ae,t(p,B),n(f)===null&&B===n(p)&&(S?(C(x),x=-1):S=!0,X(R,ae-Z))):(B.sortIndex=oe,t(f,B),v||g||(v=!0,K(D))),B},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(B){var te=m;return function(){var ae=m;m=te;try{return B.apply(this,arguments)}finally{m=ae}}}})(Dp)),Dp}var MS;function bI(){return MS||(MS=1,jp.exports=SI()),jp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HS;function TI(){if(HS)return hn;HS=1;var e=gv(),t=bI();function n(r){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+r,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,c={};function i(r,a){o(r,a),o(r+"Capture",a)}function o(r,a){for(c[r]=a,r=0;r<a.length;r++)s.add(a[r])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},u={};function m(r){return f.call(u,r)?!0:f.call(h,r)?!1:p.test(r)?u[r]=!0:(h[r]=!0,!1)}function g(r,a,d,y){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return y?!1:d!==null?!d.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function v(r,a,d,y){if(a===null||typeof a>"u"||g(r,a,d,y))return!0;if(y)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function S(r,a,d,y,_,P,U){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=y,this.attributeNamespace=_,this.mustUseProperty=d,this.propertyName=r,this.type=a,this.sanitizeURL=P,this.removeEmptyString=U}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){w[r]=new S(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var a=r[0];w[a]=new S(a,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){w[r]=new S(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){w[r]=new S(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){w[r]=new S(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){w[r]=new S(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){w[r]=new S(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){w[r]=new S(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){w[r]=new S(r,5,!1,r.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function N(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var a=r.replace(C,N);w[a]=new S(a,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var a=r.replace(C,N);w[a]=new S(a,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var a=r.replace(C,N);w[a]=new S(a,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){w[r]=new S(r,1,!1,r.toLowerCase(),null,!1,!1)}),w.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){w[r]=new S(r,1,!1,r.toLowerCase(),null,!0,!0)});function I(r,a,d,y){var _=w.hasOwnProperty(a)?w[a]:null;(_!==null?_.type!==0:y||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(v(a,d,_,y)&&(d=null),y||_===null?m(a)&&(d===null?r.removeAttribute(a):r.setAttribute(a,""+d)):_.mustUseProperty?r[_.propertyName]=d===null?_.type===3?!1:"":d:(a=_.attributeName,y=_.attributeNamespace,d===null?r.removeAttribute(a):(_=_.type,d=_===3||_===4&&d===!0?"":""+d,y?r.setAttributeNS(y,a,d):r.setAttribute(a,d))))}var R=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),A=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),V=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),X=Symbol.for("react.offscreen"),B=Symbol.iterator;function te(r){return r===null||typeof r!="object"?null:(r=B&&r[B]||r["@@iterator"],typeof r=="function"?r:null)}var ae=Object.assign,Z;function oe(r){if(Z===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);Z=a&&a[1]||""}return`
`+Z+r}var ce=!1;function Y(r,a){if(!r||ce)return"";ce=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(ge){var y=ge}Reflect.construct(r,[],a)}else{try{a.call()}catch(ge){y=ge}r.call(a.prototype)}else{try{throw Error()}catch(ge){y=ge}r()}}catch(ge){if(ge&&y&&typeof ge.stack=="string"){for(var _=ge.stack.split(`
`),P=y.stack.split(`
`),U=_.length-1,ee=P.length-1;1<=U&&0<=ee&&_[U]!==P[ee];)ee--;for(;1<=U&&0<=ee;U--,ee--)if(_[U]!==P[ee]){if(U!==1||ee!==1)do if(U--,ee--,0>ee||_[U]!==P[ee]){var ie=`
`+_[U].replace(" at new "," at ");return r.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",r.displayName)),ie}while(1<=U&&0<=ee);break}}}finally{ce=!1,Error.prepareStackTrace=d}return(r=r?r.displayName||r.name:"")?oe(r):""}function re(r){switch(r.tag){case 5:return oe(r.type);case 16:return oe("Lazy");case 13:return oe("Suspense");case 19:return oe("SuspenseList");case 0:case 2:case 15:return r=Y(r.type,!1),r;case 11:return r=Y(r.type.render,!1),r;case 1:return r=Y(r.type,!0),r;default:return""}}function me(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case O:return"Fragment";case A:return"Portal";case M:return"Profiler";case x:return"StrictMode";case q:return"Suspense";case H:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case V:return(r.displayName||"Context")+".Consumer";case G:return(r._context.displayName||"Context")+".Provider";case z:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case $:return a=r.displayName||null,a!==null?a:me(r.type)||"Memo";case K:a=r._payload,r=r._init;try{return me(r(a))}catch{}}return null}function xe(r){var a=r.type;switch(r.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=a.render,r=r.displayName||r.name||"",a.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(a);case 8:return a===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Oe(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function qe(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function lt(r){var a=qe(r)?"checked":"value",d=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),y=""+r[a];if(!r.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var _=d.get,P=d.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return _.call(this)},set:function(U){y=""+U,P.call(this,U)}}),Object.defineProperty(r,a,{enumerable:d.enumerable}),{getValue:function(){return y},setValue:function(U){y=""+U},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function Dt(r){r._valueTracker||(r._valueTracker=lt(r))}function Q(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var d=a.getValue(),y="";return r&&(y=qe(r)?r.checked?"true":"false":r.value),r=y,r!==d?(a.setValue(r),!0):!1}function Ee(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Te(r,a){var d=a.checked;return ae({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??r._wrapperState.initialChecked})}function nt(r,a){var d=a.defaultValue==null?"":a.defaultValue,y=a.checked!=null?a.checked:a.defaultChecked;d=Oe(a.value!=null?a.value:d),r._wrapperState={initialChecked:y,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function dt(r,a){a=a.checked,a!=null&&I(r,"checked",a,!1)}function ht(r,a){dt(r,a);var d=Oe(a.value),y=a.type;if(d!=null)y==="number"?(d===0&&r.value===""||r.value!=d)&&(r.value=""+d):r.value!==""+d&&(r.value=""+d);else if(y==="submit"||y==="reset"){r.removeAttribute("value");return}a.hasOwnProperty("value")?vr(r,a.type,d):a.hasOwnProperty("defaultValue")&&vr(r,a.type,Oe(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(r.defaultChecked=!!a.defaultChecked)}function Ws(r,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var y=a.type;if(!(y!=="submit"&&y!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+r._wrapperState.initialValue,d||a===r.value||(r.value=a),r.defaultValue=a}d=r.name,d!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,d!==""&&(r.name=d)}function vr(r,a,d){(a!=="number"||Ee(r.ownerDocument)!==r)&&(d==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+d&&(r.defaultValue=""+d))}var ns=Array.isArray;function Nn(r,a,d,y){if(r=r.options,a){a={};for(var _=0;_<d.length;_++)a["$"+d[_]]=!0;for(d=0;d<r.length;d++)_=a.hasOwnProperty("$"+r[d].value),r[d].selected!==_&&(r[d].selected=_),_&&y&&(r[d].defaultSelected=!0)}else{for(d=""+Oe(d),a=null,_=0;_<r.length;_++){if(r[_].value===d){r[_].selected=!0,y&&(r[_].defaultSelected=!0);return}a!==null||r[_].disabled||(a=r[_])}a!==null&&(a.selected=!0)}}function Kt(r,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return ae({},a,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Dr(r,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(n(92));if(ns(d)){if(1<d.length)throw Error(n(93));d=d[0]}a=d}a==null&&(a=""),d=a}r._wrapperState={initialValue:Oe(d)}}function xi(r,a){var d=Oe(a.value),y=Oe(a.defaultValue);d!=null&&(d=""+d,d!==r.value&&(r.value=d),a.defaultValue==null&&r.defaultValue!==d&&(r.defaultValue=d)),y!=null&&(r.defaultValue=""+y)}function ga(r){var a=r.textContent;a===r._wrapperState.initialValue&&a!==""&&a!==null&&(r.value=a)}function J(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ke(r,a){return r==null||r==="http://www.w3.org/1999/xhtml"?J(a):r==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var wn,Ln=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,y,_){MSApp.execUnsafeLocalFunction(function(){return r(a,d,y,_)})}:r})(function(r,a){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=a;else{for(wn=wn||document.createElement("div"),wn.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=wn.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;a.firstChild;)r.appendChild(a.firstChild)}});function Cr(r,a){if(a){var d=r.firstChild;if(d&&d===r.lastChild&&d.nodeType===3){d.nodeValue=a;return}}r.textContent=a}var _r={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},en=["Webkit","ms","Moz","O"];Object.keys(_r).forEach(function(r){en.forEach(function(a){a=a+r.charAt(0).toUpperCase()+r.substring(1),_r[a]=_r[r]})});function _s(r,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||_r.hasOwnProperty(r)&&_r[r]?(""+a).trim():a+"px"}function Ri(r,a){r=r.style;for(var d in a)if(a.hasOwnProperty(d)){var y=d.indexOf("--")===0,_=_s(d,a[d],y);d==="float"&&(d="cssFloat"),y?r.setProperty(d,_):r[d]=_}}var ki=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xr(r,a){if(a){if(ki[r]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function ss(r,a){if(r.indexOf("-")===-1)return typeof a.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $r=null;function ur(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ks=null,tn=null,En=null;function is(r){if(r=Dc(r)){if(typeof Ks!="function")throw Error(n(280));var a=r.stateNode;a&&(a=Mu(a),Ks(r.stateNode,r.type,a))}}function Xe(r){tn?En?En.push(r):En=[r]:tn=r}function At(){if(tn){var r=tn,a=En;if(En=tn=null,is(r),a)for(r=0;r<a.length;r++)is(a[r])}}function $t(r,a){return r(a)}function Zt(){}var jn=!1;function bt(r,a,d){if(jn)return r(a,d);jn=!0;try{return $t(r,a,d)}finally{jn=!1,(tn!==null||En!==null)&&(Zt(),At())}}function xt(r,a){var d=r.stateNode;if(d===null)return null;var y=Mu(d);if(y===null)return null;d=y[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(r=r.type,y=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!y;break e;default:r=!1}if(r)return null;if(d&&typeof d!="function")throw Error(n(231,a,typeof d));return d}var Dn=!1;if(l)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){Dn=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch{Dn=!1}function wr(r,a,d,y,_,P,U,ee,ie){var ge=Array.prototype.slice.call(arguments,3);try{a.apply(d,ge)}catch(Ce){this.onError(Ce)}}var $n=!1,Qe=null,Bs=!1,po=null,wc={onError:function(r){$n=!0,Qe=r}};function mo(r,a,d,y,_,P,U,ee,ie){$n=!1,Qe=null,wr.apply(wc,arguments)}function Ec(r,a,d,y,_,P,U,ee,ie){if(mo.apply(this,arguments),$n){if($n){var ge=Qe;$n=!1,Qe=null}else throw Error(n(198));Bs||(Bs=!0,po=ge)}}function Ur(r){var a=r,d=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(d=a.return),r=a.return;while(r)}return a.tag===3?d:null}function xs(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function ya(r){if(Ur(r)!==r)throw Error(n(188))}function Sc(r){var a=r.alternate;if(!a){if(a=Ur(r),a===null)throw Error(n(188));return a!==r?null:r}for(var d=r,y=a;;){var _=d.return;if(_===null)break;var P=_.alternate;if(P===null){if(y=_.return,y!==null){d=y;continue}break}if(_.child===P.child){for(P=_.child;P;){if(P===d)return ya(_),r;if(P===y)return ya(_),a;P=P.sibling}throw Error(n(188))}if(d.return!==y.return)d=_,y=P;else{for(var U=!1,ee=_.child;ee;){if(ee===d){U=!0,d=_,y=P;break}if(ee===y){U=!0,y=_,d=P;break}ee=ee.sibling}if(!U){for(ee=P.child;ee;){if(ee===d){U=!0,d=P,y=_;break}if(ee===y){U=!0,y=P,d=_;break}ee=ee.sibling}if(!U)throw Error(n(189))}}if(d.alternate!==y)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?r:a}function Ai(r){return r=Sc(r),r!==null?rn(r):null}function rn(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var a=rn(r);if(a!==null)return a;r=r.sibling}return null}var Un=t.unstable_scheduleCallback,va=t.unstable_cancelCallback,bc=t.unstable_shouldYield,zs=t.unstable_requestPaint,It=t.unstable_now,Tc=t.unstable_getCurrentPriorityLevel,Sn=t.unstable_ImmediatePriority,Rt=t.unstable_UserBlockingPriority,qn=t.unstable_NormalPriority,go=t.unstable_LowPriority,Rr=t.unstable_IdlePriority,Rs=null,nn=null;function Cc(r){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(Rs,r,void 0,(r.current.flags&128)===128)}catch{}}var qr=Math.clz32?Math.clz32:vo,os=Math.log,yo=Math.LN2;function vo(r){return r>>>=0,r===0?32:31-(os(r)/yo|0)|0}var Ii=64,Pi=4194304;function Gs(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Oi(r,a){var d=r.pendingLanes;if(d===0)return 0;var y=0,_=r.suspendedLanes,P=r.pingedLanes,U=d&268435455;if(U!==0){var ee=U&~_;ee!==0?y=Gs(ee):(P&=U,P!==0&&(y=Gs(P)))}else U=d&~_,U!==0?y=Gs(U):P!==0&&(y=Gs(P));if(y===0)return 0;if(a!==0&&a!==y&&(a&_)===0&&(_=y&-y,P=a&-a,_>=P||_===16&&(P&4194240)!==0))return a;if((y&4)!==0&&(y|=d&16),a=r.entangledLanes,a!==0)for(r=r.entanglements,a&=y;0<a;)d=31-qr(a),_=1<<d,y|=r[d],a&=~_;return y}function wo(r,a){switch(r){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Eo(r,a){for(var d=r.suspendedLanes,y=r.pingedLanes,_=r.expirationTimes,P=r.pendingLanes;0<P;){var U=31-qr(P),ee=1<<U,ie=_[U];ie===-1?((ee&d)===0||(ee&y)!==0)&&(_[U]=wo(ee,a)):ie<=a&&(r.expiredLanes|=ee),P&=~ee}}function nr(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Ni(){var r=Ii;return Ii<<=1,(Ii&4194240)===0&&(Ii=64),r}function _c(r){for(var a=[],d=0;31>d;d++)a.push(r);return a}function Js(r,a,d){r.pendingLanes|=a,a!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,a=31-qr(a),r[a]=d}function fh(r,a){var d=r.pendingLanes&~a;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=a,r.mutableReadLanes&=a,r.entangledLanes&=a,a=r.entanglements;var y=r.eventTimes;for(r=r.expirationTimes;0<d;){var _=31-qr(d),P=1<<_;a[_]=0,y[_]=-1,r[_]=-1,d&=~P}}function So(r,a){var d=r.entangledLanes|=a;for(r=r.entanglements;d;){var y=31-qr(d),_=1<<y;_&a|r[y]&a&&(r[y]|=a),d&=~_}}var pt=0;function wa(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Ea,Vs,Li,Mn,Sa,Xs=!1,ks=[],sn=null,Hn=null,Fn=null,as=new Map,bn=new Map,on=[],xc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ba(r,a){switch(r){case"focusin":case"focusout":sn=null;break;case"dragenter":case"dragleave":Hn=null;break;case"mouseover":case"mouseout":Fn=null;break;case"pointerover":case"pointerout":as.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":bn.delete(a.pointerId)}}function cs(r,a,d,y,_,P){return r===null||r.nativeEvent!==P?(r={blockedOn:a,domEventName:d,eventSystemFlags:y,nativeEvent:P,targetContainers:[_]},a!==null&&(a=Dc(a),a!==null&&Vs(a)),r):(r.eventSystemFlags|=y,a=r.targetContainers,_!==null&&a.indexOf(_)===-1&&a.push(_),r)}function Ys(r,a,d,y,_){switch(a){case"focusin":return sn=cs(sn,r,a,d,y,_),!0;case"dragenter":return Hn=cs(Hn,r,a,d,y,_),!0;case"mouseover":return Fn=cs(Fn,r,a,d,y,_),!0;case"pointerover":var P=_.pointerId;return as.set(P,cs(as.get(P)||null,r,a,d,y,_)),!0;case"gotpointercapture":return P=_.pointerId,bn.set(P,cs(bn.get(P)||null,r,a,d,y,_)),!0}return!1}function ji(r){var a=Io(r.target);if(a!==null){var d=Ur(a);if(d!==null){if(a=d.tag,a===13){if(a=xs(d),a!==null){r.blockedOn=a,Sa(r.priority,function(){Li(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){r.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}r.blockedOn=null}function As(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var d=Co(r.domEventName,r.eventSystemFlags,a[0],r.nativeEvent);if(d===null){d=r.nativeEvent;var y=new d.constructor(d.type,d);$r=y,d.target.dispatchEvent(y),$r=null}else return a=Dc(d),a!==null&&Vs(a),r.blockedOn=d,!1;a.shift()}return!0}function Wn(r,a,d){As(r)&&d.delete(a)}function bo(){Xs=!1,sn!==null&&As(sn)&&(sn=null),Hn!==null&&As(Hn)&&(Hn=null),Fn!==null&&As(Fn)&&(Fn=null),as.forEach(Wn),bn.forEach(Wn)}function Qs(r,a){r.blockedOn===a&&(r.blockedOn=null,Xs||(Xs=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,bo)))}function Mr(r){function a(_){return Qs(_,r)}if(0<ks.length){Qs(ks[0],r);for(var d=1;d<ks.length;d++){var y=ks[d];y.blockedOn===r&&(y.blockedOn=null)}}for(sn!==null&&Qs(sn,r),Hn!==null&&Qs(Hn,r),Fn!==null&&Qs(Fn,r),as.forEach(a),bn.forEach(a),d=0;d<on.length;d++)y=on[d],y.blockedOn===r&&(y.blockedOn=null);for(;0<on.length&&(d=on[0],d.blockedOn===null);)ji(d),d.blockedOn===null&&on.shift()}var Tt=R.ReactCurrentBatchConfig,an=!0;function ls(r,a,d,y){var _=pt,P=Tt.transition;Tt.transition=null;try{pt=1,To(r,a,d,y)}finally{pt=_,Tt.transition=P}}function Zs(r,a,d,y){var _=pt,P=Tt.transition;Tt.transition=null;try{pt=4,To(r,a,d,y)}finally{pt=_,Tt.transition=P}}function To(r,a,d,y){if(an){var _=Co(r,a,d,y);if(_===null)bh(r,a,y,Di,d),ba(r,y);else if(Ys(_,r,a,d,y))y.stopPropagation();else if(ba(r,y),a&4&&-1<xc.indexOf(r)){for(;_!==null;){var P=Dc(_);if(P!==null&&Ea(P),P=Co(r,a,d,y),P===null&&bh(r,a,y,Di,d),P===_)break;_=P}_!==null&&y.stopPropagation()}else bh(r,a,y,null,d)}}var Di=null;function Co(r,a,d,y){if(Di=null,r=ur(y),r=Io(r),r!==null)if(a=Ur(r),a===null)r=null;else if(d=a.tag,d===13){if(r=xs(a),r!==null)return r;r=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null);return Di=r,null}function Is(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tc()){case Sn:return 1;case Rt:return 4;case qn:case go:return 16;case Rr:return 536870912;default:return 16}default:return 16}}var Kn=null,ei=null,Ze=null;function E(){if(Ze)return Ze;var r,a=ei,d=a.length,y,_="value"in Kn?Kn.value:Kn.textContent,P=_.length;for(r=0;r<d&&a[r]===_[r];r++);var U=d-r;for(y=1;y<=U&&a[d-y]===_[P-y];y++);return Ze=_.slice(r,1<y?1-y:void 0)}function T(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function k(){return!0}function L(){return!1}function j(r){function a(d,y,_,P,U){this._reactName=d,this._targetInst=_,this.type=y,this.nativeEvent=P,this.target=U,this.currentTarget=null;for(var ee in r)r.hasOwnProperty(ee)&&(d=r[ee],this[ee]=d?d(P):P[ee]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?k:L,this.isPropagationStopped=L,this}return ae(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=k)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=k)},persist:function(){},isPersistent:k}),a}var W={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},F=j(W),ne=ae({},W,{view:0,detail:0}),ye=j(ne),de,ue,we,Be=ae({},ne,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==we&&(we&&r.type==="mousemove"?(de=r.screenX-we.screenX,ue=r.screenY-we.screenY):ue=de=0,we=r),de)},movementY:function(r){return"movementY"in r?r.movementY:ue}}),ut=j(Be),fe=ae({},Be,{dataTransfer:0}),_e=j(fe),ve=ae({},ne,{relatedTarget:0}),et=j(ve),_t=ae({},W,{animationName:0,elapsedTime:0,pseudoElement:0}),ot=j(_t),wt=ae({},W,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Pt=j(wt),Er=ae({},W,{data:0}),Ct=j(Er),ti={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},us={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_o={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xo(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=_o[r])?!!a[r]:!1}function Tn(){return xo}var Cn=ae({},ne,{key:function(r){if(r.key){var a=ti[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=T(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?us[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(r){return r.type==="keypress"?T(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?T(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Sr=j(Cn),Ro=ae({},Be,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lt=j(Ro),ko=ae({},ne,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn}),sr=j(ko),Ao=ae({},W,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rc=j(Ao),ir=ae({},Be,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Hr=j(ir),ri=[9,13,27,32],_n=l&&"CompositionEvent"in window,ds=null;l&&"documentMode"in document&&(ds=document.documentMode);var lA=l&&"TextEvent"in window&&!ds,_w=l&&(!_n||ds&&8<ds&&11>=ds),xw=" ",Rw=!1;function kw(r,a){switch(r){case"keyup":return ri.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Aw(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ta=!1;function uA(r,a){switch(r){case"compositionend":return Aw(a);case"keypress":return a.which!==32?null:(Rw=!0,xw);case"textInput":return r=a.data,r===xw&&Rw?null:r;default:return null}}function dA(r,a){if(Ta)return r==="compositionend"||!_n&&kw(r,a)?(r=E(),Ze=ei=Kn=null,Ta=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return _w&&a.locale!=="ko"?null:a.data;default:return null}}var fA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iw(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!fA[r.type]:a==="textarea"}function Pw(r,a,d,y){Xe(y),a=$u(a,"onChange"),0<a.length&&(d=new F("onChange","change",null,d,y),r.push({event:d,listeners:a}))}var kc=null,Ac=null;function hA(r){Vw(r,0)}function Nu(r){var a=ka(r);if(Q(a))return r}function pA(r,a){if(r==="change")return a}var Ow=!1;if(l){var hh;if(l){var ph="oninput"in document;if(!ph){var Nw=document.createElement("div");Nw.setAttribute("oninput","return;"),ph=typeof Nw.oninput=="function"}hh=ph}else hh=!1;Ow=hh&&(!document.documentMode||9<document.documentMode)}function Lw(){kc&&(kc.detachEvent("onpropertychange",jw),Ac=kc=null)}function jw(r){if(r.propertyName==="value"&&Nu(Ac)){var a=[];Pw(a,Ac,r,ur(r)),bt(hA,a)}}function mA(r,a,d){r==="focusin"?(Lw(),kc=a,Ac=d,kc.attachEvent("onpropertychange",jw)):r==="focusout"&&Lw()}function gA(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Nu(Ac)}function yA(r,a){if(r==="click")return Nu(a)}function vA(r,a){if(r==="input"||r==="change")return Nu(a)}function wA(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var fs=typeof Object.is=="function"?Object.is:wA;function Ic(r,a){if(fs(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var d=Object.keys(r),y=Object.keys(a);if(d.length!==y.length)return!1;for(y=0;y<d.length;y++){var _=d[y];if(!f.call(a,_)||!fs(r[_],a[_]))return!1}return!0}function Dw(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function $w(r,a){var d=Dw(r);r=0;for(var y;d;){if(d.nodeType===3){if(y=r+d.textContent.length,r<=a&&y>=a)return{node:d,offset:a-r};r=y}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Dw(d)}}function Uw(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?Uw(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function qw(){for(var r=window,a=Ee();a instanceof r.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)r=a.contentWindow;else break;a=Ee(r.document)}return a}function mh(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}function EA(r){var a=qw(),d=r.focusedElem,y=r.selectionRange;if(a!==d&&d&&d.ownerDocument&&Uw(d.ownerDocument.documentElement,d)){if(y!==null&&mh(d)){if(a=y.start,r=y.end,r===void 0&&(r=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(r,d.value.length);else if(r=(a=d.ownerDocument||document)&&a.defaultView||window,r.getSelection){r=r.getSelection();var _=d.textContent.length,P=Math.min(y.start,_);y=y.end===void 0?P:Math.min(y.end,_),!r.extend&&P>y&&(_=y,y=P,P=_),_=$w(d,P);var U=$w(d,y);_&&U&&(r.rangeCount!==1||r.anchorNode!==_.node||r.anchorOffset!==_.offset||r.focusNode!==U.node||r.focusOffset!==U.offset)&&(a=a.createRange(),a.setStart(_.node,_.offset),r.removeAllRanges(),P>y?(r.addRange(a),r.extend(U.node,U.offset)):(a.setEnd(U.node,U.offset),r.addRange(a)))}}for(a=[],r=d;r=r.parentNode;)r.nodeType===1&&a.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)r=a[d],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var SA=l&&"documentMode"in document&&11>=document.documentMode,Ca=null,gh=null,Pc=null,yh=!1;function Mw(r,a,d){var y=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;yh||Ca==null||Ca!==Ee(y)||(y=Ca,"selectionStart"in y&&mh(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Pc&&Ic(Pc,y)||(Pc=y,y=$u(gh,"onSelect"),0<y.length&&(a=new F("onSelect","select",null,a,d),r.push({event:a,listeners:y}),a.target=Ca)))}function Lu(r,a){var d={};return d[r.toLowerCase()]=a.toLowerCase(),d["Webkit"+r]="webkit"+a,d["Moz"+r]="moz"+a,d}var _a={animationend:Lu("Animation","AnimationEnd"),animationiteration:Lu("Animation","AnimationIteration"),animationstart:Lu("Animation","AnimationStart"),transitionend:Lu("Transition","TransitionEnd")},vh={},Hw={};l&&(Hw=document.createElement("div").style,"AnimationEvent"in window||(delete _a.animationend.animation,delete _a.animationiteration.animation,delete _a.animationstart.animation),"TransitionEvent"in window||delete _a.transitionend.transition);function ju(r){if(vh[r])return vh[r];if(!_a[r])return r;var a=_a[r],d;for(d in a)if(a.hasOwnProperty(d)&&d in Hw)return vh[r]=a[d];return r}var Fw=ju("animationend"),Ww=ju("animationiteration"),Kw=ju("animationstart"),Bw=ju("transitionend"),zw=new Map,Gw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $i(r,a){zw.set(r,a),i(a,[r])}for(var wh=0;wh<Gw.length;wh++){var Eh=Gw[wh],bA=Eh.toLowerCase(),TA=Eh[0].toUpperCase()+Eh.slice(1);$i(bA,"on"+TA)}$i(Fw,"onAnimationEnd"),$i(Ww,"onAnimationIteration"),$i(Kw,"onAnimationStart"),$i("dblclick","onDoubleClick"),$i("focusin","onFocus"),$i("focusout","onBlur"),$i(Bw,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oc));function Jw(r,a,d){var y=r.type||"unknown-event";r.currentTarget=d,Ec(y,a,void 0,r),r.currentTarget=null}function Vw(r,a){a=(a&4)!==0;for(var d=0;d<r.length;d++){var y=r[d],_=y.event;y=y.listeners;e:{var P=void 0;if(a)for(var U=y.length-1;0<=U;U--){var ee=y[U],ie=ee.instance,ge=ee.currentTarget;if(ee=ee.listener,ie!==P&&_.isPropagationStopped())break e;Jw(_,ee,ge),P=ie}else for(U=0;U<y.length;U++){if(ee=y[U],ie=ee.instance,ge=ee.currentTarget,ee=ee.listener,ie!==P&&_.isPropagationStopped())break e;Jw(_,ee,ge),P=ie}}}if(Bs)throw r=po,Bs=!1,po=null,r}function Ot(r,a){var d=a[kh];d===void 0&&(d=a[kh]=new Set);var y=r+"__bubble";d.has(y)||(Xw(a,r,2,!1),d.add(y))}function Sh(r,a,d){var y=0;a&&(y|=4),Xw(d,r,y,a)}var Du="_reactListening"+Math.random().toString(36).slice(2);function Nc(r){if(!r[Du]){r[Du]=!0,s.forEach(function(d){d!=="selectionchange"&&(CA.has(d)||Sh(d,!1,r),Sh(d,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[Du]||(a[Du]=!0,Sh("selectionchange",!1,a))}}function Xw(r,a,d,y){switch(Is(a)){case 1:var _=ls;break;case 4:_=Zs;break;default:_=To}d=_.bind(null,a,d,r),_=void 0,!Dn||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(_=!0),y?_!==void 0?r.addEventListener(a,d,{capture:!0,passive:_}):r.addEventListener(a,d,!0):_!==void 0?r.addEventListener(a,d,{passive:_}):r.addEventListener(a,d,!1)}function bh(r,a,d,y,_){var P=y;if((a&1)===0&&(a&2)===0&&y!==null)e:for(;;){if(y===null)return;var U=y.tag;if(U===3||U===4){var ee=y.stateNode.containerInfo;if(ee===_||ee.nodeType===8&&ee.parentNode===_)break;if(U===4)for(U=y.return;U!==null;){var ie=U.tag;if((ie===3||ie===4)&&(ie=U.stateNode.containerInfo,ie===_||ie.nodeType===8&&ie.parentNode===_))return;U=U.return}for(;ee!==null;){if(U=Io(ee),U===null)return;if(ie=U.tag,ie===5||ie===6){y=P=U;continue e}ee=ee.parentNode}}y=y.return}bt(function(){var ge=P,Ce=ur(d),Re=[];e:{var be=zw.get(r);if(be!==void 0){var je=F,Me=r;switch(r){case"keypress":if(T(d)===0)break e;case"keydown":case"keyup":je=Sr;break;case"focusin":Me="focus",je=et;break;case"focusout":Me="blur",je=et;break;case"beforeblur":case"afterblur":je=et;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=ut;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=_e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=sr;break;case Fw:case Ww:case Kw:je=ot;break;case Bw:je=Rc;break;case"scroll":je=ye;break;case"wheel":je=Hr;break;case"copy":case"cut":case"paste":je=Pt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=Lt}var We=(a&4)!==0,zt=!We&&r==="scroll",he=We?be!==null?be+"Capture":null:be;We=[];for(var le=ge,pe;le!==null;){pe=le;var Ae=pe.stateNode;if(pe.tag===5&&Ae!==null&&(pe=Ae,he!==null&&(Ae=xt(le,he),Ae!=null&&We.push(Lc(le,Ae,pe)))),zt)break;le=le.return}0<We.length&&(be=new je(be,Me,null,d,Ce),Re.push({event:be,listeners:We}))}}if((a&7)===0){e:{if(be=r==="mouseover"||r==="pointerover",je=r==="mouseout"||r==="pointerout",be&&d!==$r&&(Me=d.relatedTarget||d.fromElement)&&(Io(Me)||Me[ni]))break e;if((je||be)&&(be=Ce.window===Ce?Ce:(be=Ce.ownerDocument)?be.defaultView||be.parentWindow:window,je?(Me=d.relatedTarget||d.toElement,je=ge,Me=Me?Io(Me):null,Me!==null&&(zt=Ur(Me),Me!==zt||Me.tag!==5&&Me.tag!==6)&&(Me=null)):(je=null,Me=ge),je!==Me)){if(We=ut,Ae="onMouseLeave",he="onMouseEnter",le="mouse",(r==="pointerout"||r==="pointerover")&&(We=Lt,Ae="onPointerLeave",he="onPointerEnter",le="pointer"),zt=je==null?be:ka(je),pe=Me==null?be:ka(Me),be=new We(Ae,le+"leave",je,d,Ce),be.target=zt,be.relatedTarget=pe,Ae=null,Io(Ce)===ge&&(We=new We(he,le+"enter",Me,d,Ce),We.target=pe,We.relatedTarget=zt,Ae=We),zt=Ae,je&&Me)t:{for(We=je,he=Me,le=0,pe=We;pe;pe=xa(pe))le++;for(pe=0,Ae=he;Ae;Ae=xa(Ae))pe++;for(;0<le-pe;)We=xa(We),le--;for(;0<pe-le;)he=xa(he),pe--;for(;le--;){if(We===he||he!==null&&We===he.alternate)break t;We=xa(We),he=xa(he)}We=null}else We=null;je!==null&&Yw(Re,be,je,We,!1),Me!==null&&zt!==null&&Yw(Re,zt,Me,We,!0)}}e:{if(be=ge?ka(ge):window,je=be.nodeName&&be.nodeName.toLowerCase(),je==="select"||je==="input"&&be.type==="file")var Ke=pA;else if(Iw(be))if(Ow)Ke=vA;else{Ke=gA;var Ge=mA}else(je=be.nodeName)&&je.toLowerCase()==="input"&&(be.type==="checkbox"||be.type==="radio")&&(Ke=yA);if(Ke&&(Ke=Ke(r,ge))){Pw(Re,Ke,d,Ce);break e}Ge&&Ge(r,be,ge),r==="focusout"&&(Ge=be._wrapperState)&&Ge.controlled&&be.type==="number"&&vr(be,"number",be.value)}switch(Ge=ge?ka(ge):window,r){case"focusin":(Iw(Ge)||Ge.contentEditable==="true")&&(Ca=Ge,gh=ge,Pc=null);break;case"focusout":Pc=gh=Ca=null;break;case"mousedown":yh=!0;break;case"contextmenu":case"mouseup":case"dragend":yh=!1,Mw(Re,d,Ce);break;case"selectionchange":if(SA)break;case"keydown":case"keyup":Mw(Re,d,Ce)}var Je;if(_n)e:{switch(r){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else Ta?kw(r,d)&&(Ye="onCompositionEnd"):r==="keydown"&&d.keyCode===229&&(Ye="onCompositionStart");Ye&&(_w&&d.locale!=="ko"&&(Ta||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&Ta&&(Je=E()):(Kn=Ce,ei="value"in Kn?Kn.value:Kn.textContent,Ta=!0)),Ge=$u(ge,Ye),0<Ge.length&&(Ye=new Ct(Ye,r,null,d,Ce),Re.push({event:Ye,listeners:Ge}),Je?Ye.data=Je:(Je=Aw(d),Je!==null&&(Ye.data=Je)))),(Je=lA?uA(r,d):dA(r,d))&&(ge=$u(ge,"onBeforeInput"),0<ge.length&&(Ce=new Ct("onBeforeInput","beforeinput",null,d,Ce),Re.push({event:Ce,listeners:ge}),Ce.data=Je))}Vw(Re,a)})}function Lc(r,a,d){return{instance:r,listener:a,currentTarget:d}}function $u(r,a){for(var d=a+"Capture",y=[];r!==null;){var _=r,P=_.stateNode;_.tag===5&&P!==null&&(_=P,P=xt(r,d),P!=null&&y.unshift(Lc(r,P,_)),P=xt(r,a),P!=null&&y.push(Lc(r,P,_))),r=r.return}return y}function xa(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Yw(r,a,d,y,_){for(var P=a._reactName,U=[];d!==null&&d!==y;){var ee=d,ie=ee.alternate,ge=ee.stateNode;if(ie!==null&&ie===y)break;ee.tag===5&&ge!==null&&(ee=ge,_?(ie=xt(d,P),ie!=null&&U.unshift(Lc(d,ie,ee))):_||(ie=xt(d,P),ie!=null&&U.push(Lc(d,ie,ee)))),d=d.return}U.length!==0&&r.push({event:a,listeners:U})}var _A=/\r\n?/g,xA=/\u0000|\uFFFD/g;function Qw(r){return(typeof r=="string"?r:""+r).replace(_A,`
`).replace(xA,"")}function Uu(r,a,d){if(a=Qw(a),Qw(r)!==a&&d)throw Error(n(425))}function qu(){}var Th=null,Ch=null;function _h(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var xh=typeof setTimeout=="function"?setTimeout:void 0,RA=typeof clearTimeout=="function"?clearTimeout:void 0,Zw=typeof Promise=="function"?Promise:void 0,kA=typeof queueMicrotask=="function"?queueMicrotask:typeof Zw<"u"?function(r){return Zw.resolve(null).then(r).catch(AA)}:xh;function AA(r){setTimeout(function(){throw r})}function Rh(r,a){var d=a,y=0;do{var _=d.nextSibling;if(r.removeChild(d),_&&_.nodeType===8)if(d=_.data,d==="/$"){if(y===0){r.removeChild(_),Mr(a);return}y--}else d!=="$"&&d!=="$?"&&d!=="$!"||y++;d=_}while(d);Mr(a)}function Ui(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return r}function eE(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var d=r.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return r;a--}else d==="/$"&&a++}r=r.previousSibling}return null}var Ra=Math.random().toString(36).slice(2),Ps="__reactFiber$"+Ra,jc="__reactProps$"+Ra,ni="__reactContainer$"+Ra,kh="__reactEvents$"+Ra,IA="__reactListeners$"+Ra,PA="__reactHandles$"+Ra;function Io(r){var a=r[Ps];if(a)return a;for(var d=r.parentNode;d;){if(a=d[ni]||d[Ps]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(r=eE(r);r!==null;){if(d=r[Ps])return d;r=eE(r)}return a}r=d,d=r.parentNode}return null}function Dc(r){return r=r[Ps]||r[ni],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function ka(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function Mu(r){return r[jc]||null}var Ah=[],Aa=-1;function qi(r){return{current:r}}function Nt(r){0>Aa||(r.current=Ah[Aa],Ah[Aa]=null,Aa--)}function kt(r,a){Aa++,Ah[Aa]=r.current,r.current=a}var Mi={},kr=qi(Mi),cn=qi(!1),Po=Mi;function Ia(r,a){var d=r.type.contextTypes;if(!d)return Mi;var y=r.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===a)return y.__reactInternalMemoizedMaskedChildContext;var _={},P;for(P in d)_[P]=a[P];return y&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=a,r.__reactInternalMemoizedMaskedChildContext=_),_}function ln(r){return r=r.childContextTypes,r!=null}function Hu(){Nt(cn),Nt(kr)}function tE(r,a,d){if(kr.current!==Mi)throw Error(n(168));kt(kr,a),kt(cn,d)}function rE(r,a,d){var y=r.stateNode;if(a=a.childContextTypes,typeof y.getChildContext!="function")return d;y=y.getChildContext();for(var _ in y)if(!(_ in a))throw Error(n(108,xe(r)||"Unknown",_));return ae({},d,y)}function Fu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Mi,Po=kr.current,kt(kr,r),kt(cn,cn.current),!0}function nE(r,a,d){var y=r.stateNode;if(!y)throw Error(n(169));d?(r=rE(r,a,Po),y.__reactInternalMemoizedMergedChildContext=r,Nt(cn),Nt(kr),kt(kr,r)):Nt(cn),kt(cn,d)}var si=null,Wu=!1,Ih=!1;function sE(r){si===null?si=[r]:si.push(r)}function OA(r){Wu=!0,sE(r)}function Hi(){if(!Ih&&si!==null){Ih=!0;var r=0,a=pt;try{var d=si;for(pt=1;r<d.length;r++){var y=d[r];do y=y(!0);while(y!==null)}si=null,Wu=!1}catch(_){throw si!==null&&(si=si.slice(r+1)),Un(Sn,Hi),_}finally{pt=a,Ih=!1}}return null}var Pa=[],Oa=0,Ku=null,Bu=0,Bn=[],zn=0,Oo=null,ii=1,oi="";function No(r,a){Pa[Oa++]=Bu,Pa[Oa++]=Ku,Ku=r,Bu=a}function iE(r,a,d){Bn[zn++]=ii,Bn[zn++]=oi,Bn[zn++]=Oo,Oo=r;var y=ii;r=oi;var _=32-qr(y)-1;y&=~(1<<_),d+=1;var P=32-qr(a)+_;if(30<P){var U=_-_%5;P=(y&(1<<U)-1).toString(32),y>>=U,_-=U,ii=1<<32-qr(a)+_|d<<_|y,oi=P+r}else ii=1<<P|d<<_|y,oi=r}function Ph(r){r.return!==null&&(No(r,1),iE(r,1,0))}function Oh(r){for(;r===Ku;)Ku=Pa[--Oa],Pa[Oa]=null,Bu=Pa[--Oa],Pa[Oa]=null;for(;r===Oo;)Oo=Bn[--zn],Bn[zn]=null,oi=Bn[--zn],Bn[zn]=null,ii=Bn[--zn],Bn[zn]=null}var xn=null,Rn=null,jt=!1,hs=null;function oE(r,a){var d=Xn(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=r,a=r.deletions,a===null?(r.deletions=[d],r.flags|=16):a.push(d)}function aE(r,a){switch(r.tag){case 5:var d=r.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(r.stateNode=a,xn=r,Rn=Ui(a.firstChild),!0):!1;case 6:return a=r.pendingProps===""||a.nodeType!==3?null:a,a!==null?(r.stateNode=a,xn=r,Rn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=Oo!==null?{id:ii,overflow:oi}:null,r.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=Xn(18,null,null,0),d.stateNode=a,d.return=r,r.child=d,xn=r,Rn=null,!0):!1;default:return!1}}function Nh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Lh(r){if(jt){var a=Rn;if(a){var d=a;if(!aE(r,a)){if(Nh(r))throw Error(n(418));a=Ui(d.nextSibling);var y=xn;a&&aE(r,a)?oE(y,d):(r.flags=r.flags&-4097|2,jt=!1,xn=r)}}else{if(Nh(r))throw Error(n(418));r.flags=r.flags&-4097|2,jt=!1,xn=r}}}function cE(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;xn=r}function zu(r){if(r!==xn)return!1;if(!jt)return cE(r),jt=!0,!1;var a;if((a=r.tag!==3)&&!(a=r.tag!==5)&&(a=r.type,a=a!=="head"&&a!=="body"&&!_h(r.type,r.memoizedProps)),a&&(a=Rn)){if(Nh(r))throw lE(),Error(n(418));for(;a;)oE(r,a),a=Ui(a.nextSibling)}if(cE(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8){var d=r.data;if(d==="/$"){if(a===0){Rn=Ui(r.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}r=r.nextSibling}Rn=null}}else Rn=xn?Ui(r.stateNode.nextSibling):null;return!0}function lE(){for(var r=Rn;r;)r=Ui(r.nextSibling)}function Na(){Rn=xn=null,jt=!1}function jh(r){hs===null?hs=[r]:hs.push(r)}var NA=R.ReactCurrentBatchConfig;function $c(r,a,d){if(r=d.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var y=d.stateNode}if(!y)throw Error(n(147,r));var _=y,P=""+r;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===P?a.ref:(a=function(U){var ee=_.refs;U===null?delete ee[P]:ee[P]=U},a._stringRef=P,a)}if(typeof r!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,r))}return r}function Gu(r,a){throw r=Object.prototype.toString.call(a),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r))}function uE(r){var a=r._init;return a(r._payload)}function dE(r){function a(he,le){if(r){var pe=he.deletions;pe===null?(he.deletions=[le],he.flags|=16):pe.push(le)}}function d(he,le){if(!r)return null;for(;le!==null;)a(he,le),le=le.sibling;return null}function y(he,le){for(he=new Map;le!==null;)le.key!==null?he.set(le.key,le):he.set(le.index,le),le=le.sibling;return he}function _(he,le){return he=Vi(he,le),he.index=0,he.sibling=null,he}function P(he,le,pe){return he.index=pe,r?(pe=he.alternate,pe!==null?(pe=pe.index,pe<le?(he.flags|=2,le):pe):(he.flags|=2,le)):(he.flags|=1048576,le)}function U(he){return r&&he.alternate===null&&(he.flags|=2),he}function ee(he,le,pe,Ae){return le===null||le.tag!==6?(le=xp(pe,he.mode,Ae),le.return=he,le):(le=_(le,pe),le.return=he,le)}function ie(he,le,pe,Ae){var Ke=pe.type;return Ke===O?Ce(he,le,pe.props.children,Ae,pe.key):le!==null&&(le.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===K&&uE(Ke)===le.type)?(Ae=_(le,pe.props),Ae.ref=$c(he,le,pe),Ae.return=he,Ae):(Ae=yd(pe.type,pe.key,pe.props,null,he.mode,Ae),Ae.ref=$c(he,le,pe),Ae.return=he,Ae)}function ge(he,le,pe,Ae){return le===null||le.tag!==4||le.stateNode.containerInfo!==pe.containerInfo||le.stateNode.implementation!==pe.implementation?(le=Rp(pe,he.mode,Ae),le.return=he,le):(le=_(le,pe.children||[]),le.return=he,le)}function Ce(he,le,pe,Ae,Ke){return le===null||le.tag!==7?(le=Ho(pe,he.mode,Ae,Ke),le.return=he,le):(le=_(le,pe),le.return=he,le)}function Re(he,le,pe){if(typeof le=="string"&&le!==""||typeof le=="number")return le=xp(""+le,he.mode,pe),le.return=he,le;if(typeof le=="object"&&le!==null){switch(le.$$typeof){case D:return pe=yd(le.type,le.key,le.props,null,he.mode,pe),pe.ref=$c(he,null,le),pe.return=he,pe;case A:return le=Rp(le,he.mode,pe),le.return=he,le;case K:var Ae=le._init;return Re(he,Ae(le._payload),pe)}if(ns(le)||te(le))return le=Ho(le,he.mode,pe,null),le.return=he,le;Gu(he,le)}return null}function be(he,le,pe,Ae){var Ke=le!==null?le.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number")return Ke!==null?null:ee(he,le,""+pe,Ae);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case D:return pe.key===Ke?ie(he,le,pe,Ae):null;case A:return pe.key===Ke?ge(he,le,pe,Ae):null;case K:return Ke=pe._init,be(he,le,Ke(pe._payload),Ae)}if(ns(pe)||te(pe))return Ke!==null?null:Ce(he,le,pe,Ae,null);Gu(he,pe)}return null}function je(he,le,pe,Ae,Ke){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return he=he.get(pe)||null,ee(le,he,""+Ae,Ke);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case D:return he=he.get(Ae.key===null?pe:Ae.key)||null,ie(le,he,Ae,Ke);case A:return he=he.get(Ae.key===null?pe:Ae.key)||null,ge(le,he,Ae,Ke);case K:var Ge=Ae._init;return je(he,le,pe,Ge(Ae._payload),Ke)}if(ns(Ae)||te(Ae))return he=he.get(pe)||null,Ce(le,he,Ae,Ke,null);Gu(le,Ae)}return null}function Me(he,le,pe,Ae){for(var Ke=null,Ge=null,Je=le,Ye=le=0,hr=null;Je!==null&&Ye<pe.length;Ye++){Je.index>Ye?(hr=Je,Je=null):hr=Je.sibling;var gt=be(he,Je,pe[Ye],Ae);if(gt===null){Je===null&&(Je=hr);break}r&&Je&&gt.alternate===null&&a(he,Je),le=P(gt,le,Ye),Ge===null?Ke=gt:Ge.sibling=gt,Ge=gt,Je=hr}if(Ye===pe.length)return d(he,Je),jt&&No(he,Ye),Ke;if(Je===null){for(;Ye<pe.length;Ye++)Je=Re(he,pe[Ye],Ae),Je!==null&&(le=P(Je,le,Ye),Ge===null?Ke=Je:Ge.sibling=Je,Ge=Je);return jt&&No(he,Ye),Ke}for(Je=y(he,Je);Ye<pe.length;Ye++)hr=je(Je,he,Ye,pe[Ye],Ae),hr!==null&&(r&&hr.alternate!==null&&Je.delete(hr.key===null?Ye:hr.key),le=P(hr,le,Ye),Ge===null?Ke=hr:Ge.sibling=hr,Ge=hr);return r&&Je.forEach(function(Xi){return a(he,Xi)}),jt&&No(he,Ye),Ke}function We(he,le,pe,Ae){var Ke=te(pe);if(typeof Ke!="function")throw Error(n(150));if(pe=Ke.call(pe),pe==null)throw Error(n(151));for(var Ge=Ke=null,Je=le,Ye=le=0,hr=null,gt=pe.next();Je!==null&&!gt.done;Ye++,gt=pe.next()){Je.index>Ye?(hr=Je,Je=null):hr=Je.sibling;var Xi=be(he,Je,gt.value,Ae);if(Xi===null){Je===null&&(Je=hr);break}r&&Je&&Xi.alternate===null&&a(he,Je),le=P(Xi,le,Ye),Ge===null?Ke=Xi:Ge.sibling=Xi,Ge=Xi,Je=hr}if(gt.done)return d(he,Je),jt&&No(he,Ye),Ke;if(Je===null){for(;!gt.done;Ye++,gt=pe.next())gt=Re(he,gt.value,Ae),gt!==null&&(le=P(gt,le,Ye),Ge===null?Ke=gt:Ge.sibling=gt,Ge=gt);return jt&&No(he,Ye),Ke}for(Je=y(he,Je);!gt.done;Ye++,gt=pe.next())gt=je(Je,he,Ye,gt.value,Ae),gt!==null&&(r&&gt.alternate!==null&&Je.delete(gt.key===null?Ye:gt.key),le=P(gt,le,Ye),Ge===null?Ke=gt:Ge.sibling=gt,Ge=gt);return r&&Je.forEach(function(fI){return a(he,fI)}),jt&&No(he,Ye),Ke}function zt(he,le,pe,Ae){if(typeof pe=="object"&&pe!==null&&pe.type===O&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case D:e:{for(var Ke=pe.key,Ge=le;Ge!==null;){if(Ge.key===Ke){if(Ke=pe.type,Ke===O){if(Ge.tag===7){d(he,Ge.sibling),le=_(Ge,pe.props.children),le.return=he,he=le;break e}}else if(Ge.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===K&&uE(Ke)===Ge.type){d(he,Ge.sibling),le=_(Ge,pe.props),le.ref=$c(he,Ge,pe),le.return=he,he=le;break e}d(he,Ge);break}else a(he,Ge);Ge=Ge.sibling}pe.type===O?(le=Ho(pe.props.children,he.mode,Ae,pe.key),le.return=he,he=le):(Ae=yd(pe.type,pe.key,pe.props,null,he.mode,Ae),Ae.ref=$c(he,le,pe),Ae.return=he,he=Ae)}return U(he);case A:e:{for(Ge=pe.key;le!==null;){if(le.key===Ge)if(le.tag===4&&le.stateNode.containerInfo===pe.containerInfo&&le.stateNode.implementation===pe.implementation){d(he,le.sibling),le=_(le,pe.children||[]),le.return=he,he=le;break e}else{d(he,le);break}else a(he,le);le=le.sibling}le=Rp(pe,he.mode,Ae),le.return=he,he=le}return U(he);case K:return Ge=pe._init,zt(he,le,Ge(pe._payload),Ae)}if(ns(pe))return Me(he,le,pe,Ae);if(te(pe))return We(he,le,pe,Ae);Gu(he,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"?(pe=""+pe,le!==null&&le.tag===6?(d(he,le.sibling),le=_(le,pe),le.return=he,he=le):(d(he,le),le=xp(pe,he.mode,Ae),le.return=he,he=le),U(he)):d(he,le)}return zt}var La=dE(!0),fE=dE(!1),Ju=qi(null),Vu=null,ja=null,Dh=null;function $h(){Dh=ja=Vu=null}function Uh(r){var a=Ju.current;Nt(Ju),r._currentValue=a}function qh(r,a,d){for(;r!==null;){var y=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,y!==null&&(y.childLanes|=a)):y!==null&&(y.childLanes&a)!==a&&(y.childLanes|=a),r===d)break;r=r.return}}function Da(r,a){Vu=r,Dh=ja=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&a)!==0&&(un=!0),r.firstContext=null)}function Gn(r){var a=r._currentValue;if(Dh!==r)if(r={context:r,memoizedValue:a,next:null},ja===null){if(Vu===null)throw Error(n(308));ja=r,Vu.dependencies={lanes:0,firstContext:r}}else ja=ja.next=r;return a}var Lo=null;function Mh(r){Lo===null?Lo=[r]:Lo.push(r)}function hE(r,a,d,y){var _=a.interleaved;return _===null?(d.next=d,Mh(a)):(d.next=_.next,_.next=d),a.interleaved=d,ai(r,y)}function ai(r,a){r.lanes|=a;var d=r.alternate;for(d!==null&&(d.lanes|=a),d=r,r=r.return;r!==null;)r.childLanes|=a,d=r.alternate,d!==null&&(d.childLanes|=a),d=r,r=r.return;return d.tag===3?d.stateNode:null}var Fi=!1;function Hh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pE(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function ci(r,a){return{eventTime:r,lane:a,tag:0,payload:null,callback:null,next:null}}function Wi(r,a,d){var y=r.updateQueue;if(y===null)return null;if(y=y.shared,(mt&2)!==0){var _=y.pending;return _===null?a.next=a:(a.next=_.next,_.next=a),y.pending=a,ai(r,d)}return _=y.interleaved,_===null?(a.next=a,Mh(y)):(a.next=_.next,_.next=a),y.interleaved=a,ai(r,d)}function Xu(r,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var y=a.lanes;y&=r.pendingLanes,d|=y,a.lanes=d,So(r,d)}}function mE(r,a){var d=r.updateQueue,y=r.alternate;if(y!==null&&(y=y.updateQueue,d===y)){var _=null,P=null;if(d=d.firstBaseUpdate,d!==null){do{var U={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};P===null?_=P=U:P=P.next=U,d=d.next}while(d!==null);P===null?_=P=a:P=P.next=a}else _=P=a;d={baseState:y.baseState,firstBaseUpdate:_,lastBaseUpdate:P,shared:y.shared,effects:y.effects},r.updateQueue=d;return}r=d.lastBaseUpdate,r===null?d.firstBaseUpdate=a:r.next=a,d.lastBaseUpdate=a}function Yu(r,a,d,y){var _=r.updateQueue;Fi=!1;var P=_.firstBaseUpdate,U=_.lastBaseUpdate,ee=_.shared.pending;if(ee!==null){_.shared.pending=null;var ie=ee,ge=ie.next;ie.next=null,U===null?P=ge:U.next=ge,U=ie;var Ce=r.alternate;Ce!==null&&(Ce=Ce.updateQueue,ee=Ce.lastBaseUpdate,ee!==U&&(ee===null?Ce.firstBaseUpdate=ge:ee.next=ge,Ce.lastBaseUpdate=ie))}if(P!==null){var Re=_.baseState;U=0,Ce=ge=ie=null,ee=P;do{var be=ee.lane,je=ee.eventTime;if((y&be)===be){Ce!==null&&(Ce=Ce.next={eventTime:je,lane:0,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null});e:{var Me=r,We=ee;switch(be=a,je=d,We.tag){case 1:if(Me=We.payload,typeof Me=="function"){Re=Me.call(je,Re,be);break e}Re=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=We.payload,be=typeof Me=="function"?Me.call(je,Re,be):Me,be==null)break e;Re=ae({},Re,be);break e;case 2:Fi=!0}}ee.callback!==null&&ee.lane!==0&&(r.flags|=64,be=_.effects,be===null?_.effects=[ee]:be.push(ee))}else je={eventTime:je,lane:be,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},Ce===null?(ge=Ce=je,ie=Re):Ce=Ce.next=je,U|=be;if(ee=ee.next,ee===null){if(ee=_.shared.pending,ee===null)break;be=ee,ee=be.next,be.next=null,_.lastBaseUpdate=be,_.shared.pending=null}}while(!0);if(Ce===null&&(ie=Re),_.baseState=ie,_.firstBaseUpdate=ge,_.lastBaseUpdate=Ce,a=_.shared.interleaved,a!==null){_=a;do U|=_.lane,_=_.next;while(_!==a)}else P===null&&(_.shared.lanes=0);$o|=U,r.lanes=U,r.memoizedState=Re}}function gE(r,a,d){if(r=a.effects,a.effects=null,r!==null)for(a=0;a<r.length;a++){var y=r[a],_=y.callback;if(_!==null){if(y.callback=null,y=d,typeof _!="function")throw Error(n(191,_));_.call(y)}}}var Uc={},Os=qi(Uc),qc=qi(Uc),Mc=qi(Uc);function jo(r){if(r===Uc)throw Error(n(174));return r}function Fh(r,a){switch(kt(Mc,a),kt(qc,r),kt(Os,Uc),r=a.nodeType,r){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:ke(null,"");break;default:r=r===8?a.parentNode:a,a=r.namespaceURI||null,r=r.tagName,a=ke(a,r)}Nt(Os),kt(Os,a)}function $a(){Nt(Os),Nt(qc),Nt(Mc)}function yE(r){jo(Mc.current);var a=jo(Os.current),d=ke(a,r.type);a!==d&&(kt(qc,r),kt(Os,d))}function Wh(r){qc.current===r&&(Nt(Os),Nt(qc))}var Ut=qi(0);function Qu(r){for(var a=r;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Kh=[];function Bh(){for(var r=0;r<Kh.length;r++)Kh[r]._workInProgressVersionPrimary=null;Kh.length=0}var Zu=R.ReactCurrentDispatcher,zh=R.ReactCurrentBatchConfig,Do=0,qt=null,or=null,dr=null,ed=!1,Hc=!1,Fc=0,LA=0;function Ar(){throw Error(n(321))}function Gh(r,a){if(a===null)return!1;for(var d=0;d<a.length&&d<r.length;d++)if(!fs(r[d],a[d]))return!1;return!0}function Jh(r,a,d,y,_,P){if(Do=P,qt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Zu.current=r===null||r.memoizedState===null?UA:qA,r=d(y,_),Hc){P=0;do{if(Hc=!1,Fc=0,25<=P)throw Error(n(301));P+=1,dr=or=null,a.updateQueue=null,Zu.current=MA,r=d(y,_)}while(Hc)}if(Zu.current=nd,a=or!==null&&or.next!==null,Do=0,dr=or=qt=null,ed=!1,a)throw Error(n(300));return r}function Vh(){var r=Fc!==0;return Fc=0,r}function Ns(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dr===null?qt.memoizedState=dr=r:dr=dr.next=r,dr}function Jn(){if(or===null){var r=qt.alternate;r=r!==null?r.memoizedState:null}else r=or.next;var a=dr===null?qt.memoizedState:dr.next;if(a!==null)dr=a,or=r;else{if(r===null)throw Error(n(310));or=r,r={memoizedState:or.memoizedState,baseState:or.baseState,baseQueue:or.baseQueue,queue:or.queue,next:null},dr===null?qt.memoizedState=dr=r:dr=dr.next=r}return dr}function Wc(r,a){return typeof a=="function"?a(r):a}function Xh(r){var a=Jn(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=r;var y=or,_=y.baseQueue,P=d.pending;if(P!==null){if(_!==null){var U=_.next;_.next=P.next,P.next=U}y.baseQueue=_=P,d.pending=null}if(_!==null){P=_.next,y=y.baseState;var ee=U=null,ie=null,ge=P;do{var Ce=ge.lane;if((Do&Ce)===Ce)ie!==null&&(ie=ie.next={lane:0,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),y=ge.hasEagerState?ge.eagerState:r(y,ge.action);else{var Re={lane:Ce,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null};ie===null?(ee=ie=Re,U=y):ie=ie.next=Re,qt.lanes|=Ce,$o|=Ce}ge=ge.next}while(ge!==null&&ge!==P);ie===null?U=y:ie.next=ee,fs(y,a.memoizedState)||(un=!0),a.memoizedState=y,a.baseState=U,a.baseQueue=ie,d.lastRenderedState=y}if(r=d.interleaved,r!==null){_=r;do P=_.lane,qt.lanes|=P,$o|=P,_=_.next;while(_!==r)}else _===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function Yh(r){var a=Jn(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=r;var y=d.dispatch,_=d.pending,P=a.memoizedState;if(_!==null){d.pending=null;var U=_=_.next;do P=r(P,U.action),U=U.next;while(U!==_);fs(P,a.memoizedState)||(un=!0),a.memoizedState=P,a.baseQueue===null&&(a.baseState=P),d.lastRenderedState=P}return[P,y]}function vE(){}function wE(r,a){var d=qt,y=Jn(),_=a(),P=!fs(y.memoizedState,_);if(P&&(y.memoizedState=_,un=!0),y=y.queue,Qh(bE.bind(null,d,y,r),[r]),y.getSnapshot!==a||P||dr!==null&&dr.memoizedState.tag&1){if(d.flags|=2048,Kc(9,SE.bind(null,d,y,_,a),void 0,null),fr===null)throw Error(n(349));(Do&30)!==0||EE(d,a,_)}return _}function EE(r,a,d){r.flags|=16384,r={getSnapshot:a,value:d},a=qt.updateQueue,a===null?(a={lastEffect:null,stores:null},qt.updateQueue=a,a.stores=[r]):(d=a.stores,d===null?a.stores=[r]:d.push(r))}function SE(r,a,d,y){a.value=d,a.getSnapshot=y,TE(a)&&CE(r)}function bE(r,a,d){return d(function(){TE(a)&&CE(r)})}function TE(r){var a=r.getSnapshot;r=r.value;try{var d=a();return!fs(r,d)}catch{return!0}}function CE(r){var a=ai(r,1);a!==null&&ys(a,r,1,-1)}function _E(r){var a=Ns();return typeof r=="function"&&(r=r()),a.memoizedState=a.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wc,lastRenderedState:r},a.queue=r,r=r.dispatch=$A.bind(null,qt,r),[a.memoizedState,r]}function Kc(r,a,d,y){return r={tag:r,create:a,destroy:d,deps:y,next:null},a=qt.updateQueue,a===null?(a={lastEffect:null,stores:null},qt.updateQueue=a,a.lastEffect=r.next=r):(d=a.lastEffect,d===null?a.lastEffect=r.next=r:(y=d.next,d.next=r,r.next=y,a.lastEffect=r)),r}function xE(){return Jn().memoizedState}function td(r,a,d,y){var _=Ns();qt.flags|=r,_.memoizedState=Kc(1|a,d,void 0,y===void 0?null:y)}function rd(r,a,d,y){var _=Jn();y=y===void 0?null:y;var P=void 0;if(or!==null){var U=or.memoizedState;if(P=U.destroy,y!==null&&Gh(y,U.deps)){_.memoizedState=Kc(a,d,P,y);return}}qt.flags|=r,_.memoizedState=Kc(1|a,d,P,y)}function RE(r,a){return td(8390656,8,r,a)}function Qh(r,a){return rd(2048,8,r,a)}function kE(r,a){return rd(4,2,r,a)}function AE(r,a){return rd(4,4,r,a)}function IE(r,a){if(typeof a=="function")return r=r(),a(r),function(){a(null)};if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function PE(r,a,d){return d=d!=null?d.concat([r]):null,rd(4,4,IE.bind(null,a,r),d)}function Zh(){}function OE(r,a){var d=Jn();a=a===void 0?null:a;var y=d.memoizedState;return y!==null&&a!==null&&Gh(a,y[1])?y[0]:(d.memoizedState=[r,a],r)}function NE(r,a){var d=Jn();a=a===void 0?null:a;var y=d.memoizedState;return y!==null&&a!==null&&Gh(a,y[1])?y[0]:(r=r(),d.memoizedState=[r,a],r)}function LE(r,a,d){return(Do&21)===0?(r.baseState&&(r.baseState=!1,un=!0),r.memoizedState=d):(fs(d,a)||(d=Ni(),qt.lanes|=d,$o|=d,r.baseState=!0),a)}function jA(r,a){var d=pt;pt=d!==0&&4>d?d:4,r(!0);var y=zh.transition;zh.transition={};try{r(!1),a()}finally{pt=d,zh.transition=y}}function jE(){return Jn().memoizedState}function DA(r,a,d){var y=Gi(r);if(d={lane:y,action:d,hasEagerState:!1,eagerState:null,next:null},DE(r))$E(a,d);else if(d=hE(r,a,d,y),d!==null){var _=Wr();ys(d,r,y,_),UE(d,a,y)}}function $A(r,a,d){var y=Gi(r),_={lane:y,action:d,hasEagerState:!1,eagerState:null,next:null};if(DE(r))$E(a,_);else{var P=r.alternate;if(r.lanes===0&&(P===null||P.lanes===0)&&(P=a.lastRenderedReducer,P!==null))try{var U=a.lastRenderedState,ee=P(U,d);if(_.hasEagerState=!0,_.eagerState=ee,fs(ee,U)){var ie=a.interleaved;ie===null?(_.next=_,Mh(a)):(_.next=ie.next,ie.next=_),a.interleaved=_;return}}catch{}finally{}d=hE(r,a,_,y),d!==null&&(_=Wr(),ys(d,r,y,_),UE(d,a,y))}}function DE(r){var a=r.alternate;return r===qt||a!==null&&a===qt}function $E(r,a){Hc=ed=!0;var d=r.pending;d===null?a.next=a:(a.next=d.next,d.next=a),r.pending=a}function UE(r,a,d){if((d&4194240)!==0){var y=a.lanes;y&=r.pendingLanes,d|=y,a.lanes=d,So(r,d)}}var nd={readContext:Gn,useCallback:Ar,useContext:Ar,useEffect:Ar,useImperativeHandle:Ar,useInsertionEffect:Ar,useLayoutEffect:Ar,useMemo:Ar,useReducer:Ar,useRef:Ar,useState:Ar,useDebugValue:Ar,useDeferredValue:Ar,useTransition:Ar,useMutableSource:Ar,useSyncExternalStore:Ar,useId:Ar,unstable_isNewReconciler:!1},UA={readContext:Gn,useCallback:function(r,a){return Ns().memoizedState=[r,a===void 0?null:a],r},useContext:Gn,useEffect:RE,useImperativeHandle:function(r,a,d){return d=d!=null?d.concat([r]):null,td(4194308,4,IE.bind(null,a,r),d)},useLayoutEffect:function(r,a){return td(4194308,4,r,a)},useInsertionEffect:function(r,a){return td(4,2,r,a)},useMemo:function(r,a){var d=Ns();return a=a===void 0?null:a,r=r(),d.memoizedState=[r,a],r},useReducer:function(r,a,d){var y=Ns();return a=d!==void 0?d(a):a,y.memoizedState=y.baseState=a,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:a},y.queue=r,r=r.dispatch=DA.bind(null,qt,r),[y.memoizedState,r]},useRef:function(r){var a=Ns();return r={current:r},a.memoizedState=r},useState:_E,useDebugValue:Zh,useDeferredValue:function(r){return Ns().memoizedState=r},useTransition:function(){var r=_E(!1),a=r[0];return r=jA.bind(null,r[1]),Ns().memoizedState=r,[a,r]},useMutableSource:function(){},useSyncExternalStore:function(r,a,d){var y=qt,_=Ns();if(jt){if(d===void 0)throw Error(n(407));d=d()}else{if(d=a(),fr===null)throw Error(n(349));(Do&30)!==0||EE(y,a,d)}_.memoizedState=d;var P={value:d,getSnapshot:a};return _.queue=P,RE(bE.bind(null,y,P,r),[r]),y.flags|=2048,Kc(9,SE.bind(null,y,P,d,a),void 0,null),d},useId:function(){var r=Ns(),a=fr.identifierPrefix;if(jt){var d=oi,y=ii;d=(y&~(1<<32-qr(y)-1)).toString(32)+d,a=":"+a+"R"+d,d=Fc++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=LA++,a=":"+a+"r"+d.toString(32)+":";return r.memoizedState=a},unstable_isNewReconciler:!1},qA={readContext:Gn,useCallback:OE,useContext:Gn,useEffect:Qh,useImperativeHandle:PE,useInsertionEffect:kE,useLayoutEffect:AE,useMemo:NE,useReducer:Xh,useRef:xE,useState:function(){return Xh(Wc)},useDebugValue:Zh,useDeferredValue:function(r){var a=Jn();return LE(a,or.memoizedState,r)},useTransition:function(){var r=Xh(Wc)[0],a=Jn().memoizedState;return[r,a]},useMutableSource:vE,useSyncExternalStore:wE,useId:jE,unstable_isNewReconciler:!1},MA={readContext:Gn,useCallback:OE,useContext:Gn,useEffect:Qh,useImperativeHandle:PE,useInsertionEffect:kE,useLayoutEffect:AE,useMemo:NE,useReducer:Yh,useRef:xE,useState:function(){return Yh(Wc)},useDebugValue:Zh,useDeferredValue:function(r){var a=Jn();return or===null?a.memoizedState=r:LE(a,or.memoizedState,r)},useTransition:function(){var r=Yh(Wc)[0],a=Jn().memoizedState;return[r,a]},useMutableSource:vE,useSyncExternalStore:wE,useId:jE,unstable_isNewReconciler:!1};function ps(r,a){if(r&&r.defaultProps){a=ae({},a),r=r.defaultProps;for(var d in r)a[d]===void 0&&(a[d]=r[d]);return a}return a}function ep(r,a,d,y){a=r.memoizedState,d=d(y,a),d=d==null?a:ae({},a,d),r.memoizedState=d,r.lanes===0&&(r.updateQueue.baseState=d)}var sd={isMounted:function(r){return(r=r._reactInternals)?Ur(r)===r:!1},enqueueSetState:function(r,a,d){r=r._reactInternals;var y=Wr(),_=Gi(r),P=ci(y,_);P.payload=a,d!=null&&(P.callback=d),a=Wi(r,P,_),a!==null&&(ys(a,r,_,y),Xu(a,r,_))},enqueueReplaceState:function(r,a,d){r=r._reactInternals;var y=Wr(),_=Gi(r),P=ci(y,_);P.tag=1,P.payload=a,d!=null&&(P.callback=d),a=Wi(r,P,_),a!==null&&(ys(a,r,_,y),Xu(a,r,_))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var d=Wr(),y=Gi(r),_=ci(d,y);_.tag=2,a!=null&&(_.callback=a),a=Wi(r,_,y),a!==null&&(ys(a,r,y,d),Xu(a,r,y))}};function qE(r,a,d,y,_,P,U){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(y,P,U):a.prototype&&a.prototype.isPureReactComponent?!Ic(d,y)||!Ic(_,P):!0}function ME(r,a,d){var y=!1,_=Mi,P=a.contextType;return typeof P=="object"&&P!==null?P=Gn(P):(_=ln(a)?Po:kr.current,y=a.contextTypes,P=(y=y!=null)?Ia(r,_):Mi),a=new a(d,P),r.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=sd,r.stateNode=a,a._reactInternals=r,y&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=_,r.__reactInternalMemoizedMaskedChildContext=P),a}function HE(r,a,d,y){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,y),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,y),a.state!==r&&sd.enqueueReplaceState(a,a.state,null)}function tp(r,a,d,y){var _=r.stateNode;_.props=d,_.state=r.memoizedState,_.refs={},Hh(r);var P=a.contextType;typeof P=="object"&&P!==null?_.context=Gn(P):(P=ln(a)?Po:kr.current,_.context=Ia(r,P)),_.state=r.memoizedState,P=a.getDerivedStateFromProps,typeof P=="function"&&(ep(r,a,P,d),_.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(a=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),a!==_.state&&sd.enqueueReplaceState(_,_.state,null),Yu(r,d,_,y),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308)}function Ua(r,a){try{var d="",y=a;do d+=re(y),y=y.return;while(y);var _=d}catch(P){_=`
Error generating stack: `+P.message+`
`+P.stack}return{value:r,source:a,stack:_,digest:null}}function rp(r,a,d){return{value:r,source:null,stack:d??null,digest:a??null}}function np(r,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var HA=typeof WeakMap=="function"?WeakMap:Map;function FE(r,a,d){d=ci(-1,d),d.tag=3,d.payload={element:null};var y=a.value;return d.callback=function(){dd||(dd=!0,vp=y),np(r,a)},d}function WE(r,a,d){d=ci(-1,d),d.tag=3;var y=r.type.getDerivedStateFromError;if(typeof y=="function"){var _=a.value;d.payload=function(){return y(_)},d.callback=function(){np(r,a)}}var P=r.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(d.callback=function(){np(r,a),typeof y!="function"&&(Bi===null?Bi=new Set([this]):Bi.add(this));var U=a.stack;this.componentDidCatch(a.value,{componentStack:U!==null?U:""})}),d}function KE(r,a,d){var y=r.pingCache;if(y===null){y=r.pingCache=new HA;var _=new Set;y.set(a,_)}else _=y.get(a),_===void 0&&(_=new Set,y.set(a,_));_.has(d)||(_.add(d),r=tI.bind(null,r,a,d),a.then(r,r))}function BE(r){do{var a;if((a=r.tag===13)&&(a=r.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return r;r=r.return}while(r!==null);return null}function zE(r,a,d,y,_){return(r.mode&1)===0?(r===a?r.flags|=65536:(r.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=ci(-1,1),a.tag=2,Wi(d,a,1))),d.lanes|=1),r):(r.flags|=65536,r.lanes=_,r)}var FA=R.ReactCurrentOwner,un=!1;function Fr(r,a,d,y){a.child=r===null?fE(a,null,d,y):La(a,r.child,d,y)}function GE(r,a,d,y,_){d=d.render;var P=a.ref;return Da(a,_),y=Jh(r,a,d,y,P,_),d=Vh(),r!==null&&!un?(a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~_,li(r,a,_)):(jt&&d&&Ph(a),a.flags|=1,Fr(r,a,y,_),a.child)}function JE(r,a,d,y,_){if(r===null){var P=d.type;return typeof P=="function"&&!_p(P)&&P.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=P,VE(r,a,P,y,_)):(r=yd(d.type,null,y,a,a.mode,_),r.ref=a.ref,r.return=a,a.child=r)}if(P=r.child,(r.lanes&_)===0){var U=P.memoizedProps;if(d=d.compare,d=d!==null?d:Ic,d(U,y)&&r.ref===a.ref)return li(r,a,_)}return a.flags|=1,r=Vi(P,y),r.ref=a.ref,r.return=a,a.child=r}function VE(r,a,d,y,_){if(r!==null){var P=r.memoizedProps;if(Ic(P,y)&&r.ref===a.ref)if(un=!1,a.pendingProps=y=P,(r.lanes&_)!==0)(r.flags&131072)!==0&&(un=!0);else return a.lanes=r.lanes,li(r,a,_)}return sp(r,a,d,y,_)}function XE(r,a,d){var y=a.pendingProps,_=y.children,P=r!==null?r.memoizedState:null;if(y.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(Ma,kn),kn|=d;else{if((d&1073741824)===0)return r=P!==null?P.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:r,cachePool:null,transitions:null},a.updateQueue=null,kt(Ma,kn),kn|=r,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=P!==null?P.baseLanes:d,kt(Ma,kn),kn|=y}else P!==null?(y=P.baseLanes|d,a.memoizedState=null):y=d,kt(Ma,kn),kn|=y;return Fr(r,a,_,d),a.child}function YE(r,a){var d=a.ref;(r===null&&d!==null||r!==null&&r.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function sp(r,a,d,y,_){var P=ln(d)?Po:kr.current;return P=Ia(a,P),Da(a,_),d=Jh(r,a,d,y,P,_),y=Vh(),r!==null&&!un?(a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~_,li(r,a,_)):(jt&&y&&Ph(a),a.flags|=1,Fr(r,a,d,_),a.child)}function QE(r,a,d,y,_){if(ln(d)){var P=!0;Fu(a)}else P=!1;if(Da(a,_),a.stateNode===null)od(r,a),ME(a,d,y),tp(a,d,y,_),y=!0;else if(r===null){var U=a.stateNode,ee=a.memoizedProps;U.props=ee;var ie=U.context,ge=d.contextType;typeof ge=="object"&&ge!==null?ge=Gn(ge):(ge=ln(d)?Po:kr.current,ge=Ia(a,ge));var Ce=d.getDerivedStateFromProps,Re=typeof Ce=="function"||typeof U.getSnapshotBeforeUpdate=="function";Re||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(ee!==y||ie!==ge)&&HE(a,U,y,ge),Fi=!1;var be=a.memoizedState;U.state=be,Yu(a,y,U,_),ie=a.memoizedState,ee!==y||be!==ie||cn.current||Fi?(typeof Ce=="function"&&(ep(a,d,Ce,y),ie=a.memoizedState),(ee=Fi||qE(a,d,ee,y,be,ie,ge))?(Re||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(a.flags|=4194308)):(typeof U.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=y,a.memoizedState=ie),U.props=y,U.state=ie,U.context=ge,y=ee):(typeof U.componentDidMount=="function"&&(a.flags|=4194308),y=!1)}else{U=a.stateNode,pE(r,a),ee=a.memoizedProps,ge=a.type===a.elementType?ee:ps(a.type,ee),U.props=ge,Re=a.pendingProps,be=U.context,ie=d.contextType,typeof ie=="object"&&ie!==null?ie=Gn(ie):(ie=ln(d)?Po:kr.current,ie=Ia(a,ie));var je=d.getDerivedStateFromProps;(Ce=typeof je=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(ee!==Re||be!==ie)&&HE(a,U,y,ie),Fi=!1,be=a.memoizedState,U.state=be,Yu(a,y,U,_);var Me=a.memoizedState;ee!==Re||be!==Me||cn.current||Fi?(typeof je=="function"&&(ep(a,d,je,y),Me=a.memoizedState),(ge=Fi||qE(a,d,ge,y,be,Me,ie)||!1)?(Ce||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(y,Me,ie),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(y,Me,ie)),typeof U.componentDidUpdate=="function"&&(a.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof U.componentDidUpdate!="function"||ee===r.memoizedProps&&be===r.memoizedState||(a.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||ee===r.memoizedProps&&be===r.memoizedState||(a.flags|=1024),a.memoizedProps=y,a.memoizedState=Me),U.props=y,U.state=Me,U.context=ie,y=ge):(typeof U.componentDidUpdate!="function"||ee===r.memoizedProps&&be===r.memoizedState||(a.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||ee===r.memoizedProps&&be===r.memoizedState||(a.flags|=1024),y=!1)}return ip(r,a,d,y,P,_)}function ip(r,a,d,y,_,P){YE(r,a);var U=(a.flags&128)!==0;if(!y&&!U)return _&&nE(a,d,!1),li(r,a,P);y=a.stateNode,FA.current=a;var ee=U&&typeof d.getDerivedStateFromError!="function"?null:y.render();return a.flags|=1,r!==null&&U?(a.child=La(a,r.child,null,P),a.child=La(a,null,ee,P)):Fr(r,a,ee,P),a.memoizedState=y.state,_&&nE(a,d,!0),a.child}function ZE(r){var a=r.stateNode;a.pendingContext?tE(r,a.pendingContext,a.pendingContext!==a.context):a.context&&tE(r,a.context,!1),Fh(r,a.containerInfo)}function eS(r,a,d,y,_){return Na(),jh(_),a.flags|=256,Fr(r,a,d,y),a.child}var op={dehydrated:null,treeContext:null,retryLane:0};function ap(r){return{baseLanes:r,cachePool:null,transitions:null}}function tS(r,a,d){var y=a.pendingProps,_=Ut.current,P=!1,U=(a.flags&128)!==0,ee;if((ee=U)||(ee=r!==null&&r.memoizedState===null?!1:(_&2)!==0),ee?(P=!0,a.flags&=-129):(r===null||r.memoizedState!==null)&&(_|=1),kt(Ut,_&1),r===null)return Lh(a),r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((a.mode&1)===0?a.lanes=1:r.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(U=y.children,r=y.fallback,P?(y=a.mode,P=a.child,U={mode:"hidden",children:U},(y&1)===0&&P!==null?(P.childLanes=0,P.pendingProps=U):P=vd(U,y,0,null),r=Ho(r,y,d,null),P.return=a,r.return=a,P.sibling=r,a.child=P,a.child.memoizedState=ap(d),a.memoizedState=op,r):cp(a,U));if(_=r.memoizedState,_!==null&&(ee=_.dehydrated,ee!==null))return WA(r,a,U,y,ee,_,d);if(P){P=y.fallback,U=a.mode,_=r.child,ee=_.sibling;var ie={mode:"hidden",children:y.children};return(U&1)===0&&a.child!==_?(y=a.child,y.childLanes=0,y.pendingProps=ie,a.deletions=null):(y=Vi(_,ie),y.subtreeFlags=_.subtreeFlags&14680064),ee!==null?P=Vi(ee,P):(P=Ho(P,U,d,null),P.flags|=2),P.return=a,y.return=a,y.sibling=P,a.child=y,y=P,P=a.child,U=r.child.memoizedState,U=U===null?ap(d):{baseLanes:U.baseLanes|d,cachePool:null,transitions:U.transitions},P.memoizedState=U,P.childLanes=r.childLanes&~d,a.memoizedState=op,y}return P=r.child,r=P.sibling,y=Vi(P,{mode:"visible",children:y.children}),(a.mode&1)===0&&(y.lanes=d),y.return=a,y.sibling=null,r!==null&&(d=a.deletions,d===null?(a.deletions=[r],a.flags|=16):d.push(r)),a.child=y,a.memoizedState=null,y}function cp(r,a){return a=vd({mode:"visible",children:a},r.mode,0,null),a.return=r,r.child=a}function id(r,a,d,y){return y!==null&&jh(y),La(a,r.child,null,d),r=cp(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function WA(r,a,d,y,_,P,U){if(d)return a.flags&256?(a.flags&=-257,y=rp(Error(n(422))),id(r,a,U,y)):a.memoizedState!==null?(a.child=r.child,a.flags|=128,null):(P=y.fallback,_=a.mode,y=vd({mode:"visible",children:y.children},_,0,null),P=Ho(P,_,U,null),P.flags|=2,y.return=a,P.return=a,y.sibling=P,a.child=y,(a.mode&1)!==0&&La(a,r.child,null,U),a.child.memoizedState=ap(U),a.memoizedState=op,P);if((a.mode&1)===0)return id(r,a,U,null);if(_.data==="$!"){if(y=_.nextSibling&&_.nextSibling.dataset,y)var ee=y.dgst;return y=ee,P=Error(n(419)),y=rp(P,y,void 0),id(r,a,U,y)}if(ee=(U&r.childLanes)!==0,un||ee){if(y=fr,y!==null){switch(U&-U){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=(_&(y.suspendedLanes|U))!==0?0:_,_!==0&&_!==P.retryLane&&(P.retryLane=_,ai(r,_),ys(y,r,_,-1))}return Cp(),y=rp(Error(n(421))),id(r,a,U,y)}return _.data==="$?"?(a.flags|=128,a.child=r.child,a=rI.bind(null,r),_._reactRetry=a,null):(r=P.treeContext,Rn=Ui(_.nextSibling),xn=a,jt=!0,hs=null,r!==null&&(Bn[zn++]=ii,Bn[zn++]=oi,Bn[zn++]=Oo,ii=r.id,oi=r.overflow,Oo=a),a=cp(a,y.children),a.flags|=4096,a)}function rS(r,a,d){r.lanes|=a;var y=r.alternate;y!==null&&(y.lanes|=a),qh(r.return,a,d)}function lp(r,a,d,y,_){var P=r.memoizedState;P===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:y,tail:d,tailMode:_}:(P.isBackwards=a,P.rendering=null,P.renderingStartTime=0,P.last=y,P.tail=d,P.tailMode=_)}function nS(r,a,d){var y=a.pendingProps,_=y.revealOrder,P=y.tail;if(Fr(r,a,y.children,d),y=Ut.current,(y&2)!==0)y=y&1|2,a.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&rS(r,d,a);else if(r.tag===19)rS(r,d,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}y&=1}if(kt(Ut,y),(a.mode&1)===0)a.memoizedState=null;else switch(_){case"forwards":for(d=a.child,_=null;d!==null;)r=d.alternate,r!==null&&Qu(r)===null&&(_=d),d=d.sibling;d=_,d===null?(_=a.child,a.child=null):(_=d.sibling,d.sibling=null),lp(a,!1,_,d,P);break;case"backwards":for(d=null,_=a.child,a.child=null;_!==null;){if(r=_.alternate,r!==null&&Qu(r)===null){a.child=_;break}r=_.sibling,_.sibling=d,d=_,_=r}lp(a,!0,d,null,P);break;case"together":lp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function od(r,a){(a.mode&1)===0&&r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2)}function li(r,a,d){if(r!==null&&(a.dependencies=r.dependencies),$o|=a.lanes,(d&a.childLanes)===0)return null;if(r!==null&&a.child!==r.child)throw Error(n(153));if(a.child!==null){for(r=a.child,d=Vi(r,r.pendingProps),a.child=d,d.return=a;r.sibling!==null;)r=r.sibling,d=d.sibling=Vi(r,r.pendingProps),d.return=a;d.sibling=null}return a.child}function KA(r,a,d){switch(a.tag){case 3:ZE(a),Na();break;case 5:yE(a);break;case 1:ln(a.type)&&Fu(a);break;case 4:Fh(a,a.stateNode.containerInfo);break;case 10:var y=a.type._context,_=a.memoizedProps.value;kt(Ju,y._currentValue),y._currentValue=_;break;case 13:if(y=a.memoizedState,y!==null)return y.dehydrated!==null?(kt(Ut,Ut.current&1),a.flags|=128,null):(d&a.child.childLanes)!==0?tS(r,a,d):(kt(Ut,Ut.current&1),r=li(r,a,d),r!==null?r.sibling:null);kt(Ut,Ut.current&1);break;case 19:if(y=(d&a.childLanes)!==0,(r.flags&128)!==0){if(y)return nS(r,a,d);a.flags|=128}if(_=a.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),kt(Ut,Ut.current),y)break;return null;case 22:case 23:return a.lanes=0,XE(r,a,d)}return li(r,a,d)}var sS,up,iS,oS;sS=function(r,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)r.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},up=function(){},iS=function(r,a,d,y){var _=r.memoizedProps;if(_!==y){r=a.stateNode,jo(Os.current);var P=null;switch(d){case"input":_=Te(r,_),y=Te(r,y),P=[];break;case"select":_=ae({},_,{value:void 0}),y=ae({},y,{value:void 0}),P=[];break;case"textarea":_=Kt(r,_),y=Kt(r,y),P=[];break;default:typeof _.onClick!="function"&&typeof y.onClick=="function"&&(r.onclick=qu)}xr(d,y);var U;d=null;for(ge in _)if(!y.hasOwnProperty(ge)&&_.hasOwnProperty(ge)&&_[ge]!=null)if(ge==="style"){var ee=_[ge];for(U in ee)ee.hasOwnProperty(U)&&(d||(d={}),d[U]="")}else ge!=="dangerouslySetInnerHTML"&&ge!=="children"&&ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&ge!=="autoFocus"&&(c.hasOwnProperty(ge)?P||(P=[]):(P=P||[]).push(ge,null));for(ge in y){var ie=y[ge];if(ee=_?.[ge],y.hasOwnProperty(ge)&&ie!==ee&&(ie!=null||ee!=null))if(ge==="style")if(ee){for(U in ee)!ee.hasOwnProperty(U)||ie&&ie.hasOwnProperty(U)||(d||(d={}),d[U]="");for(U in ie)ie.hasOwnProperty(U)&&ee[U]!==ie[U]&&(d||(d={}),d[U]=ie[U])}else d||(P||(P=[]),P.push(ge,d)),d=ie;else ge==="dangerouslySetInnerHTML"?(ie=ie?ie.__html:void 0,ee=ee?ee.__html:void 0,ie!=null&&ee!==ie&&(P=P||[]).push(ge,ie)):ge==="children"?typeof ie!="string"&&typeof ie!="number"||(P=P||[]).push(ge,""+ie):ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&(c.hasOwnProperty(ge)?(ie!=null&&ge==="onScroll"&&Ot("scroll",r),P||ee===ie||(P=[])):(P=P||[]).push(ge,ie))}d&&(P=P||[]).push("style",d);var ge=P;(a.updateQueue=ge)&&(a.flags|=4)}},oS=function(r,a,d,y){d!==y&&(a.flags|=4)};function Bc(r,a){if(!jt)switch(r.tailMode){case"hidden":a=r.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?r.tail=null:d.sibling=null;break;case"collapsed":d=r.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:y.sibling=null}}function Ir(r){var a=r.alternate!==null&&r.alternate.child===r.child,d=0,y=0;if(a)for(var _=r.child;_!==null;)d|=_.lanes|_.childLanes,y|=_.subtreeFlags&14680064,y|=_.flags&14680064,_.return=r,_=_.sibling;else for(_=r.child;_!==null;)d|=_.lanes|_.childLanes,y|=_.subtreeFlags,y|=_.flags,_.return=r,_=_.sibling;return r.subtreeFlags|=y,r.childLanes=d,a}function BA(r,a,d){var y=a.pendingProps;switch(Oh(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ir(a),null;case 1:return ln(a.type)&&Hu(),Ir(a),null;case 3:return y=a.stateNode,$a(),Nt(cn),Nt(kr),Bh(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(r===null||r.child===null)&&(zu(a)?a.flags|=4:r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,hs!==null&&(Sp(hs),hs=null))),up(r,a),Ir(a),null;case 5:Wh(a);var _=jo(Mc.current);if(d=a.type,r!==null&&a.stateNode!=null)iS(r,a,d,y,_),r.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!y){if(a.stateNode===null)throw Error(n(166));return Ir(a),null}if(r=jo(Os.current),zu(a)){y=a.stateNode,d=a.type;var P=a.memoizedProps;switch(y[Ps]=a,y[jc]=P,r=(a.mode&1)!==0,d){case"dialog":Ot("cancel",y),Ot("close",y);break;case"iframe":case"object":case"embed":Ot("load",y);break;case"video":case"audio":for(_=0;_<Oc.length;_++)Ot(Oc[_],y);break;case"source":Ot("error",y);break;case"img":case"image":case"link":Ot("error",y),Ot("load",y);break;case"details":Ot("toggle",y);break;case"input":nt(y,P),Ot("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!P.multiple},Ot("invalid",y);break;case"textarea":Dr(y,P),Ot("invalid",y)}xr(d,P),_=null;for(var U in P)if(P.hasOwnProperty(U)){var ee=P[U];U==="children"?typeof ee=="string"?y.textContent!==ee&&(P.suppressHydrationWarning!==!0&&Uu(y.textContent,ee,r),_=["children",ee]):typeof ee=="number"&&y.textContent!==""+ee&&(P.suppressHydrationWarning!==!0&&Uu(y.textContent,ee,r),_=["children",""+ee]):c.hasOwnProperty(U)&&ee!=null&&U==="onScroll"&&Ot("scroll",y)}switch(d){case"input":Dt(y),Ws(y,P,!0);break;case"textarea":Dt(y),ga(y);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(y.onclick=qu)}y=_,a.updateQueue=y,y!==null&&(a.flags|=4)}else{U=_.nodeType===9?_:_.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=J(d)),r==="http://www.w3.org/1999/xhtml"?d==="script"?(r=U.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof y.is=="string"?r=U.createElement(d,{is:y.is}):(r=U.createElement(d),d==="select"&&(U=r,y.multiple?U.multiple=!0:y.size&&(U.size=y.size))):r=U.createElementNS(r,d),r[Ps]=a,r[jc]=y,sS(r,a,!1,!1),a.stateNode=r;e:{switch(U=ss(d,y),d){case"dialog":Ot("cancel",r),Ot("close",r),_=y;break;case"iframe":case"object":case"embed":Ot("load",r),_=y;break;case"video":case"audio":for(_=0;_<Oc.length;_++)Ot(Oc[_],r);_=y;break;case"source":Ot("error",r),_=y;break;case"img":case"image":case"link":Ot("error",r),Ot("load",r),_=y;break;case"details":Ot("toggle",r),_=y;break;case"input":nt(r,y),_=Te(r,y),Ot("invalid",r);break;case"option":_=y;break;case"select":r._wrapperState={wasMultiple:!!y.multiple},_=ae({},y,{value:void 0}),Ot("invalid",r);break;case"textarea":Dr(r,y),_=Kt(r,y),Ot("invalid",r);break;default:_=y}xr(d,_),ee=_;for(P in ee)if(ee.hasOwnProperty(P)){var ie=ee[P];P==="style"?Ri(r,ie):P==="dangerouslySetInnerHTML"?(ie=ie?ie.__html:void 0,ie!=null&&Ln(r,ie)):P==="children"?typeof ie=="string"?(d!=="textarea"||ie!=="")&&Cr(r,ie):typeof ie=="number"&&Cr(r,""+ie):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(c.hasOwnProperty(P)?ie!=null&&P==="onScroll"&&Ot("scroll",r):ie!=null&&I(r,P,ie,U))}switch(d){case"input":Dt(r),Ws(r,y,!1);break;case"textarea":Dt(r),ga(r);break;case"option":y.value!=null&&r.setAttribute("value",""+Oe(y.value));break;case"select":r.multiple=!!y.multiple,P=y.value,P!=null?Nn(r,!!y.multiple,P,!1):y.defaultValue!=null&&Nn(r,!!y.multiple,y.defaultValue,!0);break;default:typeof _.onClick=="function"&&(r.onclick=qu)}switch(d){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Ir(a),null;case 6:if(r&&a.stateNode!=null)oS(r,a,r.memoizedProps,y);else{if(typeof y!="string"&&a.stateNode===null)throw Error(n(166));if(d=jo(Mc.current),jo(Os.current),zu(a)){if(y=a.stateNode,d=a.memoizedProps,y[Ps]=a,(P=y.nodeValue!==d)&&(r=xn,r!==null))switch(r.tag){case 3:Uu(y.nodeValue,d,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Uu(y.nodeValue,d,(r.mode&1)!==0)}P&&(a.flags|=4)}else y=(d.nodeType===9?d:d.ownerDocument).createTextNode(y),y[Ps]=a,a.stateNode=y}return Ir(a),null;case 13:if(Nt(Ut),y=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(jt&&Rn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)lE(),Na(),a.flags|=98560,P=!1;else if(P=zu(a),y!==null&&y.dehydrated!==null){if(r===null){if(!P)throw Error(n(318));if(P=a.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(n(317));P[Ps]=a}else Na(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ir(a),P=!1}else hs!==null&&(Sp(hs),hs=null),P=!0;if(!P)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=d,a):(y=y!==null,y!==(r!==null&&r.memoizedState!==null)&&y&&(a.child.flags|=8192,(a.mode&1)!==0&&(r===null||(Ut.current&1)!==0?ar===0&&(ar=3):Cp())),a.updateQueue!==null&&(a.flags|=4),Ir(a),null);case 4:return $a(),up(r,a),r===null&&Nc(a.stateNode.containerInfo),Ir(a),null;case 10:return Uh(a.type._context),Ir(a),null;case 17:return ln(a.type)&&Hu(),Ir(a),null;case 19:if(Nt(Ut),P=a.memoizedState,P===null)return Ir(a),null;if(y=(a.flags&128)!==0,U=P.rendering,U===null)if(y)Bc(P,!1);else{if(ar!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(U=Qu(r),U!==null){for(a.flags|=128,Bc(P,!1),y=U.updateQueue,y!==null&&(a.updateQueue=y,a.flags|=4),a.subtreeFlags=0,y=d,d=a.child;d!==null;)P=d,r=y,P.flags&=14680066,U=P.alternate,U===null?(P.childLanes=0,P.lanes=r,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=U.childLanes,P.lanes=U.lanes,P.child=U.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=U.memoizedProps,P.memoizedState=U.memoizedState,P.updateQueue=U.updateQueue,P.type=U.type,r=U.dependencies,P.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),d=d.sibling;return kt(Ut,Ut.current&1|2),a.child}r=r.sibling}P.tail!==null&&It()>Ha&&(a.flags|=128,y=!0,Bc(P,!1),a.lanes=4194304)}else{if(!y)if(r=Qu(U),r!==null){if(a.flags|=128,y=!0,d=r.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),Bc(P,!0),P.tail===null&&P.tailMode==="hidden"&&!U.alternate&&!jt)return Ir(a),null}else 2*It()-P.renderingStartTime>Ha&&d!==1073741824&&(a.flags|=128,y=!0,Bc(P,!1),a.lanes=4194304);P.isBackwards?(U.sibling=a.child,a.child=U):(d=P.last,d!==null?d.sibling=U:a.child=U,P.last=U)}return P.tail!==null?(a=P.tail,P.rendering=a,P.tail=a.sibling,P.renderingStartTime=It(),a.sibling=null,d=Ut.current,kt(Ut,y?d&1|2:d&1),a):(Ir(a),null);case 22:case 23:return Tp(),y=a.memoizedState!==null,r!==null&&r.memoizedState!==null!==y&&(a.flags|=8192),y&&(a.mode&1)!==0?(kn&1073741824)!==0&&(Ir(a),a.subtreeFlags&6&&(a.flags|=8192)):Ir(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function zA(r,a){switch(Oh(a),a.tag){case 1:return ln(a.type)&&Hu(),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return $a(),Nt(cn),Nt(kr),Bh(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 5:return Wh(a),null;case 13:if(Nt(Ut),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Na()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return Nt(Ut),null;case 4:return $a(),null;case 10:return Uh(a.type._context),null;case 22:case 23:return Tp(),null;case 24:return null;default:return null}}var ad=!1,Pr=!1,GA=typeof WeakSet=="function"?WeakSet:Set,De=null;function qa(r,a){var d=r.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(y){Wt(r,a,y)}else d.current=null}function dp(r,a,d){try{d()}catch(y){Wt(r,a,y)}}var aS=!1;function JA(r,a){if(Th=an,r=qw(),mh(r)){if("selectionStart"in r)var d={start:r.selectionStart,end:r.selectionEnd};else e:{d=(d=r.ownerDocument)&&d.defaultView||window;var y=d.getSelection&&d.getSelection();if(y&&y.rangeCount!==0){d=y.anchorNode;var _=y.anchorOffset,P=y.focusNode;y=y.focusOffset;try{d.nodeType,P.nodeType}catch{d=null;break e}var U=0,ee=-1,ie=-1,ge=0,Ce=0,Re=r,be=null;t:for(;;){for(var je;Re!==d||_!==0&&Re.nodeType!==3||(ee=U+_),Re!==P||y!==0&&Re.nodeType!==3||(ie=U+y),Re.nodeType===3&&(U+=Re.nodeValue.length),(je=Re.firstChild)!==null;)be=Re,Re=je;for(;;){if(Re===r)break t;if(be===d&&++ge===_&&(ee=U),be===P&&++Ce===y&&(ie=U),(je=Re.nextSibling)!==null)break;Re=be,be=Re.parentNode}Re=je}d=ee===-1||ie===-1?null:{start:ee,end:ie}}else d=null}d=d||{start:0,end:0}}else d=null;for(Ch={focusedElem:r,selectionRange:d},an=!1,De=a;De!==null;)if(a=De,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,De=r;else for(;De!==null;){a=De;try{var Me=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Me!==null){var We=Me.memoizedProps,zt=Me.memoizedState,he=a.stateNode,le=he.getSnapshotBeforeUpdate(a.elementType===a.type?We:ps(a.type,We),zt);he.__reactInternalSnapshotBeforeUpdate=le}break;case 3:var pe=a.stateNode.containerInfo;pe.nodeType===1?pe.textContent="":pe.nodeType===9&&pe.documentElement&&pe.removeChild(pe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ae){Wt(a,a.return,Ae)}if(r=a.sibling,r!==null){r.return=a.return,De=r;break}De=a.return}return Me=aS,aS=!1,Me}function zc(r,a,d){var y=a.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var _=y=y.next;do{if((_.tag&r)===r){var P=_.destroy;_.destroy=void 0,P!==void 0&&dp(a,d,P)}_=_.next}while(_!==y)}}function cd(r,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&r)===r){var y=d.create;d.destroy=y()}d=d.next}while(d!==a)}}function fp(r){var a=r.ref;if(a!==null){var d=r.stateNode;switch(r.tag){case 5:r=d;break;default:r=d}typeof a=="function"?a(r):a.current=r}}function cS(r){var a=r.alternate;a!==null&&(r.alternate=null,cS(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&(delete a[Ps],delete a[jc],delete a[kh],delete a[IA],delete a[PA])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function lS(r){return r.tag===5||r.tag===3||r.tag===4}function uS(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||lS(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function hp(r,a,d){var y=r.tag;if(y===5||y===6)r=r.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(r,a):d.insertBefore(r,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(r,d)):(a=d,a.appendChild(r)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=qu));else if(y!==4&&(r=r.child,r!==null))for(hp(r,a,d),r=r.sibling;r!==null;)hp(r,a,d),r=r.sibling}function pp(r,a,d){var y=r.tag;if(y===5||y===6)r=r.stateNode,a?d.insertBefore(r,a):d.appendChild(r);else if(y!==4&&(r=r.child,r!==null))for(pp(r,a,d),r=r.sibling;r!==null;)pp(r,a,d),r=r.sibling}var br=null,ms=!1;function Ki(r,a,d){for(d=d.child;d!==null;)dS(r,a,d),d=d.sibling}function dS(r,a,d){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(Rs,d)}catch{}switch(d.tag){case 5:Pr||qa(d,a);case 6:var y=br,_=ms;br=null,Ki(r,a,d),br=y,ms=_,br!==null&&(ms?(r=br,d=d.stateNode,r.nodeType===8?r.parentNode.removeChild(d):r.removeChild(d)):br.removeChild(d.stateNode));break;case 18:br!==null&&(ms?(r=br,d=d.stateNode,r.nodeType===8?Rh(r.parentNode,d):r.nodeType===1&&Rh(r,d),Mr(r)):Rh(br,d.stateNode));break;case 4:y=br,_=ms,br=d.stateNode.containerInfo,ms=!0,Ki(r,a,d),br=y,ms=_;break;case 0:case 11:case 14:case 15:if(!Pr&&(y=d.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){_=y=y.next;do{var P=_,U=P.destroy;P=P.tag,U!==void 0&&((P&2)!==0||(P&4)!==0)&&dp(d,a,U),_=_.next}while(_!==y)}Ki(r,a,d);break;case 1:if(!Pr&&(qa(d,a),y=d.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=d.memoizedProps,y.state=d.memoizedState,y.componentWillUnmount()}catch(ee){Wt(d,a,ee)}Ki(r,a,d);break;case 21:Ki(r,a,d);break;case 22:d.mode&1?(Pr=(y=Pr)||d.memoizedState!==null,Ki(r,a,d),Pr=y):Ki(r,a,d);break;default:Ki(r,a,d)}}function fS(r){var a=r.updateQueue;if(a!==null){r.updateQueue=null;var d=r.stateNode;d===null&&(d=r.stateNode=new GA),a.forEach(function(y){var _=nI.bind(null,r,y);d.has(y)||(d.add(y),y.then(_,_))})}}function gs(r,a){var d=a.deletions;if(d!==null)for(var y=0;y<d.length;y++){var _=d[y];try{var P=r,U=a,ee=U;e:for(;ee!==null;){switch(ee.tag){case 5:br=ee.stateNode,ms=!1;break e;case 3:br=ee.stateNode.containerInfo,ms=!0;break e;case 4:br=ee.stateNode.containerInfo,ms=!0;break e}ee=ee.return}if(br===null)throw Error(n(160));dS(P,U,_),br=null,ms=!1;var ie=_.alternate;ie!==null&&(ie.return=null),_.return=null}catch(ge){Wt(_,a,ge)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)hS(a,r),a=a.sibling}function hS(r,a){var d=r.alternate,y=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(gs(a,r),Ls(r),y&4){try{zc(3,r,r.return),cd(3,r)}catch(We){Wt(r,r.return,We)}try{zc(5,r,r.return)}catch(We){Wt(r,r.return,We)}}break;case 1:gs(a,r),Ls(r),y&512&&d!==null&&qa(d,d.return);break;case 5:if(gs(a,r),Ls(r),y&512&&d!==null&&qa(d,d.return),r.flags&32){var _=r.stateNode;try{Cr(_,"")}catch(We){Wt(r,r.return,We)}}if(y&4&&(_=r.stateNode,_!=null)){var P=r.memoizedProps,U=d!==null?d.memoizedProps:P,ee=r.type,ie=r.updateQueue;if(r.updateQueue=null,ie!==null)try{ee==="input"&&P.type==="radio"&&P.name!=null&&dt(_,P),ss(ee,U);var ge=ss(ee,P);for(U=0;U<ie.length;U+=2){var Ce=ie[U],Re=ie[U+1];Ce==="style"?Ri(_,Re):Ce==="dangerouslySetInnerHTML"?Ln(_,Re):Ce==="children"?Cr(_,Re):I(_,Ce,Re,ge)}switch(ee){case"input":ht(_,P);break;case"textarea":xi(_,P);break;case"select":var be=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!P.multiple;var je=P.value;je!=null?Nn(_,!!P.multiple,je,!1):be!==!!P.multiple&&(P.defaultValue!=null?Nn(_,!!P.multiple,P.defaultValue,!0):Nn(_,!!P.multiple,P.multiple?[]:"",!1))}_[jc]=P}catch(We){Wt(r,r.return,We)}}break;case 6:if(gs(a,r),Ls(r),y&4){if(r.stateNode===null)throw Error(n(162));_=r.stateNode,P=r.memoizedProps;try{_.nodeValue=P}catch(We){Wt(r,r.return,We)}}break;case 3:if(gs(a,r),Ls(r),y&4&&d!==null&&d.memoizedState.isDehydrated)try{Mr(a.containerInfo)}catch(We){Wt(r,r.return,We)}break;case 4:gs(a,r),Ls(r);break;case 13:gs(a,r),Ls(r),_=r.child,_.flags&8192&&(P=_.memoizedState!==null,_.stateNode.isHidden=P,!P||_.alternate!==null&&_.alternate.memoizedState!==null||(yp=It())),y&4&&fS(r);break;case 22:if(Ce=d!==null&&d.memoizedState!==null,r.mode&1?(Pr=(ge=Pr)||Ce,gs(a,r),Pr=ge):gs(a,r),Ls(r),y&8192){if(ge=r.memoizedState!==null,(r.stateNode.isHidden=ge)&&!Ce&&(r.mode&1)!==0)for(De=r,Ce=r.child;Ce!==null;){for(Re=De=Ce;De!==null;){switch(be=De,je=be.child,be.tag){case 0:case 11:case 14:case 15:zc(4,be,be.return);break;case 1:qa(be,be.return);var Me=be.stateNode;if(typeof Me.componentWillUnmount=="function"){y=be,d=be.return;try{a=y,Me.props=a.memoizedProps,Me.state=a.memoizedState,Me.componentWillUnmount()}catch(We){Wt(y,d,We)}}break;case 5:qa(be,be.return);break;case 22:if(be.memoizedState!==null){gS(Re);continue}}je!==null?(je.return=be,De=je):gS(Re)}Ce=Ce.sibling}e:for(Ce=null,Re=r;;){if(Re.tag===5){if(Ce===null){Ce=Re;try{_=Re.stateNode,ge?(P=_.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(ee=Re.stateNode,ie=Re.memoizedProps.style,U=ie!=null&&ie.hasOwnProperty("display")?ie.display:null,ee.style.display=_s("display",U))}catch(We){Wt(r,r.return,We)}}}else if(Re.tag===6){if(Ce===null)try{Re.stateNode.nodeValue=ge?"":Re.memoizedProps}catch(We){Wt(r,r.return,We)}}else if((Re.tag!==22&&Re.tag!==23||Re.memoizedState===null||Re===r)&&Re.child!==null){Re.child.return=Re,Re=Re.child;continue}if(Re===r)break e;for(;Re.sibling===null;){if(Re.return===null||Re.return===r)break e;Ce===Re&&(Ce=null),Re=Re.return}Ce===Re&&(Ce=null),Re.sibling.return=Re.return,Re=Re.sibling}}break;case 19:gs(a,r),Ls(r),y&4&&fS(r);break;case 21:break;default:gs(a,r),Ls(r)}}function Ls(r){var a=r.flags;if(a&2){try{e:{for(var d=r.return;d!==null;){if(lS(d)){var y=d;break e}d=d.return}throw Error(n(160))}switch(y.tag){case 5:var _=y.stateNode;y.flags&32&&(Cr(_,""),y.flags&=-33);var P=uS(r);pp(r,P,_);break;case 3:case 4:var U=y.stateNode.containerInfo,ee=uS(r);hp(r,ee,U);break;default:throw Error(n(161))}}catch(ie){Wt(r,r.return,ie)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function VA(r,a,d){De=r,pS(r)}function pS(r,a,d){for(var y=(r.mode&1)!==0;De!==null;){var _=De,P=_.child;if(_.tag===22&&y){var U=_.memoizedState!==null||ad;if(!U){var ee=_.alternate,ie=ee!==null&&ee.memoizedState!==null||Pr;ee=ad;var ge=Pr;if(ad=U,(Pr=ie)&&!ge)for(De=_;De!==null;)U=De,ie=U.child,U.tag===22&&U.memoizedState!==null?yS(_):ie!==null?(ie.return=U,De=ie):yS(_);for(;P!==null;)De=P,pS(P),P=P.sibling;De=_,ad=ee,Pr=ge}mS(r)}else(_.subtreeFlags&8772)!==0&&P!==null?(P.return=_,De=P):mS(r)}}function mS(r){for(;De!==null;){var a=De;if((a.flags&8772)!==0){var d=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Pr||cd(5,a);break;case 1:var y=a.stateNode;if(a.flags&4&&!Pr)if(d===null)y.componentDidMount();else{var _=a.elementType===a.type?d.memoizedProps:ps(a.type,d.memoizedProps);y.componentDidUpdate(_,d.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var P=a.updateQueue;P!==null&&gE(a,P,y);break;case 3:var U=a.updateQueue;if(U!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}gE(a,U,d)}break;case 5:var ee=a.stateNode;if(d===null&&a.flags&4){d=ee;var ie=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":ie.autoFocus&&d.focus();break;case"img":ie.src&&(d.src=ie.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var ge=a.alternate;if(ge!==null){var Ce=ge.memoizedState;if(Ce!==null){var Re=Ce.dehydrated;Re!==null&&Mr(Re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Pr||a.flags&512&&fp(a)}catch(be){Wt(a,a.return,be)}}if(a===r){De=null;break}if(d=a.sibling,d!==null){d.return=a.return,De=d;break}De=a.return}}function gS(r){for(;De!==null;){var a=De;if(a===r){De=null;break}var d=a.sibling;if(d!==null){d.return=a.return,De=d;break}De=a.return}}function yS(r){for(;De!==null;){var a=De;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{cd(4,a)}catch(ie){Wt(a,d,ie)}break;case 1:var y=a.stateNode;if(typeof y.componentDidMount=="function"){var _=a.return;try{y.componentDidMount()}catch(ie){Wt(a,_,ie)}}var P=a.return;try{fp(a)}catch(ie){Wt(a,P,ie)}break;case 5:var U=a.return;try{fp(a)}catch(ie){Wt(a,U,ie)}}}catch(ie){Wt(a,a.return,ie)}if(a===r){De=null;break}var ee=a.sibling;if(ee!==null){ee.return=a.return,De=ee;break}De=a.return}}var XA=Math.ceil,ld=R.ReactCurrentDispatcher,mp=R.ReactCurrentOwner,Vn=R.ReactCurrentBatchConfig,mt=0,fr=null,er=null,Tr=0,kn=0,Ma=qi(0),ar=0,Gc=null,$o=0,ud=0,gp=0,Jc=null,dn=null,yp=0,Ha=1/0,ui=null,dd=!1,vp=null,Bi=null,fd=!1,zi=null,hd=0,Vc=0,wp=null,pd=-1,md=0;function Wr(){return(mt&6)!==0?It():pd!==-1?pd:pd=It()}function Gi(r){return(r.mode&1)===0?1:(mt&2)!==0&&Tr!==0?Tr&-Tr:NA.transition!==null?(md===0&&(md=Ni()),md):(r=pt,r!==0||(r=window.event,r=r===void 0?16:Is(r.type)),r)}function ys(r,a,d,y){if(50<Vc)throw Vc=0,wp=null,Error(n(185));Js(r,d,y),((mt&2)===0||r!==fr)&&(r===fr&&((mt&2)===0&&(ud|=d),ar===4&&Ji(r,Tr)),fn(r,y),d===1&&mt===0&&(a.mode&1)===0&&(Ha=It()+500,Wu&&Hi()))}function fn(r,a){var d=r.callbackNode;Eo(r,a);var y=Oi(r,r===fr?Tr:0);if(y===0)d!==null&&va(d),r.callbackNode=null,r.callbackPriority=0;else if(a=y&-y,r.callbackPriority!==a){if(d!=null&&va(d),a===1)r.tag===0?OA(wS.bind(null,r)):sE(wS.bind(null,r)),kA(function(){(mt&6)===0&&Hi()}),d=null;else{switch(wa(y)){case 1:d=Sn;break;case 4:d=Rt;break;case 16:d=qn;break;case 536870912:d=Rr;break;default:d=qn}d=RS(d,vS.bind(null,r))}r.callbackPriority=a,r.callbackNode=d}}function vS(r,a){if(pd=-1,md=0,(mt&6)!==0)throw Error(n(327));var d=r.callbackNode;if(Fa()&&r.callbackNode!==d)return null;var y=Oi(r,r===fr?Tr:0);if(y===0)return null;if((y&30)!==0||(y&r.expiredLanes)!==0||a)a=gd(r,y);else{a=y;var _=mt;mt|=2;var P=SS();(fr!==r||Tr!==a)&&(ui=null,Ha=It()+500,qo(r,a));do try{ZA();break}catch(ee){ES(r,ee)}while(!0);$h(),ld.current=P,mt=_,er!==null?a=0:(fr=null,Tr=0,a=ar)}if(a!==0){if(a===2&&(_=nr(r),_!==0&&(y=_,a=Ep(r,_))),a===1)throw d=Gc,qo(r,0),Ji(r,y),fn(r,It()),d;if(a===6)Ji(r,y);else{if(_=r.current.alternate,(y&30)===0&&!YA(_)&&(a=gd(r,y),a===2&&(P=nr(r),P!==0&&(y=P,a=Ep(r,P))),a===1))throw d=Gc,qo(r,0),Ji(r,y),fn(r,It()),d;switch(r.finishedWork=_,r.finishedLanes=y,a){case 0:case 1:throw Error(n(345));case 2:Mo(r,dn,ui);break;case 3:if(Ji(r,y),(y&130023424)===y&&(a=yp+500-It(),10<a)){if(Oi(r,0)!==0)break;if(_=r.suspendedLanes,(_&y)!==y){Wr(),r.pingedLanes|=r.suspendedLanes&_;break}r.timeoutHandle=xh(Mo.bind(null,r,dn,ui),a);break}Mo(r,dn,ui);break;case 4:if(Ji(r,y),(y&4194240)===y)break;for(a=r.eventTimes,_=-1;0<y;){var U=31-qr(y);P=1<<U,U=a[U],U>_&&(_=U),y&=~P}if(y=_,y=It()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*XA(y/1960))-y,10<y){r.timeoutHandle=xh(Mo.bind(null,r,dn,ui),y);break}Mo(r,dn,ui);break;case 5:Mo(r,dn,ui);break;default:throw Error(n(329))}}}return fn(r,It()),r.callbackNode===d?vS.bind(null,r):null}function Ep(r,a){var d=Jc;return r.current.memoizedState.isDehydrated&&(qo(r,a).flags|=256),r=gd(r,a),r!==2&&(a=dn,dn=d,a!==null&&Sp(a)),r}function Sp(r){dn===null?dn=r:dn.push.apply(dn,r)}function YA(r){for(var a=r;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var y=0;y<d.length;y++){var _=d[y],P=_.getSnapshot;_=_.value;try{if(!fs(P(),_))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ji(r,a){for(a&=~gp,a&=~ud,r.suspendedLanes|=a,r.pingedLanes&=~a,r=r.expirationTimes;0<a;){var d=31-qr(a),y=1<<d;r[d]=-1,a&=~y}}function wS(r){if((mt&6)!==0)throw Error(n(327));Fa();var a=Oi(r,0);if((a&1)===0)return fn(r,It()),null;var d=gd(r,a);if(r.tag!==0&&d===2){var y=nr(r);y!==0&&(a=y,d=Ep(r,y))}if(d===1)throw d=Gc,qo(r,0),Ji(r,a),fn(r,It()),d;if(d===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=a,Mo(r,dn,ui),fn(r,It()),null}function bp(r,a){var d=mt;mt|=1;try{return r(a)}finally{mt=d,mt===0&&(Ha=It()+500,Wu&&Hi())}}function Uo(r){zi!==null&&zi.tag===0&&(mt&6)===0&&Fa();var a=mt;mt|=1;var d=Vn.transition,y=pt;try{if(Vn.transition=null,pt=1,r)return r()}finally{pt=y,Vn.transition=d,mt=a,(mt&6)===0&&Hi()}}function Tp(){kn=Ma.current,Nt(Ma)}function qo(r,a){r.finishedWork=null,r.finishedLanes=0;var d=r.timeoutHandle;if(d!==-1&&(r.timeoutHandle=-1,RA(d)),er!==null)for(d=er.return;d!==null;){var y=d;switch(Oh(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Hu();break;case 3:$a(),Nt(cn),Nt(kr),Bh();break;case 5:Wh(y);break;case 4:$a();break;case 13:Nt(Ut);break;case 19:Nt(Ut);break;case 10:Uh(y.type._context);break;case 22:case 23:Tp()}d=d.return}if(fr=r,er=r=Vi(r.current,null),Tr=kn=a,ar=0,Gc=null,gp=ud=$o=0,dn=Jc=null,Lo!==null){for(a=0;a<Lo.length;a++)if(d=Lo[a],y=d.interleaved,y!==null){d.interleaved=null;var _=y.next,P=d.pending;if(P!==null){var U=P.next;P.next=_,y.next=U}d.pending=y}Lo=null}return r}function ES(r,a){do{var d=er;try{if($h(),Zu.current=nd,ed){for(var y=qt.memoizedState;y!==null;){var _=y.queue;_!==null&&(_.pending=null),y=y.next}ed=!1}if(Do=0,dr=or=qt=null,Hc=!1,Fc=0,mp.current=null,d===null||d.return===null){ar=1,Gc=a,er=null;break}e:{var P=r,U=d.return,ee=d,ie=a;if(a=Tr,ee.flags|=32768,ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var ge=ie,Ce=ee,Re=Ce.tag;if((Ce.mode&1)===0&&(Re===0||Re===11||Re===15)){var be=Ce.alternate;be?(Ce.updateQueue=be.updateQueue,Ce.memoizedState=be.memoizedState,Ce.lanes=be.lanes):(Ce.updateQueue=null,Ce.memoizedState=null)}var je=BE(U);if(je!==null){je.flags&=-257,zE(je,U,ee,P,a),je.mode&1&&KE(P,ge,a),a=je,ie=ge;var Me=a.updateQueue;if(Me===null){var We=new Set;We.add(ie),a.updateQueue=We}else Me.add(ie);break e}else{if((a&1)===0){KE(P,ge,a),Cp();break e}ie=Error(n(426))}}else if(jt&&ee.mode&1){var zt=BE(U);if(zt!==null){(zt.flags&65536)===0&&(zt.flags|=256),zE(zt,U,ee,P,a),jh(Ua(ie,ee));break e}}P=ie=Ua(ie,ee),ar!==4&&(ar=2),Jc===null?Jc=[P]:Jc.push(P),P=U;do{switch(P.tag){case 3:P.flags|=65536,a&=-a,P.lanes|=a;var he=FE(P,ie,a);mE(P,he);break e;case 1:ee=ie;var le=P.type,pe=P.stateNode;if((P.flags&128)===0&&(typeof le.getDerivedStateFromError=="function"||pe!==null&&typeof pe.componentDidCatch=="function"&&(Bi===null||!Bi.has(pe)))){P.flags|=65536,a&=-a,P.lanes|=a;var Ae=WE(P,ee,a);mE(P,Ae);break e}}P=P.return}while(P!==null)}TS(d)}catch(Ke){a=Ke,er===d&&d!==null&&(er=d=d.return);continue}break}while(!0)}function SS(){var r=ld.current;return ld.current=nd,r===null?nd:r}function Cp(){(ar===0||ar===3||ar===2)&&(ar=4),fr===null||($o&268435455)===0&&(ud&268435455)===0||Ji(fr,Tr)}function gd(r,a){var d=mt;mt|=2;var y=SS();(fr!==r||Tr!==a)&&(ui=null,qo(r,a));do try{QA();break}catch(_){ES(r,_)}while(!0);if($h(),mt=d,ld.current=y,er!==null)throw Error(n(261));return fr=null,Tr=0,ar}function QA(){for(;er!==null;)bS(er)}function ZA(){for(;er!==null&&!bc();)bS(er)}function bS(r){var a=xS(r.alternate,r,kn);r.memoizedProps=r.pendingProps,a===null?TS(r):er=a,mp.current=null}function TS(r){var a=r;do{var d=a.alternate;if(r=a.return,(a.flags&32768)===0){if(d=BA(d,a,kn),d!==null){er=d;return}}else{if(d=zA(d,a),d!==null){d.flags&=32767,er=d;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{ar=6,er=null;return}}if(a=a.sibling,a!==null){er=a;return}er=a=r}while(a!==null);ar===0&&(ar=5)}function Mo(r,a,d){var y=pt,_=Vn.transition;try{Vn.transition=null,pt=1,eI(r,a,d,y)}finally{Vn.transition=_,pt=y}return null}function eI(r,a,d,y){do Fa();while(zi!==null);if((mt&6)!==0)throw Error(n(327));d=r.finishedWork;var _=r.finishedLanes;if(d===null)return null;if(r.finishedWork=null,r.finishedLanes=0,d===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var P=d.lanes|d.childLanes;if(fh(r,P),r===fr&&(er=fr=null,Tr=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||fd||(fd=!0,RS(qn,function(){return Fa(),null})),P=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||P){P=Vn.transition,Vn.transition=null;var U=pt;pt=1;var ee=mt;mt|=4,mp.current=null,JA(r,d),hS(d,r),EA(Ch),an=!!Th,Ch=Th=null,r.current=d,VA(d),zs(),mt=ee,pt=U,Vn.transition=P}else r.current=d;if(fd&&(fd=!1,zi=r,hd=_),P=r.pendingLanes,P===0&&(Bi=null),Cc(d.stateNode),fn(r,It()),a!==null)for(y=r.onRecoverableError,d=0;d<a.length;d++)_=a[d],y(_.value,{componentStack:_.stack,digest:_.digest});if(dd)throw dd=!1,r=vp,vp=null,r;return(hd&1)!==0&&r.tag!==0&&Fa(),P=r.pendingLanes,(P&1)!==0?r===wp?Vc++:(Vc=0,wp=r):Vc=0,Hi(),null}function Fa(){if(zi!==null){var r=wa(hd),a=Vn.transition,d=pt;try{if(Vn.transition=null,pt=16>r?16:r,zi===null)var y=!1;else{if(r=zi,zi=null,hd=0,(mt&6)!==0)throw Error(n(331));var _=mt;for(mt|=4,De=r.current;De!==null;){var P=De,U=P.child;if((De.flags&16)!==0){var ee=P.deletions;if(ee!==null){for(var ie=0;ie<ee.length;ie++){var ge=ee[ie];for(De=ge;De!==null;){var Ce=De;switch(Ce.tag){case 0:case 11:case 15:zc(8,Ce,P)}var Re=Ce.child;if(Re!==null)Re.return=Ce,De=Re;else for(;De!==null;){Ce=De;var be=Ce.sibling,je=Ce.return;if(cS(Ce),Ce===ge){De=null;break}if(be!==null){be.return=je,De=be;break}De=je}}}var Me=P.alternate;if(Me!==null){var We=Me.child;if(We!==null){Me.child=null;do{var zt=We.sibling;We.sibling=null,We=zt}while(We!==null)}}De=P}}if((P.subtreeFlags&2064)!==0&&U!==null)U.return=P,De=U;else e:for(;De!==null;){if(P=De,(P.flags&2048)!==0)switch(P.tag){case 0:case 11:case 15:zc(9,P,P.return)}var he=P.sibling;if(he!==null){he.return=P.return,De=he;break e}De=P.return}}var le=r.current;for(De=le;De!==null;){U=De;var pe=U.child;if((U.subtreeFlags&2064)!==0&&pe!==null)pe.return=U,De=pe;else e:for(U=le;De!==null;){if(ee=De,(ee.flags&2048)!==0)try{switch(ee.tag){case 0:case 11:case 15:cd(9,ee)}}catch(Ke){Wt(ee,ee.return,Ke)}if(ee===U){De=null;break e}var Ae=ee.sibling;if(Ae!==null){Ae.return=ee.return,De=Ae;break e}De=ee.return}}if(mt=_,Hi(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(Rs,r)}catch{}y=!0}return y}finally{pt=d,Vn.transition=a}}return!1}function CS(r,a,d){a=Ua(d,a),a=FE(r,a,1),r=Wi(r,a,1),a=Wr(),r!==null&&(Js(r,1,a),fn(r,a))}function Wt(r,a,d){if(r.tag===3)CS(r,r,d);else for(;a!==null;){if(a.tag===3){CS(a,r,d);break}else if(a.tag===1){var y=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Bi===null||!Bi.has(y))){r=Ua(d,r),r=WE(a,r,1),a=Wi(a,r,1),r=Wr(),a!==null&&(Js(a,1,r),fn(a,r));break}}a=a.return}}function tI(r,a,d){var y=r.pingCache;y!==null&&y.delete(a),a=Wr(),r.pingedLanes|=r.suspendedLanes&d,fr===r&&(Tr&d)===d&&(ar===4||ar===3&&(Tr&130023424)===Tr&&500>It()-yp?qo(r,0):gp|=d),fn(r,a)}function _S(r,a){a===0&&((r.mode&1)===0?a=1:(a=Pi,Pi<<=1,(Pi&130023424)===0&&(Pi=4194304)));var d=Wr();r=ai(r,a),r!==null&&(Js(r,a,d),fn(r,d))}function rI(r){var a=r.memoizedState,d=0;a!==null&&(d=a.retryLane),_S(r,d)}function nI(r,a){var d=0;switch(r.tag){case 13:var y=r.stateNode,_=r.memoizedState;_!==null&&(d=_.retryLane);break;case 19:y=r.stateNode;break;default:throw Error(n(314))}y!==null&&y.delete(a),_S(r,d)}var xS;xS=function(r,a,d){if(r!==null)if(r.memoizedProps!==a.pendingProps||cn.current)un=!0;else{if((r.lanes&d)===0&&(a.flags&128)===0)return un=!1,KA(r,a,d);un=(r.flags&131072)!==0}else un=!1,jt&&(a.flags&1048576)!==0&&iE(a,Bu,a.index);switch(a.lanes=0,a.tag){case 2:var y=a.type;od(r,a),r=a.pendingProps;var _=Ia(a,kr.current);Da(a,d),_=Jh(null,a,y,r,_,d);var P=Vh();return a.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,ln(y)?(P=!0,Fu(a)):P=!1,a.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,Hh(a),_.updater=sd,a.stateNode=_,_._reactInternals=a,tp(a,y,r,d),a=ip(null,a,y,!0,P,d)):(a.tag=0,jt&&P&&Ph(a),Fr(null,a,_,d),a=a.child),a;case 16:y=a.elementType;e:{switch(od(r,a),r=a.pendingProps,_=y._init,y=_(y._payload),a.type=y,_=a.tag=iI(y),r=ps(y,r),_){case 0:a=sp(null,a,y,r,d);break e;case 1:a=QE(null,a,y,r,d);break e;case 11:a=GE(null,a,y,r,d);break e;case 14:a=JE(null,a,y,ps(y.type,r),d);break e}throw Error(n(306,y,""))}return a;case 0:return y=a.type,_=a.pendingProps,_=a.elementType===y?_:ps(y,_),sp(r,a,y,_,d);case 1:return y=a.type,_=a.pendingProps,_=a.elementType===y?_:ps(y,_),QE(r,a,y,_,d);case 3:e:{if(ZE(a),r===null)throw Error(n(387));y=a.pendingProps,P=a.memoizedState,_=P.element,pE(r,a),Yu(a,y,null,d);var U=a.memoizedState;if(y=U.element,P.isDehydrated)if(P={element:y,isDehydrated:!1,cache:U.cache,pendingSuspenseBoundaries:U.pendingSuspenseBoundaries,transitions:U.transitions},a.updateQueue.baseState=P,a.memoizedState=P,a.flags&256){_=Ua(Error(n(423)),a),a=eS(r,a,y,d,_);break e}else if(y!==_){_=Ua(Error(n(424)),a),a=eS(r,a,y,d,_);break e}else for(Rn=Ui(a.stateNode.containerInfo.firstChild),xn=a,jt=!0,hs=null,d=fE(a,null,y,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Na(),y===_){a=li(r,a,d);break e}Fr(r,a,y,d)}a=a.child}return a;case 5:return yE(a),r===null&&Lh(a),y=a.type,_=a.pendingProps,P=r!==null?r.memoizedProps:null,U=_.children,_h(y,_)?U=null:P!==null&&_h(y,P)&&(a.flags|=32),YE(r,a),Fr(r,a,U,d),a.child;case 6:return r===null&&Lh(a),null;case 13:return tS(r,a,d);case 4:return Fh(a,a.stateNode.containerInfo),y=a.pendingProps,r===null?a.child=La(a,null,y,d):Fr(r,a,y,d),a.child;case 11:return y=a.type,_=a.pendingProps,_=a.elementType===y?_:ps(y,_),GE(r,a,y,_,d);case 7:return Fr(r,a,a.pendingProps,d),a.child;case 8:return Fr(r,a,a.pendingProps.children,d),a.child;case 12:return Fr(r,a,a.pendingProps.children,d),a.child;case 10:e:{if(y=a.type._context,_=a.pendingProps,P=a.memoizedProps,U=_.value,kt(Ju,y._currentValue),y._currentValue=U,P!==null)if(fs(P.value,U)){if(P.children===_.children&&!cn.current){a=li(r,a,d);break e}}else for(P=a.child,P!==null&&(P.return=a);P!==null;){var ee=P.dependencies;if(ee!==null){U=P.child;for(var ie=ee.firstContext;ie!==null;){if(ie.context===y){if(P.tag===1){ie=ci(-1,d&-d),ie.tag=2;var ge=P.updateQueue;if(ge!==null){ge=ge.shared;var Ce=ge.pending;Ce===null?ie.next=ie:(ie.next=Ce.next,Ce.next=ie),ge.pending=ie}}P.lanes|=d,ie=P.alternate,ie!==null&&(ie.lanes|=d),qh(P.return,d,a),ee.lanes|=d;break}ie=ie.next}}else if(P.tag===10)U=P.type===a.type?null:P.child;else if(P.tag===18){if(U=P.return,U===null)throw Error(n(341));U.lanes|=d,ee=U.alternate,ee!==null&&(ee.lanes|=d),qh(U,d,a),U=P.sibling}else U=P.child;if(U!==null)U.return=P;else for(U=P;U!==null;){if(U===a){U=null;break}if(P=U.sibling,P!==null){P.return=U.return,U=P;break}U=U.return}P=U}Fr(r,a,_.children,d),a=a.child}return a;case 9:return _=a.type,y=a.pendingProps.children,Da(a,d),_=Gn(_),y=y(_),a.flags|=1,Fr(r,a,y,d),a.child;case 14:return y=a.type,_=ps(y,a.pendingProps),_=ps(y.type,_),JE(r,a,y,_,d);case 15:return VE(r,a,a.type,a.pendingProps,d);case 17:return y=a.type,_=a.pendingProps,_=a.elementType===y?_:ps(y,_),od(r,a),a.tag=1,ln(y)?(r=!0,Fu(a)):r=!1,Da(a,d),ME(a,y,_),tp(a,y,_,d),ip(null,a,y,!0,r,d);case 19:return nS(r,a,d);case 22:return XE(r,a,d)}throw Error(n(156,a.tag))};function RS(r,a){return Un(r,a)}function sI(r,a,d,y){this.tag=r,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(r,a,d,y){return new sI(r,a,d,y)}function _p(r){return r=r.prototype,!(!r||!r.isReactComponent)}function iI(r){if(typeof r=="function")return _p(r)?1:0;if(r!=null){if(r=r.$$typeof,r===z)return 11;if(r===$)return 14}return 2}function Vi(r,a){var d=r.alternate;return d===null?(d=Xn(r.tag,a,r.key,r.mode),d.elementType=r.elementType,d.type=r.type,d.stateNode=r.stateNode,d.alternate=r,r.alternate=d):(d.pendingProps=a,d.type=r.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=r.flags&14680064,d.childLanes=r.childLanes,d.lanes=r.lanes,d.child=r.child,d.memoizedProps=r.memoizedProps,d.memoizedState=r.memoizedState,d.updateQueue=r.updateQueue,a=r.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=r.sibling,d.index=r.index,d.ref=r.ref,d}function yd(r,a,d,y,_,P){var U=2;if(y=r,typeof r=="function")_p(r)&&(U=1);else if(typeof r=="string")U=5;else e:switch(r){case O:return Ho(d.children,_,P,a);case x:U=8,_|=8;break;case M:return r=Xn(12,d,a,_|2),r.elementType=M,r.lanes=P,r;case q:return r=Xn(13,d,a,_),r.elementType=q,r.lanes=P,r;case H:return r=Xn(19,d,a,_),r.elementType=H,r.lanes=P,r;case X:return vd(d,_,P,a);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case G:U=10;break e;case V:U=9;break e;case z:U=11;break e;case $:U=14;break e;case K:U=16,y=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return a=Xn(U,d,a,_),a.elementType=r,a.type=y,a.lanes=P,a}function Ho(r,a,d,y){return r=Xn(7,r,y,a),r.lanes=d,r}function vd(r,a,d,y){return r=Xn(22,r,y,a),r.elementType=X,r.lanes=d,r.stateNode={isHidden:!1},r}function xp(r,a,d){return r=Xn(6,r,null,a),r.lanes=d,r}function Rp(r,a,d){return a=Xn(4,r.children!==null?r.children:[],r.key,a),a.lanes=d,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}function oI(r,a,d,y,_){this.tag=a,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_c(0),this.expirationTimes=_c(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_c(0),this.identifierPrefix=y,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function kp(r,a,d,y,_,P,U,ee,ie){return r=new oI(r,a,d,ee,ie),a===1?(a=1,P===!0&&(a|=8)):a=0,P=Xn(3,null,null,a),r.current=P,P.stateNode=r,P.memoizedState={element:y,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hh(P),r}function aI(r,a,d){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:y==null?null:""+y,children:r,containerInfo:a,implementation:d}}function kS(r){if(!r)return Mi;r=r._reactInternals;e:{if(Ur(r)!==r||r.tag!==1)throw Error(n(170));var a=r;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(ln(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(r.tag===1){var d=r.type;if(ln(d))return rE(r,d,a)}return a}function AS(r,a,d,y,_,P,U,ee,ie){return r=kp(d,y,!0,r,_,P,U,ee,ie),r.context=kS(null),d=r.current,y=Wr(),_=Gi(d),P=ci(y,_),P.callback=a??null,Wi(d,P,_),r.current.lanes=_,Js(r,_,y),fn(r,y),r}function wd(r,a,d,y){var _=a.current,P=Wr(),U=Gi(_);return d=kS(d),a.context===null?a.context=d:a.pendingContext=d,a=ci(P,U),a.payload={element:r},y=y===void 0?null:y,y!==null&&(a.callback=y),r=Wi(_,a,U),r!==null&&(ys(r,_,U,P),Xu(r,_,U)),U}function Ed(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function IS(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var d=r.retryLane;r.retryLane=d!==0&&d<a?d:a}}function Ap(r,a){IS(r,a),(r=r.alternate)&&IS(r,a)}function cI(){return null}var PS=typeof reportError=="function"?reportError:function(r){console.error(r)};function Ip(r){this._internalRoot=r}Sd.prototype.render=Ip.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(n(409));wd(r,a,null,null)},Sd.prototype.unmount=Ip.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;Uo(function(){wd(null,r,null,null)}),a[ni]=null}};function Sd(r){this._internalRoot=r}Sd.prototype.unstable_scheduleHydration=function(r){if(r){var a=Mn();r={blockedOn:null,target:r,priority:a};for(var d=0;d<on.length&&a!==0&&a<on[d].priority;d++);on.splice(d,0,r),d===0&&ji(r)}};function Pp(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function bd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function OS(){}function lI(r,a,d,y,_){if(_){if(typeof y=="function"){var P=y;y=function(){var ge=Ed(U);P.call(ge)}}var U=AS(a,y,r,0,null,!1,!1,"",OS);return r._reactRootContainer=U,r[ni]=U.current,Nc(r.nodeType===8?r.parentNode:r),Uo(),U}for(;_=r.lastChild;)r.removeChild(_);if(typeof y=="function"){var ee=y;y=function(){var ge=Ed(ie);ee.call(ge)}}var ie=kp(r,0,!1,null,null,!1,!1,"",OS);return r._reactRootContainer=ie,r[ni]=ie.current,Nc(r.nodeType===8?r.parentNode:r),Uo(function(){wd(a,ie,d,y)}),ie}function Td(r,a,d,y,_){var P=d._reactRootContainer;if(P){var U=P;if(typeof _=="function"){var ee=_;_=function(){var ie=Ed(U);ee.call(ie)}}wd(a,U,r,_)}else U=lI(d,a,r,_,y);return Ed(U)}Ea=function(r){switch(r.tag){case 3:var a=r.stateNode;if(a.current.memoizedState.isDehydrated){var d=Gs(a.pendingLanes);d!==0&&(So(a,d|1),fn(a,It()),(mt&6)===0&&(Ha=It()+500,Hi()))}break;case 13:Uo(function(){var y=ai(r,1);if(y!==null){var _=Wr();ys(y,r,1,_)}}),Ap(r,1)}},Vs=function(r){if(r.tag===13){var a=ai(r,134217728);if(a!==null){var d=Wr();ys(a,r,134217728,d)}Ap(r,134217728)}},Li=function(r){if(r.tag===13){var a=Gi(r),d=ai(r,a);if(d!==null){var y=Wr();ys(d,r,a,y)}Ap(r,a)}},Mn=function(){return pt},Sa=function(r,a){var d=pt;try{return pt=r,a()}finally{pt=d}},Ks=function(r,a,d){switch(a){case"input":if(ht(r,d),a=d.name,d.type==="radio"&&a!=null){for(d=r;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var y=d[a];if(y!==r&&y.form===r.form){var _=Mu(y);if(!_)throw Error(n(90));Q(y),ht(y,_)}}}break;case"textarea":xi(r,d);break;case"select":a=d.value,a!=null&&Nn(r,!!d.multiple,a,!1)}},$t=bp,Zt=Uo;var uI={usingClientEntryPoint:!1,Events:[Dc,ka,Mu,Xe,At,bp]},Xc={findFiberByHostInstance:Io,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dI={bundleType:Xc.bundleType,version:Xc.version,rendererPackageName:Xc.rendererPackageName,rendererConfig:Xc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Ai(r),r===null?null:r.stateNode},findFiberByHostInstance:Xc.findFiberByHostInstance||cI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cd.isDisabled&&Cd.supportsFiber)try{Rs=Cd.inject(dI),nn=Cd}catch{}}return hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uI,hn.createPortal=function(r,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pp(a))throw Error(n(200));return aI(r,a,null,d)},hn.createRoot=function(r,a){if(!Pp(r))throw Error(n(299));var d=!1,y="",_=PS;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),a=kp(r,1,!1,null,null,d,!1,y,_),r[ni]=a.current,Nc(r.nodeType===8?r.parentNode:r),new Ip(a)},hn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=Ai(a),r=r===null?null:r.stateNode,r},hn.flushSync=function(r){return Uo(r)},hn.hydrate=function(r,a,d){if(!bd(a))throw Error(n(200));return Td(null,r,a,!0,d)},hn.hydrateRoot=function(r,a,d){if(!Pp(r))throw Error(n(405));var y=d!=null&&d.hydratedSources||null,_=!1,P="",U=PS;if(d!=null&&(d.unstable_strictMode===!0&&(_=!0),d.identifierPrefix!==void 0&&(P=d.identifierPrefix),d.onRecoverableError!==void 0&&(U=d.onRecoverableError)),a=AS(a,null,r,1,d??null,_,!1,P,U),r[ni]=a.current,Nc(r),y)for(r=0;r<y.length;r++)d=y[r],_=d._getVersion,_=_(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,_]:a.mutableSourceEagerHydrationData.push(d,_);return new Sd(a)},hn.render=function(r,a,d){if(!bd(a))throw Error(n(200));return Td(null,r,a,!1,d)},hn.unmountComponentAtNode=function(r){if(!bd(r))throw Error(n(40));return r._reactRootContainer?(Uo(function(){Td(null,null,r,!1,function(){r._reactRootContainer=null,r[ni]=null})}),!0):!1},hn.unstable_batchedUpdates=bp,hn.unstable_renderSubtreeIntoContainer=function(r,a,d,y){if(!bd(d))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return Td(r,a,d,!1,y)},hn.version="18.3.1-next-f1338f8080-20240426",hn}var FS;function G1(){if(FS)return Lp.exports;FS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Lp.exports=TI(),Lp.exports}var WS;function CI(){if(WS)return _d;WS=1;var e=G1();return _d.createRoot=e.createRoot,_d.hydrateRoot=e.hydrateRoot,_d}var _I=CI(),se=gv();const wv=pI({__proto__:null,default:se},[se]);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),RI=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),KS=e=>{const t=RI(e);return t.charAt(0).toUpperCase()+t.slice(1)},J1=(...e)=>e.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=se.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:c="",children:i,iconNode:o,...l},f)=>se.createElement("svg",{ref:f,...kI,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:J1("lucide",c),...l},[...o.map(([p,h])=>se.createElement(p,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=(e,t)=>{const n=se.forwardRef(({className:s,...c},i)=>se.createElement(AI,{ref:i,iconNode:t,className:J1(`lucide-${xI(KS(e))}`,`lucide-${e}`,s),...c}));return n.displayName=KS(e),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],PI=lr("activity",II);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],NI=lr("arrow-right",OI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],jI=lr("chart-no-axes-column-increasing",LI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],$I=lr("circle-alert",DI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],V1=lr("circle-check",UI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],MI=lr("code",qI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],FI=lr("copy",HI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Fy=lr("database",WI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],X1=lr("file-text",KI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],zI=lr("log-in",BI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],JI=lr("log-out",GI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]],XI=lr("radio",VI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Zd=lr("refresh-cw",YI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ZI=lr("settings",QI);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Wy=lr("shield",eP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ky=lr("trash-2",tP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],BS=lr("trending-up",rP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],sP=lr("user",nP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],oP=lr("zap",iP);function zS(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Ev(...e){return t=>{let n=!1;const s=e.map(c=>{const i=zS(c,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let c=0;c<s.length;c++){const i=s[c];typeof i=="function"?i():zS(e[c],null)}}}}function ef(...e){return se.useCallback(Ev(...e),e)}var aP=Symbol.for("react.lazy"),tf=wv[" use ".trim().toString()];function cP(e){return typeof e=="object"&&e!==null&&"then"in e}function Y1(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===aP&&"_payload"in e&&cP(e._payload)}function Q1(e){const t=uP(e),n=se.forwardRef((s,c)=>{let{children:i,...o}=s;Y1(i)&&typeof tf=="function"&&(i=tf(i._payload));const l=se.Children.toArray(i),f=l.find(fP);if(f){const p=f.props.children,h=l.map(u=>u===f?se.Children.count(p)>1?se.Children.only(null):se.isValidElement(p)?p.props.children:null:u);return b.jsx(t,{...o,ref:c,children:se.isValidElement(p)?se.cloneElement(p,void 0,h):null})}return b.jsx(t,{...o,ref:c,children:i})});return n.displayName=`${e}.Slot`,n}var lP=Q1("Slot");function uP(e){const t=se.forwardRef((n,s)=>{let{children:c,...i}=n;if(Y1(c)&&typeof tf=="function"&&(c=tf(c._payload)),se.isValidElement(c)){const o=pP(c),l=hP(i,c.props);return c.type!==se.Fragment&&(l.ref=s?Ev(s,o):o),se.cloneElement(c,l)}return se.Children.count(c)>1?se.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var dP=Symbol("radix.slottable");function fP(e){return se.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===dP}function hP(e,t){const n={...t};for(const s in t){const c=e[s],i=t[s];/^on[A-Z]/.test(s)?c&&i?n[s]=(...l)=>{const f=i(...l);return c(...l),f}:c&&(n[s]=c):s==="style"?n[s]={...c,...i}:s==="className"&&(n[s]=[c,i].filter(Boolean).join(" "))}return{...e,...n}}function pP(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Z1(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(n=Z1(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function ex(){for(var e,t,n=0,s="",c=arguments.length;n<c;n++)(e=arguments[n])&&(t=Z1(e))&&(s&&(s+=" "),s+=t);return s}const GS=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,JS=ex,mP=(e,t)=>n=>{var s;if(t?.variants==null)return JS(e,n?.class,n?.className);const{variants:c,defaultVariants:i}=t,o=Object.keys(c).map(p=>{const h=n?.[p],u=i?.[p];if(h===null)return null;const m=GS(h)||GS(u);return c[p][m]}),l=n&&Object.entries(n).reduce((p,h)=>{let[u,m]=h;return m===void 0||(p[u]=m),p},{}),f=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((p,h)=>{let{class:u,className:m,...g}=h;return Object.entries(g).every(v=>{let[S,w]=v;return Array.isArray(w)?w.includes({...i,...l}[S]):{...i,...l}[S]===w})?[...p,u,m]:p},[]);return JS(e,o,f,n?.class,n?.className)},gP=(e,t)=>{const n=new Array(e.length+t.length);for(let s=0;s<e.length;s++)n[s]=e[s];for(let s=0;s<t.length;s++)n[e.length+s]=t[s];return n},yP=(e,t)=>({classGroupId:e,validator:t}),tx=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),rf="-",VS=[],vP="arbitrary..",wP=e=>{const t=SP(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return EP(o);const l=o.split(rf),f=l[0]===""&&l.length>1?1:0;return rx(l,f,t)},getConflictingClassGroupIds:(o,l)=>{if(l){const f=s[o],p=n[o];return f?p?gP(p,f):f:p||VS}return n[o]||VS}}},rx=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const c=e[t],i=n.nextPart.get(c);if(i){const p=rx(e,t+1,i);if(p)return p}const o=n.validators;if(o===null)return;const l=t===0?e.join(rf):e.slice(t).join(rf),f=o.length;for(let p=0;p<f;p++){const h=o[p];if(h.validator(l))return h.classGroupId}},EP=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),s=t.slice(0,n);return s?vP+s:void 0})(),SP=e=>{const{theme:t,classGroups:n}=e;return bP(n,t)},bP=(e,t)=>{const n=tx();for(const s in e){const c=e[s];Sv(c,n,s,t)}return n},Sv=(e,t,n,s)=>{const c=e.length;for(let i=0;i<c;i++){const o=e[i];TP(o,t,n,s)}},TP=(e,t,n,s)=>{if(typeof e=="string"){CP(e,t,n);return}if(typeof e=="function"){_P(e,t,n,s);return}xP(e,t,n,s)},CP=(e,t,n)=>{const s=e===""?t:nx(t,e);s.classGroupId=n},_P=(e,t,n,s)=>{if(RP(e)){Sv(e(s),t,n,s);return}t.validators===null&&(t.validators=[]),t.validators.push(yP(n,e))},xP=(e,t,n,s)=>{const c=Object.entries(e),i=c.length;for(let o=0;o<i;o++){const[l,f]=c[o];Sv(f,nx(t,l),n,s)}},nx=(e,t)=>{let n=e;const s=t.split(rf),c=s.length;for(let i=0;i<c;i++){const o=s[i];let l=n.nextPart.get(o);l||(l=tx(),n.nextPart.set(o,l)),n=l}return n},RP=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,kP=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),s=Object.create(null);const c=(i,o)=>{n[i]=o,t++,t>e&&(t=0,s=n,n=Object.create(null))};return{get(i){let o=n[i];if(o!==void 0)return o;if((o=s[i])!==void 0)return c(i,o),o},set(i,o){i in n?n[i]=o:c(i,o)}}},By="!",XS=":",AP=[],YS=(e,t,n,s,c)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:s,isExternal:c}),IP=e=>{const{prefix:t,experimentalParseClassName:n}=e;let s=c=>{const i=[];let o=0,l=0,f=0,p;const h=c.length;for(let S=0;S<h;S++){const w=c[S];if(o===0&&l===0){if(w===XS){i.push(c.slice(f,S)),f=S+1;continue}if(w==="/"){p=S;continue}}w==="["?o++:w==="]"?o--:w==="("?l++:w===")"&&l--}const u=i.length===0?c:c.slice(f);let m=u,g=!1;u.endsWith(By)?(m=u.slice(0,-1),g=!0):u.startsWith(By)&&(m=u.slice(1),g=!0);const v=p&&p>f?p-f:void 0;return YS(i,g,m,v)};if(t){const c=t+XS,i=s;s=o=>o.startsWith(c)?i(o.slice(c.length)):YS(AP,!1,o,void 0,!0)}if(n){const c=s;s=i=>n({className:i,parseClassName:c})}return s},PP=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,s)=>{t.set(n,1e6+s)}),n=>{const s=[];let c=[];for(let i=0;i<n.length;i++){const o=n[i],l=o[0]==="[",f=t.has(o);l||f?(c.length>0&&(c.sort(),s.push(...c),c=[]),s.push(o)):c.push(o)}return c.length>0&&(c.sort(),s.push(...c)),s}},OP=e=>({cache:kP(e.cacheSize),parseClassName:IP(e),sortModifiers:PP(e),...wP(e)}),NP=/\s+/,LP=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:c,sortModifiers:i}=t,o=[],l=e.trim().split(NP);let f="";for(let p=l.length-1;p>=0;p-=1){const h=l[p],{isExternal:u,modifiers:m,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:S}=n(h);if(u){f=h+(f.length>0?" "+f:f);continue}let w=!!S,C=s(w?v.substring(0,S):v);if(!C){if(!w){f=h+(f.length>0?" "+f:f);continue}if(C=s(v),!C){f=h+(f.length>0?" "+f:f);continue}w=!1}const N=m.length===0?"":m.length===1?m[0]:i(m).join(":"),I=g?N+By:N,R=I+C;if(o.indexOf(R)>-1)continue;o.push(R);const D=c(C,w);for(let A=0;A<D.length;++A){const O=D[A];o.push(I+O)}f=h+(f.length>0?" "+f:f)}return f},jP=(...e)=>{let t=0,n,s,c="";for(;t<e.length;)(n=e[t++])&&(s=sx(n))&&(c&&(c+=" "),c+=s);return c},sx=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=sx(e[s]))&&(n&&(n+=" "),n+=t);return n},DP=(e,...t)=>{let n,s,c,i;const o=f=>{const p=t.reduce((h,u)=>u(h),e());return n=OP(p),s=n.cache.get,c=n.cache.set,i=l,l(f)},l=f=>{const p=s(f);if(p)return p;const h=LP(f,n);return c(f,h),h};return i=o,(...f)=>i(jP(...f))},$P=[],cr=e=>{const t=n=>n[e]||$P;return t.isThemeGetter=!0,t},ix=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,ox=/^\((?:(\w[\w-]*):)?(.+)\)$/i,UP=/^\d+\/\d+$/,qP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,MP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,HP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,FP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,WP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Wa=e=>UP.test(e),at=e=>!!e&&!Number.isNaN(Number(e)),Yi=e=>!!e&&Number.isInteger(Number(e)),$p=e=>e.endsWith("%")&&at(e.slice(0,-1)),di=e=>qP.test(e),KP=()=>!0,BP=e=>MP.test(e)&&!HP.test(e),ax=()=>!1,zP=e=>FP.test(e),GP=e=>WP.test(e),JP=e=>!He(e)&&!Fe(e),VP=e=>lc(e,ux,ax),He=e=>ix.test(e),Fo=e=>lc(e,dx,BP),Up=e=>lc(e,eO,at),QS=e=>lc(e,cx,ax),XP=e=>lc(e,lx,GP),xd=e=>lc(e,fx,zP),Fe=e=>ox.test(e),Qc=e=>uc(e,dx),YP=e=>uc(e,tO),ZS=e=>uc(e,cx),QP=e=>uc(e,ux),ZP=e=>uc(e,lx),Rd=e=>uc(e,fx,!0),lc=(e,t,n)=>{const s=ix.exec(e);return s?s[1]?t(s[1]):n(s[2]):!1},uc=(e,t,n=!1)=>{const s=ox.exec(e);return s?s[1]?t(s[1]):n:!1},cx=e=>e==="position"||e==="percentage",lx=e=>e==="image"||e==="url",ux=e=>e==="length"||e==="size"||e==="bg-size",dx=e=>e==="length",eO=e=>e==="number",tO=e=>e==="family-name",fx=e=>e==="shadow",rO=()=>{const e=cr("color"),t=cr("font"),n=cr("text"),s=cr("font-weight"),c=cr("tracking"),i=cr("leading"),o=cr("breakpoint"),l=cr("container"),f=cr("spacing"),p=cr("radius"),h=cr("shadow"),u=cr("inset-shadow"),m=cr("text-shadow"),g=cr("drop-shadow"),v=cr("blur"),S=cr("perspective"),w=cr("aspect"),C=cr("ease"),N=cr("animate"),I=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],D=()=>[...R(),Fe,He],A=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],x=()=>[Fe,He,f],M=()=>[Wa,"full","auto",...x()],G=()=>[Yi,"none","subgrid",Fe,He],V=()=>["auto",{span:["full",Yi,Fe,He]},Yi,Fe,He],z=()=>[Yi,"auto",Fe,He],q=()=>["auto","min","max","fr",Fe,He],H=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],$=()=>["start","end","center","stretch","center-safe","end-safe"],K=()=>["auto",...x()],X=()=>[Wa,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...x()],B=()=>[e,Fe,He],te=()=>[...R(),ZS,QS,{position:[Fe,He]}],ae=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Z=()=>["auto","cover","contain",QP,VP,{size:[Fe,He]}],oe=()=>[$p,Qc,Fo],ce=()=>["","none","full",p,Fe,He],Y=()=>["",at,Qc,Fo],re=()=>["solid","dashed","dotted","double"],me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],xe=()=>[at,$p,ZS,QS],Oe=()=>["","none",v,Fe,He],qe=()=>["none",at,Fe,He],lt=()=>["none",at,Fe,He],Dt=()=>[at,Fe,He],Q=()=>[Wa,"full",...x()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[di],breakpoint:[di],color:[KP],container:[di],"drop-shadow":[di],ease:["in","out","in-out"],font:[JP],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[di],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[di],shadow:[di],spacing:["px",at],text:[di],"text-shadow":[di],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Wa,He,Fe,w]}],container:["container"],columns:[{columns:[at,He,Fe,l]}],"break-after":[{"break-after":I()}],"break-before":[{"break-before":I()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:D()}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:M()}],"inset-x":[{"inset-x":M()}],"inset-y":[{"inset-y":M()}],start:[{start:M()}],end:[{end:M()}],top:[{top:M()}],right:[{right:M()}],bottom:[{bottom:M()}],left:[{left:M()}],visibility:["visible","invisible","collapse"],z:[{z:[Yi,"auto",Fe,He]}],basis:[{basis:[Wa,"full","auto",l,...x()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[at,Wa,"auto","initial","none",He]}],grow:[{grow:["",at,Fe,He]}],shrink:[{shrink:["",at,Fe,He]}],order:[{order:[Yi,"first","last","none",Fe,He]}],"grid-cols":[{"grid-cols":G()}],"col-start-end":[{col:V()}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":G()}],"row-start-end":[{row:V()}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":q()}],"auto-rows":[{"auto-rows":q()}],gap:[{gap:x()}],"gap-x":[{"gap-x":x()}],"gap-y":[{"gap-y":x()}],"justify-content":[{justify:[...H(),"normal"]}],"justify-items":[{"justify-items":[...$(),"normal"]}],"justify-self":[{"justify-self":["auto",...$()]}],"align-content":[{content:["normal",...H()]}],"align-items":[{items:[...$(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...$(),{baseline:["","last"]}]}],"place-content":[{"place-content":H()}],"place-items":[{"place-items":[...$(),"baseline"]}],"place-self":[{"place-self":["auto",...$()]}],p:[{p:x()}],px:[{px:x()}],py:[{py:x()}],ps:[{ps:x()}],pe:[{pe:x()}],pt:[{pt:x()}],pr:[{pr:x()}],pb:[{pb:x()}],pl:[{pl:x()}],m:[{m:K()}],mx:[{mx:K()}],my:[{my:K()}],ms:[{ms:K()}],me:[{me:K()}],mt:[{mt:K()}],mr:[{mr:K()}],mb:[{mb:K()}],ml:[{ml:K()}],"space-x":[{"space-x":x()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":x()}],"space-y-reverse":["space-y-reverse"],size:[{size:X()}],w:[{w:[l,"screen",...X()]}],"min-w":[{"min-w":[l,"screen","none",...X()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...X()]}],h:[{h:["screen","lh",...X()]}],"min-h":[{"min-h":["screen","lh","none",...X()]}],"max-h":[{"max-h":["screen","lh",...X()]}],"font-size":[{text:["base",n,Qc,Fo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,Fe,Up]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",$p,He]}],"font-family":[{font:[YP,He,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[c,Fe,He]}],"line-clamp":[{"line-clamp":[at,"none",Fe,Up]}],leading:[{leading:[i,...x()]}],"list-image":[{"list-image":["none",Fe,He]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Fe,He]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:B()}],"text-color":[{text:B()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...re(),"wavy"]}],"text-decoration-thickness":[{decoration:[at,"from-font","auto",Fe,Fo]}],"text-decoration-color":[{decoration:B()}],"underline-offset":[{"underline-offset":[at,"auto",Fe,He]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:x()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Fe,He]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Fe,He]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:te()}],"bg-repeat":[{bg:ae()}],"bg-size":[{bg:Z()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Yi,Fe,He],radial:["",Fe,He],conic:[Yi,Fe,He]},ZP,XP]}],"bg-color":[{bg:B()}],"gradient-from-pos":[{from:oe()}],"gradient-via-pos":[{via:oe()}],"gradient-to-pos":[{to:oe()}],"gradient-from":[{from:B()}],"gradient-via":[{via:B()}],"gradient-to":[{to:B()}],rounded:[{rounded:ce()}],"rounded-s":[{"rounded-s":ce()}],"rounded-e":[{"rounded-e":ce()}],"rounded-t":[{"rounded-t":ce()}],"rounded-r":[{"rounded-r":ce()}],"rounded-b":[{"rounded-b":ce()}],"rounded-l":[{"rounded-l":ce()}],"rounded-ss":[{"rounded-ss":ce()}],"rounded-se":[{"rounded-se":ce()}],"rounded-ee":[{"rounded-ee":ce()}],"rounded-es":[{"rounded-es":ce()}],"rounded-tl":[{"rounded-tl":ce()}],"rounded-tr":[{"rounded-tr":ce()}],"rounded-br":[{"rounded-br":ce()}],"rounded-bl":[{"rounded-bl":ce()}],"border-w":[{border:Y()}],"border-w-x":[{"border-x":Y()}],"border-w-y":[{"border-y":Y()}],"border-w-s":[{"border-s":Y()}],"border-w-e":[{"border-e":Y()}],"border-w-t":[{"border-t":Y()}],"border-w-r":[{"border-r":Y()}],"border-w-b":[{"border-b":Y()}],"border-w-l":[{"border-l":Y()}],"divide-x":[{"divide-x":Y()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Y()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...re(),"hidden","none"]}],"divide-style":[{divide:[...re(),"hidden","none"]}],"border-color":[{border:B()}],"border-color-x":[{"border-x":B()}],"border-color-y":[{"border-y":B()}],"border-color-s":[{"border-s":B()}],"border-color-e":[{"border-e":B()}],"border-color-t":[{"border-t":B()}],"border-color-r":[{"border-r":B()}],"border-color-b":[{"border-b":B()}],"border-color-l":[{"border-l":B()}],"divide-color":[{divide:B()}],"outline-style":[{outline:[...re(),"none","hidden"]}],"outline-offset":[{"outline-offset":[at,Fe,He]}],"outline-w":[{outline:["",at,Qc,Fo]}],"outline-color":[{outline:B()}],shadow:[{shadow:["","none",h,Rd,xd]}],"shadow-color":[{shadow:B()}],"inset-shadow":[{"inset-shadow":["none",u,Rd,xd]}],"inset-shadow-color":[{"inset-shadow":B()}],"ring-w":[{ring:Y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:B()}],"ring-offset-w":[{"ring-offset":[at,Fo]}],"ring-offset-color":[{"ring-offset":B()}],"inset-ring-w":[{"inset-ring":Y()}],"inset-ring-color":[{"inset-ring":B()}],"text-shadow":[{"text-shadow":["none",m,Rd,xd]}],"text-shadow-color":[{"text-shadow":B()}],opacity:[{opacity:[at,Fe,He]}],"mix-blend":[{"mix-blend":[...me(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":me()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[at]}],"mask-image-linear-from-pos":[{"mask-linear-from":xe()}],"mask-image-linear-to-pos":[{"mask-linear-to":xe()}],"mask-image-linear-from-color":[{"mask-linear-from":B()}],"mask-image-linear-to-color":[{"mask-linear-to":B()}],"mask-image-t-from-pos":[{"mask-t-from":xe()}],"mask-image-t-to-pos":[{"mask-t-to":xe()}],"mask-image-t-from-color":[{"mask-t-from":B()}],"mask-image-t-to-color":[{"mask-t-to":B()}],"mask-image-r-from-pos":[{"mask-r-from":xe()}],"mask-image-r-to-pos":[{"mask-r-to":xe()}],"mask-image-r-from-color":[{"mask-r-from":B()}],"mask-image-r-to-color":[{"mask-r-to":B()}],"mask-image-b-from-pos":[{"mask-b-from":xe()}],"mask-image-b-to-pos":[{"mask-b-to":xe()}],"mask-image-b-from-color":[{"mask-b-from":B()}],"mask-image-b-to-color":[{"mask-b-to":B()}],"mask-image-l-from-pos":[{"mask-l-from":xe()}],"mask-image-l-to-pos":[{"mask-l-to":xe()}],"mask-image-l-from-color":[{"mask-l-from":B()}],"mask-image-l-to-color":[{"mask-l-to":B()}],"mask-image-x-from-pos":[{"mask-x-from":xe()}],"mask-image-x-to-pos":[{"mask-x-to":xe()}],"mask-image-x-from-color":[{"mask-x-from":B()}],"mask-image-x-to-color":[{"mask-x-to":B()}],"mask-image-y-from-pos":[{"mask-y-from":xe()}],"mask-image-y-to-pos":[{"mask-y-to":xe()}],"mask-image-y-from-color":[{"mask-y-from":B()}],"mask-image-y-to-color":[{"mask-y-to":B()}],"mask-image-radial":[{"mask-radial":[Fe,He]}],"mask-image-radial-from-pos":[{"mask-radial-from":xe()}],"mask-image-radial-to-pos":[{"mask-radial-to":xe()}],"mask-image-radial-from-color":[{"mask-radial-from":B()}],"mask-image-radial-to-color":[{"mask-radial-to":B()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":R()}],"mask-image-conic-pos":[{"mask-conic":[at]}],"mask-image-conic-from-pos":[{"mask-conic-from":xe()}],"mask-image-conic-to-pos":[{"mask-conic-to":xe()}],"mask-image-conic-from-color":[{"mask-conic-from":B()}],"mask-image-conic-to-color":[{"mask-conic-to":B()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:te()}],"mask-repeat":[{mask:ae()}],"mask-size":[{mask:Z()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Fe,He]}],filter:[{filter:["","none",Fe,He]}],blur:[{blur:Oe()}],brightness:[{brightness:[at,Fe,He]}],contrast:[{contrast:[at,Fe,He]}],"drop-shadow":[{"drop-shadow":["","none",g,Rd,xd]}],"drop-shadow-color":[{"drop-shadow":B()}],grayscale:[{grayscale:["",at,Fe,He]}],"hue-rotate":[{"hue-rotate":[at,Fe,He]}],invert:[{invert:["",at,Fe,He]}],saturate:[{saturate:[at,Fe,He]}],sepia:[{sepia:["",at,Fe,He]}],"backdrop-filter":[{"backdrop-filter":["","none",Fe,He]}],"backdrop-blur":[{"backdrop-blur":Oe()}],"backdrop-brightness":[{"backdrop-brightness":[at,Fe,He]}],"backdrop-contrast":[{"backdrop-contrast":[at,Fe,He]}],"backdrop-grayscale":[{"backdrop-grayscale":["",at,Fe,He]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[at,Fe,He]}],"backdrop-invert":[{"backdrop-invert":["",at,Fe,He]}],"backdrop-opacity":[{"backdrop-opacity":[at,Fe,He]}],"backdrop-saturate":[{"backdrop-saturate":[at,Fe,He]}],"backdrop-sepia":[{"backdrop-sepia":["",at,Fe,He]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":x()}],"border-spacing-x":[{"border-spacing-x":x()}],"border-spacing-y":[{"border-spacing-y":x()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Fe,He]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[at,"initial",Fe,He]}],ease:[{ease:["linear","initial",C,Fe,He]}],delay:[{delay:[at,Fe,He]}],animate:[{animate:["none",N,Fe,He]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,Fe,He]}],"perspective-origin":[{"perspective-origin":D()}],rotate:[{rotate:qe()}],"rotate-x":[{"rotate-x":qe()}],"rotate-y":[{"rotate-y":qe()}],"rotate-z":[{"rotate-z":qe()}],scale:[{scale:lt()}],"scale-x":[{"scale-x":lt()}],"scale-y":[{"scale-y":lt()}],"scale-z":[{"scale-z":lt()}],"scale-3d":["scale-3d"],skew:[{skew:Dt()}],"skew-x":[{"skew-x":Dt()}],"skew-y":[{"skew-y":Dt()}],transform:[{transform:[Fe,He,"","none","gpu","cpu"]}],"transform-origin":[{origin:D()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Q()}],"translate-x":[{"translate-x":Q()}],"translate-y":[{"translate-y":Q()}],"translate-z":[{"translate-z":Q()}],"translate-none":["translate-none"],accent:[{accent:B()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:B()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Fe,He]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":x()}],"scroll-mx":[{"scroll-mx":x()}],"scroll-my":[{"scroll-my":x()}],"scroll-ms":[{"scroll-ms":x()}],"scroll-me":[{"scroll-me":x()}],"scroll-mt":[{"scroll-mt":x()}],"scroll-mr":[{"scroll-mr":x()}],"scroll-mb":[{"scroll-mb":x()}],"scroll-ml":[{"scroll-ml":x()}],"scroll-p":[{"scroll-p":x()}],"scroll-px":[{"scroll-px":x()}],"scroll-py":[{"scroll-py":x()}],"scroll-ps":[{"scroll-ps":x()}],"scroll-pe":[{"scroll-pe":x()}],"scroll-pt":[{"scroll-pt":x()}],"scroll-pr":[{"scroll-pr":x()}],"scroll-pb":[{"scroll-pb":x()}],"scroll-pl":[{"scroll-pl":x()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Fe,He]}],fill:[{fill:["none",...B()]}],"stroke-w":[{stroke:[at,Qc,Fo,Up]}],stroke:[{stroke:["none",...B()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},nO=DP(rO);function rs(...e){return nO(ex(e))}const sO=mP("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),rt=se.forwardRef(({className:e,variant:t,size:n,asChild:s=!1,...c},i)=>{const o=s?lP:"button";return b.jsx(o,{"data-slot":"button",className:rs(sO({variant:t,size:n,className:e})),ref:i,...c})});rt.displayName="Button";function Ie({className:e,...t}){return b.jsx("div",{"data-slot":"card",className:rs("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function Ne({className:e,...t}){return b.jsx("div",{"data-slot":"card-header",className:rs("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function Le({className:e,...t}){return b.jsx("h4",{"data-slot":"card-title",className:rs("leading-none",e),...t})}function Ve({className:e,...t}){return b.jsx("p",{"data-slot":"card-description",className:rs("text-muted-foreground",e),...t})}function Pe({className:e,...t}){return b.jsx("div",{"data-slot":"card-content",className:rs("px-6 [&:last-child]:pb-6",e),...t})}var iO=G1();function oO(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const aO=e=>{switch(e){case"success":return uO;case"info":return fO;case"warning":return dO;case"error":return hO;default:return null}},cO=Array(12).fill(0),lO=({visible:e,className:t})=>se.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},se.createElement("div",{className:"sonner-spinner"},cO.map((n,s)=>se.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),uO=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),dO=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),fO=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),hO=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},se.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),pO=se.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},se.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),se.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),mO=()=>{const[e,t]=se.useState(document.hidden);return se.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let zy=1;class gO{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:s,...c}=t,i=typeof t?.id=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:zy++,o=this.toasts.find(f=>f.id===i),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(f=>f.id===i?(this.publish({...f,...t,id:i,title:s}),{...f,...t,id:i,dismissible:l,title:s}):f):this.addToast({title:s,...c,dismissible:l,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(s=>s({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let s;n.loading!==void 0&&(s=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const c=Promise.resolve(t instanceof Function?t():t);let i=s!==void 0,o;const l=c.then(async p=>{if(o=["resolve",p],se.isValidElement(p))i=!1,this.create({id:s,type:"default",message:p});else if(vO(p)&&!p.ok){i=!1;const u=typeof n.error=="function"?await n.error(`HTTP error! status: ${p.status}`):n.error,m=typeof n.description=="function"?await n.description(`HTTP error! status: ${p.status}`):n.description,v=typeof u=="object"&&!se.isValidElement(u)?u:{message:u};this.create({id:s,type:"error",description:m,...v})}else if(p instanceof Error){i=!1;const u=typeof n.error=="function"?await n.error(p):n.error,m=typeof n.description=="function"?await n.description(p):n.description,v=typeof u=="object"&&!se.isValidElement(u)?u:{message:u};this.create({id:s,type:"error",description:m,...v})}else if(n.success!==void 0){i=!1;const u=typeof n.success=="function"?await n.success(p):n.success,m=typeof n.description=="function"?await n.description(p):n.description,v=typeof u=="object"&&!se.isValidElement(u)?u:{message:u};this.create({id:s,type:"success",description:m,...v})}}).catch(async p=>{if(o=["reject",p],n.error!==void 0){i=!1;const h=typeof n.error=="function"?await n.error(p):n.error,u=typeof n.description=="function"?await n.description(p):n.description,g=typeof h=="object"&&!se.isValidElement(h)?h:{message:h};this.create({id:s,type:"error",description:u,...g})}}).finally(()=>{i&&(this.dismiss(s),s=void 0),n.finally==null||n.finally.call(n)}),f=()=>new Promise((p,h)=>l.then(()=>o[0]==="reject"?h(o[1]):p(o[1])).catch(h));return typeof s!="string"&&typeof s!="number"?{unwrap:f}:Object.assign(s,{unwrap:f})},this.custom=(t,n)=>{const s=n?.id||zy++;return this.create({jsx:t(s),id:s,...n}),s},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const gn=new gO,yO=(e,t)=>{const n=t?.id||zy++;return gn.addToast({title:e,...t,id:n}),n},vO=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",wO=yO,EO=()=>gn.toasts,SO=()=>gn.getActiveToasts(),Se=Object.assign(wO,{success:gn.success,info:gn.info,warning:gn.warning,error:gn.error,custom:gn.custom,message:gn.message,promise:gn.promise,dismiss:gn.dismiss,loading:gn.loading},{getHistory:EO,getToasts:SO});oO("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function kd(e){return e.label!==void 0}const bO=3,TO="24px",CO="16px",e0=4e3,_O=356,xO=14,RO=45,kO=200;function js(...e){return e.filter(Boolean).join(" ")}function AO(e){const[t,n]=e.split("-"),s=[];return t&&s.push(t),n&&s.push(n),s}const IO=e=>{var t,n,s,c,i,o,l,f,p;const{invert:h,toast:u,unstyled:m,interacting:g,setHeights:v,visibleToasts:S,heights:w,index:C,toasts:N,expanded:I,removeToast:R,defaultRichColors:D,closeButton:A,style:O,cancelButtonStyle:x,actionButtonStyle:M,className:G="",descriptionClassName:V="",duration:z,position:q,gap:H,expandByDefault:$,classNames:K,icons:X,closeButtonAriaLabel:B="Close toast"}=e,[te,ae]=se.useState(null),[Z,oe]=se.useState(null),[ce,Y]=se.useState(!1),[re,me]=se.useState(!1),[xe,Oe]=se.useState(!1),[qe,lt]=se.useState(!1),[Dt,Q]=se.useState(!1),[Ee,Te]=se.useState(0),[nt,dt]=se.useState(0),ht=se.useRef(u.duration||z||e0),Ws=se.useRef(null),vr=se.useRef(null),ns=C===0,Nn=C+1<=S,Kt=u.type,Dr=u.dismissible!==!1,xi=u.className||"",ga=u.descriptionClassName||"",J=se.useMemo(()=>w.findIndex(Xe=>Xe.toastId===u.id)||0,[w,u.id]),ke=se.useMemo(()=>{var Xe;return(Xe=u.closeButton)!=null?Xe:A},[u.closeButton,A]),wn=se.useMemo(()=>u.duration||z||e0,[u.duration,z]),Ln=se.useRef(0),Cr=se.useRef(0),_r=se.useRef(0),en=se.useRef(null),[_s,Ri]=q.split("-"),ki=se.useMemo(()=>w.reduce((Xe,At,$t)=>$t>=J?Xe:Xe+At.height,0),[w,J]),xr=mO(),ss=u.invert||h,$r=Kt==="loading";Cr.current=se.useMemo(()=>J*H+ki,[J,ki]),se.useEffect(()=>{ht.current=wn},[wn]),se.useEffect(()=>{Y(!0)},[]),se.useEffect(()=>{const Xe=vr.current;if(Xe){const At=Xe.getBoundingClientRect().height;return dt(At),v($t=>[{toastId:u.id,height:At,position:u.position},...$t]),()=>v($t=>$t.filter(Zt=>Zt.toastId!==u.id))}},[v,u.id]),se.useLayoutEffect(()=>{if(!ce)return;const Xe=vr.current,At=Xe.style.height;Xe.style.height="auto";const $t=Xe.getBoundingClientRect().height;Xe.style.height=At,dt($t),v(Zt=>Zt.find(bt=>bt.toastId===u.id)?Zt.map(bt=>bt.toastId===u.id?{...bt,height:$t}:bt):[{toastId:u.id,height:$t,position:u.position},...Zt])},[ce,u.title,u.description,v,u.id,u.jsx,u.action,u.cancel]);const ur=se.useCallback(()=>{me(!0),Te(Cr.current),v(Xe=>Xe.filter(At=>At.toastId!==u.id)),setTimeout(()=>{R(u)},kO)},[u,R,v,Cr]);se.useEffect(()=>{if(u.promise&&Kt==="loading"||u.duration===1/0||u.type==="loading")return;let Xe;return I||g||xr?(()=>{if(_r.current<Ln.current){const Zt=new Date().getTime()-Ln.current;ht.current=ht.current-Zt}_r.current=new Date().getTime()})():(()=>{ht.current!==1/0&&(Ln.current=new Date().getTime(),Xe=setTimeout(()=>{u.onAutoClose==null||u.onAutoClose.call(u,u),ur()},ht.current))})(),()=>clearTimeout(Xe)},[I,g,u,Kt,xr,ur]),se.useEffect(()=>{u.delete&&(ur(),u.onDismiss==null||u.onDismiss.call(u,u))},[ur,u.delete]);function Ks(){var Xe;if(X?.loading){var At;return se.createElement("div",{className:js(K?.loader,u==null||(At=u.classNames)==null?void 0:At.loader,"sonner-loader"),"data-visible":Kt==="loading"},X.loading)}return se.createElement(lO,{className:js(K?.loader,u==null||(Xe=u.classNames)==null?void 0:Xe.loader),visible:Kt==="loading"})}const tn=u.icon||X?.[Kt]||aO(Kt);var En,is;return se.createElement("li",{tabIndex:0,ref:vr,className:js(G,xi,K?.toast,u==null||(t=u.classNames)==null?void 0:t.toast,K?.default,K?.[Kt],u==null||(n=u.classNames)==null?void 0:n[Kt]),"data-sonner-toast":"","data-rich-colors":(En=u.richColors)!=null?En:D,"data-styled":!(u.jsx||u.unstyled||m),"data-mounted":ce,"data-promise":!!u.promise,"data-swiped":Dt,"data-removed":re,"data-visible":Nn,"data-y-position":_s,"data-x-position":Ri,"data-index":C,"data-front":ns,"data-swiping":xe,"data-dismissible":Dr,"data-type":Kt,"data-invert":ss,"data-swipe-out":qe,"data-swipe-direction":Z,"data-expanded":!!(I||$&&ce),"data-testid":u.testId,style:{"--index":C,"--toasts-before":C,"--z-index":N.length-C,"--offset":`${re?Ee:Cr.current}px`,"--initial-height":$?"auto":`${nt}px`,...O,...u.style},onDragEnd:()=>{Oe(!1),ae(null),en.current=null},onPointerDown:Xe=>{Xe.button!==2&&($r||!Dr||(Ws.current=new Date,Te(Cr.current),Xe.target.setPointerCapture(Xe.pointerId),Xe.target.tagName!=="BUTTON"&&(Oe(!0),en.current={x:Xe.clientX,y:Xe.clientY})))},onPointerUp:()=>{var Xe,At,$t;if(qe||!Dr)return;en.current=null;const Zt=Number(((Xe=vr.current)==null?void 0:Xe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),jn=Number(((At=vr.current)==null?void 0:At.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),bt=new Date().getTime()-(($t=Ws.current)==null?void 0:$t.getTime()),xt=te==="x"?Zt:jn,Dn=Math.abs(xt)/bt;if(Math.abs(xt)>=RO||Dn>.11){Te(Cr.current),u.onDismiss==null||u.onDismiss.call(u,u),oe(te==="x"?Zt>0?"right":"left":jn>0?"down":"up"),ur(),lt(!0);return}else{var Bt,wr;(Bt=vr.current)==null||Bt.style.setProperty("--swipe-amount-x","0px"),(wr=vr.current)==null||wr.style.setProperty("--swipe-amount-y","0px")}Q(!1),Oe(!1),ae(null)},onPointerMove:Xe=>{var At,$t,Zt;if(!en.current||!Dr||((At=window.getSelection())==null?void 0:At.toString().length)>0)return;const bt=Xe.clientY-en.current.y,xt=Xe.clientX-en.current.x;var Dn;const Bt=(Dn=e.swipeDirections)!=null?Dn:AO(q);!te&&(Math.abs(xt)>1||Math.abs(bt)>1)&&ae(Math.abs(xt)>Math.abs(bt)?"x":"y");let wr={x:0,y:0};const $n=Qe=>1/(1.5+Math.abs(Qe)/20);if(te==="y"){if(Bt.includes("top")||Bt.includes("bottom"))if(Bt.includes("top")&&bt<0||Bt.includes("bottom")&&bt>0)wr.y=bt;else{const Qe=bt*$n(bt);wr.y=Math.abs(Qe)<Math.abs(bt)?Qe:bt}}else if(te==="x"&&(Bt.includes("left")||Bt.includes("right")))if(Bt.includes("left")&&xt<0||Bt.includes("right")&&xt>0)wr.x=xt;else{const Qe=xt*$n(xt);wr.x=Math.abs(Qe)<Math.abs(xt)?Qe:xt}(Math.abs(wr.x)>0||Math.abs(wr.y)>0)&&Q(!0),($t=vr.current)==null||$t.style.setProperty("--swipe-amount-x",`${wr.x}px`),(Zt=vr.current)==null||Zt.style.setProperty("--swipe-amount-y",`${wr.y}px`)}},ke&&!u.jsx&&Kt!=="loading"?se.createElement("button",{"aria-label":B,"data-disabled":$r,"data-close-button":!0,onClick:$r||!Dr?()=>{}:()=>{ur(),u.onDismiss==null||u.onDismiss.call(u,u)},className:js(K?.closeButton,u==null||(s=u.classNames)==null?void 0:s.closeButton)},(is=X?.close)!=null?is:pO):null,(Kt||u.icon||u.promise)&&u.icon!==null&&(X?.[Kt]!==null||u.icon)?se.createElement("div",{"data-icon":"",className:js(K?.icon,u==null||(c=u.classNames)==null?void 0:c.icon)},u.promise||u.type==="loading"&&!u.icon?u.icon||Ks():null,u.type!=="loading"?tn:null):null,se.createElement("div",{"data-content":"",className:js(K?.content,u==null||(i=u.classNames)==null?void 0:i.content)},se.createElement("div",{"data-title":"",className:js(K?.title,u==null||(o=u.classNames)==null?void 0:o.title)},u.jsx?u.jsx:typeof u.title=="function"?u.title():u.title),u.description?se.createElement("div",{"data-description":"",className:js(V,ga,K?.description,u==null||(l=u.classNames)==null?void 0:l.description)},typeof u.description=="function"?u.description():u.description):null),se.isValidElement(u.cancel)?u.cancel:u.cancel&&kd(u.cancel)?se.createElement("button",{"data-button":!0,"data-cancel":!0,style:u.cancelButtonStyle||x,onClick:Xe=>{kd(u.cancel)&&Dr&&(u.cancel.onClick==null||u.cancel.onClick.call(u.cancel,Xe),ur())},className:js(K?.cancelButton,u==null||(f=u.classNames)==null?void 0:f.cancelButton)},u.cancel.label):null,se.isValidElement(u.action)?u.action:u.action&&kd(u.action)?se.createElement("button",{"data-button":!0,"data-action":!0,style:u.actionButtonStyle||M,onClick:Xe=>{kd(u.action)&&(u.action.onClick==null||u.action.onClick.call(u.action,Xe),!Xe.defaultPrevented&&ur())},className:js(K?.actionButton,u==null||(p=u.classNames)==null?void 0:p.actionButton)},u.action.label):null)};function t0(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function PO(e,t){const n={};return[e,t].forEach((s,c)=>{const i=c===1,o=i?"--mobile-offset":"--offset",l=i?CO:TO;function f(p){["top","right","bottom","left"].forEach(h=>{n[`${o}-${h}`]=typeof p=="number"?`${p}px`:p})}typeof s=="number"||typeof s=="string"?f(s):typeof s=="object"?["top","right","bottom","left"].forEach(p=>{s[p]===void 0?n[`${o}-${p}`]=l:n[`${o}-${p}`]=typeof s[p]=="number"?`${s[p]}px`:s[p]}):f(l)}),n}const OO=se.forwardRef(function(t,n){const{id:s,invert:c,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:l,closeButton:f,className:p,offset:h,mobileOffset:u,theme:m="light",richColors:g,duration:v,style:S,visibleToasts:w=bO,toastOptions:C,dir:N=t0(),gap:I=xO,icons:R,containerAriaLabel:D="Notifications"}=t,[A,O]=se.useState([]),x=se.useMemo(()=>s?A.filter(ce=>ce.toasterId===s):A.filter(ce=>!ce.toasterId),[A,s]),M=se.useMemo(()=>Array.from(new Set([i].concat(x.filter(ce=>ce.position).map(ce=>ce.position)))),[x,i]),[G,V]=se.useState([]),[z,q]=se.useState(!1),[H,$]=se.useState(!1),[K,X]=se.useState(m!=="system"?m:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),B=se.useRef(null),te=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),ae=se.useRef(null),Z=se.useRef(!1),oe=se.useCallback(ce=>{O(Y=>{var re;return(re=Y.find(me=>me.id===ce.id))!=null&&re.delete||gn.dismiss(ce.id),Y.filter(({id:me})=>me!==ce.id)})},[]);return se.useEffect(()=>gn.subscribe(ce=>{if(ce.dismiss){requestAnimationFrame(()=>{O(Y=>Y.map(re=>re.id===ce.id?{...re,delete:!0}:re))});return}setTimeout(()=>{iO.flushSync(()=>{O(Y=>{const re=Y.findIndex(me=>me.id===ce.id);return re!==-1?[...Y.slice(0,re),{...Y[re],...ce},...Y.slice(re+1)]:[ce,...Y]})})})}),[A]),se.useEffect(()=>{if(m!=="system"){X(m);return}if(m==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?X("dark"):X("light")),typeof window>"u")return;const ce=window.matchMedia("(prefers-color-scheme: dark)");try{ce.addEventListener("change",({matches:Y})=>{X(Y?"dark":"light")})}catch{ce.addListener(({matches:re})=>{try{X(re?"dark":"light")}catch(me){console.error(me)}})}},[m]),se.useEffect(()=>{A.length<=1&&q(!1)},[A]),se.useEffect(()=>{const ce=Y=>{var re;if(o.every(Oe=>Y[Oe]||Y.code===Oe)){var xe;q(!0),(xe=B.current)==null||xe.focus()}Y.code==="Escape"&&(document.activeElement===B.current||(re=B.current)!=null&&re.contains(document.activeElement))&&q(!1)};return document.addEventListener("keydown",ce),()=>document.removeEventListener("keydown",ce)},[o]),se.useEffect(()=>{if(B.current)return()=>{ae.current&&(ae.current.focus({preventScroll:!0}),ae.current=null,Z.current=!1)}},[B.current]),se.createElement("section",{ref:n,"aria-label":`${D} ${te}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},M.map((ce,Y)=>{var re;const[me,xe]=ce.split("-");return x.length?se.createElement("ol",{key:ce,dir:N==="auto"?t0():N,tabIndex:-1,ref:B,className:p,"data-sonner-toaster":!0,"data-sonner-theme":K,"data-y-position":me,"data-x-position":xe,style:{"--front-toast-height":`${((re=G[0])==null?void 0:re.height)||0}px`,"--width":`${_O}px`,"--gap":`${I}px`,...S,...PO(h,u)},onBlur:Oe=>{Z.current&&!Oe.currentTarget.contains(Oe.relatedTarget)&&(Z.current=!1,ae.current&&(ae.current.focus({preventScroll:!0}),ae.current=null))},onFocus:Oe=>{Oe.target instanceof HTMLElement&&Oe.target.dataset.dismissible==="false"||Z.current||(Z.current=!0,ae.current=Oe.relatedTarget)},onMouseEnter:()=>q(!0),onMouseMove:()=>q(!0),onMouseLeave:()=>{H||q(!1)},onDragEnd:()=>q(!1),onPointerDown:Oe=>{Oe.target instanceof HTMLElement&&Oe.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},x.filter(Oe=>!Oe.position&&Y===0||Oe.position===ce).map((Oe,qe)=>{var lt,Dt;return se.createElement(IO,{key:Oe.id,icons:R,index:qe,toast:Oe,defaultRichColors:g,duration:(lt=C?.duration)!=null?lt:v,className:C?.className,descriptionClassName:C?.descriptionClassName,invert:c,visibleToasts:w,closeButton:(Dt=C?.closeButton)!=null?Dt:f,interacting:H,position:ce,style:C?.style,unstyled:C?.unstyled,classNames:C?.classNames,cancelButtonStyle:C?.cancelButtonStyle,actionButtonStyle:C?.actionButtonStyle,closeButtonAriaLabel:C?.closeButtonAriaLabel,removeToast:oe,toasts:x.filter(Q=>Q.position==Oe.position),heights:G.filter(Q=>Q.position==Oe.position),setHeights:V,expandByDefault:l,gap:I,expanded:z,swipeDirections:t.swipeDirections})})):null}))});var Wo={},An={};const nf={createHash:()=>({update:()=>({digest:()=>""})}),randomBytes:()=>({toString:()=>""})};typeof ze<"u"&&ze.exports&&(ze.exports=nf,ze.exports.default=nf);const NO=Object.freeze(Object.defineProperty({__proto__:null,crypto:nf,default:nf},Symbol.toStringTag,{value:"Module"})),Ti=yu(NO);var fi={},r0;function pa(){if(r0)return fi;r0=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.ApiErrorException=fi.MisoClientError=void 0,fi.transformError=t,fi.handleApiError=s;class e extends Error{constructor(i,o,l,f){let p=i;o&&(o.title?p=o.title:o.errors&&o.errors.length>0&&(p=o.errors[0])),super(p),this.name="MisoClientError",this.errorResponse=o,this.errorBody=l,this.statusCode=f??o?.statusCode,Error.captureStackTrace&&Error.captureStackTrace(this,e)}}fi.MisoClientError=e;function t(c){if(c&&typeof c=="object"&&"response"in c){const i=c;if(i.response?.data){const o=i.response.data;if(typeof o=="object"&&o!==null&&"error"in o){const f=o.error,p=f.statusCode??i.response.status??500;return{errors:f.errors??["Unknown error"],type:f.type??"about:blank",title:f.title??i.message??"Unknown error",statusCode:p,instance:f.instance??i.config?.url,correlationId:f.correlationId}}if(typeof o=="object"&&o!==null){const l=o,f=typeof l.statusCode=="number"?l.statusCode:typeof i.response?.status=="number"?i.response.status:500;return{errors:Array.isArray(l.errors)?l.errors:["Unknown error"],type:l.type??"about:blank",title:l.title??i.message??"Unknown error",statusCode:f,instance:l.instance??i.config?.url,correlationId:l.correlationId}}}return{errors:[i.message??"Network error"],type:"about:blank",title:"Network error",statusCode:i.response?.status??0}}return c instanceof Error?{errors:[c.message??"Unknown error"],type:"about:blank",title:"Error",statusCode:0}:{errors:["Unknown error"],type:"about:blank",title:"Unknown error",statusCode:0}}class n extends Error{constructor(i){super(i.title||"API Error"),this.name="ApiErrorException",this.statusCode=i.statusCode,this.correlationId=i.correlationId,this.type=i.type,this.instance=i.instance,this.errors=i.errors,Error.captureStackTrace&&Error.captureStackTrace(this,n)}}fi.ApiErrorException=n;function s(c){const i=t(c);throw new n(i)}return fi}var Ka={},n0;function ma(){if(n0)return Ka;n0=1,Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.isBrowser=e,Ka.validateUrl=t,Ka.resolveControllerUrl=n;function e(){return typeof globalThis.window<"u"&&typeof globalThis.localStorage<"u"&&typeof globalThis.fetch<"u"}function t(s){try{const c=new URL(s);return c.protocol==="http:"||c.protocol==="https:"}catch{return!1}}function n(s){const c=e();let i;if(c?i=s.controllerPublicUrl:i=s.controllerPrivateUrl,i||(i=s.controllerUrl),!i)throw new Error(`No controller URL configured. Please provide ${c?"controllerPublicUrl":"controllerPrivateUrl"} or controllerUrl in your configuration.`);if(!t(i))throw new Error(`Invalid controller URL format: "${i}". URL must be a valid HTTP or HTTPS URL.`);return i.includes("localhost")&&(i=i.replace(/localhost/g,"127.0.0.1")),i}return Ka}var hi={},Ad={exports:{}};const oo=yu(EI);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var s0;function vu(){return s0||(s0=1,(function(e,t){var n=oo,s=n.Buffer;function c(o,l){for(var f in o)l[f]=o[f]}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=n:(c(n,t),t.Buffer=i);function i(o,l,f){return s(o,l,f)}i.prototype=Object.create(s.prototype),c(s,i),i.from=function(o,l,f){if(typeof o=="number")throw new TypeError("Argument must not be a number");return s(o,l,f)},i.alloc=function(o,l,f){if(typeof o!="number")throw new TypeError("Argument must be a number");var p=s(o);return l!==void 0?typeof f=="string"?p.fill(l,f):p.fill(l):p.fill(0),p},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return s(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(Ad,Ad.exports)),Ad.exports}class lo{static from(t){return new lo}constructor(){}pipe(){return{}}on(){return this}once(){return Promise.resolve({})}read(){return null}push(){return!0}destroy(){}emit(){return!1}removeListener(){return this}removeAllListeners(){return this}}class Cf{write(){return!0}end(){return this}on(){return this}once(){return Promise.resolve({})}destroy(){}}class _f extends lo{_transform(){}}class bv extends lo{write(){return!0}end(){return this}}class Tv extends _f{}const da={Readable:lo,Writable:Cf,Transform:_f,Duplex:bv,PassThrough:Tv};typeof ze<"u"&&typeof ze.exports<"u"&&(ze.exports=da,ze.exports.default=da,ze.exports.stream=da,ze.exports.Readable=lo,ze.exports.Writable=Cf,ze.exports.Transform=_f,ze.exports.Duplex=bv,ze.exports.PassThrough=Tv);typeof ft<"u"&&(ft.default=da,ft.stream=da,ft.Readable=lo,ft.Writable=Cf,ft.Transform=_f,ft.Duplex=bv,ft.PassThrough=Tv);const dc=Object.freeze(Object.defineProperty({__proto__:null,Readable:lo,Writable:Cf,default:da,stream:da},Symbol.toStringTag,{value:"Module"}));function xf(e,t){if(!t)return;let n=t.prototype;if(!n)try{Object.isExtensible&&Object.isExtensible(t)?(t.prototype={},n=t.prototype):n=Object.prototype}catch{n=Object.prototype}(typeof n!="object"||n===null)&&(n=Object.prototype),e.super_=t;try{e.prototype=Object.create(n,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}catch{try{if(e.prototype=Object.create(Object.prototype),e.prototype.constructor=e,n&&typeof n=="object"&&n!==Object.prototype){for(const c in n)if(n.hasOwnProperty(c))try{e.prototype[c]=n[c]}catch{}}}catch{e.prototype||(e.prototype={}),e.prototype.constructor||(e.prototype.constructor=e)}}}function Rf(e){try{return JSON.stringify(e,null,2)}catch{return String(e)}}function kf(e){return function(...t){return new Promise((n,s)=>{e(...t,(c,i)=>{c?s(c):n(i)})})}}function Af(e,t){let n=!1;return function(...s){return n||(console.warn("DeprecationWarning:",t),n=!0),e.apply(this,s)}}const fa={inherits:xf,inspect:Rf,promisify:kf,deprecate:Af};typeof ze<"u"&&typeof ze.exports<"u"&&(ze.exports=fa,ze.exports.default=fa,ze.exports.util=fa,ze.exports.inherits=xf,ze.exports.inspect=Rf,ze.exports.promisify=kf,ze.exports.deprecate=Af);typeof ft<"u"&&(ft.default=fa,ft.util=fa,ft.inherits=xf,ft.inspect=Rf,ft.promisify=kf,ft.deprecate=Af);const uo=Object.freeze(Object.defineProperty({__proto__:null,default:fa,deprecate:Af,inherits:xf,inspect:Rf,promisify:kf,util:fa},Symbol.toStringTag,{value:"Module"}));var qp,i0;function hx(){if(i0)return qp;i0=1;var e=vu().Buffer,t=dc,n=uo;function s(c){if(this.buffer=null,this.writable=!0,this.readable=!0,!c)return this.buffer=e.alloc(0),this;if(typeof c.pipe=="function")return this.buffer=e.alloc(0),c.pipe(this),this;if(c.length||typeof c=="object")return this.buffer=c,this.writable=!1,process.nextTick(function(){this.emit("end",c),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof c+")")}return n.inherits(s,t),s.prototype.write=function(i){this.buffer=e.concat([this.buffer,e.from(i)]),this.emit("data",i)},s.prototype.end=function(i){i&&this.write(i),this.emit("end",i),this.emit("close"),this.writable=!1,this.readable=!1},qp=s,qp}var Mp,o0;function LO(){if(o0)return Mp;o0=1;function e(s){var c=(s/8|0)+(s%8===0?0:1);return c}var t={ES256:e(256),ES384:e(384),ES512:e(521)};function n(s){var c=t[s];if(c)return c;throw new Error('Unknown algorithm "'+s+'"')}return Mp=n,Mp}var Hp,a0;function jO(){if(a0)return Hp;a0=1;var e=vu().Buffer,t=LO(),n=128,s=0,c=32,i=16,o=2,l=i|c|s<<6,f=o|s<<6;function p(v){return v.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function h(v){if(e.isBuffer(v))return v;if(typeof v=="string")return e.from(v,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function u(v,S){v=h(v);var w=t(S),C=w+1,N=v.length,I=0;if(v[I++]!==l)throw new Error('Could not find expected "seq"');var R=v[I++];if(R===(n|1)&&(R=v[I++]),N-I<R)throw new Error('"seq" specified length of "'+R+'", only "'+(N-I)+'" remaining');if(v[I++]!==f)throw new Error('Could not find expected "int" for "r"');var D=v[I++];if(N-I-2<D)throw new Error('"r" specified length of "'+D+'", only "'+(N-I-2)+'" available');if(C<D)throw new Error('"r" specified length of "'+D+'", max of "'+C+'" is acceptable');var A=I;if(I+=D,v[I++]!==f)throw new Error('Could not find expected "int" for "s"');var O=v[I++];if(N-I!==O)throw new Error('"s" specified length of "'+O+'", expected "'+(N-I)+'"');if(C<O)throw new Error('"s" specified length of "'+O+'", max of "'+C+'" is acceptable');var x=I;if(I+=O,I!==N)throw new Error('Expected to consume entire buffer, but "'+(N-I)+'" bytes remain');var M=w-D,G=w-O,V=e.allocUnsafe(M+D+G+O);for(I=0;I<M;++I)V[I]=0;v.copy(V,I,A+Math.max(-M,0),A+D),I=w;for(var z=I;I<z+G;++I)V[I]=0;return v.copy(V,I,x+Math.max(-G,0),x+O),V=V.toString("base64"),V=p(V),V}function m(v,S,w){for(var C=0;S+C<w&&v[S+C]===0;)++C;var N=v[S+C]>=n;return N&&--C,C}function g(v,S){v=h(v);var w=t(S),C=v.length;if(C!==w*2)throw new TypeError('"'+S+'" signatures must be "'+w*2+'" bytes, saw "'+C+'"');var N=m(v,0,w),I=m(v,w,v.length),R=w-N,D=w-I,A=2+R+1+1+D,O=A<n,x=e.allocUnsafe((O?2:3)+A),M=0;return x[M++]=l,O?x[M++]=A:(x[M++]=n|1,x[M++]=A&255),x[M++]=f,x[M++]=R,N<0?(x[M++]=0,M+=v.copy(x,M,0,w)):M+=v.copy(x,M,N,w),x[M++]=f,x[M++]=D,I<0?(x[M++]=0,v.copy(x,M,w)):v.copy(x,M,w+I),x}return Hp={derToJose:u,joseToDer:g},Hp}var Fp,c0;function DO(){if(c0)return Fp;c0=1;var e=oo.Buffer,t=oo.SlowBuffer;Fp=n;function n(i,o){if(!e.isBuffer(i)||!e.isBuffer(o)||i.length!==o.length)return!1;for(var l=0,f=0;f<i.length;f++)l|=i[f]^o[f];return l===0}n.install=function(){e.prototype.equal=t.prototype.equal=function(o){return n(this,o)}};var s=e.prototype.equal,c=t.prototype.equal;return n.restore=function(){e.prototype.equal=s,t.prototype.equal=c},Fp}var Wp,l0;function px(){if(l0)return Wp;l0=1;var e=vu().Buffer,t=Ti,n=jO(),s=uo,c=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,i="secret must be a string or buffer",o="key must be a string or a buffer",l="key must be a string, a buffer or an object",f=typeof t.createPublicKey=="function";f&&(o+=" or a KeyObject",i+="or a KeyObject");function p(q){if(!e.isBuffer(q)&&typeof q!="string"&&(!f||typeof q!="object"||typeof q.type!="string"||typeof q.asymmetricKeyType!="string"||typeof q.export!="function"))throw v(o)}function h(q){if(!e.isBuffer(q)&&typeof q!="string"&&typeof q!="object")throw v(l)}function u(q){if(!e.isBuffer(q)){if(typeof q=="string")return q;if(!f||typeof q!="object"||q.type!=="secret"||typeof q.export!="function")throw v(i)}}function m(q){return q.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function g(q){q=q.toString();var H=4-q.length%4;if(H!==4)for(var $=0;$<H;++$)q+="=";return q.replace(/\-/g,"+").replace(/_/g,"/")}function v(q){var H=[].slice.call(arguments,1),$=s.format.bind(s,q).apply(null,H);return new TypeError($)}function S(q){return e.isBuffer(q)||typeof q=="string"}function w(q){return S(q)||(q=JSON.stringify(q)),q}function C(q){return function($,K){u(K),$=w($);var X=t.createHmac("sha"+q,K),B=(X.update($),X.digest("base64"));return m(B)}}var N,I="timingSafeEqual"in t?function(H,$){return H.byteLength!==$.byteLength?!1:t.timingSafeEqual(H,$)}:function(H,$){return N||(N=DO()),N(H,$)};function R(q){return function($,K,X){var B=C(q)($,X);return I(e.from(K),e.from(B))}}function D(q){return function($,K){h(K),$=w($);var X=t.createSign("RSA-SHA"+q),B=(X.update($),X.sign(K,"base64"));return m(B)}}function A(q){return function($,K,X){p(X),$=w($),K=g(K);var B=t.createVerify("RSA-SHA"+q);return B.update($),B.verify(X,K,"base64")}}function O(q){return function($,K){h(K),$=w($);var X=t.createSign("RSA-SHA"+q),B=(X.update($),X.sign({key:K,padding:t.constants.RSA_PKCS1_PSS_PADDING,saltLength:t.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return m(B)}}function x(q){return function($,K,X){p(X),$=w($),K=g(K);var B=t.createVerify("RSA-SHA"+q);return B.update($),B.verify({key:X,padding:t.constants.RSA_PKCS1_PSS_PADDING,saltLength:t.constants.RSA_PSS_SALTLEN_DIGEST},K,"base64")}}function M(q){var H=D(q);return function(){var K=H.apply(null,arguments);return K=n.derToJose(K,"ES"+q),K}}function G(q){var H=A(q);return function(K,X,B){X=n.joseToDer(X,"ES"+q).toString("base64");var te=H(K,X,B);return te}}function V(){return function(){return""}}function z(){return function(H,$){return $===""}}return Wp=function(H){var $={hs:C,rs:D,ps:O,es:M,none:V},K={hs:R,rs:A,ps:x,es:G,none:z},X=H.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!X)throw v(c,H);var B=(X[1]||X[3]).toLowerCase(),te=X[2];return{sign:$[B](te),verify:K[B](te)}},Wp}var Kp,u0;function mx(){if(u0)return Kp;u0=1;var e=oo.Buffer;return Kp=function(n){return typeof n=="string"?n:typeof n=="number"||e.isBuffer(n)?n.toString():JSON.stringify(n)},Kp}var Bp,d0;function $O(){if(d0)return Bp;d0=1;var e=vu().Buffer,t=hx(),n=px(),s=dc,c=mx(),i=uo;function o(h,u){return e.from(h,u).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function l(h,u,m){m=m||"utf8";var g=o(c(h),"binary"),v=o(c(u),m);return i.format("%s.%s",g,v)}function f(h){var u=h.header,m=h.payload,g=h.secret||h.privateKey,v=h.encoding,S=n(u.alg),w=l(u,m,v),C=S.sign(w,g);return i.format("%s.%s",w,C)}function p(h){var u=h.secret;if(u=u??h.privateKey,u=u??h.key,/^hs/i.test(h.header.alg)===!0&&u==null)throw new TypeError("secret must be a string or buffer or a KeyObject");var m=new t(u);this.readable=!0,this.header=h.header,this.encoding=h.encoding,this.secret=this.privateKey=this.key=m,this.payload=new t(h.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}return i.inherits(p,s),p.prototype.sign=function(){try{var u=f({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",u),this.emit("data",u),this.emit("end"),this.readable=!1,u}catch(m){this.readable=!1,this.emit("error",m),this.emit("close")}},p.sign=f,Bp=p,Bp}var zp,f0;function UO(){if(f0)return zp;f0=1;var e=vu().Buffer,t=hx(),n=px(),s=dc,c=mx(),i=uo,o=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function l(C){return Object.prototype.toString.call(C)==="[object Object]"}function f(C){if(l(C))return C;try{return JSON.parse(C)}catch{return}}function p(C){var N=C.split(".",1)[0];return f(e.from(N,"base64").toString("binary"))}function h(C){return C.split(".",2).join(".")}function u(C){return C.split(".")[2]}function m(C,N){N=N||"utf8";var I=C.split(".")[1];return e.from(I,"base64").toString(N)}function g(C){return o.test(C)&&!!p(C)}function v(C,N,I){if(!N){var R=new Error("Missing algorithm parameter for jws.verify");throw R.code="MISSING_ALGORITHM",R}C=c(C);var D=u(C),A=h(C),O=n(N);return O.verify(A,D,I)}function S(C,N){if(N=N||{},C=c(C),!g(C))return null;var I=p(C);if(!I)return null;var R=m(C);return(I.typ==="JWT"||N.json)&&(R=JSON.parse(R,N.encoding)),{header:I,payload:R,signature:u(C)}}function w(C){C=C||{};var N=C.secret;if(N=N??C.publicKey,N=N??C.key,/^hs/i.test(C.algorithm)===!0&&N==null)throw new TypeError("secret must be a string or buffer or a KeyObject");var I=new t(N);this.readable=!0,this.algorithm=C.algorithm,this.encoding=C.encoding,this.secret=this.publicKey=this.key=I,this.signature=new t(C.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}return i.inherits(w,s),w.prototype.verify=function(){try{var N=v(this.signature.buffer,this.algorithm,this.key.buffer),I=S(this.signature.buffer,this.encoding);return this.emit("done",N,I),this.emit("data",N),this.emit("end"),this.readable=!1,N}catch(R){this.readable=!1,this.emit("error",R),this.emit("close")}},w.decode=S,w.isValid=g,w.verify=v,zp=w,zp}var h0;function Cv(){if(h0)return hi;h0=1;var e=$O(),t=UO(),n=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];return hi.ALGORITHMS=n,hi.sign=e.sign,hi.verify=t.verify,hi.decode=t.decode,hi.isValid=t.isValid,hi.createSign=function(c){return new e(c)},hi.createVerify=function(c){return new t(c)},hi}var Gp,p0;function gx(){if(p0)return Gp;p0=1;var e=Cv();return Gp=function(t,n){n=n||{};var s=e.decode(t,n);if(!s)return null;var c=s.payload;if(typeof c=="string")try{var i=JSON.parse(c);i!==null&&typeof i=="object"&&(c=i)}catch{}return n.complete===!0?{header:s.header,payload:c,signature:s.signature}:c},Gp}var Jp,m0;function If(){if(m0)return Jp;m0=1;var e=function(t,n){Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=t,n&&(this.inner=n)};return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,Jp=e,Jp}var Vp,g0;function yx(){if(g0)return Vp;g0=1;var e=If(),t=function(n,s){e.call(this,n),this.name="NotBeforeError",this.date=s};return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Vp=t,Vp}var Xp,y0;function vx(){if(y0)return Xp;y0=1;var e=If(),t=function(n,s){e.call(this,n),this.name="TokenExpiredError",this.expiredAt=s};return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Xp=t,Xp}var Yp,v0;function qO(){if(v0)return Yp;v0=1;var e=1e3,t=e*60,n=t*60,s=n*24,c=s*7,i=s*365.25;Yp=function(h,u){u=u||{};var m=typeof h;if(m==="string"&&h.length>0)return o(h);if(m==="number"&&isFinite(h))return u.long?f(h):l(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))};function o(h){if(h=String(h),!(h.length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);if(u){var m=parseFloat(u[1]),g=(u[2]||"ms").toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return m*i;case"weeks":case"week":case"w":return m*c;case"days":case"day":case"d":return m*s;case"hours":case"hour":case"hrs":case"hr":case"h":return m*n;case"minutes":case"minute":case"mins":case"min":case"m":return m*t;case"seconds":case"second":case"secs":case"sec":case"s":return m*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function l(h){var u=Math.abs(h);return u>=s?Math.round(h/s)+"d":u>=n?Math.round(h/n)+"h":u>=t?Math.round(h/t)+"m":u>=e?Math.round(h/e)+"s":h+"ms"}function f(h){var u=Math.abs(h);return u>=s?p(h,u,s,"day"):u>=n?p(h,u,n,"hour"):u>=t?p(h,u,t,"minute"):u>=e?p(h,u,e,"second"):h+" ms"}function p(h,u,m,g){var v=u>=m*1.5;return Math.round(h/m)+" "+g+(v?"s":"")}return Yp}var Qp,w0;function wx(){if(w0)return Qp;w0=1;var e=qO();return Qp=function(t,n){var s=n||Math.floor(Date.now()/1e3);if(typeof t=="string"){var c=e(t);return typeof c>"u"?void 0:Math.floor(s+c/1e3)}else return typeof t=="number"?s+t:void 0},Qp}var Id={exports:{}},Zp,E0;function Pf(){if(E0)return Zp;E0=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,s=16,c=t-6;return Zp={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:s,MAX_SAFE_BUILD_LENGTH:c,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Zp}var em,S0;function Of(){if(S0)return em;S0=1;var e={};return em=typeof process=="object"&&e&&e.NODE_DEBUG&&/\bsemver\b/i.test(e.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},em}var b0;function wu(){return b0||(b0=1,(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:s,MAX_LENGTH:c}=Pf(),i=Of();t=e.exports={};const o=t.re=[],l=t.safeRe=[],f=t.src=[],p=t.safeSrc=[],h=t.t={};let u=0;const m="[a-zA-Z0-9-]",g=[["\\s",1],["\\d",c],[m,s]],v=w=>{for(const[C,N]of g)w=w.split(`${C}*`).join(`${C}{0,${N}}`).split(`${C}+`).join(`${C}{1,${N}}`);return w},S=(w,C,N)=>{const I=v(C),R=u++;i(w,R,C),h[w]=R,f[R]=C,p[R]=I,o[R]=new RegExp(C,N?"g":void 0),l[R]=new RegExp(I,N?"g":void 0)};S("NUMERICIDENTIFIER","0|[1-9]\\d*"),S("NUMERICIDENTIFIERLOOSE","\\d+"),S("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${m}*`),S("MAINVERSION",`(${f[h.NUMERICIDENTIFIER]})\\.(${f[h.NUMERICIDENTIFIER]})\\.(${f[h.NUMERICIDENTIFIER]})`),S("MAINVERSIONLOOSE",`(${f[h.NUMERICIDENTIFIERLOOSE]})\\.(${f[h.NUMERICIDENTIFIERLOOSE]})\\.(${f[h.NUMERICIDENTIFIERLOOSE]})`),S("PRERELEASEIDENTIFIER",`(?:${f[h.NONNUMERICIDENTIFIER]}|${f[h.NUMERICIDENTIFIER]})`),S("PRERELEASEIDENTIFIERLOOSE",`(?:${f[h.NONNUMERICIDENTIFIER]}|${f[h.NUMERICIDENTIFIERLOOSE]})`),S("PRERELEASE",`(?:-(${f[h.PRERELEASEIDENTIFIER]}(?:\\.${f[h.PRERELEASEIDENTIFIER]})*))`),S("PRERELEASELOOSE",`(?:-?(${f[h.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${f[h.PRERELEASEIDENTIFIERLOOSE]})*))`),S("BUILDIDENTIFIER",`${m}+`),S("BUILD",`(?:\\+(${f[h.BUILDIDENTIFIER]}(?:\\.${f[h.BUILDIDENTIFIER]})*))`),S("FULLPLAIN",`v?${f[h.MAINVERSION]}${f[h.PRERELEASE]}?${f[h.BUILD]}?`),S("FULL",`^${f[h.FULLPLAIN]}$`),S("LOOSEPLAIN",`[v=\\s]*${f[h.MAINVERSIONLOOSE]}${f[h.PRERELEASELOOSE]}?${f[h.BUILD]}?`),S("LOOSE",`^${f[h.LOOSEPLAIN]}$`),S("GTLT","((?:<|>)?=?)"),S("XRANGEIDENTIFIERLOOSE",`${f[h.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),S("XRANGEIDENTIFIER",`${f[h.NUMERICIDENTIFIER]}|x|X|\\*`),S("XRANGEPLAIN",`[v=\\s]*(${f[h.XRANGEIDENTIFIER]})(?:\\.(${f[h.XRANGEIDENTIFIER]})(?:\\.(${f[h.XRANGEIDENTIFIER]})(?:${f[h.PRERELEASE]})?${f[h.BUILD]}?)?)?`),S("XRANGEPLAINLOOSE",`[v=\\s]*(${f[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${f[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${f[h.XRANGEIDENTIFIERLOOSE]})(?:${f[h.PRERELEASELOOSE]})?${f[h.BUILD]}?)?)?`),S("XRANGE",`^${f[h.GTLT]}\\s*${f[h.XRANGEPLAIN]}$`),S("XRANGELOOSE",`^${f[h.GTLT]}\\s*${f[h.XRANGEPLAINLOOSE]}$`),S("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),S("COERCE",`${f[h.COERCEPLAIN]}(?:$|[^\\d])`),S("COERCEFULL",f[h.COERCEPLAIN]+`(?:${f[h.PRERELEASE]})?(?:${f[h.BUILD]})?(?:$|[^\\d])`),S("COERCERTL",f[h.COERCE],!0),S("COERCERTLFULL",f[h.COERCEFULL],!0),S("LONETILDE","(?:~>?)"),S("TILDETRIM",`(\\s*)${f[h.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",S("TILDE",`^${f[h.LONETILDE]}${f[h.XRANGEPLAIN]}$`),S("TILDELOOSE",`^${f[h.LONETILDE]}${f[h.XRANGEPLAINLOOSE]}$`),S("LONECARET","(?:\\^)"),S("CARETTRIM",`(\\s*)${f[h.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",S("CARET",`^${f[h.LONECARET]}${f[h.XRANGEPLAIN]}$`),S("CARETLOOSE",`^${f[h.LONECARET]}${f[h.XRANGEPLAINLOOSE]}$`),S("COMPARATORLOOSE",`^${f[h.GTLT]}\\s*(${f[h.LOOSEPLAIN]})$|^$`),S("COMPARATOR",`^${f[h.GTLT]}\\s*(${f[h.FULLPLAIN]})$|^$`),S("COMPARATORTRIM",`(\\s*)${f[h.GTLT]}\\s*(${f[h.LOOSEPLAIN]}|${f[h.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",S("HYPHENRANGE",`^\\s*(${f[h.XRANGEPLAIN]})\\s+-\\s+(${f[h.XRANGEPLAIN]})\\s*$`),S("HYPHENRANGELOOSE",`^\\s*(${f[h.XRANGEPLAINLOOSE]})\\s+-\\s+(${f[h.XRANGEPLAINLOOSE]})\\s*$`),S("STAR","(<|>)?=?\\s*\\*"),S("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),S("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Id,Id.exports)),Id.exports}var tm,T0;function _v(){if(T0)return tm;T0=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return tm=s=>s?typeof s!="object"?e:s:t,tm}var rm,C0;function Ex(){if(C0)return rm;C0=1;const e=/^[0-9]+$/,t=(s,c)=>{if(typeof s=="number"&&typeof c=="number")return s===c?0:s<c?-1:1;const i=e.test(s),o=e.test(c);return i&&o&&(s=+s,c=+c),s===c?0:i&&!o?-1:o&&!i?1:s<c?-1:1};return rm={compareIdentifiers:t,rcompareIdentifiers:(s,c)=>t(c,s)},rm}var nm,_0;function Qr(){if(_0)return nm;_0=1;const e=Of(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=Pf(),{safeRe:s,t:c}=wu(),i=_v(),{compareIdentifiers:o}=Ex();class l{constructor(p,h){if(h=i(h),p instanceof l){if(p.loose===!!h.loose&&p.includePrerelease===!!h.includePrerelease)return p;p=p.version}else if(typeof p!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof p}".`);if(p.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",p,h),this.options=h,this.loose=!!h.loose,this.includePrerelease=!!h.includePrerelease;const u=p.trim().match(h.loose?s[c.LOOSE]:s[c.FULL]);if(!u)throw new TypeError(`Invalid Version: ${p}`);if(this.raw=p,this.major=+u[1],this.minor=+u[2],this.patch=+u[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");u[4]?this.prerelease=u[4].split(".").map(m=>{if(/^[0-9]+$/.test(m)){const g=+m;if(g>=0&&g<n)return g}return m}):this.prerelease=[],this.build=u[5]?u[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(p){if(e("SemVer.compare",this.version,this.options,p),!(p instanceof l)){if(typeof p=="string"&&p===this.version)return 0;p=new l(p,this.options)}return p.version===this.version?0:this.compareMain(p)||this.comparePre(p)}compareMain(p){return p instanceof l||(p=new l(p,this.options)),this.major<p.major?-1:this.major>p.major?1:this.minor<p.minor?-1:this.minor>p.minor?1:this.patch<p.patch?-1:this.patch>p.patch?1:0}comparePre(p){if(p instanceof l||(p=new l(p,this.options)),this.prerelease.length&&!p.prerelease.length)return-1;if(!this.prerelease.length&&p.prerelease.length)return 1;if(!this.prerelease.length&&!p.prerelease.length)return 0;let h=0;do{const u=this.prerelease[h],m=p.prerelease[h];if(e("prerelease compare",h,u,m),u===void 0&&m===void 0)return 0;if(m===void 0)return 1;if(u===void 0)return-1;if(u===m)continue;return o(u,m)}while(++h)}compareBuild(p){p instanceof l||(p=new l(p,this.options));let h=0;do{const u=this.build[h],m=p.build[h];if(e("build compare",h,u,m),u===void 0&&m===void 0)return 0;if(m===void 0)return 1;if(u===void 0)return-1;if(u===m)continue;return o(u,m)}while(++h)}inc(p,h,u){if(p.startsWith("pre")){if(!h&&u===!1)throw new Error("invalid increment argument: identifier is empty");if(h){const m=`-${h}`.match(this.options.loose?s[c.PRERELEASELOOSE]:s[c.PRERELEASE]);if(!m||m[1]!==h)throw new Error(`invalid identifier: ${h}`)}}switch(p){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",h,u);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",h,u);break;case"prepatch":this.prerelease.length=0,this.inc("patch",h,u),this.inc("pre",h,u);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",h,u),this.inc("pre",h,u);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const m=Number(u)?1:0;if(this.prerelease.length===0)this.prerelease=[m];else{let g=this.prerelease.length;for(;--g>=0;)typeof this.prerelease[g]=="number"&&(this.prerelease[g]++,g=-2);if(g===-1){if(h===this.prerelease.join(".")&&u===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(m)}}if(h){let g=[h,m];u===!1&&(g=[h]),o(this.prerelease[0],h)===0?isNaN(this.prerelease[1])&&(this.prerelease=g):this.prerelease=g}break}default:throw new Error(`invalid increment argument: ${p}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return nm=l,nm}var sm,x0;function fc(){if(x0)return sm;x0=1;const e=Qr();return sm=(n,s,c=!1)=>{if(n instanceof e)return n;try{return new e(n,s)}catch(i){if(!c)return null;throw i}},sm}var im,R0;function MO(){if(R0)return im;R0=1;const e=fc();return im=(n,s)=>{const c=e(n,s);return c?c.version:null},im}var om,k0;function HO(){if(k0)return om;k0=1;const e=fc();return om=(n,s)=>{const c=e(n.trim().replace(/^[=v]+/,""),s);return c?c.version:null},om}var am,A0;function FO(){if(A0)return am;A0=1;const e=Qr();return am=(n,s,c,i,o)=>{typeof c=="string"&&(o=i,i=c,c=void 0);try{return new e(n instanceof e?n.version:n,c).inc(s,i,o).version}catch{return null}},am}var cm,I0;function WO(){if(I0)return cm;I0=1;const e=fc();return cm=(n,s)=>{const c=e(n,null,!0),i=e(s,null,!0),o=c.compare(i);if(o===0)return null;const l=o>0,f=l?c:i,p=l?i:c,h=!!f.prerelease.length;if(!!p.prerelease.length&&!h){if(!p.patch&&!p.minor)return"major";if(p.compareMain(f)===0)return p.minor&&!p.patch?"minor":"patch"}const m=h?"pre":"";return c.major!==i.major?m+"major":c.minor!==i.minor?m+"minor":c.patch!==i.patch?m+"patch":"prerelease"},cm}var lm,P0;function KO(){if(P0)return lm;P0=1;const e=Qr();return lm=(n,s)=>new e(n,s).major,lm}var um,O0;function BO(){if(O0)return um;O0=1;const e=Qr();return um=(n,s)=>new e(n,s).minor,um}var dm,N0;function zO(){if(N0)return dm;N0=1;const e=Qr();return dm=(n,s)=>new e(n,s).patch,dm}var fm,L0;function GO(){if(L0)return fm;L0=1;const e=fc();return fm=(n,s)=>{const c=e(n,s);return c&&c.prerelease.length?c.prerelease:null},fm}var hm,j0;function Ss(){if(j0)return hm;j0=1;const e=Qr();return hm=(n,s,c)=>new e(n,c).compare(new e(s,c)),hm}var pm,D0;function JO(){if(D0)return pm;D0=1;const e=Ss();return pm=(n,s,c)=>e(s,n,c),pm}var mm,$0;function VO(){if($0)return mm;$0=1;const e=Ss();return mm=(n,s)=>e(n,s,!0),mm}var gm,U0;function xv(){if(U0)return gm;U0=1;const e=Qr();return gm=(n,s,c)=>{const i=new e(n,c),o=new e(s,c);return i.compare(o)||i.compareBuild(o)},gm}var ym,q0;function XO(){if(q0)return ym;q0=1;const e=xv();return ym=(n,s)=>n.sort((c,i)=>e(c,i,s)),ym}var vm,M0;function YO(){if(M0)return vm;M0=1;const e=xv();return vm=(n,s)=>n.sort((c,i)=>e(i,c,s)),vm}var wm,H0;function Nf(){if(H0)return wm;H0=1;const e=Ss();return wm=(n,s,c)=>e(n,s,c)>0,wm}var Em,F0;function Rv(){if(F0)return Em;F0=1;const e=Ss();return Em=(n,s,c)=>e(n,s,c)<0,Em}var Sm,W0;function Sx(){if(W0)return Sm;W0=1;const e=Ss();return Sm=(n,s,c)=>e(n,s,c)===0,Sm}var bm,K0;function bx(){if(K0)return bm;K0=1;const e=Ss();return bm=(n,s,c)=>e(n,s,c)!==0,bm}var Tm,B0;function kv(){if(B0)return Tm;B0=1;const e=Ss();return Tm=(n,s,c)=>e(n,s,c)>=0,Tm}var Cm,z0;function Av(){if(z0)return Cm;z0=1;const e=Ss();return Cm=(n,s,c)=>e(n,s,c)<=0,Cm}var _m,G0;function Tx(){if(G0)return _m;G0=1;const e=Sx(),t=bx(),n=Nf(),s=kv(),c=Rv(),i=Av();return _m=(l,f,p,h)=>{switch(f){case"===":return typeof l=="object"&&(l=l.version),typeof p=="object"&&(p=p.version),l===p;case"!==":return typeof l=="object"&&(l=l.version),typeof p=="object"&&(p=p.version),l!==p;case"":case"=":case"==":return e(l,p,h);case"!=":return t(l,p,h);case">":return n(l,p,h);case">=":return s(l,p,h);case"<":return c(l,p,h);case"<=":return i(l,p,h);default:throw new TypeError(`Invalid operator: ${f}`)}},_m}var xm,J0;function QO(){if(J0)return xm;J0=1;const e=Qr(),t=fc(),{safeRe:n,t:s}=wu();return xm=(i,o)=>{if(i instanceof e)return i;if(typeof i=="number"&&(i=String(i)),typeof i!="string")return null;o=o||{};let l=null;if(!o.rtl)l=i.match(o.includePrerelease?n[s.COERCEFULL]:n[s.COERCE]);else{const g=o.includePrerelease?n[s.COERCERTLFULL]:n[s.COERCERTL];let v;for(;(v=g.exec(i))&&(!l||l.index+l[0].length!==i.length);)(!l||v.index+v[0].length!==l.index+l[0].length)&&(l=v),g.lastIndex=v.index+v[1].length+v[2].length;g.lastIndex=-1}if(l===null)return null;const f=l[2],p=l[3]||"0",h=l[4]||"0",u=o.includePrerelease&&l[5]?`-${l[5]}`:"",m=o.includePrerelease&&l[6]?`+${l[6]}`:"";return t(`${f}.${p}.${h}${u}${m}`,o)},xm}var Rm,V0;function ZO(){if(V0)return Rm;V0=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const s=this.map.get(n);if(s!==void 0)return this.map.delete(n),this.map.set(n,s),s}delete(n){return this.map.delete(n)}set(n,s){if(!this.delete(n)&&s!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(n,s)}return this}}return Rm=e,Rm}var km,X0;function bs(){if(X0)return km;X0=1;const e=/\s+/g;class t{constructor($,K){if(K=c(K),$ instanceof t)return $.loose===!!K.loose&&$.includePrerelease===!!K.includePrerelease?$:new t($.raw,K);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.formatted=void 0,this;if(this.options=K,this.loose=!!K.loose,this.includePrerelease=!!K.includePrerelease,this.raw=$.trim().replace(e," "),this.set=this.raw.split("||").map(X=>this.parseRange(X.trim())).filter(X=>X.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const X=this.set[0];if(this.set=this.set.filter(B=>!S(B[0])),this.set.length===0)this.set=[X];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&w(B[0])){this.set=[B];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let $=0;$<this.set.length;$++){$>0&&(this.formatted+="||");const K=this.set[$];for(let X=0;X<K.length;X++)X>0&&(this.formatted+=" "),this.formatted+=K[X].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange($){const X=((this.options.includePrerelease&&g)|(this.options.loose&&v))+":"+$,B=s.get(X);if(B)return B;const te=this.options.loose,ae=te?f[p.HYPHENRANGELOOSE]:f[p.HYPHENRANGE];$=$.replace(ae,z(this.options.includePrerelease)),o("hyphen replace",$),$=$.replace(f[p.COMPARATORTRIM],h),o("comparator trim",$),$=$.replace(f[p.TILDETRIM],u),o("tilde trim",$),$=$.replace(f[p.CARETTRIM],m),o("caret trim",$);let Z=$.split(" ").map(re=>N(re,this.options)).join(" ").split(/\s+/).map(re=>V(re,this.options));te&&(Z=Z.filter(re=>(o("loose invalid filter",re,this.options),!!re.match(f[p.COMPARATORLOOSE])))),o("range list",Z);const oe=new Map,ce=Z.map(re=>new i(re,this.options));for(const re of ce){if(S(re))return[re];oe.set(re.value,re)}oe.size>1&&oe.has("")&&oe.delete("");const Y=[...oe.values()];return s.set(X,Y),Y}intersects($,K){if(!($ instanceof t))throw new TypeError("a Range is required");return this.set.some(X=>C(X,K)&&$.set.some(B=>C(B,K)&&X.every(te=>B.every(ae=>te.intersects(ae,K)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new l($,this.options)}catch{return!1}for(let K=0;K<this.set.length;K++)if(q(this.set[K],$,this.options))return!0;return!1}}km=t;const n=ZO(),s=new n,c=_v(),i=Lf(),o=Of(),l=Qr(),{safeRe:f,t:p,comparatorTrimReplace:h,tildeTrimReplace:u,caretTrimReplace:m}=wu(),{FLAG_INCLUDE_PRERELEASE:g,FLAG_LOOSE:v}=Pf(),S=H=>H.value==="<0.0.0-0",w=H=>H.value==="",C=(H,$)=>{let K=!0;const X=H.slice();let B=X.pop();for(;K&&X.length;)K=X.every(te=>B.intersects(te,$)),B=X.pop();return K},N=(H,$)=>(H=H.replace(f[p.BUILD],""),o("comp",H,$),H=A(H,$),o("caret",H),H=R(H,$),o("tildes",H),H=x(H,$),o("xrange",H),H=G(H,$),o("stars",H),H),I=H=>!H||H.toLowerCase()==="x"||H==="*",R=(H,$)=>H.trim().split(/\s+/).map(K=>D(K,$)).join(" "),D=(H,$)=>{const K=$.loose?f[p.TILDELOOSE]:f[p.TILDE];return H.replace(K,(X,B,te,ae,Z)=>{o("tilde",H,X,B,te,ae,Z);let oe;return I(B)?oe="":I(te)?oe=`>=${B}.0.0 <${+B+1}.0.0-0`:I(ae)?oe=`>=${B}.${te}.0 <${B}.${+te+1}.0-0`:Z?(o("replaceTilde pr",Z),oe=`>=${B}.${te}.${ae}-${Z} <${B}.${+te+1}.0-0`):oe=`>=${B}.${te}.${ae} <${B}.${+te+1}.0-0`,o("tilde return",oe),oe})},A=(H,$)=>H.trim().split(/\s+/).map(K=>O(K,$)).join(" "),O=(H,$)=>{o("caret",H,$);const K=$.loose?f[p.CARETLOOSE]:f[p.CARET],X=$.includePrerelease?"-0":"";return H.replace(K,(B,te,ae,Z,oe)=>{o("caret",H,B,te,ae,Z,oe);let ce;return I(te)?ce="":I(ae)?ce=`>=${te}.0.0${X} <${+te+1}.0.0-0`:I(Z)?te==="0"?ce=`>=${te}.${ae}.0${X} <${te}.${+ae+1}.0-0`:ce=`>=${te}.${ae}.0${X} <${+te+1}.0.0-0`:oe?(o("replaceCaret pr",oe),te==="0"?ae==="0"?ce=`>=${te}.${ae}.${Z}-${oe} <${te}.${ae}.${+Z+1}-0`:ce=`>=${te}.${ae}.${Z}-${oe} <${te}.${+ae+1}.0-0`:ce=`>=${te}.${ae}.${Z}-${oe} <${+te+1}.0.0-0`):(o("no pr"),te==="0"?ae==="0"?ce=`>=${te}.${ae}.${Z}${X} <${te}.${ae}.${+Z+1}-0`:ce=`>=${te}.${ae}.${Z}${X} <${te}.${+ae+1}.0-0`:ce=`>=${te}.${ae}.${Z} <${+te+1}.0.0-0`),o("caret return",ce),ce})},x=(H,$)=>(o("replaceXRanges",H,$),H.split(/\s+/).map(K=>M(K,$)).join(" ")),M=(H,$)=>{H=H.trim();const K=$.loose?f[p.XRANGELOOSE]:f[p.XRANGE];return H.replace(K,(X,B,te,ae,Z,oe)=>{o("xRange",H,X,B,te,ae,Z,oe);const ce=I(te),Y=ce||I(ae),re=Y||I(Z),me=re;return B==="="&&me&&(B=""),oe=$.includePrerelease?"-0":"",ce?B===">"||B==="<"?X="<0.0.0-0":X="*":B&&me?(Y&&(ae=0),Z=0,B===">"?(B=">=",Y?(te=+te+1,ae=0,Z=0):(ae=+ae+1,Z=0)):B==="<="&&(B="<",Y?te=+te+1:ae=+ae+1),B==="<"&&(oe="-0"),X=`${B+te}.${ae}.${Z}${oe}`):Y?X=`>=${te}.0.0${oe} <${+te+1}.0.0-0`:re&&(X=`>=${te}.${ae}.0${oe} <${te}.${+ae+1}.0-0`),o("xRange return",X),X})},G=(H,$)=>(o("replaceStars",H,$),H.trim().replace(f[p.STAR],"")),V=(H,$)=>(o("replaceGTE0",H,$),H.trim().replace(f[$.includePrerelease?p.GTE0PRE:p.GTE0],"")),z=H=>($,K,X,B,te,ae,Z,oe,ce,Y,re,me)=>(I(X)?K="":I(B)?K=`>=${X}.0.0${H?"-0":""}`:I(te)?K=`>=${X}.${B}.0${H?"-0":""}`:ae?K=`>=${K}`:K=`>=${K}${H?"-0":""}`,I(ce)?oe="":I(Y)?oe=`<${+ce+1}.0.0-0`:I(re)?oe=`<${ce}.${+Y+1}.0-0`:me?oe=`<=${ce}.${Y}.${re}-${me}`:H?oe=`<${ce}.${Y}.${+re+1}-0`:oe=`<=${oe}`,`${K} ${oe}`.trim()),q=(H,$,K)=>{for(let X=0;X<H.length;X++)if(!H[X].test($))return!1;if($.prerelease.length&&!K.includePrerelease){for(let X=0;X<H.length;X++)if(o(H[X].semver),H[X].semver!==i.ANY&&H[X].semver.prerelease.length>0){const B=H[X].semver;if(B.major===$.major&&B.minor===$.minor&&B.patch===$.patch)return!0}return!1}return!0};return km}var Am,Y0;function Lf(){if(Y0)return Am;Y0=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(h,u){if(u=n(u),h instanceof t){if(h.loose===!!u.loose)return h;h=h.value}h=h.trim().split(/\s+/).join(" "),o("comparator",h,u),this.options=u,this.loose=!!u.loose,this.parse(h),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(h){const u=this.options.loose?s[c.COMPARATORLOOSE]:s[c.COMPARATOR],m=h.match(u);if(!m)throw new TypeError(`Invalid comparator: ${h}`);this.operator=m[1]!==void 0?m[1]:"",this.operator==="="&&(this.operator=""),m[2]?this.semver=new l(m[2],this.options.loose):this.semver=e}toString(){return this.value}test(h){if(o("Comparator.test",h,this.options.loose),this.semver===e||h===e)return!0;if(typeof h=="string")try{h=new l(h,this.options)}catch{return!1}return i(h,this.operator,this.semver,this.options)}intersects(h,u){if(!(h instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new f(h.value,u).test(this.value):h.operator===""?h.value===""?!0:new f(this.value,u).test(h.semver):(u=n(u),u.includePrerelease&&(this.value==="<0.0.0-0"||h.value==="<0.0.0-0")||!u.includePrerelease&&(this.value.startsWith("<0.0.0")||h.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&h.operator.startsWith(">")||this.operator.startsWith("<")&&h.operator.startsWith("<")||this.semver.version===h.semver.version&&this.operator.includes("=")&&h.operator.includes("=")||i(this.semver,"<",h.semver,u)&&this.operator.startsWith(">")&&h.operator.startsWith("<")||i(this.semver,">",h.semver,u)&&this.operator.startsWith("<")&&h.operator.startsWith(">")))}}Am=t;const n=_v(),{safeRe:s,t:c}=wu(),i=Tx(),o=Of(),l=Qr(),f=bs();return Am}var Im,Q0;function jf(){if(Q0)return Im;Q0=1;const e=bs();return Im=(n,s,c)=>{try{s=new e(s,c)}catch{return!1}return s.test(n)},Im}var Pm,Z0;function eN(){if(Z0)return Pm;Z0=1;const e=bs();return Pm=(n,s)=>new e(n,s).set.map(c=>c.map(i=>i.value).join(" ").trim().split(" ")),Pm}var Om,eb;function tN(){if(eb)return Om;eb=1;const e=Qr(),t=bs();return Om=(s,c,i)=>{let o=null,l=null,f=null;try{f=new t(c,i)}catch{return null}return s.forEach(p=>{f.test(p)&&(!o||l.compare(p)===-1)&&(o=p,l=new e(o,i))}),o},Om}var Nm,tb;function rN(){if(tb)return Nm;tb=1;const e=Qr(),t=bs();return Nm=(s,c,i)=>{let o=null,l=null,f=null;try{f=new t(c,i)}catch{return null}return s.forEach(p=>{f.test(p)&&(!o||l.compare(p)===1)&&(o=p,l=new e(o,i))}),o},Nm}var Lm,rb;function nN(){if(rb)return Lm;rb=1;const e=Qr(),t=bs(),n=Nf();return Lm=(c,i)=>{c=new t(c,i);let o=new e("0.0.0");if(c.test(o)||(o=new e("0.0.0-0"),c.test(o)))return o;o=null;for(let l=0;l<c.set.length;++l){const f=c.set[l];let p=null;f.forEach(h=>{const u=new e(h.semver.version);switch(h.operator){case">":u.prerelease.length===0?u.patch++:u.prerelease.push(0),u.raw=u.format();case"":case">=":(!p||n(u,p))&&(p=u);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${h.operator}`)}}),p&&(!o||n(o,p))&&(o=p)}return o&&c.test(o)?o:null},Lm}var jm,nb;function sN(){if(nb)return jm;nb=1;const e=bs();return jm=(n,s)=>{try{return new e(n,s).range||"*"}catch{return null}},jm}var Dm,sb;function Iv(){if(sb)return Dm;sb=1;const e=Qr(),t=Lf(),{ANY:n}=t,s=bs(),c=jf(),i=Nf(),o=Rv(),l=Av(),f=kv();return Dm=(h,u,m,g)=>{h=new e(h,g),u=new s(u,g);let v,S,w,C,N;switch(m){case">":v=i,S=l,w=o,C=">",N=">=";break;case"<":v=o,S=f,w=i,C="<",N="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(c(h,u,g))return!1;for(let I=0;I<u.set.length;++I){const R=u.set[I];let D=null,A=null;if(R.forEach(O=>{O.semver===n&&(O=new t(">=0.0.0")),D=D||O,A=A||O,v(O.semver,D.semver,g)?D=O:w(O.semver,A.semver,g)&&(A=O)}),D.operator===C||D.operator===N||(!A.operator||A.operator===C)&&S(h,A.semver))return!1;if(A.operator===N&&w(h,A.semver))return!1}return!0},Dm}var $m,ib;function iN(){if(ib)return $m;ib=1;const e=Iv();return $m=(n,s,c)=>e(n,s,">",c),$m}var Um,ob;function oN(){if(ob)return Um;ob=1;const e=Iv();return Um=(n,s,c)=>e(n,s,"<",c),Um}var qm,ab;function aN(){if(ab)return qm;ab=1;const e=bs();return qm=(n,s,c)=>(n=new e(n,c),s=new e(s,c),n.intersects(s,c)),qm}var Mm,cb;function cN(){if(cb)return Mm;cb=1;const e=jf(),t=Ss();return Mm=(n,s,c)=>{const i=[];let o=null,l=null;const f=n.sort((m,g)=>t(m,g,c));for(const m of f)e(m,s,c)?(l=m,o||(o=m)):(l&&i.push([o,l]),l=null,o=null);o&&i.push([o,null]);const p=[];for(const[m,g]of i)m===g?p.push(m):!g&&m===f[0]?p.push("*"):g?m===f[0]?p.push(`<=${g}`):p.push(`${m} - ${g}`):p.push(`>=${m}`);const h=p.join(" || "),u=typeof s.raw=="string"?s.raw:String(s);return h.length<u.length?h:s},Mm}var Hm,lb;function lN(){if(lb)return Hm;lb=1;const e=bs(),t=Lf(),{ANY:n}=t,s=jf(),c=Ss(),i=(u,m,g={})=>{if(u===m)return!0;u=new e(u,g),m=new e(m,g);let v=!1;e:for(const S of u.set){for(const w of m.set){const C=f(S,w,g);if(v=v||C!==null,C)continue e}if(v)return!1}return!0},o=[new t(">=0.0.0-0")],l=[new t(">=0.0.0")],f=(u,m,g)=>{if(u===m)return!0;if(u.length===1&&u[0].semver===n){if(m.length===1&&m[0].semver===n)return!0;g.includePrerelease?u=o:u=l}if(m.length===1&&m[0].semver===n){if(g.includePrerelease)return!0;m=l}const v=new Set;let S,w;for(const x of u)x.operator===">"||x.operator===">="?S=p(S,x,g):x.operator==="<"||x.operator==="<="?w=h(w,x,g):v.add(x.semver);if(v.size>1)return null;let C;if(S&&w){if(C=c(S.semver,w.semver,g),C>0)return null;if(C===0&&(S.operator!==">="||w.operator!=="<="))return null}for(const x of v){if(S&&!s(x,String(S),g)||w&&!s(x,String(w),g))return null;for(const M of m)if(!s(x,String(M),g))return!1;return!0}let N,I,R,D,A=w&&!g.includePrerelease&&w.semver.prerelease.length?w.semver:!1,O=S&&!g.includePrerelease&&S.semver.prerelease.length?S.semver:!1;A&&A.prerelease.length===1&&w.operator==="<"&&A.prerelease[0]===0&&(A=!1);for(const x of m){if(D=D||x.operator===">"||x.operator===">=",R=R||x.operator==="<"||x.operator==="<=",S){if(O&&x.semver.prerelease&&x.semver.prerelease.length&&x.semver.major===O.major&&x.semver.minor===O.minor&&x.semver.patch===O.patch&&(O=!1),x.operator===">"||x.operator===">="){if(N=p(S,x,g),N===x&&N!==S)return!1}else if(S.operator===">="&&!s(S.semver,String(x),g))return!1}if(w){if(A&&x.semver.prerelease&&x.semver.prerelease.length&&x.semver.major===A.major&&x.semver.minor===A.minor&&x.semver.patch===A.patch&&(A=!1),x.operator==="<"||x.operator==="<="){if(I=h(w,x,g),I===x&&I!==w)return!1}else if(w.operator==="<="&&!s(w.semver,String(x),g))return!1}if(!x.operator&&(w||S)&&C!==0)return!1}return!(S&&R&&!w&&C!==0||w&&D&&!S&&C!==0||O||A)},p=(u,m,g)=>{if(!u)return m;const v=c(u.semver,m.semver,g);return v>0?u:v<0||m.operator===">"&&u.operator===">="?m:u},h=(u,m,g)=>{if(!u)return m;const v=c(u.semver,m.semver,g);return v<0?u:v>0||m.operator==="<"&&u.operator==="<="?m:u};return Hm=i,Hm}var Fm,ub;function Pv(){if(ub)return Fm;ub=1;const e=wu(),t=Pf(),n=Qr(),s=Ex(),c=fc(),i=MO(),o=HO(),l=FO(),f=WO(),p=KO(),h=BO(),u=zO(),m=GO(),g=Ss(),v=JO(),S=VO(),w=xv(),C=XO(),N=YO(),I=Nf(),R=Rv(),D=Sx(),A=bx(),O=kv(),x=Av(),M=Tx(),G=QO(),V=Lf(),z=bs(),q=jf(),H=eN(),$=tN(),K=rN(),X=nN(),B=sN(),te=Iv(),ae=iN(),Z=oN(),oe=aN(),ce=cN(),Y=lN();return Fm={parse:c,valid:i,clean:o,inc:l,diff:f,major:p,minor:h,patch:u,prerelease:m,compare:g,rcompare:v,compareLoose:S,compareBuild:w,sort:C,rsort:N,gt:I,lt:R,eq:D,neq:A,gte:O,lte:x,cmp:M,coerce:G,Comparator:V,Range:z,satisfies:q,toComparators:H,maxSatisfying:$,minSatisfying:K,minVersion:X,validRange:B,outside:te,gtr:ae,ltr:Z,intersects:oe,simplifyRange:ce,subset:Y,SemVer:n,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers},Fm}var Wm,db;function uN(){return db||(db=1,Wm=Pv().satisfies(process.version,">=15.7.0")),Wm}var Km,fb;function dN(){return fb||(fb=1,Km=Pv().satisfies(process.version,">=16.9.0")),Km}var Bm,hb;function Cx(){if(hb)return Bm;hb=1;const e=uN(),t=dN(),n={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},s={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};return Bm=function(c,i){if(!c||!i)return;const o=i.asymmetricKeyType;if(!o)return;const l=n[o];if(!l)throw new Error(`Unknown key type "${o}".`);if(!l.includes(c))throw new Error(`"alg" parameter for "${o}" key type must be one of: ${l.join(", ")}.`);if(e)switch(o){case"ec":const f=i.asymmetricKeyDetails.namedCurve,p=s[c];if(f!==p)throw new Error(`"alg" parameter "${c}" requires curve "${p}".`);break;case"rsa-pss":if(t){const h=parseInt(c.slice(-3),10),{hashAlgorithm:u,mgf1HashAlgorithm:m,saltLength:g}=i.asymmetricKeyDetails;if(u!==`sha${h}`||m!==u)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${c}.`);if(g!==void 0&&g>h>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${c}.`)}break}},Bm}var zm,pb;function _x(){if(pb)return zm;pb=1;var e=Pv();return zm=e.satisfies(process.version,"^6.12.0 || >=8.0.0"),zm}var Gm,mb;function fN(){if(mb)return Gm;mb=1;const e=If(),t=yx(),n=vx(),s=gx(),c=wx(),i=Cx(),o=_x(),l=Cv(),{KeyObject:f,createSecretKey:p,createPublicKey:h}=Ti,u=["RS256","RS384","RS512"],m=["ES256","ES384","ES512"],g=["RS256","RS384","RS512"],v=["HS256","HS384","HS512"];return o&&(u.splice(u.length,0,"PS256","PS384","PS512"),g.splice(g.length,0,"PS256","PS384","PS512")),Gm=function(S,w,C,N){typeof C=="function"&&!N&&(N=C,C={}),C||(C={}),C=Object.assign({},C);let I;if(N?I=N:I=function(M,G){if(M)throw M;return G},C.clockTimestamp&&typeof C.clockTimestamp!="number")return I(new e("clockTimestamp must be a number"));if(C.nonce!==void 0&&(typeof C.nonce!="string"||C.nonce.trim()===""))return I(new e("nonce must be a non-empty string"));if(C.allowInvalidAsymmetricKeyTypes!==void 0&&typeof C.allowInvalidAsymmetricKeyTypes!="boolean")return I(new e("allowInvalidAsymmetricKeyTypes must be a boolean"));const R=C.clockTimestamp||Math.floor(Date.now()/1e3);if(!S)return I(new e("jwt must be provided"));if(typeof S!="string")return I(new e("jwt must be a string"));const D=S.split(".");if(D.length!==3)return I(new e("jwt malformed"));let A;try{A=s(S,{complete:!0})}catch(M){return I(M)}if(!A)return I(new e("invalid token"));const O=A.header;let x;if(typeof w=="function"){if(!N)return I(new e("verify must be called asynchronous if secret or public key is provided as a callback"));x=w}else x=function(M,G){return G(null,w)};return x(O,function(M,G){if(M)return I(new e("error in secret or public key callback: "+M.message));const V=D[2].trim()!=="";if(!V&&G)return I(new e("jwt signature is required"));if(V&&!G)return I(new e("secret or public key must be provided"));if(!V&&!C.algorithms)return I(new e('please specify "none" in "algorithms" to verify unsigned tokens'));if(G!=null&&!(G instanceof f))try{G=h(G)}catch{try{G=p(typeof G=="string"?Buffer.from(G):G)}catch{return I(new e("secretOrPublicKey is not valid key material"))}}if(C.algorithms||(G.type==="secret"?C.algorithms=v:["rsa","rsa-pss"].includes(G.asymmetricKeyType)?C.algorithms=g:G.asymmetricKeyType==="ec"?C.algorithms=m:C.algorithms=u),C.algorithms.indexOf(A.header.alg)===-1)return I(new e("invalid algorithm"));if(O.alg.startsWith("HS")&&G.type!=="secret")return I(new e(`secretOrPublicKey must be a symmetric key when using ${O.alg}`));if(/^(?:RS|PS|ES)/.test(O.alg)&&G.type!=="public")return I(new e(`secretOrPublicKey must be an asymmetric key when using ${O.alg}`));if(!C.allowInvalidAsymmetricKeyTypes)try{i(O.alg,G)}catch(H){return I(H)}let z;try{z=l.verify(S,A.header.alg,G)}catch(H){return I(H)}if(!z)return I(new e("invalid signature"));const q=A.payload;if(typeof q.nbf<"u"&&!C.ignoreNotBefore){if(typeof q.nbf!="number")return I(new e("invalid nbf value"));if(q.nbf>R+(C.clockTolerance||0))return I(new t("jwt not active",new Date(q.nbf*1e3)))}if(typeof q.exp<"u"&&!C.ignoreExpiration){if(typeof q.exp!="number")return I(new e("invalid exp value"));if(R>=q.exp+(C.clockTolerance||0))return I(new n("jwt expired",new Date(q.exp*1e3)))}if(C.audience){const H=Array.isArray(C.audience)?C.audience:[C.audience];if(!(Array.isArray(q.aud)?q.aud:[q.aud]).some(function(X){return H.some(function(B){return B instanceof RegExp?B.test(X):B===X})}))return I(new e("jwt audience invalid. expected: "+H.join(" or ")))}if(C.issuer&&(typeof C.issuer=="string"&&q.iss!==C.issuer||Array.isArray(C.issuer)&&C.issuer.indexOf(q.iss)===-1))return I(new e("jwt issuer invalid. expected: "+C.issuer));if(C.subject&&q.sub!==C.subject)return I(new e("jwt subject invalid. expected: "+C.subject));if(C.jwtid&&q.jti!==C.jwtid)return I(new e("jwt jwtid invalid. expected: "+C.jwtid));if(C.nonce&&q.nonce!==C.nonce)return I(new e("jwt nonce invalid. expected: "+C.nonce));if(C.maxAge){if(typeof q.iat!="number")return I(new e("iat required when maxAge is specified"));const H=c(C.maxAge,q.iat);if(typeof H>"u")return I(new e('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(R>=H+(C.clockTolerance||0))return I(new n("maxAge exceeded",new Date(H*1e3)))}if(C.complete===!0){const H=A.signature;return I(null,{header:O,payload:q,signature:H})}return I(null,q)})},Gm}var Jm,gb;function hN(){if(gb)return Jm;gb=1;var e=1/0,t=9007199254740991,n=17976931348623157e292,s=NaN,c="[object Arguments]",i="[object Function]",o="[object GeneratorFunction]",l="[object String]",f="[object Symbol]",p=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,m=/^0o[0-7]+$/i,g=/^(?:0|[1-9]\d*)$/,v=parseInt;function S(Q,Ee){for(var Te=-1,nt=Q?Q.length:0,dt=Array(nt);++Te<nt;)dt[Te]=Ee(Q[Te],Te,Q);return dt}function w(Q,Ee,Te,nt){for(var dt=Q.length,ht=Te+-1;++ht<dt;)if(Ee(Q[ht],ht,Q))return ht;return-1}function C(Q,Ee,Te){if(Ee!==Ee)return w(Q,N,Te);for(var nt=Te-1,dt=Q.length;++nt<dt;)if(Q[nt]===Ee)return nt;return-1}function N(Q){return Q!==Q}function I(Q,Ee){for(var Te=-1,nt=Array(Q);++Te<Q;)nt[Te]=Ee(Te);return nt}function R(Q,Ee){return S(Ee,function(Te){return Q[Te]})}function D(Q,Ee){return function(Te){return Q(Ee(Te))}}var A=Object.prototype,O=A.hasOwnProperty,x=A.toString,M=A.propertyIsEnumerable,G=D(Object.keys,Object),V=Math.max;function z(Q,Ee){var Te=B(Q)||X(Q)?I(Q.length,String):[],nt=Te.length,dt=!!nt;for(var ht in Q)O.call(Q,ht)&&!(dt&&(ht=="length"||H(ht,nt)))&&Te.push(ht);return Te}function q(Q){if(!$(Q))return G(Q);var Ee=[];for(var Te in Object(Q))O.call(Q,Te)&&Te!="constructor"&&Ee.push(Te);return Ee}function H(Q,Ee){return Ee=Ee??t,!!Ee&&(typeof Q=="number"||g.test(Q))&&Q>-1&&Q%1==0&&Q<Ee}function $(Q){var Ee=Q&&Q.constructor,Te=typeof Ee=="function"&&Ee.prototype||A;return Q===Te}function K(Q,Ee,Te,nt){Q=te(Q)?Q:Dt(Q),Te=Te&&!nt?Oe(Te):0;var dt=Q.length;return Te<0&&(Te=V(dt+Te,0)),re(Q)?Te<=dt&&Q.indexOf(Ee,Te)>-1:!!dt&&C(Q,Ee,Te)>-1}function X(Q){return ae(Q)&&O.call(Q,"callee")&&(!M.call(Q,"callee")||x.call(Q)==c)}var B=Array.isArray;function te(Q){return Q!=null&&oe(Q.length)&&!Z(Q)}function ae(Q){return Y(Q)&&te(Q)}function Z(Q){var Ee=ce(Q)?x.call(Q):"";return Ee==i||Ee==o}function oe(Q){return typeof Q=="number"&&Q>-1&&Q%1==0&&Q<=t}function ce(Q){var Ee=typeof Q;return!!Q&&(Ee=="object"||Ee=="function")}function Y(Q){return!!Q&&typeof Q=="object"}function re(Q){return typeof Q=="string"||!B(Q)&&Y(Q)&&x.call(Q)==l}function me(Q){return typeof Q=="symbol"||Y(Q)&&x.call(Q)==f}function xe(Q){if(!Q)return Q===0?Q:0;if(Q=qe(Q),Q===e||Q===-e){var Ee=Q<0?-1:1;return Ee*n}return Q===Q?Q:0}function Oe(Q){var Ee=xe(Q),Te=Ee%1;return Ee===Ee?Te?Ee-Te:Ee:0}function qe(Q){if(typeof Q=="number")return Q;if(me(Q))return s;if(ce(Q)){var Ee=typeof Q.valueOf=="function"?Q.valueOf():Q;Q=ce(Ee)?Ee+"":Ee}if(typeof Q!="string")return Q===0?Q:+Q;Q=Q.replace(p,"");var Te=u.test(Q);return Te||m.test(Q)?v(Q.slice(2),Te?2:8):h.test(Q)?s:+Q}function lt(Q){return te(Q)?z(Q):q(Q)}function Dt(Q){return Q?R(Q,lt(Q)):[]}return Jm=K,Jm}var Vm,yb;function pN(){if(yb)return Vm;yb=1;var e="[object Boolean]",t=Object.prototype,n=t.toString;function s(i){return i===!0||i===!1||c(i)&&n.call(i)==e}function c(i){return!!i&&typeof i=="object"}return Vm=s,Vm}var Xm,vb;function mN(){if(vb)return Xm;vb=1;var e=1/0,t=17976931348623157e292,n=NaN,s="[object Symbol]",c=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,f=parseInt,p=Object.prototype,h=p.toString;function u(N){return typeof N=="number"&&N==w(N)}function m(N){var I=typeof N;return!!N&&(I=="object"||I=="function")}function g(N){return!!N&&typeof N=="object"}function v(N){return typeof N=="symbol"||g(N)&&h.call(N)==s}function S(N){if(!N)return N===0?N:0;if(N=C(N),N===e||N===-e){var I=N<0?-1:1;return I*t}return N===N?N:0}function w(N){var I=S(N),R=I%1;return I===I?R?I-R:I:0}function C(N){if(typeof N=="number")return N;if(v(N))return n;if(m(N)){var I=typeof N.valueOf=="function"?N.valueOf():N;N=m(I)?I+"":I}if(typeof N!="string")return N===0?N:+N;N=N.replace(c,"");var R=o.test(N);return R||l.test(N)?f(N.slice(2),R?2:8):i.test(N)?n:+N}return Xm=u,Xm}var Ym,wb;function gN(){if(wb)return Ym;wb=1;var e="[object Number]",t=Object.prototype,n=t.toString;function s(i){return!!i&&typeof i=="object"}function c(i){return typeof i=="number"||s(i)&&n.call(i)==e}return Ym=c,Ym}var Qm,Eb;function yN(){if(Eb)return Qm;Eb=1;var e="[object Object]";function t(m){var g=!1;if(m!=null&&typeof m.toString!="function")try{g=!!(m+"")}catch{}return g}function n(m,g){return function(v){return m(g(v))}}var s=Function.prototype,c=Object.prototype,i=s.toString,o=c.hasOwnProperty,l=i.call(Object),f=c.toString,p=n(Object.getPrototypeOf,Object);function h(m){return!!m&&typeof m=="object"}function u(m){if(!h(m)||f.call(m)!=e||t(m))return!1;var g=p(m);if(g===null)return!0;var v=o.call(g,"constructor")&&g.constructor;return typeof v=="function"&&v instanceof v&&i.call(v)==l}return Qm=u,Qm}var Zm,Sb;function vN(){if(Sb)return Zm;Sb=1;var e="[object String]",t=Object.prototype,n=t.toString,s=Array.isArray;function c(o){return!!o&&typeof o=="object"}function i(o){return typeof o=="string"||!s(o)&&c(o)&&n.call(o)==e}return Zm=i,Zm}var eg,bb;function wN(){if(bb)return eg;bb=1;var e="Expected a function",t=1/0,n=17976931348623157e292,s=NaN,c="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,f=/^0o[0-7]+$/i,p=parseInt,h=Object.prototype,u=h.toString;function m(R,D){var A;if(typeof D!="function")throw new TypeError(e);return R=N(R),function(){return--R>0&&(A=D.apply(this,arguments)),R<=1&&(D=void 0),A}}function g(R){return m(2,R)}function v(R){var D=typeof R;return!!R&&(D=="object"||D=="function")}function S(R){return!!R&&typeof R=="object"}function w(R){return typeof R=="symbol"||S(R)&&u.call(R)==c}function C(R){if(!R)return R===0?R:0;if(R=I(R),R===t||R===-t){var D=R<0?-1:1;return D*n}return R===R?R:0}function N(R){var D=C(R),A=D%1;return D===D?A?D-A:D:0}function I(R){if(typeof R=="number")return R;if(w(R))return s;if(v(R)){var D=typeof R.valueOf=="function"?R.valueOf():R;R=v(D)?D+"":D}if(typeof R!="string")return R===0?R:+R;R=R.replace(i,"");var A=l.test(R);return A||f.test(R)?p(R.slice(2),A?2:8):o.test(R)?s:+R}return eg=g,eg}var tg,Tb;function EN(){if(Tb)return tg;Tb=1;const e=wx(),t=_x(),n=Cx(),s=Cv(),c=hN(),i=pN(),o=mN(),l=gN(),f=yN(),p=vN(),h=wN(),{KeyObject:u,createSecretKey:m,createPrivateKey:g}=Ti,v=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];t&&v.splice(3,0,"PS256","PS384","PS512");const S={expiresIn:{isValid:function(A){return o(A)||p(A)&&A},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(A){return o(A)||p(A)&&A},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(A){return p(A)||Array.isArray(A)},message:'"audience" must be a string or array'},algorithm:{isValid:c.bind(null,v),message:'"algorithm" must be a valid string enum value'},header:{isValid:f,message:'"header" must be an object'},encoding:{isValid:p,message:'"encoding" must be a string'},issuer:{isValid:p,message:'"issuer" must be a string'},subject:{isValid:p,message:'"subject" must be a string'},jwtid:{isValid:p,message:'"jwtid" must be a string'},noTimestamp:{isValid:i,message:'"noTimestamp" must be a boolean'},keyid:{isValid:p,message:'"keyid" must be a string'},mutatePayload:{isValid:i,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:i,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:i,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},w={iat:{isValid:l,message:'"iat" should be a number of seconds'},exp:{isValid:l,message:'"exp" should be a number of seconds'},nbf:{isValid:l,message:'"nbf" should be a number of seconds'}};function C(A,O,x,M){if(!f(x))throw new Error('Expected "'+M+'" to be a plain object.');Object.keys(x).forEach(function(G){const V=A[G];if(!V){if(!O)throw new Error('"'+G+'" is not allowed in "'+M+'"');return}if(!V.isValid(x[G]))throw new Error(V.message)})}function N(A){return C(S,!1,A,"options")}function I(A){return C(w,!0,A,"payload")}const R={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},D=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];return tg=function(A,O,x,M){typeof x=="function"?(M=x,x={}):x=x||{};const G=typeof A=="object"&&!Buffer.isBuffer(A),V=Object.assign({alg:x.algorithm||"HS256",typ:G?"JWT":void 0,kid:x.keyid},x.header);function z($){if(M)return M($);throw $}if(!O&&x.algorithm!=="none")return z(new Error("secretOrPrivateKey must have a value"));if(O!=null&&!(O instanceof u))try{O=g(O)}catch{try{O=m(typeof O=="string"?Buffer.from(O):O)}catch{return z(new Error("secretOrPrivateKey is not valid key material"))}}if(V.alg.startsWith("HS")&&O.type!=="secret")return z(new Error(`secretOrPrivateKey must be a symmetric key when using ${V.alg}`));if(/^(?:RS|PS|ES)/.test(V.alg)){if(O.type!=="private")return z(new Error(`secretOrPrivateKey must be an asymmetric key when using ${V.alg}`));if(!x.allowInsecureKeySizes&&!V.alg.startsWith("ES")&&O.asymmetricKeyDetails!==void 0&&O.asymmetricKeyDetails.modulusLength<2048)return z(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${V.alg}`))}if(typeof A>"u")return z(new Error("payload is required"));if(G){try{I(A)}catch($){return z($)}x.mutatePayload||(A=Object.assign({},A))}else{const $=D.filter(function(K){return typeof x[K]<"u"});if($.length>0)return z(new Error("invalid "+$.join(",")+" option for "+typeof A+" payload"))}if(typeof A.exp<"u"&&typeof x.expiresIn<"u")return z(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof A.nbf<"u"&&typeof x.notBefore<"u")return z(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{N(x)}catch($){return z($)}if(!x.allowInvalidAsymmetricKeyTypes)try{n(V.alg,O)}catch($){return z($)}const q=A.iat||Math.floor(Date.now()/1e3);if(x.noTimestamp?delete A.iat:G&&(A.iat=q),typeof x.notBefore<"u"){try{A.nbf=e(x.notBefore,q)}catch($){return z($)}if(typeof A.nbf>"u")return z(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof x.expiresIn<"u"&&typeof A=="object"){try{A.exp=e(x.expiresIn,q)}catch($){return z($)}if(typeof A.exp>"u")return z(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(R).forEach(function($){const K=R[$];if(typeof x[$]<"u"){if(typeof A[K]<"u")return z(new Error('Bad "options.'+$+'" option. The payload already has an "'+K+'" property.'));A[K]=x[$]}});const H=x.encoding||"utf8";if(typeof M=="function")M=M&&h(M),s.createSign({header:V,privateKey:O,payload:A,encoding:H}).once("error",M).once("done",function($){if(!x.allowInsecureKeySizes&&/^(?:RS|PS)/.test(V.alg)&&$.length<256)return M(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${V.alg}`));M(null,$)});else{let $=s.sign({header:V,payload:A,secret:O,encoding:H});if(!x.allowInsecureKeySizes&&/^(?:RS|PS)/.test(V.alg)&&$.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${V.alg}`);return $}},tg}var rg,Cb;function fo(){return Cb||(Cb=1,rg={decode:gx(),verify:fN(),sign:EN(),JsonWebTokenError:If(),NotBeforeError:yx(),TokenExpiredError:vx()}),rg}/*! Axios v1.13.2 Copyright (c) 2025 Matt Zabriskie and contributors */var ng,_b;function xx(){if(_b)return ng;_b=1;function e(E,T){return function(){return E.apply(T,arguments)}}const{toString:t}=Object.prototype,{getPrototypeOf:n}=Object,{iterator:s,toStringTag:c}=Symbol,i=(E=>T=>{const k=t.call(T);return E[k]||(E[k]=k.slice(8,-1).toLowerCase())})(Object.create(null)),o=E=>(E=E.toLowerCase(),T=>i(T)===E),l=E=>T=>typeof T===E,{isArray:f}=Array,p=l("undefined");function h(E){return E!==null&&!p(E)&&E.constructor!==null&&!p(E.constructor)&&v(E.constructor.isBuffer)&&E.constructor.isBuffer(E)}const u=o("ArrayBuffer");function m(E){let T;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?T=ArrayBuffer.isView(E):T=E&&E.buffer&&u(E.buffer),T}const g=l("string"),v=l("function"),S=l("number"),w=E=>E!==null&&typeof E=="object",C=E=>E===!0||E===!1,N=E=>{if(i(E)!=="object")return!1;const T=n(E);return(T===null||T===Object.prototype||Object.getPrototypeOf(T)===null)&&!(c in E)&&!(s in E)},I=E=>{if(!w(E)||h(E))return!1;try{return Object.keys(E).length===0&&Object.getPrototypeOf(E)===Object.prototype}catch{return!1}},R=o("Date"),D=o("File"),A=o("Blob"),O=o("FileList"),x=E=>w(E)&&v(E.pipe),M=E=>{let T;return E&&(typeof FormData=="function"&&E instanceof FormData||v(E.append)&&((T=i(E))==="formdata"||T==="object"&&v(E.toString)&&E.toString()==="[object FormData]"))},G=o("URLSearchParams"),[V,z,q,H]=["ReadableStream","Request","Response","Headers"].map(o),$=E=>E.trim?E.trim():E.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function K(E,T,{allOwnKeys:k=!1}={}){if(E===null||typeof E>"u")return;let L,j;if(typeof E!="object"&&(E=[E]),f(E))for(L=0,j=E.length;L<j;L++)T.call(null,E[L],L,E);else{if(h(E))return;const W=k?Object.getOwnPropertyNames(E):Object.keys(E),F=W.length;let ne;for(L=0;L<F;L++)ne=W[L],T.call(null,E[ne],ne,E)}}function X(E,T){if(h(E))return null;T=T.toLowerCase();const k=Object.keys(E);let L=k.length,j;for(;L-- >0;)if(j=k[L],T===j.toLowerCase())return j;return null}const B=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ca,te=E=>!p(E)&&E!==B;function ae(){const{caseless:E,skipUndefined:T}=te(this)&&this||{},k={},L=(j,W)=>{const F=E&&X(k,W)||W;N(k[F])&&N(j)?k[F]=ae(k[F],j):N(j)?k[F]=ae({},j):f(j)?k[F]=j.slice():(!T||!p(j))&&(k[F]=j)};for(let j=0,W=arguments.length;j<W;j++)arguments[j]&&K(arguments[j],L);return k}const Z=(E,T,k,{allOwnKeys:L}={})=>(K(T,(j,W)=>{k&&v(j)?E[W]=e(j,k):E[W]=j},{allOwnKeys:L}),E),oe=E=>(E.charCodeAt(0)===65279&&(E=E.slice(1)),E),ce=(E,T,k,L)=>{E.prototype=Object.create(T.prototype,L),E.prototype.constructor=E,Object.defineProperty(E,"super",{value:T.prototype}),k&&Object.assign(E.prototype,k)},Y=(E,T,k,L)=>{let j,W,F;const ne={};if(T=T||{},E==null)return T;do{for(j=Object.getOwnPropertyNames(E),W=j.length;W-- >0;)F=j[W],(!L||L(F,E,T))&&!ne[F]&&(T[F]=E[F],ne[F]=!0);E=k!==!1&&n(E)}while(E&&(!k||k(E,T))&&E!==Object.prototype);return T},re=(E,T,k)=>{E=String(E),(k===void 0||k>E.length)&&(k=E.length),k-=T.length;const L=E.indexOf(T,k);return L!==-1&&L===k},me=E=>{if(!E)return null;if(f(E))return E;let T=E.length;if(!S(T))return null;const k=new Array(T);for(;T-- >0;)k[T]=E[T];return k},xe=(E=>T=>E&&T instanceof E)(typeof Uint8Array<"u"&&n(Uint8Array)),Oe=(E,T)=>{const L=(E&&E[s]).call(E);let j;for(;(j=L.next())&&!j.done;){const W=j.value;T.call(E,W[0],W[1])}},qe=(E,T)=>{let k;const L=[];for(;(k=E.exec(T))!==null;)L.push(k);return L},lt=o("HTMLFormElement"),Dt=E=>E.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(k,L,j){return L.toUpperCase()+j}),Q=(({hasOwnProperty:E})=>(T,k)=>E.call(T,k))(Object.prototype),Ee=o("RegExp"),Te=(E,T)=>{const k=Object.getOwnPropertyDescriptors(E),L={};K(k,(j,W)=>{let F;(F=T(j,W,E))!==!1&&(L[W]=F||j)}),Object.defineProperties(E,L)},nt=E=>{Te(E,(T,k)=>{if(v(E)&&["arguments","caller","callee"].indexOf(k)!==-1)return!1;const L=E[k];if(v(L)){if(T.enumerable=!1,"writable"in T){T.writable=!1;return}T.set||(T.set=()=>{throw Error("Can not rewrite read-only method '"+k+"'")})}})},dt=(E,T)=>{const k={},L=j=>{j.forEach(W=>{k[W]=!0})};return f(E)?L(E):L(String(E).split(T)),k},ht=()=>{},Ws=(E,T)=>E!=null&&Number.isFinite(E=+E)?E:T;function vr(E){return!!(E&&v(E.append)&&E[c]==="FormData"&&E[s])}const ns=E=>{const T=new Array(10),k=(L,j)=>{if(w(L)){if(T.indexOf(L)>=0)return;if(h(L))return L;if(!("toJSON"in L)){T[j]=L;const W=f(L)?[]:{};return K(L,(F,ne)=>{const ye=k(F,j+1);!p(ye)&&(W[ne]=ye)}),T[j]=void 0,W}}return L};return k(E,0)},Nn=o("AsyncFunction"),Kt=E=>E&&(w(E)||v(E))&&v(E.then)&&v(E.catch),Dr=((E,T)=>E?setImmediate:T?((k,L)=>(B.addEventListener("message",({source:j,data:W})=>{j===B&&W===k&&L.length&&L.shift()()},!1),j=>{L.push(j),B.postMessage(k,"*")}))(`axios@${Math.random()}`,[]):k=>setTimeout(k))(typeof setImmediate=="function",v(B.postMessage)),xi=typeof queueMicrotask<"u"?queueMicrotask.bind(B):typeof process<"u"&&process.nextTick||Dr;var J={isArray:f,isArrayBuffer:u,isBuffer:h,isFormData:M,isArrayBufferView:m,isString:g,isNumber:S,isBoolean:C,isObject:w,isPlainObject:N,isEmptyObject:I,isReadableStream:V,isRequest:z,isResponse:q,isHeaders:H,isUndefined:p,isDate:R,isFile:D,isBlob:A,isRegExp:Ee,isFunction:v,isStream:x,isURLSearchParams:G,isTypedArray:xe,isFileList:O,forEach:K,merge:ae,extend:Z,trim:$,stripBOM:oe,inherits:ce,toFlatObject:Y,kindOf:i,kindOfTest:o,endsWith:re,toArray:me,forEachEntry:Oe,matchAll:qe,isHTMLForm:lt,hasOwnProperty:Q,hasOwnProp:Q,reduceDescriptors:Te,freezeMethods:nt,toObjectSet:dt,toCamelCase:Dt,noop:ht,toFiniteNumber:Ws,findKey:X,global:B,isContextDefined:te,isSpecCompliantForm:vr,toJSONObject:ns,isAsyncFn:Nn,isThenable:Kt,setImmediate:Dr,asap:xi,isIterable:E=>E!=null&&v(E[s])};function ke(E,T,k,L,j){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=E,this.name="AxiosError",T&&(this.code=T),k&&(this.config=k),L&&(this.request=L),j&&(this.response=j,this.status=j.status?j.status:null)}J.inherits(ke,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:J.toJSONObject(this.config),code:this.code,status:this.status}}});const wn=ke.prototype,Ln={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(E=>{Ln[E]={value:E}}),Object.defineProperties(ke,Ln),Object.defineProperty(wn,"isAxiosError",{value:!0}),ke.from=(E,T,k,L,j,W)=>{const F=Object.create(wn);J.toFlatObject(E,F,function(ue){return ue!==Error.prototype},de=>de!=="isAxiosError");const ne=E&&E.message?E.message:"Error",ye=T==null&&E?E.code:T;return ke.call(F,ne,ye,k,L,j),E&&F.cause==null&&Object.defineProperty(F,"cause",{value:E,configurable:!0}),F.name=E&&E.name||"Error",W&&Object.assign(F,W),F};var Cr=null;function _r(E){return J.isPlainObject(E)||J.isArray(E)}function en(E){return J.endsWith(E,"[]")?E.slice(0,-2):E}function _s(E,T,k){return E?E.concat(T).map(function(j,W){return j=en(j),!k&&W?"["+j+"]":j}).join(k?".":""):T}function Ri(E){return J.isArray(E)&&!E.some(_r)}const ki=J.toFlatObject(J,{},null,function(T){return/^is[A-Z]/.test(T)});function xr(E,T,k){if(!J.isObject(E))throw new TypeError("target must be an object");T=T||new FormData,k=J.toFlatObject(k,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_e,ve){return!J.isUndefined(ve[_e])});const L=k.metaTokens,j=k.visitor||ue,W=k.dots,F=k.indexes,ye=(k.Blob||typeof Blob<"u"&&Blob)&&J.isSpecCompliantForm(T);if(!J.isFunction(j))throw new TypeError("visitor must be a function");function de(fe){if(fe===null)return"";if(J.isDate(fe))return fe.toISOString();if(J.isBoolean(fe))return fe.toString();if(!ye&&J.isBlob(fe))throw new ke("Blob is not supported. Use a Buffer instead.");return J.isArrayBuffer(fe)||J.isTypedArray(fe)?ye&&typeof Blob=="function"?new Blob([fe]):Buffer.from(fe):fe}function ue(fe,_e,ve){let et=fe;if(fe&&!ve&&typeof fe=="object"){if(J.endsWith(_e,"{}"))_e=L?_e:_e.slice(0,-2),fe=JSON.stringify(fe);else if(J.isArray(fe)&&Ri(fe)||(J.isFileList(fe)||J.endsWith(_e,"[]"))&&(et=J.toArray(fe)))return _e=en(_e),et.forEach(function(ot,wt){!(J.isUndefined(ot)||ot===null)&&T.append(F===!0?_s([_e],wt,W):F===null?_e:_e+"[]",de(ot))}),!1}return _r(fe)?!0:(T.append(_s(ve,_e,W),de(fe)),!1)}const we=[],Be=Object.assign(ki,{defaultVisitor:ue,convertValue:de,isVisitable:_r});function ut(fe,_e){if(!J.isUndefined(fe)){if(we.indexOf(fe)!==-1)throw Error("Circular reference detected in "+_e.join("."));we.push(fe),J.forEach(fe,function(et,_t){(!(J.isUndefined(et)||et===null)&&j.call(T,et,J.isString(_t)?_t.trim():_t,_e,Be))===!0&&ut(et,_e?_e.concat(_t):[_t])}),we.pop()}}if(!J.isObject(E))throw new TypeError("data must be an object");return ut(E),T}function ss(E){const T={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(E).replace(/[!'()~]|%20|%00/g,function(L){return T[L]})}function $r(E,T){this._pairs=[],E&&xr(E,this,T)}const ur=$r.prototype;ur.append=function(T,k){this._pairs.push([T,k])},ur.toString=function(T){const k=T?function(L){return T.call(this,L,ss)}:ss;return this._pairs.map(function(j){return k(j[0])+"="+k(j[1])},"").join("&")};function Ks(E){return encodeURIComponent(E).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function tn(E,T,k){if(!T)return E;const L=k&&k.encode||Ks;J.isFunction(k)&&(k={serialize:k});const j=k&&k.serialize;let W;if(j?W=j(T,k):W=J.isURLSearchParams(T)?T.toString():new $r(T,k).toString(L),W){const F=E.indexOf("#");F!==-1&&(E=E.slice(0,F)),E+=(E.indexOf("?")===-1?"?":"&")+W}return E}class En{constructor(){this.handlers=[]}use(T,k,L){return this.handlers.push({fulfilled:T,rejected:k,synchronous:L?L.synchronous:!1,runWhen:L?L.runWhen:null}),this.handlers.length-1}eject(T){this.handlers[T]&&(this.handlers[T]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(T){J.forEach(this.handlers,function(L){L!==null&&T(L)})}}var is=En,Xe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},At=typeof URLSearchParams<"u"?URLSearchParams:$r,$t=typeof FormData<"u"?FormData:null,Zt=typeof Blob<"u"?Blob:null,jn={isBrowser:!0,classes:{URLSearchParams:At,FormData:$t,Blob:Zt},protocols:["http","https","file","blob","url","data"]};const bt=typeof window<"u"&&typeof document<"u",xt=typeof navigator=="object"&&navigator||void 0,Dn=bt&&(!xt||["ReactNative","NativeScript","NS"].indexOf(xt.product)<0),Bt=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",wr=bt&&window.location.href||"http://localhost";var $n=Object.freeze({__proto__:null,hasBrowserEnv:bt,hasStandardBrowserWebWorkerEnv:Bt,hasStandardBrowserEnv:Dn,navigator:xt,origin:wr}),Qe={...$n,...jn};function Bs(E,T){return xr(E,new Qe.classes.URLSearchParams,{visitor:function(k,L,j,W){return Qe.isNode&&J.isBuffer(k)?(this.append(L,k.toString("base64")),!1):W.defaultVisitor.apply(this,arguments)},...T})}function po(E){return J.matchAll(/\w+|\[(\w*)]/g,E).map(T=>T[0]==="[]"?"":T[1]||T[0])}function wc(E){const T={},k=Object.keys(E);let L;const j=k.length;let W;for(L=0;L<j;L++)W=k[L],T[W]=E[W];return T}function mo(E){function T(k,L,j,W){let F=k[W++];if(F==="__proto__")return!0;const ne=Number.isFinite(+F),ye=W>=k.length;return F=!F&&J.isArray(j)?j.length:F,ye?(J.hasOwnProp(j,F)?j[F]=[j[F],L]:j[F]=L,!ne):((!j[F]||!J.isObject(j[F]))&&(j[F]=[]),T(k,L,j[F],W)&&J.isArray(j[F])&&(j[F]=wc(j[F])),!ne)}if(J.isFormData(E)&&J.isFunction(E.entries)){const k={};return J.forEachEntry(E,(L,j)=>{T(po(L),j,k,0)}),k}return null}function Ec(E,T,k){if(J.isString(E))try{return(T||JSON.parse)(E),J.trim(E)}catch(L){if(L.name!=="SyntaxError")throw L}return(k||JSON.stringify)(E)}const Ur={transitional:Xe,adapter:["xhr","http","fetch"],transformRequest:[function(T,k){const L=k.getContentType()||"",j=L.indexOf("application/json")>-1,W=J.isObject(T);if(W&&J.isHTMLForm(T)&&(T=new FormData(T)),J.isFormData(T))return j?JSON.stringify(mo(T)):T;if(J.isArrayBuffer(T)||J.isBuffer(T)||J.isStream(T)||J.isFile(T)||J.isBlob(T)||J.isReadableStream(T))return T;if(J.isArrayBufferView(T))return T.buffer;if(J.isURLSearchParams(T))return k.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),T.toString();let ne;if(W){if(L.indexOf("application/x-www-form-urlencoded")>-1)return Bs(T,this.formSerializer).toString();if((ne=J.isFileList(T))||L.indexOf("multipart/form-data")>-1){const ye=this.env&&this.env.FormData;return xr(ne?{"files[]":T}:T,ye&&new ye,this.formSerializer)}}return W||j?(k.setContentType("application/json",!1),Ec(T)):T}],transformResponse:[function(T){const k=this.transitional||Ur.transitional,L=k&&k.forcedJSONParsing,j=this.responseType==="json";if(J.isResponse(T)||J.isReadableStream(T))return T;if(T&&J.isString(T)&&(L&&!this.responseType||j)){const F=!(k&&k.silentJSONParsing)&&j;try{return JSON.parse(T,this.parseReviver)}catch(ne){if(F)throw ne.name==="SyntaxError"?ke.from(ne,ke.ERR_BAD_RESPONSE,this,null,this.response):ne}}return T}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Qe.classes.FormData,Blob:Qe.classes.Blob},validateStatus:function(T){return T>=200&&T<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};J.forEach(["delete","get","head","post","put","patch"],E=>{Ur.headers[E]={}});var xs=Ur;const ya=J.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var Sc=E=>{const T={};let k,L,j;return E&&E.split(`
`).forEach(function(F){j=F.indexOf(":"),k=F.substring(0,j).trim().toLowerCase(),L=F.substring(j+1).trim(),!(!k||T[k]&&ya[k])&&(k==="set-cookie"?T[k]?T[k].push(L):T[k]=[L]:T[k]=T[k]?T[k]+", "+L:L)}),T};const Ai=Symbol("internals");function rn(E){return E&&String(E).trim().toLowerCase()}function Un(E){return E===!1||E==null?E:J.isArray(E)?E.map(Un):String(E)}function va(E){const T=Object.create(null),k=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let L;for(;L=k.exec(E);)T[L[1]]=L[2];return T}const bc=E=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(E.trim());function zs(E,T,k,L,j){if(J.isFunction(L))return L.call(this,T,k);if(j&&(T=k),!!J.isString(T)){if(J.isString(L))return T.indexOf(L)!==-1;if(J.isRegExp(L))return L.test(T)}}function It(E){return E.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(T,k,L)=>k.toUpperCase()+L)}function Tc(E,T){const k=J.toCamelCase(" "+T);["get","set","has"].forEach(L=>{Object.defineProperty(E,L+k,{value:function(j,W,F){return this[L].call(this,T,j,W,F)},configurable:!0})})}class Sn{constructor(T){T&&this.set(T)}set(T,k,L){const j=this;function W(ne,ye,de){const ue=rn(ye);if(!ue)throw new Error("header name must be a non-empty string");const we=J.findKey(j,ue);(!we||j[we]===void 0||de===!0||de===void 0&&j[we]!==!1)&&(j[we||ye]=Un(ne))}const F=(ne,ye)=>J.forEach(ne,(de,ue)=>W(de,ue,ye));if(J.isPlainObject(T)||T instanceof this.constructor)F(T,k);else if(J.isString(T)&&(T=T.trim())&&!bc(T))F(Sc(T),k);else if(J.isObject(T)&&J.isIterable(T)){let ne={},ye,de;for(const ue of T){if(!J.isArray(ue))throw TypeError("Object iterator must return a key-value pair");ne[de=ue[0]]=(ye=ne[de])?J.isArray(ye)?[...ye,ue[1]]:[ye,ue[1]]:ue[1]}F(ne,k)}else T!=null&&W(k,T,L);return this}get(T,k){if(T=rn(T),T){const L=J.findKey(this,T);if(L){const j=this[L];if(!k)return j;if(k===!0)return va(j);if(J.isFunction(k))return k.call(this,j,L);if(J.isRegExp(k))return k.exec(j);throw new TypeError("parser must be boolean|regexp|function")}}}has(T,k){if(T=rn(T),T){const L=J.findKey(this,T);return!!(L&&this[L]!==void 0&&(!k||zs(this,this[L],L,k)))}return!1}delete(T,k){const L=this;let j=!1;function W(F){if(F=rn(F),F){const ne=J.findKey(L,F);ne&&(!k||zs(L,L[ne],ne,k))&&(delete L[ne],j=!0)}}return J.isArray(T)?T.forEach(W):W(T),j}clear(T){const k=Object.keys(this);let L=k.length,j=!1;for(;L--;){const W=k[L];(!T||zs(this,this[W],W,T,!0))&&(delete this[W],j=!0)}return j}normalize(T){const k=this,L={};return J.forEach(this,(j,W)=>{const F=J.findKey(L,W);if(F){k[F]=Un(j),delete k[W];return}const ne=T?It(W):String(W).trim();ne!==W&&delete k[W],k[ne]=Un(j),L[ne]=!0}),this}concat(...T){return this.constructor.concat(this,...T)}toJSON(T){const k=Object.create(null);return J.forEach(this,(L,j)=>{L!=null&&L!==!1&&(k[j]=T&&J.isArray(L)?L.join(", "):L)}),k}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([T,k])=>T+": "+k).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(T){return T instanceof this?T:new this(T)}static concat(T,...k){const L=new this(T);return k.forEach(j=>L.set(j)),L}static accessor(T){const L=(this[Ai]=this[Ai]={accessors:{}}).accessors,j=this.prototype;function W(F){const ne=rn(F);L[ne]||(Tc(j,F),L[ne]=!0)}return J.isArray(T)?T.forEach(W):W(T),this}}Sn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),J.reduceDescriptors(Sn.prototype,({value:E},T)=>{let k=T[0].toUpperCase()+T.slice(1);return{get:()=>E,set(L){this[k]=L}}}),J.freezeMethods(Sn);var Rt=Sn;function qn(E,T){const k=this||xs,L=T||k,j=Rt.from(L.headers);let W=L.data;return J.forEach(E,function(ne){W=ne.call(k,W,j.normalize(),T?T.status:void 0)}),j.normalize(),W}function go(E){return!!(E&&E.__CANCEL__)}function Rr(E,T,k){ke.call(this,E??"canceled",ke.ERR_CANCELED,T,k),this.name="CanceledError"}J.inherits(Rr,ke,{__CANCEL__:!0});function Rs(E,T,k){const L=k.config.validateStatus;!k.status||!L||L(k.status)?E(k):T(new ke("Request failed with status code "+k.status,[ke.ERR_BAD_REQUEST,ke.ERR_BAD_RESPONSE][Math.floor(k.status/100)-4],k.config,k.request,k))}function nn(E){const T=/^([-+\w]{1,25})(:?\/\/|:)/.exec(E);return T&&T[1]||""}function Cc(E,T){E=E||10;const k=new Array(E),L=new Array(E);let j=0,W=0,F;return T=T!==void 0?T:1e3,function(ye){const de=Date.now(),ue=L[W];F||(F=de),k[j]=ye,L[j]=de;let we=W,Be=0;for(;we!==j;)Be+=k[we++],we=we%E;if(j=(j+1)%E,j===W&&(W=(W+1)%E),de-F<T)return;const ut=ue&&de-ue;return ut?Math.round(Be*1e3/ut):void 0}}function qr(E,T){let k=0,L=1e3/T,j,W;const F=(de,ue=Date.now())=>{k=ue,j=null,W&&(clearTimeout(W),W=null),E(...de)};return[(...de)=>{const ue=Date.now(),we=ue-k;we>=L?F(de,ue):(j=de,W||(W=setTimeout(()=>{W=null,F(j)},L-we)))},()=>j&&F(j)]}const os=(E,T,k=3)=>{let L=0;const j=Cc(50,250);return qr(W=>{const F=W.loaded,ne=W.lengthComputable?W.total:void 0,ye=F-L,de=j(ye),ue=F<=ne;L=F;const we={loaded:F,total:ne,progress:ne?F/ne:void 0,bytes:ye,rate:de||void 0,estimated:de&&ne&&ue?(ne-F)/de:void 0,event:W,lengthComputable:ne!=null,[T?"download":"upload"]:!0};E(we)},k)},yo=(E,T)=>{const k=E!=null;return[L=>T[0]({lengthComputable:k,total:E,loaded:L}),T[1]]},vo=E=>(...T)=>J.asap(()=>E(...T));var Ii=Qe.hasStandardBrowserEnv?((E,T)=>k=>(k=new URL(k,Qe.origin),E.protocol===k.protocol&&E.host===k.host&&(T||E.port===k.port)))(new URL(Qe.origin),Qe.navigator&&/(msie|trident)/i.test(Qe.navigator.userAgent)):()=>!0,Pi=Qe.hasStandardBrowserEnv?{write(E,T,k,L,j,W,F){if(typeof document>"u")return;const ne=[`${E}=${encodeURIComponent(T)}`];J.isNumber(k)&&ne.push(`expires=${new Date(k).toUTCString()}`),J.isString(L)&&ne.push(`path=${L}`),J.isString(j)&&ne.push(`domain=${j}`),W===!0&&ne.push("secure"),J.isString(F)&&ne.push(`SameSite=${F}`),document.cookie=ne.join("; ")},read(E){if(typeof document>"u")return null;const T=document.cookie.match(new RegExp("(?:^|; )"+E+"=([^;]*)"));return T?decodeURIComponent(T[1]):null},remove(E){this.write(E,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Gs(E){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(E)}function Oi(E,T){return T?E.replace(/\/?\/$/,"")+"/"+T.replace(/^\/+/,""):E}function wo(E,T,k){let L=!Gs(T);return E&&(L||k==!1)?Oi(E,T):T}const Eo=E=>E instanceof Rt?{...E}:E;function nr(E,T){T=T||{};const k={};function L(de,ue,we,Be){return J.isPlainObject(de)&&J.isPlainObject(ue)?J.merge.call({caseless:Be},de,ue):J.isPlainObject(ue)?J.merge({},ue):J.isArray(ue)?ue.slice():ue}function j(de,ue,we,Be){if(J.isUndefined(ue)){if(!J.isUndefined(de))return L(void 0,de,we,Be)}else return L(de,ue,we,Be)}function W(de,ue){if(!J.isUndefined(ue))return L(void 0,ue)}function F(de,ue){if(J.isUndefined(ue)){if(!J.isUndefined(de))return L(void 0,de)}else return L(void 0,ue)}function ne(de,ue,we){if(we in T)return L(de,ue);if(we in E)return L(void 0,de)}const ye={url:W,method:W,data:W,baseURL:F,transformRequest:F,transformResponse:F,paramsSerializer:F,timeout:F,timeoutMessage:F,withCredentials:F,withXSRFToken:F,adapter:F,responseType:F,xsrfCookieName:F,xsrfHeaderName:F,onUploadProgress:F,onDownloadProgress:F,decompress:F,maxContentLength:F,maxBodyLength:F,beforeRedirect:F,transport:F,httpAgent:F,httpsAgent:F,cancelToken:F,socketPath:F,responseEncoding:F,validateStatus:ne,headers:(de,ue,we)=>j(Eo(de),Eo(ue),we,!0)};return J.forEach(Object.keys({...E,...T}),function(ue){const we=ye[ue]||j,Be=we(E[ue],T[ue],ue);J.isUndefined(Be)&&we!==ne||(k[ue]=Be)}),k}var Ni=E=>{const T=nr({},E);let{data:k,withXSRFToken:L,xsrfHeaderName:j,xsrfCookieName:W,headers:F,auth:ne}=T;if(T.headers=F=Rt.from(F),T.url=tn(wo(T.baseURL,T.url,T.allowAbsoluteUrls),E.params,E.paramsSerializer),ne&&F.set("Authorization","Basic "+btoa((ne.username||"")+":"+(ne.password?unescape(encodeURIComponent(ne.password)):""))),J.isFormData(k)){if(Qe.hasStandardBrowserEnv||Qe.hasStandardBrowserWebWorkerEnv)F.setContentType(void 0);else if(J.isFunction(k.getHeaders)){const ye=k.getHeaders(),de=["content-type","content-length"];Object.entries(ye).forEach(([ue,we])=>{de.includes(ue.toLowerCase())&&F.set(ue,we)})}}if(Qe.hasStandardBrowserEnv&&(L&&J.isFunction(L)&&(L=L(T)),L||L!==!1&&Ii(T.url))){const ye=j&&W&&Pi.read(W);ye&&F.set(j,ye)}return T},Js=typeof XMLHttpRequest<"u"&&function(E){return new Promise(function(k,L){const j=Ni(E);let W=j.data;const F=Rt.from(j.headers).normalize();let{responseType:ne,onUploadProgress:ye,onDownloadProgress:de}=j,ue,we,Be,ut,fe;function _e(){ut&&ut(),fe&&fe(),j.cancelToken&&j.cancelToken.unsubscribe(ue),j.signal&&j.signal.removeEventListener("abort",ue)}let ve=new XMLHttpRequest;ve.open(j.method.toUpperCase(),j.url,!0),ve.timeout=j.timeout;function et(){if(!ve)return;const ot=Rt.from("getAllResponseHeaders"in ve&&ve.getAllResponseHeaders()),Pt={data:!ne||ne==="text"||ne==="json"?ve.responseText:ve.response,status:ve.status,statusText:ve.statusText,headers:ot,config:E,request:ve};Rs(function(Ct){k(Ct),_e()},function(Ct){L(Ct),_e()},Pt),ve=null}"onloadend"in ve?ve.onloadend=et:ve.onreadystatechange=function(){!ve||ve.readyState!==4||ve.status===0&&!(ve.responseURL&&ve.responseURL.indexOf("file:")===0)||setTimeout(et)},ve.onabort=function(){ve&&(L(new ke("Request aborted",ke.ECONNABORTED,E,ve)),ve=null)},ve.onerror=function(wt){const Pt=wt&&wt.message?wt.message:"Network Error",Er=new ke(Pt,ke.ERR_NETWORK,E,ve);Er.event=wt||null,L(Er),ve=null},ve.ontimeout=function(){let wt=j.timeout?"timeout of "+j.timeout+"ms exceeded":"timeout exceeded";const Pt=j.transitional||Xe;j.timeoutErrorMessage&&(wt=j.timeoutErrorMessage),L(new ke(wt,Pt.clarifyTimeoutError?ke.ETIMEDOUT:ke.ECONNABORTED,E,ve)),ve=null},W===void 0&&F.setContentType(null),"setRequestHeader"in ve&&J.forEach(F.toJSON(),function(wt,Pt){ve.setRequestHeader(Pt,wt)}),J.isUndefined(j.withCredentials)||(ve.withCredentials=!!j.withCredentials),ne&&ne!=="json"&&(ve.responseType=j.responseType),de&&([Be,fe]=os(de,!0),ve.addEventListener("progress",Be)),ye&&ve.upload&&([we,ut]=os(ye),ve.upload.addEventListener("progress",we),ve.upload.addEventListener("loadend",ut)),(j.cancelToken||j.signal)&&(ue=ot=>{ve&&(L(!ot||ot.type?new Rr(null,E,ve):ot),ve.abort(),ve=null)},j.cancelToken&&j.cancelToken.subscribe(ue),j.signal&&(j.signal.aborted?ue():j.signal.addEventListener("abort",ue)));const _t=nn(j.url);if(_t&&Qe.protocols.indexOf(_t)===-1){L(new ke("Unsupported protocol "+_t+":",ke.ERR_BAD_REQUEST,E));return}ve.send(W||null)})},So=(E,T)=>{const{length:k}=E=E?E.filter(Boolean):[];if(T||k){let L=new AbortController,j;const W=function(de){if(!j){j=!0,ne();const ue=de instanceof Error?de:this.reason;L.abort(ue instanceof ke?ue:new Rr(ue instanceof Error?ue.message:ue))}};let F=T&&setTimeout(()=>{F=null,W(new ke(`timeout ${T} of ms exceeded`,ke.ETIMEDOUT))},T);const ne=()=>{E&&(F&&clearTimeout(F),F=null,E.forEach(de=>{de.unsubscribe?de.unsubscribe(W):de.removeEventListener("abort",W)}),E=null)};E.forEach(de=>de.addEventListener("abort",W));const{signal:ye}=L;return ye.unsubscribe=()=>J.asap(ne),ye}};const pt=function*(E,T){let k=E.byteLength;if(k<T){yield E;return}let L=0,j;for(;L<k;)j=L+T,yield E.slice(L,j),L=j},wa=async function*(E,T){for await(const k of Ea(E))yield*pt(k,T)},Ea=async function*(E){if(E[Symbol.asyncIterator]){yield*E;return}const T=E.getReader();try{for(;;){const{done:k,value:L}=await T.read();if(k)break;yield L}}finally{await T.cancel()}},Vs=(E,T,k,L)=>{const j=wa(E,T);let W=0,F,ne=ye=>{F||(F=!0,L&&L(ye))};return new ReadableStream({async pull(ye){try{const{done:de,value:ue}=await j.next();if(de){ne(),ye.close();return}let we=ue.byteLength;if(k){let Be=W+=we;k(Be)}ye.enqueue(new Uint8Array(ue))}catch(de){throw ne(de),de}},cancel(ye){return ne(ye),j.return()}},{highWaterMark:2})},Li=64*1024,{isFunction:Mn}=J,Sa=(({Request:E,Response:T})=>({Request:E,Response:T}))(J.global),{ReadableStream:Xs,TextEncoder:ks}=J.global,sn=(E,...T)=>{try{return!!E(...T)}catch{return!1}},Hn=E=>{E=J.merge.call({skipUndefined:!0},Sa,E);const{fetch:T,Request:k,Response:L}=E,j=T?Mn(T):typeof fetch=="function",W=Mn(k),F=Mn(L);if(!j)return!1;const ne=j&&Mn(Xs),ye=j&&(typeof ks=="function"?(fe=>_e=>fe.encode(_e))(new ks):async fe=>new Uint8Array(await new k(fe).arrayBuffer())),de=W&&ne&&sn(()=>{let fe=!1;const _e=new k(Qe.origin,{body:new Xs,method:"POST",get duplex(){return fe=!0,"half"}}).headers.has("Content-Type");return fe&&!_e}),ue=F&&ne&&sn(()=>J.isReadableStream(new L("").body)),we={stream:ue&&(fe=>fe.body)};j&&["text","arrayBuffer","blob","formData","stream"].forEach(fe=>{!we[fe]&&(we[fe]=(_e,ve)=>{let et=_e&&_e[fe];if(et)return et.call(_e);throw new ke(`Response type '${fe}' is not supported`,ke.ERR_NOT_SUPPORT,ve)})});const Be=async fe=>{if(fe==null)return 0;if(J.isBlob(fe))return fe.size;if(J.isSpecCompliantForm(fe))return(await new k(Qe.origin,{method:"POST",body:fe}).arrayBuffer()).byteLength;if(J.isArrayBufferView(fe)||J.isArrayBuffer(fe))return fe.byteLength;if(J.isURLSearchParams(fe)&&(fe=fe+""),J.isString(fe))return(await ye(fe)).byteLength},ut=async(fe,_e)=>{const ve=J.toFiniteNumber(fe.getContentLength());return ve??Be(_e)};return async fe=>{let{url:_e,method:ve,data:et,signal:_t,cancelToken:ot,timeout:wt,onDownloadProgress:Pt,onUploadProgress:Er,responseType:Ct,headers:ti,withCredentials:us="same-origin",fetchOptions:_o}=Ni(fe),xo=T||fetch;Ct=Ct?(Ct+"").toLowerCase():"text";let Tn=So([_t,ot&&ot.toAbortSignal()],wt),Cn=null;const Sr=Tn&&Tn.unsubscribe&&(()=>{Tn.unsubscribe()});let Ro;try{if(Er&&de&&ve!=="get"&&ve!=="head"&&(Ro=await ut(ti,et))!==0){let ir=new k(_e,{method:"POST",body:et,duplex:"half"}),Hr;if(J.isFormData(et)&&(Hr=ir.headers.get("content-type"))&&ti.setContentType(Hr),ir.body){const[ri,_n]=yo(Ro,os(vo(Er)));et=Vs(ir.body,Li,ri,_n)}}J.isString(us)||(us=us?"include":"omit");const Lt=W&&"credentials"in k.prototype,ko={..._o,signal:Tn,method:ve.toUpperCase(),headers:ti.normalize().toJSON(),body:et,duplex:"half",credentials:Lt?us:void 0};Cn=W&&new k(_e,ko);let sr=await(W?xo(Cn,_o):xo(_e,ko));const Ao=ue&&(Ct==="stream"||Ct==="response");if(ue&&(Pt||Ao&&Sr)){const ir={};["status","statusText","headers"].forEach(ds=>{ir[ds]=sr[ds]});const Hr=J.toFiniteNumber(sr.headers.get("content-length")),[ri,_n]=Pt&&yo(Hr,os(vo(Pt),!0))||[];sr=new L(Vs(sr.body,Li,ri,()=>{_n&&_n(),Sr&&Sr()}),ir)}Ct=Ct||"text";let Rc=await we[J.findKey(we,Ct)||"text"](sr,fe);return!Ao&&Sr&&Sr(),await new Promise((ir,Hr)=>{Rs(ir,Hr,{data:Rc,headers:Rt.from(sr.headers),status:sr.status,statusText:sr.statusText,config:fe,request:Cn})})}catch(Lt){throw Sr&&Sr(),Lt&&Lt.name==="TypeError"&&/Load failed|fetch/i.test(Lt.message)?Object.assign(new ke("Network Error",ke.ERR_NETWORK,fe,Cn),{cause:Lt.cause||Lt}):ke.from(Lt,Lt&&Lt.code,fe,Cn)}}},Fn=new Map,as=E=>{let T=E&&E.env||{};const{fetch:k,Request:L,Response:j}=T,W=[L,j,k];let F=W.length,ne=F,ye,de,ue=Fn;for(;ne--;)ye=W[ne],de=ue.get(ye),de===void 0&&ue.set(ye,de=ne?new Map:Hn(T)),ue=de;return de};as();const bn={http:Cr,xhr:Js,fetch:{get:as}};J.forEach(bn,(E,T)=>{if(E){try{Object.defineProperty(E,"name",{value:T})}catch{}Object.defineProperty(E,"adapterName",{value:T})}});const on=E=>`- ${E}`,xc=E=>J.isFunction(E)||E===null||E===!1;function ba(E,T){E=J.isArray(E)?E:[E];const{length:k}=E;let L,j;const W={};for(let F=0;F<k;F++){L=E[F];let ne;if(j=L,!xc(L)&&(j=bn[(ne=String(L)).toLowerCase()],j===void 0))throw new ke(`Unknown adapter '${ne}'`);if(j&&(J.isFunction(j)||(j=j.get(T))))break;W[ne||"#"+F]=j}if(!j){const F=Object.entries(W).map(([ye,de])=>`adapter ${ye} `+(de===!1?"is not supported by the environment":"is not available in the build"));let ne=k?F.length>1?`since :
`+F.map(on).join(`
`):" "+on(F[0]):"as no adapter specified";throw new ke("There is no suitable adapter to dispatch the request "+ne,"ERR_NOT_SUPPORT")}return j}var cs={getAdapter:ba,adapters:bn};function Ys(E){if(E.cancelToken&&E.cancelToken.throwIfRequested(),E.signal&&E.signal.aborted)throw new Rr(null,E)}function ji(E){return Ys(E),E.headers=Rt.from(E.headers),E.data=qn.call(E,E.transformRequest),["post","put","patch"].indexOf(E.method)!==-1&&E.headers.setContentType("application/x-www-form-urlencoded",!1),cs.getAdapter(E.adapter||xs.adapter,E)(E).then(function(L){return Ys(E),L.data=qn.call(E,E.transformResponse,L),L.headers=Rt.from(L.headers),L},function(L){return go(L)||(Ys(E),L&&L.response&&(L.response.data=qn.call(E,E.transformResponse,L.response),L.response.headers=Rt.from(L.response.headers))),Promise.reject(L)})}const As="1.13.2",Wn={};["object","boolean","number","function","string","symbol"].forEach((E,T)=>{Wn[E]=function(L){return typeof L===E||"a"+(T<1?"n ":" ")+E}});const bo={};Wn.transitional=function(T,k,L){function j(W,F){return"[Axios v"+As+"] Transitional option '"+W+"'"+F+(L?". "+L:"")}return(W,F,ne)=>{if(T===!1)throw new ke(j(F," has been removed"+(k?" in "+k:"")),ke.ERR_DEPRECATED);return k&&!bo[F]&&(bo[F]=!0,console.warn(j(F," has been deprecated since v"+k+" and will be removed in the near future"))),T?T(W,F,ne):!0}},Wn.spelling=function(T){return(k,L)=>(console.warn(`${L} is likely a misspelling of ${T}`),!0)};function Qs(E,T,k){if(typeof E!="object")throw new ke("options must be an object",ke.ERR_BAD_OPTION_VALUE);const L=Object.keys(E);let j=L.length;for(;j-- >0;){const W=L[j],F=T[W];if(F){const ne=E[W],ye=ne===void 0||F(ne,W,E);if(ye!==!0)throw new ke("option "+W+" must be "+ye,ke.ERR_BAD_OPTION_VALUE);continue}if(k!==!0)throw new ke("Unknown option "+W,ke.ERR_BAD_OPTION)}}var Mr={assertOptions:Qs,validators:Wn};const Tt=Mr.validators;class an{constructor(T){this.defaults=T||{},this.interceptors={request:new is,response:new is}}async request(T,k){try{return await this._request(T,k)}catch(L){if(L instanceof Error){let j={};Error.captureStackTrace?Error.captureStackTrace(j):j=new Error;const W=j.stack?j.stack.replace(/^.+\n/,""):"";try{L.stack?W&&!String(L.stack).endsWith(W.replace(/^.+\n.+\n/,""))&&(L.stack+=`
`+W):L.stack=W}catch{}}throw L}}_request(T,k){typeof T=="string"?(k=k||{},k.url=T):k=T||{},k=nr(this.defaults,k);const{transitional:L,paramsSerializer:j,headers:W}=k;L!==void 0&&Mr.assertOptions(L,{silentJSONParsing:Tt.transitional(Tt.boolean),forcedJSONParsing:Tt.transitional(Tt.boolean),clarifyTimeoutError:Tt.transitional(Tt.boolean)},!1),j!=null&&(J.isFunction(j)?k.paramsSerializer={serialize:j}:Mr.assertOptions(j,{encode:Tt.function,serialize:Tt.function},!0)),k.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?k.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:k.allowAbsoluteUrls=!0),Mr.assertOptions(k,{baseUrl:Tt.spelling("baseURL"),withXsrfToken:Tt.spelling("withXSRFToken")},!0),k.method=(k.method||this.defaults.method||"get").toLowerCase();let F=W&&J.merge(W.common,W[k.method]);W&&J.forEach(["delete","get","head","post","put","patch","common"],fe=>{delete W[fe]}),k.headers=Rt.concat(F,W);const ne=[];let ye=!0;this.interceptors.request.forEach(function(_e){typeof _e.runWhen=="function"&&_e.runWhen(k)===!1||(ye=ye&&_e.synchronous,ne.unshift(_e.fulfilled,_e.rejected))});const de=[];this.interceptors.response.forEach(function(_e){de.push(_e.fulfilled,_e.rejected)});let ue,we=0,Be;if(!ye){const fe=[ji.bind(this),void 0];for(fe.unshift(...ne),fe.push(...de),Be=fe.length,ue=Promise.resolve(k);we<Be;)ue=ue.then(fe[we++],fe[we++]);return ue}Be=ne.length;let ut=k;for(;we<Be;){const fe=ne[we++],_e=ne[we++];try{ut=fe(ut)}catch(ve){_e.call(this,ve);break}}try{ue=ji.call(this,ut)}catch(fe){return Promise.reject(fe)}for(we=0,Be=de.length;we<Be;)ue=ue.then(de[we++],de[we++]);return ue}getUri(T){T=nr(this.defaults,T);const k=wo(T.baseURL,T.url,T.allowAbsoluteUrls);return tn(k,T.params,T.paramsSerializer)}}J.forEach(["delete","get","head","options"],function(T){an.prototype[T]=function(k,L){return this.request(nr(L||{},{method:T,url:k,data:(L||{}).data}))}}),J.forEach(["post","put","patch"],function(T){function k(L){return function(W,F,ne){return this.request(nr(ne||{},{method:T,headers:L?{"Content-Type":"multipart/form-data"}:{},url:W,data:F}))}}an.prototype[T]=k(),an.prototype[T+"Form"]=k(!0)});var ls=an;class Zs{constructor(T){if(typeof T!="function")throw new TypeError("executor must be a function.");let k;this.promise=new Promise(function(W){k=W});const L=this;this.promise.then(j=>{if(!L._listeners)return;let W=L._listeners.length;for(;W-- >0;)L._listeners[W](j);L._listeners=null}),this.promise.then=j=>{let W;const F=new Promise(ne=>{L.subscribe(ne),W=ne}).then(j);return F.cancel=function(){L.unsubscribe(W)},F},T(function(W,F,ne){L.reason||(L.reason=new Rr(W,F,ne),k(L.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(T){if(this.reason){T(this.reason);return}this._listeners?this._listeners.push(T):this._listeners=[T]}unsubscribe(T){if(!this._listeners)return;const k=this._listeners.indexOf(T);k!==-1&&this._listeners.splice(k,1)}toAbortSignal(){const T=new AbortController,k=L=>{T.abort(L)};return this.subscribe(k),T.signal.unsubscribe=()=>this.unsubscribe(k),T.signal}static source(){let T;return{token:new Zs(function(j){T=j}),cancel:T}}}var To=Zs;function Di(E){return function(k){return E.apply(null,k)}}function Co(E){return J.isObject(E)&&E.isAxiosError===!0}const Is={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Is).forEach(([E,T])=>{Is[T]=E});var Kn=Is;function ei(E){const T=new ls(E),k=e(ls.prototype.request,T);return J.extend(k,ls.prototype,T,{allOwnKeys:!0}),J.extend(k,T,null,{allOwnKeys:!0}),k.create=function(j){return ei(nr(E,j))},k}const Ze=ei(xs);return Ze.Axios=ls,Ze.CanceledError=Rr,Ze.CancelToken=To,Ze.isCancel=go,Ze.VERSION=As,Ze.toFormData=xr,Ze.AxiosError=ke,Ze.Cancel=Ze.CanceledError,Ze.all=function(T){return Promise.all(T)},Ze.spread=Di,Ze.isAxiosError=Co,Ze.mergeConfig=nr,Ze.AxiosHeaders=Rt,Ze.formToJSON=E=>mo(J.isHTMLForm(E)?new FormData(E):E),Ze.getAdapter=cs.getAdapter,Ze.HttpStatusCode=Kn,Ze.default=Ze,ng=Ze,ng}const SN={},bN=Object.freeze(Object.defineProperty({__proto__:null,default:SN},Symbol.toStringTag,{value:"Module"})),Pn=yu(bN);var xb;function Rb(){if(xb)return An;xb=1;var e=An&&An.__createBinding||(Object.create?(function(p,h,u,m){m===void 0&&(m=u);var g=Object.getOwnPropertyDescriptor(h,u);(!g||("get"in g?!h.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return h[u]}}),Object.defineProperty(p,m,g)}):(function(p,h,u,m){m===void 0&&(m=u),p[m]=h[u]})),t=An&&An.__setModuleDefault||(Object.create?(function(p,h){Object.defineProperty(p,"default",{enumerable:!0,value:h})}):function(p,h){p.default=h}),n=An&&An.__importStar||(function(){var p=function(h){return p=Object.getOwnPropertyNames||function(u){var m=[];for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(m[m.length]=g);return m},p(h)};return function(h){if(h&&h.__esModule)return h;var u={};if(h!=null)for(var m=p(h),g=0;g<m.length;g++)m[g]!=="default"&&e(u,h,m[g]);return t(u,h),u}})(),s=An&&An.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(An,"__esModule",{value:!0}),An.AuthService=void 0;const c=s(Ti),i=pa(),o=ma(),l=s(fo());class f{constructor(h,u,m){this.config=h.config,this.cache=m,this.httpClient=h,this.apiClient=u,this.tokenValidationTTL=this.config.cache?.tokenValidationTTL||900,this.minValidationTTL=this.config.cache?.minValidationTTL||60}isApiKeyToken(h){return this.config.apiKey!==void 0&&h===this.config.apiKey}extractUserIdFromToken(h){try{const u=l.default.decode(h);return u?u.sub||u.userId||u.user_id||u.id:null}catch{return null}}getTokenCacheKey(h){return`token_validation:${c.default.createHash("sha256").update(h).digest("hex")}`}getCacheTtlFromToken(h){try{const m=l.default.decode(h);if(!m||typeof m.exp!="number")return this.tokenValidationTTL;const g=Math.floor(Date.now()/1e3),v=m.exp-g-30;return Math.max(this.minValidationTTL,Math.min(v,this.tokenValidationTTL))}catch{return this.tokenValidationTTL}}generateCorrelationId(){const h=Date.now(),u=Math.random().toString(36).substring(2,8);return`${this.config.clientId.substring(0,10)}-${h}-${u}`}async getEnvironmentToken(){const h=this.generateCorrelationId(),u=this.config.clientId;try{const m=(await Promise.resolve().then(()=>n(xx()))).default,g=(0,o.resolveControllerUrl)(this.config),v=this.config.clientTokenUri||"/api/v1/auth/token",S=`${g}${v}`,w=4e3,C=new AbortController,N=setTimeout(()=>{C.abort()},w),I=await Promise.resolve().then(()=>n(Pn)),R=await Promise.resolve().then(()=>n(Pn)),D=g.startsWith("https://"),A=D?new R.Agent({family:4,timeout:w}):new I.Agent({family:4,timeout:w}),O=m.create({baseURL:g,timeout:w,signal:C.signal,httpAgent:D?void 0:A,httpsAgent:D?A:void 0,headers:{"Content-Type":"application/json","x-client-id":this.config.clientId,"x-client-secret":this.config.clientSecret}});console.log(`[getEnvironmentToken] Calling controller: ${S} [correlationId: ${h}, clientId: ${u}]`);const x=O.post(v),M=new Promise((K,X)=>{setTimeout(()=>{X(new Error(`Request timeout after ${w}ms`))},w)});let G;try{G=await Promise.race([x,M]),clearTimeout(N),console.log(`[getEnvironmentToken] Successfully received response from controller [correlationId: ${h}]`)}catch(K){throw clearTimeout(N),console.error(`[getEnvironmentToken] Request failed: ${K instanceof Error?K.message:String(K)} [correlationId: ${h}]`),K}const V=G.data;let z;V?.data&&typeof V.data=="object"&&V.data!==null&&"data"in V.data&&typeof V.data.data=="object"&&V.data.data!==null&&"token"in V.data.data?z=V.data.data.token:V?.data&&typeof V.data=="object"&&V.data!==null&&"token"in V.data?z=V.data.token:V?.token&&typeof V.token=="string"&&(z=V.token);const q=V?.success===!0||V?.data&&typeof V.data=="object"&&V.data!==null&&"success"in V.data&&V.data.success===!0;if(G.status>=200&&G.status<300&&(q||z!==void 0)&&z)return console.log(`[getEnvironmentToken] Successfully received token from controller [correlationId: ${h}]`),z;const $=JSON.stringify({status:G.status,statusText:G.statusText,data:G.data,headers:G.headers});throw new Error(`Failed to get environment token: Invalid response format. Expected token in response. Full response: ${$} [correlationId: ${h}, clientId: ${u}]`)}catch(m){if(m&&typeof m=="object"&&"name"in m&&m.name==="AbortError"||m&&typeof m=="object"&&"code"in m&&m.code==="ECONNABORTED"||m instanceof Error&&(m.message.includes("aborted")||m.message.includes("timeout"))){const S=(0,o.resolveControllerUrl)(this.config),w=this.config.clientTokenUri||"/api/v1/auth/token";throw console.error(`[getEnvironmentToken] Request aborted/timeout: ${S}${w} [correlationId: ${h}, clientId: ${u}]`,m instanceof Error?m.message:String(m)),new Error(`Failed to get environment token: Request timeout or aborted. Controller: ${S}${w} [correlationId: ${h}, clientId: ${u}]`)}if(m&&typeof m=="object"&&"isAxiosError"in m&&m.isAxiosError){const S=m,w=[];if(S.response)w.push(`status: ${S.response.status}`),w.push(`statusText: ${S.response.statusText}`),w.push(`data: ${JSON.stringify(S.response.data)}`),S.response.headers&&w.push(`headers: ${JSON.stringify(S.response.headers)}`);else if(S.request){const N=(0,o.resolveControllerUrl)(this.config),I=this.config.clientTokenUri||"/api/v1/auth/token";console.error(`[getEnvironmentToken] Controller unreachable or timeout: ${N}${I} [correlationId: ${h}, clientId: ${u}]`,S.message),w.push("request: [Request object - not serializable]"),w.push(`message: ${S.message}`),w.push(`controllerUrl: ${N}`)}else w.push(`message: ${S.message}`);const C=new Error(`Failed to get environment token: ${S.message}. Full response: {${w.join(", ")}} [correlationId: ${h}, clientId: ${u}]`);throw C.cause=S,C}const v=m instanceof Error?m.message:"Unknown error";throw new Error(`Failed to get environment token: ${v} [correlationId: ${h}, clientId: ${u}]`)}}async login(h){const u=this.generateCorrelationId(),m=this.config.clientId;try{const g={redirect:h.redirect};h.state&&(g.state=h.state);const v=this.config.authStrategy,S=await this.apiClient.auth.login({redirect:h.redirect,state:h.state},v);return{success:S.success,data:{loginUrl:S.data.loginUrl,state:S.data.state||""},timestamp:S.timestamp}}catch(g){if(g instanceof i.MisoClientError){const S={statusCode:g.statusCode,message:g.message,errorResponse:g.errorResponse,errorBody:g.errorBody};throw new Error(`Login failed: ${g.message}. Full response: ${JSON.stringify(S)} [correlationId: ${u}, clientId: ${m}]`)}if(g&&typeof g=="object"&&"isAxiosError"in g&&g.isAxiosError){const S=g,w=[];throw S.response?(w.push(`status: ${S.response.status}`),w.push(`statusText: ${S.response.statusText}`),w.push(`data: ${JSON.stringify(S.response.data)}`),S.response.headers&&w.push(`headers: ${JSON.stringify(S.response.headers)}`)):S.request?(w.push("request: [Request object - not serializable]"),w.push(`message: ${S.message}`)):w.push(`message: ${S.message}`),new Error(`Login failed: ${S.message}. Full response: {${w.join(", ")}} [correlationId: ${u}, clientId: ${m}]`)}const v=g instanceof Error?g.message:"Unknown error";throw new Error(`Login failed: ${v} [correlationId: ${u}, clientId: ${m}]`)}}async validateToken(h,u){if(this.isApiKeyToken(h))return!0;try{const m=this.getTokenCacheKey(h),g=await this.cache.get(m);if(g)return g.authenticated;const v=u||this.config.authStrategy,S=v?{...v,bearerToken:h}:{methods:["bearer"],bearerToken:h},C=(await this.apiClient.auth.validateToken({token:h},S)).data?.authenticated||!1,N=this.getCacheTtlFromToken(h);return await this.cache.set(m,{authenticated:C,timestamp:Date.now()},N),C}catch{return!1}}async getUser(h,u){if(this.isApiKeyToken(h))return null;try{const m=u||this.config.authStrategy,g=m?{...m,bearerToken:h}:{methods:["bearer"],bearerToken:h},v=await this.apiClient.auth.validateToken({token:h},g);return v.data?.authenticated&&v.data.user?{id:v.data.user.id,username:v.data.user.username,email:v.data.user.email}:null}catch{return null}}async getUserInfo(h,u){if(this.isApiKeyToken(h))return null;try{const m=u||this.config.authStrategy,g=m?{...m,bearerToken:h}:{methods:["bearer"],bearerToken:h},v=await this.apiClient.auth.getUser(g);return v.data?.authenticated&&v.data.user?{id:v.data.user.id,username:v.data.user.username,email:v.data.user.email}:null}catch{return null}}clearTokenCache(h){try{const u=this.getTokenCacheKey(h);this.cache.delete(u)}catch(u){console.warn("Failed to clear token cache:",u)}}async logout(h){const u=this.generateCorrelationId(),m=this.config.clientId;try{const g=await this.apiClient.auth.logoutWithToken(h.token);return this.clearTokenCache(h.token),g}catch(g){if(g instanceof i.MisoClientError){if(g.statusCode===400){const w={statusCode:g.statusCode,message:g.message,errorResponse:g.errorResponse,errorBody:g.errorBody};return console.warn(`Logout: No active session or invalid request (400). Response: ${JSON.stringify(w)} [correlationId: ${u}, clientId: ${m}]`),this.clearTokenCache(h.token),{success:!0,message:"Logout successful (no active session)",timestamp:new Date().toISOString()}}const S={statusCode:g.statusCode,message:g.message,errorResponse:g.errorResponse,errorBody:g.errorBody};throw new Error(`Logout failed: ${g.message}. Full response: ${JSON.stringify(S)} [correlationId: ${u}, clientId: ${m}]`)}if(g&&typeof g=="object"&&"isAxiosError"in g&&g.isAxiosError){const S=g;if(S.response?.status===400){const C=S.response.data?JSON.stringify(S.response.data):"No response data";return console.warn(`Logout: No active session or invalid request (400). Response: ${C} [correlationId: ${u}, clientId: ${m}]`),this.clearTokenCache(h.token),{success:!0,message:"Logout successful (no active session)",timestamp:new Date().toISOString()}}const w=[];throw S.response?(w.push(`status: ${S.response.status}`),w.push(`statusText: ${S.response.statusText}`),w.push(`data: ${JSON.stringify(S.response.data)}`),S.response.headers&&w.push(`headers: ${JSON.stringify(S.response.headers)}`)):S.request?(w.push("request: [Request object - not serializable]"),w.push(`message: ${S.message}`)):w.push(`message: ${S.message}`),new Error(`Logout failed: ${S.message}. Full response: {${w.join(", ")}} [correlationId: ${u}, clientId: ${m}]`)}const v=g instanceof Error?g.message:"Unknown error";throw new Error(`Logout failed: ${v} [correlationId: ${u}, clientId: ${m}]`)}}async refreshToken(h,u){const m=this.generateCorrelationId(),g=this.config.clientId;try{const v=u||this.config.authStrategy,S=await this.apiClient.auth.refreshToken({refreshToken:h},v);return S.data?{success:S.success,accessToken:S.data.accessToken,refreshToken:S.data.refreshToken||h,expiresIn:S.data.expiresIn,expiresAt:S.timestamp,timestamp:S.timestamp}:null}catch(v){if(v instanceof i.MisoClientError){const w={statusCode:v.statusCode,message:v.message,errorResponse:v.errorResponse,errorBody:v.errorBody};return console.error(`Refresh token failed: ${v.message}. Full response: ${JSON.stringify(w)} [correlationId: ${m}, clientId: ${g}]`),null}if(v&&typeof v=="object"&&"isAxiosError"in v&&v.isAxiosError){const w=v,C=[];return w.response?(C.push(`status: ${w.response.status}`),C.push(`statusText: ${w.response.statusText}`),C.push(`data: ${JSON.stringify(w.response.data)}`),w.response.headers&&C.push(`headers: ${JSON.stringify(w.response.headers)}`)):w.request?(C.push("request: [Request object - not serializable]"),C.push(`message: ${w.message}`)):C.push(`message: ${w.message}`),console.error(`Refresh token failed: ${w.message}. Full response: {${C.join(", ")}} [correlationId: ${m}, clientId: ${g}]`),null}const S=v instanceof Error?v.message:"Unknown error";return console.error(`Refresh token failed: ${S} [correlationId: ${m}, clientId: ${g}]`),null}}async isAuthenticated(h,u){return this.validateToken(h,u)}}return An.AuthService=f,An}var Ko={},Zc={},Ba={},pi={},Pd={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var kb;function Eu(){return kb||(kb=1,(function(e,t){var n=oo,s=n.Buffer;function c(o,l){for(var f in o)l[f]=o[f]}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=n:(c(n,t),t.Buffer=i);function i(o,l,f){return s(o,l,f)}i.prototype=Object.create(s.prototype),c(s,i),i.from=function(o,l,f){if(typeof o=="number")throw new TypeError("Argument must not be a number");return s(o,l,f)},i.alloc=function(o,l,f){if(typeof o!="number")throw new TypeError("Argument must be a number");var p=s(o);return l!==void 0?typeof f=="string"?p.fill(l,f):p.fill(l):p.fill(0),p},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return s(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(Pd,Pd.exports)),Pd.exports}var sg,Ab;function Rx(){if(Ab)return sg;Ab=1;var e=Eu().Buffer,t=dc,n=uo;function s(c){if(this.buffer=null,this.writable=!0,this.readable=!0,!c)return this.buffer=e.alloc(0),this;if(typeof c.pipe=="function")return this.buffer=e.alloc(0),c.pipe(this),this;if(c.length||typeof c=="object")return this.buffer=c,this.writable=!1,process.nextTick(function(){this.emit("end",c),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof c+")")}return n.inherits(s,t),s.prototype.write=function(i){this.buffer=e.concat([this.buffer,e.from(i)]),this.emit("data",i)},s.prototype.end=function(i){i&&this.write(i),this.emit("end",i),this.emit("close"),this.writable=!1,this.readable=!1},sg=s,sg}var ig,Ib;function TN(){if(Ib)return ig;Ib=1;function e(s){var c=(s/8|0)+(s%8===0?0:1);return c}var t={ES256:e(256),ES384:e(384),ES512:e(521)};function n(s){var c=t[s];if(c)return c;throw new Error('Unknown algorithm "'+s+'"')}return ig=n,ig}var og,Pb;function CN(){if(Pb)return og;Pb=1;var e=Eu().Buffer,t=TN(),n=128,s=0,c=32,i=16,o=2,l=i|c|s<<6,f=o|s<<6;function p(v){return v.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function h(v){if(e.isBuffer(v))return v;if(typeof v=="string")return e.from(v,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function u(v,S){v=h(v);var w=t(S),C=w+1,N=v.length,I=0;if(v[I++]!==l)throw new Error('Could not find expected "seq"');var R=v[I++];if(R===(n|1)&&(R=v[I++]),N-I<R)throw new Error('"seq" specified length of "'+R+'", only "'+(N-I)+'" remaining');if(v[I++]!==f)throw new Error('Could not find expected "int" for "r"');var D=v[I++];if(N-I-2<D)throw new Error('"r" specified length of "'+D+'", only "'+(N-I-2)+'" available');if(C<D)throw new Error('"r" specified length of "'+D+'", max of "'+C+'" is acceptable');var A=I;if(I+=D,v[I++]!==f)throw new Error('Could not find expected "int" for "s"');var O=v[I++];if(N-I!==O)throw new Error('"s" specified length of "'+O+'", expected "'+(N-I)+'"');if(C<O)throw new Error('"s" specified length of "'+O+'", max of "'+C+'" is acceptable');var x=I;if(I+=O,I!==N)throw new Error('Expected to consume entire buffer, but "'+(N-I)+'" bytes remain');var M=w-D,G=w-O,V=e.allocUnsafe(M+D+G+O);for(I=0;I<M;++I)V[I]=0;v.copy(V,I,A+Math.max(-M,0),A+D),I=w;for(var z=I;I<z+G;++I)V[I]=0;return v.copy(V,I,x+Math.max(-G,0),x+O),V=V.toString("base64"),V=p(V),V}function m(v,S,w){for(var C=0;S+C<w&&v[S+C]===0;)++C;var N=v[S+C]>=n;return N&&--C,C}function g(v,S){v=h(v);var w=t(S),C=v.length;if(C!==w*2)throw new TypeError('"'+S+'" signatures must be "'+w*2+'" bytes, saw "'+C+'"');var N=m(v,0,w),I=m(v,w,v.length),R=w-N,D=w-I,A=2+R+1+1+D,O=A<n,x=e.allocUnsafe((O?2:3)+A),M=0;return x[M++]=l,O?x[M++]=A:(x[M++]=n|1,x[M++]=A&255),x[M++]=f,x[M++]=R,N<0?(x[M++]=0,M+=v.copy(x,M,0,w)):M+=v.copy(x,M,N,w),x[M++]=f,x[M++]=D,I<0?(x[M++]=0,v.copy(x,M,w)):v.copy(x,M,w+I),x}return og={derToJose:u,joseToDer:g},og}var ag,Ob;function _N(){if(Ob)return ag;Ob=1;var e=oo.Buffer,t=oo.SlowBuffer;ag=n;function n(i,o){if(!e.isBuffer(i)||!e.isBuffer(o)||i.length!==o.length)return!1;for(var l=0,f=0;f<i.length;f++)l|=i[f]^o[f];return l===0}n.install=function(){e.prototype.equal=t.prototype.equal=function(o){return n(this,o)}};var s=e.prototype.equal,c=t.prototype.equal;return n.restore=function(){e.prototype.equal=s,t.prototype.equal=c},ag}var cg,Nb;function kx(){if(Nb)return cg;Nb=1;var e=Eu().Buffer,t=Ti,n=CN(),s=uo,c=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,i="secret must be a string or buffer",o="key must be a string or a buffer",l="key must be a string, a buffer or an object",f=typeof t.createPublicKey=="function";f&&(o+=" or a KeyObject",i+="or a KeyObject");function p(q){if(!e.isBuffer(q)&&typeof q!="string"&&(!f||typeof q!="object"||typeof q.type!="string"||typeof q.asymmetricKeyType!="string"||typeof q.export!="function"))throw v(o)}function h(q){if(!e.isBuffer(q)&&typeof q!="string"&&typeof q!="object")throw v(l)}function u(q){if(!e.isBuffer(q)){if(typeof q=="string")return q;if(!f||typeof q!="object"||q.type!=="secret"||typeof q.export!="function")throw v(i)}}function m(q){return q.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function g(q){q=q.toString();var H=4-q.length%4;if(H!==4)for(var $=0;$<H;++$)q+="=";return q.replace(/\-/g,"+").replace(/_/g,"/")}function v(q){var H=[].slice.call(arguments,1),$=s.format.bind(s,q).apply(null,H);return new TypeError($)}function S(q){return e.isBuffer(q)||typeof q=="string"}function w(q){return S(q)||(q=JSON.stringify(q)),q}function C(q){return function($,K){u(K),$=w($);var X=t.createHmac("sha"+q,K),B=(X.update($),X.digest("base64"));return m(B)}}var N,I="timingSafeEqual"in t?function(H,$){return H.byteLength!==$.byteLength?!1:t.timingSafeEqual(H,$)}:function(H,$){return N||(N=_N()),N(H,$)};function R(q){return function($,K,X){var B=C(q)($,X);return I(e.from(K),e.from(B))}}function D(q){return function($,K){h(K),$=w($);var X=t.createSign("RSA-SHA"+q),B=(X.update($),X.sign(K,"base64"));return m(B)}}function A(q){return function($,K,X){p(X),$=w($),K=g(K);var B=t.createVerify("RSA-SHA"+q);return B.update($),B.verify(X,K,"base64")}}function O(q){return function($,K){h(K),$=w($);var X=t.createSign("RSA-SHA"+q),B=(X.update($),X.sign({key:K,padding:t.constants.RSA_PKCS1_PSS_PADDING,saltLength:t.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return m(B)}}function x(q){return function($,K,X){p(X),$=w($),K=g(K);var B=t.createVerify("RSA-SHA"+q);return B.update($),B.verify({key:X,padding:t.constants.RSA_PKCS1_PSS_PADDING,saltLength:t.constants.RSA_PSS_SALTLEN_DIGEST},K,"base64")}}function M(q){var H=D(q);return function(){var K=H.apply(null,arguments);return K=n.derToJose(K,"ES"+q),K}}function G(q){var H=A(q);return function(K,X,B){X=n.joseToDer(X,"ES"+q).toString("base64");var te=H(K,X,B);return te}}function V(){return function(){return""}}function z(){return function(H,$){return $===""}}return cg=function(H){var $={hs:C,rs:D,ps:O,es:M,none:V},K={hs:R,rs:A,ps:x,es:G,none:z},X=H.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!X)throw v(c,H);var B=(X[1]||X[3]).toLowerCase(),te=X[2];return{sign:$[B](te),verify:K[B](te)}},cg}var lg,Lb;function Ax(){if(Lb)return lg;Lb=1;var e=oo.Buffer;return lg=function(n){return typeof n=="string"?n:typeof n=="number"||e.isBuffer(n)?n.toString():JSON.stringify(n)},lg}var ug,jb;function xN(){if(jb)return ug;jb=1;var e=Eu().Buffer,t=Rx(),n=kx(),s=dc,c=Ax(),i=uo;function o(h,u){return e.from(h,u).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function l(h,u,m){m=m||"utf8";var g=o(c(h),"binary"),v=o(c(u),m);return i.format("%s.%s",g,v)}function f(h){var u=h.header,m=h.payload,g=h.secret||h.privateKey,v=h.encoding,S=n(u.alg),w=l(u,m,v),C=S.sign(w,g);return i.format("%s.%s",w,C)}function p(h){var u=h.secret||h.privateKey||h.key,m=new t(u);this.readable=!0,this.header=h.header,this.encoding=h.encoding,this.secret=this.privateKey=this.key=m,this.payload=new t(h.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}return i.inherits(p,s),p.prototype.sign=function(){try{var u=f({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",u),this.emit("data",u),this.emit("end"),this.readable=!1,u}catch(m){this.readable=!1,this.emit("error",m),this.emit("close")}},p.sign=f,ug=p,ug}var dg,Db;function RN(){if(Db)return dg;Db=1;var e=Eu().Buffer,t=Rx(),n=kx(),s=dc,c=Ax(),i=uo,o=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function l(C){return Object.prototype.toString.call(C)==="[object Object]"}function f(C){if(l(C))return C;try{return JSON.parse(C)}catch{return}}function p(C){var N=C.split(".",1)[0];return f(e.from(N,"base64").toString("binary"))}function h(C){return C.split(".",2).join(".")}function u(C){return C.split(".")[2]}function m(C,N){N=N||"utf8";var I=C.split(".")[1];return e.from(I,"base64").toString(N)}function g(C){return o.test(C)&&!!p(C)}function v(C,N,I){if(!N){var R=new Error("Missing algorithm parameter for jws.verify");throw R.code="MISSING_ALGORITHM",R}C=c(C);var D=u(C),A=h(C),O=n(N);return O.verify(A,D,I)}function S(C,N){if(N=N||{},C=c(C),!g(C))return null;var I=p(C);if(!I)return null;var R=m(C);return(I.typ==="JWT"||N.json)&&(R=JSON.parse(R,N.encoding)),{header:I,payload:R,signature:u(C)}}function w(C){C=C||{};var N=C.secret||C.publicKey||C.key,I=new t(N);this.readable=!0,this.algorithm=C.algorithm,this.encoding=C.encoding,this.secret=this.publicKey=this.key=I,this.signature=new t(C.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}return i.inherits(w,s),w.prototype.verify=function(){try{var N=v(this.signature.buffer,this.algorithm,this.key.buffer),I=S(this.signature.buffer,this.encoding);return this.emit("done",N,I),this.emit("data",N),this.emit("end"),this.readable=!1,N}catch(R){this.readable=!1,this.emit("error",R),this.emit("close")}},w.decode=S,w.isValid=g,w.verify=v,dg=w,dg}var $b;function Ov(){if($b)return pi;$b=1;var e=xN(),t=RN(),n=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];return pi.ALGORITHMS=n,pi.sign=e.sign,pi.verify=t.verify,pi.decode=t.decode,pi.isValid=t.isValid,pi.createSign=function(c){return new e(c)},pi.createVerify=function(c){return new t(c)},pi}var fg,Ub;function Ix(){if(Ub)return fg;Ub=1;var e=Ov();return fg=function(t,n){n=n||{};var s=e.decode(t,n);if(!s)return null;var c=s.payload;if(typeof c=="string")try{var i=JSON.parse(c);i!==null&&typeof i=="object"&&(c=i)}catch{}return n.complete===!0?{header:s.header,payload:c,signature:s.signature}:c},fg}var hg,qb;function Df(){if(qb)return hg;qb=1;var e=function(t,n){Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=t,n&&(this.inner=n)};return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,hg=e,hg}var pg,Mb;function Px(){if(Mb)return pg;Mb=1;var e=Df(),t=function(n,s){e.call(this,n),this.name="NotBeforeError",this.date=s};return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,pg=t,pg}var mg,Hb;function Ox(){if(Hb)return mg;Hb=1;var e=Df(),t=function(n,s){e.call(this,n),this.name="TokenExpiredError",this.expiredAt=s};return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,mg=t,mg}var gg,Fb;function kN(){if(Fb)return gg;Fb=1;var e=1e3,t=e*60,n=t*60,s=n*24,c=s*7,i=s*365.25;gg=function(h,u){u=u||{};var m=typeof h;if(m==="string"&&h.length>0)return o(h);if(m==="number"&&isFinite(h))return u.long?f(h):l(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))};function o(h){if(h=String(h),!(h.length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);if(u){var m=parseFloat(u[1]),g=(u[2]||"ms").toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return m*i;case"weeks":case"week":case"w":return m*c;case"days":case"day":case"d":return m*s;case"hours":case"hour":case"hrs":case"hr":case"h":return m*n;case"minutes":case"minute":case"mins":case"min":case"m":return m*t;case"seconds":case"second":case"secs":case"sec":case"s":return m*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function l(h){var u=Math.abs(h);return u>=s?Math.round(h/s)+"d":u>=n?Math.round(h/n)+"h":u>=t?Math.round(h/t)+"m":u>=e?Math.round(h/e)+"s":h+"ms"}function f(h){var u=Math.abs(h);return u>=s?p(h,u,s,"day"):u>=n?p(h,u,n,"hour"):u>=t?p(h,u,t,"minute"):u>=e?p(h,u,e,"second"):h+" ms"}function p(h,u,m,g){var v=u>=m*1.5;return Math.round(h/m)+" "+g+(v?"s":"")}return gg}var yg,Wb;function Nx(){if(Wb)return yg;Wb=1;var e=kN();return yg=function(t,n){var s=n||Math.floor(Date.now()/1e3);if(typeof t=="string"){var c=e(t);return typeof c>"u"?void 0:Math.floor(s+c/1e3)}else return typeof t=="number"?s+t:void 0},yg}var Od={exports:{}},vg,Kb;function $f(){if(Kb)return vg;Kb=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,s=16,c=t-6;return vg={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:s,MAX_SAFE_BUILD_LENGTH:c,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},vg}var wg,Bb;function Uf(){if(Bb)return wg;Bb=1;var e={};return wg=typeof process=="object"&&e&&e.NODE_DEBUG&&/\bsemver\b/i.test(e.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},wg}var zb;function Su(){return zb||(zb=1,(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:s,MAX_LENGTH:c}=$f(),i=Uf();t=e.exports={};const o=t.re=[],l=t.safeRe=[],f=t.src=[],p=t.safeSrc=[],h=t.t={};let u=0;const m="[a-zA-Z0-9-]",g=[["\\s",1],["\\d",c],[m,s]],v=w=>{for(const[C,N]of g)w=w.split(`${C}*`).join(`${C}{0,${N}}`).split(`${C}+`).join(`${C}{1,${N}}`);return w},S=(w,C,N)=>{const I=v(C),R=u++;i(w,R,C),h[w]=R,f[R]=C,p[R]=I,o[R]=new RegExp(C,N?"g":void 0),l[R]=new RegExp(I,N?"g":void 0)};S("NUMERICIDENTIFIER","0|[1-9]\\d*"),S("NUMERICIDENTIFIERLOOSE","\\d+"),S("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${m}*`),S("MAINVERSION",`(${f[h.NUMERICIDENTIFIER]})\\.(${f[h.NUMERICIDENTIFIER]})\\.(${f[h.NUMERICIDENTIFIER]})`),S("MAINVERSIONLOOSE",`(${f[h.NUMERICIDENTIFIERLOOSE]})\\.(${f[h.NUMERICIDENTIFIERLOOSE]})\\.(${f[h.NUMERICIDENTIFIERLOOSE]})`),S("PRERELEASEIDENTIFIER",`(?:${f[h.NONNUMERICIDENTIFIER]}|${f[h.NUMERICIDENTIFIER]})`),S("PRERELEASEIDENTIFIERLOOSE",`(?:${f[h.NONNUMERICIDENTIFIER]}|${f[h.NUMERICIDENTIFIERLOOSE]})`),S("PRERELEASE",`(?:-(${f[h.PRERELEASEIDENTIFIER]}(?:\\.${f[h.PRERELEASEIDENTIFIER]})*))`),S("PRERELEASELOOSE",`(?:-?(${f[h.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${f[h.PRERELEASEIDENTIFIERLOOSE]})*))`),S("BUILDIDENTIFIER",`${m}+`),S("BUILD",`(?:\\+(${f[h.BUILDIDENTIFIER]}(?:\\.${f[h.BUILDIDENTIFIER]})*))`),S("FULLPLAIN",`v?${f[h.MAINVERSION]}${f[h.PRERELEASE]}?${f[h.BUILD]}?`),S("FULL",`^${f[h.FULLPLAIN]}$`),S("LOOSEPLAIN",`[v=\\s]*${f[h.MAINVERSIONLOOSE]}${f[h.PRERELEASELOOSE]}?${f[h.BUILD]}?`),S("LOOSE",`^${f[h.LOOSEPLAIN]}$`),S("GTLT","((?:<|>)?=?)"),S("XRANGEIDENTIFIERLOOSE",`${f[h.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),S("XRANGEIDENTIFIER",`${f[h.NUMERICIDENTIFIER]}|x|X|\\*`),S("XRANGEPLAIN",`[v=\\s]*(${f[h.XRANGEIDENTIFIER]})(?:\\.(${f[h.XRANGEIDENTIFIER]})(?:\\.(${f[h.XRANGEIDENTIFIER]})(?:${f[h.PRERELEASE]})?${f[h.BUILD]}?)?)?`),S("XRANGEPLAINLOOSE",`[v=\\s]*(${f[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${f[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${f[h.XRANGEIDENTIFIERLOOSE]})(?:${f[h.PRERELEASELOOSE]})?${f[h.BUILD]}?)?)?`),S("XRANGE",`^${f[h.GTLT]}\\s*${f[h.XRANGEPLAIN]}$`),S("XRANGELOOSE",`^${f[h.GTLT]}\\s*${f[h.XRANGEPLAINLOOSE]}$`),S("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),S("COERCE",`${f[h.COERCEPLAIN]}(?:$|[^\\d])`),S("COERCEFULL",f[h.COERCEPLAIN]+`(?:${f[h.PRERELEASE]})?(?:${f[h.BUILD]})?(?:$|[^\\d])`),S("COERCERTL",f[h.COERCE],!0),S("COERCERTLFULL",f[h.COERCEFULL],!0),S("LONETILDE","(?:~>?)"),S("TILDETRIM",`(\\s*)${f[h.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",S("TILDE",`^${f[h.LONETILDE]}${f[h.XRANGEPLAIN]}$`),S("TILDELOOSE",`^${f[h.LONETILDE]}${f[h.XRANGEPLAINLOOSE]}$`),S("LONECARET","(?:\\^)"),S("CARETTRIM",`(\\s*)${f[h.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",S("CARET",`^${f[h.LONECARET]}${f[h.XRANGEPLAIN]}$`),S("CARETLOOSE",`^${f[h.LONECARET]}${f[h.XRANGEPLAINLOOSE]}$`),S("COMPARATORLOOSE",`^${f[h.GTLT]}\\s*(${f[h.LOOSEPLAIN]})$|^$`),S("COMPARATOR",`^${f[h.GTLT]}\\s*(${f[h.FULLPLAIN]})$|^$`),S("COMPARATORTRIM",`(\\s*)${f[h.GTLT]}\\s*(${f[h.LOOSEPLAIN]}|${f[h.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",S("HYPHENRANGE",`^\\s*(${f[h.XRANGEPLAIN]})\\s+-\\s+(${f[h.XRANGEPLAIN]})\\s*$`),S("HYPHENRANGELOOSE",`^\\s*(${f[h.XRANGEPLAINLOOSE]})\\s+-\\s+(${f[h.XRANGEPLAINLOOSE]})\\s*$`),S("STAR","(<|>)?=?\\s*\\*"),S("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),S("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Od,Od.exports)),Od.exports}var Eg,Gb;function Nv(){if(Gb)return Eg;Gb=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return Eg=s=>s?typeof s!="object"?e:s:t,Eg}var Sg,Jb;function Lx(){if(Jb)return Sg;Jb=1;const e=/^[0-9]+$/,t=(s,c)=>{if(typeof s=="number"&&typeof c=="number")return s===c?0:s<c?-1:1;const i=e.test(s),o=e.test(c);return i&&o&&(s=+s,c=+c),s===c?0:i&&!o?-1:o&&!i?1:s<c?-1:1};return Sg={compareIdentifiers:t,rcompareIdentifiers:(s,c)=>t(c,s)},Sg}var bg,Vb;function Zr(){if(Vb)return bg;Vb=1;const e=Uf(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=$f(),{safeRe:s,t:c}=Su(),i=Nv(),{compareIdentifiers:o}=Lx();class l{constructor(p,h){if(h=i(h),p instanceof l){if(p.loose===!!h.loose&&p.includePrerelease===!!h.includePrerelease)return p;p=p.version}else if(typeof p!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof p}".`);if(p.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",p,h),this.options=h,this.loose=!!h.loose,this.includePrerelease=!!h.includePrerelease;const u=p.trim().match(h.loose?s[c.LOOSE]:s[c.FULL]);if(!u)throw new TypeError(`Invalid Version: ${p}`);if(this.raw=p,this.major=+u[1],this.minor=+u[2],this.patch=+u[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");u[4]?this.prerelease=u[4].split(".").map(m=>{if(/^[0-9]+$/.test(m)){const g=+m;if(g>=0&&g<n)return g}return m}):this.prerelease=[],this.build=u[5]?u[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(p){if(e("SemVer.compare",this.version,this.options,p),!(p instanceof l)){if(typeof p=="string"&&p===this.version)return 0;p=new l(p,this.options)}return p.version===this.version?0:this.compareMain(p)||this.comparePre(p)}compareMain(p){return p instanceof l||(p=new l(p,this.options)),this.major<p.major?-1:this.major>p.major?1:this.minor<p.minor?-1:this.minor>p.minor?1:this.patch<p.patch?-1:this.patch>p.patch?1:0}comparePre(p){if(p instanceof l||(p=new l(p,this.options)),this.prerelease.length&&!p.prerelease.length)return-1;if(!this.prerelease.length&&p.prerelease.length)return 1;if(!this.prerelease.length&&!p.prerelease.length)return 0;let h=0;do{const u=this.prerelease[h],m=p.prerelease[h];if(e("prerelease compare",h,u,m),u===void 0&&m===void 0)return 0;if(m===void 0)return 1;if(u===void 0)return-1;if(u===m)continue;return o(u,m)}while(++h)}compareBuild(p){p instanceof l||(p=new l(p,this.options));let h=0;do{const u=this.build[h],m=p.build[h];if(e("build compare",h,u,m),u===void 0&&m===void 0)return 0;if(m===void 0)return 1;if(u===void 0)return-1;if(u===m)continue;return o(u,m)}while(++h)}inc(p,h,u){if(p.startsWith("pre")){if(!h&&u===!1)throw new Error("invalid increment argument: identifier is empty");if(h){const m=`-${h}`.match(this.options.loose?s[c.PRERELEASELOOSE]:s[c.PRERELEASE]);if(!m||m[1]!==h)throw new Error(`invalid identifier: ${h}`)}}switch(p){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",h,u);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",h,u);break;case"prepatch":this.prerelease.length=0,this.inc("patch",h,u),this.inc("pre",h,u);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",h,u),this.inc("pre",h,u);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const m=Number(u)?1:0;if(this.prerelease.length===0)this.prerelease=[m];else{let g=this.prerelease.length;for(;--g>=0;)typeof this.prerelease[g]=="number"&&(this.prerelease[g]++,g=-2);if(g===-1){if(h===this.prerelease.join(".")&&u===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(m)}}if(h){let g=[h,m];u===!1&&(g=[h]),o(this.prerelease[0],h)===0?isNaN(this.prerelease[1])&&(this.prerelease=g):this.prerelease=g}break}default:throw new Error(`invalid increment argument: ${p}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return bg=l,bg}var Tg,Xb;function hc(){if(Xb)return Tg;Xb=1;const e=Zr();return Tg=(n,s,c=!1)=>{if(n instanceof e)return n;try{return new e(n,s)}catch(i){if(!c)return null;throw i}},Tg}var Cg,Yb;function AN(){if(Yb)return Cg;Yb=1;const e=hc();return Cg=(n,s)=>{const c=e(n,s);return c?c.version:null},Cg}var _g,Qb;function IN(){if(Qb)return _g;Qb=1;const e=hc();return _g=(n,s)=>{const c=e(n.trim().replace(/^[=v]+/,""),s);return c?c.version:null},_g}var xg,Zb;function PN(){if(Zb)return xg;Zb=1;const e=Zr();return xg=(n,s,c,i,o)=>{typeof c=="string"&&(o=i,i=c,c=void 0);try{return new e(n instanceof e?n.version:n,c).inc(s,i,o).version}catch{return null}},xg}var Rg,eT;function ON(){if(eT)return Rg;eT=1;const e=hc();return Rg=(n,s)=>{const c=e(n,null,!0),i=e(s,null,!0),o=c.compare(i);if(o===0)return null;const l=o>0,f=l?c:i,p=l?i:c,h=!!f.prerelease.length;if(!!p.prerelease.length&&!h){if(!p.patch&&!p.minor)return"major";if(p.compareMain(f)===0)return p.minor&&!p.patch?"minor":"patch"}const m=h?"pre":"";return c.major!==i.major?m+"major":c.minor!==i.minor?m+"minor":c.patch!==i.patch?m+"patch":"prerelease"},Rg}var kg,tT;function NN(){if(tT)return kg;tT=1;const e=Zr();return kg=(n,s)=>new e(n,s).major,kg}var Ag,rT;function LN(){if(rT)return Ag;rT=1;const e=Zr();return Ag=(n,s)=>new e(n,s).minor,Ag}var Ig,nT;function jN(){if(nT)return Ig;nT=1;const e=Zr();return Ig=(n,s)=>new e(n,s).patch,Ig}var Pg,sT;function DN(){if(sT)return Pg;sT=1;const e=hc();return Pg=(n,s)=>{const c=e(n,s);return c&&c.prerelease.length?c.prerelease:null},Pg}var Og,iT;function Ts(){if(iT)return Og;iT=1;const e=Zr();return Og=(n,s,c)=>new e(n,c).compare(new e(s,c)),Og}var Ng,oT;function $N(){if(oT)return Ng;oT=1;const e=Ts();return Ng=(n,s,c)=>e(s,n,c),Ng}var Lg,aT;function UN(){if(aT)return Lg;aT=1;const e=Ts();return Lg=(n,s)=>e(n,s,!0),Lg}var jg,cT;function Lv(){if(cT)return jg;cT=1;const e=Zr();return jg=(n,s,c)=>{const i=new e(n,c),o=new e(s,c);return i.compare(o)||i.compareBuild(o)},jg}var Dg,lT;function qN(){if(lT)return Dg;lT=1;const e=Lv();return Dg=(n,s)=>n.sort((c,i)=>e(c,i,s)),Dg}var $g,uT;function MN(){if(uT)return $g;uT=1;const e=Lv();return $g=(n,s)=>n.sort((c,i)=>e(i,c,s)),$g}var Ug,dT;function qf(){if(dT)return Ug;dT=1;const e=Ts();return Ug=(n,s,c)=>e(n,s,c)>0,Ug}var qg,fT;function jv(){if(fT)return qg;fT=1;const e=Ts();return qg=(n,s,c)=>e(n,s,c)<0,qg}var Mg,hT;function jx(){if(hT)return Mg;hT=1;const e=Ts();return Mg=(n,s,c)=>e(n,s,c)===0,Mg}var Hg,pT;function Dx(){if(pT)return Hg;pT=1;const e=Ts();return Hg=(n,s,c)=>e(n,s,c)!==0,Hg}var Fg,mT;function Dv(){if(mT)return Fg;mT=1;const e=Ts();return Fg=(n,s,c)=>e(n,s,c)>=0,Fg}var Wg,gT;function $v(){if(gT)return Wg;gT=1;const e=Ts();return Wg=(n,s,c)=>e(n,s,c)<=0,Wg}var Kg,yT;function $x(){if(yT)return Kg;yT=1;const e=jx(),t=Dx(),n=qf(),s=Dv(),c=jv(),i=$v();return Kg=(l,f,p,h)=>{switch(f){case"===":return typeof l=="object"&&(l=l.version),typeof p=="object"&&(p=p.version),l===p;case"!==":return typeof l=="object"&&(l=l.version),typeof p=="object"&&(p=p.version),l!==p;case"":case"=":case"==":return e(l,p,h);case"!=":return t(l,p,h);case">":return n(l,p,h);case">=":return s(l,p,h);case"<":return c(l,p,h);case"<=":return i(l,p,h);default:throw new TypeError(`Invalid operator: ${f}`)}},Kg}var Bg,vT;function HN(){if(vT)return Bg;vT=1;const e=Zr(),t=hc(),{safeRe:n,t:s}=Su();return Bg=(i,o)=>{if(i instanceof e)return i;if(typeof i=="number"&&(i=String(i)),typeof i!="string")return null;o=o||{};let l=null;if(!o.rtl)l=i.match(o.includePrerelease?n[s.COERCEFULL]:n[s.COERCE]);else{const g=o.includePrerelease?n[s.COERCERTLFULL]:n[s.COERCERTL];let v;for(;(v=g.exec(i))&&(!l||l.index+l[0].length!==i.length);)(!l||v.index+v[0].length!==l.index+l[0].length)&&(l=v),g.lastIndex=v.index+v[1].length+v[2].length;g.lastIndex=-1}if(l===null)return null;const f=l[2],p=l[3]||"0",h=l[4]||"0",u=o.includePrerelease&&l[5]?`-${l[5]}`:"",m=o.includePrerelease&&l[6]?`+${l[6]}`:"";return t(`${f}.${p}.${h}${u}${m}`,o)},Bg}var zg,wT;function FN(){if(wT)return zg;wT=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const s=this.map.get(n);if(s!==void 0)return this.map.delete(n),this.map.set(n,s),s}delete(n){return this.map.delete(n)}set(n,s){if(!this.delete(n)&&s!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(n,s)}return this}}return zg=e,zg}var Gg,ET;function Cs(){if(ET)return Gg;ET=1;const e=/\s+/g;class t{constructor($,K){if(K=c(K),$ instanceof t)return $.loose===!!K.loose&&$.includePrerelease===!!K.includePrerelease?$:new t($.raw,K);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.formatted=void 0,this;if(this.options=K,this.loose=!!K.loose,this.includePrerelease=!!K.includePrerelease,this.raw=$.trim().replace(e," "),this.set=this.raw.split("||").map(X=>this.parseRange(X.trim())).filter(X=>X.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const X=this.set[0];if(this.set=this.set.filter(B=>!S(B[0])),this.set.length===0)this.set=[X];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&w(B[0])){this.set=[B];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let $=0;$<this.set.length;$++){$>0&&(this.formatted+="||");const K=this.set[$];for(let X=0;X<K.length;X++)X>0&&(this.formatted+=" "),this.formatted+=K[X].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange($){const X=((this.options.includePrerelease&&g)|(this.options.loose&&v))+":"+$,B=s.get(X);if(B)return B;const te=this.options.loose,ae=te?f[p.HYPHENRANGELOOSE]:f[p.HYPHENRANGE];$=$.replace(ae,z(this.options.includePrerelease)),o("hyphen replace",$),$=$.replace(f[p.COMPARATORTRIM],h),o("comparator trim",$),$=$.replace(f[p.TILDETRIM],u),o("tilde trim",$),$=$.replace(f[p.CARETTRIM],m),o("caret trim",$);let Z=$.split(" ").map(re=>N(re,this.options)).join(" ").split(/\s+/).map(re=>V(re,this.options));te&&(Z=Z.filter(re=>(o("loose invalid filter",re,this.options),!!re.match(f[p.COMPARATORLOOSE])))),o("range list",Z);const oe=new Map,ce=Z.map(re=>new i(re,this.options));for(const re of ce){if(S(re))return[re];oe.set(re.value,re)}oe.size>1&&oe.has("")&&oe.delete("");const Y=[...oe.values()];return s.set(X,Y),Y}intersects($,K){if(!($ instanceof t))throw new TypeError("a Range is required");return this.set.some(X=>C(X,K)&&$.set.some(B=>C(B,K)&&X.every(te=>B.every(ae=>te.intersects(ae,K)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new l($,this.options)}catch{return!1}for(let K=0;K<this.set.length;K++)if(q(this.set[K],$,this.options))return!0;return!1}}Gg=t;const n=FN(),s=new n,c=Nv(),i=Mf(),o=Uf(),l=Zr(),{safeRe:f,t:p,comparatorTrimReplace:h,tildeTrimReplace:u,caretTrimReplace:m}=Su(),{FLAG_INCLUDE_PRERELEASE:g,FLAG_LOOSE:v}=$f(),S=H=>H.value==="<0.0.0-0",w=H=>H.value==="",C=(H,$)=>{let K=!0;const X=H.slice();let B=X.pop();for(;K&&X.length;)K=X.every(te=>B.intersects(te,$)),B=X.pop();return K},N=(H,$)=>(H=H.replace(f[p.BUILD],""),o("comp",H,$),H=A(H,$),o("caret",H),H=R(H,$),o("tildes",H),H=x(H,$),o("xrange",H),H=G(H,$),o("stars",H),H),I=H=>!H||H.toLowerCase()==="x"||H==="*",R=(H,$)=>H.trim().split(/\s+/).map(K=>D(K,$)).join(" "),D=(H,$)=>{const K=$.loose?f[p.TILDELOOSE]:f[p.TILDE];return H.replace(K,(X,B,te,ae,Z)=>{o("tilde",H,X,B,te,ae,Z);let oe;return I(B)?oe="":I(te)?oe=`>=${B}.0.0 <${+B+1}.0.0-0`:I(ae)?oe=`>=${B}.${te}.0 <${B}.${+te+1}.0-0`:Z?(o("replaceTilde pr",Z),oe=`>=${B}.${te}.${ae}-${Z} <${B}.${+te+1}.0-0`):oe=`>=${B}.${te}.${ae} <${B}.${+te+1}.0-0`,o("tilde return",oe),oe})},A=(H,$)=>H.trim().split(/\s+/).map(K=>O(K,$)).join(" "),O=(H,$)=>{o("caret",H,$);const K=$.loose?f[p.CARETLOOSE]:f[p.CARET],X=$.includePrerelease?"-0":"";return H.replace(K,(B,te,ae,Z,oe)=>{o("caret",H,B,te,ae,Z,oe);let ce;return I(te)?ce="":I(ae)?ce=`>=${te}.0.0${X} <${+te+1}.0.0-0`:I(Z)?te==="0"?ce=`>=${te}.${ae}.0${X} <${te}.${+ae+1}.0-0`:ce=`>=${te}.${ae}.0${X} <${+te+1}.0.0-0`:oe?(o("replaceCaret pr",oe),te==="0"?ae==="0"?ce=`>=${te}.${ae}.${Z}-${oe} <${te}.${ae}.${+Z+1}-0`:ce=`>=${te}.${ae}.${Z}-${oe} <${te}.${+ae+1}.0-0`:ce=`>=${te}.${ae}.${Z}-${oe} <${+te+1}.0.0-0`):(o("no pr"),te==="0"?ae==="0"?ce=`>=${te}.${ae}.${Z}${X} <${te}.${ae}.${+Z+1}-0`:ce=`>=${te}.${ae}.${Z}${X} <${te}.${+ae+1}.0-0`:ce=`>=${te}.${ae}.${Z} <${+te+1}.0.0-0`),o("caret return",ce),ce})},x=(H,$)=>(o("replaceXRanges",H,$),H.split(/\s+/).map(K=>M(K,$)).join(" ")),M=(H,$)=>{H=H.trim();const K=$.loose?f[p.XRANGELOOSE]:f[p.XRANGE];return H.replace(K,(X,B,te,ae,Z,oe)=>{o("xRange",H,X,B,te,ae,Z,oe);const ce=I(te),Y=ce||I(ae),re=Y||I(Z),me=re;return B==="="&&me&&(B=""),oe=$.includePrerelease?"-0":"",ce?B===">"||B==="<"?X="<0.0.0-0":X="*":B&&me?(Y&&(ae=0),Z=0,B===">"?(B=">=",Y?(te=+te+1,ae=0,Z=0):(ae=+ae+1,Z=0)):B==="<="&&(B="<",Y?te=+te+1:ae=+ae+1),B==="<"&&(oe="-0"),X=`${B+te}.${ae}.${Z}${oe}`):Y?X=`>=${te}.0.0${oe} <${+te+1}.0.0-0`:re&&(X=`>=${te}.${ae}.0${oe} <${te}.${+ae+1}.0-0`),o("xRange return",X),X})},G=(H,$)=>(o("replaceStars",H,$),H.trim().replace(f[p.STAR],"")),V=(H,$)=>(o("replaceGTE0",H,$),H.trim().replace(f[$.includePrerelease?p.GTE0PRE:p.GTE0],"")),z=H=>($,K,X,B,te,ae,Z,oe,ce,Y,re,me)=>(I(X)?K="":I(B)?K=`>=${X}.0.0${H?"-0":""}`:I(te)?K=`>=${X}.${B}.0${H?"-0":""}`:ae?K=`>=${K}`:K=`>=${K}${H?"-0":""}`,I(ce)?oe="":I(Y)?oe=`<${+ce+1}.0.0-0`:I(re)?oe=`<${ce}.${+Y+1}.0-0`:me?oe=`<=${ce}.${Y}.${re}-${me}`:H?oe=`<${ce}.${Y}.${+re+1}-0`:oe=`<=${oe}`,`${K} ${oe}`.trim()),q=(H,$,K)=>{for(let X=0;X<H.length;X++)if(!H[X].test($))return!1;if($.prerelease.length&&!K.includePrerelease){for(let X=0;X<H.length;X++)if(o(H[X].semver),H[X].semver!==i.ANY&&H[X].semver.prerelease.length>0){const B=H[X].semver;if(B.major===$.major&&B.minor===$.minor&&B.patch===$.patch)return!0}return!1}return!0};return Gg}var Jg,ST;function Mf(){if(ST)return Jg;ST=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(h,u){if(u=n(u),h instanceof t){if(h.loose===!!u.loose)return h;h=h.value}h=h.trim().split(/\s+/).join(" "),o("comparator",h,u),this.options=u,this.loose=!!u.loose,this.parse(h),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(h){const u=this.options.loose?s[c.COMPARATORLOOSE]:s[c.COMPARATOR],m=h.match(u);if(!m)throw new TypeError(`Invalid comparator: ${h}`);this.operator=m[1]!==void 0?m[1]:"",this.operator==="="&&(this.operator=""),m[2]?this.semver=new l(m[2],this.options.loose):this.semver=e}toString(){return this.value}test(h){if(o("Comparator.test",h,this.options.loose),this.semver===e||h===e)return!0;if(typeof h=="string")try{h=new l(h,this.options)}catch{return!1}return i(h,this.operator,this.semver,this.options)}intersects(h,u){if(!(h instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new f(h.value,u).test(this.value):h.operator===""?h.value===""?!0:new f(this.value,u).test(h.semver):(u=n(u),u.includePrerelease&&(this.value==="<0.0.0-0"||h.value==="<0.0.0-0")||!u.includePrerelease&&(this.value.startsWith("<0.0.0")||h.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&h.operator.startsWith(">")||this.operator.startsWith("<")&&h.operator.startsWith("<")||this.semver.version===h.semver.version&&this.operator.includes("=")&&h.operator.includes("=")||i(this.semver,"<",h.semver,u)&&this.operator.startsWith(">")&&h.operator.startsWith("<")||i(this.semver,">",h.semver,u)&&this.operator.startsWith("<")&&h.operator.startsWith(">")))}}Jg=t;const n=Nv(),{safeRe:s,t:c}=Su(),i=$x(),o=Uf(),l=Zr(),f=Cs();return Jg}var Vg,bT;function Hf(){if(bT)return Vg;bT=1;const e=Cs();return Vg=(n,s,c)=>{try{s=new e(s,c)}catch{return!1}return s.test(n)},Vg}var Xg,TT;function WN(){if(TT)return Xg;TT=1;const e=Cs();return Xg=(n,s)=>new e(n,s).set.map(c=>c.map(i=>i.value).join(" ").trim().split(" ")),Xg}var Yg,CT;function KN(){if(CT)return Yg;CT=1;const e=Zr(),t=Cs();return Yg=(s,c,i)=>{let o=null,l=null,f=null;try{f=new t(c,i)}catch{return null}return s.forEach(p=>{f.test(p)&&(!o||l.compare(p)===-1)&&(o=p,l=new e(o,i))}),o},Yg}var Qg,_T;function BN(){if(_T)return Qg;_T=1;const e=Zr(),t=Cs();return Qg=(s,c,i)=>{let o=null,l=null,f=null;try{f=new t(c,i)}catch{return null}return s.forEach(p=>{f.test(p)&&(!o||l.compare(p)===1)&&(o=p,l=new e(o,i))}),o},Qg}var Zg,xT;function zN(){if(xT)return Zg;xT=1;const e=Zr(),t=Cs(),n=qf();return Zg=(c,i)=>{c=new t(c,i);let o=new e("0.0.0");if(c.test(o)||(o=new e("0.0.0-0"),c.test(o)))return o;o=null;for(let l=0;l<c.set.length;++l){const f=c.set[l];let p=null;f.forEach(h=>{const u=new e(h.semver.version);switch(h.operator){case">":u.prerelease.length===0?u.patch++:u.prerelease.push(0),u.raw=u.format();case"":case">=":(!p||n(u,p))&&(p=u);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${h.operator}`)}}),p&&(!o||n(o,p))&&(o=p)}return o&&c.test(o)?o:null},Zg}var ey,RT;function GN(){if(RT)return ey;RT=1;const e=Cs();return ey=(n,s)=>{try{return new e(n,s).range||"*"}catch{return null}},ey}var ty,kT;function Uv(){if(kT)return ty;kT=1;const e=Zr(),t=Mf(),{ANY:n}=t,s=Cs(),c=Hf(),i=qf(),o=jv(),l=$v(),f=Dv();return ty=(h,u,m,g)=>{h=new e(h,g),u=new s(u,g);let v,S,w,C,N;switch(m){case">":v=i,S=l,w=o,C=">",N=">=";break;case"<":v=o,S=f,w=i,C="<",N="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(c(h,u,g))return!1;for(let I=0;I<u.set.length;++I){const R=u.set[I];let D=null,A=null;if(R.forEach(O=>{O.semver===n&&(O=new t(">=0.0.0")),D=D||O,A=A||O,v(O.semver,D.semver,g)?D=O:w(O.semver,A.semver,g)&&(A=O)}),D.operator===C||D.operator===N||(!A.operator||A.operator===C)&&S(h,A.semver))return!1;if(A.operator===N&&w(h,A.semver))return!1}return!0},ty}var ry,AT;function JN(){if(AT)return ry;AT=1;const e=Uv();return ry=(n,s,c)=>e(n,s,">",c),ry}var ny,IT;function VN(){if(IT)return ny;IT=1;const e=Uv();return ny=(n,s,c)=>e(n,s,"<",c),ny}var sy,PT;function XN(){if(PT)return sy;PT=1;const e=Cs();return sy=(n,s,c)=>(n=new e(n,c),s=new e(s,c),n.intersects(s,c)),sy}var iy,OT;function YN(){if(OT)return iy;OT=1;const e=Hf(),t=Ts();return iy=(n,s,c)=>{const i=[];let o=null,l=null;const f=n.sort((m,g)=>t(m,g,c));for(const m of f)e(m,s,c)?(l=m,o||(o=m)):(l&&i.push([o,l]),l=null,o=null);o&&i.push([o,null]);const p=[];for(const[m,g]of i)m===g?p.push(m):!g&&m===f[0]?p.push("*"):g?m===f[0]?p.push(`<=${g}`):p.push(`${m} - ${g}`):p.push(`>=${m}`);const h=p.join(" || "),u=typeof s.raw=="string"?s.raw:String(s);return h.length<u.length?h:s},iy}var oy,NT;function QN(){if(NT)return oy;NT=1;const e=Cs(),t=Mf(),{ANY:n}=t,s=Hf(),c=Ts(),i=(u,m,g={})=>{if(u===m)return!0;u=new e(u,g),m=new e(m,g);let v=!1;e:for(const S of u.set){for(const w of m.set){const C=f(S,w,g);if(v=v||C!==null,C)continue e}if(v)return!1}return!0},o=[new t(">=0.0.0-0")],l=[new t(">=0.0.0")],f=(u,m,g)=>{if(u===m)return!0;if(u.length===1&&u[0].semver===n){if(m.length===1&&m[0].semver===n)return!0;g.includePrerelease?u=o:u=l}if(m.length===1&&m[0].semver===n){if(g.includePrerelease)return!0;m=l}const v=new Set;let S,w;for(const x of u)x.operator===">"||x.operator===">="?S=p(S,x,g):x.operator==="<"||x.operator==="<="?w=h(w,x,g):v.add(x.semver);if(v.size>1)return null;let C;if(S&&w){if(C=c(S.semver,w.semver,g),C>0)return null;if(C===0&&(S.operator!==">="||w.operator!=="<="))return null}for(const x of v){if(S&&!s(x,String(S),g)||w&&!s(x,String(w),g))return null;for(const M of m)if(!s(x,String(M),g))return!1;return!0}let N,I,R,D,A=w&&!g.includePrerelease&&w.semver.prerelease.length?w.semver:!1,O=S&&!g.includePrerelease&&S.semver.prerelease.length?S.semver:!1;A&&A.prerelease.length===1&&w.operator==="<"&&A.prerelease[0]===0&&(A=!1);for(const x of m){if(D=D||x.operator===">"||x.operator===">=",R=R||x.operator==="<"||x.operator==="<=",S){if(O&&x.semver.prerelease&&x.semver.prerelease.length&&x.semver.major===O.major&&x.semver.minor===O.minor&&x.semver.patch===O.patch&&(O=!1),x.operator===">"||x.operator===">="){if(N=p(S,x,g),N===x&&N!==S)return!1}else if(S.operator===">="&&!s(S.semver,String(x),g))return!1}if(w){if(A&&x.semver.prerelease&&x.semver.prerelease.length&&x.semver.major===A.major&&x.semver.minor===A.minor&&x.semver.patch===A.patch&&(A=!1),x.operator==="<"||x.operator==="<="){if(I=h(w,x,g),I===x&&I!==w)return!1}else if(w.operator==="<="&&!s(w.semver,String(x),g))return!1}if(!x.operator&&(w||S)&&C!==0)return!1}return!(S&&R&&!w&&C!==0||w&&D&&!S&&C!==0||O||A)},p=(u,m,g)=>{if(!u)return m;const v=c(u.semver,m.semver,g);return v>0?u:v<0||m.operator===">"&&u.operator===">="?m:u},h=(u,m,g)=>{if(!u)return m;const v=c(u.semver,m.semver,g);return v<0?u:v>0||m.operator==="<"&&u.operator==="<="?m:u};return oy=i,oy}var ay,LT;function qv(){if(LT)return ay;LT=1;const e=Su(),t=$f(),n=Zr(),s=Lx(),c=hc(),i=AN(),o=IN(),l=PN(),f=ON(),p=NN(),h=LN(),u=jN(),m=DN(),g=Ts(),v=$N(),S=UN(),w=Lv(),C=qN(),N=MN(),I=qf(),R=jv(),D=jx(),A=Dx(),O=Dv(),x=$v(),M=$x(),G=HN(),V=Mf(),z=Cs(),q=Hf(),H=WN(),$=KN(),K=BN(),X=zN(),B=GN(),te=Uv(),ae=JN(),Z=VN(),oe=XN(),ce=YN(),Y=QN();return ay={parse:c,valid:i,clean:o,inc:l,diff:f,major:p,minor:h,patch:u,prerelease:m,compare:g,rcompare:v,compareLoose:S,compareBuild:w,sort:C,rsort:N,gt:I,lt:R,eq:D,neq:A,gte:O,lte:x,cmp:M,coerce:G,Comparator:V,Range:z,satisfies:q,toComparators:H,maxSatisfying:$,minSatisfying:K,minVersion:X,validRange:B,outside:te,gtr:ae,ltr:Z,intersects:oe,simplifyRange:ce,subset:Y,SemVer:n,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers},ay}var cy,jT;function ZN(){return jT||(jT=1,cy=qv().satisfies(process.version,">=15.7.0")),cy}var ly,DT;function e2(){return DT||(DT=1,ly=qv().satisfies(process.version,">=16.9.0")),ly}var uy,$T;function Ux(){if($T)return uy;$T=1;const e=ZN(),t=e2(),n={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},s={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};return uy=function(c,i){if(!c||!i)return;const o=i.asymmetricKeyType;if(!o)return;const l=n[o];if(!l)throw new Error(`Unknown key type "${o}".`);if(!l.includes(c))throw new Error(`"alg" parameter for "${o}" key type must be one of: ${l.join(", ")}.`);if(e)switch(o){case"ec":const f=i.asymmetricKeyDetails.namedCurve,p=s[c];if(f!==p)throw new Error(`"alg" parameter "${c}" requires curve "${p}".`);break;case"rsa-pss":if(t){const h=parseInt(c.slice(-3),10),{hashAlgorithm:u,mgf1HashAlgorithm:m,saltLength:g}=i.asymmetricKeyDetails;if(u!==`sha${h}`||m!==u)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${c}.`);if(g!==void 0&&g>h>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${c}.`)}break}},uy}var dy,UT;function qx(){if(UT)return dy;UT=1;var e=qv();return dy=e.satisfies(process.version,"^6.12.0 || >=8.0.0"),dy}var fy,qT;function t2(){if(qT)return fy;qT=1;const e=Df(),t=Px(),n=Ox(),s=Ix(),c=Nx(),i=Ux(),o=qx(),l=Ov(),{KeyObject:f,createSecretKey:p,createPublicKey:h}=Ti,u=["RS256","RS384","RS512"],m=["ES256","ES384","ES512"],g=["RS256","RS384","RS512"],v=["HS256","HS384","HS512"];return o&&(u.splice(u.length,0,"PS256","PS384","PS512"),g.splice(g.length,0,"PS256","PS384","PS512")),fy=function(S,w,C,N){typeof C=="function"&&!N&&(N=C,C={}),C||(C={}),C=Object.assign({},C);let I;if(N?I=N:I=function(M,G){if(M)throw M;return G},C.clockTimestamp&&typeof C.clockTimestamp!="number")return I(new e("clockTimestamp must be a number"));if(C.nonce!==void 0&&(typeof C.nonce!="string"||C.nonce.trim()===""))return I(new e("nonce must be a non-empty string"));if(C.allowInvalidAsymmetricKeyTypes!==void 0&&typeof C.allowInvalidAsymmetricKeyTypes!="boolean")return I(new e("allowInvalidAsymmetricKeyTypes must be a boolean"));const R=C.clockTimestamp||Math.floor(Date.now()/1e3);if(!S)return I(new e("jwt must be provided"));if(typeof S!="string")return I(new e("jwt must be a string"));const D=S.split(".");if(D.length!==3)return I(new e("jwt malformed"));let A;try{A=s(S,{complete:!0})}catch(M){return I(M)}if(!A)return I(new e("invalid token"));const O=A.header;let x;if(typeof w=="function"){if(!N)return I(new e("verify must be called asynchronous if secret or public key is provided as a callback"));x=w}else x=function(M,G){return G(null,w)};return x(O,function(M,G){if(M)return I(new e("error in secret or public key callback: "+M.message));const V=D[2].trim()!=="";if(!V&&G)return I(new e("jwt signature is required"));if(V&&!G)return I(new e("secret or public key must be provided"));if(!V&&!C.algorithms)return I(new e('please specify "none" in "algorithms" to verify unsigned tokens'));if(G!=null&&!(G instanceof f))try{G=h(G)}catch{try{G=p(typeof G=="string"?Buffer.from(G):G)}catch{return I(new e("secretOrPublicKey is not valid key material"))}}if(C.algorithms||(G.type==="secret"?C.algorithms=v:["rsa","rsa-pss"].includes(G.asymmetricKeyType)?C.algorithms=g:G.asymmetricKeyType==="ec"?C.algorithms=m:C.algorithms=u),C.algorithms.indexOf(A.header.alg)===-1)return I(new e("invalid algorithm"));if(O.alg.startsWith("HS")&&G.type!=="secret")return I(new e(`secretOrPublicKey must be a symmetric key when using ${O.alg}`));if(/^(?:RS|PS|ES)/.test(O.alg)&&G.type!=="public")return I(new e(`secretOrPublicKey must be an asymmetric key when using ${O.alg}`));if(!C.allowInvalidAsymmetricKeyTypes)try{i(O.alg,G)}catch(H){return I(H)}let z;try{z=l.verify(S,A.header.alg,G)}catch(H){return I(H)}if(!z)return I(new e("invalid signature"));const q=A.payload;if(typeof q.nbf<"u"&&!C.ignoreNotBefore){if(typeof q.nbf!="number")return I(new e("invalid nbf value"));if(q.nbf>R+(C.clockTolerance||0))return I(new t("jwt not active",new Date(q.nbf*1e3)))}if(typeof q.exp<"u"&&!C.ignoreExpiration){if(typeof q.exp!="number")return I(new e("invalid exp value"));if(R>=q.exp+(C.clockTolerance||0))return I(new n("jwt expired",new Date(q.exp*1e3)))}if(C.audience){const H=Array.isArray(C.audience)?C.audience:[C.audience];if(!(Array.isArray(q.aud)?q.aud:[q.aud]).some(function(X){return H.some(function(B){return B instanceof RegExp?B.test(X):B===X})}))return I(new e("jwt audience invalid. expected: "+H.join(" or ")))}if(C.issuer&&(typeof C.issuer=="string"&&q.iss!==C.issuer||Array.isArray(C.issuer)&&C.issuer.indexOf(q.iss)===-1))return I(new e("jwt issuer invalid. expected: "+C.issuer));if(C.subject&&q.sub!==C.subject)return I(new e("jwt subject invalid. expected: "+C.subject));if(C.jwtid&&q.jti!==C.jwtid)return I(new e("jwt jwtid invalid. expected: "+C.jwtid));if(C.nonce&&q.nonce!==C.nonce)return I(new e("jwt nonce invalid. expected: "+C.nonce));if(C.maxAge){if(typeof q.iat!="number")return I(new e("iat required when maxAge is specified"));const H=c(C.maxAge,q.iat);if(typeof H>"u")return I(new e('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(R>=H+(C.clockTolerance||0))return I(new n("maxAge exceeded",new Date(H*1e3)))}if(C.complete===!0){const H=A.signature;return I(null,{header:O,payload:q,signature:H})}return I(null,q)})},fy}var hy,MT;function r2(){if(MT)return hy;MT=1;var e=1/0,t=9007199254740991,n=17976931348623157e292,s=NaN,c="[object Arguments]",i="[object Function]",o="[object GeneratorFunction]",l="[object String]",f="[object Symbol]",p=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,m=/^0o[0-7]+$/i,g=/^(?:0|[1-9]\d*)$/,v=parseInt;function S(Q,Ee){for(var Te=-1,nt=Q?Q.length:0,dt=Array(nt);++Te<nt;)dt[Te]=Ee(Q[Te],Te,Q);return dt}function w(Q,Ee,Te,nt){for(var dt=Q.length,ht=Te+-1;++ht<dt;)if(Ee(Q[ht],ht,Q))return ht;return-1}function C(Q,Ee,Te){if(Ee!==Ee)return w(Q,N,Te);for(var nt=Te-1,dt=Q.length;++nt<dt;)if(Q[nt]===Ee)return nt;return-1}function N(Q){return Q!==Q}function I(Q,Ee){for(var Te=-1,nt=Array(Q);++Te<Q;)nt[Te]=Ee(Te);return nt}function R(Q,Ee){return S(Ee,function(Te){return Q[Te]})}function D(Q,Ee){return function(Te){return Q(Ee(Te))}}var A=Object.prototype,O=A.hasOwnProperty,x=A.toString,M=A.propertyIsEnumerable,G=D(Object.keys,Object),V=Math.max;function z(Q,Ee){var Te=B(Q)||X(Q)?I(Q.length,String):[],nt=Te.length,dt=!!nt;for(var ht in Q)O.call(Q,ht)&&!(dt&&(ht=="length"||H(ht,nt)))&&Te.push(ht);return Te}function q(Q){if(!$(Q))return G(Q);var Ee=[];for(var Te in Object(Q))O.call(Q,Te)&&Te!="constructor"&&Ee.push(Te);return Ee}function H(Q,Ee){return Ee=Ee??t,!!Ee&&(typeof Q=="number"||g.test(Q))&&Q>-1&&Q%1==0&&Q<Ee}function $(Q){var Ee=Q&&Q.constructor,Te=typeof Ee=="function"&&Ee.prototype||A;return Q===Te}function K(Q,Ee,Te,nt){Q=te(Q)?Q:Dt(Q),Te=Te&&!nt?Oe(Te):0;var dt=Q.length;return Te<0&&(Te=V(dt+Te,0)),re(Q)?Te<=dt&&Q.indexOf(Ee,Te)>-1:!!dt&&C(Q,Ee,Te)>-1}function X(Q){return ae(Q)&&O.call(Q,"callee")&&(!M.call(Q,"callee")||x.call(Q)==c)}var B=Array.isArray;function te(Q){return Q!=null&&oe(Q.length)&&!Z(Q)}function ae(Q){return Y(Q)&&te(Q)}function Z(Q){var Ee=ce(Q)?x.call(Q):"";return Ee==i||Ee==o}function oe(Q){return typeof Q=="number"&&Q>-1&&Q%1==0&&Q<=t}function ce(Q){var Ee=typeof Q;return!!Q&&(Ee=="object"||Ee=="function")}function Y(Q){return!!Q&&typeof Q=="object"}function re(Q){return typeof Q=="string"||!B(Q)&&Y(Q)&&x.call(Q)==l}function me(Q){return typeof Q=="symbol"||Y(Q)&&x.call(Q)==f}function xe(Q){if(!Q)return Q===0?Q:0;if(Q=qe(Q),Q===e||Q===-e){var Ee=Q<0?-1:1;return Ee*n}return Q===Q?Q:0}function Oe(Q){var Ee=xe(Q),Te=Ee%1;return Ee===Ee?Te?Ee-Te:Ee:0}function qe(Q){if(typeof Q=="number")return Q;if(me(Q))return s;if(ce(Q)){var Ee=typeof Q.valueOf=="function"?Q.valueOf():Q;Q=ce(Ee)?Ee+"":Ee}if(typeof Q!="string")return Q===0?Q:+Q;Q=Q.replace(p,"");var Te=u.test(Q);return Te||m.test(Q)?v(Q.slice(2),Te?2:8):h.test(Q)?s:+Q}function lt(Q){return te(Q)?z(Q):q(Q)}function Dt(Q){return Q?R(Q,lt(Q)):[]}return hy=K,hy}var py,HT;function n2(){if(HT)return py;HT=1;var e="[object Boolean]",t=Object.prototype,n=t.toString;function s(i){return i===!0||i===!1||c(i)&&n.call(i)==e}function c(i){return!!i&&typeof i=="object"}return py=s,py}var my,FT;function s2(){if(FT)return my;FT=1;var e=1/0,t=17976931348623157e292,n=NaN,s="[object Symbol]",c=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,f=parseInt,p=Object.prototype,h=p.toString;function u(N){return typeof N=="number"&&N==w(N)}function m(N){var I=typeof N;return!!N&&(I=="object"||I=="function")}function g(N){return!!N&&typeof N=="object"}function v(N){return typeof N=="symbol"||g(N)&&h.call(N)==s}function S(N){if(!N)return N===0?N:0;if(N=C(N),N===e||N===-e){var I=N<0?-1:1;return I*t}return N===N?N:0}function w(N){var I=S(N),R=I%1;return I===I?R?I-R:I:0}function C(N){if(typeof N=="number")return N;if(v(N))return n;if(m(N)){var I=typeof N.valueOf=="function"?N.valueOf():N;N=m(I)?I+"":I}if(typeof N!="string")return N===0?N:+N;N=N.replace(c,"");var R=o.test(N);return R||l.test(N)?f(N.slice(2),R?2:8):i.test(N)?n:+N}return my=u,my}var gy,WT;function i2(){if(WT)return gy;WT=1;var e="[object Number]",t=Object.prototype,n=t.toString;function s(i){return!!i&&typeof i=="object"}function c(i){return typeof i=="number"||s(i)&&n.call(i)==e}return gy=c,gy}var yy,KT;function o2(){if(KT)return yy;KT=1;var e="[object Object]";function t(m){var g=!1;if(m!=null&&typeof m.toString!="function")try{g=!!(m+"")}catch{}return g}function n(m,g){return function(v){return m(g(v))}}var s=Function.prototype,c=Object.prototype,i=s.toString,o=c.hasOwnProperty,l=i.call(Object),f=c.toString,p=n(Object.getPrototypeOf,Object);function h(m){return!!m&&typeof m=="object"}function u(m){if(!h(m)||f.call(m)!=e||t(m))return!1;var g=p(m);if(g===null)return!0;var v=o.call(g,"constructor")&&g.constructor;return typeof v=="function"&&v instanceof v&&i.call(v)==l}return yy=u,yy}var vy,BT;function a2(){if(BT)return vy;BT=1;var e="[object String]",t=Object.prototype,n=t.toString,s=Array.isArray;function c(o){return!!o&&typeof o=="object"}function i(o){return typeof o=="string"||!s(o)&&c(o)&&n.call(o)==e}return vy=i,vy}var wy,zT;function c2(){if(zT)return wy;zT=1;var e="Expected a function",t=1/0,n=17976931348623157e292,s=NaN,c="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,f=/^0o[0-7]+$/i,p=parseInt,h=Object.prototype,u=h.toString;function m(R,D){var A;if(typeof D!="function")throw new TypeError(e);return R=N(R),function(){return--R>0&&(A=D.apply(this,arguments)),R<=1&&(D=void 0),A}}function g(R){return m(2,R)}function v(R){var D=typeof R;return!!R&&(D=="object"||D=="function")}function S(R){return!!R&&typeof R=="object"}function w(R){return typeof R=="symbol"||S(R)&&u.call(R)==c}function C(R){if(!R)return R===0?R:0;if(R=I(R),R===t||R===-t){var D=R<0?-1:1;return D*n}return R===R?R:0}function N(R){var D=C(R),A=D%1;return D===D?A?D-A:D:0}function I(R){if(typeof R=="number")return R;if(w(R))return s;if(v(R)){var D=typeof R.valueOf=="function"?R.valueOf():R;R=v(D)?D+"":D}if(typeof R!="string")return R===0?R:+R;R=R.replace(i,"");var A=l.test(R);return A||f.test(R)?p(R.slice(2),A?2:8):o.test(R)?s:+R}return wy=g,wy}var Ey,GT;function l2(){if(GT)return Ey;GT=1;const e=Nx(),t=qx(),n=Ux(),s=Ov(),c=r2(),i=n2(),o=s2(),l=i2(),f=o2(),p=a2(),h=c2(),{KeyObject:u,createSecretKey:m,createPrivateKey:g}=Ti,v=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];t&&v.splice(3,0,"PS256","PS384","PS512");const S={expiresIn:{isValid:function(A){return o(A)||p(A)&&A},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(A){return o(A)||p(A)&&A},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(A){return p(A)||Array.isArray(A)},message:'"audience" must be a string or array'},algorithm:{isValid:c.bind(null,v),message:'"algorithm" must be a valid string enum value'},header:{isValid:f,message:'"header" must be an object'},encoding:{isValid:p,message:'"encoding" must be a string'},issuer:{isValid:p,message:'"issuer" must be a string'},subject:{isValid:p,message:'"subject" must be a string'},jwtid:{isValid:p,message:'"jwtid" must be a string'},noTimestamp:{isValid:i,message:'"noTimestamp" must be a boolean'},keyid:{isValid:p,message:'"keyid" must be a string'},mutatePayload:{isValid:i,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:i,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:i,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},w={iat:{isValid:l,message:'"iat" should be a number of seconds'},exp:{isValid:l,message:'"exp" should be a number of seconds'},nbf:{isValid:l,message:'"nbf" should be a number of seconds'}};function C(A,O,x,M){if(!f(x))throw new Error('Expected "'+M+'" to be a plain object.');Object.keys(x).forEach(function(G){const V=A[G];if(!V){if(!O)throw new Error('"'+G+'" is not allowed in "'+M+'"');return}if(!V.isValid(x[G]))throw new Error(V.message)})}function N(A){return C(S,!1,A,"options")}function I(A){return C(w,!0,A,"payload")}const R={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},D=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];return Ey=function(A,O,x,M){typeof x=="function"?(M=x,x={}):x=x||{};const G=typeof A=="object"&&!Buffer.isBuffer(A),V=Object.assign({alg:x.algorithm||"HS256",typ:G?"JWT":void 0,kid:x.keyid},x.header);function z($){if(M)return M($);throw $}if(!O&&x.algorithm!=="none")return z(new Error("secretOrPrivateKey must have a value"));if(O!=null&&!(O instanceof u))try{O=g(O)}catch{try{O=m(typeof O=="string"?Buffer.from(O):O)}catch{return z(new Error("secretOrPrivateKey is not valid key material"))}}if(V.alg.startsWith("HS")&&O.type!=="secret")return z(new Error(`secretOrPrivateKey must be a symmetric key when using ${V.alg}`));if(/^(?:RS|PS|ES)/.test(V.alg)){if(O.type!=="private")return z(new Error(`secretOrPrivateKey must be an asymmetric key when using ${V.alg}`));if(!x.allowInsecureKeySizes&&!V.alg.startsWith("ES")&&O.asymmetricKeyDetails!==void 0&&O.asymmetricKeyDetails.modulusLength<2048)return z(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${V.alg}`))}if(typeof A>"u")return z(new Error("payload is required"));if(G){try{I(A)}catch($){return z($)}x.mutatePayload||(A=Object.assign({},A))}else{const $=D.filter(function(K){return typeof x[K]<"u"});if($.length>0)return z(new Error("invalid "+$.join(",")+" option for "+typeof A+" payload"))}if(typeof A.exp<"u"&&typeof x.expiresIn<"u")return z(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof A.nbf<"u"&&typeof x.notBefore<"u")return z(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{N(x)}catch($){return z($)}if(!x.allowInvalidAsymmetricKeyTypes)try{n(V.alg,O)}catch($){return z($)}const q=A.iat||Math.floor(Date.now()/1e3);if(x.noTimestamp?delete A.iat:G&&(A.iat=q),typeof x.notBefore<"u"){try{A.nbf=e(x.notBefore,q)}catch($){return z($)}if(typeof A.nbf>"u")return z(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof x.expiresIn<"u"&&typeof A=="object"){try{A.exp=e(x.expiresIn,q)}catch($){return z($)}if(typeof A.exp>"u")return z(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(R).forEach(function($){const K=R[$];if(typeof x[$]<"u"){if(typeof A[K]<"u")return z(new Error('Bad "options.'+$+'" option. The payload already has an "'+K+'" property.'));A[K]=x[$]}});const H=x.encoding||"utf8";if(typeof M=="function")M=M&&h(M),s.createSign({header:V,privateKey:O,payload:A,encoding:H}).once("error",M).once("done",function($){if(!x.allowInsecureKeySizes&&/^(?:RS|PS)/.test(V.alg)&&$.length<256)return M(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${V.alg}`));M(null,$)});else{let $=s.sign({header:V,payload:A,secret:O,encoding:H});if(!x.allowInsecureKeySizes&&/^(?:RS|PS)/.test(V.alg)&&$.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${V.alg}`);return $}},Ey}var Sy,JT;function Ci(){return JT||(JT=1,Sy={decode:Ix(),verify:t2(),sign:l2(),JsonWebTokenError:Df(),NotBeforeError:Px(),TokenExpiredError:Ox()}),Sy}var Kr={},VT;function On(){if(VT)return Kr;VT=1;var e=Kr&&Kr.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.isBrowser=n,Kr.getLocalStorage=s,Kr.setLocalStorage=c,Kr.removeLocalStorage=i,Kr.extractUserIdFromToken=o,Kr.generateCacheKey=l,Kr.truncatePayload=f,Kr.calculateSize=p,Kr.isRetryableError=h,Kr.calculateBackoffDelay=u;const t=e(Ci());function n(){return typeof globalThis.window<"u"&&typeof globalThis.localStorage<"u"&&typeof globalThis.fetch<"u"}function s(m){if(!n())return null;try{return globalThis.localStorage.getItem(m)}catch{return null}}function c(m,g){if(n())try{globalThis.localStorage.setItem(m,g)}catch{}}function i(m){if(n())try{globalThis.localStorage.removeItem(m)}catch{}}function o(m){try{const g=t.default.decode(m);return g?g.sub||g.userId||g.user_id||g.id:null}catch{return null}}function l(m,g){const v=g?.method||"GET",S=g?.body?JSON.stringify(g.body):"";return`data-client:${v}:${m}:${S}`}function f(m,g){const v=JSON.stringify(m);return v.length<=g?{data:m,truncated:!1}:{data:{_message:"Payload truncated for performance",_size:v.length},truncated:!0}}function p(m){try{return JSON.stringify(m).length}catch{return 0}}function h(m,g){return!m||m>=500||m===408||m===429?!0:(m===401||m===403||m>=400&&m<500,!1)}function u(m,g,v){return Math.min(g*Math.pow(2,m),v)+Math.random()*1e3}return Kr}var XT;function _i(){if(XT)return Ba;XT=1;var e=Ba&&Ba.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.extractClientTokenInfo=c;const t=e(Ci()),n=On();function s(i){if((0,n.isBrowser)())try{const o=i.split(".");if(o.length!==3)return null;let l=o[1];for(;l.length%4;)l+="=";return l=l.replace(/-/g,"+").replace(/_/g,"/"),JSON.parse(atob(l))}catch(o){return console.warn("[decodeJWT] Browser decode failed:",o),null}else try{return t.default.decode(i)}catch(o){return console.warn("[decodeJWT] Node.js decode failed:",o),null}}function c(i){try{const o=s(i);if(!o||typeof o!="object")return console.warn("[extractClientTokenInfo] Failed to decode client token: Invalid token format"),{};const l={};return o.application&&typeof o.application=="string"?l.application=o.application:o.app&&typeof o.app=="string"&&(l.application=o.app),o.environment&&typeof o.environment=="string"?l.environment=o.environment:o.env&&typeof o.env=="string"?l.environment=o.env:o.environmentKey&&typeof o.environmentKey=="string"&&(l.environment=o.environmentKey),o.applicationId&&typeof o.applicationId=="string"?l.applicationId=o.applicationId:o.app_id&&typeof o.app_id=="string"&&(l.applicationId=o.app_id),o.clientId&&typeof o.clientId=="string"?l.clientId=o.clientId:o.client_id&&typeof o.client_id=="string"&&(l.clientId=o.client_id),Object.keys(l).length===0?(console.log("[extractClientTokenInfo] No standard fields found in token payload"),console.log("[extractClientTokenInfo] Available fields:",Object.keys(o)),console.log("[extractClientTokenInfo] Full payload:",JSON.stringify(o,null,2)),o.iss&&console.log("[extractClientTokenInfo] Token issuer (iss):",o.iss),o.sub&&console.log("[extractClientTokenInfo] Token subject (sub):",o.sub),o.aud&&console.log("[extractClientTokenInfo] Token audience (aud):",o.aud)):(console.log("[extractClientTokenInfo] Successfully extracted token info:",l),l.environment||(console.log("[extractClientTokenInfo] Environment not found. Available payload fields:",Object.keys(o)),console.log("[extractClientTokenInfo] Full payload:",JSON.stringify(o,null,2)))),l}catch(o){return console.warn("[extractClientTokenInfo] Failed to decode client token:",o),o instanceof Error&&console.warn("[extractClientTokenInfo] Error details:",o.message,o.stack),{}}}return Ba}var YT;function bu(){if(YT)return Zc;YT=1,Object.defineProperty(Zc,"__esModule",{value:!0}),Zc.ApplicationContextService=void 0;const e=_i();class t{constructor(s){this.cachedContext=null,this.config=s.config,this.httpClient=s}parseClientIdFormat(s){try{if(!s||typeof s!="string")return{environment:null,application:null};const c=s.split("-");if(c.length<4||c[0]!=="miso"||c[1]!=="controller")return{environment:null,application:null};const i=c[2]||null,o=c.slice(3).join("-")||null;return{environment:i,application:o}}catch(c){return console.warn("[ApplicationContextService] Failed to parse clientId format:",c),{environment:null,application:null}}}getClientToken(){try{if(this.config.clientToken)return this.config.clientToken;const s=this.httpClient.internalClient;if(s){const c=s.clientToken;if(c&&typeof c=="string")return c}return null}catch(s){return console.warn("[ApplicationContextService] Failed to get client token:",s),null}}getApplicationContext(){if(this.cachedContext)return this.cachedContext;let s="",c="",i="";const o=this.getClientToken();if(o)try{const f=(0,e.extractClientTokenInfo)(o);f.applicationId&&(c=f.applicationId),f.environment&&(i=f.environment),f.application&&(s=f.application)}catch(f){console.warn("[ApplicationContextService] Failed to extract from client token:",f)}if(!i||!s){const f=this.parseClientIdFormat(this.config.clientId);!i&&f.environment&&(i=f.environment),!s&&f.application&&(s=f.application)}const l={application:s||"",applicationId:c||"",environment:i||""};return this.cachedContext=l,l}clearCache(){this.cachedContext=null}}return Zc.ApplicationContextService=t,Zc}var QT;function ZT(){if(QT)return Ko;QT=1;var e=Ko&&Ko.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.RoleService=void 0;const t=e(fo()),n=bu();class s{constructor(i,o,l){this.config=i.config,this.cache=l,this.httpClient=i,this.apiClient=o,this.roleTTL=this.config.cache?.roleTTL||900,this.applicationContextService=new n.ApplicationContextService(i)}extractUserIdFromToken(i){try{const o=t.default.decode(i);return o?o.sub||o.userId||o.user_id||o.id:null}catch{return null}}async getRoles(i,o){try{let l=this.extractUserIdFromToken(i);const f=l?`roles:${l}`:null;if(f){const w=await this.cache.get(f);if(w)return w.roles||[]}if(!l){const w=o||this.config.authStrategy,C=w?{...w,bearerToken:i}:{methods:["bearer"],bearerToken:i};if(l=(await this.apiClient.auth.validateToken({token:i},C)).data?.user?.id||null,!l)return[]}const p=o||this.config.authStrategy,h=p?{...p,bearerToken:i}:{methods:["bearer"],bearerToken:i},u=this.applicationContextService.getApplicationContext(),m=u.environment?{environment:u.environment}:void 0,v=(await this.apiClient.roles.getRoles(m,h)).data?.roles||[],S=`roles:${l}`;return await this.cache.set(S,{roles:v,timestamp:Date.now()},this.roleTTL),v}catch(l){return console.error("Failed to get roles:",l),[]}}async hasRole(i,o,l){return(await this.getRoles(i,l)).includes(o)}async hasAnyRole(i,o,l){const f=await this.getRoles(i,l);return o.some(p=>f.includes(p))}async hasAllRoles(i,o,l){const f=await this.getRoles(i,l);return o.every(p=>f.includes(p))}async refreshRoles(i,o){try{const l=o||this.config.authStrategy,f=l?{...l,bearerToken:i}:{methods:["bearer"],bearerToken:i},p=await this.apiClient.auth.validateToken({token:i},f);if(!p.data?.user?.id)return[];const u=`roles:${p.data.user.id}`,m=this.applicationContextService.getApplicationContext(),g=m.environment?{environment:m.environment}:void 0,S=(await this.apiClient.roles.refreshRoles(g,f)).data?.roles||[];return await this.cache.set(u,{roles:S,timestamp:Date.now()},this.roleTTL),S}catch(l){return console.error("Failed to refresh roles:",l),[]}}}return Ko.RoleService=s,Ko}var Bo={},eC;function tC(){if(eC)return Bo;eC=1;var e=Bo&&Bo.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Bo,"__esModule",{value:!0}),Bo.PermissionService=void 0;const t=e(fo()),n=bu();class s{constructor(i,o,l){this.config=i.config,this.cache=l,this.httpClient=i,this.apiClient=o,this.permissionTTL=this.config.cache?.permissionTTL||900,this.applicationContextService=new n.ApplicationContextService(i)}extractUserIdFromToken(i){try{const o=t.default.decode(i);return o?o.sub||o.userId||o.user_id||o.id:null}catch{return null}}async getPermissions(i,o){try{let l=this.extractUserIdFromToken(i);const f=l?`permissions:${l}`:null;if(f){const w=await this.cache.get(f);if(w)return w.permissions||[]}if(!l){const w=o||this.config.authStrategy,C=w?{...w,bearerToken:i}:{methods:["bearer"],bearerToken:i};if(l=(await this.apiClient.auth.validateToken({token:i},C)).data?.user?.id||null,!l)return[]}const p=o||this.config.authStrategy,h=p?{...p,bearerToken:i}:{methods:["bearer"],bearerToken:i},u=this.applicationContextService.getApplicationContext(),m=u.environment?{environment:u.environment}:void 0,v=(await this.apiClient.permissions.getPermissions(m,h)).data?.permissions||[],S=`permissions:${l}`;return await this.cache.set(S,{permissions:v,timestamp:Date.now()},this.permissionTTL),v}catch(l){return console.error("Failed to get permissions:",l),[]}}async hasPermission(i,o,l){return(await this.getPermissions(i,l)).includes(o)}async hasAnyPermission(i,o,l){const f=await this.getPermissions(i,l);return o.some(p=>f.includes(p))}async hasAllPermissions(i,o,l){const f=await this.getPermissions(i,l);return o.every(p=>f.includes(p))}async refreshPermissions(i,o){try{const l=o||this.config.authStrategy,f=l?{...l,bearerToken:i}:{methods:["bearer"],bearerToken:i},p=await this.apiClient.auth.validateToken({token:i},f);if(!p.data?.user?.id)return[];const u=`permissions:${p.data.user.id}`,m=this.applicationContextService.getApplicationContext(),g=m.environment?{environment:m.environment}:void 0,S=(await this.apiClient.permissions.refreshPermissions(g,f)).data?.permissions||[];return await this.cache.set(u,{permissions:S,timestamp:Date.now()},this.permissionTTL),S}catch(l){return console.error("Failed to refresh permissions:",l),[]}}async clearPermissionsCache(i,o){try{const l=o||this.config.authStrategy,f=l?{...l,bearerToken:i}:{methods:["bearer"],bearerToken:i},p=await this.apiClient.auth.validateToken({token:i},f);if(!p.data?.user?.id)return;const u=`permissions:${p.data.user.id}`;await this.cache.delete(u)}catch(l){console.error("Failed to clear permissions cache:",l)}}}return Bo.PermissionService=s,Bo}var by={},el={};class Ff{constructor(){this._events=new Map}on(t,n){return this._events.has(t)||this._events.set(t,[]),this._events.get(t).push(n),this}once(t,n){const s=(...c)=>{this.removeListener(t,s),n(...c)};return this.on(t,s),this}emit(t,...n){const s=this._events.get(t);return s&&s.length>0?(s.forEach(c=>{try{c(...n)}catch(i){console.error("EventEmitter error:",i)}}),!0):!1}removeListener(t,n){const s=this._events.get(t);if(s){const c=s.indexOf(n);c>-1&&s.splice(c,1)}return this}removeAllListeners(t){return t?this._events.delete(t):this._events.clear(),this}off(t,n){return this.removeListener(t,n)}addListener(t,n){return this.on(t,n)}}const ha={EventEmitter:Ff};typeof ze<"u"&&typeof ze.exports<"u"&&(ze.exports=ha,ze.exports.default=ha,ze.exports.EventEmitter=Ff,ze.exports.events=ha);typeof ft<"u"&&(ft.default=ha,ft.events=ha,ft.EventEmitter=Ff);const u2=Object.freeze(Object.defineProperty({__proto__:null,EventEmitter:Ff,default:ha,events:ha},Symbol.toStringTag,{value:"Module"}));var tl={},pn={};const rC={},d2=Object.freeze(Object.defineProperty({__proto__:null,default:rC,fs:rC},Symbol.toStringTag,{value:"Module"})),Mx=yu(d2),nC={join:(...e)=>e.join("/"),resolve:(...e)=>e.join("/"),dirname:()=>"",basename:()=>"",extname:()=>""},f2=Object.freeze(Object.defineProperty({__proto__:null,default:nC,path:nC},Symbol.toStringTag,{value:"Module"})),Hx=yu(f2),h2="1.0.0",p2="ISO 27001 compliant sensitive fields configuration for data masking",m2={authentication:["password","passwd","pwd","secret","token","key","auth","authorization","cookie","session","apiKey","accessToken","refreshToken"],pii:["email","emailAddress","phone","phoneNumber","telephone","mobile","cellPhone","ssn","socialSecurityNumber","taxId","taxIdentification"],financial:["creditCard","cc","cardNumber","cvv","cvv2","cvc","pin","bankAccount","bankAccountNumber","routingNumber","iban","swift","accountNumber"],security:["otp","oneTimePassword","privateKey","publicKey","encryptionKey","decryptionKey"]},g2=["password","secret","token","key","ssn","creditcard","bankaccount","accountnumber"],y2={version:h2,description:p2,categories:m2,fieldPatterns:g2};var sC;function v2(){if(sC)return pn;sC=1;var e={},t=pn&&pn.__createBinding||(Object.create?(function(g,v,S,w){w===void 0&&(w=S);var C=Object.getOwnPropertyDescriptor(v,S);(!C||("get"in C?!v.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return v[S]}}),Object.defineProperty(g,w,C)}):(function(g,v,S,w){w===void 0&&(w=S),g[w]=v[S]})),n=pn&&pn.__setModuleDefault||(Object.create?(function(g,v){Object.defineProperty(g,"default",{enumerable:!0,value:v})}):function(g,v){g.default=v}),s=pn&&pn.__importStar||(function(){var g=function(v){return g=Object.getOwnPropertyNames||function(S){var w=[];for(var C in S)Object.prototype.hasOwnProperty.call(S,C)&&(w[w.length]=C);return w},g(v)};return function(v){if(v&&v.__esModule)return v;var S={};if(v!=null)for(var w=g(v),C=0;C<w.length;C++)w[C]!=="default"&&t(S,v,w[C]);return n(S,v),S}})(),c=pn&&pn.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(pn,"__esModule",{value:!0}),pn.loadSensitiveFieldsConfig=h,pn.getFieldPatterns=u,pn.getSensitiveFieldsArray=m;const i=s(Mx),o=s(Hx),l=c(y2);function f(){return new Set(["password","passwd","pwd","secret","token","key","auth","authorization","cookie","session","apikey","accesstoken","refreshtoken","email","emailaddress","phone","phonenumber","telephone","mobile","cellphone","ssn","socialsecuritynumber","taxid","taxidentification","creditcard","cc","cardnumber","cvv","cvv2","cvc","pin","bankaccount","bankaccountnumber","routingnumber","iban","swift","accountnumber","otp","onetimepassword","privatekey","publickey","encryptionkey","decryptionkey"])}function p(){return["password","secret","token","key","ssn","creditcard","bankaccount","accountnumber"]}function h(g){if(typeof globalThis<"u"&&"window"in globalThis&&typeof globalThis.window<"u"||typeof process>"u"||!e)return f();try{if(g||e.MISO_SENSITIVE_FIELDS_CONFIG){let v;if(g)v=o.isAbsolute(g)?g:o.resolve(process.cwd(),g);else{const I=e.MISO_SENSITIVE_FIELDS_CONFIG;v=o.isAbsolute(I)?I:o.resolve(process.cwd(),I)}if(!i.existsSync(v))return f();const S=i.readFileSync(v,"utf8"),w=JSON.parse(S),C=new Set;return Object.values(w.categories).forEach(I=>{I.forEach(R=>C.add(R.toLowerCase()))}),f().forEach(I=>C.add(I)),C}try{const v=l.default,S=new Set;return Object.values(v.categories).forEach(C=>{C.forEach(N=>S.add(N.toLowerCase()))}),f().forEach(C=>S.add(C)),S}catch{const v=o.join(__dirname,"sensitive-fields.config.json");if(i.existsSync(v)){const S=i.readFileSync(v,"utf8"),w=JSON.parse(S),C=new Set;return Object.values(w.categories).forEach(I=>{I.forEach(R=>C.add(R.toLowerCase()))}),f().forEach(I=>C.add(I)),C}}return f()}catch{return f()}}function u(g){if(typeof globalThis<"u"&&"window"in globalThis&&typeof globalThis.window<"u"||typeof process>"u"||!e)return p();try{if(g||e.MISO_SENSITIVE_FIELDS_CONFIG){let v;if(g)v=o.isAbsolute(g)?g:o.resolve(process.cwd(),g);else{const C=e.MISO_SENSITIVE_FIELDS_CONFIG;v=o.isAbsolute(C)?C:o.resolve(process.cwd(),C)}if(!i.existsSync(v))return p();const S=i.readFileSync(v,"utf8");return JSON.parse(S).fieldPatterns||p()}try{return l.default.fieldPatterns||p()}catch{const v=o.join(__dirname,"sensitive-fields.config.json");if(i.existsSync(v)){const S=i.readFileSync(v,"utf8");return JSON.parse(S).fieldPatterns||p()}}return p()}catch{return p()}}function m(g){const v=h(g);return Array.from(v)}return pn}var iC;function ho(){if(iC)return tl;iC=1,Object.defineProperty(tl,"__esModule",{value:!0}),tl.DataMasker=void 0;const e=v2();class t{static initializeSensitiveFields(s){return this.configPath!==s&&(this.cachedFields=null,this.cachedFieldPatterns=null,this.configPath=s),this.cachedFields?this.cachedFields:(this.cachedFields=(0,e.loadSensitiveFieldsConfig)(s),this.cachedFieldPatterns=(0,e.getFieldPatterns)(s),this.cachedFields)}static getSensitiveFields(){return this.initializeSensitiveFields(this.configPath)}static getFieldPatterns(){return this.cachedFieldPatterns||(this.cachedFieldPatterns=(0,e.getFieldPatterns)(this.configPath)),this.cachedFieldPatterns}static setConfigPath(s){this.configPath=s,this.cachedFields=null,this.cachedFieldPatterns=null}static isSensitiveField(s){const c=this.getSensitiveFields(),i=this.getFieldPatterns(),o=s.toLowerCase().replace(/[_-]/g,"");if(c.has(o))return!0;for(const l of i)if(o.includes(l.toLowerCase()))return!0;return!1}static maskSensitiveData(s){if(s==null||typeof s!="object")return s;if(Array.isArray(s))return s.map(i=>this.maskSensitiveData(i));const c={};for(const[i,o]of Object.entries(s))this.isSensitiveField(i)?c[i]=this.MASKED_VALUE:typeof o=="object"&&o!==null?c[i]=this.maskSensitiveData(o):c[i]=o;return c}static maskValue(s,c=0,i=0){if(!s||s.length<=c+i)return this.MASKED_VALUE;const o=s.substring(0,c),l=s.substring(s.length-i),f="*".repeat(Math.min(8,s.length-c-i));return`${o}${f}${l}`}static containsSensitiveData(s){if(s==null||typeof s!="object")return!1;if(Array.isArray(s))return s.some(c=>this.containsSensitiveData(c));for(const[c,i]of Object.entries(s))if(this.isSensitiveField(c)||typeof i=="object"&&i!==null&&this.containsSensitiveData(i))return!0;return!1}}return tl.DataMasker=t,t.MASKED_VALUE="***MASKED***",t.cachedFields=null,t.cachedFieldPatterns=null,t.configPath=void 0,tl}var rl={},oC;function w2(){if(oC)return rl;oC=1,Object.defineProperty(rl,"__esModule",{value:!0}),rl.AuditLogQueue=void 0;class e{constructor(n,s,c,i){this.queue=[],this.flushTimer=null,this.isFlushing=!1,this.httpLoggingFailures=0,this.httpLoggingDisabledUntil=null,this.httpClient=n,this.redis=s,this.config=c,this.eventEmitter=i;const o=c.audit||{};this.batchSize=o.batchSize??10,this.batchInterval=o.batchInterval??100,typeof process<"u"&&(process.on("SIGINT",()=>this.flush(!0)),process.on("SIGTERM",()=>this.flush(!0)),process.on("beforeExit",()=>this.flush(!0)))}setApiClient(n){this.apiClient=n}async add(n){if(this.queue.push({entry:n,timestamp:Date.now()}),this.queue.length>=this.batchSize){await this.flush(!1);return}!this.flushTimer&&this.queue.length>0&&(this.flushTimer=setTimeout(()=>{this.flush(!1).catch(()=>{})},this.batchInterval))}async flush(n=!1){if(!this.isFlushing&&(this.flushTimer&&(clearTimeout(this.flushTimer),this.flushTimer=null),this.queue.length!==0)){this.isFlushing=!0;try{const s=this.queue.splice(0);if(s.length===0){this.isFlushing=!1;return}const c=s.map(o=>o.entry);if(this.config.emitEvents&&this.eventEmitter){this.eventEmitter.emit("log:batch",c),this.isFlushing=!1;return}if(this.redis.isConnected()){const o=`audit-logs:${this.config.clientId}`;if(await this.redis.rpush(o,JSON.stringify(c))){this.isFlushing=!1;return}}const i=Date.now();if(this.httpLoggingDisabledUntil&&i<this.httpLoggingDisabledUntil)return;try{this.apiClient?await this.apiClient.logs.createBatchLogs({logs:c.map(o=>({...o,environment:void 0,application:void 0}))}):await this.httpClient.request("POST","/api/v1/logs/batch",{logs:c.map(o=>({...o,environment:void 0,application:void 0}))}),this.httpLoggingFailures=0,this.httpLoggingDisabledUntil=null}catch{this.httpLoggingFailures++,this.httpLoggingFailures>=e.MAX_FAILURES&&(this.httpLoggingDisabledUntil=i+e.DISABLE_DURATION_MS,this.httpLoggingFailures=0)}}catch{}finally{this.isFlushing=!1}}}getQueueSize(){return this.queue.length}clear(){this.flushTimer&&(clearTimeout(this.flushTimer),this.flushTimer=null),this.queue=[]}}return rl.AuditLogQueue=e,e.MAX_FAILURES=3,e.DISABLE_DURATION_MS=6e4,rl}var nl={},za={},aC;function Tu(){if(aC)return za;aC=1;var e=za&&za.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(za,"__esModule",{value:!0}),za.extractRequestContext=s;const t=e(Ci());function n(c){const o=(c.headers||{}).authorization;if(!o?.startsWith("Bearer "))return{};try{const l=o.substring(7),f=t.default.decode(l);return f?{userId:f.sub||f.userId||f.user_id||f.id,sessionId:f.sessionId||f.sid}:{}}catch{return{}}}function s(c){const i=c.headers||{},o=c.ip||i["x-forwarded-for"]?.split(",")[0]?.trim()||c.socket?.remoteAddress,l=i["x-correlation-id"]||i["x-request-id"]||i["request-id"],{userId:f,sessionId:p}=n(c);return{ipAddress:o,method:c.method,path:c.originalUrl||c.path,userAgent:i["user-agent"],correlationId:l,referer:i.referer,userId:f,sessionId:p,requestId:i["x-request-id"],requestSize:i["content-length"]?parseInt(i["content-length"],10):void 0}}return za}var cC;function Mv(){if(cC)return nl;cC=1,Object.defineProperty(nl,"__esModule",{value:!0}),nl.LoggerChain=void 0;const e=Tu();class t{constructor(s,c={},i={}){this.logger=s,this.context=c,this.options=i}addContext(s,c){return this.context[s]=c,this}addUser(s){return this.options.userId=s,this}addApplication(s){return this.options.applicationId=s,this}addCorrelation(s){return this.options.correlationId=s,this}withToken(s){return this.options.token=s,this}withoutMasking(){return this.options.maskSensitiveData=!1,this}withIndexedContext(s){return this.options.sourceKey=s.sourceKey,this.options.sourceDisplayName=s.sourceDisplayName,this.options.externalSystemKey=s.externalSystemKey,this.options.externalSystemDisplayName=s.externalSystemDisplayName,this.options.recordKey=s.recordKey,this.options.recordDisplayName=s.recordDisplayName,this}withCredentialContext(s,c){return this.options.credentialId=s,this.options.credentialType=c,this}withRequestMetrics(s,c,i){return this.options.requestSize=s,this.options.responseSize=c,this.options.durationMs=i,this}withRequest(s){const c=(0,e.extractRequestContext)(s);return c.userId&&(this.options.userId=c.userId),c.sessionId&&(this.options.sessionId=c.sessionId),c.correlationId&&(this.options.correlationId=c.correlationId),c.requestId&&(this.options.requestId=c.requestId),c.ipAddress&&(this.options.ipAddress=c.ipAddress),c.userAgent&&(this.options.userAgent=c.userAgent),c.method&&(this.context.method=c.method),c.path&&(this.context.path=c.path),c.referer&&(this.context.referer=c.referer),c.requestSize!==void 0&&(this.context.requestSize=c.requestSize),this}async error(s,c){await this.logger.error(s,this.context,c,this.options)}async info(s){await this.logger.info(s,this.context,this.options)}async audit(s,c){await this.logger.audit(s,c,this.context,this.options)}}return nl.LoggerChain=t,nl}var Ds={},lC;function Hv(){if(lC)return Ds;lC=1;var e={},t=Ds&&Ds.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.extractJwtContext=i,Ds.extractEnvironmentMetadata=o,Ds.getLogWithRequest=l,Ds.getWithContext=f,Ds.getWithToken=p;const n=t(Ci()),s=ho(),c=Tu();function i(h){if(!h)return{};try{const u=n.default.decode(h);return u?{userId:u.sub||u.userId||u.user_id,applicationId:u.applicationId||u.app_id,sessionId:u.sessionId||u.sid,roles:u.roles||u.realm_access?.roles||[],permissions:u.permissions||u.scope?.split(" ")||[]}:{}}catch{return{}}}function o(){const h={};if(typeof globalThis<"u"&&"window"in globalThis){const u=globalThis,m=u.window?.navigator,g=u.window?.location;h.userAgent=m?.userAgent,h.hostname=g?.hostname}return typeof process<"u"&&e&&(h.hostname=e.HOSTNAME||"unknown"),h}function l(h,u,m="info",g,v,S,w,C){const N=(0,c.extractRequestContext)(h),I=i(h.headers.authorization?.replace("Bearer ","")),R=o(),D=v.getApplicationContext(),A=N.correlationId||S(),O=w&&g?s.DataMasker.maskSensitiveData(g):g;let x=I.applicationId||"";return!x&&D.applicationId&&(x=D.applicationId),{timestamp:new Date().toISOString(),level:m,environment:D.environment||"unknown",application:D.application||C||"",applicationId:x,message:u,context:O,correlationId:A,userId:N.userId||I.userId,sessionId:N.sessionId||I.sessionId,requestId:N.requestId,ipAddress:N.ipAddress||R.ipAddress,userAgent:N.userAgent||R.userAgent,...R}}function f(h,u,m="info",g,v,S,w){const C=o(),N=v(),I=g.getApplicationContext(),R=S?s.DataMasker.maskSensitiveData(h):h;return{timestamp:new Date().toISOString(),level:m,environment:I.environment||"unknown",application:I.application||w||"",applicationId:I.applicationId||"",message:u,context:R,correlationId:N,...C}}function p(h,u,m="info",g,v,S,w,C){const N=i(h),I=o(),R=S(),D=v.getApplicationContext(),A=w&&g?s.DataMasker.maskSensitiveData(g):g;let O=N.applicationId||"";return!O&&D.applicationId&&(O=D.applicationId),{timestamp:new Date().toISOString(),level:m,environment:D.environment||"unknown",application:D.application||C||"",applicationId:O,message:u,context:A,correlationId:R,userId:N.userId,sessionId:N.sessionId,...I}}return Ds}var uC;function Fx(){if(uC)return el;uC=1,Object.defineProperty(el,"__esModule",{value:!0}),el.LoggerService=void 0;const e=u2,t=ho(),n=w2(),s=Mv(),c=bu(),i=Hv();class o extends e.EventEmitter{constructor(f,p){super(),this.maskSensitiveData=!0,this.correlationCounter=0,this.auditLogQueue=null,this.httpLoggingFailures=0,this.httpLoggingDisabledUntil=null,this.config=f.config,this.redis=p,this.httpClient=f,this.applicationContextService=new c.ApplicationContextService(f);const h=this.config.audit||{};(h.batchSize!==void 0||h.batchInterval!==void 0)&&(this.auditLogQueue=new n.AuditLogQueue(f,p,this.config,this))}setApiClient(f){this.apiClient=f,this.auditLogQueue&&this.auditLogQueue.setApiClient(f)}getApplicationContextService(){return this.applicationContextService}setMasking(f){this.maskSensitiveData=f}generateCorrelationId(){this.correlationCounter=(this.correlationCounter+1)%1e4;const f=Date.now(),p=Math.random().toString(36).substring(2,8);return`${this.config.clientId.substring(0,10)}-${f}-${this.correlationCounter}-${p}`}async error(f,p,h,u){await this.log("error",f,p,h,u)}async audit(f,p,h,u){const m={action:f,resource:p,...h};await this.log("audit",`Audit: ${f} on ${p}`,m,void 0,u)}async info(f,p,h){await this.log("info",f,p,void 0,h)}async debug(f,p,h){this.config.logLevel==="debug"&&await this.log("debug",f,p,void 0,h)}async log(f,p,h,u,m){const g=m?.token?(0,i.extractJwtContext)(m.token):{},v=(0,i.extractEnvironmentMetadata)(),S=m?.correlationId||this.generateCorrelationId(),C=m?.maskSensitiveData!==!1&&this.maskSensitiveData&&h?t.DataMasker.maskSensitiveData(h):h,N=this.applicationContextService.getApplicationContext();let I=m?.applicationId||"";!I&&N.applicationId&&(I=N.applicationId),!I&&g.applicationId&&(I=g.applicationId);const R={timestamp:new Date().toISOString(),level:f,environment:N.environment||"unknown",application:N.application||this.config.clientId,applicationId:I,message:p,context:C,stackTrace:u,correlationId:S,userId:m?.userId||g.userId,sessionId:m?.sessionId||g.sessionId,requestId:m?.requestId,ipAddress:m?.ipAddress||v.ipAddress,userAgent:m?.userAgent||v.userAgent,...v,sourceKey:m?.sourceKey,sourceDisplayName:m?.sourceDisplayName,externalSystemKey:m?.externalSystemKey,externalSystemDisplayName:m?.externalSystemDisplayName,recordKey:m?.recordKey,recordDisplayName:m?.recordDisplayName,credentialId:m?.credentialId,credentialType:m?.credentialType,requestSize:m?.requestSize,responseSize:m?.responseSize,durationMs:m?.durationMs,errorCategory:m?.errorCategory,httpStatusCategory:m?.httpStatusCategory};if(this.config.emitEvents){this.emit("log",R);return}if(f==="audit"&&this.auditLogQueue){await this.auditLogQueue.add(R);return}if(this.redis.isConnected()){const A=`logs:${this.config.clientId}`;if(await this.redis.rpush(A,JSON.stringify(R)))return}const D=Date.now();if(!(this.httpLoggingDisabledUntil&&D<this.httpLoggingDisabledUntil))try{if(!this.apiClient)throw new Error("ApiClient not initialized. Call setApiClient() before logging.");const A=f==="audit"?"audit":f==="error"?"error":"general",O=f==="audit"?"info":f==="error"?"error":f==="info"?"info":"debug",x={...R.context,userId:R.userId,sessionId:R.sessionId,requestId:R.requestId,ipAddress:R.ipAddress,userAgent:R.userAgent,hostname:R.hostname,applicationId:R.applicationId,sourceKey:R.sourceKey,sourceDisplayName:R.sourceDisplayName,externalSystemKey:R.externalSystemKey,externalSystemDisplayName:R.externalSystemDisplayName,recordKey:R.recordKey,recordDisplayName:R.recordDisplayName,credentialId:R.credentialId,credentialType:R.credentialType,requestSize:R.requestSize,responseSize:R.responseSize,durationMs:R.durationMs,errorCategory:R.errorCategory,httpStatusCategory:R.httpStatusCategory};if(Object.keys(x).forEach(M=>{x[M]===void 0&&delete x[M]}),R.stackTrace&&(x.stackTrace=R.stackTrace),f==="audit"){const M=x.action,G=x.resource,V=x.entityType,z=x.entityId,q=x.oldValues,H=x.newValues;delete x.action,delete x.resource,delete x.entityType,delete x.entityId,delete x.oldValues,delete x.newValues;const $=V||(G&&G.startsWith("/api/")?"API Endpoint":"HTTP Request"),K=z||G||"unknown",X=M||"unknown";await this.apiClient.logs.createLog({type:A,data:{level:O,message:R.message,context:x,correlationId:R.correlationId,entityType:$,entityId:K,action:X,oldValues:q,newValues:H}})}else await this.apiClient.logs.createLog({type:A,data:{level:O,message:R.message,context:x,correlationId:R.correlationId}});this.httpLoggingFailures=0,this.httpLoggingDisabledUntil=null}catch(A){A instanceof Error&&(A.message.includes("401")||A.message.includes("Unauthorized")||A.statusCode===401)||(this.httpLoggingFailures++,this.httpLoggingFailures>=o.MAX_FAILURES&&(this.httpLoggingDisabledUntil=D+o.DISABLE_DURATION_MS,this.httpLoggingFailures=0))}}withContext(f){return new s.LoggerChain(this,f)}withToken(f){return new s.LoggerChain(this,{},{token:f})}withoutMasking(){return new s.LoggerChain(this,{},{maskSensitiveData:!1})}getLogWithRequest(f,p,h="info",u){return(0,i.getLogWithRequest)(f,p,h,u,this.applicationContextService,()=>this.generateCorrelationId(),this.maskSensitiveData,this.config.clientId)}getWithContext(f,p,h="info"){return(0,i.getWithContext)(f,p,h,this.applicationContextService,()=>this.generateCorrelationId(),this.maskSensitiveData,this.config.clientId)}getWithToken(f,p,h="info",u){return(0,i.getWithToken)(f,p,h,u,this.applicationContextService,()=>this.generateCorrelationId(),this.maskSensitiveData,this.config.clientId)}getForRequest(f,p,h="info",u){return this.getLogWithRequest(f,p,h,u)}forRequest(f){return new s.LoggerChain(this,{},{}).withRequest(f)}}return el.LoggerService=o,o.MAX_FAILURES=3,o.DISABLE_DURATION_MS=6e4,el}var sl={},dC;function Wf(){if(dC)return sl;dC=1,Object.defineProperty(sl,"__esModule",{value:!0}),sl.UnifiedLoggerService=void 0;const e=Hv();class t{constructor(s,c){this.loggerService=s,this.contextStorage=c}getContext(){return this.contextStorage.getContext()||{}}buildLoggingOptions(s){const c={ipAddress:s.ipAddress,userAgent:s.userAgent,correlationId:s.correlationId,userId:s.userId,sessionId:s.sessionId,requestId:s.requestId,applicationId:s.applicationId,token:s.token,maskSensitiveData:!0},o=this.loggerService.getApplicationContextService().getApplicationContext();if(s.token){const l=(0,e.extractJwtContext)(s.token);!c.userId&&l.userId&&(c.userId=l.userId),!c.sessionId&&l.sessionId&&(c.sessionId=l.sessionId),!c.applicationId&&l.applicationId&&(c.applicationId=l.applicationId)}return!c.applicationId&&o.applicationId&&(c.applicationId=o.applicationId),c}extractErrorContext(s){if(!s)return{};if(s instanceof Error)return{stackTrace:s.stack,errorName:s.name,errorMessage:s.message};if(typeof s=="string")return{errorMessage:s};if(typeof s=="object"&&s!==null){const c=s;return{stackTrace:c.stack,errorName:c.name,errorMessage:c.message}}return{}}async info(s){try{const c=this.getContext(),i=this.buildLoggingOptions(c);await this.loggerService.info(s,void 0,i)}catch{}}async warn(s){try{const c=this.getContext(),i=this.buildLoggingOptions(c);await this.loggerService.info(s,void 0,i)}catch{}}async debug(s){try{const c=this.getContext(),i=this.buildLoggingOptions(c);await this.loggerService.debug(s,void 0,i)}catch{}}async error(s,c){try{const i=this.getContext(),o=this.buildLoggingOptions(i),l=this.extractErrorContext(c),f={};l.errorName&&(f.errorName=l.errorName),l.errorMessage&&(f.errorMessage=l.errorMessage),await this.loggerService.error(s,f,l.stackTrace,o)}catch{}}async audit(s,c,i,o,l){try{const f=this.getContext(),p=this.buildLoggingOptions(f),h={entityId:i||"unknown"};o!==void 0&&(h.oldValues=o),l!==void 0&&(h.newValues=l),await this.loggerService.audit(s,c,h,p)}catch{}}}return sl.UnifiedLoggerService=t,sl}var il={},fC;function Kf(){if(fC)return il;fC=1,Object.defineProperty(il,"__esModule",{value:!0}),il.LoggerContextStorage=void 0;const e=Pn;class t{constructor(){this.asyncLocalStorage=new e.AsyncLocalStorage}static getInstance(){return t.instance||(t.instance=new t),t.instance}getContext(){const s=this.asyncLocalStorage.getStore();return s===void 0?null:s}setContext(s){const c=this.asyncLocalStorage.getStore()||{};this.asyncLocalStorage.enterWith({...c,...s})}clearContext(){this.asyncLocalStorage.enterWith({})}mergeContext(s){const c=this.asyncLocalStorage.getStore()||{};this.asyncLocalStorage.enterWith({...c,...s})}runWithContext(s,c){const i={...this.asyncLocalStorage.getStore()||{},...s};return this.asyncLocalStorage.run(i,c)}async runWithContextAsync(s,c){const i={...this.asyncLocalStorage.getStore()||{},...s};return this.asyncLocalStorage.run(i,c)}}return il.LoggerContextStorage=t,t.instance=null,il}var $s={},hC;function hu(){if(hC)return $s;hC=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.LoggerServiceRegistry=void 0,$s.getLogger=s,$s.setLoggerContext=c,$s.clearLoggerContext=i,$s.mergeLoggerContext=o,$s.registerLoggerService=l;const e=Wf(),t=Kf();class n{static register(p){n.instance=p}static get(){return n.instance}static clear(){n.instance=null}}$s.LoggerServiceRegistry=n,n.instance=null;function s(f){const p=t.LoggerContextStorage.getInstance(),h=f||n.get();if(!h)throw new Error("LoggerService not available. Either pass LoggerService to getLogger() or ensure MisoClient is initialized.");return new e.UnifiedLoggerService(h,p)}function c(f){t.LoggerContextStorage.getInstance().setContext(f)}function i(){t.LoggerContextStorage.getInstance().clearContext()}function o(f){t.LoggerContextStorage.getInstance().mergeContext(f)}function l(f){n.register(f)}return $s}var pC;function Gy(){return pC||(pC=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.registerLoggerService=e.mergeLoggerContext=e.clearLoggerContext=e.setLoggerContext=e.getLogger=e.LoggerContextStorage=e.UnifiedLoggerService=e.LoggerChain=e.LoggerService=void 0;var t=Fx();Object.defineProperty(e,"LoggerService",{enumerable:!0,get:function(){return t.LoggerService}});var n=Mv();Object.defineProperty(e,"LoggerChain",{enumerable:!0,get:function(){return n.LoggerChain}});var s=Wf();Object.defineProperty(e,"UnifiedLoggerService",{enumerable:!0,get:function(){return s.UnifiedLoggerService}});var c=Kf();Object.defineProperty(e,"LoggerContextStorage",{enumerable:!0,get:function(){return c.LoggerContextStorage}});var i=hu();Object.defineProperty(e,"getLogger",{enumerable:!0,get:function(){return i.getLogger}}),Object.defineProperty(e,"setLoggerContext",{enumerable:!0,get:function(){return i.setLoggerContext}}),Object.defineProperty(e,"clearLoggerContext",{enumerable:!0,get:function(){return i.clearLoggerContext}}),Object.defineProperty(e,"mergeLoggerContext",{enumerable:!0,get:function(){return i.mergeLoggerContext}}),Object.defineProperty(e,"registerLoggerService",{enumerable:!0,get:function(){return i.registerLoggerService}})})(by)),by}var zo={};class Fv{constructor(t){this.options=t||{},this.connected=!1}async connect(){return console.warn("[Redis Stub] Redis.connect() called in browser - Redis is server-side only"),this.connected=!0,Promise.resolve()}async disconnect(){return this.connected=!1,Promise.resolve()}async get(t){return null}async set(t,n){return"OK"}async del(t){return 0}async rpush(t,n){return 0}async lpop(t){return null}async exists(t){return 0}async expire(t,n){return 0}async keys(t){return[]}isConnected(){return!1}on(){return this}off(){return this}once(){return Promise.resolve({})}emit(){return!1}}const sf=Fv;typeof ze<"u"&&typeof ze.exports<"u"&&(ze.exports=sf,ze.exports.default=sf,ze.exports.Redis=Fv);const Wx=Object.freeze(Object.defineProperty({__proto__:null,Redis:sf,RedisStub:Fv,default:sf},Symbol.toStringTag,{value:"Module"}));var mC;function gC(){if(mC)return zo;mC=1;var e=zo&&zo.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(zo,"__esModule",{value:!0}),zo.RedisService=void 0;const t=e(Wx);class n{constructor(c){this.connected=!1,this.config=c}async connect(){if(this.config)try{this.redis=new t.default({host:this.config.host,port:this.config.port,password:this.config.password,db:this.config.db||0,keyPrefix:this.config.keyPrefix||"miso:",maxRetriesPerRequest:3,lazyConnect:!0,enableReadyCheck:!1,disableClientInfo:!0}),await this.redis.connect(),this.connected=!0}catch(c){throw console.error("Failed to connect to Redis:",c),this.connected=!1,c}}async disconnect(){this.redis&&(await this.redis.disconnect(),this.connected=!1)}async get(c){if(!this.redis||!this.connected)return null;try{return await this.redis.get(c)}catch(i){return console.error("Redis get error:",i),null}}async set(c,i,o){if(!this.redis||!this.connected)return!1;try{return await this.redis.setex(c,o,i),!0}catch(l){return console.error("Redis set error:",l),!1}}async delete(c){if(!this.redis||!this.connected)return!1;try{return await this.redis.del(c),!0}catch(i){return console.error("Redis delete error:",i),!1}}async rpush(c,i){if(!this.redis||!this.connected)return!1;try{return await this.redis.rpush(c,i),!0}catch(o){return console.error("Redis rpush error:",o),!1}}isConnected(){return this.connected}}return zo.RedisService=n,zo}var ol={},yC;function vC(){if(yC)return ol;yC=1,Object.defineProperty(ol,"__esModule",{value:!0}),ol.CacheService=void 0;class e{constructor(n){this.memoryCache=new Map,this.redis=n,this.cleanupInterval=setInterval(()=>{this.cleanupExpired()},300*1e3),this.cleanupInterval&&typeof this.cleanupInterval.unref=="function"&&this.cleanupInterval.unref()}cleanupExpired(){const n=Date.now(),s=[];for(const[c,i]of this.memoryCache.entries())i.expiresAt<n&&s.push(c);for(const c of s)this.memoryCache.delete(c)}async get(n){try{if(this.redis&&this.redis.isConnected()){const c=await this.redis.get(n);if(c)try{const i=JSON.parse(c);return this.setInMemory(n,i,300),i}catch(i){return console.warn(`Failed to parse cached data for key ${n}:`,i),await this.delete(n),null}}const s=this.memoryCache.get(n);return s?s.expiresAt<Date.now()?(this.memoryCache.delete(n),null):s.value:null}catch{const c=this.memoryCache.get(n);return c&&c.expiresAt>=Date.now()?c.value:null}}async set(n,s,c){try{const i=JSON.stringify(s);let o=!0;return this.redis&&this.redis.isConnected()&&(o=await this.redis.set(n,i,c)),this.setInMemory(n,s,c),o}catch(i){try{return this.setInMemory(n,s,c),!1}catch{return console.error(`Failed to cache value for key ${n}:`,i),!1}}}setInMemory(n,s,c){const i=Date.now()+c*1e3;this.memoryCache.set(n,{value:s,expiresAt:i})}async delete(n){let s=!1;this.redis&&this.redis.isConnected()&&(s=await this.redis.delete(n));const c=this.memoryCache.delete(n);return s||c}async clear(){this.memoryCache.clear()}destroy(){this.cleanupInterval&&(clearInterval(this.cleanupInterval),this.cleanupInterval=void 0),this.memoryCache.clear()}}return ol.CacheService=e,ol}var al={},vs={},Nd={},wC;function Cu(){if(wC)return Nd;wC=1,Object.defineProperty(Nd,"__esModule",{value:!0}),Nd.isErrorResponse=e;function e(t){if(!t||typeof t!="object")return!1;const n=t;return!(!Array.isArray(n.errors)||!n.errors.every(s=>typeof s=="string")||typeof n.type!="string"||typeof n.title!="string"||typeof n.statusCode!="number"||n.instance!==void 0&&typeof n.instance!="string")}return Nd}var mi={},EC;function Wv(){if(EC)return mi;EC=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.ApiErrorException=mi.MisoClientError=void 0,mi.transformError=t,mi.handleApiError=s;class e extends Error{constructor(i,o,l,f){let p=i;o&&(o.title?p=o.title:o.errors&&o.errors.length>0&&(p=o.errors[0])),super(p),this.name="MisoClientError",this.errorResponse=o,this.errorBody=l,this.statusCode=f??o?.statusCode,Error.captureStackTrace&&Error.captureStackTrace(this,e)}}mi.MisoClientError=e;function t(c){if(c&&typeof c=="object"&&"response"in c){const i=c;if(i.response?.data){const o=i.response.data;if(typeof o=="object"&&o!==null&&"error"in o){const f=o.error,p=f.statusCode??i.response.status??500;return{errors:f.errors??["Unknown error"],type:f.type??"about:blank",title:f.title??i.message??"Unknown error",statusCode:p,instance:f.instance??i.config?.url,correlationId:f.correlationId}}if(typeof o=="object"&&o!==null){const l=o,f=typeof l.statusCode=="number"?l.statusCode:typeof i.response?.status=="number"?i.response.status:500;return{errors:Array.isArray(l.errors)?l.errors:["Unknown error"],type:l.type??"about:blank",title:l.title??i.message??"Unknown error",statusCode:f,instance:l.instance??i.config?.url,correlationId:l.correlationId}}}return{errors:[i.message??"Network error"],type:"about:blank",title:"Network error",statusCode:i.response?.status??0}}return c instanceof Error?{errors:[c.message??"Unknown error"],type:"about:blank",title:"Error",statusCode:0}:{errors:["Unknown error"],type:"about:blank",title:"Unknown error",statusCode:0}}class n extends Error{constructor(i){super(i.title||"API Error"),this.name="ApiErrorException",this.statusCode=i.statusCode,this.correlationId=i.correlationId,this.type=i.type,this.instance=i.instance,this.errors=i.errors,Error.captureStackTrace&&Error.captureStackTrace(this,n)}}mi.ApiErrorException=n;function s(c){const i=t(c);throw new n(i)}return mi}var cl={},SC;function Kx(){if(SC)return cl;SC=1,Object.defineProperty(cl,"__esModule",{value:!0}),cl.AuthStrategyHandler=void 0;class e{static buildAuthHeaders(n,s,c,i){const o={};for(const l of n.methods)switch(l){case"bearer":if(n.bearerToken)return o.Authorization=`Bearer ${n.bearerToken}`,o;break;case"client-token":if(s)return o["x-client-token"]=s,o;break;case"client-credentials":if(c&&i)return o["x-client-id"]=c,o["x-client-secret"]=i,o;break;case"api-key":if(n.apiKey)return o.Authorization=`Bearer ${n.apiKey}`,o;break}return o}static shouldTryMethod(n,s){if(!s.methods.includes(n))return!1;switch(n){case"bearer":return!!s.bearerToken;case"client-token":return!0;case"client-credentials":return!0;case"api-key":return!!s.apiKey;default:return!1}}static getDefaultStrategy(n){return{methods:["bearer","client-token"],bearerToken:n}}static mergeStrategy(n,s){return n?{methods:n.methods.length>0?n.methods:s.methods,bearerToken:n.bearerToken||s.bearerToken,apiKey:n.apiKey||s.apiKey}:s}}return cl.AuthStrategyHandler=e,cl}var Ga={},bC;function Bf(){if(bC)return Ga;bC=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.isBrowser=e,Ga.validateUrl=t,Ga.resolveControllerUrl=n;function e(){return typeof globalThis.window<"u"&&typeof globalThis.localStorage<"u"&&typeof globalThis.fetch<"u"}function t(s){try{const c=new URL(s);return c.protocol==="http:"||c.protocol==="https:"}catch{return!1}}function n(s){const c=e();let i;if(c?i=s.controllerPublicUrl:i=s.controllerPrivateUrl,i||(i=s.controllerUrl),!i)throw new Error(`No controller URL configured. Please provide ${c?"controllerPublicUrl":"controllerPrivateUrl"} or controllerUrl in your configuration.`);if(!t(i))throw new Error(`Invalid controller URL format: "${i}". URL must be a valid HTTP or HTTPS URL.`);return i.includes("localhost")&&(i=i.replace(/localhost/g,"127.0.0.1")),i}return Ga}var Ty={},TC;function E2(){return TC||(TC=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateErrorResponse=void 0,e.validateSuccessResponse=t,e.validatePaginatedResponse=n,e.getResponseType=c;function t(i){if(!i||typeof i!="object")return!1;const o=i;return!(typeof o.success!="boolean"||typeof o.timestamp!="string"||o.message!==void 0&&typeof o.message!="string")}function n(i){if(!i||typeof i!="object")return!1;const o=i;if(!Array.isArray(o.data)||!o.meta||typeof o.meta!="object")return!1;const l=o.meta;if(typeof l.totalItems!="number"||typeof l.currentPage!="number"||typeof l.pageSize!="number"||typeof l.type!="string")return!1;if(o.links!==void 0){if(typeof o.links!="object"||o.links===null)return!1;const f=o.links;if(f.first!==void 0&&typeof f.first!="string"||f.prev!==void 0&&typeof f.prev!="string"||f.next!==void 0&&typeof f.next!="string"||f.last!==void 0&&typeof f.last!="string")return!1}return!0}var s=Cu();Object.defineProperty(e,"validateErrorResponse",{enumerable:!0,get:function(){return s.isErrorResponse}});function c(i){return t(i)?"success":n(i)?"paginated":"unknown"}})(Ty)),Ty}var CC;function Bx(){if(CC)return vs;CC=1;var e=vs&&vs.__createBinding||(Object.create?(function(h,u,m,g){g===void 0&&(g=m);var v=Object.getOwnPropertyDescriptor(u,m);(!v||("get"in v?!u.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return u[m]}}),Object.defineProperty(h,g,v)}):(function(h,u,m,g){g===void 0&&(g=m),h[g]=u[m]})),t=vs&&vs.__setModuleDefault||(Object.create?(function(h,u){Object.defineProperty(h,"default",{enumerable:!0,value:u})}):function(h,u){h.default=u}),n=vs&&vs.__importStar||(function(){var h=function(u){return h=Object.getOwnPropertyNames||function(m){var g=[];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(g[g.length]=v);return g},h(u)};return function(u){if(u&&u.__esModule)return u;var m={};if(u!=null)for(var g=h(u),v=0;v<g.length;v++)g[v]!=="default"&&e(m,u,g[v]);return t(m,u),m}})();Object.defineProperty(vs,"__esModule",{value:!0}),vs.InternalHttpClient=void 0;const s=n(xx()),c=Cu(),i=Wv(),o=Kx(),l=Bf(),f=E2();class p{constructor(u){this.clientToken=null,this.tokenExpiresAt=null,this.tokenRefreshPromise=null,this.config=u,u.clientToken&&(this.clientToken=u.clientToken,u.clientTokenExpiresAt&&(this.tokenExpiresAt=typeof u.clientTokenExpiresAt=="string"?new Date(u.clientTokenExpiresAt):u.clientTokenExpiresAt));const m=(0,l.resolveControllerUrl)(u),g=m.startsWith("https://");let v,S;if(typeof globalThis.window>"u"){const w=Pn,C=Pn,N=3e4;v=g?void 0:new w.Agent({family:4,timeout:N,keepAlive:!1}),S=g?new C.Agent({family:4,timeout:N,keepAlive:!1}):void 0}this.axios=s.default.create({baseURL:m,timeout:3e4,httpAgent:v,httpsAgent:S,headers:{"Content-Type":"application/json"}}),this.axios.interceptors.request.use(async w=>{if(w.headers=w.headers||{},!w.headers["x-client-token"]&&!w.headers["x-client-id"]){const C=await this.getClientToken();C?w.headers["x-client-token"]=C:console.warn("Client token is not available. Ensure clientSecret or onClientTokenRefresh is configured.")}return w},w=>Promise.reject(w)),this.axios.interceptors.response.use(w=>w,w=>(w.response?.status===401&&(w.message="Authentication failed - token may be invalid",this.clientToken=null,this.tokenExpiresAt=null),Promise.reject(w)))}async getClientToken(){const u=new Date;if(this.clientToken&&this.tokenExpiresAt&&this.tokenExpiresAt>new Date(u.getTime()+6e4))return this.clientToken;if(this.tokenRefreshPromise)return this.tokenRefreshPromise;if(this.config.onClientTokenRefresh){this.tokenRefreshPromise=this.refreshClientTokenFromCallback();try{return await this.tokenRefreshPromise}finally{this.tokenRefreshPromise=null}}if(this.config.clientSecret){this.tokenRefreshPromise=this.fetchClientToken();try{return await this.tokenRefreshPromise}finally{this.tokenRefreshPromise=null}}return null}async refreshClientTokenFromCallback(){if(!this.config.onClientTokenRefresh)throw new Error("Client token expired and no refresh callback provided");try{const u=await this.config.onClientTokenRefresh();if(this.clientToken=u.token,u.expiresIn){const m=u.expiresIn-30;this.tokenExpiresAt=new Date(Date.now()+m*1e3)}return this.clientToken}catch(u){throw this.clientToken=null,this.tokenExpiresAt=null,u}}mergeAbortSignals(u,m){const g=new AbortController,v=()=>g.abort();return u.addEventListener("abort",v),m.addEventListener("abort",v),g.signal}generateCorrelationId(){const u=Date.now(),m=Math.random().toString(36).substring(2,8);return`${this.config.clientId.substring(0,10)}-${u}-${m}`}async fetchClientToken(){if(!this.config.clientSecret)throw new Error("Cannot fetch client token: clientSecret is required but not provided");const u=this.generateCorrelationId(),m=this.config.clientId;try{const v=new AbortController,S=setTimeout(()=>{v.abort()},3e4),w=await Promise.resolve().then(()=>n(Pn)),C=await Promise.resolve().then(()=>n(Pn)),N=(0,l.resolveControllerUrl)(this.config),I=N.startsWith("https://"),R=I?new C.Agent({family:4,timeout:3e4}):new w.Agent({family:4,timeout:3e4}),A=s.default.create({baseURL:N,timeout:3e4,signal:v.signal,httpAgent:I?void 0:R,httpsAgent:I?R:void 0,headers:{"Content-Type":"application/json","x-client-id":this.config.clientId,"x-client-secret":this.config.clientSecret}}).post("/api/v1/auth/token"),O=new Promise((H,$)=>{setTimeout(()=>{$(new Error("Request timeout after 30000ms"))},3e4)});let x;try{x=await Promise.race([A,O]),clearTimeout(S)}catch(H){throw clearTimeout(S),H}const M=x.data.data?.token||x.data.token,G=x.data.data?.expiresIn||x.data.expiresIn,V=x.data.success===!0,z=x.status>=200&&x.status<300;if(M&&(V||z)){if(this.clientToken=M,G){const H=G-30;this.tokenExpiresAt=new Date(Date.now()+H*1e3)}return this.clientToken}const q=JSON.stringify({status:x.status,statusText:x.statusText,data:x.data,headers:x.headers});throw new Error(`Failed to get client token: Invalid response format. Expected {success: true, token: string}. Full response: ${q} [correlationId: ${u}, clientId: ${m}]`)}catch(g){if(this.isAxiosError(g)){const S=[];throw g.response?(S.push(`status: ${g.response.status}`),S.push(`statusText: ${g.response.statusText}`),S.push(`data: ${JSON.stringify(g.response.data)}`),g.response.headers&&S.push(`headers: ${JSON.stringify(g.response.headers)}`)):g.request?(S.push("request: [Request object - contains circular references]"),S.push(`message: ${g.message}`),S.push(`code: ${g.code||"N/A"}`)):S.push(`message: ${g.message}`),new Error(`Failed to get client token: ${g.message}. Full response: {${S.join(", ")}} [correlationId: ${u}, clientId: ${m}]`)}const v=g instanceof Error?g.message:"Unknown error";throw new Error(`Failed to get client token: ${v} [correlationId: ${u}, clientId: ${m}]`)}}isAxiosError(u){return u instanceof s.AxiosError?!0:typeof u=="object"&&u!==null&&"isAxiosError"in u?u.isAxiosError===!0:!1}validateResponse(u,m){if(this.config.validateResponses===!1||(m.includes("/api/v1/auth/validate")||m.includes("/api/auth/validate"))&&u&&typeof u=="object"&&"data"in u)return!0;const g=(0,f.getResponseType)(u);if(g==="unknown")return console.warn(`Response validation failed for ${m}: Response structure doesn't match expected format.`,"Expected: success response ({success, data?, message?, timestamp}) or paginated response ({data[], meta, links?}).","Actual:",u),!1;if(g==="success"){if(!(0,f.validateSuccessResponse)(u))return console.warn(`Response validation failed for ${m}: Success response structure invalid.`,"Expected: {success: boolean, data?: T, message?: string, timestamp: string}.","Actual:",u),!1}else if(g==="paginated"&&!(0,f.validatePaginatedResponse)(u))return console.warn(`Response validation failed for ${m}: Paginated response structure invalid.`,"Expected: {data: T[], meta: {totalItems, currentPage, pageSize, type}, links?}.","Actual:",u),!1;return!0}parseErrorResponse(u,m){try{if(!u.response?.data)return null;const g=u.response.data;if(typeof g=="object"&&g!==null&&(0,c.isErrorResponse)(g))return{errors:g.errors,type:g.type,title:g.title,statusCode:g.statusCode,instance:g.instance||m};if(typeof g=="string")try{const v=JSON.parse(g);if((0,c.isErrorResponse)(v))return{errors:v.errors,type:v.type,title:v.title,statusCode:v.statusCode,instance:v.instance||m}}catch{return null}return null}catch{return null}}createMisoClientError(u,m){const g=u.response?.status,v=this.parseErrorResponse(u,m);let S;u.response?.data&&typeof u.response.data=="object"&&(S=u.response.data);let w=u.message||"Request failed";return u.response&&(w=u.response.statusText||`Request failed with status code ${g}`),new i.MisoClientError(w,v||void 0,S,g)}getAxiosInstance(){return this.axios}async get(u,m){const v=new AbortController,S=setTimeout(()=>{v.abort()},3e4),w={...m,signal:m?.signal?this.mergeAbortSignals(v.signal,m.signal):v.signal},C=this.axios.get(u,w),N=new Promise((I,R)=>{setTimeout(()=>{R(new Error("Request timeout after 30000ms"))},3e4)});try{const I=await Promise.race([C,N]);clearTimeout(S);const R=I.config?.url||u;return this.validateResponse(I.data,R),I.data}catch(I){if(clearTimeout(S),this.isAxiosError(I)){const R=I.config?.url||u;throw this.createMisoClientError(I,R)}throw I}}async post(u,m,g){const S=new AbortController,w=setTimeout(()=>{S.abort()},3e4),C={...g,signal:g?.signal?this.mergeAbortSignals(S.signal,g.signal):S.signal},N=this.axios.post(u,m,C),I=new Promise((R,D)=>{setTimeout(()=>{D(new Error("Request timeout after 30000ms"))},3e4)});try{const R=await Promise.race([N,I]);clearTimeout(w);const D=R.config?.url||u;return this.validateResponse(R.data,D),R.data}catch(R){if(clearTimeout(w),this.isAxiosError(R)){const D=R.config?.url||u;throw this.createMisoClientError(R,D)}throw R}}async put(u,m,g){const S=new AbortController,w=setTimeout(()=>{S.abort()},3e4),C={...g,signal:g?.signal?this.mergeAbortSignals(S.signal,g.signal):S.signal},N=this.axios.put(u,m,C),I=new Promise((R,D)=>{setTimeout(()=>{D(new Error("Request timeout after 30000ms"))},3e4)});try{const R=await Promise.race([N,I]);clearTimeout(w);const D=R.config?.url||u;return this.validateResponse(R.data,D),R.data}catch(R){if(clearTimeout(w),this.isAxiosError(R)){const D=R.config?.url||u;throw this.createMisoClientError(R,D)}throw R}}async delete(u,m){const v=new AbortController,S=setTimeout(()=>{v.abort()},3e4),w={...m,signal:m?.signal?this.mergeAbortSignals(v.signal,m.signal):v.signal},C=this.axios.delete(u,w),N=new Promise((I,R)=>{setTimeout(()=>{R(new Error("Request timeout after 30000ms"))},3e4)});try{const I=await Promise.race([C,N]);clearTimeout(S);const R=I.config?.url||u;return this.validateResponse(I.data,R),I.data}catch(I){if(clearTimeout(S),this.isAxiosError(I)){const R=I.config?.url||u;throw this.createMisoClientError(I,R)}throw I}}async request(u,m,g,v){switch(u){case"GET":return this.get(m,v);case"POST":return this.post(m,g,v);case"PUT":return this.put(m,g,v);case"DELETE":return this.delete(m,v);default:throw new Error(`Unsupported HTTP method: ${u}`)}}async authenticatedRequest(u,m,g,v,S,w){let C;if(w){const N=await this.getClientToken(),I=o.AuthStrategyHandler.buildAuthHeaders(w,N,this.config.clientId,this.config.clientSecret);C={...S,headers:{...S?.headers,...I}}}else C={...S,headers:{...S?.headers,Authorization:`Bearer ${g}`}};switch(u){case"GET":return this.get(m,C);case"POST":return this.post(m,v,C);case"PUT":return this.put(m,v,C);case"DELETE":return this.delete(m,C);default:throw new Error(`Unsupported HTTP method: ${u}`)}}async requestWithAuthStrategy(u,m,g,v,S){const w=await this.getClientToken(),C=o.AuthStrategyHandler.buildAuthHeaders(g,w,this.config.clientId,this.config.clientSecret),N={...S,headers:{...S?.headers,...C}};switch(u){case"GET":return this.get(m,N);case"POST":return this.post(m,v,N);case"PUT":return this.put(m,v,N);case"DELETE":return this.delete(m,N);default:throw new Error(`Unsupported HTTP method: ${u}`)}}}return vs.InternalHttpClient=p,vs}var ll={},mn={};const S2="1.0.0",b2="ISO 27001 compliant sensitive fields configuration for data masking",T2={authentication:["password","passwd","pwd","secret","token","key","auth","authorization","cookie","session","apiKey","accessToken","refreshToken"],pii:["email","emailAddress","phone","phoneNumber","telephone","mobile","cellPhone","ssn","socialSecurityNumber","taxId","taxIdentification"],financial:["creditCard","cc","cardNumber","cvv","cvv2","cvc","pin","bankAccount","bankAccountNumber","routingNumber","iban","swift","accountNumber"],security:["otp","oneTimePassword","privateKey","publicKey","encryptionKey","decryptionKey"]},C2=["password","secret","token","key","ssn","creditcard","bankaccount","accountnumber"],_2={version:S2,description:b2,categories:T2,fieldPatterns:C2};var _C;function x2(){if(_C)return mn;_C=1;var e={},t=mn&&mn.__createBinding||(Object.create?(function(g,v,S,w){w===void 0&&(w=S);var C=Object.getOwnPropertyDescriptor(v,S);(!C||("get"in C?!v.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return v[S]}}),Object.defineProperty(g,w,C)}):(function(g,v,S,w){w===void 0&&(w=S),g[w]=v[S]})),n=mn&&mn.__setModuleDefault||(Object.create?(function(g,v){Object.defineProperty(g,"default",{enumerable:!0,value:v})}):function(g,v){g.default=v}),s=mn&&mn.__importStar||(function(){var g=function(v){return g=Object.getOwnPropertyNames||function(S){var w=[];for(var C in S)Object.prototype.hasOwnProperty.call(S,C)&&(w[w.length]=C);return w},g(v)};return function(v){if(v&&v.__esModule)return v;var S={};if(v!=null)for(var w=g(v),C=0;C<w.length;C++)w[C]!=="default"&&t(S,v,w[C]);return n(S,v),S}})(),c=mn&&mn.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(mn,"__esModule",{value:!0}),mn.loadSensitiveFieldsConfig=h,mn.getFieldPatterns=u,mn.getSensitiveFieldsArray=m;const i=s(Mx),o=s(Hx),l=c(_2);function f(){return new Set(["password","passwd","pwd","secret","token","key","auth","authorization","cookie","session","apikey","accesstoken","refreshtoken","email","emailaddress","phone","phonenumber","telephone","mobile","cellphone","ssn","socialsecuritynumber","taxid","taxidentification","creditcard","cc","cardnumber","cvv","cvv2","cvc","pin","bankaccount","bankaccountnumber","routingnumber","iban","swift","accountnumber","otp","onetimepassword","privatekey","publickey","encryptionkey","decryptionkey"])}function p(){return["password","secret","token","key","ssn","creditcard","bankaccount","accountnumber"]}function h(g){if(typeof globalThis<"u"&&"window"in globalThis&&typeof globalThis.window<"u"||typeof process>"u"||!e)return f();try{if(g||e.MISO_SENSITIVE_FIELDS_CONFIG){let v;if(g)v=o.isAbsolute(g)?g:o.resolve(process.cwd(),g);else{const I=e.MISO_SENSITIVE_FIELDS_CONFIG;v=o.isAbsolute(I)?I:o.resolve(process.cwd(),I)}if(!i.existsSync(v))return f();const S=i.readFileSync(v,"utf8"),w=JSON.parse(S),C=new Set;return Object.values(w.categories).forEach(I=>{I.forEach(R=>C.add(R.toLowerCase()))}),f().forEach(I=>C.add(I)),C}try{const v=l.default,S=new Set;return Object.values(v.categories).forEach(C=>{C.forEach(N=>S.add(N.toLowerCase()))}),f().forEach(C=>S.add(C)),S}catch{const v=o.join(__dirname,"sensitive-fields.config.json");if(i.existsSync(v)){const S=i.readFileSync(v,"utf8"),w=JSON.parse(S),C=new Set;return Object.values(w.categories).forEach(I=>{I.forEach(R=>C.add(R.toLowerCase()))}),f().forEach(I=>C.add(I)),C}}return f()}catch{return f()}}function u(g){if(typeof globalThis<"u"&&"window"in globalThis&&typeof globalThis.window<"u"||typeof process>"u"||!e)return p();try{if(g||e.MISO_SENSITIVE_FIELDS_CONFIG){let v;if(g)v=o.isAbsolute(g)?g:o.resolve(process.cwd(),g);else{const C=e.MISO_SENSITIVE_FIELDS_CONFIG;v=o.isAbsolute(C)?C:o.resolve(process.cwd(),C)}if(!i.existsSync(v))return p();const S=i.readFileSync(v,"utf8");return JSON.parse(S).fieldPatterns||p()}try{return l.default.fieldPatterns||p()}catch{const v=o.join(__dirname,"sensitive-fields.config.json");if(i.existsSync(v)){const S=i.readFileSync(v,"utf8");return JSON.parse(S).fieldPatterns||p()}}return p()}catch{return p()}}function m(g){const v=h(g);return Array.from(v)}return mn}var xC;function pc(){if(xC)return ll;xC=1,Object.defineProperty(ll,"__esModule",{value:!0}),ll.DataMasker=void 0;const e=x2();class t{static initializeSensitiveFields(s){return this.configPath!==s&&(this.cachedFields=null,this.cachedFieldPatterns=null,this.configPath=s),this.cachedFields?this.cachedFields:(this.cachedFields=(0,e.loadSensitiveFieldsConfig)(s),this.cachedFieldPatterns=(0,e.getFieldPatterns)(s),this.cachedFields)}static getSensitiveFields(){return this.initializeSensitiveFields(this.configPath)}static getFieldPatterns(){return this.cachedFieldPatterns||(this.cachedFieldPatterns=(0,e.getFieldPatterns)(this.configPath)),this.cachedFieldPatterns}static setConfigPath(s){this.configPath=s,this.cachedFields=null,this.cachedFieldPatterns=null}static isSensitiveField(s){const c=this.getSensitiveFields(),i=this.getFieldPatterns(),o=s.toLowerCase().replace(/[_-]/g,"");if(c.has(o))return!0;for(const l of i)if(o.includes(l.toLowerCase()))return!0;return!1}static maskSensitiveData(s){if(s==null||typeof s!="object")return s;if(Array.isArray(s))return s.map(i=>this.maskSensitiveData(i));const c={};for(const[i,o]of Object.entries(s))this.isSensitiveField(i)?c[i]=this.MASKED_VALUE:typeof o=="object"&&o!==null?c[i]=this.maskSensitiveData(o):c[i]=o;return c}static maskValue(s,c=0,i=0){if(!s||s.length<=c+i)return this.MASKED_VALUE;const o=s.substring(0,c),l=s.substring(s.length-i),f="*".repeat(Math.min(8,s.length-c-i));return`${o}${f}${l}`}static containsSensitiveData(s){if(s==null||typeof s!="object")return!1;if(Array.isArray(s))return s.some(c=>this.containsSensitiveData(c));for(const[c,i]of Object.entries(s))if(this.isSensitiveField(c)||typeof i=="object"&&i!==null&&this.containsSensitiveData(i))return!0;return!1}}return ll.DataMasker=t,t.MASKED_VALUE="***MASKED***",t.cachedFields=null,t.cachedFieldPatterns=null,t.configPath=void 0,ll}var Go={},RC;function R2(){if(RC)return Go;RC=1;var e=Go&&Go.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(Go,"__esModule",{value:!0}),Go.extractRequestMetadata=s,Go.extractUserIdFromToken=l;const t=e(fo()),n=Bf();function s(f,p,h){const u=f?.config||p?.config;if(!u)return null;const m=u.metadata;if(!m)return null;const g=c(m,u,h),v=i(u,p),S=o(f,p);return{...g,...v,...S}}function c(f,p,h){const u=Date.now()-f.startTime,m=f.method||"UNKNOWN",g=f.url||"",v=f.baseURL||(0,n.resolveControllerUrl)(h),S=`${v}${g}`,w=p.headers?.authorization,C=l(w);return{config:p,metadata:f,duration:u,method:m,url:g,fullUrl:S,baseURL:v,statusCode:0,authHeader:w,userId:C}}function i(f,p){return{requestHeaders:f.headers||{},requestBody:f.data||p?.config?.data}}function o(f,p){return{statusCode:f?.status||p?.response?.status||0,responseBody:f?.data||p?.response?.data,responseHeaders:f?.headers||p?.response?.headers||{}}}function l(f){if(!f||!f.startsWith("Bearer "))return null;const p=f.substring(7);try{const h=t.default.decode(p);return h?h.sub||h.userId||h.user_id||h.id:null}catch{return null}}return Go}var ul={},Us={},kC;function k2(){if(kC)return Us;kC=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.estimateObjectSize=t,Us.truncateResponseBody=n,Us.analyzeRequestSizes=s,Us.truncateBodies=c,Us.applyMaskingStrategy=i,Us.applyStandardMasking=o,Us.applyDetailedMasking=l;const e=pc();function t(u){if(u==null)return 0;if(typeof u=="string")return u.length;if(typeof u!="object")return 10;if(Array.isArray(u)){const v=u.length;if(v===0)return 10;const S=Math.min(3,v);let w=0;for(let N=0;N<S;N++)w+=t(u[N]);const C=S>0?w/S:100;return v*C}const m=Object.entries(u);let g=0;for(const[v,S]of m)g+=v.length+t(S);return g}function n(u,m=1e4){if(u==null)return{data:u,truncated:!1};if(typeof u=="string")return u.length<=m?{data:u,truncated:!1}:{data:u.substring(0,m)+"...",truncated:!0};const g=t(u);return g<=m?{data:u,truncated:!1}:{data:{_message:"Response body too large, truncated for performance",_estimatedSize:g},truncated:!0}}function s(u,m,g){const v=u?t(u):0,S=m?t(m):0,w=v<1024&&S<1024,C=v>g||S>g;return{isSmallRequest:w,isLargeRequest:C}}function c(u,m,g){const{data:v,truncated:S}=n(m,g),{data:w,truncated:C}=u&&t(u)>g?n(u,g):{data:u,truncated:!1};return{requestBody:w,responseBody:v,requestTruncated:C,responseTruncated:S}}async function i(u,m,g,v){const S=s(u.requestBody,u.responseBody,v),w=c(u.requestBody,u.responseBody,g);return m==="standard"?o(u.requestHeaders,u.responseHeaders,w.requestBody,w.responseBody,S.isSmallRequest,S.isLargeRequest,w.requestTruncated,w.responseTruncated):l(u.requestHeaders,u.responseHeaders,w.requestBody,w.responseBody,S.isSmallRequest,S.isLargeRequest,w.requestTruncated,w.responseTruncated)}function o(u,m,g,v,S,w,C,N){const I=e.DataMasker.maskSensitiveData(u),R=e.DataMasker.maskSensitiveData(m);let D,A;return S||!w?(D=e.DataMasker.maskSensitiveData(g),A=e.DataMasker.maskSensitiveData(v)):(D={_message:"Request body too large, masking skipped"},A={_message:"Response body too large, masking skipped"}),{headers:I,requestBody:D,responseBody:A,responseHeaders:R,requestTruncated:C,responseTruncated:N}}async function l(u,m,g,v,S,w,C,N){return w?f(u,m,C,N):S?p(u,m,g,v,C,N):h(u,m,g,v,C,N)}function f(u,m,g,v){return{headers:u,requestBody:{_message:"Request body too large, masking skipped"},responseBody:{_message:"Response body too large, masking skipped"},responseHeaders:m,requestTruncated:g,responseTruncated:v}}function p(u,m,g,v,S,w){return{headers:e.DataMasker.maskSensitiveData(u),requestBody:e.DataMasker.maskSensitiveData(g),responseBody:e.DataMasker.maskSensitiveData(v),responseHeaders:e.DataMasker.maskSensitiveData(m),requestTruncated:S,responseTruncated:w}}async function h(u,m,g,v,S,w){const[C,N,I,R]=await Promise.all([Promise.resolve(e.DataMasker.maskSensitiveData(u)),Promise.resolve(e.DataMasker.maskSensitiveData(g)),Promise.resolve(e.DataMasker.maskSensitiveData(v)),Promise.resolve(e.DataMasker.maskSensitiveData(m))]);return{headers:C,requestBody:N,responseBody:I,responseHeaders:R,requestTruncated:S,responseTruncated:w}}return Us}var AC;function A2(){if(AC)return ul;AC=1,Object.defineProperty(ul,"__esModule",{value:!0}),ul.logHttpRequestAudit=t,ul.calculateRequestSizes=c;const e=k2();async function t(p,h,u,m){try{if(!p)return;const g=u.audit||{},v=g.level||"detailed";if(v==="minimal"){await n(p,h,m);return}await s(p,v,g,h,u,m)}catch{}}async function n(p,h,u){await u.audit(`http.request.${p.method}`,p.url,{method:p.method,url:p.fullUrl,statusCode:p.statusCode,duration:p.duration,userId:p.userId||void 0,error:h?.message||void 0},{token:p.userId?void 0:p.authHeader?.replace("Bearer ","")})}async function s(p,h,u,m,g,v){const S=await(0,e.applyMaskingStrategy)({requestHeaders:p.requestHeaders,requestBody:p.requestBody,responseBody:p.responseBody,responseHeaders:p.responseHeaders},h,u.maxResponseSize??1e4,u.maxMaskingSize??5e4),w=h==="detailed"||h==="full"?c(p.requestBody,p.responseBody):{requestSize:void 0,responseSize:void 0},C=i({method:p.method,fullUrl:p.fullUrl,duration:p.duration,statusCode:p.statusCode,userId:p.userId},w,S,h,m);if(await v.audit(`http.request.${p.method}`,p.url,C,{token:p.userId?void 0:p.authHeader?.replace("Bearer ","")}),g.logLevel==="debug")try{await o(p,S,w,m,v)}catch{}}function c(p,h){let u,m;if(p){const g=JSON.stringify(p),v=Buffer.byteLength(g);u=v<=2?void 0:v}if(h){const g=JSON.stringify(h),v=Buffer.byteLength(g);m=v<=2?void 0:v}return{requestSize:u,responseSize:m}}function i(p,h,u,m,g){const v={method:p.method,url:p.fullUrl,statusCode:p.statusCode,duration:p.duration,userId:p.userId||void 0,error:g?.message||void 0};return(m==="detailed"||m==="full")&&(v.requestSize=h.requestSize!==void 0&&h.requestSize>0?h.requestSize:void 0,v.responseSize=h.responseSize!==void 0&&h.responseSize>0?h.responseSize:void 0,u.requestTruncated&&(v.requestTruncated=!0),u.responseTruncated&&(v.responseTruncated=!0)),v}async function o(p,h,u,m,g){const v=l(h.responseBody),S=f(p,h,u,v,m);await g.debug(`HTTP ${p.method} ${p.url}`,S,{token:p.userId?void 0:p.authHeader?.replace("Bearer ","")})}function l(p){if(!p||typeof p!="object")return p;const h=JSON.stringify(p);if(h.length<=1e3)return p;try{return JSON.parse(h.substring(0,1e3)+"...")}catch{return{_message:"Response body truncated"}}}function f(p,h,u,m,g){return{method:p.method,url:p.fullUrl,baseURL:p.baseURL,statusCode:p.statusCode,duration:p.duration,userId:p.userId||void 0,timeout:p.config.timeout||3e4,requestHeaders:h.headers,responseHeaders:h.responseHeaders,requestBody:h.requestBody,responseBody:m,requestSize:u.requestSize!==void 0&&u.requestSize>0?u.requestSize:void 0,responseSize:u.responseSize!==void 0&&u.responseSize>0?u.responseSize:void 0,error:g?.message||void 0}}return ul}var IC;function PC(){if(IC)return al;IC=1,Object.defineProperty(al,"__esModule",{value:!0}),al.HttpClient=void 0;const e=Bx(),t=pc(),n=R2(),s=A2();class c{constructor(o,l){this.config=o,this.logger=l,this.internalClient=new e.InternalHttpClient(o),o.sensitiveFieldsConfig&&t.DataMasker.setConfigPath(o.sensitiveFieldsConfig),this.setupAuditLogging()}setupAuditLogging(){const o=this.internalClient.getAxiosInstance();o.interceptors.request.use(async l=>(this.shouldAuditRequest(l.url||"")&&(l.metadata={startTime:Date.now(),method:l.method?.toUpperCase(),url:l.url,baseURL:l.baseURL}),l),l=>Promise.reject(l)),o.interceptors.response.use(l=>(setTimeout(()=>{this.logHttpRequestAudit(l,null).catch(()=>{})},0),l),l=>(setTimeout(()=>{this.logHttpRequestAudit(l.response,l).catch(()=>{})},0),Promise.reject(l)))}shouldAuditRequest(o){if(this.config.audit?.enabled===!1)return!1;if(this.config.audit?.skipEndpoints){for(const l of this.config.audit.skipEndpoints)if(o&&o.includes(l))return!1}return!(o&&o.includes("/api/v1/logs")||o&&o.includes("/api/v1/auth/token"))}async logHttpRequestAudit(o,l){try{const f=(0,n.extractRequestMetadata)(o,l,this.config);await(0,s.logHttpRequestAudit)(f,l,this.config,this.logger)}catch{}}async get(o,l){return this.internalClient.get(o,l)}async post(o,l,f){return this.internalClient.post(o,l,f)}async put(o,l,f){return this.internalClient.put(o,l,f)}async delete(o,l){return this.internalClient.delete(o,l)}async request(o,l,f,p){return this.internalClient.request(o,l,f,p)}async authenticatedRequest(o,l,f,p,h,u){return this.internalClient.authenticatedRequest(o,l,f,p,h,u)}async requestWithAuthStrategy(o,l,f,p,h){return this.internalClient.requestWithAuthStrategy(o,l,f,p,h)}async validateTokenRequest(o,l){return this.authenticatedRequest("POST","/api/v1/auth/validate",o,{token:o},void 0,l)}async getWithFilters(o,l,f){const p=l.toQueryString(),h=p?`${o}?${p}`:o;return this.internalClient.get(h,f)}async getPaginated(o,l,f){const p=new URLSearchParams;p.append("page",l.page.toString()),p.append("page_size",l.pageSize.toString());const h=`${o}?${p.toString()}`;return this.internalClient.get(h,f)}}return al.HttpClient=c,al}var dl={},fl={},hl={},Ld={},OC;function Ht(){if(OC)return Ld;OC=1,Object.defineProperty(Ld,"__esModule",{value:!0}),Ld.logErrorWithContext=e;function e(t,n="[MisoClient]"){const s=t.correlationId||"no-correlation-id",c=[];c.push(`${t.errorName}: ${t.message}`),t.statusCode!==void 0&&c.push(`Status: ${t.statusCode}`),t.endpoint&&t.method?c.push(`Endpoint: ${t.method} ${t.endpoint}`):t.endpoint?c.push(`Endpoint: ${t.endpoint}`):t.method&&c.push(`Method: ${t.method}`);const i=c.join(" | ");console.error(`${n} [${s}] ${i}`),t.responseBody&&console.error(`${n} [${s}] Response Body:`,JSON.stringify(t.responseBody,null,2)),t.stackTrace&&console.error(`${n} [${s}] Stack Trace:`,t.stackTrace),t.originalError&&console.error(`${n} [${s}] Original Error:`,t.originalError)}return Ld}var jd={},ws={},NC;function zf(){if(NC)return ws;NC=1,Object.defineProperty(ws,"__esModule",{value:!0}),ws.AuthenticationError=ws.TimeoutError=ws.NetworkError=ws.ApiError=void 0;class e extends Error{constructor(i,o,l,f){super(i),this.name="ApiError",this.statusCode=o,this.response=l,this.originalError=f,Error.captureStackTrace&&Error.captureStackTrace(this,e)}}ws.ApiError=e;class t extends e{constructor(i,o){super(i,0,void 0,o),this.name="NetworkError"}}ws.NetworkError=t;class n extends e{constructor(i,o){super(i,408),this.name="TimeoutError"}}ws.TimeoutError=n;class s extends e{constructor(i,o){super(i,401,o),this.name="AuthenticationError"}}return ws.AuthenticationError=s,ws}var LC;function Ft(){if(LC)return jd;LC=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.extractErrorInfo=n;const e=pa(),t=zf();function n(s,c){const i={errorType:"Unknown",errorName:"Error",message:"Unknown error",endpoint:c?.endpoint,method:c?.method,correlationId:c?.correlationId};if(s instanceof e.MisoClientError)i.errorType="MisoClientError",i.errorName=s.name,i.message=s.message,i.statusCode=s.statusCode,i.stackTrace=s.stack,s.errorResponse&&"correlationId"in s.errorResponse&&(i.correlationId=i.correlationId||s.errorResponse.correlationId),s.errorResponse?i.responseBody={errors:s.errorResponse.errors,type:s.errorResponse.type,title:s.errorResponse.title,statusCode:s.errorResponse.statusCode,instance:s.errorResponse.instance,correlationId:s.errorResponse.correlationId}:s.errorBody&&(i.responseBody=s.errorBody);else if(s instanceof t.ApiError){if(i.errorType=s.name,i.errorName=s.name,i.message=s.message,i.statusCode=s.statusCode,i.stackTrace=s.stack,i.originalError=s.originalError,s.response)try{i.responseBody={status:s.statusCode,message:s.message}}catch{}}else s instanceof t.AuthenticationError?(i.errorType="AuthenticationError",i.errorName=s.name,i.message=s.message,i.statusCode=401,i.stackTrace=s.stack):s instanceof t.NetworkError?(i.errorType="NetworkError",i.errorName=s.name,i.message=s.message,i.statusCode=0,i.stackTrace=s.stack):s instanceof t.TimeoutError?(i.errorType="TimeoutError",i.errorName=s.name,i.message=s.message,i.statusCode=408,i.stackTrace=s.stack):s instanceof Error?(i.errorType="Error",i.errorName=s.name,i.message=s.message,i.stackTrace=s.stack):(i.errorType="Unknown",i.errorName="UnknownError",i.message=typeof s=="string"?s:s&&typeof s=="object"&&"message"in s?String(s.message):"Unknown error occurred");return i}return jd}var jC;function I2(){if(jC)return hl;jC=1,Object.defineProperty(hl,"__esModule",{value:!0}),hl.AuthLoginApi=void 0;const e=Ht(),t=Ft();class n{constructor(c){this.httpClient=c}async login(c,i){try{return i?await this.httpClient.requestWithAuthStrategy("GET",n.LOGIN_ENDPOINT,i,void 0,{params:c}):await this.httpClient.request("GET",n.LOGIN_ENDPOINT,void 0,{params:c})}catch(o){const l=(0,t.extractErrorInfo)(o,{endpoint:n.LOGIN_ENDPOINT,method:"GET"});throw(0,e.logErrorWithContext)(l,"[AuthLoginApi]"),o}}async initiateDeviceCode(c,i){try{return i?await this.httpClient.requestWithAuthStrategy("POST",n.LOGIN_ENDPOINT,i,c):await this.httpClient.request("POST",n.LOGIN_ENDPOINT,c)}catch(o){const l=(0,t.extractErrorInfo)(o,{endpoint:n.LOGIN_ENDPOINT,method:"POST"});throw(0,e.logErrorWithContext)(l,"[AuthLoginApi]"),o}}async pollDeviceCodeToken(c){try{return await this.httpClient.request("POST",n.DEVICE_CODE_TOKEN_ENDPOINT,c)}catch(i){const o=(0,t.extractErrorInfo)(i,{endpoint:n.DEVICE_CODE_TOKEN_ENDPOINT,method:"POST"});throw(0,e.logErrorWithContext)(o,"[AuthLoginApi]"),i}}async refreshDeviceCodeToken(c){try{return await this.httpClient.request("POST",n.DEVICE_CODE_REFRESH_ENDPOINT,c)}catch(i){const o=(0,t.extractErrorInfo)(i,{endpoint:n.DEVICE_CODE_REFRESH_ENDPOINT,method:"POST"});throw(0,e.logErrorWithContext)(o,"[AuthLoginApi]"),i}}async getLoginDiagnostics(c){try{const i=c?{environment:c}:void 0,o=await this.httpClient.request("GET",n.LOGIN_DIAGNOSTICS_ENDPOINT,void 0,{params:i});if(o.success!==void 0)return o;if(o.data&&typeof o.data=="object"){const l=o.data;return{success:!0,data:{database:l.database||{},controller:l.controller||{},environment:l.environment||{},keycloak:l.keycloak||{}},timestamp:typeof o.timestamp=="string"?o.timestamp:new Date().toISOString()}}throw new Error(`Unexpected response format from login diagnostics endpoint: ${JSON.stringify(o)}`)}catch(i){const o=(0,t.extractErrorInfo)(i,{endpoint:n.LOGIN_DIAGNOSTICS_ENDPOINT,method:"GET"});throw(0,e.logErrorWithContext)(o,"[AuthLoginApi]"),i}}}return hl.AuthLoginApi=n,n.LOGIN_ENDPOINT="/api/v1/auth/login",n.DEVICE_CODE_TOKEN_ENDPOINT="/api/v1/auth/login/device/token",n.DEVICE_CODE_REFRESH_ENDPOINT="/api/v1/auth/login/device/refresh",n.LOGIN_DIAGNOSTICS_ENDPOINT="/api/v1/auth/login/diagnostics",hl}var pl={},DC;function P2(){if(DC)return pl;DC=1,Object.defineProperty(pl,"__esModule",{value:!0}),pl.AuthTokenApi=void 0;const e=Ft(),t=Ht();class n{constructor(c){this.httpClient=c}async getClientToken(c){try{if(c)return await this.httpClient.requestWithAuthStrategy("POST",n.CLIENT_TOKEN_ENDPOINT,c);const i=await this.httpClient.request("POST",n.CLIENT_TOKEN_ENDPOINT,void 0,{headers:{"x-client-id":this.httpClient.config.clientId||""}});if(i.success!==void 0)return i;if(i.data&&typeof i.data=="object"){const o=i.data;if(typeof o.token=="string")return{success:!0,data:{token:o.token,expiresIn:typeof o.expiresIn=="number"?o.expiresIn:0,expiresAt:typeof o.expiresAt=="string"?o.expiresAt:new Date().toISOString()},timestamp:typeof i.timestamp=="string"?i.timestamp:new Date().toISOString()}}throw new Error(`Unexpected response format from client-token endpoint: ${JSON.stringify(i)}`)}catch(i){const o=(0,e.extractErrorInfo)(i,{endpoint:n.CLIENT_TOKEN_ENDPOINT,method:"POST"});throw(0,t.logErrorWithContext)(o,"[AuthTokenApi]"),i}}async generateClientToken(c){try{if(c)return await this.httpClient.requestWithAuthStrategy("POST",n.CLIENT_TOKEN_LEGACY_ENDPOINT,c);const i=await this.httpClient.request("POST",n.CLIENT_TOKEN_LEGACY_ENDPOINT,void 0,{headers:{"x-client-id":this.httpClient.config.clientId||"","x-client-secret":this.httpClient.config.clientSecret||""}});if(i.success!==void 0)return i;if(i.data&&typeof i.data=="object"){const o=i.data;if(typeof o.token=="string")return{success:!0,token:o.token,expiresIn:typeof o.expiresIn=="number"?o.expiresIn:0,expiresAt:typeof o.expiresAt=="string"?o.expiresAt:new Date().toISOString(),timestamp:typeof i.timestamp=="string"?i.timestamp:new Date().toISOString()}}else if(typeof i.token=="string")return{success:!0,token:i.token,expiresIn:typeof i.expiresIn=="number"?i.expiresIn:0,expiresAt:typeof i.expiresAt=="string"?i.expiresAt:new Date().toISOString(),timestamp:typeof i.timestamp=="string"?i.timestamp:new Date().toISOString()};throw new Error(`Unexpected response format from token endpoint: ${JSON.stringify(i)}`)}catch(i){const o=(0,e.extractErrorInfo)(i,{endpoint:n.CLIENT_TOKEN_LEGACY_ENDPOINT,method:"POST"});throw(0,t.logErrorWithContext)(o,"[AuthTokenApi]"),i}}async validateToken(c,i){try{return await this.httpClient.authenticatedRequest("POST",n.VALIDATE_ENDPOINT,c.token,c,void 0,i)}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:n.VALIDATE_ENDPOINT,method:"POST"});throw(0,t.logErrorWithContext)(l,"[AuthTokenApi]"),o}}async refreshToken(c,i){try{return i?await this.httpClient.requestWithAuthStrategy("POST",n.REFRESH_ENDPOINT,i,c):await this.httpClient.request("POST",n.REFRESH_ENDPOINT,c)}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:n.REFRESH_ENDPOINT,method:"POST"});throw(0,t.logErrorWithContext)(l,"[AuthTokenApi]"),o}}}return pl.AuthTokenApi=n,n.CLIENT_TOKEN_ENDPOINT="/api/v1/auth/client-token",n.CLIENT_TOKEN_LEGACY_ENDPOINT="/api/v1/auth/token",n.VALIDATE_ENDPOINT="/api/v1/auth/validate",n.REFRESH_ENDPOINT="/api/v1/auth/refresh",pl}var ml={},$C;function O2(){if($C)return ml;$C=1,Object.defineProperty(ml,"__esModule",{value:!0}),ml.AuthUserApi=void 0;const e=Ft(),t=Ht();class n{constructor(c){this.httpClient=c}async getUser(c){try{if(c?.bearerToken)return await this.httpClient.authenticatedRequest("GET",n.USER_ENDPOINT,c.bearerToken,void 0,void 0,c);if(c)return await this.httpClient.requestWithAuthStrategy("GET",n.USER_ENDPOINT,c);throw new Error("getUser requires authentication - provide authStrategy with bearerToken")}catch(i){const o=(0,e.extractErrorInfo)(i,{endpoint:n.USER_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(o,"[AuthUserApi]"),i}}async logout(){try{return await this.httpClient.request("POST",n.LOGOUT_ENDPOINT)}catch(c){const i=(0,e.extractErrorInfo)(c,{endpoint:n.LOGOUT_ENDPOINT,method:"POST"});throw(0,t.logErrorWithContext)(i,"[AuthUserApi]"),c}}async logoutWithToken(c){try{return await this.httpClient.request("POST",n.LOGOUT_ENDPOINT,{token:c})}catch(i){const o=(0,e.extractErrorInfo)(i,{endpoint:n.LOGOUT_ENDPOINT,method:"POST"});throw(0,t.logErrorWithContext)(o,"[AuthUserApi]"),i}}async handleCallback(c,i){try{return i?await this.httpClient.requestWithAuthStrategy("GET",n.CALLBACK_ENDPOINT,i,void 0,{params:c}):await this.httpClient.request("GET",n.CALLBACK_ENDPOINT,void 0,{params:c})}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:n.CALLBACK_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(l,"[AuthUserApi]"),o}}}return ml.AuthUserApi=n,n.USER_ENDPOINT="/api/v1/auth/user",n.LOGOUT_ENDPOINT="/api/v1/auth/logout",n.CALLBACK_ENDPOINT="/api/v1/auth/callback",ml}var gl={},UC;function N2(){if(UC)return gl;UC=1,Object.defineProperty(gl,"__esModule",{value:!0}),gl.AuthCacheApi=void 0;const e=Ft(),t=Ht();class n{constructor(c){this.httpClient=c}async getCacheStats(c){try{return c?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.CACHE_STATS_ENDPOINT,c.bearerToken,void 0,void 0,c):c?await this.httpClient.requestWithAuthStrategy("GET",n.CACHE_STATS_ENDPOINT,c):await this.httpClient.request("GET",n.CACHE_STATS_ENDPOINT)}catch(i){const o=(0,e.extractErrorInfo)(i,{endpoint:n.CACHE_STATS_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(o,"[AuthCacheApi]"),i}}async getCachePerformance(c){try{return c?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.CACHE_PERFORMANCE_ENDPOINT,c.bearerToken,void 0,void 0,c):c?await this.httpClient.requestWithAuthStrategy("GET",n.CACHE_PERFORMANCE_ENDPOINT,c):await this.httpClient.request("GET",n.CACHE_PERFORMANCE_ENDPOINT)}catch(i){const o=(0,e.extractErrorInfo)(i,{endpoint:n.CACHE_PERFORMANCE_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(o,"[AuthCacheApi]"),i}}async getCacheEfficiency(c){try{return c?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.CACHE_EFFICIENCY_ENDPOINT,c.bearerToken,void 0,void 0,c):c?await this.httpClient.requestWithAuthStrategy("GET",n.CACHE_EFFICIENCY_ENDPOINT,c):await this.httpClient.request("GET",n.CACHE_EFFICIENCY_ENDPOINT)}catch(i){const o=(0,e.extractErrorInfo)(i,{endpoint:n.CACHE_EFFICIENCY_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(o,"[AuthCacheApi]"),i}}async clearCache(c){try{return c?.bearerToken?await this.httpClient.authenticatedRequest("POST",n.CACHE_CLEAR_ENDPOINT,c.bearerToken,void 0,void 0,c):c?await this.httpClient.requestWithAuthStrategy("POST",n.CACHE_CLEAR_ENDPOINT,c):await this.httpClient.request("POST",n.CACHE_CLEAR_ENDPOINT)}catch(i){const o=(0,e.extractErrorInfo)(i,{endpoint:n.CACHE_CLEAR_ENDPOINT,method:"POST"});throw(0,t.logErrorWithContext)(o,"[AuthCacheApi]"),i}}async invalidateCache(c,i){try{return i?.bearerToken?await this.httpClient.authenticatedRequest("POST",n.CACHE_INVALIDATE_ENDPOINT,i.bearerToken,c,void 0,i):i?await this.httpClient.requestWithAuthStrategy("POST",n.CACHE_INVALIDATE_ENDPOINT,i,c):await this.httpClient.request("POST",n.CACHE_INVALIDATE_ENDPOINT,c)}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:n.CACHE_INVALIDATE_ENDPOINT,method:"POST"});throw(0,t.logErrorWithContext)(l,"[AuthCacheApi]"),o}}}return gl.AuthCacheApi=n,n.CACHE_STATS_ENDPOINT="/api/v1/auth/cache/stats",n.CACHE_PERFORMANCE_ENDPOINT="/api/v1/auth/cache/performance",n.CACHE_EFFICIENCY_ENDPOINT="/api/v1/auth/cache/efficiency",n.CACHE_CLEAR_ENDPOINT="/api/v1/auth/cache/clear",n.CACHE_INVALIDATE_ENDPOINT="/api/v1/auth/cache/invalidate",gl}var qC;function L2(){if(qC)return fl;qC=1,Object.defineProperty(fl,"__esModule",{value:!0}),fl.AuthApi=void 0;const e=I2(),t=P2(),n=O2(),s=N2();class c{constructor(o){this.httpClient=o,this.loginApi=new e.AuthLoginApi(o),this.tokenApi=new t.AuthTokenApi(o),this.userApi=new n.AuthUserApi(o),this.cacheApi=new s.AuthCacheApi(o)}async login(o,l){return this.loginApi.login(o,l)}async initiateDeviceCode(o,l){return this.loginApi.initiateDeviceCode(o,l)}async pollDeviceCodeToken(o){return this.loginApi.pollDeviceCodeToken(o)}async refreshDeviceCodeToken(o){return this.loginApi.refreshDeviceCodeToken(o)}async getLoginDiagnostics(o){return this.loginApi.getLoginDiagnostics(o)}async getClientToken(o){return this.tokenApi.getClientToken(o)}async generateClientToken(o){return this.tokenApi.generateClientToken(o)}async validateToken(o,l){return this.tokenApi.validateToken(o,l)}async refreshToken(o,l){return this.tokenApi.refreshToken(o,l)}async getUser(o){return this.userApi.getUser(o)}async logout(){return this.userApi.logout()}async logoutWithToken(o){return this.userApi.logoutWithToken(o)}async handleCallback(o,l){return this.userApi.handleCallback(o,l)}async getCacheStats(o){return this.cacheApi.getCacheStats(o)}async getCachePerformance(o){return this.cacheApi.getCachePerformance(o)}async getCacheEfficiency(o){return this.cacheApi.getCacheEfficiency(o)}async clearCache(o){return this.cacheApi.clearCache(o)}async invalidateCache(o,l){return this.cacheApi.invalidateCache(o,l)}}return fl.AuthApi=c,fl}var yl={},MC;function j2(){if(MC)return yl;MC=1,Object.defineProperty(yl,"__esModule",{value:!0}),yl.RolesApi=void 0;const e=Ft(),t=Ht();class n{constructor(c){this.httpClient=c}async getRoles(c,i){try{if(i?.bearerToken)return await this.httpClient.authenticatedRequest("GET",n.ROLES_ENDPOINT,i.bearerToken,void 0,{params:c},i);if(i)return await this.httpClient.requestWithAuthStrategy("GET",n.ROLES_ENDPOINT,i,void 0,{params:c});throw new Error("getRoles requires authentication - provide authStrategy with bearerToken")}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:n.ROLES_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(l,"[RolesApi]"),o}}async refreshRoles(c,i){try{if(i?.bearerToken)return await this.httpClient.authenticatedRequest("GET",n.ROLES_REFRESH_ENDPOINT,i.bearerToken,void 0,{params:c},i);if(i)return await this.httpClient.requestWithAuthStrategy("GET",n.ROLES_REFRESH_ENDPOINT,i,void 0,{params:c});throw new Error("refreshRoles requires authentication - provide authStrategy with bearerToken")}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:n.ROLES_REFRESH_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(l,"[RolesApi]"),o}}}return yl.RolesApi=n,n.ROLES_ENDPOINT="/api/v1/auth/roles",n.ROLES_REFRESH_ENDPOINT="/api/v1/auth/roles/refresh",yl}var vl={},HC;function D2(){if(HC)return vl;HC=1,Object.defineProperty(vl,"__esModule",{value:!0}),vl.PermissionsApi=void 0;const e=Ft(),t=Ht();class n{constructor(c){this.httpClient=c}async getPermissions(c,i){try{if(i?.bearerToken)return await this.httpClient.authenticatedRequest("GET",n.PERMISSIONS_ENDPOINT,i.bearerToken,void 0,{params:c},i);if(i)return await this.httpClient.requestWithAuthStrategy("GET",n.PERMISSIONS_ENDPOINT,i,void 0,{params:c});throw new Error("getPermissions requires authentication - provide authStrategy with bearerToken")}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:n.PERMISSIONS_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(l,"[PermissionsApi]"),o}}async refreshPermissions(c,i){try{if(i?.bearerToken)return await this.httpClient.authenticatedRequest("GET",n.PERMISSIONS_REFRESH_ENDPOINT,i.bearerToken,void 0,{params:c},i);if(i)return await this.httpClient.requestWithAuthStrategy("GET",n.PERMISSIONS_REFRESH_ENDPOINT,i,void 0,{params:c});throw new Error("refreshPermissions requires authentication - provide authStrategy with bearerToken")}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:n.PERMISSIONS_REFRESH_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(l,"[PermissionsApi]"),o}}}return vl.PermissionsApi=n,n.PERMISSIONS_ENDPOINT="/api/v1/auth/permissions",n.PERMISSIONS_REFRESH_ENDPOINT="/api/v1/auth/permissions/refresh",vl}var wl={},El={},FC;function $2(){if(FC)return El;FC=1,Object.defineProperty(El,"__esModule",{value:!0}),El.LogsCreateApi=void 0;const e=Ft(),t=Ht(),n=pa();class s{constructor(i){this.httpClient=i}async createLog(i,o){try{if(o?.bearerToken)return await this.httpClient.authenticatedRequest("POST",s.LOGS_ENDPOINT,o.bearerToken,i,void 0,o);if(o)return await this.httpClient.requestWithAuthStrategy("POST",s.LOGS_ENDPOINT,o,i);const l=await this.httpClient.request("POST",s.LOGS_ENDPOINT,i);return l.success!==void 0?l:{success:!0,data:null,message:typeof l.message=="string"?l.message:"Log created successfully",timestamp:typeof l.timestamp=="string"?l.timestamp:new Date().toISOString()}}catch(l){if(!(l instanceof n.MisoClientError&&l.statusCode===401)){const p=(0,e.extractErrorInfo)(l,{endpoint:s.LOGS_ENDPOINT,method:"POST"});(0,t.logErrorWithContext)(p,"[LogsCreateApi]")}throw l}}async createBatchLogs(i,o){try{if(o?.bearerToken)return await this.httpClient.authenticatedRequest("POST",s.LOGS_BATCH_ENDPOINT,o.bearerToken,i,void 0,o);if(o)return await this.httpClient.requestWithAuthStrategy("POST",s.LOGS_BATCH_ENDPOINT,o,i);const l=await this.httpClient.request("POST",s.LOGS_BATCH_ENDPOINT,i);if(l.success!==void 0)return l;{const f=l.data&&typeof l.data=="object"?l.data:void 0;return{success:!0,message:typeof l.message=="string"?l.message:"Batch logs processed",processed:typeof f?.processed=="number"?f.processed:typeof l.processed=="number"?l.processed:0,failed:typeof f?.failed=="number"?f.failed:typeof l.failed=="number"?l.failed:0,errors:Array.isArray(f?.errors)?f.errors:Array.isArray(l.errors)?l.errors:void 0,timestamp:typeof l.timestamp=="string"?l.timestamp:new Date().toISOString()}}}catch(l){if(!(l instanceof n.MisoClientError&&l.statusCode===401)){const p=(0,e.extractErrorInfo)(l,{endpoint:s.LOGS_BATCH_ENDPOINT,method:"POST"});(0,t.logErrorWithContext)(p,"[LogsCreateApi]")}throw l}}}return El.LogsCreateApi=s,s.LOGS_ENDPOINT="/api/v1/logs",s.LOGS_BATCH_ENDPOINT="/api/v1/logs/batch",El}var Sl={},WC;function U2(){if(WC)return Sl;WC=1,Object.defineProperty(Sl,"__esModule",{value:!0}),Sl.LogsListApi=void 0;const e=Ft(),t=Ht();class n{constructor(c){this.httpClient=c}async listGeneralLogs(c,i){try{return i?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_GENERAL_ENDPOINT,i.bearerToken,void 0,{params:c},i):i?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_GENERAL_ENDPOINT,i,void 0,{params:c}):await this.httpClient.request("GET",n.LOGS_GENERAL_ENDPOINT,void 0,{params:c})}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:n.LOGS_GENERAL_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(l,"[LogsListApi]"),o}}async getGeneralLog(c,i,o){try{const l=`${n.LOGS_GENERAL_ENDPOINT}/${c}`,f=i?{environment:i}:void 0;return o?.bearerToken?await this.httpClient.authenticatedRequest("GET",l,o.bearerToken,void 0,{params:f},o):o?await this.httpClient.requestWithAuthStrategy("GET",l,o,void 0,{params:f}):await this.httpClient.request("GET",l,void 0,{params:f})}catch(l){const f=(0,e.extractErrorInfo)(l,{endpoint:n.LOGS_GENERAL_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(f,"[LogsListApi]"),l}}async listAuditLogs(c,i){try{return i?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_AUDIT_ENDPOINT,i.bearerToken,void 0,{params:c},i):i?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_AUDIT_ENDPOINT,i,void 0,{params:c}):await this.httpClient.request("GET",n.LOGS_AUDIT_ENDPOINT,void 0,{params:c})}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:n.LOGS_AUDIT_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(l,"[LogsListApi]"),o}}async getAuditLog(c,i,o){try{const l=`${n.LOGS_AUDIT_ENDPOINT}/${c}`,f=i?{environment:i}:void 0;return o?.bearerToken?await this.httpClient.authenticatedRequest("GET",l,o.bearerToken,void 0,{params:f},o):o?await this.httpClient.requestWithAuthStrategy("GET",l,o,void 0,{params:f}):await this.httpClient.request("GET",l,void 0,{params:f})}catch(l){const f=(0,e.extractErrorInfo)(l,{endpoint:n.LOGS_AUDIT_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(f,"[LogsListApi]"),l}}async listJobLogs(c,i){try{return i?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_JOBS_ENDPOINT,i.bearerToken,void 0,{params:c},i):i?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_JOBS_ENDPOINT,i,void 0,{params:c}):await this.httpClient.request("GET",n.LOGS_JOBS_ENDPOINT,void 0,{params:c})}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:void 0,method:"GET"});throw(0,t.logErrorWithContext)(l,"[LogsListApi]"),o}}async getJobLog(c,i){try{const o=`${n.LOGS_JOBS_ENDPOINT}/${c}`;return i?.bearerToken?await this.httpClient.authenticatedRequest("GET",o,i.bearerToken,void 0,void 0,i):i?await this.httpClient.requestWithAuthStrategy("GET",o,i):await this.httpClient.request("GET",o)}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:void 0,method:"GET"});throw(0,t.logErrorWithContext)(l,"[LogsListApi]"),o}}}return Sl.LogsListApi=n,n.LOGS_GENERAL_ENDPOINT="/api/v1/logs/general",n.LOGS_AUDIT_ENDPOINT="/api/v1/logs/audit",n.LOGS_JOBS_ENDPOINT="/api/v1/logs/jobs",Sl}var bl={},KC;function q2(){if(KC)return bl;KC=1,Object.defineProperty(bl,"__esModule",{value:!0}),bl.LogsStatsApi=void 0;const e=Ft(),t=Ht();class n{constructor(c){this.httpClient=c}async getLogStatsSummary(c,i){try{return i?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_STATS_SUMMARY_ENDPOINT,i.bearerToken,void 0,{params:c},i):i?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_STATS_SUMMARY_ENDPOINT,i,void 0,{params:c}):await this.httpClient.request("GET",n.LOGS_STATS_SUMMARY_ENDPOINT,void 0,{params:c})}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:void 0,method:"GET"});throw(0,t.logErrorWithContext)(l,"[LogsStatsApi]"),o}}async getErrorStats(c,i){try{return i?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_STATS_ERRORS_ENDPOINT,i.bearerToken,void 0,{params:c},i):i?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_STATS_ERRORS_ENDPOINT,i,void 0,{params:c}):await this.httpClient.request("GET",n.LOGS_STATS_ERRORS_ENDPOINT,void 0,{params:c})}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:void 0,method:"GET"});throw(0,t.logErrorWithContext)(l,"[LogsStatsApi]"),o}}async getUserActivityStats(c,i){try{return i?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_STATS_USERS_ENDPOINT,i.bearerToken,void 0,{params:c},i):i?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_STATS_USERS_ENDPOINT,i,void 0,{params:c}):await this.httpClient.request("GET",n.LOGS_STATS_USERS_ENDPOINT,void 0,{params:c})}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:void 0,method:"GET"});throw(0,t.logErrorWithContext)(l,"[LogsStatsApi]"),o}}async getApplicationStats(c,i){try{return i?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_STATS_APPLICATIONS_ENDPOINT,i.bearerToken,void 0,{params:c},i):i?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_STATS_APPLICATIONS_ENDPOINT,i,void 0,{params:c}):await this.httpClient.request("GET",n.LOGS_STATS_APPLICATIONS_ENDPOINT,void 0,{params:c})}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:void 0,method:"GET"});throw(0,t.logErrorWithContext)(l,"[LogsStatsApi]"),o}}}return bl.LogsStatsApi=n,n.LOGS_STATS_SUMMARY_ENDPOINT="/api/v1/logs/stats/summary",n.LOGS_STATS_ERRORS_ENDPOINT="/api/v1/logs/stats/errors",n.LOGS_STATS_USERS_ENDPOINT="/api/v1/logs/stats/users",n.LOGS_STATS_APPLICATIONS_ENDPOINT="/api/v1/logs/stats/applications",bl}var Tl={},BC;function M2(){if(BC)return Tl;BC=1,Object.defineProperty(Tl,"__esModule",{value:!0}),Tl.LogsExportApi=void 0;const e=Ft(),t=Ht();class n{constructor(c){this.httpClient=c}async exportLogs(c,i){try{return i?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_EXPORT_ENDPOINT,i.bearerToken,void 0,{params:c},i):i?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_EXPORT_ENDPOINT,i,void 0,{params:c}):await this.httpClient.request("GET",n.LOGS_EXPORT_ENDPOINT,void 0,{params:c})}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:void 0,method:"GET"});throw(0,t.logErrorWithContext)(l,"[LogsExportApi]"),o}}}return Tl.LogsExportApi=n,n.LOGS_EXPORT_ENDPOINT="/api/v1/logs/export",Tl}var zC;function H2(){if(zC)return wl;zC=1,Object.defineProperty(wl,"__esModule",{value:!0}),wl.LogsApi=void 0;const e=$2(),t=U2(),n=q2(),s=M2();class c{constructor(o){this.httpClient=o,this.create=new e.LogsCreateApi(o),this.list=new t.LogsListApi(o),this.stats=new n.LogsStatsApi(o),this.export=new s.LogsExportApi(o)}async createLog(o,l){return this.create.createLog(o,l)}async createBatchLogs(o,l){return this.create.createBatchLogs(o,l)}async listGeneralLogs(o,l){return this.list.listGeneralLogs(o,l)}async getGeneralLog(o,l,f){return this.list.getGeneralLog(o,l,f)}async listAuditLogs(o,l){return this.list.listAuditLogs(o,l)}async getAuditLog(o,l,f){return this.list.getAuditLog(o,l,f)}async listJobLogs(o,l){return this.list.listJobLogs(o,l)}async getJobLog(o,l){return this.list.getJobLog(o,l)}async getLogStatsSummary(o,l){return this.stats.getLogStatsSummary(o,l)}async getErrorStats(o,l){return this.stats.getErrorStats(o,l)}async getUserActivityStats(o,l){return this.stats.getUserActivityStats(o,l)}async getApplicationStats(o,l){return this.stats.getApplicationStats(o,l)}async exportLogs(o,l){return this.export.exportLogs(o,l)}}return wl.LogsApi=c,wl}var GC;function zx(){if(GC)return dl;GC=1,Object.defineProperty(dl,"__esModule",{value:!0}),dl.ApiClient=void 0;const e=L2(),t=j2(),n=D2(),s=H2();class c{constructor(o){this.auth=new e.AuthApi(o),this.roles=new t.RolesApi(o),this.permissions=new n.PermissionsApi(o),this.logs=new s.LogsApi(o)}}return dl.ApiClient=c,dl}var Dd={},JC;function Jy(){if(JC)return Dd;JC=1,Object.defineProperty(Dd,"__esModule",{value:!0}),Dd.validateOrigin=n;function e(s){return s.trim().toLowerCase().replace(/\/$/,"")}function t(s,c){const i=e(s),o=e(c);if(i===o)return!0;if(c.includes(":*"))try{const l=new URL(i),f=new URL(o.replace(":*",""));if(l.protocol===f.protocol&&l.hostname===f.hostname)return!0}catch{}return!1}function n(s,c){if(!c||c.length===0)return{valid:!0};let i=Array.isArray(s.headers.origin)?s.headers.origin[0]:s.headers.origin;if(!i||typeof i!="string"){const l=Array.isArray(s.headers.referer)?s.headers.referer[0]:s.headers.referer;if(l&&typeof l=="string")try{const f=new URL(l);i=`${f.protocol}//${f.host}`}catch{return{valid:!1,error:"Missing origin header"}}else return{valid:!1,error:"Missing origin header"}}const o=i;for(const l of c)if(t(o,l))return{valid:!0};return{valid:!1,error:`Origin '${o}' is not allowed`}}return Dd}var Cl={};const st=crypto,yn=e=>e instanceof CryptoKey,Gx=async(e,t)=>{const n=`SHA-${e.slice(-3)}`;return new Uint8Array(await st.subtle.digest(n,t))},Vt=new TextEncoder,es=new TextDecoder,of=2**32;function Hs(...e){const t=e.reduce((c,{length:i})=>c+i,0),n=new Uint8Array(t);let s=0;for(const c of e)n.set(c,s),s+=c.length;return n}function F2(e,t){return Hs(Vt.encode(e),new Uint8Array([0]),t)}function Vy(e,t,n){if(t<0||t>=of)throw new RangeError(`value must be >= 0 and <= ${of-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,t&255],n)}function Jx(e){const t=Math.floor(e/of),n=e%of,s=new Uint8Array(8);return Vy(s,t,0),Vy(s,n,4),s}function Kv(e){const t=new Uint8Array(4);return Vy(t,e),t}function Cy(e){return Hs(Kv(e.length),e)}async function W2(e,t,n){const s=Math.ceil((t>>3)/32),c=new Uint8Array(s*32);for(let i=0;i<s;i++){const o=new Uint8Array(4+e.length+n.length);o.set(Kv(i+1)),o.set(e,4),o.set(n,4+e.length),c.set(await Gx("sha256",o),i*32)}return c.slice(0,t>>3)}const Bv=e=>{let t=e;typeof t=="string"&&(t=Vt.encode(t));const n=32768,s=[];for(let c=0;c<t.length;c+=n)s.push(String.fromCharCode.apply(null,t.subarray(c,c+n)));return btoa(s.join(""))},tr=e=>Bv(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),Vx=e=>{const t=atob(e),n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n},Gt=e=>{let t=e;t instanceof Uint8Array&&(t=es.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return Vx(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};let gr=class extends Error{constructor(t,n){super(t,n),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}};gr.code="ERR_JOSE_GENERIC";let zr=class extends gr{constructor(t,n,s="unspecified",c="unspecified"){super(t,{cause:{claim:s,reason:c,payload:n}}),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=s,this.reason=c,this.payload=n}};zr.code="ERR_JWT_CLAIM_VALIDATION_FAILED";let af=class extends gr{constructor(t,n,s="unspecified",c="unspecified"){super(t,{cause:{claim:s,reason:c,payload:n}}),this.code="ERR_JWT_EXPIRED",this.claim=s,this.reason=c,this.payload=n}};af.code="ERR_JWT_EXPIRED";let pu=class extends gr{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}};pu.code="ERR_JOSE_ALG_NOT_ALLOWED";let yt=class extends gr{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}};yt.code="ERR_JOSE_NOT_SUPPORTED";let ac=class extends gr{constructor(t="decryption operation failed",n){super(t,n),this.code="ERR_JWE_DECRYPTION_FAILED"}};ac.code="ERR_JWE_DECRYPTION_FAILED";let $e=class extends gr{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}};$e.code="ERR_JWE_INVALID";let Et=class extends gr{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}};Et.code="ERR_JWS_INVALID";let Xr=class extends gr{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}};Xr.code="ERR_JWT_INVALID";let zv=class extends gr{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}};zv.code="ERR_JWK_INVALID";let Gf=class extends gr{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}};Gf.code="ERR_JWKS_INVALID";let Jf=class extends gr{constructor(t="no applicable key found in the JSON Web Key Set",n){super(t,n),this.code="ERR_JWKS_NO_MATCHING_KEY"}};Jf.code="ERR_JWKS_NO_MATCHING_KEY";let Gv=class extends gr{constructor(t="multiple matching keys found in the JSON Web Key Set",n){super(t,n),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}};Gv.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";let Jv=class extends gr{constructor(t="request timed out",n){super(t,n),this.code="ERR_JWKS_TIMEOUT"}};Jv.code="ERR_JWKS_TIMEOUT";let Vf=class extends gr{constructor(t="signature verification failed",n){super(t,n),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}};Vf.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";const K2=Object.freeze(Object.defineProperty({__proto__:null,JOSEAlgNotAllowed:pu,JOSEError:gr,JOSENotSupported:yt,JWEDecryptionFailed:ac,JWEInvalid:$e,JWKInvalid:zv,JWKSInvalid:Gf,JWKSMultipleMatchingKeys:Gv,JWKSNoMatchingKey:Jf,JWKSTimeout:Jv,JWSInvalid:Et,JWSSignatureVerificationFailed:Vf,JWTClaimValidationFailed:zr,JWTExpired:af,JWTInvalid:Xr},Symbol.toStringTag,{value:"Module"})),Xf=st.getRandomValues.bind(st);function Xx(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new yt(`Unsupported JWE Algorithm: ${e}`)}}const B2=e=>Xf(new Uint8Array(Xx(e)>>3)),Yx=(e,t)=>{if(t.length<<3!==Xx(e))throw new $e("Invalid Initialization Vector length")},cf=(e,t)=>{const n=e.byteLength<<3;if(n!==t)throw new $e(`Invalid Content Encryption Key length. Expected ${t} bits, got ${n} bits`)},z2=(e,t)=>{if(!(e instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(e.length!==t.length)throw new TypeError("Input buffers must have the same length");const n=e.length;let s=0,c=-1;for(;++c<n;)s|=e[c]^t[c];return s===0};function pr(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function wi(e,t){return e.name===t}function Yd(e){return parseInt(e.name.slice(4),10)}function G2(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function Qx(e,t){if(t.length&&!t.some(n=>e.usages.includes(n))){let n="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const s=t.pop();n+=`one of ${t.join(", ")}, or ${s}.`}else t.length===2?n+=`one of ${t[0]} or ${t[1]}.`:n+=`${t[0]}.`;throw new TypeError(n)}}function J2(e,t,...n){switch(t){case"HS256":case"HS384":case"HS512":{if(!wi(e.algorithm,"HMAC"))throw pr("HMAC");const s=parseInt(t.slice(2),10);if(Yd(e.algorithm.hash)!==s)throw pr(`SHA-${s}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!wi(e.algorithm,"RSASSA-PKCS1-v1_5"))throw pr("RSASSA-PKCS1-v1_5");const s=parseInt(t.slice(2),10);if(Yd(e.algorithm.hash)!==s)throw pr(`SHA-${s}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!wi(e.algorithm,"RSA-PSS"))throw pr("RSA-PSS");const s=parseInt(t.slice(2),10);if(Yd(e.algorithm.hash)!==s)throw pr(`SHA-${s}`,"algorithm.hash");break}case"EdDSA":{if(e.algorithm.name!=="Ed25519"&&e.algorithm.name!=="Ed448")throw pr("Ed25519 or Ed448");break}case"Ed25519":{if(!wi(e.algorithm,"Ed25519"))throw pr("Ed25519");break}case"ES256":case"ES384":case"ES512":{if(!wi(e.algorithm,"ECDSA"))throw pr("ECDSA");const s=G2(t);if(e.algorithm.namedCurve!==s)throw pr(s,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}Qx(e,n)}function ao(e,t,...n){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!wi(e.algorithm,"AES-GCM"))throw pr("AES-GCM");const s=parseInt(t.slice(1,4),10);if(e.algorithm.length!==s)throw pr(s,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!wi(e.algorithm,"AES-KW"))throw pr("AES-KW");const s=parseInt(t.slice(1,4),10);if(e.algorithm.length!==s)throw pr(s,"algorithm.length");break}case"ECDH":{switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw pr("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!wi(e.algorithm,"PBKDF2"))throw pr("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!wi(e.algorithm,"RSA-OAEP"))throw pr("RSA-OAEP");const s=parseInt(t.slice(9),10)||1;if(Yd(e.algorithm.hash)!==s)throw pr(`SHA-${s}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}Qx(e,n)}function Zx(e,t,...n){if(n=n.filter(Boolean),n.length>2){const s=n.pop();e+=`one of type ${n.join(", ")}, or ${s}.`}else n.length===2?e+=`one of type ${n[0]} or ${n[1]}.`:e+=`of type ${n[0]}.`;return t==null?e+=` Received ${t}`:typeof t=="function"&&t.name?e+=` Received function ${t.name}`:typeof t=="object"&&t!=null&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}const Or=(e,...t)=>Zx("Key must be ",e,...t);function eR(e,t,...n){return Zx(`Key for the ${e} algorithm must be `,t,...n)}const tR=e=>yn(e)?!0:e?.[Symbol.toStringTag]==="KeyObject",Nr=["CryptoKey"];async function V2(e,t,n,s,c,i){if(!(t instanceof Uint8Array))throw new TypeError(Or(t,"Uint8Array"));const o=parseInt(e.slice(1,4),10),l=await st.subtle.importKey("raw",t.subarray(o>>3),"AES-CBC",!1,["decrypt"]),f=await st.subtle.importKey("raw",t.subarray(0,o>>3),{hash:`SHA-${o<<1}`,name:"HMAC"},!1,["sign"]),p=Hs(i,s,n,Jx(i.length<<3)),h=new Uint8Array((await st.subtle.sign("HMAC",f,p)).slice(0,o>>3));let u;try{u=z2(c,h)}catch{}if(!u)throw new ac;let m;try{m=new Uint8Array(await st.subtle.decrypt({iv:s,name:"AES-CBC"},l,n))}catch{}if(!m)throw new ac;return m}async function X2(e,t,n,s,c,i){let o;t instanceof Uint8Array?o=await st.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(ao(t,e,"decrypt"),o=t);try{return new Uint8Array(await st.subtle.decrypt({additionalData:i,iv:s,name:"AES-GCM",tagLength:128},o,Hs(n,c)))}catch{throw new ac}}const rR=async(e,t,n,s,c,i)=>{if(!yn(t)&&!(t instanceof Uint8Array))throw new TypeError(Or(t,...Nr,"Uint8Array"));if(!s)throw new $e("JWE Initialization Vector missing");if(!c)throw new $e("JWE Authentication Tag missing");switch(Yx(e,s),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&cf(t,parseInt(e.slice(-3),10)),V2(e,t,n,s,c,i);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&cf(t,parseInt(e.slice(1,4),10)),X2(e,t,n,s,c,i);default:throw new yt("Unsupported JWE Content Encryption Algorithm")}},_u=(...e)=>{const t=e.filter(Boolean);if(t.length===0||t.length===1)return!0;let n;for(const s of t){const c=Object.keys(s);if(!n||n.size===0){n=new Set(c);continue}for(const i of c){if(n.has(i))return!1;n.add(i)}}return!0};function Y2(e){return typeof e=="object"&&e!==null}function Yt(e){if(!Y2(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}const Yf=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function nR(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${t}`)}function sR(e,t,n){if(yn(e))return ao(e,t,n),e;if(e instanceof Uint8Array)return st.subtle.importKey("raw",e,"AES-KW",!0,[n]);throw new TypeError(Or(e,...Nr,"Uint8Array"))}const Xy=async(e,t,n)=>{const s=await sR(t,e,"wrapKey");nR(s,e);const c=await st.subtle.importKey("raw",n,...Yf);return new Uint8Array(await st.subtle.wrapKey("raw",c,s,"AES-KW"))},Yy=async(e,t,n)=>{const s=await sR(t,e,"unwrapKey");nR(s,e);const c=await st.subtle.unwrapKey("raw",n,s,"AES-KW",...Yf);return new Uint8Array(await st.subtle.exportKey("raw",c))};async function iR(e,t,n,s,c=new Uint8Array(0),i=new Uint8Array(0)){if(!yn(e))throw new TypeError(Or(e,...Nr));if(ao(e,"ECDH"),!yn(t))throw new TypeError(Or(t,...Nr));ao(t,"ECDH","deriveBits");const o=Hs(Cy(Vt.encode(n)),Cy(c),Cy(i),Kv(s));let l;e.algorithm.name==="X25519"?l=256:e.algorithm.name==="X448"?l=448:l=Math.ceil(parseInt(e.algorithm.namedCurve.substr(-3),10)/8)<<3;const f=new Uint8Array(await st.subtle.deriveBits({name:e.algorithm.name,public:e},t,l));return W2(f,s,o)}async function Q2(e){if(!yn(e))throw new TypeError(Or(e,...Nr));return st.subtle.generateKey(e.algorithm,!0,["deriveBits"])}function oR(e){if(!yn(e))throw new TypeError(Or(e,...Nr));return["P-256","P-384","P-521"].includes(e.algorithm.namedCurve)||e.algorithm.name==="X25519"||e.algorithm.name==="X448"}function Z2(e){if(!(e instanceof Uint8Array)||e.length<8)throw new $e("PBES2 Salt Input must be 8 or more octets")}function eL(e,t){if(e instanceof Uint8Array)return st.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]);if(yn(e))return ao(e,t,"deriveBits","deriveKey"),e;throw new TypeError(Or(e,...Nr,"Uint8Array"))}async function aR(e,t,n,s){Z2(e);const c=F2(t,e),i=parseInt(t.slice(13,16),10),o={hash:`SHA-${t.slice(8,11)}`,iterations:n,name:"PBKDF2",salt:c},l={length:i,name:"AES-KW"},f=await eL(s,t);if(f.usages.includes("deriveBits"))return new Uint8Array(await st.subtle.deriveBits(o,f,i));if(f.usages.includes("deriveKey"))return st.subtle.deriveKey(o,f,l,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}const tL=async(e,t,n,s=2048,c=Xf(new Uint8Array(16)))=>{const i=await aR(c,e,s,t);return{encryptedKey:await Xy(e.slice(-6),i,n),p2c:s,p2s:tr(c)}},rL=async(e,t,n,s,c)=>{const i=await aR(c,e,s,t);return Yy(e.slice(-6),i,n)};function lf(e){switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new yt(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}const Qf=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:n}=t.algorithm;if(typeof n!="number"||n<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}},nL=async(e,t,n)=>{if(!yn(t))throw new TypeError(Or(t,...Nr));if(ao(t,e,"encrypt","wrapKey"),Qf(e,t),t.usages.includes("encrypt"))return new Uint8Array(await st.subtle.encrypt(lf(e),t,n));if(t.usages.includes("wrapKey")){const s=await st.subtle.importKey("raw",n,...Yf);return new Uint8Array(await st.subtle.wrapKey("raw",s,t,lf(e)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},sL=async(e,t,n)=>{if(!yn(t))throw new TypeError(Or(t,...Nr));if(ao(t,e,"decrypt","unwrapKey"),Qf(e,t),t.usages.includes("decrypt"))return new Uint8Array(await st.subtle.decrypt(lf(e),t,n));if(t.usages.includes("unwrapKey")){const s=await st.subtle.unwrapKey("raw",n,t,lf(e),...Yf);return new Uint8Array(await st.subtle.exportKey("raw",s))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function mc(e){return Yt(e)&&typeof e.kty=="string"}function iL(e){return e.kty!=="oct"&&typeof e.d=="string"}function oL(e){return e.kty!=="oct"&&typeof e.d>"u"}function aL(e){return mc(e)&&e.kty==="oct"&&typeof e.k=="string"}function cL(e){let t,n;switch(e.kty){case"RSA":{switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},n=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},n=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},n=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new yt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},n=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},n=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},n=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},n=e.d?["deriveBits"]:[];break;default:throw new yt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(e.alg){case"Ed25519":t={name:"Ed25519"},n=e.d?["sign"]:["verify"];break;case"EdDSA":t={name:e.crv},n=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},n=e.d?["deriveBits"]:[];break;default:throw new yt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new yt('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:n}}const cR=async e=>{if(!e.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:t,keyUsages:n}=cL(e),s=[t,e.ext??!1,e.key_ops??n],c={...e};return delete c.alg,delete c.use,st.subtle.importKey("jwk",c,...s)},lR=e=>Gt(e);let Ja,Va;const uR=e=>e?.[Symbol.toStringTag]==="KeyObject",uf=async(e,t,n,s,c=!1)=>{let i=e.get(t);if(i?.[s])return i[s];const o=await cR({...n,alg:s});return c&&Object.freeze(t),i?i[s]=o:e.set(t,{[s]:o}),o},lL=(e,t)=>{if(uR(e)){let n=e.export({format:"jwk"});return delete n.d,delete n.dp,delete n.dq,delete n.p,delete n.q,delete n.qi,n.k?lR(n.k):(Va||(Va=new WeakMap),uf(Va,e,n,t))}return mc(e)?e.k?Gt(e.k):(Va||(Va=new WeakMap),uf(Va,e,e,t,!0)):e},uL=(e,t)=>{if(uR(e)){let n=e.export({format:"jwk"});return n.k?lR(n.k):(Ja||(Ja=new WeakMap),uf(Ja,e,n,t))}return mc(e)?e.k?Gt(e.k):(Ja||(Ja=new WeakMap),uf(Ja,e,e,t,!0)):e},df={normalizePublicKey:lL,normalizePrivateKey:uL};function Vv(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new yt(`Unsupported JWE Algorithm: ${e}`)}}const la=e=>Xf(new Uint8Array(Vv(e)>>3)),dR=(e,t)=>{const n=(e.match(/.{1,64}/g)||[]).join(`
`);return`-----BEGIN ${t}-----
${n}
-----END ${t}-----`},fR=async(e,t,n)=>{if(!yn(n))throw new TypeError(Or(n,...Nr));if(!n.extractable)throw new TypeError("CryptoKey is not extractable");if(n.type!==e)throw new TypeError(`key is not a ${e} key`);return dR(Bv(new Uint8Array(await st.subtle.exportKey(t,n))),`${e.toUpperCase()} KEY`)},dL=e=>fR("public","spki",e),fL=e=>fR("private","pkcs8",e),ro=(e,t,n=0)=>{n===0&&(t.unshift(t.length),t.unshift(6));const s=e.indexOf(t[0],n);if(s===-1)return!1;const c=e.subarray(s,s+t.length);return c.length!==t.length?!1:c.every((i,o)=>i===t[o])||ro(e,t,s+1)},VC=e=>{switch(!0){case ro(e,[42,134,72,206,61,3,1,7]):return"P-256";case ro(e,[43,129,4,0,34]):return"P-384";case ro(e,[43,129,4,0,35]):return"P-521";case ro(e,[43,101,110]):return"X25519";case ro(e,[43,101,111]):return"X448";case ro(e,[43,101,112]):return"Ed25519";case ro(e,[43,101,113]):return"Ed448";default:throw new yt("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},hR=async(e,t,n,s,c)=>{let i,o;const l=new Uint8Array(atob(n.replace(e,"")).split("").map(p=>p.charCodeAt(0))),f=t==="spki";switch(s){case"PS256":case"PS384":case"PS512":i={name:"RSA-PSS",hash:`SHA-${s.slice(-3)}`},o=f?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":i={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${s.slice(-3)}`},o=f?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":i={name:"RSA-OAEP",hash:`SHA-${parseInt(s.slice(-3),10)||1}`},o=f?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":i={name:"ECDSA",namedCurve:"P-256"},o=f?["verify"]:["sign"];break;case"ES384":i={name:"ECDSA",namedCurve:"P-384"},o=f?["verify"]:["sign"];break;case"ES512":i={name:"ECDSA",namedCurve:"P-521"},o=f?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{const p=VC(l);i=p.startsWith("P-")?{name:"ECDH",namedCurve:p}:{name:p},o=f?[]:["deriveBits"];break}case"Ed25519":i={name:"Ed25519"},o=f?["verify"]:["sign"];break;case"EdDSA":i={name:VC(l)},o=f?["verify"]:["sign"];break;default:throw new yt('Invalid or unsupported "alg" (Algorithm) value')}return st.subtle.importKey(t,l,i,c?.extractable??!1,o)},hL=(e,t,n)=>hR(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",e,t,n),pR=(e,t,n)=>hR(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",e,t,n);function XC(e){const t=[];let n=0;for(;n<e.length;){const s=mR(e.subarray(n));t.push(s),n+=s.byteLength}return t}function mR(e){let t=0,n=e[0]&31;if(t++,n===31){for(n=0;e[t]>=128;)n=n*128+e[t]-128,t++;n=n*128+e[t]-128,t++}let s=0;if(e[t]<128)s=e[t],t++;else if(s===128){for(s=0;e[t+s]!==0||e[t+s+1]!==0;){if(s>e.byteLength)throw new TypeError("invalid indefinite form length");s++}const i=t+s+2;return{byteLength:i,contents:e.subarray(t,t+s),raw:e.subarray(0,i)}}else{const i=e[t]&127;t++,s=0;for(let o=0;o<i;o++)s=s*256+e[t],t++}const c=t+s;return{byteLength:c,contents:e.subarray(t,c),raw:e.subarray(0,c)}}function pL(e){const t=XC(XC(mR(e).contents)[0].contents);return Bv(t[t[0].raw[0]===160?6:5].raw)}function mL(e){const t=e.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),n=Vx(t);return dR(pL(n),"PUBLIC KEY")}const gL=(e,t,n)=>{let s;try{s=mL(e)}catch(c){throw new TypeError("Failed to parse the X.509 certificate",{cause:c})}return pR(s,t,n)};async function yL(e,t,n){if(typeof e!="string"||e.indexOf("-----BEGIN PUBLIC KEY-----")!==0)throw new TypeError('"spki" must be SPKI formatted string');return pR(e,t,n)}async function vL(e,t,n){if(typeof e!="string"||e.indexOf("-----BEGIN CERTIFICATE-----")!==0)throw new TypeError('"x509" must be X.509 formatted string');return gL(e,t,n)}async function wL(e,t,n){if(typeof e!="string"||e.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return hL(e,t,n)}async function xu(e,t){if(!Yt(e))throw new TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if(typeof e.k!="string"||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return Gt(e.k);case"RSA":if("oth"in e&&e.oth!==void 0)throw new yt('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return cR({...e,alg:t});default:throw new yt('Unsupported "kty" (Key Type) Parameter value')}}const sc=e=>e?.[Symbol.toStringTag],Qy=(e,t,n)=>{if(t.use!==void 0&&t.use!=="sig")throw new TypeError("Invalid key for this operation, when present its use must be sig");if(t.key_ops!==void 0&&t.key_ops.includes?.(n)!==!0)throw new TypeError(`Invalid key for this operation, when present its key_ops must include ${n}`);if(t.alg!==void 0&&t.alg!==e)throw new TypeError(`Invalid key for this operation, when present its alg must be ${e}`);return!0},EL=(e,t,n,s)=>{if(!(t instanceof Uint8Array)){if(s&&mc(t)){if(aL(t)&&Qy(e,t,n))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!tR(t))throw new TypeError(eR(e,t,...Nr,"Uint8Array",s?"JSON Web Key":null));if(t.type!=="secret")throw new TypeError(`${sc(t)} instances for symmetric algorithms must be of type "secret"`)}},SL=(e,t,n,s)=>{if(s&&mc(t))switch(n){case"sign":if(iL(t)&&Qy(e,t,n))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"verify":if(oL(t)&&Qy(e,t,n))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!tR(t))throw new TypeError(eR(e,t,...Nr,s?"JSON Web Key":null));if(t.type==="secret")throw new TypeError(`${sc(t)} instances for asymmetric algorithms must not be of type "secret"`);if(n==="sign"&&t.type==="public")throw new TypeError(`${sc(t)} instances for asymmetric algorithm signing must be of type "private"`);if(n==="decrypt"&&t.type==="public")throw new TypeError(`${sc(t)} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&n==="verify"&&t.type==="private")throw new TypeError(`${sc(t)} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&n==="encrypt"&&t.type==="private")throw new TypeError(`${sc(t)} instances for asymmetric algorithm encryption must be of type "public"`)};function gR(e,t,n,s){t.startsWith("HS")||t==="dir"||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?EL(t,n,s,e):SL(t,n,s,e)}const yR=gR.bind(void 0,!1),Zy=gR.bind(void 0,!0);async function bL(e,t,n,s,c){if(!(n instanceof Uint8Array))throw new TypeError(Or(n,"Uint8Array"));const i=parseInt(e.slice(1,4),10),o=await st.subtle.importKey("raw",n.subarray(i>>3),"AES-CBC",!1,["encrypt"]),l=await st.subtle.importKey("raw",n.subarray(0,i>>3),{hash:`SHA-${i<<1}`,name:"HMAC"},!1,["sign"]),f=new Uint8Array(await st.subtle.encrypt({iv:s,name:"AES-CBC"},o,t)),p=Hs(c,s,f,Jx(c.length<<3)),h=new Uint8Array((await st.subtle.sign("HMAC",l,p)).slice(0,i>>3));return{ciphertext:f,tag:h,iv:s}}async function TL(e,t,n,s,c){let i;n instanceof Uint8Array?i=await st.subtle.importKey("raw",n,"AES-GCM",!1,["encrypt"]):(ao(n,e,"encrypt"),i=n);const o=new Uint8Array(await st.subtle.encrypt({additionalData:c,iv:s,name:"AES-GCM",tagLength:128},i,t)),l=o.slice(-16);return{ciphertext:o.slice(0,-16),tag:l,iv:s}}const vR=async(e,t,n,s,c)=>{if(!yn(n)&&!(n instanceof Uint8Array))throw new TypeError(Or(n,...Nr,"Uint8Array"));switch(s?Yx(e,s):s=B2(e),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return n instanceof Uint8Array&&cf(n,parseInt(e.slice(-3),10)),bL(e,t,n,s,c);case"A128GCM":case"A192GCM":case"A256GCM":return n instanceof Uint8Array&&cf(n,parseInt(e.slice(1,4),10)),TL(e,t,n,s,c);default:throw new yt("Unsupported JWE Content Encryption Algorithm")}};async function CL(e,t,n,s){const c=e.slice(0,7),i=await vR(c,n,t,s,new Uint8Array(0));return{encryptedKey:i.ciphertext,iv:tr(i.iv),tag:tr(i.tag)}}async function _L(e,t,n,s,c){const i=e.slice(0,7);return rR(i,t,n,s,c,new Uint8Array(0))}async function xL(e,t,n,s,c){switch(yR(e,t,"decrypt"),t=await df.normalizePrivateKey?.(t,e)||t,e){case"dir":{if(n!==void 0)throw new $e("Encountered unexpected JWE Encrypted Key");return t}case"ECDH-ES":if(n!==void 0)throw new $e("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!Yt(s.epk))throw new $e('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!oR(t))throw new yt("ECDH with the provided key is not allowed or not supported by your javascript runtime");const i=await xu(s.epk,e);let o,l;if(s.apu!==void 0){if(typeof s.apu!="string")throw new $e('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{o=Gt(s.apu)}catch{throw new $e("Failed to base64url decode the apu")}}if(s.apv!==void 0){if(typeof s.apv!="string")throw new $e('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{l=Gt(s.apv)}catch{throw new $e("Failed to base64url decode the apv")}}const f=await iR(i,t,e==="ECDH-ES"?s.enc:e,e==="ECDH-ES"?Vv(s.enc):parseInt(e.slice(-5,-2),10),o,l);if(e==="ECDH-ES")return f;if(n===void 0)throw new $e("JWE Encrypted Key missing");return Yy(e.slice(-6),f,n)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(n===void 0)throw new $e("JWE Encrypted Key missing");return sL(e,t,n)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(n===void 0)throw new $e("JWE Encrypted Key missing");if(typeof s.p2c!="number")throw new $e('JOSE Header "p2c" (PBES2 Count) missing or invalid');const i=c?.maxPBES2Count||1e4;if(s.p2c>i)throw new $e('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof s.p2s!="string")throw new $e('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let o;try{o=Gt(s.p2s)}catch{throw new $e("Failed to base64url decode the p2s")}return rL(e,t,n,s.p2c,o)}case"A128KW":case"A192KW":case"A256KW":{if(n===void 0)throw new $e("JWE Encrypted Key missing");return Yy(e,t,n)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(n===void 0)throw new $e("JWE Encrypted Key missing");if(typeof s.iv!="string")throw new $e('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof s.tag!="string")throw new $e('JOSE Header "tag" (Authentication Tag) missing or invalid');let i;try{i=Gt(s.iv)}catch{throw new $e("Failed to base64url decode the iv")}let o;try{o=Gt(s.tag)}catch{throw new $e("Failed to base64url decode the tag")}return _L(e,t,n,i,o)}default:throw new yt('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function Ru(e,t,n,s,c){if(c.crit!==void 0&&s?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!s||s.crit===void 0)return new Set;if(!Array.isArray(s.crit)||s.crit.length===0||s.crit.some(o=>typeof o!="string"||o.length===0))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let i;n!==void 0?i=new Map([...Object.entries(n),...t.entries()]):i=t;for(const o of s.crit){if(!i.has(o))throw new yt(`Extension Header Parameter "${o}" is not recognized`);if(c[o]===void 0)throw new e(`Extension Header Parameter "${o}" is missing`);if(i.get(o)&&s[o]===void 0)throw new e(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(s.crit)}const ev=(e,t)=>{if(t!==void 0&&(!Array.isArray(t)||t.some(n=>typeof n!="string")))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};async function Xv(e,t,n){if(!Yt(e))throw new $e("Flattened JWE must be an object");if(e.protected===void 0&&e.header===void 0&&e.unprotected===void 0)throw new $e("JOSE Header missing");if(e.iv!==void 0&&typeof e.iv!="string")throw new $e("JWE Initialization Vector incorrect type");if(typeof e.ciphertext!="string")throw new $e("JWE Ciphertext missing or incorrect type");if(e.tag!==void 0&&typeof e.tag!="string")throw new $e("JWE Authentication Tag incorrect type");if(e.protected!==void 0&&typeof e.protected!="string")throw new $e("JWE Protected Header incorrect type");if(e.encrypted_key!==void 0&&typeof e.encrypted_key!="string")throw new $e("JWE Encrypted Key incorrect type");if(e.aad!==void 0&&typeof e.aad!="string")throw new $e("JWE AAD incorrect type");if(e.header!==void 0&&!Yt(e.header))throw new $e("JWE Shared Unprotected Header incorrect type");if(e.unprotected!==void 0&&!Yt(e.unprotected))throw new $e("JWE Per-Recipient Unprotected Header incorrect type");let s;if(e.protected)try{const I=Gt(e.protected);s=JSON.parse(es.decode(I))}catch{throw new $e("JWE Protected Header is invalid")}if(!_u(s,e.header,e.unprotected))throw new $e("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const c={...s,...e.header,...e.unprotected};if(Ru($e,new Map,n?.crit,s,c),c.zip!==void 0)throw new yt('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:i,enc:o}=c;if(typeof i!="string"||!i)throw new $e("missing JWE Algorithm (alg) in JWE Header");if(typeof o!="string"||!o)throw new $e("missing JWE Encryption Algorithm (enc) in JWE Header");const l=n&&ev("keyManagementAlgorithms",n.keyManagementAlgorithms),f=n&&ev("contentEncryptionAlgorithms",n.contentEncryptionAlgorithms);if(l&&!l.has(i)||!l&&i.startsWith("PBES2"))throw new pu('"alg" (Algorithm) Header Parameter value not allowed');if(f&&!f.has(o))throw new pu('"enc" (Encryption Algorithm) Header Parameter value not allowed');let p;if(e.encrypted_key!==void 0)try{p=Gt(e.encrypted_key)}catch{throw new $e("Failed to base64url decode the encrypted_key")}let h=!1;typeof t=="function"&&(t=await t(s,e),h=!0);let u;try{u=await xL(i,t,p,c,n)}catch(I){if(I instanceof TypeError||I instanceof $e||I instanceof yt)throw I;u=la(o)}let m,g;if(e.iv!==void 0)try{m=Gt(e.iv)}catch{throw new $e("Failed to base64url decode the iv")}if(e.tag!==void 0)try{g=Gt(e.tag)}catch{throw new $e("Failed to base64url decode the tag")}const v=Vt.encode(e.protected??"");let S;e.aad!==void 0?S=Hs(v,Vt.encode("."),Vt.encode(e.aad)):S=v;let w;try{w=Gt(e.ciphertext)}catch{throw new $e("Failed to base64url decode the ciphertext")}const N={plaintext:await rR(o,u,w,m,g,S)};if(e.protected!==void 0&&(N.protectedHeader=s),e.aad!==void 0)try{N.additionalAuthenticatedData=Gt(e.aad)}catch{throw new $e("Failed to base64url decode the aad")}return e.unprotected!==void 0&&(N.sharedUnprotectedHeader=e.unprotected),e.header!==void 0&&(N.unprotectedHeader=e.header),h?{...N,key:t}:N}async function wR(e,t,n){if(e instanceof Uint8Array&&(e=es.decode(e)),typeof e!="string")throw new $e("Compact JWE must be a string or Uint8Array");const{0:s,1:c,2:i,3:o,4:l,length:f}=e.split(".");if(f!==5)throw new $e("Invalid Compact JWE");const p=await Xv({ciphertext:o,iv:i||void 0,protected:s,tag:l||void 0,encrypted_key:c||void 0},t,n),h={plaintext:p.plaintext,protectedHeader:p.protectedHeader};return typeof t=="function"?{...h,key:p.key}:h}async function RL(e,t,n){if(!Yt(e))throw new $e("General JWE must be an object");if(!Array.isArray(e.recipients)||!e.recipients.every(Yt))throw new $e("JWE Recipients missing or incorrect type");if(!e.recipients.length)throw new $e("JWE Recipients has no members");for(const s of e.recipients)try{return await Xv({aad:e.aad,ciphertext:e.ciphertext,encrypted_key:s.encrypted_key,header:s.header,iv:e.iv,protected:e.protected,tag:e.tag,unprotected:e.unprotected},t,n)}catch{}throw new ac}const ER=Symbol(),kL=async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:tr(e)};if(!yn(e))throw new TypeError(Or(e,...Nr,"Uint8Array"));if(!e.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:t,key_ops:n,alg:s,use:c,...i}=await st.subtle.exportKey("jwk",e);return i};async function AL(e){return dL(e)}async function IL(e){return fL(e)}async function SR(e){return kL(e)}async function bR(e,t,n,s,c={}){let i,o,l;switch(yR(e,n,"encrypt"),n=await df.normalizePublicKey?.(n,e)||n,e){case"dir":{l=n;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!oR(n))throw new yt("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:f,apv:p}=c;let{epk:h}=c;h||(h=(await Q2(n)).privateKey);const{x:u,y:m,crv:g,kty:v}=await SR(h),S=await iR(n,h,e==="ECDH-ES"?t:e,e==="ECDH-ES"?Vv(t):parseInt(e.slice(-5,-2),10),f,p);if(o={epk:{x:u,crv:g,kty:v}},v==="EC"&&(o.epk.y=m),f&&(o.apu=tr(f)),p&&(o.apv=tr(p)),e==="ECDH-ES"){l=S;break}l=s||la(t);const w=e.slice(-6);i=await Xy(w,S,l);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{l=s||la(t),i=await nL(e,n,l);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{l=s||la(t);const{p2c:f,p2s:p}=c;({encryptedKey:i,...o}=await tL(e,n,l,f,p));break}case"A128KW":case"A192KW":case"A256KW":{l=s||la(t),i=await Xy(e,n,l);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{l=s||la(t);const{iv:f}=c;({encryptedKey:i,...o}=await CL(e,n,l,f));break}default:throw new yt('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:l,encryptedKey:i,parameters:o}}let ff=class{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=t}setKeyManagementParameters(t){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}setContentEncryptionKey(t){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=t,this}async encrypt(t,n){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new $e("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!_u(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new $e("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const s={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(Ru($e,new Map,n?.crit,this._protectedHeader,s),s.zip!==void 0)throw new yt('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:c,enc:i}=s;if(typeof c!="string"||!c)throw new $e('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof i!="string"||!i)throw new $e('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let o;if(this._cek&&(c==="dir"||c==="ECDH-ES"))throw new TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${c}`);let l;{let S;({cek:l,encryptedKey:o,parameters:S}=await bR(c,i,t,this._cek,this._keyManagementParameters)),S&&(n&&ER in n?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...S}:this.setUnprotectedHeader(S):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...S}:this.setProtectedHeader(S))}let f,p,h;this._protectedHeader?p=Vt.encode(tr(JSON.stringify(this._protectedHeader))):p=Vt.encode(""),this._aad?(h=tr(this._aad),f=Hs(p,Vt.encode("."),Vt.encode(h))):f=p;const{ciphertext:u,tag:m,iv:g}=await vR(i,this._plaintext,l,this._iv,f),v={ciphertext:tr(u)};return g&&(v.iv=tr(g)),m&&(v.tag=tr(m)),o&&(v.encrypted_key=tr(o)),h&&(v.aad=h),this._protectedHeader&&(v.protected=es.decode(p)),this._sharedUnprotectedHeader&&(v.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(v.header=this._unprotectedHeader),v}},PL=class{constructor(t,n,s){this.parent=t,this.key=n,this.options=s}setUnprotectedHeader(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addRecipient(...t){return this.parent.addRecipient(...t)}encrypt(...t){return this.parent.encrypt(...t)}done(){return this.parent}},OL=class{constructor(t){this._recipients=[],this._plaintext=t}addRecipient(t,n){const s=new PL(this,t,{crit:n?.crit});return this._recipients.push(s),s}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}async encrypt(){if(!this._recipients.length)throw new $e("at least one recipient must be added");if(this._recipients.length===1){const[c]=this._recipients,i=await new ff(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(c.unprotectedHeader).encrypt(c.key,{...c.options}),o={ciphertext:i.ciphertext,iv:i.iv,recipients:[{}],tag:i.tag};return i.aad&&(o.aad=i.aad),i.protected&&(o.protected=i.protected),i.unprotected&&(o.unprotected=i.unprotected),i.encrypted_key&&(o.recipients[0].encrypted_key=i.encrypted_key),i.header&&(o.recipients[0].header=i.header),o}let t;for(let c=0;c<this._recipients.length;c++){const i=this._recipients[c];if(!_u(this._protectedHeader,this._unprotectedHeader,i.unprotectedHeader))throw new $e("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const o={...this._protectedHeader,...this._unprotectedHeader,...i.unprotectedHeader},{alg:l}=o;if(typeof l!="string"||!l)throw new $e('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(l==="dir"||l==="ECDH-ES")throw new $e('"dir" and "ECDH-ES" alg may only be used with a single recipient');if(typeof o.enc!="string"||!o.enc)throw new $e('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(!t)t=o.enc;else if(t!==o.enc)throw new $e('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');if(Ru($e,new Map,i.options.crit,this._protectedHeader,o),o.zip!==void 0)throw new yt('JWE "zip" (Compression Algorithm) Header Parameter is not supported.')}const n=la(t),s={ciphertext:"",iv:"",recipients:[],tag:""};for(let c=0;c<this._recipients.length;c++){const i=this._recipients[c],o={};s.recipients.push(o);const f={...this._protectedHeader,...this._unprotectedHeader,...i.unprotectedHeader}.alg.startsWith("PBES2")?2048+c:void 0;if(c===0){const u=await new ff(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(n).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(i.unprotectedHeader).setKeyManagementParameters({p2c:f}).encrypt(i.key,{...i.options,[ER]:!0});s.ciphertext=u.ciphertext,s.iv=u.iv,s.tag=u.tag,u.aad&&(s.aad=u.aad),u.protected&&(s.protected=u.protected),u.unprotected&&(s.unprotected=u.unprotected),o.encrypted_key=u.encrypted_key,u.header&&(o.header=u.header);continue}const{encryptedKey:p,parameters:h}=await bR(i.unprotectedHeader?.alg||this._protectedHeader?.alg||this._unprotectedHeader?.alg,t,i.key,n,{p2c:f});o.encrypted_key=tr(p),(i.unprotectedHeader||h)&&(o.header={...i.unprotectedHeader,...h})}return s}};function TR(e,t){const n=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:n,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:n,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:n,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:n,name:"ECDSA",namedCurve:t.namedCurve};case"Ed25519":return{name:"Ed25519"};case"EdDSA":return{name:t.name};default:throw new yt(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}async function CR(e,t,n){if(n==="sign"&&(t=await df.normalizePrivateKey(t,e)),n==="verify"&&(t=await df.normalizePublicKey(t,e)),yn(t))return J2(t,e,n),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(Or(t,...Nr));return st.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[n])}throw new TypeError(Or(t,...Nr,"Uint8Array","JSON Web Key"))}const NL=async(e,t,n,s)=>{const c=await CR(e,t,"verify");Qf(e,c);const i=TR(e,c.algorithm);try{return await st.subtle.verify(i,c,n,s)}catch{return!1}};async function Yv(e,t,n){if(!Yt(e))throw new Et("Flattened JWS must be an object");if(e.protected===void 0&&e.header===void 0)throw new Et('Flattened JWS must have either of the "protected" or "header" members');if(e.protected!==void 0&&typeof e.protected!="string")throw new Et("JWS Protected Header incorrect type");if(e.payload===void 0)throw new Et("JWS Payload missing");if(typeof e.signature!="string")throw new Et("JWS Signature missing or incorrect type");if(e.header!==void 0&&!Yt(e.header))throw new Et("JWS Unprotected Header incorrect type");let s={};if(e.protected)try{const S=Gt(e.protected);s=JSON.parse(es.decode(S))}catch{throw new Et("JWS Protected Header is invalid")}if(!_u(s,e.header))throw new Et("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const c={...s,...e.header},i=Ru(Et,new Map([["b64",!0]]),n?.crit,s,c);let o=!0;if(i.has("b64")&&(o=s.b64,typeof o!="boolean"))throw new Et('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:l}=c;if(typeof l!="string"||!l)throw new Et('JWS "alg" (Algorithm) Header Parameter missing or invalid');const f=n&&ev("algorithms",n.algorithms);if(f&&!f.has(l))throw new pu('"alg" (Algorithm) Header Parameter value not allowed');if(o){if(typeof e.payload!="string")throw new Et("JWS Payload must be a string")}else if(typeof e.payload!="string"&&!(e.payload instanceof Uint8Array))throw new Et("JWS Payload must be a string or an Uint8Array instance");let p=!1;typeof t=="function"?(t=await t(s,e),p=!0,Zy(l,t,"verify"),mc(t)&&(t=await xu(t,l))):Zy(l,t,"verify");const h=Hs(Vt.encode(e.protected??""),Vt.encode("."),typeof e.payload=="string"?Vt.encode(e.payload):e.payload);let u;try{u=Gt(e.signature)}catch{throw new Et("Failed to base64url decode the signature")}if(!await NL(l,t,u,h))throw new Vf;let g;if(o)try{g=Gt(e.payload)}catch{throw new Et("Failed to base64url decode the payload")}else typeof e.payload=="string"?g=Vt.encode(e.payload):g=e.payload;const v={payload:g};return e.protected!==void 0&&(v.protectedHeader=s),e.header!==void 0&&(v.unprotectedHeader=e.header),p?{...v,key:t}:v}async function _R(e,t,n){if(e instanceof Uint8Array&&(e=es.decode(e)),typeof e!="string")throw new Et("Compact JWS must be a string or Uint8Array");const{0:s,1:c,2:i,length:o}=e.split(".");if(o!==3)throw new Et("Invalid Compact JWS");const l=await Yv({payload:c,protected:s,signature:i},t,n),f={payload:l.payload,protectedHeader:l.protectedHeader};return typeof t=="function"?{...f,key:l.key}:f}async function LL(e,t,n){if(!Yt(e))throw new Et("General JWS must be an object");if(!Array.isArray(e.signatures)||!e.signatures.every(Yt))throw new Et("JWS Signatures missing or incorrect type");for(const s of e.signatures)try{return await Yv({header:s.header,payload:e.payload,protected:s.protected,signature:s.signature},t,n)}catch{}throw new Vf}const no=e=>Math.floor(e.getTime()/1e3),xR=60,RR=xR*60,Qv=RR*24,jL=Qv*7,DL=Qv*365.25,$L=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,cu=e=>{const t=$L.exec(e);if(!t||t[4]&&t[1])throw new TypeError("Invalid time period format");const n=parseFloat(t[2]),s=t[3].toLowerCase();let c;switch(s){case"sec":case"secs":case"second":case"seconds":case"s":c=Math.round(n);break;case"minute":case"minutes":case"min":case"mins":case"m":c=Math.round(n*xR);break;case"hour":case"hours":case"hr":case"hrs":case"h":c=Math.round(n*RR);break;case"day":case"days":case"d":c=Math.round(n*Qv);break;case"week":case"weeks":case"w":c=Math.round(n*jL);break;default:c=Math.round(n*DL);break}return t[1]==="-"||t[4]==="ago"?-c:c},YC=e=>e.toLowerCase().replace(/^application\//,""),UL=(e,t)=>typeof e=="string"?t.includes(e):Array.isArray(e)?t.some(Set.prototype.has.bind(new Set(e))):!1,Zv=(e,t,n={})=>{let s;try{s=JSON.parse(es.decode(t))}catch{}if(!Yt(s))throw new Xr("JWT Claims Set must be a top-level JSON object");const{typ:c}=n;if(c&&(typeof e.typ!="string"||YC(e.typ)!==YC(c)))throw new zr('unexpected "typ" JWT header value',s,"typ","check_failed");const{requiredClaims:i=[],issuer:o,subject:l,audience:f,maxTokenAge:p}=n,h=[...i];p!==void 0&&h.push("iat"),f!==void 0&&h.push("aud"),l!==void 0&&h.push("sub"),o!==void 0&&h.push("iss");for(const v of new Set(h.reverse()))if(!(v in s))throw new zr(`missing required "${v}" claim`,s,v,"missing");if(o&&!(Array.isArray(o)?o:[o]).includes(s.iss))throw new zr('unexpected "iss" claim value',s,"iss","check_failed");if(l&&s.sub!==l)throw new zr('unexpected "sub" claim value',s,"sub","check_failed");if(f&&!UL(s.aud,typeof f=="string"?[f]:f))throw new zr('unexpected "aud" claim value',s,"aud","check_failed");let u;switch(typeof n.clockTolerance){case"string":u=cu(n.clockTolerance);break;case"number":u=n.clockTolerance;break;case"undefined":u=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:m}=n,g=no(m||new Date);if((s.iat!==void 0||p)&&typeof s.iat!="number")throw new zr('"iat" claim must be a number',s,"iat","invalid");if(s.nbf!==void 0){if(typeof s.nbf!="number")throw new zr('"nbf" claim must be a number',s,"nbf","invalid");if(s.nbf>g+u)throw new zr('"nbf" claim timestamp check failed',s,"nbf","check_failed")}if(s.exp!==void 0){if(typeof s.exp!="number")throw new zr('"exp" claim must be a number',s,"exp","invalid");if(s.exp<=g-u)throw new af('"exp" claim timestamp check failed',s,"exp","check_failed")}if(p){const v=g-s.iat,S=typeof p=="number"?p:cu(p);if(v-u>S)throw new af('"iat" claim timestamp check failed (too far in the past)',s,"iat","check_failed");if(v<0-u)throw new zr('"iat" claim timestamp check failed (it should be in the past)',s,"iat","check_failed")}return s};async function qL(e,t,n){const s=await _R(e,t,n);if(s.protectedHeader.crit?.includes("b64")&&s.protectedHeader.b64===!1)throw new Xr("JWTs MUST NOT use unencoded payload");const i={payload:Zv(s.protectedHeader,s.payload,n),protectedHeader:s.protectedHeader};return typeof t=="function"?{...i,key:s.key}:i}async function ML(e,t,n){const s=await wR(e,t,n),c=Zv(s.protectedHeader,s.plaintext,n),{protectedHeader:i}=s;if(i.iss!==void 0&&i.iss!==c.iss)throw new zr('replicated "iss" claim header parameter mismatch',c,"iss","mismatch");if(i.sub!==void 0&&i.sub!==c.sub)throw new zr('replicated "sub" claim header parameter mismatch',c,"sub","mismatch");if(i.aud!==void 0&&JSON.stringify(i.aud)!==JSON.stringify(c.aud))throw new zr('replicated "aud" claim header parameter mismatch',c,"aud","mismatch");const o={payload:c,protectedHeader:i};return typeof t=="function"?{...o,key:s.key}:o}let kR=class{constructor(t){this._flattened=new ff(t)}setContentEncryptionKey(t){return this._flattened.setContentEncryptionKey(t),this}setInitializationVector(t){return this._flattened.setInitializationVector(t),this}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}setKeyManagementParameters(t){return this._flattened.setKeyManagementParameters(t),this}async encrypt(t,n){const s=await this._flattened.encrypt(t,n);return[s.protected,s.encrypted_key,s.iv,s.ciphertext,s.tag].join(".")}};const HL=async(e,t,n)=>{const s=await CR(e,t,"sign");Qf(e,s);const c=await st.subtle.sign(TR(e,s.algorithm),s,n);return new Uint8Array(c)};let ew=class{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=t}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}async sign(t,n){if(!this._protectedHeader&&!this._unprotectedHeader)throw new Et("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!_u(this._protectedHeader,this._unprotectedHeader))throw new Et("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const s={...this._protectedHeader,...this._unprotectedHeader},c=Ru(Et,new Map([["b64",!0]]),n?.crit,this._protectedHeader,s);let i=!0;if(c.has("b64")&&(i=this._protectedHeader.b64,typeof i!="boolean"))throw new Et('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:o}=s;if(typeof o!="string"||!o)throw new Et('JWS "alg" (Algorithm) Header Parameter missing or invalid');Zy(o,t,"sign");let l=this._payload;i&&(l=Vt.encode(tr(l)));let f;this._protectedHeader?f=Vt.encode(tr(JSON.stringify(this._protectedHeader))):f=Vt.encode("");const p=Hs(f,Vt.encode("."),l),h=await HL(o,t,p),u={signature:tr(h),payload:""};return i&&(u.payload=es.decode(l)),this._unprotectedHeader&&(u.header=this._unprotectedHeader),this._protectedHeader&&(u.protected=es.decode(f)),u}},AR=class{constructor(t){this._flattened=new ew(t)}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}async sign(t,n){const s=await this._flattened.sign(t,n);if(s.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${s.protected}.${s.payload}.${s.signature}`}},FL=class{constructor(t,n,s){this.parent=t,this.key=n,this.options=s}setProtectedHeader(t){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=t,this}setUnprotectedHeader(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addSignature(...t){return this.parent.addSignature(...t)}sign(...t){return this.parent.sign(...t)}done(){return this.parent}},WL=class{constructor(t){this._signatures=[],this._payload=t}addSignature(t,n){const s=new FL(this,t,n);return this._signatures.push(s),s}async sign(){if(!this._signatures.length)throw new Et("at least one signature must be added");const t={signatures:[],payload:""};for(let n=0;n<this._signatures.length;n++){const s=this._signatures[n],c=new ew(this._payload);c.setProtectedHeader(s.protectedHeader),c.setUnprotectedHeader(s.unprotectedHeader);const{payload:i,...o}=await c.sign(s.key,s.options);if(n===0)t.payload=i;else if(t.payload!==i)throw new Et("inconsistent use of JWS Unencoded Payload (RFC7797)");t.signatures.push(o)}return t}};function Jo(e,t){if(!Number.isFinite(t))throw new TypeError(`Invalid ${e} input`);return t}let tw=class{constructor(t={}){if(!Yt(t))throw new TypeError("JWT Claims Set MUST be an object");this._payload=t}setIssuer(t){return this._payload={...this._payload,iss:t},this}setSubject(t){return this._payload={...this._payload,sub:t},this}setAudience(t){return this._payload={...this._payload,aud:t},this}setJti(t){return this._payload={...this._payload,jti:t},this}setNotBefore(t){return typeof t=="number"?this._payload={...this._payload,nbf:Jo("setNotBefore",t)}:t instanceof Date?this._payload={...this._payload,nbf:Jo("setNotBefore",no(t))}:this._payload={...this._payload,nbf:no(new Date)+cu(t)},this}setExpirationTime(t){return typeof t=="number"?this._payload={...this._payload,exp:Jo("setExpirationTime",t)}:t instanceof Date?this._payload={...this._payload,exp:Jo("setExpirationTime",no(t))}:this._payload={...this._payload,exp:no(new Date)+cu(t)},this}setIssuedAt(t){return typeof t>"u"?this._payload={...this._payload,iat:no(new Date)}:t instanceof Date?this._payload={...this._payload,iat:Jo("setIssuedAt",no(t))}:typeof t=="string"?this._payload={...this._payload,iat:Jo("setIssuedAt",no(new Date)+cu(t))}:this._payload={...this._payload,iat:Jo("setIssuedAt",t)},this}},KL=class extends tw{setProtectedHeader(t){return this._protectedHeader=t,this}async sign(t,n){const s=new AR(Vt.encode(JSON.stringify(this._payload)));if(s.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new Xr("JWTs MUST NOT use unencoded payload");return s.sign(t,n)}},BL=class extends tw{setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setKeyManagementParameters(t){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setContentEncryptionKey(t){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=t,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(t,n){const s=new kR(Vt.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),s.setProtectedHeader(this._protectedHeader),this._iv&&s.setInitializationVector(this._iv),this._cek&&s.setContentEncryptionKey(this._cek),this._keyManagementParameters&&s.setKeyManagementParameters(this._keyManagementParameters),s.encrypt(t,n)}};const Qi=(e,t)=>{if(typeof e!="string"||!e)throw new zv(`${t} missing or invalid`)};async function IR(e,t){if(!Yt(e))throw new TypeError("JWK must be an object");if(t??(t="sha256"),t!=="sha256"&&t!=="sha384"&&t!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let n;switch(e.kty){case"EC":Qi(e.crv,'"crv" (Curve) Parameter'),Qi(e.x,'"x" (X Coordinate) Parameter'),Qi(e.y,'"y" (Y Coordinate) Parameter'),n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":Qi(e.crv,'"crv" (Subtype of Key Pair) Parameter'),Qi(e.x,'"x" (Public Key) Parameter'),n={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":Qi(e.e,'"e" (Exponent) Parameter'),Qi(e.n,'"n" (Modulus) Parameter'),n={e:e.e,kty:e.kty,n:e.n};break;case"oct":Qi(e.k,'"k" (Key Value) Parameter'),n={k:e.k,kty:e.kty};break;default:throw new yt('"kty" (Key Type) Parameter missing or unsupported')}const s=Vt.encode(JSON.stringify(n));return tr(await Gx(t,s))}async function zL(e,t){t??(t="sha256");const n=await IR(e,t);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${t.slice(-3)}:${n}`}async function GL(e,t){const n={...e,...t?.header};if(!Yt(n.jwk))throw new Et('"jwk" (JSON Web Key) Header Parameter must be a JSON object');const s=await xu({...n.jwk,ext:!0},n.alg);if(s instanceof Uint8Array||s.type!=="public")throw new Et('"jwk" (JSON Web Key) Header Parameter must be a public key');return s}function JL(e){switch(typeof e=="string"&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new yt('Unsupported "alg" value for a JSON Web Key Set')}}function VL(e){return e&&typeof e=="object"&&Array.isArray(e.keys)&&e.keys.every(XL)}function XL(e){return Yt(e)}function PR(e){return typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}let YL=class{constructor(t){if(this._cached=new WeakMap,!VL(t))throw new Gf("JSON Web Key Set malformed");this._jwks=PR(t)}async getKey(t,n){const{alg:s,kid:c}={...t,...n?.header},i=JL(s),o=this._jwks.keys.filter(p=>{let h=i===p.kty;if(h&&typeof c=="string"&&(h=c===p.kid),h&&typeof p.alg=="string"&&(h=s===p.alg),h&&typeof p.use=="string"&&(h=p.use==="sig"),h&&Array.isArray(p.key_ops)&&(h=p.key_ops.includes("verify")),h)switch(s){case"ES256":h=p.crv==="P-256";break;case"ES256K":h=p.crv==="secp256k1";break;case"ES384":h=p.crv==="P-384";break;case"ES512":h=p.crv==="P-521";break;case"Ed25519":h=p.crv==="Ed25519";break;case"EdDSA":h=p.crv==="Ed25519"||p.crv==="Ed448";break}return h}),{0:l,length:f}=o;if(f===0)throw new Jf;if(f!==1){const p=new Gv,{_cached:h}=this;throw p[Symbol.asyncIterator]=async function*(){for(const u of o)try{yield await QC(h,u,s)}catch{}},p}return QC(this._cached,l,s)}};async function QC(e,t,n){const s=e.get(t)||e.set(t,{}).get(t);if(s[n]===void 0){const c=await xu({...t,ext:!0},n);if(c instanceof Uint8Array||c.type!=="public")throw new Gf("JSON Web Key Set members must be public keys");s[n]=c}return s[n]}function tv(e){const t=new YL(e),n=async(s,c)=>t.getKey(s,c);return Object.defineProperties(n,{jwks:{value:()=>PR(t._jwks),enumerable:!0,configurable:!1,writable:!1}}),n}const QL=async(e,t,n)=>{let s,c,i=!1;typeof AbortController=="function"&&(s=new AbortController,c=setTimeout(()=>{i=!0,s.abort()},t));const o=await fetch(e.href,{signal:s?s.signal:void 0,redirect:"manual",headers:n.headers}).catch(l=>{throw i?new Jv:l});if(c!==void 0&&clearTimeout(c),o.status!==200)throw new gr("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await o.json()}catch{throw new gr("Failed to parse the JSON Web Key Set HTTP response as JSON")}};function ZL(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}let rv;(typeof navigator>"u"||!navigator.userAgent?.startsWith?.("Mozilla/5.0 "))&&(rv="jose/v5.10.0");const lu=Symbol();function ej(e,t){return!(typeof e!="object"||e===null||!("uat"in e)||typeof e.uat!="number"||Date.now()-e.uat>=t||!("jwks"in e)||!Yt(e.jwks)||!Array.isArray(e.jwks.keys)||!Array.prototype.every.call(e.jwks.keys,Yt))}let tj=class{constructor(t,n){if(!(t instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(t.href),this._options={agent:n?.agent,headers:n?.headers},this._timeoutDuration=typeof n?.timeoutDuration=="number"?n?.timeoutDuration:5e3,this._cooldownDuration=typeof n?.cooldownDuration=="number"?n?.cooldownDuration:3e4,this._cacheMaxAge=typeof n?.cacheMaxAge=="number"?n?.cacheMaxAge:6e5,n?.[lu]!==void 0&&(this._cache=n?.[lu],ej(n?.[lu],this._cacheMaxAge)&&(this._jwksTimestamp=this._cache.uat,this._local=tv(this._cache.jwks)))}coolingDown(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cooldownDuration:!1}fresh(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cacheMaxAge:!1}async getKey(t,n){(!this._local||!this.fresh())&&await this.reload();try{return await this._local(t,n)}catch(s){if(s instanceof Jf&&this.coolingDown()===!1)return await this.reload(),this._local(t,n);throw s}}async reload(){this._pendingFetch&&ZL()&&(this._pendingFetch=void 0);const t=new Headers(this._options.headers);rv&&!t.has("User-Agent")&&(t.set("User-Agent",rv),this._options.headers=Object.fromEntries(t.entries())),this._pendingFetch||(this._pendingFetch=QL(this._url,this._timeoutDuration,this._options).then(n=>{this._local=tv(n),this._cache&&(this._cache.uat=Date.now(),this._cache.jwks=n),this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(n=>{throw this._pendingFetch=void 0,n})),await this._pendingFetch}};function rj(e,t){const n=new tj(e,t),s=async(c,i)=>n.getKey(c,i);return Object.defineProperties(s,{coolingDown:{get:()=>n.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>n.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>n.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>!!n._pendingFetch,enumerable:!0,configurable:!1},jwks:{value:()=>n._local?.jwks(),enumerable:!0,configurable:!1,writable:!1}}),s}const nj=lu;let sj=class extends tw{encode(){const t=tr(JSON.stringify({alg:"none"})),n=tr(JSON.stringify(this._payload));return`${t}.${n}.`}static decode(t,n){if(typeof t!="string")throw new Xr("Unsecured JWT must be a string");const{0:s,1:c,2:i,length:o}=t.split(".");if(o!==3||i!=="")throw new Xr("Invalid Unsecured JWT");let l;try{if(l=JSON.parse(es.decode(Gt(s))),l.alg!=="none")throw new Error}catch{throw new Xr("Invalid Unsecured JWT")}return{payload:Zv(l,Gt(c),n),header:l}}};const ij=tr,rw=Gt,oj=Object.freeze(Object.defineProperty({__proto__:null,decode:rw,encode:ij},Symbol.toStringTag,{value:"Module"}));function aj(e){let t;if(typeof e=="string"){const n=e.split(".");(n.length===3||n.length===5)&&([t]=n)}else if(typeof e=="object"&&e)if("protected"in e)t=e.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof t!="string"||!t)throw new Error;const n=JSON.parse(es.decode(rw(t)));if(!Yt(n))throw new Error;return n}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}function cj(e){if(typeof e!="string")throw new Xr("JWTs must use Compact JWS serialization, JWT must be a string");const{1:t,length:n}=e.split(".");if(n===5)throw new Xr("Only JWTs using Compact JWS serialization can be decoded");if(n!==3)throw new Xr("Invalid JWT");if(!t)throw new Xr("JWTs must contain a payload");let s;try{s=rw(t)}catch{throw new Xr("Failed to base64url decode the payload")}let c;try{c=JSON.parse(es.decode(s))}catch{throw new Xr("Failed to parse the decoded payload as JSON")}if(!Yt(c))throw new Xr("Invalid JWT Claims Set");return c}async function lj(e,t){let n,s,c;switch(e){case"HS256":case"HS384":case"HS512":n=parseInt(e.slice(-3),10),s={name:"HMAC",hash:`SHA-${n}`,length:n},c=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return n=parseInt(e.slice(-3),10),Xf(new Uint8Array(n>>3));case"A128KW":case"A192KW":case"A256KW":n=parseInt(e.slice(1,4),10),s={name:"AES-KW",length:n},c=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":n=parseInt(e.slice(1,4),10),s={name:"AES-GCM",length:n},c=["encrypt","decrypt"];break;default:throw new yt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return st.subtle.generateKey(s,t?.extractable??!1,c)}function _y(e){const t=e?.modulusLength??2048;if(typeof t!="number"||t<2048)throw new yt("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return t}async function uj(e,t){let n,s;switch(e){case"PS256":case"PS384":case"PS512":n={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:_y(t)},s=["sign","verify"];break;case"RS256":case"RS384":case"RS512":n={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:_y(t)},s=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":n={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:_y(t)},s=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":n={name:"ECDSA",namedCurve:"P-256"},s=["sign","verify"];break;case"ES384":n={name:"ECDSA",namedCurve:"P-384"},s=["sign","verify"];break;case"ES512":n={name:"ECDSA",namedCurve:"P-521"},s=["sign","verify"];break;case"Ed25519":n={name:"Ed25519"},s=["sign","verify"];break;case"EdDSA":{s=["sign","verify"];const c=t?.crv??"Ed25519";switch(c){case"Ed25519":case"Ed448":n={name:c};break;default:throw new yt("Invalid or unsupported crv option provided")}break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{s=["deriveKey","deriveBits"];const c=t?.crv??"P-256";switch(c){case"P-256":case"P-384":case"P-521":{n={name:"ECDH",namedCurve:c};break}case"X25519":case"X448":n={name:c};break;default:throw new yt("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new yt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return st.subtle.generateKey(n,t?.extractable??!1,s)}async function dj(e,t){return uj(e,t)}async function fj(e,t){return lj(e,t)}const hj="WebCryptoAPI",pj=Object.freeze(Object.defineProperty({__proto__:null,CompactEncrypt:kR,CompactSign:AR,EmbeddedJWK:GL,EncryptJWT:BL,FlattenedEncrypt:ff,FlattenedSign:ew,GeneralEncrypt:OL,GeneralSign:WL,SignJWT:KL,UnsecuredJWT:sj,base64url:oj,calculateJwkThumbprint:IR,calculateJwkThumbprintUri:zL,compactDecrypt:wR,compactVerify:_R,createLocalJWKSet:tv,createRemoteJWKSet:rj,cryptoRuntime:hj,decodeJwt:cj,decodeProtectedHeader:aj,errors:K2,experimental_jwksCache:nj,exportJWK:SR,exportPKCS8:IL,exportSPKI:AL,flattenedDecrypt:Xv,flattenedVerify:Yv,generalDecrypt:RL,generalVerify:LL,generateKeyPair:dj,generateSecret:fj,importJWK:xu,importPKCS8:wL,importSPKI:yL,importX509:vL,jwksCache:lu,jwtDecrypt:ML,jwtVerify:qL},Symbol.toStringTag,{value:"Module"}));var ZC;function e_(){if(ZC)return Cl;ZC=1,Object.defineProperty(Cl,"__esModule",{value:!0}),Cl.TokenValidationService=void 0;const e=pj;class t{constructor(s){this.jwksCache=new Map,this.JWKS_CACHE_TTL_MS=3600*1e3,this.resultCache=new Map,this.RESULT_CACHE_TTL_MS=60*1e3,this.keycloakConfig=s}setKeycloakConfig(s){this.keycloakConfig=s}async validateTokenLocal(s,c){try{if(!c?.skipResultCache){const o=this.getCachedResult(s);if(o)return{...o,cached:!0}}const i=await this.performValidation(s,c);return!c?.skipResultCache&&this.shouldCacheResult(i)&&this.cacheResult(s,i),i}catch(i){const o=i instanceof Error?i.message:"Token validation failed";return{valid:!1,tokenType:c?.tokenType||"auto",error:o}}}clearCache(s){s?this.jwksCache.delete(s):this.jwksCache.clear()}clearResultCache(){this.resultCache.clear()}clearAllCaches(){this.jwksCache.clear(),this.resultCache.clear()}async performValidation(s,c){const o=(0,e.decodeJwt)(s).iss;return o?this.determineTokenType(o,c?.tokenType)==="keycloak"?this.validateKeycloakToken(s,c):this.validateDelegatedToken(s,o,c):{valid:!1,tokenType:"auto",error:"Token missing issuer (iss) claim"}}determineTokenType(s,c){if(c&&c!=="auto")return c;if(this.keycloakConfig){const i=`${this.keycloakConfig.authServerUrl}/realms/${this.keycloakConfig.realm}`;if(s===i)return"keycloak"}return"delegated"}async validateKeycloakToken(s,c){if(!this.keycloakConfig)return{valid:!1,tokenType:"keycloak",error:"Keycloak not configured"};const i=`${this.keycloakConfig.authServerUrl}/realms/${this.keycloakConfig.realm}/protocol/openid-connect/certs`,o=`${this.keycloakConfig.authServerUrl}/realms/${this.keycloakConfig.realm}`;try{const l=await this.getJWKS(i),f={issuer:o};this.keycloakConfig.verifyAudience&&this.keycloakConfig.clientId&&!c?.skipAudienceValidation&&(f.audience=this.keycloakConfig.clientId);const{payload:p}=await(0,e.jwtVerify)(s,l,f);return{valid:!0,tokenType:"keycloak",payload:this.mapPayload(p)}}catch(l){return{valid:!1,tokenType:"keycloak",error:l instanceof Error?l.message:"Keycloak token validation failed"}}}async validateDelegatedToken(s,c,i){let o=null;if(typeof i?.delegatedProvider=="function"?o=await i.delegatedProvider(c):i?.delegatedProvider&&(o=i.delegatedProvider),!o)return{valid:!1,tokenType:"delegated",error:`No delegated provider configured for issuer: ${c}`};try{const l=await this.getJWKS(o.jwksUri),f={issuer:o.issuer};!i?.skipAudienceValidation&&o.audience&&(f.audience=o.audience);const{payload:p}=await(0,e.jwtVerify)(s,l,f);return{valid:!0,tokenType:"delegated",providerKey:o.key,payload:this.mapPayload(p)}}catch(l){return{valid:!1,tokenType:"delegated",providerKey:o.key,error:l instanceof Error?l.message:"Delegated token validation failed"}}}mapPayload(s){return{...s,sub:s.sub,iss:s.iss,email:s.email,preferredUsername:s.preferred_username,name:s.name,realmAccess:s.realm_access,resourceAccess:s.resource_access}}async getJWKS(s){const c=this.jwksCache.get(s);if(c&&c.expiresAt>Date.now())return c.keySet;const i=(0,e.createRemoteJWKSet)(new URL(s));return this.jwksCache.set(s,{keySet:i,expiresAt:Date.now()+this.JWKS_CACHE_TTL_MS}),i}getTokenHash(s){return s.length<=32?s:`${s.slice(0,16)}...${s.slice(-16)}`}getCachedResult(s){const c=this.getTokenHash(s),i=this.resultCache.get(c);return i&&i.expiresAt>Date.now()?i.result:(i&&this.resultCache.delete(c),null)}cacheResult(s,c){const i=this.getTokenHash(s);this.resultCache.set(i,{result:c,expiresAt:Date.now()+this.RESULT_CACHE_TTL_MS})}shouldCacheResult(s){return!!(s.valid||s.error?.includes("expired")||s.error?.includes('"exp"')||s.error?.includes("signature")||s.error?.includes("invalid"))}}return Cl.TokenValidationService=t,Cl}var qs={},t_;function r_(){if(t_)return qs;t_=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.LoggerServiceRegistry=void 0,qs.getLogger=s,qs.setLoggerContext=c,qs.clearLoggerContext=i,qs.mergeLoggerContext=o,qs.registerLoggerService=l;const e=Wf(),t=Kf();class n{static register(p){n.instance=p}static get(){return n.instance}static clear(){n.instance=null}}qs.LoggerServiceRegistry=n,n.instance=null;function s(f){const p=t.LoggerContextStorage.getInstance(),h=f||n.get();if(!h)throw new Error("LoggerService not available. Either pass LoggerService to getLogger() or ensure MisoClient is initialized.");return new e.UnifiedLoggerService(h,p)}function c(f){t.LoggerContextStorage.getInstance().setContext(f)}function i(){t.LoggerContextStorage.getInstance().clearContext()}function o(f){t.LoggerContextStorage.getInstance().mergeContext(f)}function l(f){n.register(f)}return qs}var $d={},n_;function mj(){if(n_)return $d;n_=1,Object.defineProperty($d,"__esModule",{value:!0}),$d.isErrorResponse=e;function e(t){if(!t||typeof t!="object")return!1;const n=t;return!(!Array.isArray(n.errors)||!n.errors.every(s=>typeof s=="string")||typeof n.type!="string"||typeof n.title!="string"||typeof n.statusCode!="number"||n.instance!==void 0&&typeof n.instance!="string")}return $d}var xy={},s_;function gj(){return s_||(s_=1,Object.defineProperty(xy,"__esModule",{value:!0})),xy}var _l={},i_;function yj(){if(i_)return _l;i_=1,Object.defineProperty(_l,"__esModule",{value:!0}),_l.FilterBuilder=void 0;class e{constructor(){this.filters=[]}add(n,s,c){return this.filters.push({field:n,op:s,value:c}),this}addMany(n){return this.filters.push(...n),this}build(){return[...this.filters]}toQueryString(){if(this.filters.length===0)return"";const n={};this.filters.forEach(i=>{n[i.field]||(n[i.field]={}),n[i.field][i.op]=i.value===null?null:i.value});const s=JSON.stringify(n),c=new URLSearchParams;return c.append("filter",s),c.toString()}}return _l.FilterBuilder=e,_l}var Ry={},o_;function vj(){return o_||(o_=1,Object.defineProperty(Ry,"__esModule",{value:!0})),Ry}var xl={},Rl={},a_;function Zf(){if(a_)return Rl;a_=1,Object.defineProperty(Rl,"__esModule",{value:!0}),Rl.decodeJWT=t,Rl.extractUserIdFromToken=n;function e(s){let c=s.replace(/-/g,"+").replace(/_/g,"/");for(;c.length%4;)c+="=";return c}function t(s){try{const c=s.split(".");if(c.length!==3)return null;const i=c[1],o=e(i),l=atob(o);return JSON.parse(l)}catch{return null}}function n(s){try{const c=t(s);if(!c)return null;const i=c.sub||c.userId||c.user_id||c.id;return i||null}catch{return null}}return Rl}var c_;function wj(){if(c_)return xl;c_=1,Object.defineProperty(xl,"__esModule",{value:!0}),xl.BrowserPermissionService=void 0;const e=Zf(),t=_i(),n=On();class s{constructor(i,o,l){this.config=i.config,this.cache=l,this.httpClient=i,this.apiClient=o,this.permissionTTL=this.config.cache?.permissionTTL||900}extractUserIdFromToken(i){try{const o=(0,e.decodeJWT)(i);return o?o.sub||o.userId||o.user_id||o.id:null}catch{return null}}getEnvironmentFromClientToken(){if(!(0,n.isBrowser)())return null;try{const i=(0,n.getLocalStorage)("miso:client-token");return i&&(0,t.extractClientTokenInfo)(i).environment||null}catch(i){return console.warn("Failed to extract environment from client token:",i),null}}async getPermissions(i,o){try{let l=this.extractUserIdFromToken(i);const f=l?`permissions:${l}`:null;if(f){const w=await this.cache.get(f);if(w)return w.permissions||[]}if(!l){const w=o||this.config.authStrategy,C=w?{...w,bearerToken:i}:{methods:["bearer"],bearerToken:i};if(l=(await this.apiClient.auth.validateToken({token:i},C)).data?.user?.id||null,!l)return[]}const p=o||this.config.authStrategy,h=p?{...p,bearerToken:i}:{methods:["bearer"],bearerToken:i},u=this.getEnvironmentFromClientToken();u||console.warn("[BrowserPermissionService] Environment not found in client token. Permissions API requires environment parameter. This may cause a 400 Bad Request error.");const m=u?{environment:u}:void 0,v=(await this.apiClient.permissions.getPermissions(m,h)).data?.permissions||[],S=`permissions:${l}`;return await this.cache.set(S,{permissions:v,timestamp:Date.now()},this.permissionTTL),v}catch(l){return console.error("Failed to get permissions:",l),[]}}async hasPermission(i,o,l){return(await this.getPermissions(i,l)).includes(o)}async hasAnyPermission(i,o,l){const f=await this.getPermissions(i,l);return o.some(p=>f.includes(p))}async hasAllPermissions(i,o,l){const f=await this.getPermissions(i,l);return o.every(p=>f.includes(p))}async refreshPermissions(i,o){try{const l=o||this.config.authStrategy,f=l?{...l,bearerToken:i}:{methods:["bearer"],bearerToken:i},p=await this.apiClient.auth.validateToken({token:i},f);if(!p.data?.user?.id)return[];const u=`permissions:${p.data.user.id}`,m=this.getEnvironmentFromClientToken(),g=m?{environment:m}:void 0,S=(await this.apiClient.permissions.refreshPermissions(g,f)).data?.permissions||[];return await this.cache.set(u,{permissions:S,timestamp:Date.now()},this.permissionTTL),S}catch(l){return console.error("Failed to refresh permissions:",l),[]}}async clearPermissionsCache(i,o){try{const l=o||this.config.authStrategy,f=l?{...l,bearerToken:i}:{methods:["bearer"],bearerToken:i},p=await this.apiClient.auth.validateToken({token:i},f);if(!p.data?.user?.id)return;const u=`permissions:${p.data.user.id}`;await this.cache.delete(u)}catch(l){console.error("Failed to clear permissions cache:",l)}}}return xl.BrowserPermissionService=s,xl}var kl={},l_;function Ej(){if(l_)return kl;l_=1,Object.defineProperty(kl,"__esModule",{value:!0}),kl.BrowserRoleService=void 0;const e=Zf(),t=_i(),n=On();class s{constructor(i,o,l){this.config=i.config,this.cache=l,this.httpClient=i,this.apiClient=o,this.roleTTL=this.config.cache?.roleTTL||900}extractUserIdFromToken(i){try{const o=(0,e.decodeJWT)(i);return o?o.sub||o.userId||o.user_id||o.id:null}catch{return null}}getEnvironmentFromClientToken(){if(!(0,n.isBrowser)())return null;try{const i=(0,n.getLocalStorage)("miso:client-token");if(!i)return console.warn("[BrowserRoleService] No client token found in localStorage"),null;const o=(0,t.extractClientTokenInfo)(i);return o.environment||(console.warn("[BrowserRoleService] No environment in client token. Token info:",o),console.log("[BrowserRoleService] Available token info fields:",Object.keys(o))),o.environment||null}catch(i){return console.warn("Failed to extract environment from client token:",i),null}}async getRoles(i,o){try{let l=this.extractUserIdFromToken(i);const f=l?`roles:${l}`:null;if(f){const w=await this.cache.get(f);if(w)return w.roles||[]}if(!l){const w=o||this.config.authStrategy,C=w?{...w,bearerToken:i}:{methods:["bearer"],bearerToken:i};if(l=(await this.apiClient.auth.validateToken({token:i},C)).data?.user?.id||null,!l)return[]}const p=o||this.config.authStrategy,h=p?{...p,bearerToken:i}:{methods:["bearer"],bearerToken:i},u=this.getEnvironmentFromClientToken();u||console.warn("[BrowserRoleService] Environment not found in client token. Roles API requires environment parameter. This may cause a 400 Bad Request error.");const m=u?{environment:u}:void 0,v=(await this.apiClient.roles.getRoles(m,h)).data?.roles||[],S=`roles:${l}`;return await this.cache.set(S,{roles:v,timestamp:Date.now()},this.roleTTL),v}catch(l){return console.error("Failed to get roles:",l),[]}}async hasRole(i,o,l){return(await this.getRoles(i,l)).includes(o)}async hasAnyRole(i,o,l){const f=await this.getRoles(i,l);return o.some(p=>f.includes(p))}async hasAllRoles(i,o,l){const f=await this.getRoles(i,l);return o.every(p=>f.includes(p))}async refreshRoles(i,o){try{const l=o||this.config.authStrategy,f=l?{...l,bearerToken:i}:{methods:["bearer"],bearerToken:i},p=await this.apiClient.auth.validateToken({token:i},f);if(!p.data?.user?.id)return[];const u=`roles:${p.data.user.id}`,m=this.getEnvironmentFromClientToken(),g=m?{environment:m}:void 0,S=(await this.apiClient.roles.refreshRoles(g,f)).data?.roles||[];return await this.cache.set(u,{roles:S,timestamp:Date.now()},this.roleTTL),S}catch(l){return console.error("Failed to refresh roles:",l),[]}}async clearRolesCache(i,o){try{const l=o||this.config.authStrategy,f=l?{...l,bearerToken:i}:{methods:["bearer"],bearerToken:i},p=await this.apiClient.auth.validateToken({token:i},f);if(!p.data?.user?.id)return;const u=`roles:${p.data.user.id}`;await this.cache.delete(u)}catch(l){console.error("Failed to clear roles cache:",l)}}}return kl.BrowserRoleService=s,kl}var Ud={},u_;function Sj(){if(u_)return Ud;u_=1;var e={};Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.loadConfig=t;function t(){const n={controllerUrl:e.MISO_CONTROLLER_URL||"https://controller.aifabrix.ai",clientId:e.MISO_CLIENTID||e.MISO_CLIENT_ID||"",clientSecret:e.MISO_CLIENTSECRET||e.MISO_CLIENT_SECRET||"",logLevel:e.MISO_LOG_LEVEL||"debug"};if(e.MISO_WEB_SERVER_URL&&(n.controllerPublicUrl=e.MISO_WEB_SERVER_URL),e.MISO_CONTROLLER_URL&&(n.controllerPrivateUrl=e.MISO_CONTROLLER_URL,n.controllerUrl=e.MISO_CONTROLLER_URL),!n.clientId)throw new Error("MISO_CLIENTID environment variable is required");if(!n.clientSecret)throw new Error("MISO_CLIENTSECRET environment variable is required");const s=e.REDIS_HOST;if(s){const c={host:s,port:parseInt(e.REDIS_PORT||"6379"),password:e.REDIS_PASSWORD};e.REDIS_DB&&(c.db=parseInt(e.REDIS_DB)),e.REDIS_KEY_PREFIX&&(c.keyPrefix=e.REDIS_KEY_PREFIX),n.redis=c}if(e.ENCRYPTION_KEY&&(n.encryptionKey=e.ENCRYPTION_KEY),e.API_KEY&&(n.apiKey=e.API_KEY),e.MISO_SENSITIVE_FIELDS_CONFIG&&(n.sensitiveFieldsConfig=e.MISO_SENSITIVE_FIELDS_CONFIG),e.MISO_EMIT_EVENTS&&(n.emitEvents=e.MISO_EMIT_EVENTS.toLowerCase()==="true"),e.MISO_AUTH_STRATEGY){const i={methods:e.MISO_AUTH_STRATEGY.split(",").map(o=>o.trim()).filter(o=>["bearer","client-token","client-credentials","api-key"].includes(o))};e.MISO_BEARER_TOKEN&&(i.bearerToken=e.MISO_BEARER_TOKEN),(e.MISO_API_KEY||e.API_KEY)&&(i.apiKey=e.MISO_API_KEY||e.API_KEY),i.methods.length>0&&(n.authStrategy=i)}if(e.MISO_CLIENT_TOKEN_URI&&(n.clientTokenUri=e.MISO_CLIENT_TOKEN_URI),e.MISO_ALLOWED_ORIGINS){const c=e.MISO_ALLOWED_ORIGINS.split(",").map(i=>i.trim()).filter(i=>i.length>0);c.length>0&&(n.allowedOrigins=c)}return e.MISO_VALIDATE_RESPONSES!==void 0?n.validateResponses=e.MISO_VALIDATE_RESPONSES.toLowerCase()==="true":n.validateResponses=!1,n}return Ud}var qd={},d_;function bj(){if(d_)return qd;d_=1,Object.defineProperty(qd,"__esModule",{value:!0}),qd.getEnvironmentToken=s;const e=Jy(),t=pc(),n=Bf();async function s(c,i){const o=c.getConfig(),l=o.allowedOrigins,f=(0,e.validateOrigin)(i,l);if(!f.valid){const p=`Origin validation failed: ${f.error}`,h=i.headers.origin||i.headers.referer||"unknown";throw await c.log.forRequest(i).addContext("origin",h).addContext("allowedOrigins",l||[]).addContext("reason","origin_validation_failed").error(p),await c.log.forRequest(i).addContext("reason","origin_validation_failed").addContext("origin",h).addContext("allowedOrigins",l||[]).audit("client.token.request.rejected","environment-token"),new Error(p)}try{(0,n.resolveControllerUrl)(o);const p=await c.getEnvironmentToken(),h=t.DataMasker.maskSensitiveData({clientId:o.clientId}),u=o.clientSecret?t.DataMasker.maskSensitiveData({clientSecret:o.clientSecret}):{clientSecret:void 0};return await c.log.forRequest(i).addContext("clientId",h.clientId).addContext("clientSecret",u.clientSecret).addContext("origin",i.headers.origin||i.headers.referer||"unknown").audit("client.token.request.success","environment-token"),p}catch(p){const h=p instanceof Error?p.message:"Unknown error",u=t.DataMasker.maskSensitiveData({clientId:o.clientId});throw await c.log.forRequest(i).addContext("clientId",u.clientId).addContext("origin",i.headers.origin||i.headers.referer||"unknown").addContext("reason","token_fetch_failed").error(`Failed to get environment token: ${h}`,p instanceof Error?p.stack:void 0),await c.log.forRequest(i).addContext("reason","token_fetch_failed").addContext("error",h).addContext("clientId",u.clientId).addContext("origin",i.headers.origin||i.headers.referer||"unknown").audit("client.token.request.failed","environment-token"),p}}return qd}var Xa={},Br={},f_;function bi(){if(f_)return Br;f_=1;var e=Br&&Br.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(Br,"__esModule",{value:!0}),Br.isBrowser=n,Br.getLocalStorage=s,Br.setLocalStorage=c,Br.removeLocalStorage=i,Br.extractUserIdFromToken=o,Br.generateCacheKey=l,Br.truncatePayload=f,Br.calculateSize=p,Br.isRetryableError=h,Br.calculateBackoffDelay=u;const t=e(fo());function n(){return typeof globalThis.window<"u"&&typeof globalThis.localStorage<"u"&&typeof globalThis.fetch<"u"}function s(m){if(!n())return null;try{return globalThis.localStorage.getItem(m)}catch{return null}}function c(m,g){if(n())try{globalThis.localStorage.setItem(m,g)}catch{}}function i(m){if(n())try{globalThis.localStorage.removeItem(m)}catch{}}function o(m){try{const g=t.default.decode(m);return g?g.sub||g.userId||g.user_id||g.id:null}catch{return null}}function l(m,g){const v=g?.method||"GET",S=g?.body?JSON.stringify(g.body):"";return`data-client:${v}:${m}:${S}`}function f(m,g){const v=JSON.stringify(m);return v.length<=g?{data:m,truncated:!1}:{data:{_message:"Payload truncated for performance",_size:v.length},truncated:!0}}function p(m){try{return JSON.stringify(m).length}catch{return 0}}function h(m,g){return!m||m>=500||m===408||m===429?!0:(m===401||m===403||m>=400&&m<500,!1)}function u(m,g,v){return Math.min(g*Math.pow(2,m),v)+Math.random()*1e3}return Br}var h_;function OR(){if(h_)return Xa;h_=1;var e=Xa&&Xa.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.extractClientTokenInfo=c;const t=e(fo()),n=bi();function s(i){if((0,n.isBrowser)())try{const o=i.split(".");if(o.length!==3)return null;let l=o[1];for(;l.length%4;)l+="=";return l=l.replace(/-/g,"+").replace(/_/g,"/"),JSON.parse(atob(l))}catch(o){return console.warn("[decodeJWT] Browser decode failed:",o),null}else try{return t.default.decode(i)}catch(o){return console.warn("[decodeJWT] Node.js decode failed:",o),null}}function c(i){try{const o=s(i);if(!o||typeof o!="object")return console.warn("[extractClientTokenInfo] Failed to decode client token: Invalid token format"),{};const l={};return o.application&&typeof o.application=="string"?l.application=o.application:o.app&&typeof o.app=="string"&&(l.application=o.app),o.environment&&typeof o.environment=="string"?l.environment=o.environment:o.env&&typeof o.env=="string"?l.environment=o.env:o.environmentKey&&typeof o.environmentKey=="string"&&(l.environment=o.environmentKey),o.applicationId&&typeof o.applicationId=="string"?l.applicationId=o.applicationId:o.app_id&&typeof o.app_id=="string"&&(l.applicationId=o.app_id),o.clientId&&typeof o.clientId=="string"?l.clientId=o.clientId:o.client_id&&typeof o.client_id=="string"&&(l.clientId=o.client_id),Object.keys(l).length===0?(console.log("[extractClientTokenInfo] No standard fields found in token payload"),console.log("[extractClientTokenInfo] Available fields:",Object.keys(o)),console.log("[extractClientTokenInfo] Full payload:",JSON.stringify(o,null,2)),o.iss&&console.log("[extractClientTokenInfo] Token issuer (iss):",o.iss),o.sub&&console.log("[extractClientTokenInfo] Token subject (sub):",o.sub),o.aud&&console.log("[extractClientTokenInfo] Token audience (aud):",o.aud)):(console.log("[extractClientTokenInfo] Successfully extracted token info:",l),l.environment||(console.log("[extractClientTokenInfo] Environment not found. Available payload fields:",Object.keys(o)),console.log("[extractClientTokenInfo] Full payload:",JSON.stringify(o,null,2)))),l}catch(o){return console.warn("[extractClientTokenInfo] Failed to decode client token:",o),o instanceof Error&&console.warn("[extractClientTokenInfo] Error details:",o.message,o.stack),{}}}return Xa}var Md={},p_;function Tj(){if(p_)return Md;p_=1,Object.defineProperty(Md,"__esModule",{value:!0}),Md.extractLoggingContext=e;function e(t){const n={};return t.source&&(n.sourceKey=t.source.key,t.source.displayName!==void 0&&(n.sourceDisplayName=t.source.displayName),t.source.externalSystem&&(n.externalSystemKey=t.source.externalSystem.key,t.source.externalSystem.displayName!==void 0&&(n.externalSystemDisplayName=t.source.externalSystem.displayName))),t.externalSystem&&(n.externalSystemKey=t.externalSystem.key,t.externalSystem.displayName!==void 0&&(n.externalSystemDisplayName=t.externalSystem.displayName)),t.record&&(n.recordKey=t.record.key,t.record.displayName!==void 0&&(n.recordDisplayName=t.record.displayName)),n}return Md}var Ya={},m_;function Cj(){if(m_)return Ya;m_=1;var e=Ya&&Ya.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.extractRequestContext=s;const t=e(fo());function n(c){const o=(c.headers||{}).authorization;if(!o?.startsWith("Bearer "))return{};try{const l=o.substring(7),f=t.default.decode(l);return f?{userId:f.sub||f.userId||f.user_id||f.id,sessionId:f.sessionId||f.sid}:{}}catch{return{}}}function s(c){const i=c.headers||{},o=c.ip||i["x-forwarded-for"]?.split(",")[0]?.trim()||c.socket?.remoteAddress,l=i["x-correlation-id"]||i["x-request-id"]||i["request-id"],{userId:f,sessionId:p}=n(c);return{ipAddress:o,method:c.method,path:c.originalUrl||c.path,userAgent:i["user-agent"],correlationId:l,referer:i.referer,userId:f,sessionId:p,requestId:i["x-request-id"],requestSize:i["content-length"]?parseInt(i["content-length"],10):void 0}}return Ya}var Vo={},g_;function _j(){if(g_)return Vo;g_=1,Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.parsePaginationParams=e,Vo.createMetaObject=t,Vo.applyPaginationToArray=n,Vo.createPaginatedListResponse=s;function e(c){const i=parseInt(String(c.page??"1"),10),o=parseInt(String(c.page_size??"20"),10);return{currentPage:i,pageSize:o}}function t(c,i,o,l){return{totalItems:c,currentPage:i,pageSize:o,type:l}}function n(c,i,o){const l=(i-1)*o;return c.slice(l,l+o)}function s(c,i,o,l,f){return{meta:t(i,o,l,f),data:c}}return Vo}var ky={},Al={},y_;function nw(){if(y_)return Al;y_=1,Object.defineProperty(Al,"__esModule",{value:!0}),Al.FilterBuilder=void 0;class e{constructor(){this.filters=[]}add(n,s,c){return this.filters.push({field:n,op:s,value:c}),this}addMany(n){return this.filters.push(...n),this}build(){return[...this.filters]}toQueryString(){if(this.filters.length===0)return"";const n={};this.filters.forEach(i=>{n[i.field]||(n[i.field]={}),n[i.field][i.op]=i.value===null?null:i.value});const s=JSON.stringify(n),c=new URLSearchParams;return c.append("filter",s),c.toString()}}return Al.FilterBuilder=e,Al}var v_;function xj(){return v_||(v_=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FilterBuilder=void 0,e.parseFilterParams=i,e.buildQueryString=o,e.applyFilters=l,e.validateJsonFilter=f,e.filterQueryToJson=p,e.jsonToFilterQuery=h;const t=nw();Object.defineProperty(e,"FilterBuilder",{enumerable:!0,get:function(){return t.FilterBuilder}});function n(u){return{equals:"eq",notEquals:"neq",">":"gt","<":"lt",">=":"gte","<=":"lte",equal:"eq",notEqual:"neq",greaterThan:"gt",lessThan:"lt",greaterThanOrEqual:"gte",lessThanOrEqual:"lte"}[u.toLowerCase()]||u}function s(u,m){if((u==="in"||u==="nin")&&!Array.isArray(m))throw new Error(`Operator '${u}' requires array value, got ${typeof m}. Example: {"field": {"${u}": ["value1", "value2"]}}`);if((u==="isNull"||u==="isNotNull")&&m!==null)throw new Error(`Operator '${u}' requires null value, got ${typeof m}. Example: {"field": {"${u}": null}}`)}function c(u){const m=[];for(const[g,v]of Object.entries(u)){if(!g||typeof g!="string")throw new Error(`Invalid filter format. Field names must be non-empty strings. Got: ${typeof g}`);if(typeof v!="object"||v===null||Array.isArray(v))throw new Error(`Field '${g}' must have operator dictionary, got ${typeof v}. Expected format: {"${g}": {"op": value}}`);const S=v;for(const[w,C]of Object.entries(S)){const N=n(w);s(N,C);let I;N==="isNull"||N==="isNotNull"?I=null:(Array.isArray(C),I=C),m.push({field:g,op:N,value:I})}}return m}function i(u){const m=u.filter;if(!m)return[];try{let g;if(typeof m=="object"&&!Array.isArray(m)&&m!==null)g=m;else if(typeof m=="string")try{const v=decodeURIComponent(m);g=JSON.parse(v)}catch{g=JSON.parse(m)}else if(Array.isArray(m)){const v=[];for(const S of m)if(typeof S=="string")try{const w=decodeURIComponent(S),C=JSON.parse(w);v.push(...c(C))}catch{const w=JSON.parse(S);v.push(...c(w))}else typeof S=="object"&&S!==null&&v.push(...c(S));return v}else throw new Error(`Invalid filter format. Expected object or string, got ${typeof m}. Example: {"status": {"eq": "active"}}`);if(typeof g!="object"||g===null||Array.isArray(g))throw new Error(`Invalid filter format. Expected JSON object format: {"field": {"op": value}}. Got: ${typeof g}`);return c(g)}catch(g){throw g instanceof Error?new Error(`Invalid filter format. Expected JSON format: {"field": {"op": value}}. ${g.message}`):new Error(`Invalid filter format. Expected JSON format: {"field": {"op": value}}. Got: ${typeof m}`)}}function o(u){const m=new URLSearchParams;if(u.filters&&u.filters.length>0){const g={};for(const S of u.filters)g[S.field]||(g[S.field]={}),g[S.field][S.op]=S.value===null?null:S.value;const v=JSON.stringify(g);m.append("filter",v)}return u.sort?.forEach(g=>m.append("sort",g)),u.page&&m.append("page",u.page.toString()),u.pageSize&&m.append("page_size",u.pageSize.toString()),u.fields&&u.fields.length>0&&m.append("fields",u.fields.join(",")),m.toString()}function l(u,m){return u.filter(g=>m.every(v=>{const S=g[v.field],w=v.value;if(v.op==="isNull")return S==null;if(v.op==="isNotNull")return S!=null;if(Array.isArray(w))return v.op==="in"?w.includes(S):!w.includes(S);switch(v.op){case"eq":return S===w;case"neq":return S!==w;case"gt":return S>w;case"lt":return S<w;case"gte":return S>=w;case"lte":return S<=w;case"contains":return String(S).includes(String(w));case"like":return new RegExp(String(w),"i").test(String(S));default:return!0}}))}function f(u){if(typeof u!="object"||u===null||Array.isArray(u))throw new Error(`Invalid filter format. Expected object, got ${typeof u}. Example: {"field": {"op": value}}`);const m=u;for(const[g,v]of Object.entries(m)){if(!g||typeof g!="string")throw new Error(`Invalid filter format. Field names must be non-empty strings. Got: ${typeof g}`);if(typeof v!="object"||v===null||Array.isArray(v))throw new Error(`Field '${g}' must have operator dictionary, got ${typeof v}. Expected format: {"${g}": {"op": value}}`);const S=v;for(const[w,C]of Object.entries(S)){const N=n(w);s(N,C)}}}function p(u){const m={};if(u.filters)for(const g of u.filters)m[g.field]||(m[g.field]={}),m[g.field][g.op]=g.value;return m}function h(u){return{filters:c(u)}}})(ky)),ky}var Qa={},w_;function Rj(){if(w_)return Qa;w_=1,Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.parseSortParams=e,Qa.buildSortString=t,Qa.applySorting=n;function e(s){const c=s.sort;return(Array.isArray(c)?c:c?[c]:[]).map(o=>{const l=String(o).trim();if(!l||l==="-"||l===":")return null;if(l.includes(":")){const[f,p]=l.split(":"),h=f.trim();return h?{field:h,order:p?.trim().toLowerCase()==="desc"?"desc":"asc"}:null}if(l.startsWith("-")){const f=l.substring(1).trim();return f?{field:f,order:"desc"}:null}return{field:l,order:"asc"}}).filter(o=>o!==null)}function t(s){return s.map(c=>c.order==="desc"?`-${c.field}`:c.field)}function n(s,c){return!c||c.length===0?s:[...s].sort((i,o)=>{for(const l of c){const f=i[l.field],p=o[l.field];if(f==null)return 1;if(p==null)return-1;if(f<p)return l.order==="asc"?-1:1;if(f>p)return l.order==="asc"?1:-1}return 0})}return Qa}var Ay={},Il={},Xo={},E_;function NR(){if(E_)return Xo;E_=1,Object.defineProperty(Xo,"__esModule",{value:!0}),Xo.parsePaginationParams=e,Xo.createMetaObject=t,Xo.applyPaginationToArray=n,Xo.createPaginatedListResponse=s;function e(c){const i=parseInt(String(c.page??"1"),10),o=parseInt(String(c.page_size??"20"),10);return{currentPage:i,pageSize:o}}function t(c,i,o,l){return{totalItems:c,currentPage:i,pageSize:o,type:l}}function n(c,i,o){const l=(i-1)*o;return c.slice(l,l+o)}function s(c,i,o,l,f){return{meta:t(i,o,l,f),data:c}}return Xo}var gi={},S_;function ku(){if(S_)return gi;S_=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.createErrorResponse=gi.createSuccessResponse=gi.AppError=void 0;class e extends Error{constructor(c,i=500,o=!0,l,f,p,h){super(c),this.statusCode=i,this.isOperational=o,this.validationErrors=l||[],this.errorType=f,this.instance=p,this.correlationId=h,Error.captureStackTrace(this,this.constructor)}toErrorResponse(c){const i={400:"/Errors/BadRequest",401:"/Errors/Unauthorized",403:"/Errors/Forbidden",404:"/Errors/NotFound",405:"/Errors/MethodNotAllowed",409:"/Errors/Conflict",422:"/Errors/UnprocessableEntity",429:"/Errors/TooManyRequests",500:"/Errors/InternalServerError",503:"/Errors/ServiceUnavailable"},o={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",409:"Conflict",422:"Unprocessable Entity",429:"Too Many Requests",500:"Internal Server Error",503:"Service Unavailable"},l=this.errorType||i[this.statusCode]||"/Errors/InternalServerError",f=o[this.statusCode]||"Internal Server Error";return{type:l,title:f,status:this.statusCode,detail:this.message,instance:this.instance||c,correlationId:this.correlationId,errors:this.validationErrors&&this.validationErrors.length>0?this.validationErrors:void 0}}}gi.AppError=e;const t=(s,c,i)=>{const o={success:!0,data:s,timestamp:new Date().toISOString()};return c&&(o.message=c),i&&(o.correlationId=i),o};gi.createSuccessResponse=t;const n=(s,c)=>{const i={success:!1,error:s,timestamp:new Date().toISOString()};return c&&(i.correlationId=c),i};return gi.createErrorResponse=n,gi}var b_;function sw(){if(b_)return Il;b_=1,Object.defineProperty(Il,"__esModule",{value:!0}),Il.ResponseHelper=void 0;const e=NR(),t=ku();class n{static success(c,i,o,l=200){const f={success:!0,data:i,timestamp:new Date().toISOString()};return o&&(f.message=o),c.status(l).json(f)}static created(c,i,o="Resource created"){return n.success(c,i,o,201)}static paginated(c,i,o){const l=(0,e.createPaginatedListResponse)(i,o.totalItems,o.currentPage,o.pageSize,o.type);return c.status(200).json(l)}static noContent(c){return c.status(204).send()}static accepted(c,i,o="Request accepted"){return n.success(c,i,o,202)}static error(c,i=400,o=!0,l,f){throw new t.AppError(c,i,o,l,f)}}return Il.ResponseHelper=n,Il}var Hd={},T_;function LR(){if(T_)return Hd;T_=1,Object.defineProperty(Hd,"__esModule",{value:!0}),Hd.injectResponseHelpers=t;const e=sw();function t(n,s,c){s.success=(i,o)=>e.ResponseHelper.success(s,i,o),s.created=(i,o)=>e.ResponseHelper.created(s,i,o),s.paginated=(i,o)=>e.ResponseHelper.paginated(s,i,o),s.noContent=()=>e.ResponseHelper.noContent(s),s.accepted=(i,o)=>e.ResponseHelper.accepted(s,i,o),c()}return Hd}var Pl={},Ol={},Yo={},C_;function iw(){if(C_)return Yo;C_=1,Object.defineProperty(Yo,"__esModule",{value:!0}),Yo.getErrorTypeUri=t,Yo.getErrorTitle=n,Yo.createErrorResponse=s,Yo.sendErrorResponse=c;const e={400:"/Errors/BadRequest",401:"/Errors/Unauthorized",403:"/Errors/Forbidden",404:"/Errors/NotFound",405:"/Errors/MethodNotAllowed",409:"/Errors/Conflict",422:"/Errors/UnprocessableEntity",429:"/Errors/TooManyRequests",500:"/Errors/InternalServerError",503:"/Errors/ServiceUnavailable"};function t(i){return e[i]||"/Errors/InternalServerError"}function n(i){return{400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",409:"Conflict",422:"Unprocessable Entity",429:"Too Many Requests",500:"Internal Server Error",503:"Service Unavailable"}[i]||"Internal Server Error"}function s(i,o,l,f,p){let h;i instanceof Error?h=i.message:typeof i=="string"?h=i:i==null?h="An error occurred":h=String(i)||"An error occurred";const u=f||l?.correlationId||l?.headers["x-correlation-id"],m={type:t(o),title:n(o),status:o,detail:h,instance:l?.originalUrl};return u&&(m.correlationId=u),p&&p.length>0&&(m.errors=p),m}function c(i,o){i.setHeader("Content-Type","application/problem+json"),i.status(o.status).json(o)}return Yo}var __;function ow(){if(__)return Ol;__=1,Object.defineProperty(Ol,"__esModule",{value:!0}),Ol.setErrorLogger=o,Ol.handleRouteError=u;const e=ku(),t=iw(),n=Ft(),s=Ht(),c=Tu();let i=null;function o(m){i=m}function l(m){if(m instanceof e.AppError)return m.statusCode;if(m&&typeof m=="object"&&"code"in m){const v=m.code;if(v==="P2002")return 409;if(v==="P2025")return 404;if(v==="P2003")return 400}const g=m instanceof Error?m.message:String(m||"Unknown error");return g.toLowerCase().includes("not found")?404:g.toLowerCase().includes("already exists")||g.toLowerCase().includes("duplicate")?409:g.toLowerCase().includes("validation")||g.toLowerCase().includes("invalid")?400:g.toLowerCase().includes("unauthorized")||g.toLowerCase().includes("authentication")?401:g.toLowerCase().includes("forbidden")||g.toLowerCase().includes("permission")?403:500}function f(m){return m instanceof Error?m.message:typeof m=="string"?m:"An unexpected error occurred"}function p(){const m=Date.now(),g=Math.random().toString(36).substring(2,8);return`express-${m}-${g}`}function h(m,g,v,S){let w;return m instanceof e.AppError&&m.validationErrors&&(w=m.validationErrors),(0,t.createErrorResponse)(m,g,v,S,w)}async function u(m,g,v,S){const w=(0,c.extractRequestContext)(g),C=g.correlationId||w.correlationId||p(),N=l(m),I=f(m),R=(0,n.extractErrorInfo)(m,{endpoint:g.originalUrl||g.path,method:g.method,correlationId:C}),D=S||"unknown operation",A=`${D} failed: ${I}`;if((0,s.logErrorWithContext)(R,"[Express]"),i)try{await i.logError(A,{req:g,correlationId:R.correlationId||C,operation:D,statusCode:R.statusCode||N,url:g.originalUrl,method:g.method,errorMessage:R.message,errorName:R.errorName,errorType:R.errorType,stack:R.stackTrace})}catch(x){const M=x instanceof Error?x:new Error(String(x));process.stderr.write(`[ERROR] Failed to log error: ${M.message}
`),process.stderr.write(`[ERROR] Original error: ${I}
`)}else process.stderr.write(`[ERROR] ${A}
`),m instanceof Error&&m.stack&&process.stderr.write(`[ERROR] Stack: ${m.stack}
`);const O=h(m,N,g,C);m instanceof e.AppError&&m.correlationId&&(O.correlationId=m.correlationId),(0,t.sendErrorResponse)(v,O)}return Ol}var x_;function jR(){if(x_)return Pl;x_=1,Object.defineProperty(Pl,"__esModule",{value:!0}),Pl.asyncHandler=t,Pl.asyncHandlerNamed=n;const e=ow();function t(s,c){return async(i,o,l)=>{try{await s(i,o,l)}catch(f){const p=c||`${i.method} ${i.route?.path||i.path}`;await(0,e.handleRouteError)(f,i,o,p)}}}function n(s,c){return t(c,s)}return Pl}var Nl={},R_;function DR(){if(R_)return Nl;R_=1,Object.defineProperty(Nl,"__esModule",{value:!0}),Nl.ValidationHelper=void 0;const e=ku();class t{static async findOrFail(s,c,i){const o=await s();if(!o)throw new e.AppError(`${c} not found${i?`: ${i}`:""}`,404,!0,void 0,"/Errors/NotFound");return o}static async ensureNotExists(s,c,i){if(await s())throw new e.AppError(`${c} already exists${i?`: ${i}`:""}`,409,!0,void 0,"/Errors/Conflict")}static ensureOwnershipOrAdmin(s,c,i="No permission to access this resource"){const o=s.userId===c,l=s.userRoles?.includes("admin")||s.userRoles?.includes("superuser");if(!o&&!l)throw new e.AppError(i,403,!0,void 0,"/Errors/Forbidden")}static async validateAll(s){await Promise.all(s.map(c=>c()))}static validateRequiredFields(s,c,i){const o=c.filter(l=>s[l]===void 0||s[l]===null||s[l]==="");if(o.length>0)throw new e.AppError(`Missing required fields for ${i}: ${o.join(", ")}`,400,!0,void 0,"/Errors/BadRequest")}static ensureAuthenticated(s){if(!s.userId)throw new e.AppError("Authentication required",401,!0,void 0,"/Errors/Unauthorized")}static validateStringLength(s,c,i,o){if(i!==void 0&&s.length<i)throw new e.AppError(`${c} must be at least ${i} characters`,400,!0,void 0,"/Errors/BadRequest");if(o!==void 0&&s.length>o)throw new e.AppError(`${c} must not exceed ${o} characters`,400,!0,void 0,"/Errors/BadRequest")}}return Nl.ValidationHelper=t,Nl}var Qo={},k_;function $R(){if(k_)return Qo;k_=1;var e={},t=Qo&&Qo.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.EncryptionUtil=void 0;const n=t(Ti);class s{static initialize(){if(this.initialized)return;const i=e.ENCRYPTION_KEY;if(!i)throw new Error("ENCRYPTION_KEY environment variable not configured");if(i.length!==64)throw new Error("ENCRYPTION_KEY must be 64 hex characters (32 bytes)");try{this.key=Buffer.from(i,"hex")}catch{throw new Error("ENCRYPTION_KEY must be valid hex string")}this.initialized=!0}static encrypt(i){if(!this.initialized)throw new Error("EncryptionUtil not initialized. Call initialize() first.");if(!i)throw new Error("Cannot encrypt empty text");const o=n.default.randomBytes(16),l=n.default.createCipheriv(this.algorithm,this.key,o);let f=l.update(i,"utf8","hex");f+=l.final("hex");const p=l.getAuthTag();return`${o.toString("hex")}:${p.toString("hex")}:${f}`}static decrypt(i){if(!this.initialized)throw new Error("EncryptionUtil not initialized. Call initialize() first.");if(!i)throw new Error("Cannot decrypt empty text");try{const o=i.split(":");if(o.length!==3)throw new Error("Invalid encrypted text format");const l=Buffer.from(o[0]||"","hex"),f=Buffer.from(o[1]||"","hex"),p=o[2]||"",h=n.default.createDecipheriv(this.algorithm,this.key,l);h.setAuthTag(f);let u=h.update(p,"hex","utf8");return u+=h.final("utf8"),u}catch(o){throw new Error(`Decryption failed: ${o instanceof Error?o.message:"Unknown error"}`)}}static generateKey(){return n.default.randomBytes(32).toString("hex")}}return Qo.EncryptionUtil=s,s.algorithm="aes-256-gcm",s.initialized=!1,Qo}var Fd={},A_;function mu(){if(A_)return Fd;A_=1,Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.validateOrigin=n;function e(s){return s.trim().toLowerCase().replace(/\/$/,"")}function t(s,c){const i=e(s),o=e(c);if(i===o)return!0;if(c.includes(":*"))try{const l=new URL(i),f=new URL(o.replace(":*",""));if(l.protocol===f.protocol&&l.hostname===f.hostname)return!0}catch{}return!1}function n(s,c){if(!c||c.length===0)return{valid:!0};let i=Array.isArray(s.headers.origin)?s.headers.origin[0]:s.headers.origin;if(!i||typeof i!="string"){const l=Array.isArray(s.headers.referer)?s.headers.referer[0]:s.headers.referer;if(l&&typeof l=="string")try{const f=new URL(l);i=`${f.protocol}//${f.host}`}catch{return{valid:!1,error:"Missing origin header"}}else return{valid:!1,error:"Missing origin header"}}const o=i;for(const l of c)if(t(o,l))return{valid:!0};return{valid:!1,error:`Origin '${o}' is not allowed`}}return Fd}var Wd={},I_;function eh(){if(I_)return Wd;I_=1,Object.defineProperty(Wd,"__esModule",{value:!0}),Wd.getEnvironmentToken=s;const e=mu(),t=ho(),n=ma();async function s(c,i){const o=c.getConfig(),l=o.allowedOrigins,f=(0,e.validateOrigin)(i,l);if(!f.valid){const p=`Origin validation failed: ${f.error}`,h=i.headers.origin||i.headers.referer||"unknown";throw await c.log.forRequest(i).addContext("origin",h).addContext("allowedOrigins",l||[]).addContext("reason","origin_validation_failed").error(p),await c.log.forRequest(i).addContext("reason","origin_validation_failed").addContext("origin",h).addContext("allowedOrigins",l||[]).audit("client.token.request.rejected","environment-token"),new Error(p)}try{(0,n.resolveControllerUrl)(o);const p=await c.getEnvironmentToken(),h=t.DataMasker.maskSensitiveData({clientId:o.clientId}),u=o.clientSecret?t.DataMasker.maskSensitiveData({clientSecret:o.clientSecret}):{clientSecret:void 0};return await c.log.forRequest(i).addContext("clientId",h.clientId).addContext("clientSecret",u.clientSecret).addContext("origin",i.headers.origin||i.headers.referer||"unknown").audit("client.token.request.success","environment-token"),p}catch(p){const h=p instanceof Error?p.message:"Unknown error",u=t.DataMasker.maskSensitiveData({clientId:o.clientId});throw await c.log.forRequest(i).addContext("clientId",u.clientId).addContext("origin",i.headers.origin||i.headers.referer||"unknown").addContext("reason","token_fetch_failed").error(`Failed to get environment token: ${h}`,p instanceof Error?p.stack:void 0),await c.log.forRequest(i).addContext("reason","token_fetch_failed").addContext("error",h).addContext("clientId",u.clientId).addContext("origin",i.headers.origin||i.headers.referer||"unknown").audit("client.token.request.failed","environment-token"),p}}return Wd}var Ll={},P_;function th(){if(P_)return Ll;P_=1,Object.defineProperty(Ll,"__esModule",{value:!0}),Ll.hasConfig=n,Ll.createClientTokenEndpoint=s;const e=eh(),t=ma();function n(c){return c.config!==void 0}function s(c,i){const o={clientTokenUri:"/api/v1/auth/client-token",expiresIn:1800,includeConfig:!0,...i};return async(l,f)=>{const p=()=>f.headersSent||f.writableEnded;try{if(!c.isInitialized()){p()||f.status(503).json({error:"Service Unavailable",message:"MisoClient is not initialized"});return}const h=5e3,u=(0,e.getEnvironmentToken)(c,l),m=new Promise((S,w)=>{setTimeout(()=>{w(new Error("Request timeout: Failed to get environment token within 5 seconds"))},h)});let g;try{g=await Promise.race([u,m])}catch(S){if(p())return;const w=S instanceof Error?S.message:"Unknown error";if(w.includes("Origin validation failed")){f.status(403).json({error:"Forbidden",message:w});return}const C=w.includes("Request timeout: Failed to get environment token within 5 seconds"),N=w.match(/status:\s*(\d+)/i)||w.match(/status code\s+(\d+)/i)||w.match(/status\s+(\d+)/i),I=N?parseInt(N[1],10):void 0,R=I!==void 0;let D=I,A,O=!1,x=S;for(let z=0;z<5&&x;z++){if(x&&typeof x=="object"&&"isAxiosError"in x&&x.isAxiosError){const q=x;if(q.response){D=q.response.status,A=q.response.statusText;break}if(q.request&&!q.response){O=!0;break}}if(x&&typeof x=="object"&&"cause"in x)x=x.cause;else break}const M=D||I;if(R&&M){if(M===401){f.status(401).json({error:"Unauthorized",message:"Failed to get environment token: Invalid client credentials or application not found"});return}if(M===403){f.status(403).json({error:"Forbidden",message:"Failed to get environment token: Access denied"});return}f.status(M).json({error:A||"Error",message:w});return}const G=O||w.includes("ECONNREFUSED")||w.includes("ENOTFOUND")||w.includes("ETIMEDOUT")||w.includes("connect")||w.includes("Network Error")||w.includes("network error")||w.includes("getaddrinfo ENOTFOUND")||w.includes("getaddrinfo EAI_AGAIN"),V=C||w.includes("timeout")||w.includes("Timeout");if(G||V){const z=c.getConfig();let q;try{q=(0,t.resolveControllerUrl)(z)}catch{q=z.controllerPrivateUrl||z.controllerUrl||"NOT CONFIGURED"}f.status(504).json({error:"Gateway Timeout",message:G?"Failed to get environment token: Controller is unreachable":"Failed to get environment token: Controller request timed out",details:{controllerUrl:q||"NOT CONFIGURED",timeout:"4 seconds",suggestion:q&&q!=="NOT CONFIGURED"?`Controller at ${q} is not responding. Please check if the controller is running and accessible.`:"Controller URL is not configured. Please set MISO_CONTROLLER_URL environment variable."}});return}f.status(500).json({error:"Internal Server Error",message:w});return}const v={token:g,expiresIn:o.expiresIn};if(o.includeConfig){const S=c.getConfig(),w=`${l.protocol}://${l.get("host")||"localhost"}`,C=S.controllerPublicUrl||S.controllerUrl;if(!C){p()||f.status(500).json({error:"Internal Server Error",message:"Controller URL not configured"});return}v.config={baseUrl:w,controllerUrl:C,controllerPublicUrl:S.controllerPublicUrl,clientId:S.clientId,clientTokenUri:o.clientTokenUri}}p()||f.json(v)}catch(h){if(p())return;const u=h instanceof Error?h.message:"Unknown error";if(u.includes("Origin validation failed")){f.status(403).json({error:"Forbidden",message:u});return}if(u.includes("timeout")||u.includes("Timeout")){f.status(504).json({error:"Gateway Timeout",message:"Failed to get environment token: Request timed out"});return}f.status(500).json({error:"Internal Server Error",message:u})}}}return Ll}var Kd={},O_;function UR(){if(O_)return Kd;O_=1,Object.defineProperty(Kd,"__esModule",{value:!0}),Kd.loggerContextMiddleware=c;const e=hu(),t=Tu(),n=Hv();function s(){const i=Date.now(),o=Math.random().toString(36).substring(2,8);return`server-${i}-${o}`}function c(i,o,l){try{const f=(0,t.extractRequestContext)(i),p=i.headers.authorization?.replace("Bearer ",""),h=p?(0,n.extractJwtContext)(p):{},u=f.correlationId||s();(0,e.setLoggerContext)({ipAddress:f.ipAddress,method:f.method,path:f.path,userId:f.userId||h.userId,sessionId:f.sessionId||h.sessionId,applicationId:h.applicationId,userAgent:f.userAgent,correlationId:u,requestId:f.requestId,token:p}),l()}catch{l()}}return Kd}var N_;function kj(){return N_||(N_=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.loggerContextMiddleware=e.hasConfig=e.createClientTokenEndpoint=e.extractClientTokenInfo=e.getEnvironmentToken=e.validateOrigin=e.EncryptionUtil=e.sendErrorResponse=e.getErrorTitle=e.getErrorTypeUri=e.handleRouteError=e.setErrorLogger=e.createErrorResponse=e.createSuccessResponse=e.AppError=e.ValidationHelper=e.asyncHandlerNamed=e.asyncHandler=e.injectResponseHelpers=e.ResponseHelper=void 0;var t=sw();Object.defineProperty(e,"ResponseHelper",{enumerable:!0,get:function(){return t.ResponseHelper}});var n=LR();Object.defineProperty(e,"injectResponseHelpers",{enumerable:!0,get:function(){return n.injectResponseHelpers}});var s=jR();Object.defineProperty(e,"asyncHandler",{enumerable:!0,get:function(){return s.asyncHandler}}),Object.defineProperty(e,"asyncHandlerNamed",{enumerable:!0,get:function(){return s.asyncHandlerNamed}});var c=DR();Object.defineProperty(e,"ValidationHelper",{enumerable:!0,get:function(){return c.ValidationHelper}});var i=ku();Object.defineProperty(e,"AppError",{enumerable:!0,get:function(){return i.AppError}}),Object.defineProperty(e,"createSuccessResponse",{enumerable:!0,get:function(){return i.createSuccessResponse}}),Object.defineProperty(e,"createErrorResponse",{enumerable:!0,get:function(){return i.createErrorResponse}});var o=ow();Object.defineProperty(e,"setErrorLogger",{enumerable:!0,get:function(){return o.setErrorLogger}}),Object.defineProperty(e,"handleRouteError",{enumerable:!0,get:function(){return o.handleRouteError}});var l=iw();Object.defineProperty(e,"getErrorTypeUri",{enumerable:!0,get:function(){return l.getErrorTypeUri}}),Object.defineProperty(e,"getErrorTitle",{enumerable:!0,get:function(){return l.getErrorTitle}}),Object.defineProperty(e,"sendErrorResponse",{enumerable:!0,get:function(){return l.sendErrorResponse}});var f=$R();Object.defineProperty(e,"EncryptionUtil",{enumerable:!0,get:function(){return f.EncryptionUtil}});var p=mu();Object.defineProperty(e,"validateOrigin",{enumerable:!0,get:function(){return p.validateOrigin}});var h=eh();Object.defineProperty(e,"getEnvironmentToken",{enumerable:!0,get:function(){return h.getEnvironmentToken}});var u=_i();Object.defineProperty(e,"extractClientTokenInfo",{enumerable:!0,get:function(){return u.extractClientTokenInfo}});var m=th();Object.defineProperty(e,"createClientTokenEndpoint",{enumerable:!0,get:function(){return m.createClientTokenEndpoint}}),Object.defineProperty(e,"hasConfig",{enumerable:!0,get:function(){return m.hasConfig}});var g=UR();Object.defineProperty(e,"loggerContextMiddleware",{enumerable:!0,get:function(){return g.loggerContextMiddleware}})})(Ay)),Ay}var Yn={},Zo={},In={};/*! Axios v1.13.2 Copyright (c) 2025 Matt Zabriskie and contributors */var Iy,L_;function qR(){if(L_)return Iy;L_=1;function e(E,T){return function(){return E.apply(T,arguments)}}const{toString:t}=Object.prototype,{getPrototypeOf:n}=Object,{iterator:s,toStringTag:c}=Symbol,i=(E=>T=>{const k=t.call(T);return E[k]||(E[k]=k.slice(8,-1).toLowerCase())})(Object.create(null)),o=E=>(E=E.toLowerCase(),T=>i(T)===E),l=E=>T=>typeof T===E,{isArray:f}=Array,p=l("undefined");function h(E){return E!==null&&!p(E)&&E.constructor!==null&&!p(E.constructor)&&v(E.constructor.isBuffer)&&E.constructor.isBuffer(E)}const u=o("ArrayBuffer");function m(E){let T;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?T=ArrayBuffer.isView(E):T=E&&E.buffer&&u(E.buffer),T}const g=l("string"),v=l("function"),S=l("number"),w=E=>E!==null&&typeof E=="object",C=E=>E===!0||E===!1,N=E=>{if(i(E)!=="object")return!1;const T=n(E);return(T===null||T===Object.prototype||Object.getPrototypeOf(T)===null)&&!(c in E)&&!(s in E)},I=E=>{if(!w(E)||h(E))return!1;try{return Object.keys(E).length===0&&Object.getPrototypeOf(E)===Object.prototype}catch{return!1}},R=o("Date"),D=o("File"),A=o("Blob"),O=o("FileList"),x=E=>w(E)&&v(E.pipe),M=E=>{let T;return E&&(typeof FormData=="function"&&E instanceof FormData||v(E.append)&&((T=i(E))==="formdata"||T==="object"&&v(E.toString)&&E.toString()==="[object FormData]"))},G=o("URLSearchParams"),[V,z,q,H]=["ReadableStream","Request","Response","Headers"].map(o),$=E=>E.trim?E.trim():E.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function K(E,T,{allOwnKeys:k=!1}={}){if(E===null||typeof E>"u")return;let L,j;if(typeof E!="object"&&(E=[E]),f(E))for(L=0,j=E.length;L<j;L++)T.call(null,E[L],L,E);else{if(h(E))return;const W=k?Object.getOwnPropertyNames(E):Object.keys(E),F=W.length;let ne;for(L=0;L<F;L++)ne=W[L],T.call(null,E[ne],ne,E)}}function X(E,T){if(h(E))return null;T=T.toLowerCase();const k=Object.keys(E);let L=k.length,j;for(;L-- >0;)if(j=k[L],T===j.toLowerCase())return j;return null}const B=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ca,te=E=>!p(E)&&E!==B;function ae(){const{caseless:E,skipUndefined:T}=te(this)&&this||{},k={},L=(j,W)=>{const F=E&&X(k,W)||W;N(k[F])&&N(j)?k[F]=ae(k[F],j):N(j)?k[F]=ae({},j):f(j)?k[F]=j.slice():(!T||!p(j))&&(k[F]=j)};for(let j=0,W=arguments.length;j<W;j++)arguments[j]&&K(arguments[j],L);return k}const Z=(E,T,k,{allOwnKeys:L}={})=>(K(T,(j,W)=>{k&&v(j)?E[W]=e(j,k):E[W]=j},{allOwnKeys:L}),E),oe=E=>(E.charCodeAt(0)===65279&&(E=E.slice(1)),E),ce=(E,T,k,L)=>{E.prototype=Object.create(T.prototype,L),E.prototype.constructor=E,Object.defineProperty(E,"super",{value:T.prototype}),k&&Object.assign(E.prototype,k)},Y=(E,T,k,L)=>{let j,W,F;const ne={};if(T=T||{},E==null)return T;do{for(j=Object.getOwnPropertyNames(E),W=j.length;W-- >0;)F=j[W],(!L||L(F,E,T))&&!ne[F]&&(T[F]=E[F],ne[F]=!0);E=k!==!1&&n(E)}while(E&&(!k||k(E,T))&&E!==Object.prototype);return T},re=(E,T,k)=>{E=String(E),(k===void 0||k>E.length)&&(k=E.length),k-=T.length;const L=E.indexOf(T,k);return L!==-1&&L===k},me=E=>{if(!E)return null;if(f(E))return E;let T=E.length;if(!S(T))return null;const k=new Array(T);for(;T-- >0;)k[T]=E[T];return k},xe=(E=>T=>E&&T instanceof E)(typeof Uint8Array<"u"&&n(Uint8Array)),Oe=(E,T)=>{const L=(E&&E[s]).call(E);let j;for(;(j=L.next())&&!j.done;){const W=j.value;T.call(E,W[0],W[1])}},qe=(E,T)=>{let k;const L=[];for(;(k=E.exec(T))!==null;)L.push(k);return L},lt=o("HTMLFormElement"),Dt=E=>E.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(k,L,j){return L.toUpperCase()+j}),Q=(({hasOwnProperty:E})=>(T,k)=>E.call(T,k))(Object.prototype),Ee=o("RegExp"),Te=(E,T)=>{const k=Object.getOwnPropertyDescriptors(E),L={};K(k,(j,W)=>{let F;(F=T(j,W,E))!==!1&&(L[W]=F||j)}),Object.defineProperties(E,L)},nt=E=>{Te(E,(T,k)=>{if(v(E)&&["arguments","caller","callee"].indexOf(k)!==-1)return!1;const L=E[k];if(v(L)){if(T.enumerable=!1,"writable"in T){T.writable=!1;return}T.set||(T.set=()=>{throw Error("Can not rewrite read-only method '"+k+"'")})}})},dt=(E,T)=>{const k={},L=j=>{j.forEach(W=>{k[W]=!0})};return f(E)?L(E):L(String(E).split(T)),k},ht=()=>{},Ws=(E,T)=>E!=null&&Number.isFinite(E=+E)?E:T;function vr(E){return!!(E&&v(E.append)&&E[c]==="FormData"&&E[s])}const ns=E=>{const T=new Array(10),k=(L,j)=>{if(w(L)){if(T.indexOf(L)>=0)return;if(h(L))return L;if(!("toJSON"in L)){T[j]=L;const W=f(L)?[]:{};return K(L,(F,ne)=>{const ye=k(F,j+1);!p(ye)&&(W[ne]=ye)}),T[j]=void 0,W}}return L};return k(E,0)},Nn=o("AsyncFunction"),Kt=E=>E&&(w(E)||v(E))&&v(E.then)&&v(E.catch),Dr=((E,T)=>E?setImmediate:T?((k,L)=>(B.addEventListener("message",({source:j,data:W})=>{j===B&&W===k&&L.length&&L.shift()()},!1),j=>{L.push(j),B.postMessage(k,"*")}))(`axios@${Math.random()}`,[]):k=>setTimeout(k))(typeof setImmediate=="function",v(B.postMessage)),xi=typeof queueMicrotask<"u"?queueMicrotask.bind(B):typeof process<"u"&&process.nextTick||Dr;var J={isArray:f,isArrayBuffer:u,isBuffer:h,isFormData:M,isArrayBufferView:m,isString:g,isNumber:S,isBoolean:C,isObject:w,isPlainObject:N,isEmptyObject:I,isReadableStream:V,isRequest:z,isResponse:q,isHeaders:H,isUndefined:p,isDate:R,isFile:D,isBlob:A,isRegExp:Ee,isFunction:v,isStream:x,isURLSearchParams:G,isTypedArray:xe,isFileList:O,forEach:K,merge:ae,extend:Z,trim:$,stripBOM:oe,inherits:ce,toFlatObject:Y,kindOf:i,kindOfTest:o,endsWith:re,toArray:me,forEachEntry:Oe,matchAll:qe,isHTMLForm:lt,hasOwnProperty:Q,hasOwnProp:Q,reduceDescriptors:Te,freezeMethods:nt,toObjectSet:dt,toCamelCase:Dt,noop:ht,toFiniteNumber:Ws,findKey:X,global:B,isContextDefined:te,isSpecCompliantForm:vr,toJSONObject:ns,isAsyncFn:Nn,isThenable:Kt,setImmediate:Dr,asap:xi,isIterable:E=>E!=null&&v(E[s])};function ke(E,T,k,L,j){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=E,this.name="AxiosError",T&&(this.code=T),k&&(this.config=k),L&&(this.request=L),j&&(this.response=j,this.status=j.status?j.status:null)}J.inherits(ke,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:J.toJSONObject(this.config),code:this.code,status:this.status}}});const wn=ke.prototype,Ln={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(E=>{Ln[E]={value:E}}),Object.defineProperties(ke,Ln),Object.defineProperty(wn,"isAxiosError",{value:!0}),ke.from=(E,T,k,L,j,W)=>{const F=Object.create(wn);J.toFlatObject(E,F,function(ue){return ue!==Error.prototype},de=>de!=="isAxiosError");const ne=E&&E.message?E.message:"Error",ye=T==null&&E?E.code:T;return ke.call(F,ne,ye,k,L,j),E&&F.cause==null&&Object.defineProperty(F,"cause",{value:E,configurable:!0}),F.name=E&&E.name||"Error",W&&Object.assign(F,W),F};var Cr=null;function _r(E){return J.isPlainObject(E)||J.isArray(E)}function en(E){return J.endsWith(E,"[]")?E.slice(0,-2):E}function _s(E,T,k){return E?E.concat(T).map(function(j,W){return j=en(j),!k&&W?"["+j+"]":j}).join(k?".":""):T}function Ri(E){return J.isArray(E)&&!E.some(_r)}const ki=J.toFlatObject(J,{},null,function(T){return/^is[A-Z]/.test(T)});function xr(E,T,k){if(!J.isObject(E))throw new TypeError("target must be an object");T=T||new FormData,k=J.toFlatObject(k,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_e,ve){return!J.isUndefined(ve[_e])});const L=k.metaTokens,j=k.visitor||ue,W=k.dots,F=k.indexes,ye=(k.Blob||typeof Blob<"u"&&Blob)&&J.isSpecCompliantForm(T);if(!J.isFunction(j))throw new TypeError("visitor must be a function");function de(fe){if(fe===null)return"";if(J.isDate(fe))return fe.toISOString();if(J.isBoolean(fe))return fe.toString();if(!ye&&J.isBlob(fe))throw new ke("Blob is not supported. Use a Buffer instead.");return J.isArrayBuffer(fe)||J.isTypedArray(fe)?ye&&typeof Blob=="function"?new Blob([fe]):Buffer.from(fe):fe}function ue(fe,_e,ve){let et=fe;if(fe&&!ve&&typeof fe=="object"){if(J.endsWith(_e,"{}"))_e=L?_e:_e.slice(0,-2),fe=JSON.stringify(fe);else if(J.isArray(fe)&&Ri(fe)||(J.isFileList(fe)||J.endsWith(_e,"[]"))&&(et=J.toArray(fe)))return _e=en(_e),et.forEach(function(ot,wt){!(J.isUndefined(ot)||ot===null)&&T.append(F===!0?_s([_e],wt,W):F===null?_e:_e+"[]",de(ot))}),!1}return _r(fe)?!0:(T.append(_s(ve,_e,W),de(fe)),!1)}const we=[],Be=Object.assign(ki,{defaultVisitor:ue,convertValue:de,isVisitable:_r});function ut(fe,_e){if(!J.isUndefined(fe)){if(we.indexOf(fe)!==-1)throw Error("Circular reference detected in "+_e.join("."));we.push(fe),J.forEach(fe,function(et,_t){(!(J.isUndefined(et)||et===null)&&j.call(T,et,J.isString(_t)?_t.trim():_t,_e,Be))===!0&&ut(et,_e?_e.concat(_t):[_t])}),we.pop()}}if(!J.isObject(E))throw new TypeError("data must be an object");return ut(E),T}function ss(E){const T={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(E).replace(/[!'()~]|%20|%00/g,function(L){return T[L]})}function $r(E,T){this._pairs=[],E&&xr(E,this,T)}const ur=$r.prototype;ur.append=function(T,k){this._pairs.push([T,k])},ur.toString=function(T){const k=T?function(L){return T.call(this,L,ss)}:ss;return this._pairs.map(function(j){return k(j[0])+"="+k(j[1])},"").join("&")};function Ks(E){return encodeURIComponent(E).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function tn(E,T,k){if(!T)return E;const L=k&&k.encode||Ks;J.isFunction(k)&&(k={serialize:k});const j=k&&k.serialize;let W;if(j?W=j(T,k):W=J.isURLSearchParams(T)?T.toString():new $r(T,k).toString(L),W){const F=E.indexOf("#");F!==-1&&(E=E.slice(0,F)),E+=(E.indexOf("?")===-1?"?":"&")+W}return E}class En{constructor(){this.handlers=[]}use(T,k,L){return this.handlers.push({fulfilled:T,rejected:k,synchronous:L?L.synchronous:!1,runWhen:L?L.runWhen:null}),this.handlers.length-1}eject(T){this.handlers[T]&&(this.handlers[T]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(T){J.forEach(this.handlers,function(L){L!==null&&T(L)})}}var is=En,Xe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},At=typeof URLSearchParams<"u"?URLSearchParams:$r,$t=typeof FormData<"u"?FormData:null,Zt=typeof Blob<"u"?Blob:null,jn={isBrowser:!0,classes:{URLSearchParams:At,FormData:$t,Blob:Zt},protocols:["http","https","file","blob","url","data"]};const bt=typeof window<"u"&&typeof document<"u",xt=typeof navigator=="object"&&navigator||void 0,Dn=bt&&(!xt||["ReactNative","NativeScript","NS"].indexOf(xt.product)<0),Bt=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",wr=bt&&window.location.href||"http://localhost";var $n=Object.freeze({__proto__:null,hasBrowserEnv:bt,hasStandardBrowserWebWorkerEnv:Bt,hasStandardBrowserEnv:Dn,navigator:xt,origin:wr}),Qe={...$n,...jn};function Bs(E,T){return xr(E,new Qe.classes.URLSearchParams,{visitor:function(k,L,j,W){return Qe.isNode&&J.isBuffer(k)?(this.append(L,k.toString("base64")),!1):W.defaultVisitor.apply(this,arguments)},...T})}function po(E){return J.matchAll(/\w+|\[(\w*)]/g,E).map(T=>T[0]==="[]"?"":T[1]||T[0])}function wc(E){const T={},k=Object.keys(E);let L;const j=k.length;let W;for(L=0;L<j;L++)W=k[L],T[W]=E[W];return T}function mo(E){function T(k,L,j,W){let F=k[W++];if(F==="__proto__")return!0;const ne=Number.isFinite(+F),ye=W>=k.length;return F=!F&&J.isArray(j)?j.length:F,ye?(J.hasOwnProp(j,F)?j[F]=[j[F],L]:j[F]=L,!ne):((!j[F]||!J.isObject(j[F]))&&(j[F]=[]),T(k,L,j[F],W)&&J.isArray(j[F])&&(j[F]=wc(j[F])),!ne)}if(J.isFormData(E)&&J.isFunction(E.entries)){const k={};return J.forEachEntry(E,(L,j)=>{T(po(L),j,k,0)}),k}return null}function Ec(E,T,k){if(J.isString(E))try{return(T||JSON.parse)(E),J.trim(E)}catch(L){if(L.name!=="SyntaxError")throw L}return(k||JSON.stringify)(E)}const Ur={transitional:Xe,adapter:["xhr","http","fetch"],transformRequest:[function(T,k){const L=k.getContentType()||"",j=L.indexOf("application/json")>-1,W=J.isObject(T);if(W&&J.isHTMLForm(T)&&(T=new FormData(T)),J.isFormData(T))return j?JSON.stringify(mo(T)):T;if(J.isArrayBuffer(T)||J.isBuffer(T)||J.isStream(T)||J.isFile(T)||J.isBlob(T)||J.isReadableStream(T))return T;if(J.isArrayBufferView(T))return T.buffer;if(J.isURLSearchParams(T))return k.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),T.toString();let ne;if(W){if(L.indexOf("application/x-www-form-urlencoded")>-1)return Bs(T,this.formSerializer).toString();if((ne=J.isFileList(T))||L.indexOf("multipart/form-data")>-1){const ye=this.env&&this.env.FormData;return xr(ne?{"files[]":T}:T,ye&&new ye,this.formSerializer)}}return W||j?(k.setContentType("application/json",!1),Ec(T)):T}],transformResponse:[function(T){const k=this.transitional||Ur.transitional,L=k&&k.forcedJSONParsing,j=this.responseType==="json";if(J.isResponse(T)||J.isReadableStream(T))return T;if(T&&J.isString(T)&&(L&&!this.responseType||j)){const F=!(k&&k.silentJSONParsing)&&j;try{return JSON.parse(T,this.parseReviver)}catch(ne){if(F)throw ne.name==="SyntaxError"?ke.from(ne,ke.ERR_BAD_RESPONSE,this,null,this.response):ne}}return T}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Qe.classes.FormData,Blob:Qe.classes.Blob},validateStatus:function(T){return T>=200&&T<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};J.forEach(["delete","get","head","post","put","patch"],E=>{Ur.headers[E]={}});var xs=Ur;const ya=J.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var Sc=E=>{const T={};let k,L,j;return E&&E.split(`
`).forEach(function(F){j=F.indexOf(":"),k=F.substring(0,j).trim().toLowerCase(),L=F.substring(j+1).trim(),!(!k||T[k]&&ya[k])&&(k==="set-cookie"?T[k]?T[k].push(L):T[k]=[L]:T[k]=T[k]?T[k]+", "+L:L)}),T};const Ai=Symbol("internals");function rn(E){return E&&String(E).trim().toLowerCase()}function Un(E){return E===!1||E==null?E:J.isArray(E)?E.map(Un):String(E)}function va(E){const T=Object.create(null),k=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let L;for(;L=k.exec(E);)T[L[1]]=L[2];return T}const bc=E=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(E.trim());function zs(E,T,k,L,j){if(J.isFunction(L))return L.call(this,T,k);if(j&&(T=k),!!J.isString(T)){if(J.isString(L))return T.indexOf(L)!==-1;if(J.isRegExp(L))return L.test(T)}}function It(E){return E.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(T,k,L)=>k.toUpperCase()+L)}function Tc(E,T){const k=J.toCamelCase(" "+T);["get","set","has"].forEach(L=>{Object.defineProperty(E,L+k,{value:function(j,W,F){return this[L].call(this,T,j,W,F)},configurable:!0})})}class Sn{constructor(T){T&&this.set(T)}set(T,k,L){const j=this;function W(ne,ye,de){const ue=rn(ye);if(!ue)throw new Error("header name must be a non-empty string");const we=J.findKey(j,ue);(!we||j[we]===void 0||de===!0||de===void 0&&j[we]!==!1)&&(j[we||ye]=Un(ne))}const F=(ne,ye)=>J.forEach(ne,(de,ue)=>W(de,ue,ye));if(J.isPlainObject(T)||T instanceof this.constructor)F(T,k);else if(J.isString(T)&&(T=T.trim())&&!bc(T))F(Sc(T),k);else if(J.isObject(T)&&J.isIterable(T)){let ne={},ye,de;for(const ue of T){if(!J.isArray(ue))throw TypeError("Object iterator must return a key-value pair");ne[de=ue[0]]=(ye=ne[de])?J.isArray(ye)?[...ye,ue[1]]:[ye,ue[1]]:ue[1]}F(ne,k)}else T!=null&&W(k,T,L);return this}get(T,k){if(T=rn(T),T){const L=J.findKey(this,T);if(L){const j=this[L];if(!k)return j;if(k===!0)return va(j);if(J.isFunction(k))return k.call(this,j,L);if(J.isRegExp(k))return k.exec(j);throw new TypeError("parser must be boolean|regexp|function")}}}has(T,k){if(T=rn(T),T){const L=J.findKey(this,T);return!!(L&&this[L]!==void 0&&(!k||zs(this,this[L],L,k)))}return!1}delete(T,k){const L=this;let j=!1;function W(F){if(F=rn(F),F){const ne=J.findKey(L,F);ne&&(!k||zs(L,L[ne],ne,k))&&(delete L[ne],j=!0)}}return J.isArray(T)?T.forEach(W):W(T),j}clear(T){const k=Object.keys(this);let L=k.length,j=!1;for(;L--;){const W=k[L];(!T||zs(this,this[W],W,T,!0))&&(delete this[W],j=!0)}return j}normalize(T){const k=this,L={};return J.forEach(this,(j,W)=>{const F=J.findKey(L,W);if(F){k[F]=Un(j),delete k[W];return}const ne=T?It(W):String(W).trim();ne!==W&&delete k[W],k[ne]=Un(j),L[ne]=!0}),this}concat(...T){return this.constructor.concat(this,...T)}toJSON(T){const k=Object.create(null);return J.forEach(this,(L,j)=>{L!=null&&L!==!1&&(k[j]=T&&J.isArray(L)?L.join(", "):L)}),k}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([T,k])=>T+": "+k).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(T){return T instanceof this?T:new this(T)}static concat(T,...k){const L=new this(T);return k.forEach(j=>L.set(j)),L}static accessor(T){const L=(this[Ai]=this[Ai]={accessors:{}}).accessors,j=this.prototype;function W(F){const ne=rn(F);L[ne]||(Tc(j,F),L[ne]=!0)}return J.isArray(T)?T.forEach(W):W(T),this}}Sn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),J.reduceDescriptors(Sn.prototype,({value:E},T)=>{let k=T[0].toUpperCase()+T.slice(1);return{get:()=>E,set(L){this[k]=L}}}),J.freezeMethods(Sn);var Rt=Sn;function qn(E,T){const k=this||xs,L=T||k,j=Rt.from(L.headers);let W=L.data;return J.forEach(E,function(ne){W=ne.call(k,W,j.normalize(),T?T.status:void 0)}),j.normalize(),W}function go(E){return!!(E&&E.__CANCEL__)}function Rr(E,T,k){ke.call(this,E??"canceled",ke.ERR_CANCELED,T,k),this.name="CanceledError"}J.inherits(Rr,ke,{__CANCEL__:!0});function Rs(E,T,k){const L=k.config.validateStatus;!k.status||!L||L(k.status)?E(k):T(new ke("Request failed with status code "+k.status,[ke.ERR_BAD_REQUEST,ke.ERR_BAD_RESPONSE][Math.floor(k.status/100)-4],k.config,k.request,k))}function nn(E){const T=/^([-+\w]{1,25})(:?\/\/|:)/.exec(E);return T&&T[1]||""}function Cc(E,T){E=E||10;const k=new Array(E),L=new Array(E);let j=0,W=0,F;return T=T!==void 0?T:1e3,function(ye){const de=Date.now(),ue=L[W];F||(F=de),k[j]=ye,L[j]=de;let we=W,Be=0;for(;we!==j;)Be+=k[we++],we=we%E;if(j=(j+1)%E,j===W&&(W=(W+1)%E),de-F<T)return;const ut=ue&&de-ue;return ut?Math.round(Be*1e3/ut):void 0}}function qr(E,T){let k=0,L=1e3/T,j,W;const F=(de,ue=Date.now())=>{k=ue,j=null,W&&(clearTimeout(W),W=null),E(...de)};return[(...de)=>{const ue=Date.now(),we=ue-k;we>=L?F(de,ue):(j=de,W||(W=setTimeout(()=>{W=null,F(j)},L-we)))},()=>j&&F(j)]}const os=(E,T,k=3)=>{let L=0;const j=Cc(50,250);return qr(W=>{const F=W.loaded,ne=W.lengthComputable?W.total:void 0,ye=F-L,de=j(ye),ue=F<=ne;L=F;const we={loaded:F,total:ne,progress:ne?F/ne:void 0,bytes:ye,rate:de||void 0,estimated:de&&ne&&ue?(ne-F)/de:void 0,event:W,lengthComputable:ne!=null,[T?"download":"upload"]:!0};E(we)},k)},yo=(E,T)=>{const k=E!=null;return[L=>T[0]({lengthComputable:k,total:E,loaded:L}),T[1]]},vo=E=>(...T)=>J.asap(()=>E(...T));var Ii=Qe.hasStandardBrowserEnv?((E,T)=>k=>(k=new URL(k,Qe.origin),E.protocol===k.protocol&&E.host===k.host&&(T||E.port===k.port)))(new URL(Qe.origin),Qe.navigator&&/(msie|trident)/i.test(Qe.navigator.userAgent)):()=>!0,Pi=Qe.hasStandardBrowserEnv?{write(E,T,k,L,j,W,F){if(typeof document>"u")return;const ne=[`${E}=${encodeURIComponent(T)}`];J.isNumber(k)&&ne.push(`expires=${new Date(k).toUTCString()}`),J.isString(L)&&ne.push(`path=${L}`),J.isString(j)&&ne.push(`domain=${j}`),W===!0&&ne.push("secure"),J.isString(F)&&ne.push(`SameSite=${F}`),document.cookie=ne.join("; ")},read(E){if(typeof document>"u")return null;const T=document.cookie.match(new RegExp("(?:^|; )"+E+"=([^;]*)"));return T?decodeURIComponent(T[1]):null},remove(E){this.write(E,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Gs(E){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(E)}function Oi(E,T){return T?E.replace(/\/?\/$/,"")+"/"+T.replace(/^\/+/,""):E}function wo(E,T,k){let L=!Gs(T);return E&&(L||k==!1)?Oi(E,T):T}const Eo=E=>E instanceof Rt?{...E}:E;function nr(E,T){T=T||{};const k={};function L(de,ue,we,Be){return J.isPlainObject(de)&&J.isPlainObject(ue)?J.merge.call({caseless:Be},de,ue):J.isPlainObject(ue)?J.merge({},ue):J.isArray(ue)?ue.slice():ue}function j(de,ue,we,Be){if(J.isUndefined(ue)){if(!J.isUndefined(de))return L(void 0,de,we,Be)}else return L(de,ue,we,Be)}function W(de,ue){if(!J.isUndefined(ue))return L(void 0,ue)}function F(de,ue){if(J.isUndefined(ue)){if(!J.isUndefined(de))return L(void 0,de)}else return L(void 0,ue)}function ne(de,ue,we){if(we in T)return L(de,ue);if(we in E)return L(void 0,de)}const ye={url:W,method:W,data:W,baseURL:F,transformRequest:F,transformResponse:F,paramsSerializer:F,timeout:F,timeoutMessage:F,withCredentials:F,withXSRFToken:F,adapter:F,responseType:F,xsrfCookieName:F,xsrfHeaderName:F,onUploadProgress:F,onDownloadProgress:F,decompress:F,maxContentLength:F,maxBodyLength:F,beforeRedirect:F,transport:F,httpAgent:F,httpsAgent:F,cancelToken:F,socketPath:F,responseEncoding:F,validateStatus:ne,headers:(de,ue,we)=>j(Eo(de),Eo(ue),we,!0)};return J.forEach(Object.keys({...E,...T}),function(ue){const we=ye[ue]||j,Be=we(E[ue],T[ue],ue);J.isUndefined(Be)&&we!==ne||(k[ue]=Be)}),k}var Ni=E=>{const T=nr({},E);let{data:k,withXSRFToken:L,xsrfHeaderName:j,xsrfCookieName:W,headers:F,auth:ne}=T;if(T.headers=F=Rt.from(F),T.url=tn(wo(T.baseURL,T.url,T.allowAbsoluteUrls),E.params,E.paramsSerializer),ne&&F.set("Authorization","Basic "+btoa((ne.username||"")+":"+(ne.password?unescape(encodeURIComponent(ne.password)):""))),J.isFormData(k)){if(Qe.hasStandardBrowserEnv||Qe.hasStandardBrowserWebWorkerEnv)F.setContentType(void 0);else if(J.isFunction(k.getHeaders)){const ye=k.getHeaders(),de=["content-type","content-length"];Object.entries(ye).forEach(([ue,we])=>{de.includes(ue.toLowerCase())&&F.set(ue,we)})}}if(Qe.hasStandardBrowserEnv&&(L&&J.isFunction(L)&&(L=L(T)),L||L!==!1&&Ii(T.url))){const ye=j&&W&&Pi.read(W);ye&&F.set(j,ye)}return T},Js=typeof XMLHttpRequest<"u"&&function(E){return new Promise(function(k,L){const j=Ni(E);let W=j.data;const F=Rt.from(j.headers).normalize();let{responseType:ne,onUploadProgress:ye,onDownloadProgress:de}=j,ue,we,Be,ut,fe;function _e(){ut&&ut(),fe&&fe(),j.cancelToken&&j.cancelToken.unsubscribe(ue),j.signal&&j.signal.removeEventListener("abort",ue)}let ve=new XMLHttpRequest;ve.open(j.method.toUpperCase(),j.url,!0),ve.timeout=j.timeout;function et(){if(!ve)return;const ot=Rt.from("getAllResponseHeaders"in ve&&ve.getAllResponseHeaders()),Pt={data:!ne||ne==="text"||ne==="json"?ve.responseText:ve.response,status:ve.status,statusText:ve.statusText,headers:ot,config:E,request:ve};Rs(function(Ct){k(Ct),_e()},function(Ct){L(Ct),_e()},Pt),ve=null}"onloadend"in ve?ve.onloadend=et:ve.onreadystatechange=function(){!ve||ve.readyState!==4||ve.status===0&&!(ve.responseURL&&ve.responseURL.indexOf("file:")===0)||setTimeout(et)},ve.onabort=function(){ve&&(L(new ke("Request aborted",ke.ECONNABORTED,E,ve)),ve=null)},ve.onerror=function(wt){const Pt=wt&&wt.message?wt.message:"Network Error",Er=new ke(Pt,ke.ERR_NETWORK,E,ve);Er.event=wt||null,L(Er),ve=null},ve.ontimeout=function(){let wt=j.timeout?"timeout of "+j.timeout+"ms exceeded":"timeout exceeded";const Pt=j.transitional||Xe;j.timeoutErrorMessage&&(wt=j.timeoutErrorMessage),L(new ke(wt,Pt.clarifyTimeoutError?ke.ETIMEDOUT:ke.ECONNABORTED,E,ve)),ve=null},W===void 0&&F.setContentType(null),"setRequestHeader"in ve&&J.forEach(F.toJSON(),function(wt,Pt){ve.setRequestHeader(Pt,wt)}),J.isUndefined(j.withCredentials)||(ve.withCredentials=!!j.withCredentials),ne&&ne!=="json"&&(ve.responseType=j.responseType),de&&([Be,fe]=os(de,!0),ve.addEventListener("progress",Be)),ye&&ve.upload&&([we,ut]=os(ye),ve.upload.addEventListener("progress",we),ve.upload.addEventListener("loadend",ut)),(j.cancelToken||j.signal)&&(ue=ot=>{ve&&(L(!ot||ot.type?new Rr(null,E,ve):ot),ve.abort(),ve=null)},j.cancelToken&&j.cancelToken.subscribe(ue),j.signal&&(j.signal.aborted?ue():j.signal.addEventListener("abort",ue)));const _t=nn(j.url);if(_t&&Qe.protocols.indexOf(_t)===-1){L(new ke("Unsupported protocol "+_t+":",ke.ERR_BAD_REQUEST,E));return}ve.send(W||null)})},So=(E,T)=>{const{length:k}=E=E?E.filter(Boolean):[];if(T||k){let L=new AbortController,j;const W=function(de){if(!j){j=!0,ne();const ue=de instanceof Error?de:this.reason;L.abort(ue instanceof ke?ue:new Rr(ue instanceof Error?ue.message:ue))}};let F=T&&setTimeout(()=>{F=null,W(new ke(`timeout ${T} of ms exceeded`,ke.ETIMEDOUT))},T);const ne=()=>{E&&(F&&clearTimeout(F),F=null,E.forEach(de=>{de.unsubscribe?de.unsubscribe(W):de.removeEventListener("abort",W)}),E=null)};E.forEach(de=>de.addEventListener("abort",W));const{signal:ye}=L;return ye.unsubscribe=()=>J.asap(ne),ye}};const pt=function*(E,T){let k=E.byteLength;if(k<T){yield E;return}let L=0,j;for(;L<k;)j=L+T,yield E.slice(L,j),L=j},wa=async function*(E,T){for await(const k of Ea(E))yield*pt(k,T)},Ea=async function*(E){if(E[Symbol.asyncIterator]){yield*E;return}const T=E.getReader();try{for(;;){const{done:k,value:L}=await T.read();if(k)break;yield L}}finally{await T.cancel()}},Vs=(E,T,k,L)=>{const j=wa(E,T);let W=0,F,ne=ye=>{F||(F=!0,L&&L(ye))};return new ReadableStream({async pull(ye){try{const{done:de,value:ue}=await j.next();if(de){ne(),ye.close();return}let we=ue.byteLength;if(k){let Be=W+=we;k(Be)}ye.enqueue(new Uint8Array(ue))}catch(de){throw ne(de),de}},cancel(ye){return ne(ye),j.return()}},{highWaterMark:2})},Li=64*1024,{isFunction:Mn}=J,Sa=(({Request:E,Response:T})=>({Request:E,Response:T}))(J.global),{ReadableStream:Xs,TextEncoder:ks}=J.global,sn=(E,...T)=>{try{return!!E(...T)}catch{return!1}},Hn=E=>{E=J.merge.call({skipUndefined:!0},Sa,E);const{fetch:T,Request:k,Response:L}=E,j=T?Mn(T):typeof fetch=="function",W=Mn(k),F=Mn(L);if(!j)return!1;const ne=j&&Mn(Xs),ye=j&&(typeof ks=="function"?(fe=>_e=>fe.encode(_e))(new ks):async fe=>new Uint8Array(await new k(fe).arrayBuffer())),de=W&&ne&&sn(()=>{let fe=!1;const _e=new k(Qe.origin,{body:new Xs,method:"POST",get duplex(){return fe=!0,"half"}}).headers.has("Content-Type");return fe&&!_e}),ue=F&&ne&&sn(()=>J.isReadableStream(new L("").body)),we={stream:ue&&(fe=>fe.body)};j&&["text","arrayBuffer","blob","formData","stream"].forEach(fe=>{!we[fe]&&(we[fe]=(_e,ve)=>{let et=_e&&_e[fe];if(et)return et.call(_e);throw new ke(`Response type '${fe}' is not supported`,ke.ERR_NOT_SUPPORT,ve)})});const Be=async fe=>{if(fe==null)return 0;if(J.isBlob(fe))return fe.size;if(J.isSpecCompliantForm(fe))return(await new k(Qe.origin,{method:"POST",body:fe}).arrayBuffer()).byteLength;if(J.isArrayBufferView(fe)||J.isArrayBuffer(fe))return fe.byteLength;if(J.isURLSearchParams(fe)&&(fe=fe+""),J.isString(fe))return(await ye(fe)).byteLength},ut=async(fe,_e)=>{const ve=J.toFiniteNumber(fe.getContentLength());return ve??Be(_e)};return async fe=>{let{url:_e,method:ve,data:et,signal:_t,cancelToken:ot,timeout:wt,onDownloadProgress:Pt,onUploadProgress:Er,responseType:Ct,headers:ti,withCredentials:us="same-origin",fetchOptions:_o}=Ni(fe),xo=T||fetch;Ct=Ct?(Ct+"").toLowerCase():"text";let Tn=So([_t,ot&&ot.toAbortSignal()],wt),Cn=null;const Sr=Tn&&Tn.unsubscribe&&(()=>{Tn.unsubscribe()});let Ro;try{if(Er&&de&&ve!=="get"&&ve!=="head"&&(Ro=await ut(ti,et))!==0){let ir=new k(_e,{method:"POST",body:et,duplex:"half"}),Hr;if(J.isFormData(et)&&(Hr=ir.headers.get("content-type"))&&ti.setContentType(Hr),ir.body){const[ri,_n]=yo(Ro,os(vo(Er)));et=Vs(ir.body,Li,ri,_n)}}J.isString(us)||(us=us?"include":"omit");const Lt=W&&"credentials"in k.prototype,ko={..._o,signal:Tn,method:ve.toUpperCase(),headers:ti.normalize().toJSON(),body:et,duplex:"half",credentials:Lt?us:void 0};Cn=W&&new k(_e,ko);let sr=await(W?xo(Cn,_o):xo(_e,ko));const Ao=ue&&(Ct==="stream"||Ct==="response");if(ue&&(Pt||Ao&&Sr)){const ir={};["status","statusText","headers"].forEach(ds=>{ir[ds]=sr[ds]});const Hr=J.toFiniteNumber(sr.headers.get("content-length")),[ri,_n]=Pt&&yo(Hr,os(vo(Pt),!0))||[];sr=new L(Vs(sr.body,Li,ri,()=>{_n&&_n(),Sr&&Sr()}),ir)}Ct=Ct||"text";let Rc=await we[J.findKey(we,Ct)||"text"](sr,fe);return!Ao&&Sr&&Sr(),await new Promise((ir,Hr)=>{Rs(ir,Hr,{data:Rc,headers:Rt.from(sr.headers),status:sr.status,statusText:sr.statusText,config:fe,request:Cn})})}catch(Lt){throw Sr&&Sr(),Lt&&Lt.name==="TypeError"&&/Load failed|fetch/i.test(Lt.message)?Object.assign(new ke("Network Error",ke.ERR_NETWORK,fe,Cn),{cause:Lt.cause||Lt}):ke.from(Lt,Lt&&Lt.code,fe,Cn)}}},Fn=new Map,as=E=>{let T=E&&E.env||{};const{fetch:k,Request:L,Response:j}=T,W=[L,j,k];let F=W.length,ne=F,ye,de,ue=Fn;for(;ne--;)ye=W[ne],de=ue.get(ye),de===void 0&&ue.set(ye,de=ne?new Map:Hn(T)),ue=de;return de};as();const bn={http:Cr,xhr:Js,fetch:{get:as}};J.forEach(bn,(E,T)=>{if(E){try{Object.defineProperty(E,"name",{value:T})}catch{}Object.defineProperty(E,"adapterName",{value:T})}});const on=E=>`- ${E}`,xc=E=>J.isFunction(E)||E===null||E===!1;function ba(E,T){E=J.isArray(E)?E:[E];const{length:k}=E;let L,j;const W={};for(let F=0;F<k;F++){L=E[F];let ne;if(j=L,!xc(L)&&(j=bn[(ne=String(L)).toLowerCase()],j===void 0))throw new ke(`Unknown adapter '${ne}'`);if(j&&(J.isFunction(j)||(j=j.get(T))))break;W[ne||"#"+F]=j}if(!j){const F=Object.entries(W).map(([ye,de])=>`adapter ${ye} `+(de===!1?"is not supported by the environment":"is not available in the build"));let ne=k?F.length>1?`since :
`+F.map(on).join(`
`):" "+on(F[0]):"as no adapter specified";throw new ke("There is no suitable adapter to dispatch the request "+ne,"ERR_NOT_SUPPORT")}return j}var cs={getAdapter:ba,adapters:bn};function Ys(E){if(E.cancelToken&&E.cancelToken.throwIfRequested(),E.signal&&E.signal.aborted)throw new Rr(null,E)}function ji(E){return Ys(E),E.headers=Rt.from(E.headers),E.data=qn.call(E,E.transformRequest),["post","put","patch"].indexOf(E.method)!==-1&&E.headers.setContentType("application/x-www-form-urlencoded",!1),cs.getAdapter(E.adapter||xs.adapter,E)(E).then(function(L){return Ys(E),L.data=qn.call(E,E.transformResponse,L),L.headers=Rt.from(L.headers),L},function(L){return go(L)||(Ys(E),L&&L.response&&(L.response.data=qn.call(E,E.transformResponse,L.response),L.response.headers=Rt.from(L.response.headers))),Promise.reject(L)})}const As="1.13.2",Wn={};["object","boolean","number","function","string","symbol"].forEach((E,T)=>{Wn[E]=function(L){return typeof L===E||"a"+(T<1?"n ":" ")+E}});const bo={};Wn.transitional=function(T,k,L){function j(W,F){return"[Axios v"+As+"] Transitional option '"+W+"'"+F+(L?". "+L:"")}return(W,F,ne)=>{if(T===!1)throw new ke(j(F," has been removed"+(k?" in "+k:"")),ke.ERR_DEPRECATED);return k&&!bo[F]&&(bo[F]=!0,console.warn(j(F," has been deprecated since v"+k+" and will be removed in the near future"))),T?T(W,F,ne):!0}},Wn.spelling=function(T){return(k,L)=>(console.warn(`${L} is likely a misspelling of ${T}`),!0)};function Qs(E,T,k){if(typeof E!="object")throw new ke("options must be an object",ke.ERR_BAD_OPTION_VALUE);const L=Object.keys(E);let j=L.length;for(;j-- >0;){const W=L[j],F=T[W];if(F){const ne=E[W],ye=ne===void 0||F(ne,W,E);if(ye!==!0)throw new ke("option "+W+" must be "+ye,ke.ERR_BAD_OPTION_VALUE);continue}if(k!==!0)throw new ke("Unknown option "+W,ke.ERR_BAD_OPTION)}}var Mr={assertOptions:Qs,validators:Wn};const Tt=Mr.validators;class an{constructor(T){this.defaults=T||{},this.interceptors={request:new is,response:new is}}async request(T,k){try{return await this._request(T,k)}catch(L){if(L instanceof Error){let j={};Error.captureStackTrace?Error.captureStackTrace(j):j=new Error;const W=j.stack?j.stack.replace(/^.+\n/,""):"";try{L.stack?W&&!String(L.stack).endsWith(W.replace(/^.+\n.+\n/,""))&&(L.stack+=`
`+W):L.stack=W}catch{}}throw L}}_request(T,k){typeof T=="string"?(k=k||{},k.url=T):k=T||{},k=nr(this.defaults,k);const{transitional:L,paramsSerializer:j,headers:W}=k;L!==void 0&&Mr.assertOptions(L,{silentJSONParsing:Tt.transitional(Tt.boolean),forcedJSONParsing:Tt.transitional(Tt.boolean),clarifyTimeoutError:Tt.transitional(Tt.boolean)},!1),j!=null&&(J.isFunction(j)?k.paramsSerializer={serialize:j}:Mr.assertOptions(j,{encode:Tt.function,serialize:Tt.function},!0)),k.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?k.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:k.allowAbsoluteUrls=!0),Mr.assertOptions(k,{baseUrl:Tt.spelling("baseURL"),withXsrfToken:Tt.spelling("withXSRFToken")},!0),k.method=(k.method||this.defaults.method||"get").toLowerCase();let F=W&&J.merge(W.common,W[k.method]);W&&J.forEach(["delete","get","head","post","put","patch","common"],fe=>{delete W[fe]}),k.headers=Rt.concat(F,W);const ne=[];let ye=!0;this.interceptors.request.forEach(function(_e){typeof _e.runWhen=="function"&&_e.runWhen(k)===!1||(ye=ye&&_e.synchronous,ne.unshift(_e.fulfilled,_e.rejected))});const de=[];this.interceptors.response.forEach(function(_e){de.push(_e.fulfilled,_e.rejected)});let ue,we=0,Be;if(!ye){const fe=[ji.bind(this),void 0];for(fe.unshift(...ne),fe.push(...de),Be=fe.length,ue=Promise.resolve(k);we<Be;)ue=ue.then(fe[we++],fe[we++]);return ue}Be=ne.length;let ut=k;for(;we<Be;){const fe=ne[we++],_e=ne[we++];try{ut=fe(ut)}catch(ve){_e.call(this,ve);break}}try{ue=ji.call(this,ut)}catch(fe){return Promise.reject(fe)}for(we=0,Be=de.length;we<Be;)ue=ue.then(de[we++],de[we++]);return ue}getUri(T){T=nr(this.defaults,T);const k=wo(T.baseURL,T.url,T.allowAbsoluteUrls);return tn(k,T.params,T.paramsSerializer)}}J.forEach(["delete","get","head","options"],function(T){an.prototype[T]=function(k,L){return this.request(nr(L||{},{method:T,url:k,data:(L||{}).data}))}}),J.forEach(["post","put","patch"],function(T){function k(L){return function(W,F,ne){return this.request(nr(ne||{},{method:T,headers:L?{"Content-Type":"multipart/form-data"}:{},url:W,data:F}))}}an.prototype[T]=k(),an.prototype[T+"Form"]=k(!0)});var ls=an;class Zs{constructor(T){if(typeof T!="function")throw new TypeError("executor must be a function.");let k;this.promise=new Promise(function(W){k=W});const L=this;this.promise.then(j=>{if(!L._listeners)return;let W=L._listeners.length;for(;W-- >0;)L._listeners[W](j);L._listeners=null}),this.promise.then=j=>{let W;const F=new Promise(ne=>{L.subscribe(ne),W=ne}).then(j);return F.cancel=function(){L.unsubscribe(W)},F},T(function(W,F,ne){L.reason||(L.reason=new Rr(W,F,ne),k(L.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(T){if(this.reason){T(this.reason);return}this._listeners?this._listeners.push(T):this._listeners=[T]}unsubscribe(T){if(!this._listeners)return;const k=this._listeners.indexOf(T);k!==-1&&this._listeners.splice(k,1)}toAbortSignal(){const T=new AbortController,k=L=>{T.abort(L)};return this.subscribe(k),T.signal.unsubscribe=()=>this.unsubscribe(k),T.signal}static source(){let T;return{token:new Zs(function(j){T=j}),cancel:T}}}var To=Zs;function Di(E){return function(k){return E.apply(null,k)}}function Co(E){return J.isObject(E)&&E.isAxiosError===!0}const Is={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Is).forEach(([E,T])=>{Is[T]=E});var Kn=Is;function ei(E){const T=new ls(E),k=e(ls.prototype.request,T);return J.extend(k,ls.prototype,T,{allOwnKeys:!0}),J.extend(k,T,null,{allOwnKeys:!0}),k.create=function(j){return ei(nr(E,j))},k}const Ze=ei(xs);return Ze.Axios=ls,Ze.CanceledError=Rr,Ze.CancelToken=To,Ze.isCancel=go,Ze.VERSION=As,Ze.toFormData=xr,Ze.AxiosError=ke,Ze.Cancel=Ze.CanceledError,Ze.all=function(T){return Promise.all(T)},Ze.spread=Di,Ze.isAxiosError=Co,Ze.mergeConfig=nr,Ze.AxiosHeaders=Rt,Ze.formToJSON=E=>mo(J.isHTMLForm(E)?new FormData(E):E),Ze.getAdapter=cs.getAdapter,Ze.HttpStatusCode=Kn,Ze.default=Ze,Iy=Ze,Iy}var j_;function D_(){if(j_)return In;j_=1;var e=In&&In.__createBinding||(Object.create?(function(p,h,u,m){m===void 0&&(m=u);var g=Object.getOwnPropertyDescriptor(h,u);(!g||("get"in g?!h.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return h[u]}}),Object.defineProperty(p,m,g)}):(function(p,h,u,m){m===void 0&&(m=u),p[m]=h[u]})),t=In&&In.__setModuleDefault||(Object.create?(function(p,h){Object.defineProperty(p,"default",{enumerable:!0,value:h})}):function(p,h){p.default=h}),n=In&&In.__importStar||(function(){var p=function(h){return p=Object.getOwnPropertyNames||function(u){var m=[];for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(m[m.length]=g);return m},p(h)};return function(h){if(h&&h.__esModule)return h;var u={};if(h!=null)for(var m=p(h),g=0;g<m.length;g++)m[g]!=="default"&&e(u,h,m[g]);return t(u,h),u}})(),s=In&&In.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(In,"__esModule",{value:!0}),In.AuthService=void 0;const c=s(Ti),i=pa(),o=ma(),l=s(Ci());class f{constructor(h,u,m){this.config=h.config,this.cache=m,this.httpClient=h,this.apiClient=u,this.tokenValidationTTL=this.config.cache?.tokenValidationTTL||900,this.minValidationTTL=this.config.cache?.minValidationTTL||60}isApiKeyToken(h){return this.config.apiKey!==void 0&&h===this.config.apiKey}extractUserIdFromToken(h){try{const u=l.default.decode(h);return u?u.sub||u.userId||u.user_id||u.id:null}catch{return null}}getTokenCacheKey(h){return`token_validation:${c.default.createHash("sha256").update(h).digest("hex")}`}getCacheTtlFromToken(h){try{const m=l.default.decode(h);if(!m||typeof m.exp!="number")return this.tokenValidationTTL;const g=Math.floor(Date.now()/1e3),v=m.exp-g-30;return Math.max(this.minValidationTTL,Math.min(v,this.tokenValidationTTL))}catch{return this.tokenValidationTTL}}generateCorrelationId(){const h=Date.now(),u=Math.random().toString(36).substring(2,8);return`${this.config.clientId.substring(0,10)}-${h}-${u}`}async getEnvironmentToken(){const h=this.generateCorrelationId(),u=this.config.clientId;try{const m=(await Promise.resolve().then(()=>n(qR()))).default,g=(0,o.resolveControllerUrl)(this.config),v=this.config.clientTokenUri||"/api/v1/auth/token",S=`${g}${v}`,w=4e3,C=new AbortController,N=setTimeout(()=>{C.abort()},w),I=await Promise.resolve().then(()=>n(Pn)),R=await Promise.resolve().then(()=>n(Pn)),D=g.startsWith("https://"),A=D?new R.Agent({family:4,timeout:w}):new I.Agent({family:4,timeout:w}),O=m.create({baseURL:g,timeout:w,signal:C.signal,httpAgent:D?void 0:A,httpsAgent:D?A:void 0,headers:{"Content-Type":"application/json","x-client-id":this.config.clientId,"x-client-secret":this.config.clientSecret}});console.log(`[getEnvironmentToken] Calling controller: ${S} [correlationId: ${h}, clientId: ${u}]`);const x=O.post(v),M=new Promise((K,X)=>{setTimeout(()=>{X(new Error(`Request timeout after ${w}ms`))},w)});let G;try{G=await Promise.race([x,M]),clearTimeout(N),console.log(`[getEnvironmentToken] Successfully received response from controller [correlationId: ${h}]`)}catch(K){throw clearTimeout(N),console.error(`[getEnvironmentToken] Request failed: ${K instanceof Error?K.message:String(K)} [correlationId: ${h}]`),K}const V=G.data;let z;V?.data&&typeof V.data=="object"&&V.data!==null&&"data"in V.data&&typeof V.data.data=="object"&&V.data.data!==null&&"token"in V.data.data?z=V.data.data.token:V?.data&&typeof V.data=="object"&&V.data!==null&&"token"in V.data?z=V.data.token:V?.token&&typeof V.token=="string"&&(z=V.token);const q=V?.success===!0||V?.data&&typeof V.data=="object"&&V.data!==null&&"success"in V.data&&V.data.success===!0;if(G.status>=200&&G.status<300&&(q||z!==void 0)&&z)return console.log(`[getEnvironmentToken] Successfully received token from controller [correlationId: ${h}]`),z;const $=JSON.stringify({status:G.status,statusText:G.statusText,data:G.data,headers:G.headers});throw new Error(`Failed to get environment token: Invalid response format. Expected token in response. Full response: ${$} [correlationId: ${h}, clientId: ${u}]`)}catch(m){if(m&&typeof m=="object"&&"name"in m&&m.name==="AbortError"||m&&typeof m=="object"&&"code"in m&&m.code==="ECONNABORTED"||m instanceof Error&&(m.message.includes("aborted")||m.message.includes("timeout"))){const S=(0,o.resolveControllerUrl)(this.config),w=this.config.clientTokenUri||"/api/v1/auth/token";throw console.error(`[getEnvironmentToken] Request aborted/timeout: ${S}${w} [correlationId: ${h}, clientId: ${u}]`,m instanceof Error?m.message:String(m)),new Error(`Failed to get environment token: Request timeout or aborted. Controller: ${S}${w} [correlationId: ${h}, clientId: ${u}]`)}if(m&&typeof m=="object"&&"isAxiosError"in m&&m.isAxiosError){const S=m,w=[];if(S.response)w.push(`status: ${S.response.status}`),w.push(`statusText: ${S.response.statusText}`),w.push(`data: ${JSON.stringify(S.response.data)}`),S.response.headers&&w.push(`headers: ${JSON.stringify(S.response.headers)}`);else if(S.request){const N=(0,o.resolveControllerUrl)(this.config),I=this.config.clientTokenUri||"/api/v1/auth/token";console.error(`[getEnvironmentToken] Controller unreachable or timeout: ${N}${I} [correlationId: ${h}, clientId: ${u}]`,S.message),w.push("request: [Request object - not serializable]"),w.push(`message: ${S.message}`),w.push(`controllerUrl: ${N}`)}else w.push(`message: ${S.message}`);const C=new Error(`Failed to get environment token: ${S.message}. Full response: {${w.join(", ")}} [correlationId: ${h}, clientId: ${u}]`);throw C.cause=S,C}const v=m instanceof Error?m.message:"Unknown error";throw new Error(`Failed to get environment token: ${v} [correlationId: ${h}, clientId: ${u}]`)}}async login(h){const u=this.generateCorrelationId(),m=this.config.clientId;try{const g={redirect:h.redirect};h.state&&(g.state=h.state);const v=this.config.authStrategy,S=await this.apiClient.auth.login({redirect:h.redirect,state:h.state},v);return{success:S.success,data:{loginUrl:S.data.loginUrl,state:S.data.state||""},timestamp:S.timestamp}}catch(g){if(g instanceof i.MisoClientError){const S={statusCode:g.statusCode,message:g.message,errorResponse:g.errorResponse,errorBody:g.errorBody};throw new Error(`Login failed: ${g.message}. Full response: ${JSON.stringify(S)} [correlationId: ${u}, clientId: ${m}]`)}if(g&&typeof g=="object"&&"isAxiosError"in g&&g.isAxiosError){const S=g,w=[];throw S.response?(w.push(`status: ${S.response.status}`),w.push(`statusText: ${S.response.statusText}`),w.push(`data: ${JSON.stringify(S.response.data)}`),S.response.headers&&w.push(`headers: ${JSON.stringify(S.response.headers)}`)):S.request?(w.push("request: [Request object - not serializable]"),w.push(`message: ${S.message}`)):w.push(`message: ${S.message}`),new Error(`Login failed: ${S.message}. Full response: {${w.join(", ")}} [correlationId: ${u}, clientId: ${m}]`)}const v=g instanceof Error?g.message:"Unknown error";throw new Error(`Login failed: ${v} [correlationId: ${u}, clientId: ${m}]`)}}async validateToken(h,u){if(this.isApiKeyToken(h))return!0;try{const m=this.getTokenCacheKey(h),g=await this.cache.get(m);if(g)return g.authenticated;const v=u||this.config.authStrategy,S=v?{...v,bearerToken:h}:{methods:["bearer"],bearerToken:h},C=(await this.apiClient.auth.validateToken({token:h},S)).data?.authenticated||!1,N=this.getCacheTtlFromToken(h);return await this.cache.set(m,{authenticated:C,timestamp:Date.now()},N),C}catch{return!1}}async getUser(h,u){if(this.isApiKeyToken(h))return null;try{const m=u||this.config.authStrategy,g=m?{...m,bearerToken:h}:{methods:["bearer"],bearerToken:h},v=await this.apiClient.auth.validateToken({token:h},g);return v.data?.authenticated&&v.data.user?{id:v.data.user.id,username:v.data.user.username,email:v.data.user.email}:null}catch{return null}}async getUserInfo(h,u){if(this.isApiKeyToken(h))return null;try{const m=u||this.config.authStrategy,g=m?{...m,bearerToken:h}:{methods:["bearer"],bearerToken:h},v=await this.apiClient.auth.getUser(g);return v.data?.authenticated&&v.data.user?{id:v.data.user.id,username:v.data.user.username,email:v.data.user.email}:null}catch{return null}}clearTokenCache(h){try{const u=this.getTokenCacheKey(h);this.cache.delete(u)}catch(u){console.warn("Failed to clear token cache:",u)}}async logout(h){const u=this.generateCorrelationId(),m=this.config.clientId;try{const g=await this.apiClient.auth.logoutWithToken(h.token);return this.clearTokenCache(h.token),g}catch(g){if(g instanceof i.MisoClientError){if(g.statusCode===400){const w={statusCode:g.statusCode,message:g.message,errorResponse:g.errorResponse,errorBody:g.errorBody};return console.warn(`Logout: No active session or invalid request (400). Response: ${JSON.stringify(w)} [correlationId: ${u}, clientId: ${m}]`),this.clearTokenCache(h.token),{success:!0,message:"Logout successful (no active session)",timestamp:new Date().toISOString()}}const S={statusCode:g.statusCode,message:g.message,errorResponse:g.errorResponse,errorBody:g.errorBody};throw new Error(`Logout failed: ${g.message}. Full response: ${JSON.stringify(S)} [correlationId: ${u}, clientId: ${m}]`)}if(g&&typeof g=="object"&&"isAxiosError"in g&&g.isAxiosError){const S=g;if(S.response?.status===400){const C=S.response.data?JSON.stringify(S.response.data):"No response data";return console.warn(`Logout: No active session or invalid request (400). Response: ${C} [correlationId: ${u}, clientId: ${m}]`),this.clearTokenCache(h.token),{success:!0,message:"Logout successful (no active session)",timestamp:new Date().toISOString()}}const w=[];throw S.response?(w.push(`status: ${S.response.status}`),w.push(`statusText: ${S.response.statusText}`),w.push(`data: ${JSON.stringify(S.response.data)}`),S.response.headers&&w.push(`headers: ${JSON.stringify(S.response.headers)}`)):S.request?(w.push("request: [Request object - not serializable]"),w.push(`message: ${S.message}`)):w.push(`message: ${S.message}`),new Error(`Logout failed: ${S.message}. Full response: {${w.join(", ")}} [correlationId: ${u}, clientId: ${m}]`)}const v=g instanceof Error?g.message:"Unknown error";throw new Error(`Logout failed: ${v} [correlationId: ${u}, clientId: ${m}]`)}}async refreshToken(h,u){const m=this.generateCorrelationId(),g=this.config.clientId;try{const v=u||this.config.authStrategy,S=await this.apiClient.auth.refreshToken({refreshToken:h},v);return S.data?{success:S.success,accessToken:S.data.accessToken,refreshToken:S.data.refreshToken||h,expiresIn:S.data.expiresIn,expiresAt:S.timestamp,timestamp:S.timestamp}:null}catch(v){if(v instanceof i.MisoClientError){const w={statusCode:v.statusCode,message:v.message,errorResponse:v.errorResponse,errorBody:v.errorBody};return console.error(`Refresh token failed: ${v.message}. Full response: ${JSON.stringify(w)} [correlationId: ${m}, clientId: ${g}]`),null}if(v&&typeof v=="object"&&"isAxiosError"in v&&v.isAxiosError){const w=v,C=[];return w.response?(C.push(`status: ${w.response.status}`),C.push(`statusText: ${w.response.statusText}`),C.push(`data: ${JSON.stringify(w.response.data)}`),w.response.headers&&C.push(`headers: ${JSON.stringify(w.response.headers)}`)):w.request?(C.push("request: [Request object - not serializable]"),C.push(`message: ${w.message}`)):C.push(`message: ${w.message}`),console.error(`Refresh token failed: ${w.message}. Full response: {${C.join(", ")}} [correlationId: ${m}, clientId: ${g}]`),null}const S=v instanceof Error?v.message:"Unknown error";return console.error(`Refresh token failed: ${S} [correlationId: ${m}, clientId: ${g}]`),null}}async isAuthenticated(h,u){return this.validateToken(h,u)}}return In.AuthService=f,In}var ea={},$_;function U_(){if($_)return ea;$_=1;var e=ea&&ea.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(ea,"__esModule",{value:!0}),ea.RoleService=void 0;const t=e(Ci()),n=bu();class s{constructor(i,o,l){this.config=i.config,this.cache=l,this.httpClient=i,this.apiClient=o,this.roleTTL=this.config.cache?.roleTTL||900,this.applicationContextService=new n.ApplicationContextService(i)}extractUserIdFromToken(i){try{const o=t.default.decode(i);return o?o.sub||o.userId||o.user_id||o.id:null}catch{return null}}async getRoles(i,o){try{let l=this.extractUserIdFromToken(i);const f=l?`roles:${l}`:null;if(f){const w=await this.cache.get(f);if(w)return w.roles||[]}if(!l){const w=o||this.config.authStrategy,C=w?{...w,bearerToken:i}:{methods:["bearer"],bearerToken:i};if(l=(await this.apiClient.auth.validateToken({token:i},C)).data?.user?.id||null,!l)return[]}const p=o||this.config.authStrategy,h=p?{...p,bearerToken:i}:{methods:["bearer"],bearerToken:i},u=this.applicationContextService.getApplicationContext(),m=u.environment?{environment:u.environment}:void 0,v=(await this.apiClient.roles.getRoles(m,h)).data?.roles||[],S=`roles:${l}`;return await this.cache.set(S,{roles:v,timestamp:Date.now()},this.roleTTL),v}catch(l){return console.error("Failed to get roles:",l),[]}}async hasRole(i,o,l){return(await this.getRoles(i,l)).includes(o)}async hasAnyRole(i,o,l){const f=await this.getRoles(i,l);return o.some(p=>f.includes(p))}async hasAllRoles(i,o,l){const f=await this.getRoles(i,l);return o.every(p=>f.includes(p))}async refreshRoles(i,o){try{const l=o||this.config.authStrategy,f=l?{...l,bearerToken:i}:{methods:["bearer"],bearerToken:i},p=await this.apiClient.auth.validateToken({token:i},f);if(!p.data?.user?.id)return[];const u=`roles:${p.data.user.id}`,m=this.applicationContextService.getApplicationContext(),g=m.environment?{environment:m.environment}:void 0,S=(await this.apiClient.roles.refreshRoles(g,f)).data?.roles||[];return await this.cache.set(u,{roles:S,timestamp:Date.now()},this.roleTTL),S}catch(l){return console.error("Failed to refresh roles:",l),[]}}}return ea.RoleService=s,ea}var ta={},q_;function M_(){if(q_)return ta;q_=1;var e=ta&&ta.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(ta,"__esModule",{value:!0}),ta.PermissionService=void 0;const t=e(Ci()),n=bu();class s{constructor(i,o,l){this.config=i.config,this.cache=l,this.httpClient=i,this.apiClient=o,this.permissionTTL=this.config.cache?.permissionTTL||900,this.applicationContextService=new n.ApplicationContextService(i)}extractUserIdFromToken(i){try{const o=t.default.decode(i);return o?o.sub||o.userId||o.user_id||o.id:null}catch{return null}}async getPermissions(i,o){try{let l=this.extractUserIdFromToken(i);const f=l?`permissions:${l}`:null;if(f){const w=await this.cache.get(f);if(w)return w.permissions||[]}if(!l){const w=o||this.config.authStrategy,C=w?{...w,bearerToken:i}:{methods:["bearer"],bearerToken:i};if(l=(await this.apiClient.auth.validateToken({token:i},C)).data?.user?.id||null,!l)return[]}const p=o||this.config.authStrategy,h=p?{...p,bearerToken:i}:{methods:["bearer"],bearerToken:i},u=this.applicationContextService.getApplicationContext(),m=u.environment?{environment:u.environment}:void 0,v=(await this.apiClient.permissions.getPermissions(m,h)).data?.permissions||[],S=`permissions:${l}`;return await this.cache.set(S,{permissions:v,timestamp:Date.now()},this.permissionTTL),v}catch(l){return console.error("Failed to get permissions:",l),[]}}async hasPermission(i,o,l){return(await this.getPermissions(i,l)).includes(o)}async hasAnyPermission(i,o,l){const f=await this.getPermissions(i,l);return o.some(p=>f.includes(p))}async hasAllPermissions(i,o,l){const f=await this.getPermissions(i,l);return o.every(p=>f.includes(p))}async refreshPermissions(i,o){try{const l=o||this.config.authStrategy,f=l?{...l,bearerToken:i}:{methods:["bearer"],bearerToken:i},p=await this.apiClient.auth.validateToken({token:i},f);if(!p.data?.user?.id)return[];const u=`permissions:${p.data.user.id}`,m=this.applicationContextService.getApplicationContext(),g=m.environment?{environment:m.environment}:void 0,S=(await this.apiClient.permissions.refreshPermissions(g,f)).data?.permissions||[];return await this.cache.set(u,{permissions:S,timestamp:Date.now()},this.permissionTTL),S}catch(l){return console.error("Failed to refresh permissions:",l),[]}}async clearPermissionsCache(i,o){try{const l=o||this.config.authStrategy,f=l?{...l,bearerToken:i}:{methods:["bearer"],bearerToken:i},p=await this.apiClient.auth.validateToken({token:i},f);if(!p.data?.user?.id)return;const u=`permissions:${p.data.user.id}`;await this.cache.delete(u)}catch(l){console.error("Failed to clear permissions cache:",l)}}}return ta.PermissionService=s,ta}var Py={},H_;function nv(){return H_||(H_=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.registerLoggerService=e.mergeLoggerContext=e.clearLoggerContext=e.setLoggerContext=e.getLogger=e.LoggerContextStorage=e.UnifiedLoggerService=e.LoggerChain=e.LoggerService=void 0;var t=Fx();Object.defineProperty(e,"LoggerService",{enumerable:!0,get:function(){return t.LoggerService}});var n=Mv();Object.defineProperty(e,"LoggerChain",{enumerable:!0,get:function(){return n.LoggerChain}});var s=Wf();Object.defineProperty(e,"UnifiedLoggerService",{enumerable:!0,get:function(){return s.UnifiedLoggerService}});var c=Kf();Object.defineProperty(e,"LoggerContextStorage",{enumerable:!0,get:function(){return c.LoggerContextStorage}});var i=hu();Object.defineProperty(e,"getLogger",{enumerable:!0,get:function(){return i.getLogger}}),Object.defineProperty(e,"setLoggerContext",{enumerable:!0,get:function(){return i.setLoggerContext}}),Object.defineProperty(e,"clearLoggerContext",{enumerable:!0,get:function(){return i.clearLoggerContext}}),Object.defineProperty(e,"mergeLoggerContext",{enumerable:!0,get:function(){return i.mergeLoggerContext}}),Object.defineProperty(e,"registerLoggerService",{enumerable:!0,get:function(){return i.registerLoggerService}})})(Py)),Py}var ra={},F_;function hf(){if(F_)return ra;F_=1;var e=ra&&ra.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ra,"__esModule",{value:!0}),ra.RedisService=void 0;const t=e(Wx);class n{constructor(c){this.connected=!1,this.config=c}async connect(){if(this.config)try{this.redis=new t.default({host:this.config.host,port:this.config.port,password:this.config.password,db:this.config.db||0,keyPrefix:this.config.keyPrefix||"miso:",maxRetriesPerRequest:3,lazyConnect:!0,enableReadyCheck:!1,disableClientInfo:!0}),await this.redis.connect(),this.connected=!0}catch(c){throw console.error("Failed to connect to Redis:",c),this.connected=!1,c}}async disconnect(){this.redis&&(await this.redis.disconnect(),this.connected=!1)}async get(c){if(!this.redis||!this.connected)return null;try{return await this.redis.get(c)}catch(i){return console.error("Redis get error:",i),null}}async set(c,i,o){if(!this.redis||!this.connected)return!1;try{return await this.redis.setex(c,o,i),!0}catch(l){return console.error("Redis set error:",l),!1}}async delete(c){if(!this.redis||!this.connected)return!1;try{return await this.redis.del(c),!0}catch(i){return console.error("Redis delete error:",i),!1}}async rpush(c,i){if(!this.redis||!this.connected)return!1;try{return await this.redis.rpush(c,i),!0}catch(o){return console.error("Redis rpush error:",o),!1}}isConnected(){return this.connected}}return ra.RedisService=n,ra}var jl={},W_;function pf(){if(W_)return jl;W_=1,Object.defineProperty(jl,"__esModule",{value:!0}),jl.CacheService=void 0;class e{constructor(n){this.memoryCache=new Map,this.redis=n,this.cleanupInterval=setInterval(()=>{this.cleanupExpired()},300*1e3),this.cleanupInterval&&typeof this.cleanupInterval.unref=="function"&&this.cleanupInterval.unref()}cleanupExpired(){const n=Date.now(),s=[];for(const[c,i]of this.memoryCache.entries())i.expiresAt<n&&s.push(c);for(const c of s)this.memoryCache.delete(c)}async get(n){try{if(this.redis&&this.redis.isConnected()){const c=await this.redis.get(n);if(c)try{const i=JSON.parse(c);return this.setInMemory(n,i,300),i}catch(i){return console.warn(`Failed to parse cached data for key ${n}:`,i),await this.delete(n),null}}const s=this.memoryCache.get(n);return s?s.expiresAt<Date.now()?(this.memoryCache.delete(n),null):s.value:null}catch{const c=this.memoryCache.get(n);return c&&c.expiresAt>=Date.now()?c.value:null}}async set(n,s,c){try{const i=JSON.stringify(s);let o=!0;return this.redis&&this.redis.isConnected()&&(o=await this.redis.set(n,i,c)),this.setInMemory(n,s,c),o}catch(i){try{return this.setInMemory(n,s,c),!1}catch{return console.error(`Failed to cache value for key ${n}:`,i),!1}}}setInMemory(n,s,c){const i=Date.now()+c*1e3;this.memoryCache.set(n,{value:s,expiresAt:i})}async delete(n){let s=!1;this.redis&&this.redis.isConnected()&&(s=await this.redis.delete(n));const c=this.memoryCache.delete(n);return s||c}async clear(){this.memoryCache.clear()}destroy(){this.cleanupInterval&&(clearInterval(this.cleanupInterval),this.cleanupInterval=void 0),this.memoryCache.clear()}}return jl.CacheService=e,jl}var Dl={},Es={},$l={},K_;function MR(){if(K_)return $l;K_=1,Object.defineProperty($l,"__esModule",{value:!0}),$l.AuthStrategyHandler=void 0;class e{static buildAuthHeaders(n,s,c,i){const o={};for(const l of n.methods)switch(l){case"bearer":if(n.bearerToken)return o.Authorization=`Bearer ${n.bearerToken}`,o;break;case"client-token":if(s)return o["x-client-token"]=s,o;break;case"client-credentials":if(c&&i)return o["x-client-id"]=c,o["x-client-secret"]=i,o;break;case"api-key":if(n.apiKey)return o.Authorization=`Bearer ${n.apiKey}`,o;break}return o}static shouldTryMethod(n,s){if(!s.methods.includes(n))return!1;switch(n){case"bearer":return!!s.bearerToken;case"client-token":return!0;case"client-credentials":return!0;case"api-key":return!!s.apiKey;default:return!1}}static getDefaultStrategy(n){return{methods:["bearer","client-token"],bearerToken:n}}static mergeStrategy(n,s){return n?{methods:n.methods.length>0?n.methods:s.methods,bearerToken:n.bearerToken||s.bearerToken,apiKey:n.apiKey||s.apiKey}:s}}return $l.AuthStrategyHandler=e,$l}var Oy={},B_;function Aj(){return B_||(B_=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateErrorResponse=void 0,e.validateSuccessResponse=t,e.validatePaginatedResponse=n,e.getResponseType=c;function t(i){if(!i||typeof i!="object")return!1;const o=i;return!(typeof o.success!="boolean"||typeof o.timestamp!="string"||o.message!==void 0&&typeof o.message!="string")}function n(i){if(!i||typeof i!="object")return!1;const o=i;if(!Array.isArray(o.data)||!o.meta||typeof o.meta!="object")return!1;const l=o.meta;if(typeof l.totalItems!="number"||typeof l.currentPage!="number"||typeof l.pageSize!="number"||typeof l.type!="string")return!1;if(o.links!==void 0){if(typeof o.links!="object"||o.links===null)return!1;const f=o.links;if(f.first!==void 0&&typeof f.first!="string"||f.prev!==void 0&&typeof f.prev!="string"||f.next!==void 0&&typeof f.next!="string"||f.last!==void 0&&typeof f.last!="string")return!1}return!0}var s=Cu();Object.defineProperty(e,"validateErrorResponse",{enumerable:!0,get:function(){return s.isErrorResponse}});function c(i){return t(i)?"success":n(i)?"paginated":"unknown"}})(Oy)),Oy}var z_;function rh(){if(z_)return Es;z_=1;var e=Es&&Es.__createBinding||(Object.create?(function(h,u,m,g){g===void 0&&(g=m);var v=Object.getOwnPropertyDescriptor(u,m);(!v||("get"in v?!u.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return u[m]}}),Object.defineProperty(h,g,v)}):(function(h,u,m,g){g===void 0&&(g=m),h[g]=u[m]})),t=Es&&Es.__setModuleDefault||(Object.create?(function(h,u){Object.defineProperty(h,"default",{enumerable:!0,value:u})}):function(h,u){h.default=u}),n=Es&&Es.__importStar||(function(){var h=function(u){return h=Object.getOwnPropertyNames||function(m){var g=[];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(g[g.length]=v);return g},h(u)};return function(u){if(u&&u.__esModule)return u;var m={};if(u!=null)for(var g=h(u),v=0;v<g.length;v++)g[v]!=="default"&&e(m,u,g[v]);return t(m,u),m}})();Object.defineProperty(Es,"__esModule",{value:!0}),Es.InternalHttpClient=void 0;const s=n(qR()),c=Cu(),i=pa(),o=MR(),l=ma(),f=Aj();class p{constructor(u){this.clientToken=null,this.tokenExpiresAt=null,this.tokenRefreshPromise=null,this.config=u,u.clientToken&&(this.clientToken=u.clientToken,u.clientTokenExpiresAt&&(this.tokenExpiresAt=typeof u.clientTokenExpiresAt=="string"?new Date(u.clientTokenExpiresAt):u.clientTokenExpiresAt));const m=(0,l.resolveControllerUrl)(u),g=m.startsWith("https://");let v,S;if(typeof globalThis.window>"u"){const w=Pn,C=Pn,N=3e4;v=g?void 0:new w.Agent({family:4,timeout:N,keepAlive:!1}),S=g?new C.Agent({family:4,timeout:N,keepAlive:!1}):void 0}this.axios=s.default.create({baseURL:m,timeout:3e4,httpAgent:v,httpsAgent:S,headers:{"Content-Type":"application/json"}}),this.axios.interceptors.request.use(async w=>{if(w.headers=w.headers||{},!w.headers["x-client-token"]&&!w.headers["x-client-id"]){const C=await this.getClientToken();C?w.headers["x-client-token"]=C:console.warn("Client token is not available. Ensure clientSecret or onClientTokenRefresh is configured.")}return w},w=>Promise.reject(w)),this.axios.interceptors.response.use(w=>w,w=>(w.response?.status===401&&(w.message="Authentication failed - token may be invalid",this.clientToken=null,this.tokenExpiresAt=null),Promise.reject(w)))}async getClientToken(){const u=new Date;if(this.clientToken&&this.tokenExpiresAt&&this.tokenExpiresAt>new Date(u.getTime()+6e4))return this.clientToken;if(this.tokenRefreshPromise)return this.tokenRefreshPromise;if(this.config.onClientTokenRefresh){this.tokenRefreshPromise=this.refreshClientTokenFromCallback();try{return await this.tokenRefreshPromise}finally{this.tokenRefreshPromise=null}}if(this.config.clientSecret){this.tokenRefreshPromise=this.fetchClientToken();try{return await this.tokenRefreshPromise}finally{this.tokenRefreshPromise=null}}return null}async refreshClientTokenFromCallback(){if(!this.config.onClientTokenRefresh)throw new Error("Client token expired and no refresh callback provided");try{const u=await this.config.onClientTokenRefresh();if(this.clientToken=u.token,u.expiresIn){const m=u.expiresIn-30;this.tokenExpiresAt=new Date(Date.now()+m*1e3)}return this.clientToken}catch(u){throw this.clientToken=null,this.tokenExpiresAt=null,u}}mergeAbortSignals(u,m){const g=new AbortController,v=()=>g.abort();return u.addEventListener("abort",v),m.addEventListener("abort",v),g.signal}generateCorrelationId(){const u=Date.now(),m=Math.random().toString(36).substring(2,8);return`${this.config.clientId.substring(0,10)}-${u}-${m}`}async fetchClientToken(){if(!this.config.clientSecret)throw new Error("Cannot fetch client token: clientSecret is required but not provided");const u=this.generateCorrelationId(),m=this.config.clientId;try{const v=new AbortController,S=setTimeout(()=>{v.abort()},3e4),w=await Promise.resolve().then(()=>n(Pn)),C=await Promise.resolve().then(()=>n(Pn)),N=(0,l.resolveControllerUrl)(this.config),I=N.startsWith("https://"),R=I?new C.Agent({family:4,timeout:3e4}):new w.Agent({family:4,timeout:3e4}),A=s.default.create({baseURL:N,timeout:3e4,signal:v.signal,httpAgent:I?void 0:R,httpsAgent:I?R:void 0,headers:{"Content-Type":"application/json","x-client-id":this.config.clientId,"x-client-secret":this.config.clientSecret}}).post("/api/v1/auth/token"),O=new Promise((H,$)=>{setTimeout(()=>{$(new Error("Request timeout after 30000ms"))},3e4)});let x;try{x=await Promise.race([A,O]),clearTimeout(S)}catch(H){throw clearTimeout(S),H}const M=x.data.data?.token||x.data.token,G=x.data.data?.expiresIn||x.data.expiresIn,V=x.data.success===!0,z=x.status>=200&&x.status<300;if(M&&(V||z)){if(this.clientToken=M,G){const H=G-30;this.tokenExpiresAt=new Date(Date.now()+H*1e3)}return this.clientToken}const q=JSON.stringify({status:x.status,statusText:x.statusText,data:x.data,headers:x.headers});throw new Error(`Failed to get client token: Invalid response format. Expected {success: true, token: string}. Full response: ${q} [correlationId: ${u}, clientId: ${m}]`)}catch(g){if(this.isAxiosError(g)){const S=[];throw g.response?(S.push(`status: ${g.response.status}`),S.push(`statusText: ${g.response.statusText}`),S.push(`data: ${JSON.stringify(g.response.data)}`),g.response.headers&&S.push(`headers: ${JSON.stringify(g.response.headers)}`)):g.request?(S.push("request: [Request object - contains circular references]"),S.push(`message: ${g.message}`),S.push(`code: ${g.code||"N/A"}`)):S.push(`message: ${g.message}`),new Error(`Failed to get client token: ${g.message}. Full response: {${S.join(", ")}} [correlationId: ${u}, clientId: ${m}]`)}const v=g instanceof Error?g.message:"Unknown error";throw new Error(`Failed to get client token: ${v} [correlationId: ${u}, clientId: ${m}]`)}}isAxiosError(u){return u instanceof s.AxiosError?!0:typeof u=="object"&&u!==null&&"isAxiosError"in u?u.isAxiosError===!0:!1}validateResponse(u,m){if(this.config.validateResponses===!1||(m.includes("/api/v1/auth/validate")||m.includes("/api/auth/validate"))&&u&&typeof u=="object"&&"data"in u)return!0;const g=(0,f.getResponseType)(u);if(g==="unknown")return console.warn(`Response validation failed for ${m}: Response structure doesn't match expected format.`,"Expected: success response ({success, data?, message?, timestamp}) or paginated response ({data[], meta, links?}).","Actual:",u),!1;if(g==="success"){if(!(0,f.validateSuccessResponse)(u))return console.warn(`Response validation failed for ${m}: Success response structure invalid.`,"Expected: {success: boolean, data?: T, message?: string, timestamp: string}.","Actual:",u),!1}else if(g==="paginated"&&!(0,f.validatePaginatedResponse)(u))return console.warn(`Response validation failed for ${m}: Paginated response structure invalid.`,"Expected: {data: T[], meta: {totalItems, currentPage, pageSize, type}, links?}.","Actual:",u),!1;return!0}parseErrorResponse(u,m){try{if(!u.response?.data)return null;const g=u.response.data;if(typeof g=="object"&&g!==null&&(0,c.isErrorResponse)(g))return{errors:g.errors,type:g.type,title:g.title,statusCode:g.statusCode,instance:g.instance||m};if(typeof g=="string")try{const v=JSON.parse(g);if((0,c.isErrorResponse)(v))return{errors:v.errors,type:v.type,title:v.title,statusCode:v.statusCode,instance:v.instance||m}}catch{return null}return null}catch{return null}}createMisoClientError(u,m){const g=u.response?.status,v=this.parseErrorResponse(u,m);let S;u.response?.data&&typeof u.response.data=="object"&&(S=u.response.data);let w=u.message||"Request failed";return u.response&&(w=u.response.statusText||`Request failed with status code ${g}`),new i.MisoClientError(w,v||void 0,S,g)}getAxiosInstance(){return this.axios}async get(u,m){const v=new AbortController,S=setTimeout(()=>{v.abort()},3e4),w={...m,signal:m?.signal?this.mergeAbortSignals(v.signal,m.signal):v.signal},C=this.axios.get(u,w),N=new Promise((I,R)=>{setTimeout(()=>{R(new Error("Request timeout after 30000ms"))},3e4)});try{const I=await Promise.race([C,N]);clearTimeout(S);const R=I.config?.url||u;return this.validateResponse(I.data,R),I.data}catch(I){if(clearTimeout(S),this.isAxiosError(I)){const R=I.config?.url||u;throw this.createMisoClientError(I,R)}throw I}}async post(u,m,g){const S=new AbortController,w=setTimeout(()=>{S.abort()},3e4),C={...g,signal:g?.signal?this.mergeAbortSignals(S.signal,g.signal):S.signal},N=this.axios.post(u,m,C),I=new Promise((R,D)=>{setTimeout(()=>{D(new Error("Request timeout after 30000ms"))},3e4)});try{const R=await Promise.race([N,I]);clearTimeout(w);const D=R.config?.url||u;return this.validateResponse(R.data,D),R.data}catch(R){if(clearTimeout(w),this.isAxiosError(R)){const D=R.config?.url||u;throw this.createMisoClientError(R,D)}throw R}}async put(u,m,g){const S=new AbortController,w=setTimeout(()=>{S.abort()},3e4),C={...g,signal:g?.signal?this.mergeAbortSignals(S.signal,g.signal):S.signal},N=this.axios.put(u,m,C),I=new Promise((R,D)=>{setTimeout(()=>{D(new Error("Request timeout after 30000ms"))},3e4)});try{const R=await Promise.race([N,I]);clearTimeout(w);const D=R.config?.url||u;return this.validateResponse(R.data,D),R.data}catch(R){if(clearTimeout(w),this.isAxiosError(R)){const D=R.config?.url||u;throw this.createMisoClientError(R,D)}throw R}}async delete(u,m){const v=new AbortController,S=setTimeout(()=>{v.abort()},3e4),w={...m,signal:m?.signal?this.mergeAbortSignals(v.signal,m.signal):v.signal},C=this.axios.delete(u,w),N=new Promise((I,R)=>{setTimeout(()=>{R(new Error("Request timeout after 30000ms"))},3e4)});try{const I=await Promise.race([C,N]);clearTimeout(S);const R=I.config?.url||u;return this.validateResponse(I.data,R),I.data}catch(I){if(clearTimeout(S),this.isAxiosError(I)){const R=I.config?.url||u;throw this.createMisoClientError(I,R)}throw I}}async request(u,m,g,v){switch(u){case"GET":return this.get(m,v);case"POST":return this.post(m,g,v);case"PUT":return this.put(m,g,v);case"DELETE":return this.delete(m,v);default:throw new Error(`Unsupported HTTP method: ${u}`)}}async authenticatedRequest(u,m,g,v,S,w){let C;if(w){const N=await this.getClientToken(),I=o.AuthStrategyHandler.buildAuthHeaders(w,N,this.config.clientId,this.config.clientSecret);C={...S,headers:{...S?.headers,...I}}}else C={...S,headers:{...S?.headers,Authorization:`Bearer ${g}`}};switch(u){case"GET":return this.get(m,C);case"POST":return this.post(m,v,C);case"PUT":return this.put(m,v,C);case"DELETE":return this.delete(m,C);default:throw new Error(`Unsupported HTTP method: ${u}`)}}async requestWithAuthStrategy(u,m,g,v,S){const w=await this.getClientToken(),C=o.AuthStrategyHandler.buildAuthHeaders(g,w,this.config.clientId,this.config.clientSecret),N={...S,headers:{...S?.headers,...C}};switch(u){case"GET":return this.get(m,N);case"POST":return this.post(m,v,N);case"PUT":return this.put(m,v,N);case"DELETE":return this.delete(m,N);default:throw new Error(`Unsupported HTTP method: ${u}`)}}}return Es.InternalHttpClient=p,Es}var na={},G_;function Ij(){if(G_)return na;G_=1;var e=na&&na.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(na,"__esModule",{value:!0}),na.extractRequestMetadata=s,na.extractUserIdFromToken=l;const t=e(Ci()),n=ma();function s(f,p,h){const u=f?.config||p?.config;if(!u)return null;const m=u.metadata;if(!m)return null;const g=c(m,u,h),v=i(u,p),S=o(f,p);return{...g,...v,...S}}function c(f,p,h){const u=Date.now()-f.startTime,m=f.method||"UNKNOWN",g=f.url||"",v=f.baseURL||(0,n.resolveControllerUrl)(h),S=`${v}${g}`,w=p.headers?.authorization,C=l(w);return{config:p,metadata:f,duration:u,method:m,url:g,fullUrl:S,baseURL:v,statusCode:0,authHeader:w,userId:C}}function i(f,p){return{requestHeaders:f.headers||{},requestBody:f.data||p?.config?.data}}function o(f,p){return{statusCode:f?.status||p?.response?.status||0,responseBody:f?.data||p?.response?.data,responseHeaders:f?.headers||p?.response?.headers||{}}}function l(f){if(!f||!f.startsWith("Bearer "))return null;const p=f.substring(7);try{const h=t.default.decode(p);return h?h.sub||h.userId||h.user_id||h.id:null}catch{return null}}return na}var Ul={},Ms={},J_;function Pj(){if(J_)return Ms;J_=1,Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.estimateObjectSize=t,Ms.truncateResponseBody=n,Ms.analyzeRequestSizes=s,Ms.truncateBodies=c,Ms.applyMaskingStrategy=i,Ms.applyStandardMasking=o,Ms.applyDetailedMasking=l;const e=ho();function t(u){if(u==null)return 0;if(typeof u=="string")return u.length;if(typeof u!="object")return 10;if(Array.isArray(u)){const v=u.length;if(v===0)return 10;const S=Math.min(3,v);let w=0;for(let N=0;N<S;N++)w+=t(u[N]);const C=S>0?w/S:100;return v*C}const m=Object.entries(u);let g=0;for(const[v,S]of m)g+=v.length+t(S);return g}function n(u,m=1e4){if(u==null)return{data:u,truncated:!1};if(typeof u=="string")return u.length<=m?{data:u,truncated:!1}:{data:u.substring(0,m)+"...",truncated:!0};const g=t(u);return g<=m?{data:u,truncated:!1}:{data:{_message:"Response body too large, truncated for performance",_estimatedSize:g},truncated:!0}}function s(u,m,g){const v=u?t(u):0,S=m?t(m):0,w=v<1024&&S<1024,C=v>g||S>g;return{isSmallRequest:w,isLargeRequest:C}}function c(u,m,g){const{data:v,truncated:S}=n(m,g),{data:w,truncated:C}=u&&t(u)>g?n(u,g):{data:u,truncated:!1};return{requestBody:w,responseBody:v,requestTruncated:C,responseTruncated:S}}async function i(u,m,g,v){const S=s(u.requestBody,u.responseBody,v),w=c(u.requestBody,u.responseBody,g);return m==="standard"?o(u.requestHeaders,u.responseHeaders,w.requestBody,w.responseBody,S.isSmallRequest,S.isLargeRequest,w.requestTruncated,w.responseTruncated):l(u.requestHeaders,u.responseHeaders,w.requestBody,w.responseBody,S.isSmallRequest,S.isLargeRequest,w.requestTruncated,w.responseTruncated)}function o(u,m,g,v,S,w,C,N){const I=e.DataMasker.maskSensitiveData(u),R=e.DataMasker.maskSensitiveData(m);let D,A;return S||!w?(D=e.DataMasker.maskSensitiveData(g),A=e.DataMasker.maskSensitiveData(v)):(D={_message:"Request body too large, masking skipped"},A={_message:"Response body too large, masking skipped"}),{headers:I,requestBody:D,responseBody:A,responseHeaders:R,requestTruncated:C,responseTruncated:N}}async function l(u,m,g,v,S,w,C,N){return w?f(u,m,C,N):S?p(u,m,g,v,C,N):h(u,m,g,v,C,N)}function f(u,m,g,v){return{headers:u,requestBody:{_message:"Request body too large, masking skipped"},responseBody:{_message:"Response body too large, masking skipped"},responseHeaders:m,requestTruncated:g,responseTruncated:v}}function p(u,m,g,v,S,w){return{headers:e.DataMasker.maskSensitiveData(u),requestBody:e.DataMasker.maskSensitiveData(g),responseBody:e.DataMasker.maskSensitiveData(v),responseHeaders:e.DataMasker.maskSensitiveData(m),requestTruncated:S,responseTruncated:w}}async function h(u,m,g,v,S,w){const[C,N,I,R]=await Promise.all([Promise.resolve(e.DataMasker.maskSensitiveData(u)),Promise.resolve(e.DataMasker.maskSensitiveData(g)),Promise.resolve(e.DataMasker.maskSensitiveData(v)),Promise.resolve(e.DataMasker.maskSensitiveData(m))]);return{headers:C,requestBody:N,responseBody:I,responseHeaders:R,requestTruncated:S,responseTruncated:w}}return Ms}var V_;function Oj(){if(V_)return Ul;V_=1,Object.defineProperty(Ul,"__esModule",{value:!0}),Ul.logHttpRequestAudit=t,Ul.calculateRequestSizes=c;const e=Pj();async function t(p,h,u,m){try{if(!p)return;const g=u.audit||{},v=g.level||"detailed";if(v==="minimal"){await n(p,h,m);return}await s(p,v,g,h,u,m)}catch{}}async function n(p,h,u){await u.audit(`http.request.${p.method}`,p.url,{method:p.method,url:p.fullUrl,statusCode:p.statusCode,duration:p.duration,userId:p.userId||void 0,error:h?.message||void 0},{token:p.userId?void 0:p.authHeader?.replace("Bearer ","")})}async function s(p,h,u,m,g,v){const S=await(0,e.applyMaskingStrategy)({requestHeaders:p.requestHeaders,requestBody:p.requestBody,responseBody:p.responseBody,responseHeaders:p.responseHeaders},h,u.maxResponseSize??1e4,u.maxMaskingSize??5e4),w=h==="detailed"||h==="full"?c(p.requestBody,p.responseBody):{requestSize:void 0,responseSize:void 0},C=i({method:p.method,fullUrl:p.fullUrl,duration:p.duration,statusCode:p.statusCode,userId:p.userId},w,S,h,m);if(await v.audit(`http.request.${p.method}`,p.url,C,{token:p.userId?void 0:p.authHeader?.replace("Bearer ","")}),g.logLevel==="debug")try{await o(p,S,w,m,v)}catch{}}function c(p,h){let u,m;if(p){const g=JSON.stringify(p),v=Buffer.byteLength(g);u=v<=2?void 0:v}if(h){const g=JSON.stringify(h),v=Buffer.byteLength(g);m=v<=2?void 0:v}return{requestSize:u,responseSize:m}}function i(p,h,u,m,g){const v={method:p.method,url:p.fullUrl,statusCode:p.statusCode,duration:p.duration,userId:p.userId||void 0,error:g?.message||void 0};return(m==="detailed"||m==="full")&&(v.requestSize=h.requestSize!==void 0&&h.requestSize>0?h.requestSize:void 0,v.responseSize=h.responseSize!==void 0&&h.responseSize>0?h.responseSize:void 0,u.requestTruncated&&(v.requestTruncated=!0),u.responseTruncated&&(v.responseTruncated=!0)),v}async function o(p,h,u,m,g){const v=l(h.responseBody),S=f(p,h,u,v,m);await g.debug(`HTTP ${p.method} ${p.url}`,S,{token:p.userId?void 0:p.authHeader?.replace("Bearer ","")})}function l(p){if(!p||typeof p!="object")return p;const h=JSON.stringify(p);if(h.length<=1e3)return p;try{return JSON.parse(h.substring(0,1e3)+"...")}catch{return{_message:"Response body truncated"}}}function f(p,h,u,m,g){return{method:p.method,url:p.fullUrl,baseURL:p.baseURL,statusCode:p.statusCode,duration:p.duration,userId:p.userId||void 0,timeout:p.config.timeout||3e4,requestHeaders:h.headers,responseHeaders:h.responseHeaders,requestBody:h.requestBody,responseBody:m,requestSize:u.requestSize!==void 0&&u.requestSize>0?u.requestSize:void 0,responseSize:u.responseSize!==void 0&&u.responseSize>0?u.responseSize:void 0,error:g?.message||void 0}}return Ul}var X_;function mf(){if(X_)return Dl;X_=1,Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.HttpClient=void 0;const e=rh(),t=ho(),n=Ij(),s=Oj();class c{constructor(o,l){this.config=o,this.logger=l,this.internalClient=new e.InternalHttpClient(o),o.sensitiveFieldsConfig&&t.DataMasker.setConfigPath(o.sensitiveFieldsConfig),this.setupAuditLogging()}setupAuditLogging(){const o=this.internalClient.getAxiosInstance();o.interceptors.request.use(async l=>(this.shouldAuditRequest(l.url||"")&&(l.metadata={startTime:Date.now(),method:l.method?.toUpperCase(),url:l.url,baseURL:l.baseURL}),l),l=>Promise.reject(l)),o.interceptors.response.use(l=>(setTimeout(()=>{this.logHttpRequestAudit(l,null).catch(()=>{})},0),l),l=>(setTimeout(()=>{this.logHttpRequestAudit(l.response,l).catch(()=>{})},0),Promise.reject(l)))}shouldAuditRequest(o){if(this.config.audit?.enabled===!1)return!1;if(this.config.audit?.skipEndpoints){for(const l of this.config.audit.skipEndpoints)if(o&&o.includes(l))return!1}return!(o&&o.includes("/api/v1/logs")||o&&o.includes("/api/v1/auth/token"))}async logHttpRequestAudit(o,l){try{const f=(0,n.extractRequestMetadata)(o,l,this.config);await(0,s.logHttpRequestAudit)(f,l,this.config,this.logger)}catch{}}async get(o,l){return this.internalClient.get(o,l)}async post(o,l,f){return this.internalClient.post(o,l,f)}async put(o,l,f){return this.internalClient.put(o,l,f)}async delete(o,l){return this.internalClient.delete(o,l)}async request(o,l,f,p){return this.internalClient.request(o,l,f,p)}async authenticatedRequest(o,l,f,p,h,u){return this.internalClient.authenticatedRequest(o,l,f,p,h,u)}async requestWithAuthStrategy(o,l,f,p,h){return this.internalClient.requestWithAuthStrategy(o,l,f,p,h)}async validateTokenRequest(o,l){return this.authenticatedRequest("POST","/api/v1/auth/validate",o,{token:o},void 0,l)}async getWithFilters(o,l,f){const p=l.toQueryString(),h=p?`${o}?${p}`:o;return this.internalClient.get(h,f)}async getPaginated(o,l,f){const p=new URLSearchParams;p.append("page",l.page.toString()),p.append("page_size",l.pageSize.toString());const h=`${o}?${p.toString()}`;return this.internalClient.get(h,f)}}return Dl.HttpClient=c,Dl}var ql={},Ml={},Hl={},Y_;function Nj(){if(Y_)return Hl;Y_=1,Object.defineProperty(Hl,"__esModule",{value:!0}),Hl.AuthLoginApi=void 0;const e=Ht(),t=Ft();class n{constructor(c){this.httpClient=c}async login(c,i){try{return i?await this.httpClient.requestWithAuthStrategy("GET",n.LOGIN_ENDPOINT,i,void 0,{params:c}):await this.httpClient.request("GET",n.LOGIN_ENDPOINT,void 0,{params:c})}catch(o){const l=(0,t.extractErrorInfo)(o,{endpoint:n.LOGIN_ENDPOINT,method:"GET"});throw(0,e.logErrorWithContext)(l,"[AuthLoginApi]"),o}}async initiateDeviceCode(c,i){try{return i?await this.httpClient.requestWithAuthStrategy("POST",n.LOGIN_ENDPOINT,i,c):await this.httpClient.request("POST",n.LOGIN_ENDPOINT,c)}catch(o){const l=(0,t.extractErrorInfo)(o,{endpoint:n.LOGIN_ENDPOINT,method:"POST"});throw(0,e.logErrorWithContext)(l,"[AuthLoginApi]"),o}}async pollDeviceCodeToken(c){try{return await this.httpClient.request("POST",n.DEVICE_CODE_TOKEN_ENDPOINT,c)}catch(i){const o=(0,t.extractErrorInfo)(i,{endpoint:n.DEVICE_CODE_TOKEN_ENDPOINT,method:"POST"});throw(0,e.logErrorWithContext)(o,"[AuthLoginApi]"),i}}async refreshDeviceCodeToken(c){try{return await this.httpClient.request("POST",n.DEVICE_CODE_REFRESH_ENDPOINT,c)}catch(i){const o=(0,t.extractErrorInfo)(i,{endpoint:n.DEVICE_CODE_REFRESH_ENDPOINT,method:"POST"});throw(0,e.logErrorWithContext)(o,"[AuthLoginApi]"),i}}async getLoginDiagnostics(c){try{const i=c?{environment:c}:void 0,o=await this.httpClient.request("GET",n.LOGIN_DIAGNOSTICS_ENDPOINT,void 0,{params:i});if(o.success!==void 0)return o;if(o.data&&typeof o.data=="object"){const l=o.data;return{success:!0,data:{database:l.database||{},controller:l.controller||{},environment:l.environment||{},keycloak:l.keycloak||{}},timestamp:typeof o.timestamp=="string"?o.timestamp:new Date().toISOString()}}throw new Error(`Unexpected response format from login diagnostics endpoint: ${JSON.stringify(o)}`)}catch(i){const o=(0,t.extractErrorInfo)(i,{endpoint:n.LOGIN_DIAGNOSTICS_ENDPOINT,method:"GET"});throw(0,e.logErrorWithContext)(o,"[AuthLoginApi]"),i}}}return Hl.AuthLoginApi=n,n.LOGIN_ENDPOINT="/api/v1/auth/login",n.DEVICE_CODE_TOKEN_ENDPOINT="/api/v1/auth/login/device/token",n.DEVICE_CODE_REFRESH_ENDPOINT="/api/v1/auth/login/device/refresh",n.LOGIN_DIAGNOSTICS_ENDPOINT="/api/v1/auth/login/diagnostics",Hl}var Fl={},Q_;function Lj(){if(Q_)return Fl;Q_=1,Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.AuthTokenApi=void 0;const e=Ft(),t=Ht();class n{constructor(c){this.httpClient=c}async getClientToken(c){try{if(c)return await this.httpClient.requestWithAuthStrategy("POST",n.CLIENT_TOKEN_ENDPOINT,c);const i=await this.httpClient.request("POST",n.CLIENT_TOKEN_ENDPOINT,void 0,{headers:{"x-client-id":this.httpClient.config.clientId||""}});if(i.success!==void 0)return i;if(i.data&&typeof i.data=="object"){const o=i.data;if(typeof o.token=="string")return{success:!0,data:{token:o.token,expiresIn:typeof o.expiresIn=="number"?o.expiresIn:0,expiresAt:typeof o.expiresAt=="string"?o.expiresAt:new Date().toISOString()},timestamp:typeof i.timestamp=="string"?i.timestamp:new Date().toISOString()}}throw new Error(`Unexpected response format from client-token endpoint: ${JSON.stringify(i)}`)}catch(i){const o=(0,e.extractErrorInfo)(i,{endpoint:n.CLIENT_TOKEN_ENDPOINT,method:"POST"});throw(0,t.logErrorWithContext)(o,"[AuthTokenApi]"),i}}async generateClientToken(c){try{if(c)return await this.httpClient.requestWithAuthStrategy("POST",n.CLIENT_TOKEN_LEGACY_ENDPOINT,c);const i=await this.httpClient.request("POST",n.CLIENT_TOKEN_LEGACY_ENDPOINT,void 0,{headers:{"x-client-id":this.httpClient.config.clientId||"","x-client-secret":this.httpClient.config.clientSecret||""}});if(i.success!==void 0)return i;if(i.data&&typeof i.data=="object"){const o=i.data;if(typeof o.token=="string")return{success:!0,token:o.token,expiresIn:typeof o.expiresIn=="number"?o.expiresIn:0,expiresAt:typeof o.expiresAt=="string"?o.expiresAt:new Date().toISOString(),timestamp:typeof i.timestamp=="string"?i.timestamp:new Date().toISOString()}}else if(typeof i.token=="string")return{success:!0,token:i.token,expiresIn:typeof i.expiresIn=="number"?i.expiresIn:0,expiresAt:typeof i.expiresAt=="string"?i.expiresAt:new Date().toISOString(),timestamp:typeof i.timestamp=="string"?i.timestamp:new Date().toISOString()};throw new Error(`Unexpected response format from token endpoint: ${JSON.stringify(i)}`)}catch(i){const o=(0,e.extractErrorInfo)(i,{endpoint:n.CLIENT_TOKEN_LEGACY_ENDPOINT,method:"POST"});throw(0,t.logErrorWithContext)(o,"[AuthTokenApi]"),i}}async validateToken(c,i){try{return await this.httpClient.authenticatedRequest("POST",n.VALIDATE_ENDPOINT,c.token,c,void 0,i)}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:n.VALIDATE_ENDPOINT,method:"POST"});throw(0,t.logErrorWithContext)(l,"[AuthTokenApi]"),o}}async refreshToken(c,i){try{return i?await this.httpClient.requestWithAuthStrategy("POST",n.REFRESH_ENDPOINT,i,c):await this.httpClient.request("POST",n.REFRESH_ENDPOINT,c)}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:n.REFRESH_ENDPOINT,method:"POST"});throw(0,t.logErrorWithContext)(l,"[AuthTokenApi]"),o}}}return Fl.AuthTokenApi=n,n.CLIENT_TOKEN_ENDPOINT="/api/v1/auth/client-token",n.CLIENT_TOKEN_LEGACY_ENDPOINT="/api/v1/auth/token",n.VALIDATE_ENDPOINT="/api/v1/auth/validate",n.REFRESH_ENDPOINT="/api/v1/auth/refresh",Fl}var Wl={},Z_;function jj(){if(Z_)return Wl;Z_=1,Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.AuthUserApi=void 0;const e=Ft(),t=Ht();class n{constructor(c){this.httpClient=c}async getUser(c){try{if(c?.bearerToken)return await this.httpClient.authenticatedRequest("GET",n.USER_ENDPOINT,c.bearerToken,void 0,void 0,c);if(c)return await this.httpClient.requestWithAuthStrategy("GET",n.USER_ENDPOINT,c);throw new Error("getUser requires authentication - provide authStrategy with bearerToken")}catch(i){const o=(0,e.extractErrorInfo)(i,{endpoint:n.USER_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(o,"[AuthUserApi]"),i}}async logout(){try{return await this.httpClient.request("POST",n.LOGOUT_ENDPOINT)}catch(c){const i=(0,e.extractErrorInfo)(c,{endpoint:n.LOGOUT_ENDPOINT,method:"POST"});throw(0,t.logErrorWithContext)(i,"[AuthUserApi]"),c}}async logoutWithToken(c){try{return await this.httpClient.request("POST",n.LOGOUT_ENDPOINT,{token:c})}catch(i){const o=(0,e.extractErrorInfo)(i,{endpoint:n.LOGOUT_ENDPOINT,method:"POST"});throw(0,t.logErrorWithContext)(o,"[AuthUserApi]"),i}}async handleCallback(c,i){try{return i?await this.httpClient.requestWithAuthStrategy("GET",n.CALLBACK_ENDPOINT,i,void 0,{params:c}):await this.httpClient.request("GET",n.CALLBACK_ENDPOINT,void 0,{params:c})}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:n.CALLBACK_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(l,"[AuthUserApi]"),o}}}return Wl.AuthUserApi=n,n.USER_ENDPOINT="/api/v1/auth/user",n.LOGOUT_ENDPOINT="/api/v1/auth/logout",n.CALLBACK_ENDPOINT="/api/v1/auth/callback",Wl}var Kl={},e1;function Dj(){if(e1)return Kl;e1=1,Object.defineProperty(Kl,"__esModule",{value:!0}),Kl.AuthCacheApi=void 0;const e=Ft(),t=Ht();class n{constructor(c){this.httpClient=c}async getCacheStats(c){try{return c?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.CACHE_STATS_ENDPOINT,c.bearerToken,void 0,void 0,c):c?await this.httpClient.requestWithAuthStrategy("GET",n.CACHE_STATS_ENDPOINT,c):await this.httpClient.request("GET",n.CACHE_STATS_ENDPOINT)}catch(i){const o=(0,e.extractErrorInfo)(i,{endpoint:n.CACHE_STATS_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(o,"[AuthCacheApi]"),i}}async getCachePerformance(c){try{return c?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.CACHE_PERFORMANCE_ENDPOINT,c.bearerToken,void 0,void 0,c):c?await this.httpClient.requestWithAuthStrategy("GET",n.CACHE_PERFORMANCE_ENDPOINT,c):await this.httpClient.request("GET",n.CACHE_PERFORMANCE_ENDPOINT)}catch(i){const o=(0,e.extractErrorInfo)(i,{endpoint:n.CACHE_PERFORMANCE_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(o,"[AuthCacheApi]"),i}}async getCacheEfficiency(c){try{return c?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.CACHE_EFFICIENCY_ENDPOINT,c.bearerToken,void 0,void 0,c):c?await this.httpClient.requestWithAuthStrategy("GET",n.CACHE_EFFICIENCY_ENDPOINT,c):await this.httpClient.request("GET",n.CACHE_EFFICIENCY_ENDPOINT)}catch(i){const o=(0,e.extractErrorInfo)(i,{endpoint:n.CACHE_EFFICIENCY_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(o,"[AuthCacheApi]"),i}}async clearCache(c){try{return c?.bearerToken?await this.httpClient.authenticatedRequest("POST",n.CACHE_CLEAR_ENDPOINT,c.bearerToken,void 0,void 0,c):c?await this.httpClient.requestWithAuthStrategy("POST",n.CACHE_CLEAR_ENDPOINT,c):await this.httpClient.request("POST",n.CACHE_CLEAR_ENDPOINT)}catch(i){const o=(0,e.extractErrorInfo)(i,{endpoint:n.CACHE_CLEAR_ENDPOINT,method:"POST"});throw(0,t.logErrorWithContext)(o,"[AuthCacheApi]"),i}}async invalidateCache(c,i){try{return i?.bearerToken?await this.httpClient.authenticatedRequest("POST",n.CACHE_INVALIDATE_ENDPOINT,i.bearerToken,c,void 0,i):i?await this.httpClient.requestWithAuthStrategy("POST",n.CACHE_INVALIDATE_ENDPOINT,i,c):await this.httpClient.request("POST",n.CACHE_INVALIDATE_ENDPOINT,c)}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:n.CACHE_INVALIDATE_ENDPOINT,method:"POST"});throw(0,t.logErrorWithContext)(l,"[AuthCacheApi]"),o}}}return Kl.AuthCacheApi=n,n.CACHE_STATS_ENDPOINT="/api/v1/auth/cache/stats",n.CACHE_PERFORMANCE_ENDPOINT="/api/v1/auth/cache/performance",n.CACHE_EFFICIENCY_ENDPOINT="/api/v1/auth/cache/efficiency",n.CACHE_CLEAR_ENDPOINT="/api/v1/auth/cache/clear",n.CACHE_INVALIDATE_ENDPOINT="/api/v1/auth/cache/invalidate",Kl}var t1;function $j(){if(t1)return Ml;t1=1,Object.defineProperty(Ml,"__esModule",{value:!0}),Ml.AuthApi=void 0;const e=Nj(),t=Lj(),n=jj(),s=Dj();class c{constructor(o){this.httpClient=o,this.loginApi=new e.AuthLoginApi(o),this.tokenApi=new t.AuthTokenApi(o),this.userApi=new n.AuthUserApi(o),this.cacheApi=new s.AuthCacheApi(o)}async login(o,l){return this.loginApi.login(o,l)}async initiateDeviceCode(o,l){return this.loginApi.initiateDeviceCode(o,l)}async pollDeviceCodeToken(o){return this.loginApi.pollDeviceCodeToken(o)}async refreshDeviceCodeToken(o){return this.loginApi.refreshDeviceCodeToken(o)}async getLoginDiagnostics(o){return this.loginApi.getLoginDiagnostics(o)}async getClientToken(o){return this.tokenApi.getClientToken(o)}async generateClientToken(o){return this.tokenApi.generateClientToken(o)}async validateToken(o,l){return this.tokenApi.validateToken(o,l)}async refreshToken(o,l){return this.tokenApi.refreshToken(o,l)}async getUser(o){return this.userApi.getUser(o)}async logout(){return this.userApi.logout()}async logoutWithToken(o){return this.userApi.logoutWithToken(o)}async handleCallback(o,l){return this.userApi.handleCallback(o,l)}async getCacheStats(o){return this.cacheApi.getCacheStats(o)}async getCachePerformance(o){return this.cacheApi.getCachePerformance(o)}async getCacheEfficiency(o){return this.cacheApi.getCacheEfficiency(o)}async clearCache(o){return this.cacheApi.clearCache(o)}async invalidateCache(o,l){return this.cacheApi.invalidateCache(o,l)}}return Ml.AuthApi=c,Ml}var Bl={},r1;function Uj(){if(r1)return Bl;r1=1,Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.RolesApi=void 0;const e=Ft(),t=Ht();class n{constructor(c){this.httpClient=c}async getRoles(c,i){try{if(i?.bearerToken)return await this.httpClient.authenticatedRequest("GET",n.ROLES_ENDPOINT,i.bearerToken,void 0,{params:c},i);if(i)return await this.httpClient.requestWithAuthStrategy("GET",n.ROLES_ENDPOINT,i,void 0,{params:c});throw new Error("getRoles requires authentication - provide authStrategy with bearerToken")}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:n.ROLES_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(l,"[RolesApi]"),o}}async refreshRoles(c,i){try{if(i?.bearerToken)return await this.httpClient.authenticatedRequest("GET",n.ROLES_REFRESH_ENDPOINT,i.bearerToken,void 0,{params:c},i);if(i)return await this.httpClient.requestWithAuthStrategy("GET",n.ROLES_REFRESH_ENDPOINT,i,void 0,{params:c});throw new Error("refreshRoles requires authentication - provide authStrategy with bearerToken")}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:n.ROLES_REFRESH_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(l,"[RolesApi]"),o}}}return Bl.RolesApi=n,n.ROLES_ENDPOINT="/api/v1/auth/roles",n.ROLES_REFRESH_ENDPOINT="/api/v1/auth/roles/refresh",Bl}var zl={},n1;function qj(){if(n1)return zl;n1=1,Object.defineProperty(zl,"__esModule",{value:!0}),zl.PermissionsApi=void 0;const e=Ft(),t=Ht();class n{constructor(c){this.httpClient=c}async getPermissions(c,i){try{if(i?.bearerToken)return await this.httpClient.authenticatedRequest("GET",n.PERMISSIONS_ENDPOINT,i.bearerToken,void 0,{params:c},i);if(i)return await this.httpClient.requestWithAuthStrategy("GET",n.PERMISSIONS_ENDPOINT,i,void 0,{params:c});throw new Error("getPermissions requires authentication - provide authStrategy with bearerToken")}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:n.PERMISSIONS_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(l,"[PermissionsApi]"),o}}async refreshPermissions(c,i){try{if(i?.bearerToken)return await this.httpClient.authenticatedRequest("GET",n.PERMISSIONS_REFRESH_ENDPOINT,i.bearerToken,void 0,{params:c},i);if(i)return await this.httpClient.requestWithAuthStrategy("GET",n.PERMISSIONS_REFRESH_ENDPOINT,i,void 0,{params:c});throw new Error("refreshPermissions requires authentication - provide authStrategy with bearerToken")}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:n.PERMISSIONS_REFRESH_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(l,"[PermissionsApi]"),o}}}return zl.PermissionsApi=n,n.PERMISSIONS_ENDPOINT="/api/v1/auth/permissions",n.PERMISSIONS_REFRESH_ENDPOINT="/api/v1/auth/permissions/refresh",zl}var Gl={},Jl={},s1;function Mj(){if(s1)return Jl;s1=1,Object.defineProperty(Jl,"__esModule",{value:!0}),Jl.LogsCreateApi=void 0;const e=Ft(),t=Ht(),n=pa();class s{constructor(i){this.httpClient=i}async createLog(i,o){try{if(o?.bearerToken)return await this.httpClient.authenticatedRequest("POST",s.LOGS_ENDPOINT,o.bearerToken,i,void 0,o);if(o)return await this.httpClient.requestWithAuthStrategy("POST",s.LOGS_ENDPOINT,o,i);const l=await this.httpClient.request("POST",s.LOGS_ENDPOINT,i);return l.success!==void 0?l:{success:!0,data:null,message:typeof l.message=="string"?l.message:"Log created successfully",timestamp:typeof l.timestamp=="string"?l.timestamp:new Date().toISOString()}}catch(l){if(!(l instanceof n.MisoClientError&&l.statusCode===401)){const p=(0,e.extractErrorInfo)(l,{endpoint:s.LOGS_ENDPOINT,method:"POST"});(0,t.logErrorWithContext)(p,"[LogsCreateApi]")}throw l}}async createBatchLogs(i,o){try{if(o?.bearerToken)return await this.httpClient.authenticatedRequest("POST",s.LOGS_BATCH_ENDPOINT,o.bearerToken,i,void 0,o);if(o)return await this.httpClient.requestWithAuthStrategy("POST",s.LOGS_BATCH_ENDPOINT,o,i);const l=await this.httpClient.request("POST",s.LOGS_BATCH_ENDPOINT,i);if(l.success!==void 0)return l;{const f=l.data&&typeof l.data=="object"?l.data:void 0;return{success:!0,message:typeof l.message=="string"?l.message:"Batch logs processed",processed:typeof f?.processed=="number"?f.processed:typeof l.processed=="number"?l.processed:0,failed:typeof f?.failed=="number"?f.failed:typeof l.failed=="number"?l.failed:0,errors:Array.isArray(f?.errors)?f.errors:Array.isArray(l.errors)?l.errors:void 0,timestamp:typeof l.timestamp=="string"?l.timestamp:new Date().toISOString()}}}catch(l){if(!(l instanceof n.MisoClientError&&l.statusCode===401)){const p=(0,e.extractErrorInfo)(l,{endpoint:s.LOGS_BATCH_ENDPOINT,method:"POST"});(0,t.logErrorWithContext)(p,"[LogsCreateApi]")}throw l}}}return Jl.LogsCreateApi=s,s.LOGS_ENDPOINT="/api/v1/logs",s.LOGS_BATCH_ENDPOINT="/api/v1/logs/batch",Jl}var Vl={},i1;function Hj(){if(i1)return Vl;i1=1,Object.defineProperty(Vl,"__esModule",{value:!0}),Vl.LogsListApi=void 0;const e=Ft(),t=Ht();class n{constructor(c){this.httpClient=c}async listGeneralLogs(c,i){try{return i?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_GENERAL_ENDPOINT,i.bearerToken,void 0,{params:c},i):i?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_GENERAL_ENDPOINT,i,void 0,{params:c}):await this.httpClient.request("GET",n.LOGS_GENERAL_ENDPOINT,void 0,{params:c})}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:n.LOGS_GENERAL_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(l,"[LogsListApi]"),o}}async getGeneralLog(c,i,o){try{const l=`${n.LOGS_GENERAL_ENDPOINT}/${c}`,f=i?{environment:i}:void 0;return o?.bearerToken?await this.httpClient.authenticatedRequest("GET",l,o.bearerToken,void 0,{params:f},o):o?await this.httpClient.requestWithAuthStrategy("GET",l,o,void 0,{params:f}):await this.httpClient.request("GET",l,void 0,{params:f})}catch(l){const f=(0,e.extractErrorInfo)(l,{endpoint:n.LOGS_GENERAL_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(f,"[LogsListApi]"),l}}async listAuditLogs(c,i){try{return i?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_AUDIT_ENDPOINT,i.bearerToken,void 0,{params:c},i):i?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_AUDIT_ENDPOINT,i,void 0,{params:c}):await this.httpClient.request("GET",n.LOGS_AUDIT_ENDPOINT,void 0,{params:c})}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:n.LOGS_AUDIT_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(l,"[LogsListApi]"),o}}async getAuditLog(c,i,o){try{const l=`${n.LOGS_AUDIT_ENDPOINT}/${c}`,f=i?{environment:i}:void 0;return o?.bearerToken?await this.httpClient.authenticatedRequest("GET",l,o.bearerToken,void 0,{params:f},o):o?await this.httpClient.requestWithAuthStrategy("GET",l,o,void 0,{params:f}):await this.httpClient.request("GET",l,void 0,{params:f})}catch(l){const f=(0,e.extractErrorInfo)(l,{endpoint:n.LOGS_AUDIT_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(f,"[LogsListApi]"),l}}async listJobLogs(c,i){try{return i?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_JOBS_ENDPOINT,i.bearerToken,void 0,{params:c},i):i?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_JOBS_ENDPOINT,i,void 0,{params:c}):await this.httpClient.request("GET",n.LOGS_JOBS_ENDPOINT,void 0,{params:c})}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:void 0,method:"GET"});throw(0,t.logErrorWithContext)(l,"[LogsListApi]"),o}}async getJobLog(c,i){try{const o=`${n.LOGS_JOBS_ENDPOINT}/${c}`;return i?.bearerToken?await this.httpClient.authenticatedRequest("GET",o,i.bearerToken,void 0,void 0,i):i?await this.httpClient.requestWithAuthStrategy("GET",o,i):await this.httpClient.request("GET",o)}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:void 0,method:"GET"});throw(0,t.logErrorWithContext)(l,"[LogsListApi]"),o}}}return Vl.LogsListApi=n,n.LOGS_GENERAL_ENDPOINT="/api/v1/logs/general",n.LOGS_AUDIT_ENDPOINT="/api/v1/logs/audit",n.LOGS_JOBS_ENDPOINT="/api/v1/logs/jobs",Vl}var Xl={},o1;function Fj(){if(o1)return Xl;o1=1,Object.defineProperty(Xl,"__esModule",{value:!0}),Xl.LogsStatsApi=void 0;const e=Ft(),t=Ht();class n{constructor(c){this.httpClient=c}async getLogStatsSummary(c,i){try{return i?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_STATS_SUMMARY_ENDPOINT,i.bearerToken,void 0,{params:c},i):i?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_STATS_SUMMARY_ENDPOINT,i,void 0,{params:c}):await this.httpClient.request("GET",n.LOGS_STATS_SUMMARY_ENDPOINT,void 0,{params:c})}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:void 0,method:"GET"});throw(0,t.logErrorWithContext)(l,"[LogsStatsApi]"),o}}async getErrorStats(c,i){try{return i?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_STATS_ERRORS_ENDPOINT,i.bearerToken,void 0,{params:c},i):i?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_STATS_ERRORS_ENDPOINT,i,void 0,{params:c}):await this.httpClient.request("GET",n.LOGS_STATS_ERRORS_ENDPOINT,void 0,{params:c})}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:void 0,method:"GET"});throw(0,t.logErrorWithContext)(l,"[LogsStatsApi]"),o}}async getUserActivityStats(c,i){try{return i?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_STATS_USERS_ENDPOINT,i.bearerToken,void 0,{params:c},i):i?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_STATS_USERS_ENDPOINT,i,void 0,{params:c}):await this.httpClient.request("GET",n.LOGS_STATS_USERS_ENDPOINT,void 0,{params:c})}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:void 0,method:"GET"});throw(0,t.logErrorWithContext)(l,"[LogsStatsApi]"),o}}async getApplicationStats(c,i){try{return i?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_STATS_APPLICATIONS_ENDPOINT,i.bearerToken,void 0,{params:c},i):i?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_STATS_APPLICATIONS_ENDPOINT,i,void 0,{params:c}):await this.httpClient.request("GET",n.LOGS_STATS_APPLICATIONS_ENDPOINT,void 0,{params:c})}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:void 0,method:"GET"});throw(0,t.logErrorWithContext)(l,"[LogsStatsApi]"),o}}}return Xl.LogsStatsApi=n,n.LOGS_STATS_SUMMARY_ENDPOINT="/api/v1/logs/stats/summary",n.LOGS_STATS_ERRORS_ENDPOINT="/api/v1/logs/stats/errors",n.LOGS_STATS_USERS_ENDPOINT="/api/v1/logs/stats/users",n.LOGS_STATS_APPLICATIONS_ENDPOINT="/api/v1/logs/stats/applications",Xl}var Yl={},a1;function Wj(){if(a1)return Yl;a1=1,Object.defineProperty(Yl,"__esModule",{value:!0}),Yl.LogsExportApi=void 0;const e=Ft(),t=Ht();class n{constructor(c){this.httpClient=c}async exportLogs(c,i){try{return i?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_EXPORT_ENDPOINT,i.bearerToken,void 0,{params:c},i):i?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_EXPORT_ENDPOINT,i,void 0,{params:c}):await this.httpClient.request("GET",n.LOGS_EXPORT_ENDPOINT,void 0,{params:c})}catch(o){const l=(0,e.extractErrorInfo)(o,{endpoint:void 0,method:"GET"});throw(0,t.logErrorWithContext)(l,"[LogsExportApi]"),o}}}return Yl.LogsExportApi=n,n.LOGS_EXPORT_ENDPOINT="/api/v1/logs/export",Yl}var c1;function Kj(){if(c1)return Gl;c1=1,Object.defineProperty(Gl,"__esModule",{value:!0}),Gl.LogsApi=void 0;const e=Mj(),t=Hj(),n=Fj(),s=Wj();class c{constructor(o){this.httpClient=o,this.create=new e.LogsCreateApi(o),this.list=new t.LogsListApi(o),this.stats=new n.LogsStatsApi(o),this.export=new s.LogsExportApi(o)}async createLog(o,l){return this.create.createLog(o,l)}async createBatchLogs(o,l){return this.create.createBatchLogs(o,l)}async listGeneralLogs(o,l){return this.list.listGeneralLogs(o,l)}async getGeneralLog(o,l,f){return this.list.getGeneralLog(o,l,f)}async listAuditLogs(o,l){return this.list.listAuditLogs(o,l)}async getAuditLog(o,l,f){return this.list.getAuditLog(o,l,f)}async listJobLogs(o,l){return this.list.listJobLogs(o,l)}async getJobLog(o,l){return this.list.getJobLog(o,l)}async getLogStatsSummary(o,l){return this.stats.getLogStatsSummary(o,l)}async getErrorStats(o,l){return this.stats.getErrorStats(o,l)}async getUserActivityStats(o,l){return this.stats.getUserActivityStats(o,l)}async getApplicationStats(o,l){return this.stats.getApplicationStats(o,l)}async exportLogs(o,l){return this.export.exportLogs(o,l)}}return Gl.LogsApi=c,Gl}var l1;function HR(){if(l1)return ql;l1=1,Object.defineProperty(ql,"__esModule",{value:!0}),ql.ApiClient=void 0;const e=$j(),t=Uj(),n=qj(),s=Kj();class c{constructor(o){this.auth=new e.AuthApi(o),this.roles=new t.RolesApi(o),this.permissions=new n.PermissionsApi(o),this.logs=new s.LogsApi(o)}}return ql.ApiClient=c,ql}var Ql={};const it=crypto,vn=e=>e instanceof CryptoKey,FR=async(e,t)=>{const n=`SHA-${e.slice(-3)}`;return new Uint8Array(await it.subtle.digest(n,t))},Xt=new TextEncoder,ts=new TextDecoder,gf=2**32;function Fs(...e){const t=e.reduce((c,{length:i})=>c+i,0),n=new Uint8Array(t);let s=0;for(const c of e)n.set(c,s),s+=c.length;return n}function Bj(e,t){return Fs(Xt.encode(e),new Uint8Array([0]),t)}function sv(e,t,n){if(t<0||t>=gf)throw new RangeError(`value must be >= 0 and <= ${gf-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,t&255],n)}function WR(e){const t=Math.floor(e/gf),n=e%gf,s=new Uint8Array(8);return sv(s,t,0),sv(s,n,4),s}function aw(e){const t=new Uint8Array(4);return sv(t,e),t}function Ny(e){return Fs(aw(e.length),e)}async function zj(e,t,n){const s=Math.ceil((t>>3)/32),c=new Uint8Array(s*32);for(let i=0;i<s;i++){const o=new Uint8Array(4+e.length+n.length);o.set(aw(i+1)),o.set(e,4),o.set(n,4+e.length),c.set(await FR("sha256",o),i*32)}return c.slice(0,t>>3)}const cw=e=>{let t=e;typeof t=="string"&&(t=Xt.encode(t));const n=32768,s=[];for(let c=0;c<t.length;c+=n)s.push(String.fromCharCode.apply(null,t.subarray(c,c+n)));return btoa(s.join(""))},rr=e=>cw(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),KR=e=>{const t=atob(e),n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n},Jt=e=>{let t=e;t instanceof Uint8Array&&(t=ts.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return KR(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class yr extends Error{constructor(t,n){super(t,n),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}yr.code="ERR_JOSE_GENERIC";class Gr extends yr{constructor(t,n,s="unspecified",c="unspecified"){super(t,{cause:{claim:s,reason:c,payload:n}}),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=s,this.reason=c,this.payload=n}}Gr.code="ERR_JWT_CLAIM_VALIDATION_FAILED";class yf extends yr{constructor(t,n,s="unspecified",c="unspecified"){super(t,{cause:{claim:s,reason:c,payload:n}}),this.code="ERR_JWT_EXPIRED",this.claim=s,this.reason=c,this.payload=n}}yf.code="ERR_JWT_EXPIRED";class gu extends yr{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}}gu.code="ERR_JOSE_ALG_NOT_ALLOWED";class vt extends yr{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}}vt.code="ERR_JOSE_NOT_SUPPORTED";class cc extends yr{constructor(t="decryption operation failed",n){super(t,n),this.code="ERR_JWE_DECRYPTION_FAILED"}}cc.code="ERR_JWE_DECRYPTION_FAILED";class Ue extends yr{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}}Ue.code="ERR_JWE_INVALID";class St extends yr{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}}St.code="ERR_JWS_INVALID";class Yr extends yr{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}}Yr.code="ERR_JWT_INVALID";class lw extends yr{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}}lw.code="ERR_JWK_INVALID";class nh extends yr{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}}nh.code="ERR_JWKS_INVALID";class sh extends yr{constructor(t="no applicable key found in the JSON Web Key Set",n){super(t,n),this.code="ERR_JWKS_NO_MATCHING_KEY"}}sh.code="ERR_JWKS_NO_MATCHING_KEY";class uw extends yr{constructor(t="multiple matching keys found in the JSON Web Key Set",n){super(t,n),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}uw.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";class dw extends yr{constructor(t="request timed out",n){super(t,n),this.code="ERR_JWKS_TIMEOUT"}}dw.code="ERR_JWKS_TIMEOUT";class ih extends yr{constructor(t="signature verification failed",n){super(t,n),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}ih.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";const Gj=Object.freeze(Object.defineProperty({__proto__:null,JOSEAlgNotAllowed:gu,JOSEError:yr,JOSENotSupported:vt,JWEDecryptionFailed:cc,JWEInvalid:Ue,JWKInvalid:lw,JWKSInvalid:nh,JWKSMultipleMatchingKeys:uw,JWKSNoMatchingKey:sh,JWKSTimeout:dw,JWSInvalid:St,JWSSignatureVerificationFailed:ih,JWTClaimValidationFailed:Gr,JWTExpired:yf,JWTInvalid:Yr},Symbol.toStringTag,{value:"Module"})),oh=it.getRandomValues.bind(it);function BR(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new vt(`Unsupported JWE Algorithm: ${e}`)}}const Jj=e=>oh(new Uint8Array(BR(e)>>3)),zR=(e,t)=>{if(t.length<<3!==BR(e))throw new Ue("Invalid Initialization Vector length")},vf=(e,t)=>{const n=e.byteLength<<3;if(n!==t)throw new Ue(`Invalid Content Encryption Key length. Expected ${t} bits, got ${n} bits`)},Vj=(e,t)=>{if(!(e instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(e.length!==t.length)throw new TypeError("Input buffers must have the same length");const n=e.length;let s=0,c=-1;for(;++c<n;)s|=e[c]^t[c];return s===0};function mr(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function Ei(e,t){return e.name===t}function Qd(e){return parseInt(e.name.slice(4),10)}function Xj(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function GR(e,t){if(t.length&&!t.some(n=>e.usages.includes(n))){let n="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const s=t.pop();n+=`one of ${t.join(", ")}, or ${s}.`}else t.length===2?n+=`one of ${t[0]} or ${t[1]}.`:n+=`${t[0]}.`;throw new TypeError(n)}}function Yj(e,t,...n){switch(t){case"HS256":case"HS384":case"HS512":{if(!Ei(e.algorithm,"HMAC"))throw mr("HMAC");const s=parseInt(t.slice(2),10);if(Qd(e.algorithm.hash)!==s)throw mr(`SHA-${s}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!Ei(e.algorithm,"RSASSA-PKCS1-v1_5"))throw mr("RSASSA-PKCS1-v1_5");const s=parseInt(t.slice(2),10);if(Qd(e.algorithm.hash)!==s)throw mr(`SHA-${s}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!Ei(e.algorithm,"RSA-PSS"))throw mr("RSA-PSS");const s=parseInt(t.slice(2),10);if(Qd(e.algorithm.hash)!==s)throw mr(`SHA-${s}`,"algorithm.hash");break}case"EdDSA":{if(e.algorithm.name!=="Ed25519"&&e.algorithm.name!=="Ed448")throw mr("Ed25519 or Ed448");break}case"Ed25519":{if(!Ei(e.algorithm,"Ed25519"))throw mr("Ed25519");break}case"ES256":case"ES384":case"ES512":{if(!Ei(e.algorithm,"ECDSA"))throw mr("ECDSA");const s=Xj(t);if(e.algorithm.namedCurve!==s)throw mr(s,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}GR(e,n)}function co(e,t,...n){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!Ei(e.algorithm,"AES-GCM"))throw mr("AES-GCM");const s=parseInt(t.slice(1,4),10);if(e.algorithm.length!==s)throw mr(s,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!Ei(e.algorithm,"AES-KW"))throw mr("AES-KW");const s=parseInt(t.slice(1,4),10);if(e.algorithm.length!==s)throw mr(s,"algorithm.length");break}case"ECDH":{switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw mr("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!Ei(e.algorithm,"PBKDF2"))throw mr("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!Ei(e.algorithm,"RSA-OAEP"))throw mr("RSA-OAEP");const s=parseInt(t.slice(9),10)||1;if(Qd(e.algorithm.hash)!==s)throw mr(`SHA-${s}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}GR(e,n)}function JR(e,t,...n){if(n=n.filter(Boolean),n.length>2){const s=n.pop();e+=`one of type ${n.join(", ")}, or ${s}.`}else n.length===2?e+=`one of type ${n[0]} or ${n[1]}.`:e+=`of type ${n[0]}.`;return t==null?e+=` Received ${t}`:typeof t=="function"&&t.name?e+=` Received function ${t.name}`:typeof t=="object"&&t!=null&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}const Lr=(e,...t)=>JR("Key must be ",e,...t);function VR(e,t,...n){return JR(`Key for the ${e} algorithm must be `,t,...n)}const XR=e=>vn(e)?!0:e?.[Symbol.toStringTag]==="KeyObject",jr=["CryptoKey"];async function Qj(e,t,n,s,c,i){if(!(t instanceof Uint8Array))throw new TypeError(Lr(t,"Uint8Array"));const o=parseInt(e.slice(1,4),10),l=await it.subtle.importKey("raw",t.subarray(o>>3),"AES-CBC",!1,["decrypt"]),f=await it.subtle.importKey("raw",t.subarray(0,o>>3),{hash:`SHA-${o<<1}`,name:"HMAC"},!1,["sign"]),p=Fs(i,s,n,WR(i.length<<3)),h=new Uint8Array((await it.subtle.sign("HMAC",f,p)).slice(0,o>>3));let u;try{u=Vj(c,h)}catch{}if(!u)throw new cc;let m;try{m=new Uint8Array(await it.subtle.decrypt({iv:s,name:"AES-CBC"},l,n))}catch{}if(!m)throw new cc;return m}async function Zj(e,t,n,s,c,i){let o;t instanceof Uint8Array?o=await it.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(co(t,e,"decrypt"),o=t);try{return new Uint8Array(await it.subtle.decrypt({additionalData:i,iv:s,name:"AES-GCM",tagLength:128},o,Fs(n,c)))}catch{throw new cc}}const YR=async(e,t,n,s,c,i)=>{if(!vn(t)&&!(t instanceof Uint8Array))throw new TypeError(Lr(t,...jr,"Uint8Array"));if(!s)throw new Ue("JWE Initialization Vector missing");if(!c)throw new Ue("JWE Authentication Tag missing");switch(zR(e,s),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&vf(t,parseInt(e.slice(-3),10)),Qj(e,t,n,s,c,i);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&vf(t,parseInt(e.slice(1,4),10)),Zj(e,t,n,s,c,i);default:throw new vt("Unsupported JWE Content Encryption Algorithm")}},Au=(...e)=>{const t=e.filter(Boolean);if(t.length===0||t.length===1)return!0;let n;for(const s of t){const c=Object.keys(s);if(!n||n.size===0){n=new Set(c);continue}for(const i of c){if(n.has(i))return!1;n.add(i)}}return!0};function eD(e){return typeof e=="object"&&e!==null}function Qt(e){if(!eD(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}const ah=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function QR(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${t}`)}function ZR(e,t,n){if(vn(e))return co(e,t,n),e;if(e instanceof Uint8Array)return it.subtle.importKey("raw",e,"AES-KW",!0,[n]);throw new TypeError(Lr(e,...jr,"Uint8Array"))}const iv=async(e,t,n)=>{const s=await ZR(t,e,"wrapKey");QR(s,e);const c=await it.subtle.importKey("raw",n,...ah);return new Uint8Array(await it.subtle.wrapKey("raw",c,s,"AES-KW"))},ov=async(e,t,n)=>{const s=await ZR(t,e,"unwrapKey");QR(s,e);const c=await it.subtle.unwrapKey("raw",n,s,"AES-KW",...ah);return new Uint8Array(await it.subtle.exportKey("raw",c))};async function ek(e,t,n,s,c=new Uint8Array(0),i=new Uint8Array(0)){if(!vn(e))throw new TypeError(Lr(e,...jr));if(co(e,"ECDH"),!vn(t))throw new TypeError(Lr(t,...jr));co(t,"ECDH","deriveBits");const o=Fs(Ny(Xt.encode(n)),Ny(c),Ny(i),aw(s));let l;e.algorithm.name==="X25519"?l=256:e.algorithm.name==="X448"?l=448:l=Math.ceil(parseInt(e.algorithm.namedCurve.substr(-3),10)/8)<<3;const f=new Uint8Array(await it.subtle.deriveBits({name:e.algorithm.name,public:e},t,l));return zj(f,s,o)}async function tD(e){if(!vn(e))throw new TypeError(Lr(e,...jr));return it.subtle.generateKey(e.algorithm,!0,["deriveBits"])}function tk(e){if(!vn(e))throw new TypeError(Lr(e,...jr));return["P-256","P-384","P-521"].includes(e.algorithm.namedCurve)||e.algorithm.name==="X25519"||e.algorithm.name==="X448"}function rD(e){if(!(e instanceof Uint8Array)||e.length<8)throw new Ue("PBES2 Salt Input must be 8 or more octets")}function nD(e,t){if(e instanceof Uint8Array)return it.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]);if(vn(e))return co(e,t,"deriveBits","deriveKey"),e;throw new TypeError(Lr(e,...jr,"Uint8Array"))}async function rk(e,t,n,s){rD(e);const c=Bj(t,e),i=parseInt(t.slice(13,16),10),o={hash:`SHA-${t.slice(8,11)}`,iterations:n,name:"PBKDF2",salt:c},l={length:i,name:"AES-KW"},f=await nD(s,t);if(f.usages.includes("deriveBits"))return new Uint8Array(await it.subtle.deriveBits(o,f,i));if(f.usages.includes("deriveKey"))return it.subtle.deriveKey(o,f,l,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}const sD=async(e,t,n,s=2048,c=oh(new Uint8Array(16)))=>{const i=await rk(c,e,s,t);return{encryptedKey:await iv(e.slice(-6),i,n),p2c:s,p2s:rr(c)}},iD=async(e,t,n,s,c)=>{const i=await rk(c,e,s,t);return ov(e.slice(-6),i,n)};function wf(e){switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new vt(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}const ch=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:n}=t.algorithm;if(typeof n!="number"||n<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}},oD=async(e,t,n)=>{if(!vn(t))throw new TypeError(Lr(t,...jr));if(co(t,e,"encrypt","wrapKey"),ch(e,t),t.usages.includes("encrypt"))return new Uint8Array(await it.subtle.encrypt(wf(e),t,n));if(t.usages.includes("wrapKey")){const s=await it.subtle.importKey("raw",n,...ah);return new Uint8Array(await it.subtle.wrapKey("raw",s,t,wf(e)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},aD=async(e,t,n)=>{if(!vn(t))throw new TypeError(Lr(t,...jr));if(co(t,e,"decrypt","unwrapKey"),ch(e,t),t.usages.includes("decrypt"))return new Uint8Array(await it.subtle.decrypt(wf(e),t,n));if(t.usages.includes("unwrapKey")){const s=await it.subtle.unwrapKey("raw",n,t,wf(e),...ah);return new Uint8Array(await it.subtle.exportKey("raw",s))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function gc(e){return Qt(e)&&typeof e.kty=="string"}function cD(e){return e.kty!=="oct"&&typeof e.d=="string"}function lD(e){return e.kty!=="oct"&&typeof e.d>"u"}function uD(e){return gc(e)&&e.kty==="oct"&&typeof e.k=="string"}function dD(e){let t,n;switch(e.kty){case"RSA":{switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},n=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},n=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},n=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new vt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},n=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},n=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},n=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},n=e.d?["deriveBits"]:[];break;default:throw new vt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(e.alg){case"Ed25519":t={name:"Ed25519"},n=e.d?["sign"]:["verify"];break;case"EdDSA":t={name:e.crv},n=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},n=e.d?["deriveBits"]:[];break;default:throw new vt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new vt('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:n}}const nk=async e=>{if(!e.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:t,keyUsages:n}=dD(e),s=[t,e.ext??!1,e.key_ops??n],c={...e};return delete c.alg,delete c.use,it.subtle.importKey("jwk",c,...s)},sk=e=>Jt(e);let Za,ec;const ik=e=>e?.[Symbol.toStringTag]==="KeyObject",Ef=async(e,t,n,s,c=!1)=>{let i=e.get(t);if(i?.[s])return i[s];const o=await nk({...n,alg:s});return c&&Object.freeze(t),i?i[s]=o:e.set(t,{[s]:o}),o},fD=(e,t)=>{if(ik(e)){let n=e.export({format:"jwk"});return delete n.d,delete n.dp,delete n.dq,delete n.p,delete n.q,delete n.qi,n.k?sk(n.k):(ec||(ec=new WeakMap),Ef(ec,e,n,t))}return gc(e)?e.k?Jt(e.k):(ec||(ec=new WeakMap),Ef(ec,e,e,t,!0)):e},hD=(e,t)=>{if(ik(e)){let n=e.export({format:"jwk"});return n.k?sk(n.k):(Za||(Za=new WeakMap),Ef(Za,e,n,t))}return gc(e)?e.k?Jt(e.k):(Za||(Za=new WeakMap),Ef(Za,e,e,t,!0)):e},Sf={normalizePublicKey:fD,normalizePrivateKey:hD};function fw(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new vt(`Unsupported JWE Algorithm: ${e}`)}}const ua=e=>oh(new Uint8Array(fw(e)>>3)),ok=(e,t)=>{const n=(e.match(/.{1,64}/g)||[]).join(`
`);return`-----BEGIN ${t}-----
${n}
-----END ${t}-----`},ak=async(e,t,n)=>{if(!vn(n))throw new TypeError(Lr(n,...jr));if(!n.extractable)throw new TypeError("CryptoKey is not extractable");if(n.type!==e)throw new TypeError(`key is not a ${e} key`);return ok(cw(new Uint8Array(await it.subtle.exportKey(t,n))),`${e.toUpperCase()} KEY`)},pD=e=>ak("public","spki",e),mD=e=>ak("private","pkcs8",e),so=(e,t,n=0)=>{n===0&&(t.unshift(t.length),t.unshift(6));const s=e.indexOf(t[0],n);if(s===-1)return!1;const c=e.subarray(s,s+t.length);return c.length!==t.length?!1:c.every((i,o)=>i===t[o])||so(e,t,s+1)},u1=e=>{switch(!0){case so(e,[42,134,72,206,61,3,1,7]):return"P-256";case so(e,[43,129,4,0,34]):return"P-384";case so(e,[43,129,4,0,35]):return"P-521";case so(e,[43,101,110]):return"X25519";case so(e,[43,101,111]):return"X448";case so(e,[43,101,112]):return"Ed25519";case so(e,[43,101,113]):return"Ed448";default:throw new vt("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},ck=async(e,t,n,s,c)=>{let i,o;const l=new Uint8Array(atob(n.replace(e,"")).split("").map(p=>p.charCodeAt(0))),f=t==="spki";switch(s){case"PS256":case"PS384":case"PS512":i={name:"RSA-PSS",hash:`SHA-${s.slice(-3)}`},o=f?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":i={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${s.slice(-3)}`},o=f?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":i={name:"RSA-OAEP",hash:`SHA-${parseInt(s.slice(-3),10)||1}`},o=f?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":i={name:"ECDSA",namedCurve:"P-256"},o=f?["verify"]:["sign"];break;case"ES384":i={name:"ECDSA",namedCurve:"P-384"},o=f?["verify"]:["sign"];break;case"ES512":i={name:"ECDSA",namedCurve:"P-521"},o=f?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{const p=u1(l);i=p.startsWith("P-")?{name:"ECDH",namedCurve:p}:{name:p},o=f?[]:["deriveBits"];break}case"Ed25519":i={name:"Ed25519"},o=f?["verify"]:["sign"];break;case"EdDSA":i={name:u1(l)},o=f?["verify"]:["sign"];break;default:throw new vt('Invalid or unsupported "alg" (Algorithm) value')}return it.subtle.importKey(t,l,i,c?.extractable??!1,o)},gD=(e,t,n)=>ck(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",e,t,n),lk=(e,t,n)=>ck(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",e,t,n);function d1(e){const t=[];let n=0;for(;n<e.length;){const s=uk(e.subarray(n));t.push(s),n+=s.byteLength}return t}function uk(e){let t=0,n=e[0]&31;if(t++,n===31){for(n=0;e[t]>=128;)n=n*128+e[t]-128,t++;n=n*128+e[t]-128,t++}let s=0;if(e[t]<128)s=e[t],t++;else if(s===128){for(s=0;e[t+s]!==0||e[t+s+1]!==0;){if(s>e.byteLength)throw new TypeError("invalid indefinite form length");s++}const i=t+s+2;return{byteLength:i,contents:e.subarray(t,t+s),raw:e.subarray(0,i)}}else{const i=e[t]&127;t++,s=0;for(let o=0;o<i;o++)s=s*256+e[t],t++}const c=t+s;return{byteLength:c,contents:e.subarray(t,c),raw:e.subarray(0,c)}}function yD(e){const t=d1(d1(uk(e).contents)[0].contents);return cw(t[t[0].raw[0]===160?6:5].raw)}function vD(e){const t=e.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),n=KR(t);return ok(yD(n),"PUBLIC KEY")}const wD=(e,t,n)=>{let s;try{s=vD(e)}catch(c){throw new TypeError("Failed to parse the X.509 certificate",{cause:c})}return lk(s,t,n)};async function ED(e,t,n){if(typeof e!="string"||e.indexOf("-----BEGIN PUBLIC KEY-----")!==0)throw new TypeError('"spki" must be SPKI formatted string');return lk(e,t,n)}async function SD(e,t,n){if(typeof e!="string"||e.indexOf("-----BEGIN CERTIFICATE-----")!==0)throw new TypeError('"x509" must be X.509 formatted string');return wD(e,t,n)}async function bD(e,t,n){if(typeof e!="string"||e.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return gD(e,t,n)}async function Iu(e,t){if(!Qt(e))throw new TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if(typeof e.k!="string"||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return Jt(e.k);case"RSA":if("oth"in e&&e.oth!==void 0)throw new vt('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return nk({...e,alg:t});default:throw new vt('Unsupported "kty" (Key Type) Parameter value')}}const ic=e=>e?.[Symbol.toStringTag],av=(e,t,n)=>{if(t.use!==void 0&&t.use!=="sig")throw new TypeError("Invalid key for this operation, when present its use must be sig");if(t.key_ops!==void 0&&t.key_ops.includes?.(n)!==!0)throw new TypeError(`Invalid key for this operation, when present its key_ops must include ${n}`);if(t.alg!==void 0&&t.alg!==e)throw new TypeError(`Invalid key for this operation, when present its alg must be ${e}`);return!0},TD=(e,t,n,s)=>{if(!(t instanceof Uint8Array)){if(s&&gc(t)){if(uD(t)&&av(e,t,n))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!XR(t))throw new TypeError(VR(e,t,...jr,"Uint8Array",s?"JSON Web Key":null));if(t.type!=="secret")throw new TypeError(`${ic(t)} instances for symmetric algorithms must be of type "secret"`)}},CD=(e,t,n,s)=>{if(s&&gc(t))switch(n){case"sign":if(cD(t)&&av(e,t,n))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"verify":if(lD(t)&&av(e,t,n))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!XR(t))throw new TypeError(VR(e,t,...jr,s?"JSON Web Key":null));if(t.type==="secret")throw new TypeError(`${ic(t)} instances for asymmetric algorithms must not be of type "secret"`);if(n==="sign"&&t.type==="public")throw new TypeError(`${ic(t)} instances for asymmetric algorithm signing must be of type "private"`);if(n==="decrypt"&&t.type==="public")throw new TypeError(`${ic(t)} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&n==="verify"&&t.type==="private")throw new TypeError(`${ic(t)} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&n==="encrypt"&&t.type==="private")throw new TypeError(`${ic(t)} instances for asymmetric algorithm encryption must be of type "public"`)};function dk(e,t,n,s){t.startsWith("HS")||t==="dir"||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?TD(t,n,s,e):CD(t,n,s,e)}const fk=dk.bind(void 0,!1),cv=dk.bind(void 0,!0);async function _D(e,t,n,s,c){if(!(n instanceof Uint8Array))throw new TypeError(Lr(n,"Uint8Array"));const i=parseInt(e.slice(1,4),10),o=await it.subtle.importKey("raw",n.subarray(i>>3),"AES-CBC",!1,["encrypt"]),l=await it.subtle.importKey("raw",n.subarray(0,i>>3),{hash:`SHA-${i<<1}`,name:"HMAC"},!1,["sign"]),f=new Uint8Array(await it.subtle.encrypt({iv:s,name:"AES-CBC"},o,t)),p=Fs(c,s,f,WR(c.length<<3)),h=new Uint8Array((await it.subtle.sign("HMAC",l,p)).slice(0,i>>3));return{ciphertext:f,tag:h,iv:s}}async function xD(e,t,n,s,c){let i;n instanceof Uint8Array?i=await it.subtle.importKey("raw",n,"AES-GCM",!1,["encrypt"]):(co(n,e,"encrypt"),i=n);const o=new Uint8Array(await it.subtle.encrypt({additionalData:c,iv:s,name:"AES-GCM",tagLength:128},i,t)),l=o.slice(-16);return{ciphertext:o.slice(0,-16),tag:l,iv:s}}const hk=async(e,t,n,s,c)=>{if(!vn(n)&&!(n instanceof Uint8Array))throw new TypeError(Lr(n,...jr,"Uint8Array"));switch(s?zR(e,s):s=Jj(e),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return n instanceof Uint8Array&&vf(n,parseInt(e.slice(-3),10)),_D(e,t,n,s,c);case"A128GCM":case"A192GCM":case"A256GCM":return n instanceof Uint8Array&&vf(n,parseInt(e.slice(1,4),10)),xD(e,t,n,s,c);default:throw new vt("Unsupported JWE Content Encryption Algorithm")}};async function RD(e,t,n,s){const c=e.slice(0,7),i=await hk(c,n,t,s,new Uint8Array(0));return{encryptedKey:i.ciphertext,iv:rr(i.iv),tag:rr(i.tag)}}async function kD(e,t,n,s,c){const i=e.slice(0,7);return YR(i,t,n,s,c,new Uint8Array(0))}async function AD(e,t,n,s,c){switch(fk(e,t,"decrypt"),t=await Sf.normalizePrivateKey?.(t,e)||t,e){case"dir":{if(n!==void 0)throw new Ue("Encountered unexpected JWE Encrypted Key");return t}case"ECDH-ES":if(n!==void 0)throw new Ue("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!Qt(s.epk))throw new Ue('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!tk(t))throw new vt("ECDH with the provided key is not allowed or not supported by your javascript runtime");const i=await Iu(s.epk,e);let o,l;if(s.apu!==void 0){if(typeof s.apu!="string")throw new Ue('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{o=Jt(s.apu)}catch{throw new Ue("Failed to base64url decode the apu")}}if(s.apv!==void 0){if(typeof s.apv!="string")throw new Ue('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{l=Jt(s.apv)}catch{throw new Ue("Failed to base64url decode the apv")}}const f=await ek(i,t,e==="ECDH-ES"?s.enc:e,e==="ECDH-ES"?fw(s.enc):parseInt(e.slice(-5,-2),10),o,l);if(e==="ECDH-ES")return f;if(n===void 0)throw new Ue("JWE Encrypted Key missing");return ov(e.slice(-6),f,n)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(n===void 0)throw new Ue("JWE Encrypted Key missing");return aD(e,t,n)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(n===void 0)throw new Ue("JWE Encrypted Key missing");if(typeof s.p2c!="number")throw new Ue('JOSE Header "p2c" (PBES2 Count) missing or invalid');const i=c?.maxPBES2Count||1e4;if(s.p2c>i)throw new Ue('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof s.p2s!="string")throw new Ue('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let o;try{o=Jt(s.p2s)}catch{throw new Ue("Failed to base64url decode the p2s")}return iD(e,t,n,s.p2c,o)}case"A128KW":case"A192KW":case"A256KW":{if(n===void 0)throw new Ue("JWE Encrypted Key missing");return ov(e,t,n)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(n===void 0)throw new Ue("JWE Encrypted Key missing");if(typeof s.iv!="string")throw new Ue('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof s.tag!="string")throw new Ue('JOSE Header "tag" (Authentication Tag) missing or invalid');let i;try{i=Jt(s.iv)}catch{throw new Ue("Failed to base64url decode the iv")}let o;try{o=Jt(s.tag)}catch{throw new Ue("Failed to base64url decode the tag")}return kD(e,t,n,i,o)}default:throw new vt('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function Pu(e,t,n,s,c){if(c.crit!==void 0&&s?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!s||s.crit===void 0)return new Set;if(!Array.isArray(s.crit)||s.crit.length===0||s.crit.some(o=>typeof o!="string"||o.length===0))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let i;n!==void 0?i=new Map([...Object.entries(n),...t.entries()]):i=t;for(const o of s.crit){if(!i.has(o))throw new vt(`Extension Header Parameter "${o}" is not recognized`);if(c[o]===void 0)throw new e(`Extension Header Parameter "${o}" is missing`);if(i.get(o)&&s[o]===void 0)throw new e(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(s.crit)}const lv=(e,t)=>{if(t!==void 0&&(!Array.isArray(t)||t.some(n=>typeof n!="string")))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};async function hw(e,t,n){if(!Qt(e))throw new Ue("Flattened JWE must be an object");if(e.protected===void 0&&e.header===void 0&&e.unprotected===void 0)throw new Ue("JOSE Header missing");if(e.iv!==void 0&&typeof e.iv!="string")throw new Ue("JWE Initialization Vector incorrect type");if(typeof e.ciphertext!="string")throw new Ue("JWE Ciphertext missing or incorrect type");if(e.tag!==void 0&&typeof e.tag!="string")throw new Ue("JWE Authentication Tag incorrect type");if(e.protected!==void 0&&typeof e.protected!="string")throw new Ue("JWE Protected Header incorrect type");if(e.encrypted_key!==void 0&&typeof e.encrypted_key!="string")throw new Ue("JWE Encrypted Key incorrect type");if(e.aad!==void 0&&typeof e.aad!="string")throw new Ue("JWE AAD incorrect type");if(e.header!==void 0&&!Qt(e.header))throw new Ue("JWE Shared Unprotected Header incorrect type");if(e.unprotected!==void 0&&!Qt(e.unprotected))throw new Ue("JWE Per-Recipient Unprotected Header incorrect type");let s;if(e.protected)try{const I=Jt(e.protected);s=JSON.parse(ts.decode(I))}catch{throw new Ue("JWE Protected Header is invalid")}if(!Au(s,e.header,e.unprotected))throw new Ue("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const c={...s,...e.header,...e.unprotected};if(Pu(Ue,new Map,n?.crit,s,c),c.zip!==void 0)throw new vt('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:i,enc:o}=c;if(typeof i!="string"||!i)throw new Ue("missing JWE Algorithm (alg) in JWE Header");if(typeof o!="string"||!o)throw new Ue("missing JWE Encryption Algorithm (enc) in JWE Header");const l=n&&lv("keyManagementAlgorithms",n.keyManagementAlgorithms),f=n&&lv("contentEncryptionAlgorithms",n.contentEncryptionAlgorithms);if(l&&!l.has(i)||!l&&i.startsWith("PBES2"))throw new gu('"alg" (Algorithm) Header Parameter value not allowed');if(f&&!f.has(o))throw new gu('"enc" (Encryption Algorithm) Header Parameter value not allowed');let p;if(e.encrypted_key!==void 0)try{p=Jt(e.encrypted_key)}catch{throw new Ue("Failed to base64url decode the encrypted_key")}let h=!1;typeof t=="function"&&(t=await t(s,e),h=!0);let u;try{u=await AD(i,t,p,c,n)}catch(I){if(I instanceof TypeError||I instanceof Ue||I instanceof vt)throw I;u=ua(o)}let m,g;if(e.iv!==void 0)try{m=Jt(e.iv)}catch{throw new Ue("Failed to base64url decode the iv")}if(e.tag!==void 0)try{g=Jt(e.tag)}catch{throw new Ue("Failed to base64url decode the tag")}const v=Xt.encode(e.protected??"");let S;e.aad!==void 0?S=Fs(v,Xt.encode("."),Xt.encode(e.aad)):S=v;let w;try{w=Jt(e.ciphertext)}catch{throw new Ue("Failed to base64url decode the ciphertext")}const N={plaintext:await YR(o,u,w,m,g,S)};if(e.protected!==void 0&&(N.protectedHeader=s),e.aad!==void 0)try{N.additionalAuthenticatedData=Jt(e.aad)}catch{throw new Ue("Failed to base64url decode the aad")}return e.unprotected!==void 0&&(N.sharedUnprotectedHeader=e.unprotected),e.header!==void 0&&(N.unprotectedHeader=e.header),h?{...N,key:t}:N}async function pk(e,t,n){if(e instanceof Uint8Array&&(e=ts.decode(e)),typeof e!="string")throw new Ue("Compact JWE must be a string or Uint8Array");const{0:s,1:c,2:i,3:o,4:l,length:f}=e.split(".");if(f!==5)throw new Ue("Invalid Compact JWE");const p=await hw({ciphertext:o,iv:i||void 0,protected:s,tag:l||void 0,encrypted_key:c||void 0},t,n),h={plaintext:p.plaintext,protectedHeader:p.protectedHeader};return typeof t=="function"?{...h,key:p.key}:h}async function ID(e,t,n){if(!Qt(e))throw new Ue("General JWE must be an object");if(!Array.isArray(e.recipients)||!e.recipients.every(Qt))throw new Ue("JWE Recipients missing or incorrect type");if(!e.recipients.length)throw new Ue("JWE Recipients has no members");for(const s of e.recipients)try{return await hw({aad:e.aad,ciphertext:e.ciphertext,encrypted_key:s.encrypted_key,header:s.header,iv:e.iv,protected:e.protected,tag:e.tag,unprotected:e.unprotected},t,n)}catch{}throw new cc}const mk=Symbol(),PD=async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:rr(e)};if(!vn(e))throw new TypeError(Lr(e,...jr,"Uint8Array"));if(!e.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:t,key_ops:n,alg:s,use:c,...i}=await it.subtle.exportKey("jwk",e);return i};async function OD(e){return pD(e)}async function ND(e){return mD(e)}async function gk(e){return PD(e)}async function yk(e,t,n,s,c={}){let i,o,l;switch(fk(e,n,"encrypt"),n=await Sf.normalizePublicKey?.(n,e)||n,e){case"dir":{l=n;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!tk(n))throw new vt("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:f,apv:p}=c;let{epk:h}=c;h||(h=(await tD(n)).privateKey);const{x:u,y:m,crv:g,kty:v}=await gk(h),S=await ek(n,h,e==="ECDH-ES"?t:e,e==="ECDH-ES"?fw(t):parseInt(e.slice(-5,-2),10),f,p);if(o={epk:{x:u,crv:g,kty:v}},v==="EC"&&(o.epk.y=m),f&&(o.apu=rr(f)),p&&(o.apv=rr(p)),e==="ECDH-ES"){l=S;break}l=s||ua(t);const w=e.slice(-6);i=await iv(w,S,l);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{l=s||ua(t),i=await oD(e,n,l);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{l=s||ua(t);const{p2c:f,p2s:p}=c;({encryptedKey:i,...o}=await sD(e,n,l,f,p));break}case"A128KW":case"A192KW":case"A256KW":{l=s||ua(t),i=await iv(e,n,l);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{l=s||ua(t);const{iv:f}=c;({encryptedKey:i,...o}=await RD(e,n,l,f));break}default:throw new vt('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:l,encryptedKey:i,parameters:o}}class bf{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=t}setKeyManagementParameters(t){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}setContentEncryptionKey(t){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=t,this}async encrypt(t,n){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new Ue("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!Au(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new Ue("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const s={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(Pu(Ue,new Map,n?.crit,this._protectedHeader,s),s.zip!==void 0)throw new vt('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:c,enc:i}=s;if(typeof c!="string"||!c)throw new Ue('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof i!="string"||!i)throw new Ue('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let o;if(this._cek&&(c==="dir"||c==="ECDH-ES"))throw new TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${c}`);let l;{let S;({cek:l,encryptedKey:o,parameters:S}=await yk(c,i,t,this._cek,this._keyManagementParameters)),S&&(n&&mk in n?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...S}:this.setUnprotectedHeader(S):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...S}:this.setProtectedHeader(S))}let f,p,h;this._protectedHeader?p=Xt.encode(rr(JSON.stringify(this._protectedHeader))):p=Xt.encode(""),this._aad?(h=rr(this._aad),f=Fs(p,Xt.encode("."),Xt.encode(h))):f=p;const{ciphertext:u,tag:m,iv:g}=await hk(i,this._plaintext,l,this._iv,f),v={ciphertext:rr(u)};return g&&(v.iv=rr(g)),m&&(v.tag=rr(m)),o&&(v.encrypted_key=rr(o)),h&&(v.aad=h),this._protectedHeader&&(v.protected=ts.decode(p)),this._sharedUnprotectedHeader&&(v.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(v.header=this._unprotectedHeader),v}}class LD{constructor(t,n,s){this.parent=t,this.key=n,this.options=s}setUnprotectedHeader(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addRecipient(...t){return this.parent.addRecipient(...t)}encrypt(...t){return this.parent.encrypt(...t)}done(){return this.parent}}class jD{constructor(t){this._recipients=[],this._plaintext=t}addRecipient(t,n){const s=new LD(this,t,{crit:n?.crit});return this._recipients.push(s),s}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}async encrypt(){if(!this._recipients.length)throw new Ue("at least one recipient must be added");if(this._recipients.length===1){const[c]=this._recipients,i=await new bf(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(c.unprotectedHeader).encrypt(c.key,{...c.options}),o={ciphertext:i.ciphertext,iv:i.iv,recipients:[{}],tag:i.tag};return i.aad&&(o.aad=i.aad),i.protected&&(o.protected=i.protected),i.unprotected&&(o.unprotected=i.unprotected),i.encrypted_key&&(o.recipients[0].encrypted_key=i.encrypted_key),i.header&&(o.recipients[0].header=i.header),o}let t;for(let c=0;c<this._recipients.length;c++){const i=this._recipients[c];if(!Au(this._protectedHeader,this._unprotectedHeader,i.unprotectedHeader))throw new Ue("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const o={...this._protectedHeader,...this._unprotectedHeader,...i.unprotectedHeader},{alg:l}=o;if(typeof l!="string"||!l)throw new Ue('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(l==="dir"||l==="ECDH-ES")throw new Ue('"dir" and "ECDH-ES" alg may only be used with a single recipient');if(typeof o.enc!="string"||!o.enc)throw new Ue('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(!t)t=o.enc;else if(t!==o.enc)throw new Ue('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');if(Pu(Ue,new Map,i.options.crit,this._protectedHeader,o),o.zip!==void 0)throw new vt('JWE "zip" (Compression Algorithm) Header Parameter is not supported.')}const n=ua(t),s={ciphertext:"",iv:"",recipients:[],tag:""};for(let c=0;c<this._recipients.length;c++){const i=this._recipients[c],o={};s.recipients.push(o);const f={...this._protectedHeader,...this._unprotectedHeader,...i.unprotectedHeader}.alg.startsWith("PBES2")?2048+c:void 0;if(c===0){const u=await new bf(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(n).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(i.unprotectedHeader).setKeyManagementParameters({p2c:f}).encrypt(i.key,{...i.options,[mk]:!0});s.ciphertext=u.ciphertext,s.iv=u.iv,s.tag=u.tag,u.aad&&(s.aad=u.aad),u.protected&&(s.protected=u.protected),u.unprotected&&(s.unprotected=u.unprotected),o.encrypted_key=u.encrypted_key,u.header&&(o.header=u.header);continue}const{encryptedKey:p,parameters:h}=await yk(i.unprotectedHeader?.alg||this._protectedHeader?.alg||this._unprotectedHeader?.alg,t,i.key,n,{p2c:f});o.encrypted_key=rr(p),(i.unprotectedHeader||h)&&(o.header={...i.unprotectedHeader,...h})}return s}}function vk(e,t){const n=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:n,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:n,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:n,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:n,name:"ECDSA",namedCurve:t.namedCurve};case"Ed25519":return{name:"Ed25519"};case"EdDSA":return{name:t.name};default:throw new vt(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}async function wk(e,t,n){if(n==="sign"&&(t=await Sf.normalizePrivateKey(t,e)),n==="verify"&&(t=await Sf.normalizePublicKey(t,e)),vn(t))return Yj(t,e,n),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(Lr(t,...jr));return it.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[n])}throw new TypeError(Lr(t,...jr,"Uint8Array","JSON Web Key"))}const DD=async(e,t,n,s)=>{const c=await wk(e,t,"verify");ch(e,c);const i=vk(e,c.algorithm);try{return await it.subtle.verify(i,c,n,s)}catch{return!1}};async function pw(e,t,n){if(!Qt(e))throw new St("Flattened JWS must be an object");if(e.protected===void 0&&e.header===void 0)throw new St('Flattened JWS must have either of the "protected" or "header" members');if(e.protected!==void 0&&typeof e.protected!="string")throw new St("JWS Protected Header incorrect type");if(e.payload===void 0)throw new St("JWS Payload missing");if(typeof e.signature!="string")throw new St("JWS Signature missing or incorrect type");if(e.header!==void 0&&!Qt(e.header))throw new St("JWS Unprotected Header incorrect type");let s={};if(e.protected)try{const S=Jt(e.protected);s=JSON.parse(ts.decode(S))}catch{throw new St("JWS Protected Header is invalid")}if(!Au(s,e.header))throw new St("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const c={...s,...e.header},i=Pu(St,new Map([["b64",!0]]),n?.crit,s,c);let o=!0;if(i.has("b64")&&(o=s.b64,typeof o!="boolean"))throw new St('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:l}=c;if(typeof l!="string"||!l)throw new St('JWS "alg" (Algorithm) Header Parameter missing or invalid');const f=n&&lv("algorithms",n.algorithms);if(f&&!f.has(l))throw new gu('"alg" (Algorithm) Header Parameter value not allowed');if(o){if(typeof e.payload!="string")throw new St("JWS Payload must be a string")}else if(typeof e.payload!="string"&&!(e.payload instanceof Uint8Array))throw new St("JWS Payload must be a string or an Uint8Array instance");let p=!1;typeof t=="function"?(t=await t(s,e),p=!0,cv(l,t,"verify"),gc(t)&&(t=await Iu(t,l))):cv(l,t,"verify");const h=Fs(Xt.encode(e.protected??""),Xt.encode("."),typeof e.payload=="string"?Xt.encode(e.payload):e.payload);let u;try{u=Jt(e.signature)}catch{throw new St("Failed to base64url decode the signature")}if(!await DD(l,t,u,h))throw new ih;let g;if(o)try{g=Jt(e.payload)}catch{throw new St("Failed to base64url decode the payload")}else typeof e.payload=="string"?g=Xt.encode(e.payload):g=e.payload;const v={payload:g};return e.protected!==void 0&&(v.protectedHeader=s),e.header!==void 0&&(v.unprotectedHeader=e.header),p?{...v,key:t}:v}async function Ek(e,t,n){if(e instanceof Uint8Array&&(e=ts.decode(e)),typeof e!="string")throw new St("Compact JWS must be a string or Uint8Array");const{0:s,1:c,2:i,length:o}=e.split(".");if(o!==3)throw new St("Invalid Compact JWS");const l=await pw({payload:c,protected:s,signature:i},t,n),f={payload:l.payload,protectedHeader:l.protectedHeader};return typeof t=="function"?{...f,key:l.key}:f}async function $D(e,t,n){if(!Qt(e))throw new St("General JWS must be an object");if(!Array.isArray(e.signatures)||!e.signatures.every(Qt))throw new St("JWS Signatures missing or incorrect type");for(const s of e.signatures)try{return await pw({header:s.header,payload:e.payload,protected:s.protected,signature:s.signature},t,n)}catch{}throw new ih}const io=e=>Math.floor(e.getTime()/1e3),Sk=60,bk=Sk*60,mw=bk*24,UD=mw*7,qD=mw*365.25,MD=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,uu=e=>{const t=MD.exec(e);if(!t||t[4]&&t[1])throw new TypeError("Invalid time period format");const n=parseFloat(t[2]),s=t[3].toLowerCase();let c;switch(s){case"sec":case"secs":case"second":case"seconds":case"s":c=Math.round(n);break;case"minute":case"minutes":case"min":case"mins":case"m":c=Math.round(n*Sk);break;case"hour":case"hours":case"hr":case"hrs":case"h":c=Math.round(n*bk);break;case"day":case"days":case"d":c=Math.round(n*mw);break;case"week":case"weeks":case"w":c=Math.round(n*UD);break;default:c=Math.round(n*qD);break}return t[1]==="-"||t[4]==="ago"?-c:c},f1=e=>e.toLowerCase().replace(/^application\//,""),HD=(e,t)=>typeof e=="string"?t.includes(e):Array.isArray(e)?t.some(Set.prototype.has.bind(new Set(e))):!1,gw=(e,t,n={})=>{let s;try{s=JSON.parse(ts.decode(t))}catch{}if(!Qt(s))throw new Yr("JWT Claims Set must be a top-level JSON object");const{typ:c}=n;if(c&&(typeof e.typ!="string"||f1(e.typ)!==f1(c)))throw new Gr('unexpected "typ" JWT header value',s,"typ","check_failed");const{requiredClaims:i=[],issuer:o,subject:l,audience:f,maxTokenAge:p}=n,h=[...i];p!==void 0&&h.push("iat"),f!==void 0&&h.push("aud"),l!==void 0&&h.push("sub"),o!==void 0&&h.push("iss");for(const v of new Set(h.reverse()))if(!(v in s))throw new Gr(`missing required "${v}" claim`,s,v,"missing");if(o&&!(Array.isArray(o)?o:[o]).includes(s.iss))throw new Gr('unexpected "iss" claim value',s,"iss","check_failed");if(l&&s.sub!==l)throw new Gr('unexpected "sub" claim value',s,"sub","check_failed");if(f&&!HD(s.aud,typeof f=="string"?[f]:f))throw new Gr('unexpected "aud" claim value',s,"aud","check_failed");let u;switch(typeof n.clockTolerance){case"string":u=uu(n.clockTolerance);break;case"number":u=n.clockTolerance;break;case"undefined":u=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:m}=n,g=io(m||new Date);if((s.iat!==void 0||p)&&typeof s.iat!="number")throw new Gr('"iat" claim must be a number',s,"iat","invalid");if(s.nbf!==void 0){if(typeof s.nbf!="number")throw new Gr('"nbf" claim must be a number',s,"nbf","invalid");if(s.nbf>g+u)throw new Gr('"nbf" claim timestamp check failed',s,"nbf","check_failed")}if(s.exp!==void 0){if(typeof s.exp!="number")throw new Gr('"exp" claim must be a number',s,"exp","invalid");if(s.exp<=g-u)throw new yf('"exp" claim timestamp check failed',s,"exp","check_failed")}if(p){const v=g-s.iat,S=typeof p=="number"?p:uu(p);if(v-u>S)throw new yf('"iat" claim timestamp check failed (too far in the past)',s,"iat","check_failed");if(v<0-u)throw new Gr('"iat" claim timestamp check failed (it should be in the past)',s,"iat","check_failed")}return s};async function FD(e,t,n){const s=await Ek(e,t,n);if(s.protectedHeader.crit?.includes("b64")&&s.protectedHeader.b64===!1)throw new Yr("JWTs MUST NOT use unencoded payload");const i={payload:gw(s.protectedHeader,s.payload,n),protectedHeader:s.protectedHeader};return typeof t=="function"?{...i,key:s.key}:i}async function WD(e,t,n){const s=await pk(e,t,n),c=gw(s.protectedHeader,s.plaintext,n),{protectedHeader:i}=s;if(i.iss!==void 0&&i.iss!==c.iss)throw new Gr('replicated "iss" claim header parameter mismatch',c,"iss","mismatch");if(i.sub!==void 0&&i.sub!==c.sub)throw new Gr('replicated "sub" claim header parameter mismatch',c,"sub","mismatch");if(i.aud!==void 0&&JSON.stringify(i.aud)!==JSON.stringify(c.aud))throw new Gr('replicated "aud" claim header parameter mismatch',c,"aud","mismatch");const o={payload:c,protectedHeader:i};return typeof t=="function"?{...o,key:s.key}:o}class Tk{constructor(t){this._flattened=new bf(t)}setContentEncryptionKey(t){return this._flattened.setContentEncryptionKey(t),this}setInitializationVector(t){return this._flattened.setInitializationVector(t),this}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}setKeyManagementParameters(t){return this._flattened.setKeyManagementParameters(t),this}async encrypt(t,n){const s=await this._flattened.encrypt(t,n);return[s.protected,s.encrypted_key,s.iv,s.ciphertext,s.tag].join(".")}}const KD=async(e,t,n)=>{const s=await wk(e,t,"sign");ch(e,s);const c=await it.subtle.sign(vk(e,s.algorithm),s,n);return new Uint8Array(c)};class yw{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=t}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}async sign(t,n){if(!this._protectedHeader&&!this._unprotectedHeader)throw new St("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!Au(this._protectedHeader,this._unprotectedHeader))throw new St("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const s={...this._protectedHeader,...this._unprotectedHeader},c=Pu(St,new Map([["b64",!0]]),n?.crit,this._protectedHeader,s);let i=!0;if(c.has("b64")&&(i=this._protectedHeader.b64,typeof i!="boolean"))throw new St('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:o}=s;if(typeof o!="string"||!o)throw new St('JWS "alg" (Algorithm) Header Parameter missing or invalid');cv(o,t,"sign");let l=this._payload;i&&(l=Xt.encode(rr(l)));let f;this._protectedHeader?f=Xt.encode(rr(JSON.stringify(this._protectedHeader))):f=Xt.encode("");const p=Fs(f,Xt.encode("."),l),h=await KD(o,t,p),u={signature:rr(h),payload:""};return i&&(u.payload=ts.decode(l)),this._unprotectedHeader&&(u.header=this._unprotectedHeader),this._protectedHeader&&(u.protected=ts.decode(f)),u}}class Ck{constructor(t){this._flattened=new yw(t)}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}async sign(t,n){const s=await this._flattened.sign(t,n);if(s.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${s.protected}.${s.payload}.${s.signature}`}}class BD{constructor(t,n,s){this.parent=t,this.key=n,this.options=s}setProtectedHeader(t){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=t,this}setUnprotectedHeader(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addSignature(...t){return this.parent.addSignature(...t)}sign(...t){return this.parent.sign(...t)}done(){return this.parent}}class zD{constructor(t){this._signatures=[],this._payload=t}addSignature(t,n){const s=new BD(this,t,n);return this._signatures.push(s),s}async sign(){if(!this._signatures.length)throw new St("at least one signature must be added");const t={signatures:[],payload:""};for(let n=0;n<this._signatures.length;n++){const s=this._signatures[n],c=new yw(this._payload);c.setProtectedHeader(s.protectedHeader),c.setUnprotectedHeader(s.unprotectedHeader);const{payload:i,...o}=await c.sign(s.key,s.options);if(n===0)t.payload=i;else if(t.payload!==i)throw new St("inconsistent use of JWS Unencoded Payload (RFC7797)");t.signatures.push(o)}return t}}function sa(e,t){if(!Number.isFinite(t))throw new TypeError(`Invalid ${e} input`);return t}class vw{constructor(t={}){if(!Qt(t))throw new TypeError("JWT Claims Set MUST be an object");this._payload=t}setIssuer(t){return this._payload={...this._payload,iss:t},this}setSubject(t){return this._payload={...this._payload,sub:t},this}setAudience(t){return this._payload={...this._payload,aud:t},this}setJti(t){return this._payload={...this._payload,jti:t},this}setNotBefore(t){return typeof t=="number"?this._payload={...this._payload,nbf:sa("setNotBefore",t)}:t instanceof Date?this._payload={...this._payload,nbf:sa("setNotBefore",io(t))}:this._payload={...this._payload,nbf:io(new Date)+uu(t)},this}setExpirationTime(t){return typeof t=="number"?this._payload={...this._payload,exp:sa("setExpirationTime",t)}:t instanceof Date?this._payload={...this._payload,exp:sa("setExpirationTime",io(t))}:this._payload={...this._payload,exp:io(new Date)+uu(t)},this}setIssuedAt(t){return typeof t>"u"?this._payload={...this._payload,iat:io(new Date)}:t instanceof Date?this._payload={...this._payload,iat:sa("setIssuedAt",io(t))}:typeof t=="string"?this._payload={...this._payload,iat:sa("setIssuedAt",io(new Date)+uu(t))}:this._payload={...this._payload,iat:sa("setIssuedAt",t)},this}}class GD extends vw{setProtectedHeader(t){return this._protectedHeader=t,this}async sign(t,n){const s=new Ck(Xt.encode(JSON.stringify(this._payload)));if(s.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new Yr("JWTs MUST NOT use unencoded payload");return s.sign(t,n)}}class JD extends vw{setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setKeyManagementParameters(t){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setContentEncryptionKey(t){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=t,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(t,n){const s=new Tk(Xt.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),s.setProtectedHeader(this._protectedHeader),this._iv&&s.setInitializationVector(this._iv),this._cek&&s.setContentEncryptionKey(this._cek),this._keyManagementParameters&&s.setKeyManagementParameters(this._keyManagementParameters),s.encrypt(t,n)}}const Zi=(e,t)=>{if(typeof e!="string"||!e)throw new lw(`${t} missing or invalid`)};async function _k(e,t){if(!Qt(e))throw new TypeError("JWK must be an object");if(t??(t="sha256"),t!=="sha256"&&t!=="sha384"&&t!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let n;switch(e.kty){case"EC":Zi(e.crv,'"crv" (Curve) Parameter'),Zi(e.x,'"x" (X Coordinate) Parameter'),Zi(e.y,'"y" (Y Coordinate) Parameter'),n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":Zi(e.crv,'"crv" (Subtype of Key Pair) Parameter'),Zi(e.x,'"x" (Public Key) Parameter'),n={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":Zi(e.e,'"e" (Exponent) Parameter'),Zi(e.n,'"n" (Modulus) Parameter'),n={e:e.e,kty:e.kty,n:e.n};break;case"oct":Zi(e.k,'"k" (Key Value) Parameter'),n={k:e.k,kty:e.kty};break;default:throw new vt('"kty" (Key Type) Parameter missing or unsupported')}const s=Xt.encode(JSON.stringify(n));return rr(await FR(t,s))}async function VD(e,t){t??(t="sha256");const n=await _k(e,t);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${t.slice(-3)}:${n}`}async function XD(e,t){const n={...e,...t?.header};if(!Qt(n.jwk))throw new St('"jwk" (JSON Web Key) Header Parameter must be a JSON object');const s=await Iu({...n.jwk,ext:!0},n.alg);if(s instanceof Uint8Array||s.type!=="public")throw new St('"jwk" (JSON Web Key) Header Parameter must be a public key');return s}function YD(e){switch(typeof e=="string"&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new vt('Unsupported "alg" value for a JSON Web Key Set')}}function QD(e){return e&&typeof e=="object"&&Array.isArray(e.keys)&&e.keys.every(ZD)}function ZD(e){return Qt(e)}function xk(e){return typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}class e${constructor(t){if(this._cached=new WeakMap,!QD(t))throw new nh("JSON Web Key Set malformed");this._jwks=xk(t)}async getKey(t,n){const{alg:s,kid:c}={...t,...n?.header},i=YD(s),o=this._jwks.keys.filter(p=>{let h=i===p.kty;if(h&&typeof c=="string"&&(h=c===p.kid),h&&typeof p.alg=="string"&&(h=s===p.alg),h&&typeof p.use=="string"&&(h=p.use==="sig"),h&&Array.isArray(p.key_ops)&&(h=p.key_ops.includes("verify")),h)switch(s){case"ES256":h=p.crv==="P-256";break;case"ES256K":h=p.crv==="secp256k1";break;case"ES384":h=p.crv==="P-384";break;case"ES512":h=p.crv==="P-521";break;case"Ed25519":h=p.crv==="Ed25519";break;case"EdDSA":h=p.crv==="Ed25519"||p.crv==="Ed448";break}return h}),{0:l,length:f}=o;if(f===0)throw new sh;if(f!==1){const p=new uw,{_cached:h}=this;throw p[Symbol.asyncIterator]=async function*(){for(const u of o)try{yield await h1(h,u,s)}catch{}},p}return h1(this._cached,l,s)}}async function h1(e,t,n){const s=e.get(t)||e.set(t,{}).get(t);if(s[n]===void 0){const c=await Iu({...t,ext:!0},n);if(c instanceof Uint8Array||c.type!=="public")throw new nh("JSON Web Key Set members must be public keys");s[n]=c}return s[n]}function uv(e){const t=new e$(e),n=async(s,c)=>t.getKey(s,c);return Object.defineProperties(n,{jwks:{value:()=>xk(t._jwks),enumerable:!0,configurable:!1,writable:!1}}),n}const t$=async(e,t,n)=>{let s,c,i=!1;typeof AbortController=="function"&&(s=new AbortController,c=setTimeout(()=>{i=!0,s.abort()},t));const o=await fetch(e.href,{signal:s?s.signal:void 0,redirect:"manual",headers:n.headers}).catch(l=>{throw i?new dw:l});if(c!==void 0&&clearTimeout(c),o.status!==200)throw new yr("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await o.json()}catch{throw new yr("Failed to parse the JSON Web Key Set HTTP response as JSON")}};function r$(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}let dv;(typeof navigator>"u"||!navigator.userAgent?.startsWith?.("Mozilla/5.0 "))&&(dv="jose/v5.10.0");const du=Symbol();function n$(e,t){return!(typeof e!="object"||e===null||!("uat"in e)||typeof e.uat!="number"||Date.now()-e.uat>=t||!("jwks"in e)||!Qt(e.jwks)||!Array.isArray(e.jwks.keys)||!Array.prototype.every.call(e.jwks.keys,Qt))}class s${constructor(t,n){if(!(t instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(t.href),this._options={agent:n?.agent,headers:n?.headers},this._timeoutDuration=typeof n?.timeoutDuration=="number"?n?.timeoutDuration:5e3,this._cooldownDuration=typeof n?.cooldownDuration=="number"?n?.cooldownDuration:3e4,this._cacheMaxAge=typeof n?.cacheMaxAge=="number"?n?.cacheMaxAge:6e5,n?.[du]!==void 0&&(this._cache=n?.[du],n$(n?.[du],this._cacheMaxAge)&&(this._jwksTimestamp=this._cache.uat,this._local=uv(this._cache.jwks)))}coolingDown(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cooldownDuration:!1}fresh(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cacheMaxAge:!1}async getKey(t,n){(!this._local||!this.fresh())&&await this.reload();try{return await this._local(t,n)}catch(s){if(s instanceof sh&&this.coolingDown()===!1)return await this.reload(),this._local(t,n);throw s}}async reload(){this._pendingFetch&&r$()&&(this._pendingFetch=void 0);const t=new Headers(this._options.headers);dv&&!t.has("User-Agent")&&(t.set("User-Agent",dv),this._options.headers=Object.fromEntries(t.entries())),this._pendingFetch||(this._pendingFetch=t$(this._url,this._timeoutDuration,this._options).then(n=>{this._local=uv(n),this._cache&&(this._cache.uat=Date.now(),this._cache.jwks=n),this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(n=>{throw this._pendingFetch=void 0,n})),await this._pendingFetch}}function i$(e,t){const n=new s$(e,t),s=async(c,i)=>n.getKey(c,i);return Object.defineProperties(s,{coolingDown:{get:()=>n.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>n.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>n.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>!!n._pendingFetch,enumerable:!0,configurable:!1},jwks:{value:()=>n._local?.jwks(),enumerable:!0,configurable:!1,writable:!1}}),s}const o$=du;class a$ extends vw{encode(){const t=rr(JSON.stringify({alg:"none"})),n=rr(JSON.stringify(this._payload));return`${t}.${n}.`}static decode(t,n){if(typeof t!="string")throw new Yr("Unsecured JWT must be a string");const{0:s,1:c,2:i,length:o}=t.split(".");if(o!==3||i!=="")throw new Yr("Invalid Unsecured JWT");let l;try{if(l=JSON.parse(ts.decode(Jt(s))),l.alg!=="none")throw new Error}catch{throw new Yr("Invalid Unsecured JWT")}return{payload:gw(l,Jt(c),n),header:l}}}const c$=rr,ww=Jt,l$=Object.freeze(Object.defineProperty({__proto__:null,decode:ww,encode:c$},Symbol.toStringTag,{value:"Module"}));function u$(e){let t;if(typeof e=="string"){const n=e.split(".");(n.length===3||n.length===5)&&([t]=n)}else if(typeof e=="object"&&e)if("protected"in e)t=e.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof t!="string"||!t)throw new Error;const n=JSON.parse(ts.decode(ww(t)));if(!Qt(n))throw new Error;return n}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}function d$(e){if(typeof e!="string")throw new Yr("JWTs must use Compact JWS serialization, JWT must be a string");const{1:t,length:n}=e.split(".");if(n===5)throw new Yr("Only JWTs using Compact JWS serialization can be decoded");if(n!==3)throw new Yr("Invalid JWT");if(!t)throw new Yr("JWTs must contain a payload");let s;try{s=ww(t)}catch{throw new Yr("Failed to base64url decode the payload")}let c;try{c=JSON.parse(ts.decode(s))}catch{throw new Yr("Failed to parse the decoded payload as JSON")}if(!Qt(c))throw new Yr("Invalid JWT Claims Set");return c}async function f$(e,t){let n,s,c;switch(e){case"HS256":case"HS384":case"HS512":n=parseInt(e.slice(-3),10),s={name:"HMAC",hash:`SHA-${n}`,length:n},c=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return n=parseInt(e.slice(-3),10),oh(new Uint8Array(n>>3));case"A128KW":case"A192KW":case"A256KW":n=parseInt(e.slice(1,4),10),s={name:"AES-KW",length:n},c=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":n=parseInt(e.slice(1,4),10),s={name:"AES-GCM",length:n},c=["encrypt","decrypt"];break;default:throw new vt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return it.subtle.generateKey(s,t?.extractable??!1,c)}function Ly(e){const t=e?.modulusLength??2048;if(typeof t!="number"||t<2048)throw new vt("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return t}async function h$(e,t){let n,s;switch(e){case"PS256":case"PS384":case"PS512":n={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Ly(t)},s=["sign","verify"];break;case"RS256":case"RS384":case"RS512":n={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Ly(t)},s=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":n={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Ly(t)},s=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":n={name:"ECDSA",namedCurve:"P-256"},s=["sign","verify"];break;case"ES384":n={name:"ECDSA",namedCurve:"P-384"},s=["sign","verify"];break;case"ES512":n={name:"ECDSA",namedCurve:"P-521"},s=["sign","verify"];break;case"Ed25519":n={name:"Ed25519"},s=["sign","verify"];break;case"EdDSA":{s=["sign","verify"];const c=t?.crv??"Ed25519";switch(c){case"Ed25519":case"Ed448":n={name:c};break;default:throw new vt("Invalid or unsupported crv option provided")}break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{s=["deriveKey","deriveBits"];const c=t?.crv??"P-256";switch(c){case"P-256":case"P-384":case"P-521":{n={name:"ECDH",namedCurve:c};break}case"X25519":case"X448":n={name:c};break;default:throw new vt("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new vt('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return it.subtle.generateKey(n,t?.extractable??!1,s)}async function p$(e,t){return h$(e,t)}async function m$(e,t){return f$(e,t)}const g$="WebCryptoAPI",y$=Object.freeze(Object.defineProperty({__proto__:null,CompactEncrypt:Tk,CompactSign:Ck,EmbeddedJWK:XD,EncryptJWT:JD,FlattenedEncrypt:bf,FlattenedSign:yw,GeneralEncrypt:jD,GeneralSign:zD,SignJWT:GD,UnsecuredJWT:a$,base64url:l$,calculateJwkThumbprint:_k,calculateJwkThumbprintUri:VD,compactDecrypt:pk,compactVerify:Ek,createLocalJWKSet:uv,createRemoteJWKSet:i$,cryptoRuntime:g$,decodeJwt:d$,decodeProtectedHeader:u$,errors:Gj,experimental_jwksCache:o$,exportJWK:gk,exportPKCS8:ND,exportSPKI:OD,flattenedDecrypt:hw,flattenedVerify:pw,generalDecrypt:ID,generalVerify:$D,generateKeyPair:p$,generateSecret:m$,importJWK:Iu,importPKCS8:bD,importSPKI:ED,importX509:SD,jwksCache:du,jwtDecrypt:WD,jwtVerify:FD},Symbol.toStringTag,{value:"Module"}));var p1;function m1(){if(p1)return Ql;p1=1,Object.defineProperty(Ql,"__esModule",{value:!0}),Ql.TokenValidationService=void 0;const e=y$;class t{constructor(s){this.jwksCache=new Map,this.JWKS_CACHE_TTL_MS=3600*1e3,this.resultCache=new Map,this.RESULT_CACHE_TTL_MS=60*1e3,this.keycloakConfig=s}setKeycloakConfig(s){this.keycloakConfig=s}async validateTokenLocal(s,c){try{if(!c?.skipResultCache){const o=this.getCachedResult(s);if(o)return{...o,cached:!0}}const i=await this.performValidation(s,c);return!c?.skipResultCache&&this.shouldCacheResult(i)&&this.cacheResult(s,i),i}catch(i){const o=i instanceof Error?i.message:"Token validation failed";return{valid:!1,tokenType:c?.tokenType||"auto",error:o}}}clearCache(s){s?this.jwksCache.delete(s):this.jwksCache.clear()}clearResultCache(){this.resultCache.clear()}clearAllCaches(){this.jwksCache.clear(),this.resultCache.clear()}async performValidation(s,c){const o=(0,e.decodeJwt)(s).iss;return o?this.determineTokenType(o,c?.tokenType)==="keycloak"?this.validateKeycloakToken(s,c):this.validateDelegatedToken(s,o,c):{valid:!1,tokenType:"auto",error:"Token missing issuer (iss) claim"}}determineTokenType(s,c){if(c&&c!=="auto")return c;if(this.keycloakConfig){const i=`${this.keycloakConfig.authServerUrl}/realms/${this.keycloakConfig.realm}`;if(s===i)return"keycloak"}return"delegated"}async validateKeycloakToken(s,c){if(!this.keycloakConfig)return{valid:!1,tokenType:"keycloak",error:"Keycloak not configured"};const i=`${this.keycloakConfig.authServerUrl}/realms/${this.keycloakConfig.realm}/protocol/openid-connect/certs`,o=`${this.keycloakConfig.authServerUrl}/realms/${this.keycloakConfig.realm}`;try{const l=await this.getJWKS(i),f={issuer:o};this.keycloakConfig.verifyAudience&&this.keycloakConfig.clientId&&!c?.skipAudienceValidation&&(f.audience=this.keycloakConfig.clientId);const{payload:p}=await(0,e.jwtVerify)(s,l,f);return{valid:!0,tokenType:"keycloak",payload:this.mapPayload(p)}}catch(l){return{valid:!1,tokenType:"keycloak",error:l instanceof Error?l.message:"Keycloak token validation failed"}}}async validateDelegatedToken(s,c,i){let o=null;if(typeof i?.delegatedProvider=="function"?o=await i.delegatedProvider(c):i?.delegatedProvider&&(o=i.delegatedProvider),!o)return{valid:!1,tokenType:"delegated",error:`No delegated provider configured for issuer: ${c}`};try{const l=await this.getJWKS(o.jwksUri),f={issuer:o.issuer};!i?.skipAudienceValidation&&o.audience&&(f.audience=o.audience);const{payload:p}=await(0,e.jwtVerify)(s,l,f);return{valid:!0,tokenType:"delegated",providerKey:o.key,payload:this.mapPayload(p)}}catch(l){return{valid:!1,tokenType:"delegated",providerKey:o.key,error:l instanceof Error?l.message:"Delegated token validation failed"}}}mapPayload(s){return{...s,sub:s.sub,iss:s.iss,email:s.email,preferredUsername:s.preferred_username,name:s.name,realmAccess:s.realm_access,resourceAccess:s.resource_access}}async getJWKS(s){const c=this.jwksCache.get(s);if(c&&c.expiresAt>Date.now())return c.keySet;const i=(0,e.createRemoteJWKSet)(new URL(s));return this.jwksCache.set(s,{keySet:i,expiresAt:Date.now()+this.JWKS_CACHE_TTL_MS}),i}getTokenHash(s){return s.length<=32?s:`${s.slice(0,16)}...${s.slice(-16)}`}getCachedResult(s){const c=this.getTokenHash(s),i=this.resultCache.get(c);return i&&i.expiresAt>Date.now()?i.result:(i&&this.resultCache.delete(c),null)}cacheResult(s,c){const i=this.getTokenHash(s);this.resultCache.set(i,{result:c,expiresAt:Date.now()+this.RESULT_CACHE_TTL_MS})}shouldCacheResult(s){return!!(s.valid||s.error?.includes("expired")||s.error?.includes('"exp"')||s.error?.includes("signature")||s.error?.includes("invalid"))}}return Ql.TokenValidationService=t,Ql}var jy={},g1;function v$(){return g1||(g1=1,Object.defineProperty(jy,"__esModule",{value:!0})),jy}var Dy={},y1;function w$(){return y1||(y1=1,Object.defineProperty(Dy,"__esModule",{value:!0})),Dy}var Zl={},v1;function Ew(){if(v1)return Zl;v1=1,Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.BrowserPermissionService=void 0;const e=Zf(),t=_i(),n=On();class s{constructor(i,o,l){this.config=i.config,this.cache=l,this.httpClient=i,this.apiClient=o,this.permissionTTL=this.config.cache?.permissionTTL||900}extractUserIdFromToken(i){try{const o=(0,e.decodeJWT)(i);return o?o.sub||o.userId||o.user_id||o.id:null}catch{return null}}getEnvironmentFromClientToken(){if(!(0,n.isBrowser)())return null;try{const i=(0,n.getLocalStorage)("miso:client-token");return i&&(0,t.extractClientTokenInfo)(i).environment||null}catch(i){return console.warn("Failed to extract environment from client token:",i),null}}async getPermissions(i,o){try{let l=this.extractUserIdFromToken(i);const f=l?`permissions:${l}`:null;if(f){const w=await this.cache.get(f);if(w)return w.permissions||[]}if(!l){const w=o||this.config.authStrategy,C=w?{...w,bearerToken:i}:{methods:["bearer"],bearerToken:i};if(l=(await this.apiClient.auth.validateToken({token:i},C)).data?.user?.id||null,!l)return[]}const p=o||this.config.authStrategy,h=p?{...p,bearerToken:i}:{methods:["bearer"],bearerToken:i},u=this.getEnvironmentFromClientToken();u||console.warn("[BrowserPermissionService] Environment not found in client token. Permissions API requires environment parameter. This may cause a 400 Bad Request error.");const m=u?{environment:u}:void 0,v=(await this.apiClient.permissions.getPermissions(m,h)).data?.permissions||[],S=`permissions:${l}`;return await this.cache.set(S,{permissions:v,timestamp:Date.now()},this.permissionTTL),v}catch(l){return console.error("Failed to get permissions:",l),[]}}async hasPermission(i,o,l){return(await this.getPermissions(i,l)).includes(o)}async hasAnyPermission(i,o,l){const f=await this.getPermissions(i,l);return o.some(p=>f.includes(p))}async hasAllPermissions(i,o,l){const f=await this.getPermissions(i,l);return o.every(p=>f.includes(p))}async refreshPermissions(i,o){try{const l=o||this.config.authStrategy,f=l?{...l,bearerToken:i}:{methods:["bearer"],bearerToken:i},p=await this.apiClient.auth.validateToken({token:i},f);if(!p.data?.user?.id)return[];const u=`permissions:${p.data.user.id}`,m=this.getEnvironmentFromClientToken(),g=m?{environment:m}:void 0,S=(await this.apiClient.permissions.refreshPermissions(g,f)).data?.permissions||[];return await this.cache.set(u,{permissions:S,timestamp:Date.now()},this.permissionTTL),S}catch(l){return console.error("Failed to refresh permissions:",l),[]}}async clearPermissionsCache(i,o){try{const l=o||this.config.authStrategy,f=l?{...l,bearerToken:i}:{methods:["bearer"],bearerToken:i},p=await this.apiClient.auth.validateToken({token:i},f);if(!p.data?.user?.id)return;const u=`permissions:${p.data.user.id}`;await this.cache.delete(u)}catch(l){console.error("Failed to clear permissions cache:",l)}}}return Zl.BrowserPermissionService=s,Zl}var eu={},w1;function Sw(){if(w1)return eu;w1=1,Object.defineProperty(eu,"__esModule",{value:!0}),eu.BrowserRoleService=void 0;const e=Zf(),t=_i(),n=On();class s{constructor(i,o,l){this.config=i.config,this.cache=l,this.httpClient=i,this.apiClient=o,this.roleTTL=this.config.cache?.roleTTL||900}extractUserIdFromToken(i){try{const o=(0,e.decodeJWT)(i);return o?o.sub||o.userId||o.user_id||o.id:null}catch{return null}}getEnvironmentFromClientToken(){if(!(0,n.isBrowser)())return null;try{const i=(0,n.getLocalStorage)("miso:client-token");if(!i)return console.warn("[BrowserRoleService] No client token found in localStorage"),null;const o=(0,t.extractClientTokenInfo)(i);return o.environment||(console.warn("[BrowserRoleService] No environment in client token. Token info:",o),console.log("[BrowserRoleService] Available token info fields:",Object.keys(o))),o.environment||null}catch(i){return console.warn("Failed to extract environment from client token:",i),null}}async getRoles(i,o){try{let l=this.extractUserIdFromToken(i);const f=l?`roles:${l}`:null;if(f){const w=await this.cache.get(f);if(w)return w.roles||[]}if(!l){const w=o||this.config.authStrategy,C=w?{...w,bearerToken:i}:{methods:["bearer"],bearerToken:i};if(l=(await this.apiClient.auth.validateToken({token:i},C)).data?.user?.id||null,!l)return[]}const p=o||this.config.authStrategy,h=p?{...p,bearerToken:i}:{methods:["bearer"],bearerToken:i},u=this.getEnvironmentFromClientToken();u||console.warn("[BrowserRoleService] Environment not found in client token. Roles API requires environment parameter. This may cause a 400 Bad Request error.");const m=u?{environment:u}:void 0,v=(await this.apiClient.roles.getRoles(m,h)).data?.roles||[],S=`roles:${l}`;return await this.cache.set(S,{roles:v,timestamp:Date.now()},this.roleTTL),v}catch(l){return console.error("Failed to get roles:",l),[]}}async hasRole(i,o,l){return(await this.getRoles(i,l)).includes(o)}async hasAnyRole(i,o,l){const f=await this.getRoles(i,l);return o.some(p=>f.includes(p))}async hasAllRoles(i,o,l){const f=await this.getRoles(i,l);return o.every(p=>f.includes(p))}async refreshRoles(i,o){try{const l=o||this.config.authStrategy,f=l?{...l,bearerToken:i}:{methods:["bearer"],bearerToken:i},p=await this.apiClient.auth.validateToken({token:i},f);if(!p.data?.user?.id)return[];const u=`roles:${p.data.user.id}`,m=this.getEnvironmentFromClientToken(),g=m?{environment:m}:void 0,S=(await this.apiClient.roles.refreshRoles(g,f)).data?.roles||[];return await this.cache.set(u,{roles:S,timestamp:Date.now()},this.roleTTL),S}catch(l){return console.error("Failed to refresh roles:",l),[]}}async clearRolesCache(i,o){try{const l=o||this.config.authStrategy,f=l?{...l,bearerToken:i}:{methods:["bearer"],bearerToken:i},p=await this.apiClient.auth.validateToken({token:i},f);if(!p.data?.user?.id)return;const u=`roles:${p.data.user.id}`;await this.cache.delete(u)}catch(l){console.error("Failed to clear roles cache:",l)}}}return eu.BrowserRoleService=s,eu}var Bd={},E1;function E$(){if(E1)return Bd;E1=1;var e={};Object.defineProperty(Bd,"__esModule",{value:!0}),Bd.loadConfig=t;function t(){const n={controllerUrl:e.MISO_CONTROLLER_URL||"https://controller.aifabrix.ai",clientId:e.MISO_CLIENTID||e.MISO_CLIENT_ID||"",clientSecret:e.MISO_CLIENTSECRET||e.MISO_CLIENT_SECRET||"",logLevel:e.MISO_LOG_LEVEL||"debug"};if(e.MISO_WEB_SERVER_URL&&(n.controllerPublicUrl=e.MISO_WEB_SERVER_URL),e.MISO_CONTROLLER_URL&&(n.controllerPrivateUrl=e.MISO_CONTROLLER_URL,n.controllerUrl=e.MISO_CONTROLLER_URL),!n.clientId)throw new Error("MISO_CLIENTID environment variable is required");if(!n.clientSecret)throw new Error("MISO_CLIENTSECRET environment variable is required");const s=e.REDIS_HOST;if(s){const c={host:s,port:parseInt(e.REDIS_PORT||"6379"),password:e.REDIS_PASSWORD};e.REDIS_DB&&(c.db=parseInt(e.REDIS_DB)),e.REDIS_KEY_PREFIX&&(c.keyPrefix=e.REDIS_KEY_PREFIX),n.redis=c}if(e.ENCRYPTION_KEY&&(n.encryptionKey=e.ENCRYPTION_KEY),e.API_KEY&&(n.apiKey=e.API_KEY),e.MISO_SENSITIVE_FIELDS_CONFIG&&(n.sensitiveFieldsConfig=e.MISO_SENSITIVE_FIELDS_CONFIG),e.MISO_EMIT_EVENTS&&(n.emitEvents=e.MISO_EMIT_EVENTS.toLowerCase()==="true"),e.MISO_AUTH_STRATEGY){const i={methods:e.MISO_AUTH_STRATEGY.split(",").map(o=>o.trim()).filter(o=>["bearer","client-token","client-credentials","api-key"].includes(o))};e.MISO_BEARER_TOKEN&&(i.bearerToken=e.MISO_BEARER_TOKEN),(e.MISO_API_KEY||e.API_KEY)&&(i.apiKey=e.MISO_API_KEY||e.API_KEY),i.methods.length>0&&(n.authStrategy=i)}if(e.MISO_CLIENT_TOKEN_URI&&(n.clientTokenUri=e.MISO_CLIENT_TOKEN_URI),e.MISO_ALLOWED_ORIGINS){const c=e.MISO_ALLOWED_ORIGINS.split(",").map(i=>i.trim()).filter(i=>i.length>0);c.length>0&&(n.allowedOrigins=c)}return e.MISO_VALIDATE_RESPONSES!==void 0?n.validateResponses=e.MISO_VALIDATE_RESPONSES.toLowerCase()==="true":n.validateResponses=!1,n}return Bd}var zd={},S1;function S$(){if(S1)return zd;S1=1,Object.defineProperty(zd,"__esModule",{value:!0}),zd.extractLoggingContext=e;function e(t){const n={};return t.source&&(n.sourceKey=t.source.key,t.source.displayName!==void 0&&(n.sourceDisplayName=t.source.displayName),t.source.externalSystem&&(n.externalSystemKey=t.source.externalSystem.key,t.source.externalSystem.displayName!==void 0&&(n.externalSystemDisplayName=t.source.externalSystem.displayName))),t.externalSystem&&(n.externalSystemKey=t.externalSystem.key,t.externalSystem.displayName!==void 0&&(n.externalSystemDisplayName=t.externalSystem.displayName)),t.record&&(n.recordKey=t.record.key,t.record.displayName!==void 0&&(n.recordDisplayName=t.record.displayName)),n}return zd}var $y={},b1;function b$(){return b1||(b1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FilterBuilder=void 0,e.parseFilterParams=i,e.buildQueryString=o,e.applyFilters=l,e.validateJsonFilter=f,e.filterQueryToJson=p,e.jsonToFilterQuery=h;const t=nw();Object.defineProperty(e,"FilterBuilder",{enumerable:!0,get:function(){return t.FilterBuilder}});function n(u){return{equals:"eq",notEquals:"neq",">":"gt","<":"lt",">=":"gte","<=":"lte",equal:"eq",notEqual:"neq",greaterThan:"gt",lessThan:"lt",greaterThanOrEqual:"gte",lessThanOrEqual:"lte"}[u.toLowerCase()]||u}function s(u,m){if((u==="in"||u==="nin")&&!Array.isArray(m))throw new Error(`Operator '${u}' requires array value, got ${typeof m}. Example: {"field": {"${u}": ["value1", "value2"]}}`);if((u==="isNull"||u==="isNotNull")&&m!==null)throw new Error(`Operator '${u}' requires null value, got ${typeof m}. Example: {"field": {"${u}": null}}`)}function c(u){const m=[];for(const[g,v]of Object.entries(u)){if(!g||typeof g!="string")throw new Error(`Invalid filter format. Field names must be non-empty strings. Got: ${typeof g}`);if(typeof v!="object"||v===null||Array.isArray(v))throw new Error(`Field '${g}' must have operator dictionary, got ${typeof v}. Expected format: {"${g}": {"op": value}}`);const S=v;for(const[w,C]of Object.entries(S)){const N=n(w);s(N,C);let I;N==="isNull"||N==="isNotNull"?I=null:(Array.isArray(C),I=C),m.push({field:g,op:N,value:I})}}return m}function i(u){const m=u.filter;if(!m)return[];try{let g;if(typeof m=="object"&&!Array.isArray(m)&&m!==null)g=m;else if(typeof m=="string")try{const v=decodeURIComponent(m);g=JSON.parse(v)}catch{g=JSON.parse(m)}else if(Array.isArray(m)){const v=[];for(const S of m)if(typeof S=="string")try{const w=decodeURIComponent(S),C=JSON.parse(w);v.push(...c(C))}catch{const w=JSON.parse(S);v.push(...c(w))}else typeof S=="object"&&S!==null&&v.push(...c(S));return v}else throw new Error(`Invalid filter format. Expected object or string, got ${typeof m}. Example: {"status": {"eq": "active"}}`);if(typeof g!="object"||g===null||Array.isArray(g))throw new Error(`Invalid filter format. Expected JSON object format: {"field": {"op": value}}. Got: ${typeof g}`);return c(g)}catch(g){throw g instanceof Error?new Error(`Invalid filter format. Expected JSON format: {"field": {"op": value}}. ${g.message}`):new Error(`Invalid filter format. Expected JSON format: {"field": {"op": value}}. Got: ${typeof m}`)}}function o(u){const m=new URLSearchParams;if(u.filters&&u.filters.length>0){const g={};for(const S of u.filters)g[S.field]||(g[S.field]={}),g[S.field][S.op]=S.value===null?null:S.value;const v=JSON.stringify(g);m.append("filter",v)}return u.sort?.forEach(g=>m.append("sort",g)),u.page&&m.append("page",u.page.toString()),u.pageSize&&m.append("page_size",u.pageSize.toString()),u.fields&&u.fields.length>0&&m.append("fields",u.fields.join(",")),m.toString()}function l(u,m){return u.filter(g=>m.every(v=>{const S=g[v.field],w=v.value;if(v.op==="isNull")return S==null;if(v.op==="isNotNull")return S!=null;if(Array.isArray(w))return v.op==="in"?w.includes(S):!w.includes(S);switch(v.op){case"eq":return S===w;case"neq":return S!==w;case"gt":return S>w;case"lt":return S<w;case"gte":return S>=w;case"lte":return S<=w;case"contains":return String(S).includes(String(w));case"like":return new RegExp(String(w),"i").test(String(S));default:return!0}}))}function f(u){if(typeof u!="object"||u===null||Array.isArray(u))throw new Error(`Invalid filter format. Expected object, got ${typeof u}. Example: {"field": {"op": value}}`);const m=u;for(const[g,v]of Object.entries(m)){if(!g||typeof g!="string")throw new Error(`Invalid filter format. Field names must be non-empty strings. Got: ${typeof g}`);if(typeof v!="object"||v===null||Array.isArray(v))throw new Error(`Field '${g}' must have operator dictionary, got ${typeof v}. Expected format: {"${g}": {"op": value}}`);const S=v;for(const[w,C]of Object.entries(S)){const N=n(w);s(N,C)}}}function p(u){const m={};if(u.filters)for(const g of u.filters)m[g.field]||(m[g.field]={}),m[g.field][g.op]=g.value;return m}function h(u){return{filters:c(u)}}})($y)),$y}var tc={},T1;function T$(){if(T1)return tc;T1=1,Object.defineProperty(tc,"__esModule",{value:!0}),tc.parseSortParams=e,tc.buildSortString=t,tc.applySorting=n;function e(s){const c=s.sort;return(Array.isArray(c)?c:c?[c]:[]).map(o=>{const l=String(o).trim();if(!l||l==="-"||l===":")return null;if(l.includes(":")){const[f,p]=l.split(":"),h=f.trim();return h?{field:h,order:p?.trim().toLowerCase()==="desc"?"desc":"asc"}:null}if(l.startsWith("-")){const f=l.substring(1).trim();return f?{field:f,order:"desc"}:null}return{field:l,order:"asc"}}).filter(o=>o!==null)}function t(s){return s.map(c=>c.order==="desc"?`-${c.field}`:c.field)}function n(s,c){return!c||c.length===0?s:[...s].sort((i,o)=>{for(const l of c){const f=i[l.field],p=o[l.field];if(f==null)return 1;if(p==null)return-1;if(f<p)return l.order==="asc"?-1:1;if(f>p)return l.order==="asc"?1:-1}return 0})}return tc}var Uy={},C1;function C$(){return C1||(C1=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.loggerContextMiddleware=e.hasConfig=e.createClientTokenEndpoint=e.extractClientTokenInfo=e.getEnvironmentToken=e.validateOrigin=e.EncryptionUtil=e.sendErrorResponse=e.getErrorTitle=e.getErrorTypeUri=e.handleRouteError=e.setErrorLogger=e.createErrorResponse=e.createSuccessResponse=e.AppError=e.ValidationHelper=e.asyncHandlerNamed=e.asyncHandler=e.injectResponseHelpers=e.ResponseHelper=void 0;var t=sw();Object.defineProperty(e,"ResponseHelper",{enumerable:!0,get:function(){return t.ResponseHelper}});var n=LR();Object.defineProperty(e,"injectResponseHelpers",{enumerable:!0,get:function(){return n.injectResponseHelpers}});var s=jR();Object.defineProperty(e,"asyncHandler",{enumerable:!0,get:function(){return s.asyncHandler}}),Object.defineProperty(e,"asyncHandlerNamed",{enumerable:!0,get:function(){return s.asyncHandlerNamed}});var c=DR();Object.defineProperty(e,"ValidationHelper",{enumerable:!0,get:function(){return c.ValidationHelper}});var i=ku();Object.defineProperty(e,"AppError",{enumerable:!0,get:function(){return i.AppError}}),Object.defineProperty(e,"createSuccessResponse",{enumerable:!0,get:function(){return i.createSuccessResponse}}),Object.defineProperty(e,"createErrorResponse",{enumerable:!0,get:function(){return i.createErrorResponse}});var o=ow();Object.defineProperty(e,"setErrorLogger",{enumerable:!0,get:function(){return o.setErrorLogger}}),Object.defineProperty(e,"handleRouteError",{enumerable:!0,get:function(){return o.handleRouteError}});var l=iw();Object.defineProperty(e,"getErrorTypeUri",{enumerable:!0,get:function(){return l.getErrorTypeUri}}),Object.defineProperty(e,"getErrorTitle",{enumerable:!0,get:function(){return l.getErrorTitle}}),Object.defineProperty(e,"sendErrorResponse",{enumerable:!0,get:function(){return l.sendErrorResponse}});var f=$R();Object.defineProperty(e,"EncryptionUtil",{enumerable:!0,get:function(){return f.EncryptionUtil}});var p=mu();Object.defineProperty(e,"validateOrigin",{enumerable:!0,get:function(){return p.validateOrigin}});var h=eh();Object.defineProperty(e,"getEnvironmentToken",{enumerable:!0,get:function(){return h.getEnvironmentToken}});var u=_i();Object.defineProperty(e,"extractClientTokenInfo",{enumerable:!0,get:function(){return u.extractClientTokenInfo}});var m=th();Object.defineProperty(e,"createClientTokenEndpoint",{enumerable:!0,get:function(){return m.createClientTokenEndpoint}}),Object.defineProperty(e,"hasConfig",{enumerable:!0,get:function(){return m.hasConfig}});var g=UR();Object.defineProperty(e,"loggerContextMiddleware",{enumerable:!0,get:function(){return g.loggerContextMiddleware}})})(Uy)),Uy}var Qn={},ia={},_1;function Rk(){if(_1)return ia;_1=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.getCachedEntry=t,ia.setCacheEntry=n,ia.isCacheEnabled=s,ia.getCacheKeyForRequest=c;const e=On();function t(i,o,l){const f=i.get(o);return f&&f.expiresAt>Date.now()?(l.cacheHits++,f.data):(l.cacheMisses++,null)}function n(i,o,l,f,p){if(i.set(o,{data:l,expiresAt:Date.now()+f*1e3,key:o}),i.size>p){const h=i.keys().next().value;h&&i.delete(h)}}function s(i,o,l){const f=i.toUpperCase()==="GET";return o?.enabled!==!1&&f&&l?.cache?.enabled!==!1}function c(i,o){return o?.cache?.key||(0,e.generateCacheKey)(i,o)}return ia}var eo={},tu={},x1;function kk(){if(x1)return tu;x1=1,Object.defineProperty(tu,"__esModule",{value:!0}),tu.shouldSkipAudit=n,tu.logDataClientAudit=s;const e=ho(),t=On();function n(c,i){return i?.enabled?(i.skipEndpoints||[]).some(l=>c.includes(l)):!0}async function s(c,i,o,l,f,p,h,u,m,g,v,S,w,C,N){if(!(n(i,p)||!f)&&h())try{const I=u(),R=I?(0,t.extractUserIdFromToken)(I):void 0,D=p?.level||"standard",A={method:c,url:i,statusCode:o,duration:l};if(R&&(A.userId=R),D==="minimal"){await f.log.audit(`http.request.${c.toLowerCase()}`,i,A,{token:I||void 0});return}const O=p?.maxResponseSize||1e4,x=p?.maxMaskingSize||5e4;let M;if(C!==void 0){const q=(0,t.truncatePayload)(C,x);q.truncated?M=q.data:M=e.DataMasker.maskSensitiveData(q.data)}let G;if(N!==void 0){const q=(0,t.truncatePayload)(N,O);q.truncated?G=q.data:G=e.DataMasker.maskSensitiveData(q.data)}const V=S?e.DataMasker.maskSensitiveData(S):void 0,z=w?e.DataMasker.maskSensitiveData(w):void 0;if(V&&(A.requestHeaders=V),z&&(A.responseHeaders=z),M!==void 0&&(A.requestBody=M),G!==void 0&&(A.responseBody=G),(D==="detailed"||D==="full")&&(m!==void 0&&(A.requestSize=m),g!==void 0&&(A.responseSize=g)),v){const q=e.DataMasker.maskSensitiveData({message:v.message,name:v.name,stack:v.stack});A.error=q}await f.log.audit(`http.request.${c.toLowerCase()}`,i,A,{token:I||void 0})}catch(I){const R=I,D=R.statusCode||R.response?.status,A=R.message||String(I),O=R.code,x=O==="ECONNREFUSED"||O==="ENOTFOUND"||A.includes("ERR_CONNECTION_REFUSED")||A.includes("Failed to fetch")||A.includes("NetworkError")||A.includes("network error");if(D===401||x)return;console.warn("Failed to log audit event:",I)}}return tu}var R1;function _$(){if(R1)return eo;R1=1,Object.defineProperty(eo,"__esModule",{value:!0}),eo.extractHeaders=o,eo.parseResponse=l,eo.mergeSignals=f,eo.makeFetchRequest=p,eo.executeHttpRequest=S;const e=zf(),t=On(),n=Rk(),s=kk(),c=Ft(),i=Ht();function o(w){if(!w)return;if(w instanceof Headers){const N={};return w.forEach((I,R)=>{N[R]=I}),N}if(Array.isArray(w)){const N={};return w.forEach(([I,R])=>{N[I]=String(R)}),N}const C={};return Object.entries(w).forEach(([N,I])=>{C[N]=Array.isArray(I)?I.join(", "):String(I)}),C}async function l(w){const C=w.headers.get("content-type")||"";return C.includes("application/json")?await w.json():C.includes("text/")?await w.text():await w.blob()}function f(w,C){const N=new AbortController,I=()=>{N.abort(),w.removeEventListener("abort",I),C.removeEventListener("abort",I)};return w.aborted||C.aborted?(N.abort(),N.signal):(w.addEventListener("abort",I),C.addEventListener("abort",I),N.signal)}async function p(w,C,N,I,R){const D=new Headers(N.defaultHeaders);if(R?.headers&&(R.headers instanceof Headers?R.headers.forEach((K,X)=>D.set(X,K)):Object.entries(R.headers).forEach(([K,X])=>{D.set(K,String(X))})),!R?.skipAuth){const K=I();K&&D.set("Authorization",`Bearer ${K}`)}const A=R?.timeout||N.timeout||3e4,O=new AbortController,x=setTimeout(()=>O.abort(),A),M=R?.signal?f(O.signal,R.signal):O.signal,{cache:G,skipAuth:V,retries:z,skipAudit:q,timeout:H,...$}=R||{};try{const K=await fetch(C,{method:w,headers:D,body:$.body,signal:M,...$});return clearTimeout(x),K}catch(K){throw clearTimeout(x),K instanceof Error&&K.name==="AbortError"?new e.TimeoutError(`Request timeout after ${A}ms`,A):new e.NetworkError(`Network error: ${K instanceof Error?K.message:"Unknown error"}`,K instanceof Error?K:void 0)}}async function h(w,C,N,I,R,D,A,O,x,M,G,V,z,q,H){const $=Date.now()-R;if(q.totalRequests++,q.responseTimes.push($),x&&w.ok){const K=H?.cache?.ttl||D.cache?.defaultTTL||300;(0,n.setCacheEntry)(A,O,C,K,D.cache?.maxSize||100)}if(z.onResponse)return await z.onResponse(w,C);if(!H?.skipAudit){const K=H?.body?(0,t.calculateSize)(H.body):void 0,X=(0,t.calculateSize)(C);await(0,s.logDataClientAudit)(N,I,w.status,$,M,D.audit,G,V,K,X,void 0,o(H?.headers),o(w.headers),H?.body,C)}if(!w.ok)throw new e.ApiError(`Request failed with status ${w.status}`,w.status,w);return C}function u(w){if(w?.log&&typeof w.log.generateCorrelationId=="function")return w.log.generateCorrelationId();const C=Date.now(),N=Math.random().toString(36).substring(2,8);return`${C}-${N}`}async function m(w,C,N,I,R,D,A,O,x,M,G,V,z){const q=Date.now()-I;V.totalFailures++;const H=(0,c.extractErrorInfo)(w,{endpoint:N,method:C,correlationId:u(O)});if((0,i.logErrorWithContext)(H,"[DataClient]"),!z?.skipAudit&&O?.log){const $=R||D?R&&R>=500?"server-error":R&&R>=400?"client-error":"success":"unknown";await(0,s.logDataClientAudit)(C,N,R||D||401,q,O,A.audit,x,M,z?.body?(0,t.calculateSize)(z.body):void 0,void 0,w,o(z?.headers),void 0,z?.body,void 0);try{await O.log.error(`Request failed: ${H.message}`,{errorType:H.errorType,errorName:H.errorName,statusCode:H.statusCode,endpoint:H.endpoint,method:H.method,responseBody:H.responseBody},H.stackTrace,{errorCategory:H.errorType.toLowerCase().replace("error",""),httpStatusCategory:$,correlationId:H.correlationId})}catch{}}throw w}function g(w,C,N,I,R,D,A,O,x,M,G,V){M(),G.totalFailures++;const z=(0,c.extractErrorInfo)(w,{endpoint:I,method:N,correlationId:u(A)});if((0,i.logErrorWithContext)(z,"[DataClient] [AUTH]"),!V?.skipAudit){const q=Date.now()-R;(0,s.logDataClientAudit)(N,I,C,q,A,D.audit,O,x,V?.body?(0,t.calculateSize)(V.body):void 0,void 0,w,o(V?.headers),void 0,V?.body,void 0).catch(()=>{}),A?.log&&A.log.error(`Authentication error: ${z.message}`,{authFlow:"token_validation_failed",errorType:z.errorType,errorName:z.errorName,statusCode:z.statusCode,endpoint:z.endpoint,method:z.method,responseBody:z.responseBody},z.stackTrace,{errorCategory:"authentication",httpStatusCategory:"client-error",correlationId:z.correlationId}).catch(()=>{})}}async function v(w,C,N){const I=(0,t.calculateBackoffDelay)(w,C,N);await new Promise(R=>setTimeout(R,I))}async function S(w,C,N,I,R,D,A,O,x,M,G,V,z,q,H,$){const K=$?.retries!==void 0?$.retries:I.retry?.maxRetries||3,X=I.retry?.enabled!==!1,B=I.retry?.baseDelay||1e3,te=I.retry?.maxDelay||1e4;let ae=!1,Z=!1;async function oe(ce){if(ae)throw new e.AuthenticationError("Authentication error detected - should not retry");let Y,re;try{if(re=await p(w,C,I,G,$),Y=re.status,Y===401||Y===403){if(Y===401&&I.onTokenRefresh&&z&&ce===0&&!Z){Z=!0;try{const Oe=await z();if(Oe&&Oe.token)return await new Promise(qe=>setTimeout(qe,10)),oe(ce+1)}catch(Oe){console.warn("Token refresh failed, redirecting to login:",Oe)}}ae=!0;const xe=Y===401?new e.AuthenticationError("Authentication required",re):new e.ApiError("Forbidden",403,re);throw g(xe,Y,w,N,O,I,x,M,G,V,H,$),xe}const me=await l(re);return await h(re,me,w,N,O,I,R,D,A,x,M,G,q,H,$)}catch(me){if(me instanceof e.AuthenticationError||Y===401||Y===403)throw ae=!0,me;const xe=me;if(xe.name==="AuthenticationError"||xe.statusCode===401||xe.statusCode===403)throw ae=!0,me;const Oe=xe.response?.status,qe=me instanceof e.AuthenticationError?401:xe.statusCode??Oe??Y??void 0,lt=qe&&qe>=500&&qe<600;if(!(X&&!lt&&ce<(lt?0:K)&&(0,t.isRetryableError)(qe,me))){if(me instanceof e.AuthenticationError||me.name==="AuthenticationError"||qe===401||qe===403||Y===401||Y===403)throw ae=!0,me;H.totalFailures++,await m(me,w,N,O,qe,Y,I,x,M,G,q,H,$)}if(ae)throw ae=!0,me;return await v(ce,B,te),oe(ce+1)}}try{return await oe(0)}catch(ce){const Y=ce instanceof e.AuthenticationError||ce.name==="AuthenticationError"||ce.statusCode===401||ce.statusCode===403;throw H.totalFailures++,q.onError&&!Y?await q.onError(ce):ce}}return eo}var ru={},rc={},k1;function fv(){if(k1)return rc;k1=1,Object.defineProperty(rc,"__esModule",{value:!0}),rc.getValidatedRedirectUrl=s,rc.redirectToLogin=c,rc.logout=i;const e=Ak(),t=On();function n(o){if(!o||typeof o!="string"||o.trim()==="")return null;const l=o.trim(),f=["javascript:","data:","vbscript:","file:","about:"],p=l.toLowerCase();for(const m of f)if(p.startsWith(m))return null;let h;try{if(l.startsWith("/")||!l.includes("://")){const m=globalThis.window.location.origin;h=new URL(l,m)}else h=new URL(l)}catch{return null}return h.protocol!=="http:"&&h.protocol!=="https:"?null:h.href}function s(o,l){const f=n(o);if(f)return f;if(l){const p=n(l);if(p)return p}return null}async function c(o,l,f){if(!(0,t.isBrowser)())return;const p=globalThis.window.location.href,h=f||p,u=(0,e.getControllerUrl)(o.misoConfig);if(!u){const S=new Error("Controller URL is not configured. Please configure controllerUrl or controllerPublicUrl in your DataClient configuration.");throw S.details={hasMisoConfig:!!o.misoConfig,controllerUrl:o.misoConfig?.controllerUrl,controllerPublicUrl:o.misoConfig?.controllerPublicUrl,controllerPrivateUrl:o.misoConfig?.controllerPrivateUrl},S}const m=await l();let g=o.loginUrl||"/login";g.startsWith("/api/")&&(console.warn(`âš ï¸ Warning: loginUrl is set to an API endpoint (${g}). redirectToLogin() should redirect to a login PAGE (e.g., '/login'), not an API endpoint. Using default '/login' instead.`),g="/login");let v;/^https?:\/\//i.test(g)?v=new URL(g):v=new URL(g,u),v.searchParams.set("redirect",h),m&&v.searchParams.set("x-client-token",m),globalThis.window.location.href=v.toString()}async function i(o,l,f,p,h,u){if(!(0,t.isBrowser)())return;const m=l(),g=await f();(o.tokenKeys||["token","accessToken","authToken"]).forEach(R=>{try{const D=globalThis.localStorage;D&&D.removeItem(R)}catch{}}),p();const S=(0,e.getControllerUrl)(o.misoConfig);if(!S){const R=h||o.logoutUrl||o.loginUrl||"/login",D=globalThis.window.location.origin,A=/^https?:\/\//i.test(R)?R:`${D}${R.startsWith("/")?R:`/${R}`}`,O=s(A);O&&(globalThis.window.location.href=O);return}const w=o.logoutUrl||o.loginUrl||"/logout";let C;/^https?:\/\//i.test(w)?C=new URL(w):C=new URL(w,S);const N=h||o.logoutUrl||o.loginUrl||"/login";let I;/^https?:\/\//i.test(N)?I=N:I=`${globalThis.window.location.origin}${N.startsWith("/")?N:`/${N}`}`,C.searchParams.set("redirect",I),g&&C.searchParams.set("x-client-token",g),m&&C.searchParams.set("token",m),globalThis.window.location.href=C.toString()}return rc}var A1;function Ak(){return A1||(A1=1,(function(e){var t=ru&&ru.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(e,"__esModule",{value:!0}),e.logout=e.redirectToLogin=void 0,e.getToken=f,e.handleOAuthCallback=u,e.hasClientToken=m,e.hasAnyToken=g,e.getClientToken=v,e.getControllerUrl=S,e.getEnvironmentToken=N,e.getClientTokenInfo=I;const n=On(),s=_i(),c=t(Ci()),i=kk(),o=Ft(),l=Ht();function f(R){if(!(0,n.isBrowser)())return null;const D=R||["token","accessToken","authToken"];for(const A of D){const O=(0,n.getLocalStorage)(A);if(O)return O}return null}function p(){try{const R=globalThis;if(!R.window){console.warn("[handleOAuthCallback] window not available for hash cleanup");return}const D=R.window.location.pathname+R.window.location.search;R.window.history.replaceState(null,"",D)}catch(R){console.warn("[handleOAuthCallback] Failed to clean up hash:",R)}}function h(R){if(!R||typeof R!="string")return!1;const D=R.trim();return!(D.length===0||D.length<5)}function u(R){if(!(0,n.isBrowser)())return null;const D=globalThis;if(!D.window||!D.window.location)return null;const A=D.window.location.hash;if(!A||A.length<=1)return null;const O=A.substring(1);let x;try{x=new URLSearchParams(O)}catch(V){return console.warn("[handleOAuthCallback] Failed to parse hash:",V),null}const M=x.get("token")||x.get("access_token")||x.get("accessToken");if(!M)return null;if(!h(M)){const V=M?M.length:0;return console.error("[handleOAuthCallback] Invalid token format - token rejected",{tokenLength:V,isEmpty:!M||M.trim().length===0,tooShort:V>0&&V<5,expectedFormat:"Non-empty string with at least 5 characters"}),p(),null}R.misoConfig?.logLevel;{const V=D.window.location.protocol==="https:",z=D.window.location.hostname||"",q=z==="localhost"||z==="127.0.0.1"||z==="[::1]"||z.startsWith("192.168.")||z.startsWith("10.")||z.startsWith("172.16.")||z.startsWith("172.17.")||z.startsWith("172.18.")||z.startsWith("172.19.")||z.startsWith("172.20.")||z.startsWith("172.21.")||z.startsWith("172.22.")||z.startsWith("172.23.")||z.startsWith("172.24.")||z.startsWith("172.25.")||z.startsWith("172.26.")||z.startsWith("172.27.")||z.startsWith("172.28.")||z.startsWith("172.29.")||z.startsWith("172.30.")||z.startsWith("172.31.");if(!V&&!q)return console.error("[handleOAuthCallback] SECURITY WARNING: Token received over HTTP in production"),p(),null}p();const G=R.tokenKeys||["token","accessToken","authToken"];try{return G.forEach(V=>{try{(0,n.setLocalStorage)(V,M)}catch(z){console.warn(`[handleOAuthCallback] Failed to store token in key ${V}:`,z)}}),R.misoConfig?.logLevel==="debug"&&console.log("[handleOAuthCallback] OAuth token extracted and stored securely",{tokenLength:M.length,tokenKeys:G,storedInKeys:G.length}),M}catch(V){const z=V instanceof Error?V:new Error(String(V)),H=globalThis.window?.location?.pathname||"/",$=(0,o.extractErrorInfo)(z,{endpoint:H,method:"GET"});return(0,l.logErrorWithContext)($,"[DataClient] [AUTH] [OAuthCallback]"),console.error("[handleOAuthCallback] Failed to store token:",V),null}}function m(R,D){if(!(0,n.isBrowser)())return!!(R&&D?.clientSecret);if((0,n.getLocalStorage)("miso:client-token")){const O=(0,n.getLocalStorage)("miso:client-token-expires-at");if(O&&parseInt(O,10)>Date.now())return!0}return!!(D?.clientToken||D?.onClientTokenRefresh||D?.clientSecret)}function g(R,D,A){return f(R)!==null||m(D||null,A)}async function v(R,D,A){if(!(0,n.isBrowser)())return null;const O=R?.logLevel==="debug",x=(0,n.getLocalStorage)("miso:client-token"),M=(0,n.getLocalStorage)("miso:client-token-expires-at");if(O&&console.log("[getClientToken] Checking localStorage:",{hasToken:!!x,hasExpiresAt:!!M,expiresAt:M,currentTime:Date.now()}),x)if(M){const G=parseInt(M,10),V=Date.now(),z=G-V,q=Math.floor(z/1e3);if(O&&console.log("[getClientToken] Token expiration check:",{expiresAt:G,expiresAtISO:new Date(G).toISOString(),now:V,nowISO:new Date(V).toISOString(),timeUntilExpiry:z,timeUntilExpirySeconds:q,isValid:G>V,expired:G<=V,isNaN:isNaN(G)}),isNaN(G))return console.warn("[getClientToken] Invalid expiration timestamp format, assuming token is valid"),x;if(G>V)return O&&console.log("[getClientToken] Returning valid cached token (checked expiration)"),x;console.warn("[getClientToken] Cached token expired, removing from cache"),(0,n.removeLocalStorage)("miso:client-token"),(0,n.removeLocalStorage)("miso:client-token-expires-at")}else try{const G=c.default.decode(x);if(G&&G.exp){const V=Date.now(),z=G.exp*1e3,q=z-V;if(O&&console.log("[getClientToken] Token expiration from JWT:",{jwtExpiresAt:z,jwtExpiresAtISO:new Date(z).toISOString(),now:V,nowISO:new Date(V).toISOString(),jwtTimeUntilExpiry:q,jwtTimeUntilExpirySeconds:Math.floor(q/1e3),jwtIsValid:z>V}),z>V)return O&&console.log("[getClientToken] Returning valid cached token (checked JWT expiration)"),x;console.warn("[getClientToken] Token expired (from JWT), removing from cache"),(0,n.removeLocalStorage)("miso:client-token"),(0,n.removeLocalStorage)("miso:client-token-expires-at")}else return O&&console.log("[getClientToken] No expiration info available, assuming token is valid"),x}catch(G){return console.warn("[getClientToken] Failed to decode token, assuming valid:",G),x}return R?.clientToken?(O&&console.log("[getClientToken] Returning token from config"),R.clientToken):(console.warn("[getClientToken] No token available, returning null"),null)}function S(R){return R?(0,n.isBrowser)()?R.controllerPublicUrl||R.controllerUrl||null:R.controllerPrivateUrl||R.controllerUrl||null:null}var w=fv();Object.defineProperty(e,"redirectToLogin",{enumerable:!0,get:function(){return w.redirectToLogin}});var C=fv();Object.defineProperty(e,"logout",{enumerable:!0,get:function(){return C.logout}});async function N(R,D){if(!(0,n.isBrowser)())throw new Error("getEnvironmentToken() is only available in browser environment");const A="miso:client-token",O="miso:client-token-expires-at",x=(0,n.getLocalStorage)(A),M=(0,n.getLocalStorage)(O);if(x&&M){const z=parseInt(M,10),q=Date.now();if(z>q)return x;(0,n.removeLocalStorage)(A),(0,n.removeLocalStorage)(O)}const G=R.misoConfig?.clientTokenUri||"/api/v1/auth/client-token",V=/^https?:\/\//i.test(G)?G:`${R.baseUrl}${G}`;try{const z=await fetch(V,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!z.ok){const X=await z.text();throw new Error(`Failed to get environment token: ${z.status} ${z.statusText}. ${X}`)}const q=await z.json(),H=q.data?.token||q.token||q.accessToken||q.access_token;if(!H||typeof H!="string")throw new Error("Invalid response format: token not found in response");const $=q.data?.expiresIn||q.expiresIn||q.expires_in||3600,K=Date.now()+$*1e3;if((0,n.setLocalStorage)(A,H),(0,n.setLocalStorage)(O,K.toString()),D&&!(0,i.shouldSkipAudit)(G,R.audit))try{await D.log.audit("client.token.request.success",G,{method:"POST",url:G,statusCode:z.status,cached:!1},{})}catch(X){console.warn("Failed to log audit event:",X)}return H}catch(z){const q=(0,o.extractErrorInfo)(z,{endpoint:G,method:"POST",correlationId:D?.log?.generateCorrelationId?D.log.generateCorrelationId():void 0});if((0,l.logErrorWithContext)(q,"[DataClient] [AUTH] [ClientToken]"),D&&!(0,i.shouldSkipAudit)(G,R.audit))try{const H=z instanceof Error?z.message:"Unknown error";await D.log.audit("client.token.request.failed",G,{method:"POST",url:G,statusCode:q.statusCode||0,error:H,cached:!1,errorType:q.errorType,errorName:q.errorName,responseBody:q.responseBody},{errorCategory:"authentication",httpStatusCategory:q.statusCode&&q.statusCode>=500?"server-error":q.statusCode&&q.statusCode>=400?"client-error":"unknown",correlationId:q.correlationId})}catch(H){console.warn("Failed to log audit event:",H)}throw z}}function I(R){if(!(0,n.isBrowser)())return null;const D=(0,n.getLocalStorage)("miso:client-token");if(D)return(0,s.extractClientTokenInfo)(D);const A=R?.clientToken;return A?(0,s.extractClientTokenInfo)(A):null}})(ru)),ru}var I1;function Ik(){if(I1)return Qn;I1=1;var e=Qn&&Qn.__createBinding||(Object.create?(function(D,A,O,x){x===void 0&&(x=O);var M=Object.getOwnPropertyDescriptor(A,O);(!M||("get"in M?!A.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return A[O]}}),Object.defineProperty(D,x,M)}):(function(D,A,O,x){x===void 0&&(x=O),D[x]=A[O]})),t=Qn&&Qn.__setModuleDefault||(Object.create?(function(D,A){Object.defineProperty(D,"default",{enumerable:!0,value:A})}):function(D,A){D.default=A}),n=Qn&&Qn.__importStar||(function(){var D=function(A){return D=Object.getOwnPropertyNames||function(O){var x=[];for(var M in O)Object.prototype.hasOwnProperty.call(O,M)&&(x[x.length]=M);return x},D(A)};return function(A){if(A&&A.__esModule)return A;var O={};if(A!=null)for(var x=D(A),M=0;M<x.length;M++)x[M]!=="default"&&e(O,A,x[M]);return t(O,A),O}})();Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.DataClient=void 0,Qn.dataClient=R;const s=Pk(),c=ho(),i=On(),o=Rk(),l=_$(),f=Ak(),p=fv(),h=Ew(),u=Sw(),m=pf(),g=mf(),v=rh(),S=HR(),w=nv(),C=hf();class N{constructor(A){this.misoClient=null,this.cache=new Map,this.pendingRequests=new Map,this.failedRequests=new Map,this.interceptors={},this.metrics={totalRequests:0,totalFailures:0,responseTimes:[],cacheHits:0,cacheMisses:0},this.permissionService=null,this.roleService=null,this.config={tokenKeys:["token","accessToken","authToken"],loginUrl:"/login",timeout:3e4,cache:{enabled:!0,defaultTTL:300,maxSize:100},retry:{enabled:!0,maxRetries:3,baseDelay:1e3,maxDelay:1e4},audit:{enabled:!0,level:"standard",batchSize:10,maxResponseSize:1e4,maxMaskingSize:5e4,skipEndpoints:[]},...A},(0,i.isBrowser)()&&this.config.misoConfig?.clientSecret&&console.warn("âš ï¸ SECURITY WARNING: clientSecret detected in browser environment. Client secrets should NEVER be exposed in client-side code. Use the client token pattern instead (clientToken + onClientTokenRefresh). See documentation for browser-safe configuration.");let O;if(this.config.misoConfig&&(O={...this.config.misoConfig,onClientTokenRefresh:this.config.misoConfig.onClientTokenRefresh||((0,i.isBrowser)()&&!this.config.misoConfig.clientSecret?async()=>{const x=await this.getEnvironmentToken();if(!x)throw new Error("Failed to get client token");const M=(0,i.getLocalStorage)("miso:client-token-expires-at"),G=M?parseInt(M,10):Date.now()+36e5,V=Math.floor((G-Date.now())/1e3);return{token:x,expiresIn:V>0?V:3600}}:void 0)},this.misoClient=new s.MisoClient(O)),this.config.misoConfig?.sensitiveFieldsConfig&&c.DataMasker.setConfigPath(this.config.misoConfig.sensitiveFieldsConfig),this.misoClient&&O){const x=new v.InternalHttpClient(O),M=new C.RedisService(O.redis),G=new w.LoggerService(x,M),V=new g.HttpClient(O,G);G.httpClient=V;const z=new S.ApiClient(V);G.setApiClient(z);const q=new m.CacheService(void 0);this.permissionService=new h.BrowserPermissionService(V,z,q),this.roleService=new u.BrowserRoleService(V,z,q)}(0,i.isBrowser)()&&this.handleOAuthCallback()}getToken(){return(0,f.getToken)(this.config.tokenKeys)}hasClientToken(){return(0,f.hasClientToken)(this.misoClient,this.config.misoConfig)}hasAnyToken(){return(0,f.hasAnyToken)(this.config.tokenKeys,this.misoClient,this.config.misoConfig)}async getClientToken(){return(0,f.getClientToken)(this.config.misoConfig,this.config.baseUrl,()=>this.getEnvironmentToken())}getControllerUrl(){return(0,f.getControllerUrl)(this.config.misoConfig)}isAuthenticated(){return this.getToken()!==null}handleOAuthCallback(){return(0,f.handleOAuthCallback)(this.config)}async redirectToLogin(A){return(0,p.redirectToLogin)(this.config,()=>this.getClientToken(),A)}async logout(A){return(0,f.logout)(this.config,()=>this.getToken(),()=>this.getClientToken(),()=>this.clearCache(),A,this.misoClient)}setInterceptors(A){this.interceptors={...this.interceptors,...A}}setAuditConfig(A){this.config.audit={...this.config.audit,...A}}setLogLevel(A){if(this.misoClient&&this.config.misoConfig){this.config.misoConfig.logLevel=A;try{const O=this.misoClient.config;O&&(O.logLevel=A)}catch{}}}clearCache(){this.cache.clear()}getMetrics(){const A=(this.metrics.responseTimes||[]).sort((x,M)=>x-M),O=A.length;return{totalRequests:this.metrics.totalRequests,totalFailures:this.metrics.totalFailures,averageResponseTime:O>0?A.reduce((x,M)=>x+M,0)/O:0,responseTimeDistribution:{min:O>0?A[0]:0,max:O>0?A[O-1]:0,p50:O>0?A[Math.floor(O*.5)]:0,p95:O>0?A[Math.floor(O*.95)]:0,p99:O>0?A[Math.floor(O*.99)]:0},errorRate:this.metrics.totalRequests>0?this.metrics.totalFailures/this.metrics.totalRequests:0,cacheHitRate:this.metrics.cacheHits+this.metrics.cacheMisses>0?this.metrics.cacheHits/(this.metrics.cacheHits+this.metrics.cacheMisses):0}}async request(A,O,x){const M=Date.now(),G=`${this.config.baseUrl}${O}`,V={...x,method:A.toUpperCase()},z=(0,o.getCacheKeyForRequest)(O,V),q=A.toUpperCase()==="GET",H=(0,o.isCacheEnabled)(A,this.config.cache,x),$=this.failedRequests.get(z);if($){const X=Date.now()-$.timestamp,B=$.count||1;if(X<(B===1?5e3:B===2?15e3:3e4))throw $.error;this.failedRequests.delete(z)}if(H){const X=(0,o.getCachedEntry)(this.cache,z,this.metrics);if(X!==null)return X}if(q){const X=this.pendingRequests.get(z);if(X)return X}let K;q?(K=(async()=>{try{return await(0,l.executeHttpRequest)(A,G,O,this.config,this.cache,z,H,M,this.misoClient,()=>this.hasAnyToken(),()=>this.getToken(),()=>this.handleAuthError(),()=>this.refreshUserToken(),this.interceptors,this.metrics,x)}finally{this.pendingRequests.delete(z)}})(),this.pendingRequests.set(z,K)):K=(0,l.executeHttpRequest)(A,G,O,this.config,this.cache,z,H,M,this.misoClient,()=>this.hasAnyToken(),()=>this.getToken(),()=>this.handleAuthError(),()=>this.refreshUserToken(),this.interceptors,this.metrics,x);try{const X=await K;return this.failedRequests.delete(z),X}catch(X){const B=this.failedRequests.get(z),te=B?(B.count||1)+1:1;throw this.failedRequests.set(z,{timestamp:Date.now(),error:X,count:te}),setTimeout(()=>{this.failedRequests.delete(z)},3e4),X}}async refreshUserToken(){if(!this.config.onTokenRefresh)return null;try{const A=await this.config.onTokenRefresh();if((0,i.isBrowser)()&&A.token){const{setLocalStorage:O}=await Promise.resolve().then(()=>n(On())),x=this.config.tokenKeys||["token","accessToken","authToken"];for(const M of x)O(M,A.token)}return A}catch(A){return console.error("Token refresh failed:",A),null}}handleAuthError(){(0,i.isBrowser)()&&this.redirectToLogin().catch(A=>{console.error("Failed to redirect to login:",A)})}async applyRequestInterceptor(A,O){return this.interceptors.onRequest?await this.interceptors.onRequest(A,O):O}async get(A,O){const x=await this.applyRequestInterceptor(A,{...O,method:"GET"});return this.request("GET",A,x)}async post(A,O,x){const M=await this.applyRequestInterceptor(A,{...x,method:"POST",body:O?JSON.stringify(O):void 0,headers:{"Content-Type":"application/json",...x?.headers}});return this.request("POST",A,M)}async put(A,O,x){const M=await this.applyRequestInterceptor(A,{...x,method:"PUT",body:O?JSON.stringify(O):void 0,headers:{"Content-Type":"application/json",...x?.headers}});return this.request("PUT",A,M)}async patch(A,O,x){const M=await this.applyRequestInterceptor(A,{...x,method:"PATCH",body:O?JSON.stringify(O):void 0,headers:{"Content-Type":"application/json",...x?.headers}});return this.request("PATCH",A,M)}async delete(A,O){const x=await this.applyRequestInterceptor(A,{...O,method:"DELETE"});return this.request("DELETE",A,x)}async getPermissions(A){if(!this.misoClient||!this.permissionService)return[];const O=A||this.getToken();return O?this.permissionService.getPermissions(O):[]}async hasPermission(A,O){if(!this.misoClient||!this.permissionService)return!1;const x=O||this.getToken();return x?this.permissionService.hasPermission(x,A):!1}async hasAnyPermission(A,O){if(!this.misoClient||!this.permissionService)return!1;const x=O||this.getToken();return x?this.permissionService.hasAnyPermission(x,A):!1}async hasAllPermissions(A,O){if(!this.misoClient||!this.permissionService)return!1;const x=O||this.getToken();return x?this.permissionService.hasAllPermissions(x,A):!1}async refreshPermissions(A){if(!this.misoClient||!this.permissionService)return[];const O=A||this.getToken();return O?this.permissionService.refreshPermissions(O):[]}async clearPermissionsCache(A){if(!this.misoClient||!this.permissionService)return;const O=A||this.getToken();if(O)return this.permissionService.clearPermissionsCache(O)}async getRoles(A){if(!this.misoClient||!this.roleService)return[];const O=A||this.getToken();return O?this.roleService.getRoles(O):[]}async hasRole(A,O){if(!this.misoClient||!this.roleService)return!1;const x=O||this.getToken();return x?this.roleService.hasRole(x,A):!1}async hasAnyRole(A,O){if(!this.misoClient||!this.roleService)return!1;const x=O||this.getToken();return x?this.roleService.hasAnyRole(x,A):!1}async hasAllRoles(A,O){if(!this.misoClient||!this.roleService)return!1;const x=O||this.getToken();return x?this.roleService.hasAllRoles(x,A):!1}async refreshRoles(A){if(!this.misoClient||!this.roleService)return[];const O=A||this.getToken();return O?this.roleService.refreshRoles(O):[]}async clearRolesCache(A){if(!this.misoClient||!this.roleService)return;const O=A||this.getToken();if(O)return this.roleService.clearRolesCache(O)}async validateToken(A){if(!this.misoClient)return!1;const O=A||this.getToken();return O?this.misoClient.validateToken(O):!1}async getUser(A){if(!this.misoClient)return null;const O=A||this.getToken();return O?this.misoClient.getUser(O):null}async getUserInfo(A){if(!this.misoClient)return null;const O=A||this.getToken();return O?this.misoClient.getUserInfo(O):null}async isAuthenticatedAsync(A){return this.validateToken(A)}async getEnvironmentToken(){return(0,f.getEnvironmentToken)(this.config,this.misoClient)}getClientTokenInfo(){return(0,f.getClientTokenInfo)(this.config.misoConfig)}}Qn.DataClient=N;let I=null;function R(D){if(!I&&D&&(I=new N(D)),!I)throw new Error("DataClient not initialized. Call dataClient(config) first.");return I}return Qn}var nu={},P1;function x$(){if(P1)return nu;P1=1,Object.defineProperty(nu,"__esModule",{value:!0}),nu.getCachedDataClientConfig=c,nu.autoInitializeDataClient=l;const e=Ik(),t=On(),n=th();function s(){if(!(0,t.isBrowser)())return null;try{const f=(0,t.getLocalStorage)("miso:dataclient-config");if(!f)return null;const p=JSON.parse(f);return p.expiresAt&&p.expiresAt<Date.now()?((0,t.removeLocalStorage)("miso:dataclient-config"),null):p}catch{return(0,t.removeLocalStorage)("miso:dataclient-config"),null}}function c(){return s()?.config||null}function i(f,p){if((0,t.isBrowser)())try{const h={config:f,expiresAt:Date.now()+p*1e3};(0,t.setLocalStorage)("miso:dataclient-config",JSON.stringify(h))}catch{}}async function o(f,p){const h=/^https?:\/\//i.test(p)?p:`${f}${p}`,u=3e4,m=new AbortController,g=setTimeout(()=>m.abort(),u);try{let v;try{v=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",signal:m.signal})}catch(w){clearTimeout(g);const C=w instanceof Error?w.message:String(w);throw(w instanceof Error?w.name:"Unknown")==="AbortError"||C.includes("aborted")?new Error(`Request timeout: The client token endpoint did not respond within ${u}ms. Please check if the server is running and accessible at ${h}`):C.includes("ERR_EMPTY_RESPONSE")||C.includes("empty response")?new Error(`Connection error: The server closed the connection without sending a response. Please check if the server is running and accessible at ${h}`):C.includes("Failed to fetch")||C.includes("network")?new Error(`Network error: Cannot connect to ${h}. Please check your network connection and ensure the server is running.`):new Error(`Failed to fetch config: ${C}`)}if(clearTimeout(g),v.status===405){const w=new AbortController,C=setTimeout(()=>w.abort(),u);try{v=await fetch(h,{method:"GET",credentials:"include",signal:w.signal}),clearTimeout(C)}catch(N){clearTimeout(C);const I=N instanceof Error?N.message:String(N);throw(N instanceof Error?N.name:"Unknown")==="AbortError"||I.includes("aborted")?new Error(`Request timeout: The client token endpoint did not respond within ${u}ms. Please check if the server is running and accessible at ${h}`):new Error(`Failed to fetch config: ${I}`)}}if(!v.ok){let w=`Failed to fetch config: ${v.status} ${v.statusText}`,C;try{const I=v.headers.get("content-type");if(I&&I.includes("application/json")){const R=await v.json().catch(()=>null);if(R&&(typeof R.message=="string"?w=R.message:typeof R.error=="string"&&(w=R.error),R.details)){if(typeof R.details=="string")C=R.details;else if(typeof R.details=="object"&&R.details!==null){const D=R.details;typeof D.suggestion=="string"?C=D.suggestion:typeof D.controllerUrl=="string"&&(C=`Controller URL: ${D.controllerUrl}`)}}}else{const R=await v.text().catch(()=>"Unable to read error response");R&&R!=="Unable to read error response"&&(w=`${w}. ${R}`)}}catch{try{const R=await v.text().catch(()=>"");R&&(w=`${w}. ${R}`)}catch{}}const N=C?`${w}. ${C}`:w;throw new Error(N)}const S=await v.json();if(!(0,n.hasConfig)(S))throw new Error("Invalid response format: config not found in response. Make sure your server endpoint uses createClientTokenEndpoint() helper.");return S.config}catch(v){throw v instanceof Error?v:new Error(`Network error: ${String(v)}`)}}async function l(f){if(!(0,t.isBrowser)())throw new Error("autoInitializeDataClient() is only available in browser environment");const p={clientTokenUri:f?.clientTokenUri||"/api/v1/auth/client-token",cacheConfig:f?.cacheConfig??!0,baseUrl:f?.baseUrl,onError:f?.onError};try{const h=p.baseUrl||((0,t.isBrowser)()?globalThis.window.location.origin:"");if(!h)throw new Error("Unable to detect baseUrl. Please provide baseUrl option.");let u=null;if(p.cacheConfig){const g=s();g&&(u=g.config)}u||(u=await o(h,p.clientTokenUri),p.cacheConfig&&i(u,1800));const m={baseUrl:u.baseUrl,misoConfig:{clientId:u.clientId,controllerUrl:u.controllerUrl,controllerPublicUrl:u.controllerPublicUrl,clientTokenUri:u.clientTokenUri}};return new e.DataClient(m)}catch(h){const u=h instanceof Error?h:new Error(String(h));throw p.onError&&p.onError(u),u}}return nu}var O1;function Pk(){return O1||(O1=1,(function(e){var t=Zo&&Zo.__createBinding||(Object.create?(function(ce,Y,re,me){me===void 0&&(me=re);var xe=Object.getOwnPropertyDescriptor(Y,re);(!xe||("get"in xe?!Y.__esModule:xe.writable||xe.configurable))&&(xe={enumerable:!0,get:function(){return Y[re]}}),Object.defineProperty(ce,me,xe)}):(function(ce,Y,re,me){me===void 0&&(me=re),ce[me]=Y[re]})),n=Zo&&Zo.__exportStar||function(ce,Y){for(var re in ce)re!=="default"&&!Object.prototype.hasOwnProperty.call(Y,re)&&t(Y,ce,re)};Object.defineProperty(e,"__esModule",{value:!0}),e.TokenValidationService=e.getCachedDataClientConfig=e.autoInitializeDataClient=e.dataClient=e.DataClient=e.loggerContextMiddleware=e.hasConfig=e.createClientTokenEndpoint=e.EncryptionUtil=e.sendErrorResponse=e.getErrorTitle=e.getErrorTypeUri=e.handleRouteError=e.setErrorLogger=e.createErrorResponse=e.createSuccessResponse=e.AppError=e.ValidationHelper=e.asyncHandlerNamed=e.asyncHandler=e.injectResponseHelpers=e.ResponseHelper=e.handleApiError=e.transformError=e.ApiErrorException=e.MisoClientError=e.extractRequestContext=e.extractLoggingContext=e.validateUrl=e.isBrowser=e.resolveControllerUrl=e.extractClientTokenInfo=e.getEnvironmentToken=e.validateOrigin=e.loadConfig=e.mergeLoggerContext=e.clearLoggerContext=e.setLoggerContext=e.getLogger=e.HttpClient=e.CacheService=e.RedisService=e.LoggerService=e.BrowserRoleService=e.BrowserPermissionService=e.PermissionService=e.RoleService=e.AuthService=e.MisoClient=void 0;const s=D_(),c=U_(),i=M_(),o=nv(),l=hf(),f=pf(),p=mf(),h=rh(),u=HR(),m=ho(),g=MR(),v=mu(),S=m1();class w{constructor(Y){this.initialized=!1,this.config=Y,Y.sensitiveFieldsConfig&&m.DataMasker.setConfigPath(Y.sensitiveFieldsConfig);const re=new h.InternalHttpClient(Y);this.redis=new l.RedisService(Y.redis),this.logger=new o.LoggerService(re,this.redis),this.httpClient=new p.HttpClient(Y,this.logger),this.logger.httpClient=this.httpClient,this.apiClient=new u.ApiClient(this.httpClient),this.logger.setApiClient(this.apiClient);const{registerLoggerService:me}=hu();me(this.logger),this.cacheService=new f.CacheService(this.redis),this.auth=new s.AuthService(this.httpClient,this.apiClient,this.cacheService),this.roles=new c.RoleService(this.httpClient,this.apiClient,this.cacheService),this.permissions=new i.PermissionService(this.httpClient,this.apiClient,this.cacheService),this.tokenValidation=new S.TokenValidationService(Y.keycloak)}async initialize(){if(!this.initialized)try{await this.redis.connect(),this.initialized=!0}catch{this.initialized=!0}}async disconnect(){await this.redis.disconnect(),this.initialized=!1}isInitialized(){return this.initialized}getToken(Y){const re=Y.headers.authorization;return re?re.startsWith("Bearer ")?re.substring(7):re:null}validateOrigin(Y,re){const me=re??this.config.allowedOrigins;return(0,v.validateOrigin)(Y,me)}async getEnvironmentToken(){return this.auth.getEnvironmentToken()}async login(Y){return this.auth.login(Y)}async validateToken(Y,re){return this.auth.validateToken(Y,re)}async getUser(Y,re){return this.auth.getUser(Y,re)}async getUserInfo(Y,re){return this.auth.getUserInfo(Y,re)}async isAuthenticated(Y,re){return this.auth.isAuthenticated(Y,re)}async logout(Y){return this.auth.logout(Y)}async refreshToken(Y,re){return this.auth.refreshToken(Y,re)}async validateTokenLocal(Y,re){return this.tokenValidation.validateTokenLocal(Y,re)}setKeycloakConfig(Y){this.tokenValidation.setKeycloakConfig(Y)}clearJwksCache(Y){this.tokenValidation.clearCache(Y)}clearValidationCache(){this.tokenValidation.clearResultCache()}clearAllTokenCaches(){this.tokenValidation.clearAllCaches()}async getRoles(Y,re){return this.roles.getRoles(Y,re)}async hasRole(Y,re,me){return this.roles.hasRole(Y,re,me)}async hasAnyRole(Y,re,me){return this.roles.hasAnyRole(Y,re,me)}async hasAllRoles(Y,re,me){return this.roles.hasAllRoles(Y,re,me)}async refreshRoles(Y,re){return this.roles.refreshRoles(Y,re)}async getPermissions(Y,re){return this.permissions.getPermissions(Y,re)}async hasPermission(Y,re,me){return this.permissions.hasPermission(Y,re,me)}async hasAnyPermission(Y,re,me){return this.permissions.hasAnyPermission(Y,re,me)}async hasAllPermissions(Y,re,me){return this.permissions.hasAllPermissions(Y,re,me)}async refreshPermissions(Y,re){return this.permissions.refreshPermissions(Y,re)}async clearPermissionsCache(Y,re){return this.permissions.clearPermissionsCache(Y,re)}get log(){return this.logger}get cache(){return this.cacheService}getConfig(){return{...this.config}}isRedisConnected(){return this.redis.isConnected()}async requestWithAuthStrategy(Y,re,me,xe,Oe){return this.httpClient.requestWithAuthStrategy(Y,re,me,xe,Oe)}createAuthStrategy(Y,re,me){return{methods:Y,bearerToken:re,apiKey:me}}getDefaultAuthStrategy(Y){return g.AuthStrategyHandler.getDefaultStrategy(Y)}}e.MisoClient=w,n(Cu(),e),n(v$(),e),n(nw(),e),n(w$(),e);var C=D_();Object.defineProperty(e,"AuthService",{enumerable:!0,get:function(){return C.AuthService}});var N=U_();Object.defineProperty(e,"RoleService",{enumerable:!0,get:function(){return N.RoleService}});var I=M_();Object.defineProperty(e,"PermissionService",{enumerable:!0,get:function(){return I.PermissionService}});var R=Ew();Object.defineProperty(e,"BrowserPermissionService",{enumerable:!0,get:function(){return R.BrowserPermissionService}});var D=Sw();Object.defineProperty(e,"BrowserRoleService",{enumerable:!0,get:function(){return D.BrowserRoleService}});var A=nv();Object.defineProperty(e,"LoggerService",{enumerable:!0,get:function(){return A.LoggerService}});var O=hf();Object.defineProperty(e,"RedisService",{enumerable:!0,get:function(){return O.RedisService}});var x=pf();Object.defineProperty(e,"CacheService",{enumerable:!0,get:function(){return x.CacheService}});var M=mf();Object.defineProperty(e,"HttpClient",{enumerable:!0,get:function(){return M.HttpClient}});var G=hu();Object.defineProperty(e,"getLogger",{enumerable:!0,get:function(){return G.getLogger}}),Object.defineProperty(e,"setLoggerContext",{enumerable:!0,get:function(){return G.setLoggerContext}}),Object.defineProperty(e,"clearLoggerContext",{enumerable:!0,get:function(){return G.clearLoggerContext}}),Object.defineProperty(e,"mergeLoggerContext",{enumerable:!0,get:function(){return G.mergeLoggerContext}});var V=E$();Object.defineProperty(e,"loadConfig",{enumerable:!0,get:function(){return V.loadConfig}});var z=mu();Object.defineProperty(e,"validateOrigin",{enumerable:!0,get:function(){return z.validateOrigin}});var q=eh();Object.defineProperty(e,"getEnvironmentToken",{enumerable:!0,get:function(){return q.getEnvironmentToken}});var H=_i();Object.defineProperty(e,"extractClientTokenInfo",{enumerable:!0,get:function(){return H.extractClientTokenInfo}});var $=ma();Object.defineProperty(e,"resolveControllerUrl",{enumerable:!0,get:function(){return $.resolveControllerUrl}}),Object.defineProperty(e,"isBrowser",{enumerable:!0,get:function(){return $.isBrowser}}),Object.defineProperty(e,"validateUrl",{enumerable:!0,get:function(){return $.validateUrl}});var K=S$();Object.defineProperty(e,"extractLoggingContext",{enumerable:!0,get:function(){return K.extractLoggingContext}});var X=Tu();Object.defineProperty(e,"extractRequestContext",{enumerable:!0,get:function(){return X.extractRequestContext}}),n(NR(),e),n(b$(),e),n(T$(),e);var B=pa();Object.defineProperty(e,"MisoClientError",{enumerable:!0,get:function(){return B.MisoClientError}}),Object.defineProperty(e,"ApiErrorException",{enumerable:!0,get:function(){return B.ApiErrorException}}),Object.defineProperty(e,"transformError",{enumerable:!0,get:function(){return B.transformError}}),Object.defineProperty(e,"handleApiError",{enumerable:!0,get:function(){return B.handleApiError}});var te=C$();Object.defineProperty(e,"ResponseHelper",{enumerable:!0,get:function(){return te.ResponseHelper}}),Object.defineProperty(e,"injectResponseHelpers",{enumerable:!0,get:function(){return te.injectResponseHelpers}}),Object.defineProperty(e,"asyncHandler",{enumerable:!0,get:function(){return te.asyncHandler}}),Object.defineProperty(e,"asyncHandlerNamed",{enumerable:!0,get:function(){return te.asyncHandlerNamed}}),Object.defineProperty(e,"ValidationHelper",{enumerable:!0,get:function(){return te.ValidationHelper}}),Object.defineProperty(e,"AppError",{enumerable:!0,get:function(){return te.AppError}}),Object.defineProperty(e,"createSuccessResponse",{enumerable:!0,get:function(){return te.createSuccessResponse}}),Object.defineProperty(e,"createErrorResponse",{enumerable:!0,get:function(){return te.createErrorResponse}}),Object.defineProperty(e,"setErrorLogger",{enumerable:!0,get:function(){return te.setErrorLogger}}),Object.defineProperty(e,"handleRouteError",{enumerable:!0,get:function(){return te.handleRouteError}}),Object.defineProperty(e,"getErrorTypeUri",{enumerable:!0,get:function(){return te.getErrorTypeUri}}),Object.defineProperty(e,"getErrorTitle",{enumerable:!0,get:function(){return te.getErrorTitle}}),Object.defineProperty(e,"sendErrorResponse",{enumerable:!0,get:function(){return te.sendErrorResponse}}),Object.defineProperty(e,"EncryptionUtil",{enumerable:!0,get:function(){return te.EncryptionUtil}}),Object.defineProperty(e,"createClientTokenEndpoint",{enumerable:!0,get:function(){return te.createClientTokenEndpoint}}),Object.defineProperty(e,"hasConfig",{enumerable:!0,get:function(){return te.hasConfig}}),Object.defineProperty(e,"loggerContextMiddleware",{enumerable:!0,get:function(){return te.loggerContextMiddleware}});var ae=Ik();Object.defineProperty(e,"DataClient",{enumerable:!0,get:function(){return ae.DataClient}}),Object.defineProperty(e,"dataClient",{enumerable:!0,get:function(){return ae.dataClient}});var Z=x$();Object.defineProperty(e,"autoInitializeDataClient",{enumerable:!0,get:function(){return Z.autoInitializeDataClient}}),Object.defineProperty(e,"getCachedDataClientConfig",{enumerable:!0,get:function(){return Z.getCachedDataClientConfig}});var oe=m1();Object.defineProperty(e,"TokenValidationService",{enumerable:!0,get:function(){return oe.TokenValidationService}})})(Zo)),Zo}var oa={},N1;function Ok(){if(N1)return oa;N1=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.getCachedEntry=t,oa.setCacheEntry=n,oa.isCacheEnabled=s,oa.getCacheKeyForRequest=c;const e=bi();function t(i,o,l){const f=i.get(o);return f&&f.expiresAt>Date.now()?(l.cacheHits++,f.data):(l.cacheMisses++,null)}function n(i,o,l,f,p){if(i.set(o,{data:l,expiresAt:Date.now()+f*1e3,key:o}),i.size>p){const h=i.keys().next().value;h&&i.delete(h)}}function s(i,o,l){const f=i.toUpperCase()==="GET";return o?.enabled!==!1&&f&&l?.cache?.enabled!==!1}function c(i,o){return o?.cache?.key||(0,e.generateCacheKey)(i,o)}return oa}var to={},su={},L1;function Nk(){if(L1)return su;L1=1,Object.defineProperty(su,"__esModule",{value:!0}),su.shouldSkipAudit=n,su.logDataClientAudit=s;const e=pc(),t=bi();function n(c,i){return i?.enabled?(i.skipEndpoints||[]).some(l=>c.includes(l)):!0}async function s(c,i,o,l,f,p,h,u,m,g,v,S,w,C,N){if(!(n(i,p)||!f)&&h())try{const I=u(),R=I?(0,t.extractUserIdFromToken)(I):void 0,D=p?.level||"standard",A={method:c,url:i,statusCode:o,duration:l};if(R&&(A.userId=R),D==="minimal"){await f.log.audit(`http.request.${c.toLowerCase()}`,i,A,{token:I||void 0});return}const O=p?.maxResponseSize||1e4,x=p?.maxMaskingSize||5e4;let M;if(C!==void 0){const q=(0,t.truncatePayload)(C,x);q.truncated?M=q.data:M=e.DataMasker.maskSensitiveData(q.data)}let G;if(N!==void 0){const q=(0,t.truncatePayload)(N,O);q.truncated?G=q.data:G=e.DataMasker.maskSensitiveData(q.data)}const V=S?e.DataMasker.maskSensitiveData(S):void 0,z=w?e.DataMasker.maskSensitiveData(w):void 0;if(V&&(A.requestHeaders=V),z&&(A.responseHeaders=z),M!==void 0&&(A.requestBody=M),G!==void 0&&(A.responseBody=G),(D==="detailed"||D==="full")&&(m!==void 0&&(A.requestSize=m),g!==void 0&&(A.responseSize=g)),v){const q=e.DataMasker.maskSensitiveData({message:v.message,name:v.name,stack:v.stack});A.error=q}await f.log.audit(`http.request.${c.toLowerCase()}`,i,A,{token:I||void 0})}catch(I){const R=I,D=R.statusCode||R.response?.status,A=R.message||String(I),O=R.code,x=O==="ECONNREFUSED"||O==="ENOTFOUND"||A.includes("ERR_CONNECTION_REFUSED")||A.includes("Failed to fetch")||A.includes("NetworkError")||A.includes("network error");if(D===401||x)return;console.warn("Failed to log audit event:",I)}}return su}var Gd={},j1;function Lk(){if(j1)return Gd;j1=1,Object.defineProperty(Gd,"__esModule",{value:!0}),Gd.extractErrorInfo=n;const e=Wv(),t=zf();function n(s,c){const i={errorType:"Unknown",errorName:"Error",message:"Unknown error",endpoint:c?.endpoint,method:c?.method,correlationId:c?.correlationId};if(s instanceof e.MisoClientError)i.errorType="MisoClientError",i.errorName=s.name,i.message=s.message,i.statusCode=s.statusCode,i.stackTrace=s.stack,s.errorResponse&&"correlationId"in s.errorResponse&&(i.correlationId=i.correlationId||s.errorResponse.correlationId),s.errorResponse?i.responseBody={errors:s.errorResponse.errors,type:s.errorResponse.type,title:s.errorResponse.title,statusCode:s.errorResponse.statusCode,instance:s.errorResponse.instance,correlationId:s.errorResponse.correlationId}:s.errorBody&&(i.responseBody=s.errorBody);else if(s instanceof t.ApiError){if(i.errorType=s.name,i.errorName=s.name,i.message=s.message,i.statusCode=s.statusCode,i.stackTrace=s.stack,i.originalError=s.originalError,s.response)try{i.responseBody={status:s.statusCode,message:s.message}}catch{}}else s instanceof t.AuthenticationError?(i.errorType="AuthenticationError",i.errorName=s.name,i.message=s.message,i.statusCode=401,i.stackTrace=s.stack):s instanceof t.NetworkError?(i.errorType="NetworkError",i.errorName=s.name,i.message=s.message,i.statusCode=0,i.stackTrace=s.stack):s instanceof t.TimeoutError?(i.errorType="TimeoutError",i.errorName=s.name,i.message=s.message,i.statusCode=408,i.stackTrace=s.stack):s instanceof Error?(i.errorType="Error",i.errorName=s.name,i.message=s.message,i.stackTrace=s.stack):(i.errorType="Unknown",i.errorName="UnknownError",i.message=typeof s=="string"?s:s&&typeof s=="object"&&"message"in s?String(s.message):"Unknown error occurred");return i}return Gd}var Jd={},D1;function jk(){if(D1)return Jd;D1=1,Object.defineProperty(Jd,"__esModule",{value:!0}),Jd.logErrorWithContext=e;function e(t,n="[MisoClient]"){const s=t.correlationId||"no-correlation-id",c=[];c.push(`${t.errorName}: ${t.message}`),t.statusCode!==void 0&&c.push(`Status: ${t.statusCode}`),t.endpoint&&t.method?c.push(`Endpoint: ${t.method} ${t.endpoint}`):t.endpoint?c.push(`Endpoint: ${t.endpoint}`):t.method&&c.push(`Method: ${t.method}`);const i=c.join(" | ");console.error(`${n} [${s}] ${i}`),t.responseBody&&console.error(`${n} [${s}] Response Body:`,JSON.stringify(t.responseBody,null,2)),t.stackTrace&&console.error(`${n} [${s}] Stack Trace:`,t.stackTrace),t.originalError&&console.error(`${n} [${s}] Original Error:`,t.originalError)}return Jd}var $1;function R$(){if($1)return to;$1=1,Object.defineProperty(to,"__esModule",{value:!0}),to.extractHeaders=o,to.parseResponse=l,to.mergeSignals=f,to.makeFetchRequest=p,to.executeHttpRequest=S;const e=zf(),t=bi(),n=Ok(),s=Nk(),c=Lk(),i=jk();function o(w){if(!w)return;if(w instanceof Headers){const N={};return w.forEach((I,R)=>{N[R]=I}),N}if(Array.isArray(w)){const N={};return w.forEach(([I,R])=>{N[I]=String(R)}),N}const C={};return Object.entries(w).forEach(([N,I])=>{C[N]=Array.isArray(I)?I.join(", "):String(I)}),C}async function l(w){const C=w.headers.get("content-type")||"";return C.includes("application/json")?await w.json():C.includes("text/")?await w.text():await w.blob()}function f(w,C){const N=new AbortController,I=()=>{N.abort(),w.removeEventListener("abort",I),C.removeEventListener("abort",I)};return w.aborted||C.aborted?(N.abort(),N.signal):(w.addEventListener("abort",I),C.addEventListener("abort",I),N.signal)}async function p(w,C,N,I,R){const D=new Headers(N.defaultHeaders);if(R?.headers&&(R.headers instanceof Headers?R.headers.forEach((K,X)=>D.set(X,K)):Object.entries(R.headers).forEach(([K,X])=>{D.set(K,String(X))})),!R?.skipAuth){const K=I();K&&D.set("Authorization",`Bearer ${K}`)}const A=R?.timeout||N.timeout||3e4,O=new AbortController,x=setTimeout(()=>O.abort(),A),M=R?.signal?f(O.signal,R.signal):O.signal,{cache:G,skipAuth:V,retries:z,skipAudit:q,timeout:H,...$}=R||{};try{const K=await fetch(C,{method:w,headers:D,body:$.body,signal:M,...$});return clearTimeout(x),K}catch(K){throw clearTimeout(x),K instanceof Error&&K.name==="AbortError"?new e.TimeoutError(`Request timeout after ${A}ms`,A):new e.NetworkError(`Network error: ${K instanceof Error?K.message:"Unknown error"}`,K instanceof Error?K:void 0)}}async function h(w,C,N,I,R,D,A,O,x,M,G,V,z,q,H){const $=Date.now()-R;if(q.totalRequests++,q.responseTimes.push($),x&&w.ok){const K=H?.cache?.ttl||D.cache?.defaultTTL||300;(0,n.setCacheEntry)(A,O,C,K,D.cache?.maxSize||100)}if(z.onResponse)return await z.onResponse(w,C);if(!H?.skipAudit){const K=H?.body?(0,t.calculateSize)(H.body):void 0,X=(0,t.calculateSize)(C);await(0,s.logDataClientAudit)(N,I,w.status,$,M,D.audit,G,V,K,X,void 0,o(H?.headers),o(w.headers),H?.body,C)}if(!w.ok)throw new e.ApiError(`Request failed with status ${w.status}`,w.status,w);return C}function u(w){if(w?.log&&typeof w.log.generateCorrelationId=="function")return w.log.generateCorrelationId();const C=Date.now(),N=Math.random().toString(36).substring(2,8);return`${C}-${N}`}async function m(w,C,N,I,R,D,A,O,x,M,G,V,z){const q=Date.now()-I;V.totalFailures++;const H=(0,c.extractErrorInfo)(w,{endpoint:N,method:C,correlationId:u(O)});if((0,i.logErrorWithContext)(H,"[DataClient]"),!z?.skipAudit&&O?.log){const $=R||D?R&&R>=500?"server-error":R&&R>=400?"client-error":"success":"unknown";await(0,s.logDataClientAudit)(C,N,R||D||401,q,O,A.audit,x,M,z?.body?(0,t.calculateSize)(z.body):void 0,void 0,w,o(z?.headers),void 0,z?.body,void 0);try{await O.log.error(`Request failed: ${H.message}`,{errorType:H.errorType,errorName:H.errorName,statusCode:H.statusCode,endpoint:H.endpoint,method:H.method,responseBody:H.responseBody},H.stackTrace,{errorCategory:H.errorType.toLowerCase().replace("error",""),httpStatusCategory:$,correlationId:H.correlationId})}catch{}}throw w}function g(w,C,N,I,R,D,A,O,x,M,G,V){M(),G.totalFailures++;const z=(0,c.extractErrorInfo)(w,{endpoint:I,method:N,correlationId:u(A)});if((0,i.logErrorWithContext)(z,"[DataClient] [AUTH]"),!V?.skipAudit){const q=Date.now()-R;(0,s.logDataClientAudit)(N,I,C,q,A,D.audit,O,x,V?.body?(0,t.calculateSize)(V.body):void 0,void 0,w,o(V?.headers),void 0,V?.body,void 0).catch(()=>{}),A?.log&&A.log.error(`Authentication error: ${z.message}`,{authFlow:"token_validation_failed",errorType:z.errorType,errorName:z.errorName,statusCode:z.statusCode,endpoint:z.endpoint,method:z.method,responseBody:z.responseBody},z.stackTrace,{errorCategory:"authentication",httpStatusCategory:"client-error",correlationId:z.correlationId}).catch(()=>{})}}async function v(w,C,N){const I=(0,t.calculateBackoffDelay)(w,C,N);await new Promise(R=>setTimeout(R,I))}async function S(w,C,N,I,R,D,A,O,x,M,G,V,z,q,H,$){const K=$?.retries!==void 0?$.retries:I.retry?.maxRetries||3,X=I.retry?.enabled!==!1,B=I.retry?.baseDelay||1e3,te=I.retry?.maxDelay||1e4;let ae=!1,Z=!1;async function oe(ce){if(ae)throw new e.AuthenticationError("Authentication error detected - should not retry");let Y,re;try{if(re=await p(w,C,I,G,$),Y=re.status,Y===401||Y===403){if(Y===401&&I.onTokenRefresh&&z&&ce===0&&!Z){Z=!0;try{const Oe=await z();if(Oe&&Oe.token)return await new Promise(qe=>setTimeout(qe,10)),oe(ce+1)}catch(Oe){console.warn("Token refresh failed, redirecting to login:",Oe)}}ae=!0;const xe=Y===401?new e.AuthenticationError("Authentication required",re):new e.ApiError("Forbidden",403,re);throw g(xe,Y,w,N,O,I,x,M,G,V,H,$),xe}const me=await l(re);return await h(re,me,w,N,O,I,R,D,A,x,M,G,q,H,$)}catch(me){if(me instanceof e.AuthenticationError||Y===401||Y===403)throw ae=!0,me;const xe=me;if(xe.name==="AuthenticationError"||xe.statusCode===401||xe.statusCode===403)throw ae=!0,me;const Oe=xe.response?.status,qe=me instanceof e.AuthenticationError?401:xe.statusCode??Oe??Y??void 0,lt=qe&&qe>=500&&qe<600;if(!(X&&!lt&&ce<(lt?0:K)&&(0,t.isRetryableError)(qe,me))){if(me instanceof e.AuthenticationError||me.name==="AuthenticationError"||qe===401||qe===403||Y===401||Y===403)throw ae=!0,me;H.totalFailures++,await m(me,w,N,O,qe,Y,I,x,M,G,q,H,$)}if(ae)throw ae=!0,me;return await v(ce,B,te),oe(ce+1)}}try{return await oe(0)}catch(ce){const Y=ce instanceof e.AuthenticationError||ce.name==="AuthenticationError"||ce.statusCode===401||ce.statusCode===403;throw H.totalFailures++,q.onError&&!Y?await q.onError(ce):ce}}return to}var iu={},nc={},U1;function hv(){if(U1)return nc;U1=1,Object.defineProperty(nc,"__esModule",{value:!0}),nc.getValidatedRedirectUrl=s,nc.redirectToLogin=c,nc.logout=i;const e=Dk(),t=bi();function n(o){if(!o||typeof o!="string"||o.trim()==="")return null;const l=o.trim(),f=["javascript:","data:","vbscript:","file:","about:"],p=l.toLowerCase();for(const m of f)if(p.startsWith(m))return null;let h;try{if(l.startsWith("/")||!l.includes("://")){const m=globalThis.window.location.origin;h=new URL(l,m)}else h=new URL(l)}catch{return null}return h.protocol!=="http:"&&h.protocol!=="https:"?null:h.href}function s(o,l){const f=n(o);if(f)return f;if(l){const p=n(l);if(p)return p}return null}async function c(o,l,f){if(!(0,t.isBrowser)())return;const p=globalThis.window.location.href,h=f||p,u=(0,e.getControllerUrl)(o.misoConfig);if(!u){const S=new Error("Controller URL is not configured. Please configure controllerUrl or controllerPublicUrl in your DataClient configuration.");throw S.details={hasMisoConfig:!!o.misoConfig,controllerUrl:o.misoConfig?.controllerUrl,controllerPublicUrl:o.misoConfig?.controllerPublicUrl,controllerPrivateUrl:o.misoConfig?.controllerPrivateUrl},S}const m=await l();let g=o.loginUrl||"/login";g.startsWith("/api/")&&(console.warn(`âš ï¸ Warning: loginUrl is set to an API endpoint (${g}). redirectToLogin() should redirect to a login PAGE (e.g., '/login'), not an API endpoint. Using default '/login' instead.`),g="/login");let v;/^https?:\/\//i.test(g)?v=new URL(g):v=new URL(g,u),v.searchParams.set("redirect",h),m&&v.searchParams.set("x-client-token",m),globalThis.window.location.href=v.toString()}async function i(o,l,f,p,h,u){if(!(0,t.isBrowser)())return;const m=l(),g=await f();(o.tokenKeys||["token","accessToken","authToken"]).forEach(R=>{try{const D=globalThis.localStorage;D&&D.removeItem(R)}catch{}}),p();const S=(0,e.getControllerUrl)(o.misoConfig);if(!S){const R=h||o.logoutUrl||o.loginUrl||"/login",D=globalThis.window.location.origin,A=/^https?:\/\//i.test(R)?R:`${D}${R.startsWith("/")?R:`/${R}`}`,O=s(A);O&&(globalThis.window.location.href=O);return}const w=o.logoutUrl||o.loginUrl||"/logout";let C;/^https?:\/\//i.test(w)?C=new URL(w):C=new URL(w,S);const N=h||o.logoutUrl||o.loginUrl||"/login";let I;/^https?:\/\//i.test(N)?I=N:I=`${globalThis.window.location.origin}${N.startsWith("/")?N:`/${N}`}`,C.searchParams.set("redirect",I),g&&C.searchParams.set("x-client-token",g),m&&C.searchParams.set("token",m),globalThis.window.location.href=C.toString()}return nc}var q1;function Dk(){return q1||(q1=1,(function(e){var t=iu&&iu.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(e,"__esModule",{value:!0}),e.logout=e.redirectToLogin=void 0,e.getToken=f,e.handleOAuthCallback=u,e.hasClientToken=m,e.hasAnyToken=g,e.getClientToken=v,e.getControllerUrl=S,e.getEnvironmentToken=N,e.getClientTokenInfo=I;const n=bi(),s=OR(),c=t(fo()),i=Nk(),o=Lk(),l=jk();function f(R){if(!(0,n.isBrowser)())return null;const D=R||["token","accessToken","authToken"];for(const A of D){const O=(0,n.getLocalStorage)(A);if(O)return O}return null}function p(){try{const R=globalThis;if(!R.window){console.warn("[handleOAuthCallback] window not available for hash cleanup");return}const D=R.window.location.pathname+R.window.location.search;R.window.history.replaceState(null,"",D)}catch(R){console.warn("[handleOAuthCallback] Failed to clean up hash:",R)}}function h(R){if(!R||typeof R!="string")return!1;const D=R.trim();return!(D.length===0||D.length<5)}function u(R){if(!(0,n.isBrowser)())return null;const D=globalThis;if(!D.window||!D.window.location)return null;const A=D.window.location.hash;if(!A||A.length<=1)return null;const O=A.substring(1);let x;try{x=new URLSearchParams(O)}catch(V){return console.warn("[handleOAuthCallback] Failed to parse hash:",V),null}const M=x.get("token")||x.get("access_token")||x.get("accessToken");if(!M)return null;if(!h(M)){const V=M?M.length:0;return console.error("[handleOAuthCallback] Invalid token format - token rejected",{tokenLength:V,isEmpty:!M||M.trim().length===0,tooShort:V>0&&V<5,expectedFormat:"Non-empty string with at least 5 characters"}),p(),null}R.misoConfig?.logLevel;{const V=D.window.location.protocol==="https:",z=D.window.location.hostname||"",q=z==="localhost"||z==="127.0.0.1"||z==="[::1]"||z.startsWith("192.168.")||z.startsWith("10.")||z.startsWith("172.16.")||z.startsWith("172.17.")||z.startsWith("172.18.")||z.startsWith("172.19.")||z.startsWith("172.20.")||z.startsWith("172.21.")||z.startsWith("172.22.")||z.startsWith("172.23.")||z.startsWith("172.24.")||z.startsWith("172.25.")||z.startsWith("172.26.")||z.startsWith("172.27.")||z.startsWith("172.28.")||z.startsWith("172.29.")||z.startsWith("172.30.")||z.startsWith("172.31.");if(!V&&!q)return console.error("[handleOAuthCallback] SECURITY WARNING: Token received over HTTP in production"),p(),null}p();const G=R.tokenKeys||["token","accessToken","authToken"];try{return G.forEach(V=>{try{(0,n.setLocalStorage)(V,M)}catch(z){console.warn(`[handleOAuthCallback] Failed to store token in key ${V}:`,z)}}),R.misoConfig?.logLevel==="debug"&&console.log("[handleOAuthCallback] OAuth token extracted and stored securely",{tokenLength:M.length,tokenKeys:G,storedInKeys:G.length}),M}catch(V){const z=V instanceof Error?V:new Error(String(V)),H=globalThis.window?.location?.pathname||"/",$=(0,o.extractErrorInfo)(z,{endpoint:H,method:"GET"});return(0,l.logErrorWithContext)($,"[DataClient] [AUTH] [OAuthCallback]"),console.error("[handleOAuthCallback] Failed to store token:",V),null}}function m(R,D){if(!(0,n.isBrowser)())return!!(R&&D?.clientSecret);if((0,n.getLocalStorage)("miso:client-token")){const O=(0,n.getLocalStorage)("miso:client-token-expires-at");if(O&&parseInt(O,10)>Date.now())return!0}return!!(D?.clientToken||D?.onClientTokenRefresh||D?.clientSecret)}function g(R,D,A){return f(R)!==null||m(D||null,A)}async function v(R,D,A){if(!(0,n.isBrowser)())return null;const O=R?.logLevel==="debug",x=(0,n.getLocalStorage)("miso:client-token"),M=(0,n.getLocalStorage)("miso:client-token-expires-at");if(O&&console.log("[getClientToken] Checking localStorage:",{hasToken:!!x,hasExpiresAt:!!M,expiresAt:M,currentTime:Date.now()}),x)if(M){const G=parseInt(M,10),V=Date.now(),z=G-V,q=Math.floor(z/1e3);if(O&&console.log("[getClientToken] Token expiration check:",{expiresAt:G,expiresAtISO:new Date(G).toISOString(),now:V,nowISO:new Date(V).toISOString(),timeUntilExpiry:z,timeUntilExpirySeconds:q,isValid:G>V,expired:G<=V,isNaN:isNaN(G)}),isNaN(G))return console.warn("[getClientToken] Invalid expiration timestamp format, assuming token is valid"),x;if(G>V)return O&&console.log("[getClientToken] Returning valid cached token (checked expiration)"),x;console.warn("[getClientToken] Cached token expired, removing from cache"),(0,n.removeLocalStorage)("miso:client-token"),(0,n.removeLocalStorage)("miso:client-token-expires-at")}else try{const G=c.default.decode(x);if(G&&G.exp){const V=Date.now(),z=G.exp*1e3,q=z-V;if(O&&console.log("[getClientToken] Token expiration from JWT:",{jwtExpiresAt:z,jwtExpiresAtISO:new Date(z).toISOString(),now:V,nowISO:new Date(V).toISOString(),jwtTimeUntilExpiry:q,jwtTimeUntilExpirySeconds:Math.floor(q/1e3),jwtIsValid:z>V}),z>V)return O&&console.log("[getClientToken] Returning valid cached token (checked JWT expiration)"),x;console.warn("[getClientToken] Token expired (from JWT), removing from cache"),(0,n.removeLocalStorage)("miso:client-token"),(0,n.removeLocalStorage)("miso:client-token-expires-at")}else return O&&console.log("[getClientToken] No expiration info available, assuming token is valid"),x}catch(G){return console.warn("[getClientToken] Failed to decode token, assuming valid:",G),x}return R?.clientToken?(O&&console.log("[getClientToken] Returning token from config"),R.clientToken):(console.warn("[getClientToken] No token available, returning null"),null)}function S(R){return R?(0,n.isBrowser)()?R.controllerPublicUrl||R.controllerUrl||null:R.controllerPrivateUrl||R.controllerUrl||null:null}var w=hv();Object.defineProperty(e,"redirectToLogin",{enumerable:!0,get:function(){return w.redirectToLogin}});var C=hv();Object.defineProperty(e,"logout",{enumerable:!0,get:function(){return C.logout}});async function N(R,D){if(!(0,n.isBrowser)())throw new Error("getEnvironmentToken() is only available in browser environment");const A="miso:client-token",O="miso:client-token-expires-at",x=(0,n.getLocalStorage)(A),M=(0,n.getLocalStorage)(O);if(x&&M){const z=parseInt(M,10),q=Date.now();if(z>q)return x;(0,n.removeLocalStorage)(A),(0,n.removeLocalStorage)(O)}const G=R.misoConfig?.clientTokenUri||"/api/v1/auth/client-token",V=/^https?:\/\//i.test(G)?G:`${R.baseUrl}${G}`;try{const z=await fetch(V,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!z.ok){const X=await z.text();throw new Error(`Failed to get environment token: ${z.status} ${z.statusText}. ${X}`)}const q=await z.json(),H=q.data?.token||q.token||q.accessToken||q.access_token;if(!H||typeof H!="string")throw new Error("Invalid response format: token not found in response");const $=q.data?.expiresIn||q.expiresIn||q.expires_in||3600,K=Date.now()+$*1e3;if((0,n.setLocalStorage)(A,H),(0,n.setLocalStorage)(O,K.toString()),D&&!(0,i.shouldSkipAudit)(G,R.audit))try{await D.log.audit("client.token.request.success",G,{method:"POST",url:G,statusCode:z.status,cached:!1},{})}catch(X){console.warn("Failed to log audit event:",X)}return H}catch(z){const q=(0,o.extractErrorInfo)(z,{endpoint:G,method:"POST",correlationId:D?.log?.generateCorrelationId?D.log.generateCorrelationId():void 0});if((0,l.logErrorWithContext)(q,"[DataClient] [AUTH] [ClientToken]"),D&&!(0,i.shouldSkipAudit)(G,R.audit))try{const H=z instanceof Error?z.message:"Unknown error";await D.log.audit("client.token.request.failed",G,{method:"POST",url:G,statusCode:q.statusCode||0,error:H,cached:!1,errorType:q.errorType,errorName:q.errorName,responseBody:q.responseBody},{errorCategory:"authentication",httpStatusCategory:q.statusCode&&q.statusCode>=500?"server-error":q.statusCode&&q.statusCode>=400?"client-error":"unknown",correlationId:q.correlationId})}catch(H){console.warn("Failed to log audit event:",H)}throw z}}function I(R){if(!(0,n.isBrowser)())return null;const D=(0,n.getLocalStorage)("miso:client-token");if(D)return(0,s.extractClientTokenInfo)(D);const A=R?.clientToken;return A?(0,s.extractClientTokenInfo)(A):null}})(iu)),iu}var M1;function $k(){if(M1)return Yn;M1=1;var e=Yn&&Yn.__createBinding||(Object.create?(function(D,A,O,x){x===void 0&&(x=O);var M=Object.getOwnPropertyDescriptor(A,O);(!M||("get"in M?!A.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return A[O]}}),Object.defineProperty(D,x,M)}):(function(D,A,O,x){x===void 0&&(x=O),D[x]=A[O]})),t=Yn&&Yn.__setModuleDefault||(Object.create?(function(D,A){Object.defineProperty(D,"default",{enumerable:!0,value:A})}):function(D,A){D.default=A}),n=Yn&&Yn.__importStar||(function(){var D=function(A){return D=Object.getOwnPropertyNames||function(O){var x=[];for(var M in O)Object.prototype.hasOwnProperty.call(O,M)&&(x[x.length]=M);return x},D(A)};return function(A){if(A&&A.__esModule)return A;var O={};if(A!=null)for(var x=D(A),M=0;M<x.length;M++)x[M]!=="default"&&e(O,A,x[M]);return t(O,A),O}})();Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.DataClient=void 0,Yn.dataClient=R;const s=Pk(),c=pc(),i=bi(),o=Ok(),l=R$(),f=Dk(),p=hv(),h=Ew(),u=Sw(),m=pf(),g=mf(),v=rh(),S=zx(),w=Gy(),C=hf();class N{constructor(A){this.misoClient=null,this.cache=new Map,this.pendingRequests=new Map,this.failedRequests=new Map,this.interceptors={},this.metrics={totalRequests:0,totalFailures:0,responseTimes:[],cacheHits:0,cacheMisses:0},this.permissionService=null,this.roleService=null,this.config={tokenKeys:["token","accessToken","authToken"],loginUrl:"/login",timeout:3e4,cache:{enabled:!0,defaultTTL:300,maxSize:100},retry:{enabled:!0,maxRetries:3,baseDelay:1e3,maxDelay:1e4},audit:{enabled:!0,level:"standard",batchSize:10,maxResponseSize:1e4,maxMaskingSize:5e4,skipEndpoints:[]},...A},(0,i.isBrowser)()&&this.config.misoConfig?.clientSecret&&console.warn("âš ï¸ SECURITY WARNING: clientSecret detected in browser environment. Client secrets should NEVER be exposed in client-side code. Use the client token pattern instead (clientToken + onClientTokenRefresh). See documentation for browser-safe configuration.");let O;if(this.config.misoConfig&&(O={...this.config.misoConfig,onClientTokenRefresh:this.config.misoConfig.onClientTokenRefresh||((0,i.isBrowser)()&&!this.config.misoConfig.clientSecret?async()=>{const x=await this.getEnvironmentToken();if(!x)throw new Error("Failed to get client token");const M=(0,i.getLocalStorage)("miso:client-token-expires-at"),G=M?parseInt(M,10):Date.now()+36e5,V=Math.floor((G-Date.now())/1e3);return{token:x,expiresIn:V>0?V:3600}}:void 0)},this.misoClient=new s.MisoClient(O)),this.config.misoConfig?.sensitiveFieldsConfig&&c.DataMasker.setConfigPath(this.config.misoConfig.sensitiveFieldsConfig),this.misoClient&&O){const x=new v.InternalHttpClient(O),M=new C.RedisService(O.redis),G=new w.LoggerService(x,M),V=new g.HttpClient(O,G);G.httpClient=V;const z=new S.ApiClient(V);G.setApiClient(z);const q=new m.CacheService(void 0);this.permissionService=new h.BrowserPermissionService(V,z,q),this.roleService=new u.BrowserRoleService(V,z,q)}(0,i.isBrowser)()&&this.handleOAuthCallback()}getToken(){return(0,f.getToken)(this.config.tokenKeys)}hasClientToken(){return(0,f.hasClientToken)(this.misoClient,this.config.misoConfig)}hasAnyToken(){return(0,f.hasAnyToken)(this.config.tokenKeys,this.misoClient,this.config.misoConfig)}async getClientToken(){return(0,f.getClientToken)(this.config.misoConfig,this.config.baseUrl,()=>this.getEnvironmentToken())}getControllerUrl(){return(0,f.getControllerUrl)(this.config.misoConfig)}isAuthenticated(){return this.getToken()!==null}handleOAuthCallback(){return(0,f.handleOAuthCallback)(this.config)}async redirectToLogin(A){return(0,p.redirectToLogin)(this.config,()=>this.getClientToken(),A)}async logout(A){return(0,f.logout)(this.config,()=>this.getToken(),()=>this.getClientToken(),()=>this.clearCache(),A,this.misoClient)}setInterceptors(A){this.interceptors={...this.interceptors,...A}}setAuditConfig(A){this.config.audit={...this.config.audit,...A}}setLogLevel(A){if(this.misoClient&&this.config.misoConfig){this.config.misoConfig.logLevel=A;try{const O=this.misoClient.config;O&&(O.logLevel=A)}catch{}}}clearCache(){this.cache.clear()}getMetrics(){const A=(this.metrics.responseTimes||[]).sort((x,M)=>x-M),O=A.length;return{totalRequests:this.metrics.totalRequests,totalFailures:this.metrics.totalFailures,averageResponseTime:O>0?A.reduce((x,M)=>x+M,0)/O:0,responseTimeDistribution:{min:O>0?A[0]:0,max:O>0?A[O-1]:0,p50:O>0?A[Math.floor(O*.5)]:0,p95:O>0?A[Math.floor(O*.95)]:0,p99:O>0?A[Math.floor(O*.99)]:0},errorRate:this.metrics.totalRequests>0?this.metrics.totalFailures/this.metrics.totalRequests:0,cacheHitRate:this.metrics.cacheHits+this.metrics.cacheMisses>0?this.metrics.cacheHits/(this.metrics.cacheHits+this.metrics.cacheMisses):0}}async request(A,O,x){const M=Date.now(),G=`${this.config.baseUrl}${O}`,V={...x,method:A.toUpperCase()},z=(0,o.getCacheKeyForRequest)(O,V),q=A.toUpperCase()==="GET",H=(0,o.isCacheEnabled)(A,this.config.cache,x),$=this.failedRequests.get(z);if($){const X=Date.now()-$.timestamp,B=$.count||1;if(X<(B===1?5e3:B===2?15e3:3e4))throw $.error;this.failedRequests.delete(z)}if(H){const X=(0,o.getCachedEntry)(this.cache,z,this.metrics);if(X!==null)return X}if(q){const X=this.pendingRequests.get(z);if(X)return X}let K;q?(K=(async()=>{try{return await(0,l.executeHttpRequest)(A,G,O,this.config,this.cache,z,H,M,this.misoClient,()=>this.hasAnyToken(),()=>this.getToken(),()=>this.handleAuthError(),()=>this.refreshUserToken(),this.interceptors,this.metrics,x)}finally{this.pendingRequests.delete(z)}})(),this.pendingRequests.set(z,K)):K=(0,l.executeHttpRequest)(A,G,O,this.config,this.cache,z,H,M,this.misoClient,()=>this.hasAnyToken(),()=>this.getToken(),()=>this.handleAuthError(),()=>this.refreshUserToken(),this.interceptors,this.metrics,x);try{const X=await K;return this.failedRequests.delete(z),X}catch(X){const B=this.failedRequests.get(z),te=B?(B.count||1)+1:1;throw this.failedRequests.set(z,{timestamp:Date.now(),error:X,count:te}),setTimeout(()=>{this.failedRequests.delete(z)},3e4),X}}async refreshUserToken(){if(!this.config.onTokenRefresh)return null;try{const A=await this.config.onTokenRefresh();if((0,i.isBrowser)()&&A.token){const{setLocalStorage:O}=await Promise.resolve().then(()=>n(bi())),x=this.config.tokenKeys||["token","accessToken","authToken"];for(const M of x)O(M,A.token)}return A}catch(A){return console.error("Token refresh failed:",A),null}}handleAuthError(){(0,i.isBrowser)()&&this.redirectToLogin().catch(A=>{console.error("Failed to redirect to login:",A)})}async applyRequestInterceptor(A,O){return this.interceptors.onRequest?await this.interceptors.onRequest(A,O):O}async get(A,O){const x=await this.applyRequestInterceptor(A,{...O,method:"GET"});return this.request("GET",A,x)}async post(A,O,x){const M=await this.applyRequestInterceptor(A,{...x,method:"POST",body:O?JSON.stringify(O):void 0,headers:{"Content-Type":"application/json",...x?.headers}});return this.request("POST",A,M)}async put(A,O,x){const M=await this.applyRequestInterceptor(A,{...x,method:"PUT",body:O?JSON.stringify(O):void 0,headers:{"Content-Type":"application/json",...x?.headers}});return this.request("PUT",A,M)}async patch(A,O,x){const M=await this.applyRequestInterceptor(A,{...x,method:"PATCH",body:O?JSON.stringify(O):void 0,headers:{"Content-Type":"application/json",...x?.headers}});return this.request("PATCH",A,M)}async delete(A,O){const x=await this.applyRequestInterceptor(A,{...O,method:"DELETE"});return this.request("DELETE",A,x)}async getPermissions(A){if(!this.misoClient||!this.permissionService)return[];const O=A||this.getToken();return O?this.permissionService.getPermissions(O):[]}async hasPermission(A,O){if(!this.misoClient||!this.permissionService)return!1;const x=O||this.getToken();return x?this.permissionService.hasPermission(x,A):!1}async hasAnyPermission(A,O){if(!this.misoClient||!this.permissionService)return!1;const x=O||this.getToken();return x?this.permissionService.hasAnyPermission(x,A):!1}async hasAllPermissions(A,O){if(!this.misoClient||!this.permissionService)return!1;const x=O||this.getToken();return x?this.permissionService.hasAllPermissions(x,A):!1}async refreshPermissions(A){if(!this.misoClient||!this.permissionService)return[];const O=A||this.getToken();return O?this.permissionService.refreshPermissions(O):[]}async clearPermissionsCache(A){if(!this.misoClient||!this.permissionService)return;const O=A||this.getToken();if(O)return this.permissionService.clearPermissionsCache(O)}async getRoles(A){if(!this.misoClient||!this.roleService)return[];const O=A||this.getToken();return O?this.roleService.getRoles(O):[]}async hasRole(A,O){if(!this.misoClient||!this.roleService)return!1;const x=O||this.getToken();return x?this.roleService.hasRole(x,A):!1}async hasAnyRole(A,O){if(!this.misoClient||!this.roleService)return!1;const x=O||this.getToken();return x?this.roleService.hasAnyRole(x,A):!1}async hasAllRoles(A,O){if(!this.misoClient||!this.roleService)return!1;const x=O||this.getToken();return x?this.roleService.hasAllRoles(x,A):!1}async refreshRoles(A){if(!this.misoClient||!this.roleService)return[];const O=A||this.getToken();return O?this.roleService.refreshRoles(O):[]}async clearRolesCache(A){if(!this.misoClient||!this.roleService)return;const O=A||this.getToken();if(O)return this.roleService.clearRolesCache(O)}async validateToken(A){if(!this.misoClient)return!1;const O=A||this.getToken();return O?this.misoClient.validateToken(O):!1}async getUser(A){if(!this.misoClient)return null;const O=A||this.getToken();return O?this.misoClient.getUser(O):null}async getUserInfo(A){if(!this.misoClient)return null;const O=A||this.getToken();return O?this.misoClient.getUserInfo(O):null}async isAuthenticatedAsync(A){return this.validateToken(A)}async getEnvironmentToken(){return(0,f.getEnvironmentToken)(this.config,this.misoClient)}getClientTokenInfo(){return(0,f.getClientTokenInfo)(this.config.misoConfig)}}Yn.DataClient=N;let I=null;function R(D){if(!I&&D&&(I=new N(D)),!I)throw new Error("DataClient not initialized. Call dataClient(config) first.");return I}return Yn}var ou={},H1;function k$(){if(H1)return ou;H1=1,Object.defineProperty(ou,"__esModule",{value:!0}),ou.getCachedDataClientConfig=c,ou.autoInitializeDataClient=l;const e=$k(),t=bi(),n=th();function s(){if(!(0,t.isBrowser)())return null;try{const f=(0,t.getLocalStorage)("miso:dataclient-config");if(!f)return null;const p=JSON.parse(f);return p.expiresAt&&p.expiresAt<Date.now()?((0,t.removeLocalStorage)("miso:dataclient-config"),null):p}catch{return(0,t.removeLocalStorage)("miso:dataclient-config"),null}}function c(){return s()?.config||null}function i(f,p){if((0,t.isBrowser)())try{const h={config:f,expiresAt:Date.now()+p*1e3};(0,t.setLocalStorage)("miso:dataclient-config",JSON.stringify(h))}catch{}}async function o(f,p){const h=/^https?:\/\//i.test(p)?p:`${f}${p}`,u=3e4,m=new AbortController,g=setTimeout(()=>m.abort(),u);try{let v;try{v=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",signal:m.signal})}catch(w){clearTimeout(g);const C=w instanceof Error?w.message:String(w);throw(w instanceof Error?w.name:"Unknown")==="AbortError"||C.includes("aborted")?new Error(`Request timeout: The client token endpoint did not respond within ${u}ms. Please check if the server is running and accessible at ${h}`):C.includes("ERR_EMPTY_RESPONSE")||C.includes("empty response")?new Error(`Connection error: The server closed the connection without sending a response. Please check if the server is running and accessible at ${h}`):C.includes("Failed to fetch")||C.includes("network")?new Error(`Network error: Cannot connect to ${h}. Please check your network connection and ensure the server is running.`):new Error(`Failed to fetch config: ${C}`)}if(clearTimeout(g),v.status===405){const w=new AbortController,C=setTimeout(()=>w.abort(),u);try{v=await fetch(h,{method:"GET",credentials:"include",signal:w.signal}),clearTimeout(C)}catch(N){clearTimeout(C);const I=N instanceof Error?N.message:String(N);throw(N instanceof Error?N.name:"Unknown")==="AbortError"||I.includes("aborted")?new Error(`Request timeout: The client token endpoint did not respond within ${u}ms. Please check if the server is running and accessible at ${h}`):new Error(`Failed to fetch config: ${I}`)}}if(!v.ok){let w=`Failed to fetch config: ${v.status} ${v.statusText}`,C;try{const I=v.headers.get("content-type");if(I&&I.includes("application/json")){const R=await v.json().catch(()=>null);if(R&&(typeof R.message=="string"?w=R.message:typeof R.error=="string"&&(w=R.error),R.details)){if(typeof R.details=="string")C=R.details;else if(typeof R.details=="object"&&R.details!==null){const D=R.details;typeof D.suggestion=="string"?C=D.suggestion:typeof D.controllerUrl=="string"&&(C=`Controller URL: ${D.controllerUrl}`)}}}else{const R=await v.text().catch(()=>"Unable to read error response");R&&R!=="Unable to read error response"&&(w=`${w}. ${R}`)}}catch{try{const R=await v.text().catch(()=>"");R&&(w=`${w}. ${R}`)}catch{}}const N=C?`${w}. ${C}`:w;throw new Error(N)}const S=await v.json();if(!(0,n.hasConfig)(S))throw new Error("Invalid response format: config not found in response. Make sure your server endpoint uses createClientTokenEndpoint() helper.");return S.config}catch(v){throw v instanceof Error?v:new Error(`Network error: ${String(v)}`)}}async function l(f){if(!(0,t.isBrowser)())throw new Error("autoInitializeDataClient() is only available in browser environment");const p={clientTokenUri:f?.clientTokenUri||"/api/v1/auth/client-token",cacheConfig:f?.cacheConfig??!0,baseUrl:f?.baseUrl,onError:f?.onError};try{const h=p.baseUrl||((0,t.isBrowser)()?globalThis.window.location.origin:"");if(!h)throw new Error("Unable to detect baseUrl. Please provide baseUrl option.");let u=null;if(p.cacheConfig){const g=s();g&&(u=g.config)}u||(u=await o(h,p.clientTokenUri),p.cacheConfig&&i(u,1800));const m={baseUrl:u.baseUrl,misoConfig:{clientId:u.clientId,controllerUrl:u.controllerUrl,controllerPublicUrl:u.controllerPublicUrl,clientTokenUri:u.clientTokenUri}};return new e.DataClient(m)}catch(h){const u=h instanceof Error?h:new Error(String(h));throw p.onError&&p.onError(u),u}}return ou}var F1;function A$(){return F1||(F1=1,(function(e){var t=Wo&&Wo.__createBinding||(Object.create?(function(ce,Y,re,me){me===void 0&&(me=re);var xe=Object.getOwnPropertyDescriptor(Y,re);(!xe||("get"in xe?!Y.__esModule:xe.writable||xe.configurable))&&(xe={enumerable:!0,get:function(){return Y[re]}}),Object.defineProperty(ce,me,xe)}):(function(ce,Y,re,me){me===void 0&&(me=re),ce[me]=Y[re]})),n=Wo&&Wo.__exportStar||function(ce,Y){for(var re in ce)re!=="default"&&!Object.prototype.hasOwnProperty.call(Y,re)&&t(Y,ce,re)};Object.defineProperty(e,"__esModule",{value:!0}),e.TokenValidationService=e.getCachedDataClientConfig=e.autoInitializeDataClient=e.dataClient=e.DataClient=e.loggerContextMiddleware=e.hasConfig=e.createClientTokenEndpoint=e.EncryptionUtil=e.sendErrorResponse=e.getErrorTitle=e.getErrorTypeUri=e.handleRouteError=e.setErrorLogger=e.createErrorResponse=e.createSuccessResponse=e.AppError=e.ValidationHelper=e.asyncHandlerNamed=e.asyncHandler=e.injectResponseHelpers=e.ResponseHelper=e.handleApiError=e.transformError=e.ApiErrorException=e.MisoClientError=e.extractRequestContext=e.extractLoggingContext=e.validateUrl=e.isBrowser=e.resolveControllerUrl=e.extractClientTokenInfo=e.getEnvironmentToken=e.validateOrigin=e.loadConfig=e.mergeLoggerContext=e.clearLoggerContext=e.setLoggerContext=e.getLogger=e.HttpClient=e.CacheService=e.RedisService=e.LoggerService=e.BrowserRoleService=e.BrowserPermissionService=e.PermissionService=e.RoleService=e.AuthService=e.MisoClient=void 0;const s=Rb(),c=ZT(),i=tC(),o=Gy(),l=gC(),f=vC(),p=PC(),h=Bx(),u=zx(),m=pc(),g=Kx(),v=Jy(),S=e_();class w{constructor(Y){this.initialized=!1,this.config=Y,Y.sensitiveFieldsConfig&&m.DataMasker.setConfigPath(Y.sensitiveFieldsConfig);const re=new h.InternalHttpClient(Y);this.redis=new l.RedisService(Y.redis),this.logger=new o.LoggerService(re,this.redis),this.httpClient=new p.HttpClient(Y,this.logger),this.logger.httpClient=this.httpClient,this.apiClient=new u.ApiClient(this.httpClient),this.logger.setApiClient(this.apiClient);const{registerLoggerService:me}=r_();me(this.logger),this.cacheService=new f.CacheService(this.redis),this.auth=new s.AuthService(this.httpClient,this.apiClient,this.cacheService),this.roles=new c.RoleService(this.httpClient,this.apiClient,this.cacheService),this.permissions=new i.PermissionService(this.httpClient,this.apiClient,this.cacheService),this.tokenValidation=new S.TokenValidationService(Y.keycloak)}async initialize(){if(!this.initialized)try{await this.redis.connect(),this.initialized=!0}catch{this.initialized=!0}}async disconnect(){await this.redis.disconnect(),this.initialized=!1}isInitialized(){return this.initialized}getToken(Y){const re=Y.headers.authorization;return re?re.startsWith("Bearer ")?re.substring(7):re:null}validateOrigin(Y,re){const me=re??this.config.allowedOrigins;return(0,v.validateOrigin)(Y,me)}async getEnvironmentToken(){return this.auth.getEnvironmentToken()}async login(Y){return this.auth.login(Y)}async validateToken(Y,re){return this.auth.validateToken(Y,re)}async getUser(Y,re){return this.auth.getUser(Y,re)}async getUserInfo(Y,re){return this.auth.getUserInfo(Y,re)}async isAuthenticated(Y,re){return this.auth.isAuthenticated(Y,re)}async logout(Y){return this.auth.logout(Y)}async refreshToken(Y,re){return this.auth.refreshToken(Y,re)}async validateTokenLocal(Y,re){return this.tokenValidation.validateTokenLocal(Y,re)}setKeycloakConfig(Y){this.tokenValidation.setKeycloakConfig(Y)}clearJwksCache(Y){this.tokenValidation.clearCache(Y)}clearValidationCache(){this.tokenValidation.clearResultCache()}clearAllTokenCaches(){this.tokenValidation.clearAllCaches()}async getRoles(Y,re){return this.roles.getRoles(Y,re)}async hasRole(Y,re,me){return this.roles.hasRole(Y,re,me)}async hasAnyRole(Y,re,me){return this.roles.hasAnyRole(Y,re,me)}async hasAllRoles(Y,re,me){return this.roles.hasAllRoles(Y,re,me)}async refreshRoles(Y,re){return this.roles.refreshRoles(Y,re)}async getPermissions(Y,re){return this.permissions.getPermissions(Y,re)}async hasPermission(Y,re,me){return this.permissions.hasPermission(Y,re,me)}async hasAnyPermission(Y,re,me){return this.permissions.hasAnyPermission(Y,re,me)}async hasAllPermissions(Y,re,me){return this.permissions.hasAllPermissions(Y,re,me)}async refreshPermissions(Y,re){return this.permissions.refreshPermissions(Y,re)}async clearPermissionsCache(Y,re){return this.permissions.clearPermissionsCache(Y,re)}get log(){return this.logger}get cache(){return this.cacheService}getConfig(){return{...this.config}}isRedisConnected(){return this.redis.isConnected()}async requestWithAuthStrategy(Y,re,me,xe,Oe){return this.httpClient.requestWithAuthStrategy(Y,re,me,xe,Oe)}createAuthStrategy(Y,re,me){return{methods:Y,bearerToken:re,apiKey:me}}getDefaultAuthStrategy(Y){return g.AuthStrategyHandler.getDefaultStrategy(Y)}}e.MisoClient=w,n(mj(),e),n(gj(),e),n(yj(),e),n(vj(),e);var C=Rb();Object.defineProperty(e,"AuthService",{enumerable:!0,get:function(){return C.AuthService}});var N=ZT();Object.defineProperty(e,"RoleService",{enumerable:!0,get:function(){return N.RoleService}});var I=tC();Object.defineProperty(e,"PermissionService",{enumerable:!0,get:function(){return I.PermissionService}});var R=wj();Object.defineProperty(e,"BrowserPermissionService",{enumerable:!0,get:function(){return R.BrowserPermissionService}});var D=Ej();Object.defineProperty(e,"BrowserRoleService",{enumerable:!0,get:function(){return D.BrowserRoleService}});var A=Gy();Object.defineProperty(e,"LoggerService",{enumerable:!0,get:function(){return A.LoggerService}});var O=gC();Object.defineProperty(e,"RedisService",{enumerable:!0,get:function(){return O.RedisService}});var x=vC();Object.defineProperty(e,"CacheService",{enumerable:!0,get:function(){return x.CacheService}});var M=PC();Object.defineProperty(e,"HttpClient",{enumerable:!0,get:function(){return M.HttpClient}});var G=r_();Object.defineProperty(e,"getLogger",{enumerable:!0,get:function(){return G.getLogger}}),Object.defineProperty(e,"setLoggerContext",{enumerable:!0,get:function(){return G.setLoggerContext}}),Object.defineProperty(e,"clearLoggerContext",{enumerable:!0,get:function(){return G.clearLoggerContext}}),Object.defineProperty(e,"mergeLoggerContext",{enumerable:!0,get:function(){return G.mergeLoggerContext}});var V=Sj();Object.defineProperty(e,"loadConfig",{enumerable:!0,get:function(){return V.loadConfig}});var z=Jy();Object.defineProperty(e,"validateOrigin",{enumerable:!0,get:function(){return z.validateOrigin}});var q=bj();Object.defineProperty(e,"getEnvironmentToken",{enumerable:!0,get:function(){return q.getEnvironmentToken}});var H=OR();Object.defineProperty(e,"extractClientTokenInfo",{enumerable:!0,get:function(){return H.extractClientTokenInfo}});var $=Bf();Object.defineProperty(e,"resolveControllerUrl",{enumerable:!0,get:function(){return $.resolveControllerUrl}}),Object.defineProperty(e,"isBrowser",{enumerable:!0,get:function(){return $.isBrowser}}),Object.defineProperty(e,"validateUrl",{enumerable:!0,get:function(){return $.validateUrl}});var K=Tj();Object.defineProperty(e,"extractLoggingContext",{enumerable:!0,get:function(){return K.extractLoggingContext}});var X=Cj();Object.defineProperty(e,"extractRequestContext",{enumerable:!0,get:function(){return X.extractRequestContext}}),n(_j(),e),n(xj(),e),n(Rj(),e);var B=Wv();Object.defineProperty(e,"MisoClientError",{enumerable:!0,get:function(){return B.MisoClientError}}),Object.defineProperty(e,"ApiErrorException",{enumerable:!0,get:function(){return B.ApiErrorException}}),Object.defineProperty(e,"transformError",{enumerable:!0,get:function(){return B.transformError}}),Object.defineProperty(e,"handleApiError",{enumerable:!0,get:function(){return B.handleApiError}});var te=kj();Object.defineProperty(e,"ResponseHelper",{enumerable:!0,get:function(){return te.ResponseHelper}}),Object.defineProperty(e,"injectResponseHelpers",{enumerable:!0,get:function(){return te.injectResponseHelpers}}),Object.defineProperty(e,"asyncHandler",{enumerable:!0,get:function(){return te.asyncHandler}}),Object.defineProperty(e,"asyncHandlerNamed",{enumerable:!0,get:function(){return te.asyncHandlerNamed}}),Object.defineProperty(e,"ValidationHelper",{enumerable:!0,get:function(){return te.ValidationHelper}}),Object.defineProperty(e,"AppError",{enumerable:!0,get:function(){return te.AppError}}),Object.defineProperty(e,"createSuccessResponse",{enumerable:!0,get:function(){return te.createSuccessResponse}}),Object.defineProperty(e,"createErrorResponse",{enumerable:!0,get:function(){return te.createErrorResponse}}),Object.defineProperty(e,"setErrorLogger",{enumerable:!0,get:function(){return te.setErrorLogger}}),Object.defineProperty(e,"handleRouteError",{enumerable:!0,get:function(){return te.handleRouteError}}),Object.defineProperty(e,"getErrorTypeUri",{enumerable:!0,get:function(){return te.getErrorTypeUri}}),Object.defineProperty(e,"getErrorTitle",{enumerable:!0,get:function(){return te.getErrorTitle}}),Object.defineProperty(e,"sendErrorResponse",{enumerable:!0,get:function(){return te.sendErrorResponse}}),Object.defineProperty(e,"EncryptionUtil",{enumerable:!0,get:function(){return te.EncryptionUtil}}),Object.defineProperty(e,"createClientTokenEndpoint",{enumerable:!0,get:function(){return te.createClientTokenEndpoint}}),Object.defineProperty(e,"hasConfig",{enumerable:!0,get:function(){return te.hasConfig}}),Object.defineProperty(e,"loggerContextMiddleware",{enumerable:!0,get:function(){return te.loggerContextMiddleware}});var ae=$k();Object.defineProperty(e,"DataClient",{enumerable:!0,get:function(){return ae.DataClient}}),Object.defineProperty(e,"dataClient",{enumerable:!0,get:function(){return ae.dataClient}});var Z=k$();Object.defineProperty(e,"autoInitializeDataClient",{enumerable:!0,get:function(){return Z.autoInitializeDataClient}}),Object.defineProperty(e,"getCachedDataClientConfig",{enumerable:!0,get:function(){return Z.getCachedDataClientConfig}});var oe=e_();Object.defineProperty(e,"TokenValidationService",{enumerable:!0,get:function(){return oe.TokenValidationService}})})(Wo)),Wo}var Uk=A$();const qk=se.createContext(void 0);function I$({children:e,initOptions:t}){const[n,s]=se.useState(null),[c,i]=se.useState(!0),[o,l]=se.useState(null),[f,p]=se.useState(0),h=3,u=2e3,m=async(w=0)=>{i(!0),l(null);try{const C=await Uk.autoInitializeDataClient({clientTokenUri:t?.clientTokenUri,baseUrl:t?.baseUrl,cacheConfig:t?.cacheConfig??!0,onError:N=>{l(N)}});s(C),p(0)}catch(C){const N=C instanceof Error?C:new Error(String(C));if(w<h){const I=w+1;p(I);const R=u*Math.pow(2,w);return await new Promise(D=>setTimeout(D,R)),m(I)}l(N),s(null)}finally{i(!1)}},g=async()=>{p(0),await m(0)},v=w=>{s(w),l(null),i(!1),p(0)};se.useEffect(()=>{m()},[]);const S=se.useMemo(()=>({dataClient:n,isLoading:c,error:o,retryCount:f,reinitialize:g,setManualClient:v}),[n,c,o,f]);return b.jsx(qk.Provider,{value:S,children:e})}function yc(){const e=se.useContext(qk);if(e===void 0)throw new Error("useDataClient must be used within DataClientProvider");return e}function W1(e){if(!e)return null;const t=e.message||String(e);try{const n=e;if(n.response?.data){const s=n.response.data;if(typeof s=="object"&&s!==null){const c=s,i=c.title&&typeof c.title=="string"?c.title:"Error",o=c.detail&&typeof c.detail=="string"?c.detail:i;if(c.title||c.detail)return{title:i,detail:o}}}}catch{}try{const n=t.indexOf("{");if(n!==-1){let s=0,c=-1;for(let i=n;i<t.length;i++)if(t[i]==="{"&&s++,t[i]==="}"&&(s--,s===0)){c=i;break}if(c!==-1){const i=t.substring(n,c+1),o=JSON.parse(i);if(o.title||o.detail){const l=o.title&&typeof o.title=="string"?o.title:"Error",f=o.detail&&typeof o.detail=="string"?o.detail:l;return{title:l,detail:f}}if(o.message&&typeof o.message=="string")return{title:"Error",detail:o.message};if(o.error&&typeof o.error=="string")return{title:"Error",detail:o.error}}}}catch{}return t.includes("ERR_EMPTY_RESPONSE")||t.includes("empty response")||t.includes("Connection error")?{title:"Connection Error",detail:"The server closed the connection without sending a response. Please check if the server is running and accessible."}:t.includes("timeout")||t.includes("Timeout")||t.includes("did not respond within")?{title:"Timeout Error",detail:"Request timed out. Please check your network connection and ensure the server is running."}:t.includes("Network")||t.includes("Failed to fetch")||t.includes("network")?{title:"Network Error",detail:"Unable to connect to server. Please check if the server is running and accessible."}:t.includes("CORS")||t.includes("cross-origin")||t.includes("CORS policy")?{title:"CORS Error",detail:"Cross-origin request blocked. Please check CORS configuration on the server."}:t.includes("ECONNREFUSED")||t.includes("connection refused")?{title:"Connection Error",detail:"Connection refused. Please check if the server is running and accessible."}:t.includes("ENOTFOUND")||t.includes("getaddrinfo")?{title:"Connection Error",detail:"Unable to resolve server address. Please check the server URL configuration."}:null}function Mt(e){return e instanceof Error?e.message:typeof e=="string"?e:"Unknown error occurred"}function qy(e){const t=e;return t?.status||t?.response?.status||null}function K1(){const{dataClient:e,error:t,isLoading:n,reinitialize:s}=yc(),[c,i]=se.useState(!1),[o,l]=se.useState(null),f=()=>{const D=Uk.getCachedDataClientConfig();return D?{baseUrl:D.baseUrl||"",controllerUrl:D.controllerUrl||"",clientId:D.clientId||"",clientTokenUri:D.clientTokenUri}:null};se.useEffect(()=>{if(e){const D=f();l(D||{baseUrl:typeof window<"u"?window.location.origin:"http://localhost:3183",controllerUrl:"",clientId:""})}else l(null)},[e]);const p=async()=>{i(!0);try{await s();const D=f();D&&l(D),Se.success("DataClient initialized successfully",{description:"Configuration fetched from server endpoint"})}catch(D){const A=D instanceof Error?D:new Error(Mt(D)),O=W1(A),x=O?.title||"Failed to initialize DataClient",M=O?.detail||A.message||"Unknown error occurred";Se.error(x,{description:M,duration:5e3})}finally{i(!1)}},h=!!e,u=o?.baseUrl||(typeof window<"u"?window.location.origin:""),m=o?.controllerUrl||"Not set",g=o?.clientId||"Not set",v=t?W1(t):null,S=v?.title||(t?"Error":null),w=v?.detail||(t?t.message:null),C=v!==null,N=!n&&!c,I=N&&t&&S&&w,R=N&&h&&!t;return b.jsxs("div",{className:"flex flex-col h-full",children:[b.jsx("div",{className:"border-b border-border bg-white",children:b.jsxs("div",{className:"px-8 py-6",children:[b.jsx("h1",{className:"text-2xl",children:"Configuration"}),b.jsx("p",{className:"text-muted-foreground mt-1",children:"Initialize and configure the Data Client connection"})]})}),b.jsx("div",{className:"flex-1 overflow-auto p-8",children:b.jsxs("div",{className:"max-w-4xl space-y-6",children:[I&&b.jsx(Ie,{className:"border-red-200 bg-red-50",children:b.jsx(Pe,{className:"pt-6",children:b.jsxs("div",{className:"flex items-start gap-3",children:[b.jsx($I,{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"}),b.jsxs("div",{className:"flex-1",children:[b.jsx("p",{className:"font-medium text-red-900 mb-1",children:S}),b.jsx("p",{className:`text-sm text-red-700 ${C?"":"font-mono break-all"}`,children:w})]})]})})}),R&&b.jsx(Ie,{className:"border-green-200 bg-green-50",children:b.jsx(Pe,{className:"pt-6",children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(V1,{className:"w-6 h-6 text-green-600"}),b.jsxs("div",{children:[b.jsx("p",{className:"font-medium text-green-900",children:"DataClient Initialized"}),b.jsx("p",{className:"text-sm text-green-700",children:"Ready to make API requests"})]})]})})}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center",children:b.jsx(oP,{className:"w-5 h-5 text-blue-600"})}),b.jsxs("div",{children:[b.jsx(Le,{children:"Zero-Config Setup"}),b.jsx(Ve,{children:"Automatically fetch configuration from server (Recommended)"})]})]})}),b.jsx(Pe,{children:b.jsx(rt,{onClick:p,disabled:n||c,className:"w-full",size:"lg",children:c?b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Initializing..."]}):b.jsxs(b.Fragment,{children:["Auto-Initialize DataClient",b.jsx(NI,{className:"w-4 h-4 ml-2"})]})})})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"w-10 h-10 rounded-lg bg-muted flex items-center justify-center",children:b.jsx(X1,{className:"w-5 h-5 text-muted-foreground"})}),b.jsxs("div",{children:[b.jsx(Le,{children:"Configuration Settings"}),b.jsx(Ve,{children:"Configure settings via environment variables"})]})]})}),b.jsx(Pe,{children:b.jsxs("div",{className:"space-y-4",children:[b.jsxs("p",{className:"text-sm text-muted-foreground",children:["You can change configuration settings by editing the ",b.jsx("code",{className:"px-1.5 py-0.5 bg-muted rounded text-xs",children:".env"})," file in the root directory:"]}),b.jsxs("div",{className:"bg-muted rounded-lg p-4 font-mono text-xs space-y-1",children:[b.jsx("div",{className:"text-muted-foreground",children:"# Application port (default: 3083)"}),b.jsx("div",{className:"text-muted-foreground",children:"PORT=3183"}),b.jsx("div",{className:"text-muted-foreground",children:"# MISO Application Client Credentials (per application)"}),b.jsx("div",{children:"MISO_CLIENTID=miso-controller-dev-miso-test"}),b.jsx("div",{children:"MISO_CLIENTSECRET=your-secret-here"}),b.jsx("div",{className:"text-muted-foreground",children:"# MISO Controller URL"}),b.jsx("div",{children:"MISO_CONTROLLER_URL=http://localhost:3000"})]}),b.jsxs("p",{className:"text-sm text-muted-foreground",children:["After modifying the ",b.jsx("code",{className:"px-1.5 py-0.5 bg-muted rounded text-xs",children:".env"})," file, restart the server for changes to take effect."]})]})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{children:"Connection Information"}),b.jsx(Ve,{children:"Current configuration settings"})]}),b.jsx(Pe,{children:b.jsxs("div",{className:"space-y-3 text-sm",children:[b.jsxs("div",{className:"flex justify-between py-2 border-b border-border",children:[b.jsx("span",{className:"text-muted-foreground",children:"Status"}),b.jsx("span",{className:h?"text-green-600 font-medium":"text-muted-foreground",children:h?"Connected":"Not Initialized"})]}),b.jsxs("div",{className:"flex justify-between py-2 border-b border-border",children:[b.jsx("span",{className:"text-muted-foreground",children:"Base URL"}),b.jsx("span",{className:"font-mono text-xs",children:u})]}),b.jsxs("div",{className:"flex justify-between py-2 border-b border-border",children:[b.jsx("span",{className:"text-muted-foreground",children:"Controller URL"}),b.jsx("span",{className:"font-mono text-xs",children:m})]}),b.jsxs("div",{className:"flex justify-between py-2 border-b border-border",children:[b.jsx("span",{className:"text-muted-foreground",children:"Client ID"}),b.jsx("span",{className:"font-mono text-xs",children:g})]}),o?.clientTokenUri&&b.jsxs("div",{className:"flex justify-between py-2",children:[b.jsx("span",{className:"text-muted-foreground",children:"Client Token URI"}),b.jsx("span",{className:"font-mono text-xs",children:o.clientTokenUri})]})]})})]})]})})]})}function Si(e,t,{checkForDefaultPrevented:n=!0}={}){return function(c){if(e?.(c),n===!1||!c.defaultPrevented)return t?.(c)}}function bw(e,t=[]){let n=[];function s(i,o){const l=se.createContext(o),f=n.length;n=[...n,o];const p=u=>{const{scope:m,children:g,...v}=u,S=m?.[e]?.[f]||l,w=se.useMemo(()=>v,Object.values(v));return b.jsx(S.Provider,{value:w,children:g})};p.displayName=i+"Provider";function h(u,m){const g=m?.[e]?.[f]||l,v=se.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${i}\``)}return[p,h]}const c=()=>{const i=n.map(o=>se.createContext(o));return function(l){const f=l?.[e]||i;return se.useMemo(()=>({[`__scope${e}`]:{...l,[e]:f}}),[l,f])}};return c.scopeName=e,[s,P$(c,...t)]}function P$(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(i){const o=s.reduce((l,{useScope:f,scopeName:p})=>{const u=f(i)[`__scope${p}`];return{...l,...u}},{});return se.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function pv(e){const t=O$(e),n=se.forwardRef((s,c)=>{const{children:i,...o}=s,l=se.Children.toArray(i),f=l.find(L$);if(f){const p=f.props.children,h=l.map(u=>u===f?se.Children.count(p)>1?se.Children.only(null):se.isValidElement(p)?p.props.children:null:u);return b.jsx(t,{...o,ref:c,children:se.isValidElement(p)?se.cloneElement(p,void 0,h):null})}return b.jsx(t,{...o,ref:c,children:i})});return n.displayName=`${e}.Slot`,n}function O$(e){const t=se.forwardRef((n,s)=>{const{children:c,...i}=n;if(se.isValidElement(c)){const o=D$(c),l=j$(i,c.props);return c.type!==se.Fragment&&(l.ref=s?Ev(s,o):o),se.cloneElement(c,l)}return se.Children.count(c)>1?se.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var N$=Symbol("radix.slottable");function L$(e){return se.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===N$}function j$(e,t){const n={...t};for(const s in t){const c=e[s],i=t[s];/^on[A-Z]/.test(s)?c&&i?n[s]=(...l)=>{const f=i(...l);return c(...l),f}:c&&(n[s]=c):s==="style"?n[s]={...c,...i}:s==="className"&&(n[s]=[c,i].filter(Boolean).join(" "))}return{...e,...n}}function D$(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function $$(e){const t=e+"CollectionProvider",[n,s]=bw(t),[c,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=S=>{const{scope:w,children:C}=S,N=se.useRef(null),I=se.useRef(new Map).current;return b.jsx(c,{scope:w,itemMap:I,collectionRef:N,children:C})};o.displayName=t;const l=e+"CollectionSlot",f=pv(l),p=se.forwardRef((S,w)=>{const{scope:C,children:N}=S,I=i(l,C),R=ef(w,I.collectionRef);return b.jsx(f,{ref:R,children:N})});p.displayName=l;const h=e+"CollectionItemSlot",u="data-radix-collection-item",m=pv(h),g=se.forwardRef((S,w)=>{const{scope:C,children:N,...I}=S,R=se.useRef(null),D=ef(w,R),A=i(h,C);return se.useEffect(()=>(A.itemMap.set(R,{ref:R,...I}),()=>void A.itemMap.delete(R))),b.jsx(m,{[u]:"",ref:D,children:N})});g.displayName=h;function v(S){const w=i(e+"CollectionConsumer",S);return se.useCallback(()=>{const N=w.collectionRef.current;if(!N)return[];const I=Array.from(N.querySelectorAll(`[${u}]`));return Array.from(w.itemMap.values()).sort((A,O)=>I.indexOf(A.ref.current)-I.indexOf(O.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:p,ItemSlot:g},v,s]}var Tf=globalThis?.document?se.useLayoutEffect:()=>{},U$=wv[" useId ".trim().toString()]||(()=>{}),q$=0;function Mk(e){const[t,n]=se.useState(U$());return Tf(()=>{n(s=>s??String(q$++))},[e]),e||(t?`radix-${t}`:"")}var M$=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],vc=M$.reduce((e,t)=>{const n=pv(`Primitive.${t}`),s=se.forwardRef((c,i)=>{const{asChild:o,...l}=c,f=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(f,{...l,ref:i})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function H$(e){const t=se.useRef(e);return se.useEffect(()=>{t.current=e}),se.useMemo(()=>(...n)=>t.current?.(...n),[])}var F$=wv[" useInsertionEffect ".trim().toString()]||Tf;function Hk({prop:e,defaultProp:t,onChange:n=()=>{},caller:s}){const[c,i,o]=W$({defaultProp:t,onChange:n}),l=e!==void 0,f=l?e:c;{const h=se.useRef(e!==void 0);se.useEffect(()=>{const u=h.current;u!==l&&console.warn(`${s} is changing from ${u?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,s])}const p=se.useCallback(h=>{if(l){const u=K$(h)?h(e):h;u!==e&&o.current?.(u)}else i(h)},[l,e,i,o]);return[f,p]}function W$({defaultProp:e,onChange:t}){const[n,s]=se.useState(e),c=se.useRef(n),i=se.useRef(t);return F$(()=>{i.current=t},[t]),se.useEffect(()=>{c.current!==n&&(i.current?.(n),c.current=n)},[n,c]),[n,s,i]}function K$(e){return typeof e=="function"}var B$=se.createContext(void 0);function Fk(e){const t=se.useContext(B$);return e||t||"ltr"}var My="rovingFocusGroup.onEntryFocus",z$={bubbles:!1,cancelable:!0},Ou="RovingFocusGroup",[mv,Wk,G$]=$$(Ou),[J$,Kk]=bw(Ou,[G$]),[V$,X$]=J$(Ou),Bk=se.forwardRef((e,t)=>b.jsx(mv.Provider,{scope:e.__scopeRovingFocusGroup,children:b.jsx(mv.Slot,{scope:e.__scopeRovingFocusGroup,children:b.jsx(Y$,{...e,ref:t})})}));Bk.displayName=Ou;var Y$=se.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:c=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:f,onEntryFocus:p,preventScrollOnEntryFocus:h=!1,...u}=e,m=se.useRef(null),g=ef(t,m),v=Fk(i),[S,w]=Hk({prop:o,defaultProp:l??null,onChange:f,caller:Ou}),[C,N]=se.useState(!1),I=H$(p),R=Wk(n),D=se.useRef(!1),[A,O]=se.useState(0);return se.useEffect(()=>{const x=m.current;if(x)return x.addEventListener(My,I),()=>x.removeEventListener(My,I)},[I]),b.jsx(V$,{scope:n,orientation:s,dir:v,loop:c,currentTabStopId:S,onItemFocus:se.useCallback(x=>w(x),[w]),onItemShiftTab:se.useCallback(()=>N(!0),[]),onFocusableItemAdd:se.useCallback(()=>O(x=>x+1),[]),onFocusableItemRemove:se.useCallback(()=>O(x=>x-1),[]),children:b.jsx(vc.div,{tabIndex:C||A===0?-1:0,"data-orientation":s,...u,ref:g,style:{outline:"none",...e.style},onMouseDown:Si(e.onMouseDown,()=>{D.current=!0}),onFocus:Si(e.onFocus,x=>{const M=!D.current;if(x.target===x.currentTarget&&M&&!C){const G=new CustomEvent(My,z$);if(x.currentTarget.dispatchEvent(G),!G.defaultPrevented){const V=R().filter(K=>K.focusable),z=V.find(K=>K.active),q=V.find(K=>K.id===S),$=[z,q,...V].filter(Boolean).map(K=>K.ref.current);Jk($,h)}}D.current=!1}),onBlur:Si(e.onBlur,()=>N(!1))})})}),zk="RovingFocusGroupItem",Gk=se.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:c=!1,tabStopId:i,children:o,...l}=e,f=Mk(),p=i||f,h=X$(zk,n),u=h.currentTabStopId===p,m=Wk(n),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:S}=h;return se.useEffect(()=>{if(s)return g(),()=>v()},[s,g,v]),b.jsx(mv.ItemSlot,{scope:n,id:p,focusable:s,active:c,children:b.jsx(vc.span,{tabIndex:u?0:-1,"data-orientation":h.orientation,...l,ref:t,onMouseDown:Si(e.onMouseDown,w=>{s?h.onItemFocus(p):w.preventDefault()}),onFocus:Si(e.onFocus,()=>h.onItemFocus(p)),onKeyDown:Si(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){h.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const C=eU(w,h.orientation,h.dir);if(C!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let I=m().filter(R=>R.focusable).map(R=>R.ref.current);if(C==="last")I.reverse();else if(C==="prev"||C==="next"){C==="prev"&&I.reverse();const R=I.indexOf(w.currentTarget);I=h.loop?tU(I,R+1):I.slice(R+1)}setTimeout(()=>Jk(I))}}),children:typeof o=="function"?o({isCurrentTabStop:u,hasTabStop:S!=null}):o})})});Gk.displayName=zk;var Q$={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Z$(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function eU(e,t,n){const s=Z$(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return Q$[s]}function Jk(e,t=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function tU(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var rU=Bk,nU=Gk;function sU(e,t){return se.useReducer((n,s)=>t[n][s]??n,e)}var Vk=e=>{const{present:t,children:n}=e,s=iU(t),c=typeof n=="function"?n({present:s.isPresent}):se.Children.only(n),i=ef(s.ref,oU(c));return typeof n=="function"||s.isPresent?se.cloneElement(c,{ref:i}):null};Vk.displayName="Presence";function iU(e){const[t,n]=se.useState(),s=se.useRef(null),c=se.useRef(e),i=se.useRef("none"),o=e?"mounted":"unmounted",[l,f]=sU(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return se.useEffect(()=>{const p=Vd(s.current);i.current=l==="mounted"?p:"none"},[l]),Tf(()=>{const p=s.current,h=c.current;if(h!==e){const m=i.current,g=Vd(p);e?f("MOUNT"):g==="none"||p?.display==="none"?f("UNMOUNT"):f(h&&m!==g?"ANIMATION_OUT":"UNMOUNT"),c.current=e}},[e,f]),Tf(()=>{if(t){let p;const h=t.ownerDocument.defaultView??window,u=g=>{const S=Vd(s.current).includes(CSS.escape(g.animationName));if(g.target===t&&S&&(f("ANIMATION_END"),!c.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",p=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},m=g=>{g.target===t&&(i.current=Vd(s.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{h.clearTimeout(p),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else f("ANIMATION_END")},[t,f]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:se.useCallback(p=>{s.current=p?getComputedStyle(p):null,n(p)},[])}}function Vd(e){return e?.animationName||"none"}function oU(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var lh="Tabs",[aU]=bw(lh,[Kk]),Xk=Kk(),[cU,Tw]=aU(lh),Yk=se.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,onValueChange:c,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:f="automatic",...p}=e,h=Fk(l),[u,m]=Hk({prop:s,onChange:c,defaultProp:i??"",caller:lh});return b.jsx(cU,{scope:n,baseId:Mk(),value:u,onValueChange:m,orientation:o,dir:h,activationMode:f,children:b.jsx(vc.div,{dir:h,"data-orientation":o,...p,ref:t})})});Yk.displayName=lh;var Qk="TabsList",Zk=se.forwardRef((e,t)=>{const{__scopeTabs:n,loop:s=!0,...c}=e,i=Tw(Qk,n),o=Xk(n);return b.jsx(rU,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:s,children:b.jsx(vc.div,{role:"tablist","aria-orientation":i.orientation,...c,ref:t})})});Zk.displayName=Qk;var eA="TabsTrigger",tA=se.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,disabled:c=!1,...i}=e,o=Tw(eA,n),l=Xk(n),f=sA(o.baseId,s),p=iA(o.baseId,s),h=s===o.value;return b.jsx(nU,{asChild:!0,...l,focusable:!c,active:h,children:b.jsx(vc.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":p,"data-state":h?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:f,...i,ref:t,onMouseDown:Si(e.onMouseDown,u=>{!c&&u.button===0&&u.ctrlKey===!1?o.onValueChange(s):u.preventDefault()}),onKeyDown:Si(e.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&o.onValueChange(s)}),onFocus:Si(e.onFocus,()=>{const u=o.activationMode!=="manual";!h&&!c&&u&&o.onValueChange(s)})})})});tA.displayName=eA;var rA="TabsContent",nA=se.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,forceMount:c,children:i,...o}=e,l=Tw(rA,n),f=sA(l.baseId,s),p=iA(l.baseId,s),h=s===l.value,u=se.useRef(h);return se.useEffect(()=>{const m=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(m)},[]),b.jsx(Vk,{present:c||h,children:({present:m})=>b.jsx(vc.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":f,hidden:!m,id:p,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:m&&i})})});nA.displayName=rA;function sA(e,t){return`${e}-trigger-${t}`}function iA(e,t){return`${e}-content-${t}`}var lU=Yk,uU=Zk,dU=tA,fU=nA;function uh({className:e,...t}){return b.jsx(lU,{"data-slot":"tabs",className:rs("flex flex-col gap-2",e),...t})}function dh({className:e,...t}){return b.jsx(uU,{"data-slot":"tabs-list",className:rs("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",e),...t})}function Jr({className:e,...t}){return b.jsx(dU,{"data-slot":"tabs-trigger",className:rs("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function Vr({className:e,...t}){return b.jsx(fU,{"data-slot":"tabs-content",className:rs("flex-1 outline-none",e),...t})}function hU(e,t){const[n,s]=se.useState(!1),[c,i]=se.useState(null),o=async(O,x,M)=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{let G;switch(O){case"GET":G=await e.get(x,{cache:{enabled:!1}});break;case"POST":G=await e.post(x,M);break;case"PUT":G=await e.put(x,M);break;case"PATCH":G=await e.patch(x,M);break;case"DELETE":G=await e.delete(x);break;default:throw new Error(`Unsupported method: ${O}`)}i({method:O,endpoint:x,status:200,timestamp:new Date().toISOString(),data:G}),Se.success(`${O} ${x} successful`)}catch(G){const V=Mt(G),z=qy(G)||"ERROR";i({method:O,endpoint:x,error:V,status:z,timestamp:new Date().toISOString()}),Se.error("Request failed",{description:V})}finally{s(!1)}};return{loading:n,result:c,isDisabled:n||t||!e,httpMethods:{testGet:()=>{o("GET","/api/users")},testGetById:()=>{o("GET","/api/users/1")},testPost:()=>{o("POST","/api/users",{name:"New User",email:"newuser@example.com"})},testPut:()=>{o("PUT","/api/users/1",{name:"John Doe Updated",email:"john.updated@example.com"})},testPatch:()=>{o("PATCH","/api/users/1",{email:"john.patched@example.com"})},testDelete:()=>{o("DELETE","/api/users/1")}},auth:{testIsAuthenticated:async()=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{const O=e.isAuthenticated();i({authenticated:O,timestamp:new Date().toISOString()}),Se.success(O?"User is authenticated":"User is not authenticated")}catch(O){const x=Mt(O);Se.error("Failed to check authentication",{description:x})}finally{s(!1)}},testGetToken:async()=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{const O=await e.getEnvironmentToken();i({token:O||"No token available",timestamp:new Date().toISOString()}),Se.success("Token retrieved successfully")}catch(O){const x=Mt(O);Se.error("Failed to get token",{description:x})}finally{s(!1)}},testGetClientTokenInfo:async()=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{const O=e.getClientTokenInfo();i({tokenInfo:O||"No token info available",timestamp:new Date().toISOString()}),Se.success("Token info retrieved successfully")}catch(O){const x=Mt(O);Se.error("Failed to get token info",{description:x})}finally{s(!1)}},testGetUser:async()=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{const O=await e.getUser();if(!O){Se.error("No user info available. Please login first."),i({error:"No user info available. User may not be authenticated. Please login first.",timestamp:new Date().toISOString()});return}i({userInfo:O,timestamp:new Date().toISOString()}),Se.success("User info retrieved successfully")}catch(O){const x=Mt(O),M=qy(O);M===401?Se.error("Authentication failed",{description:"Token is invalid or expired. Please login again."}):Se.error("Failed to get user info",{description:x}),i({error:x,status:M,timestamp:new Date().toISOString()})}finally{s(!1)}},testLogout:async()=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{await e.logout(),i({message:"User logged out successfully",timestamp:new Date().toISOString()}),Se.success("Logged out successfully")}catch(O){const x=Mt(O);Se.error("Logout failed",{description:x})}finally{s(!1)}},testRedirectToLogin:async()=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{i({message:"Redirecting to login... (Page will redirect to miso-controller login endpoint)",timestamp:new Date().toISOString()}),await e.redirectToLogin()}catch(O){const x=Mt(O);i({error:x,timestamp:new Date().toISOString()}),Se.error("Redirect to login failed",{description:x}),s(!1)}}},errors:{testNetworkError:async()=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{await e.get("/api/invalid-endpoint-that-does-not-exist-12345",{cache:{enabled:!1}})}catch(O){const x=Mt(O);i({error:x,type:"NETWORK_ERROR",message:x,timestamp:new Date().toISOString()}),Se.error("Network error occurred",{description:x})}finally{s(!1)}},testTimeout:async()=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{await e.get("/api/slow-endpoint",{cache:{enabled:!1},timeout:100})}catch(O){const x=Mt(O);i({error:x,type:"TIMEOUT_ERROR",message:x,timestamp:new Date().toISOString()}),Se.error("Request timeout occurred",{description:x})}finally{s(!1)}},testApiError:async()=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{await e.post("/api/users",{invalid:"data"})}catch(O){const x=Mt(O),M=qy(O);i({error:x,status:M||400,details:O.response?.data||x,timestamp:new Date().toISOString()}),Se.error("API error occurred",{description:x})}finally{s(!1)}}}}}function pU({isDisabled:e,httpMethods:t}){return b.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"GET Requests"}),b.jsx(Ve,{children:"Retrieve data from the server"})]}),b.jsxs(Pe,{className:"space-y-2",children:[b.jsx(rt,{onClick:t.testGet,disabled:e,className:"w-full bg-green-600 hover:bg-green-700",children:"GET /api/users"}),b.jsx(rt,{onClick:t.testGetById,disabled:e,className:"w-full bg-green-600 hover:bg-green-700",children:"GET /api/users/:id"})]})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"POST Requests"}),b.jsx(Ve,{children:"Create new resources"})]}),b.jsx(Pe,{children:b.jsx(rt,{onClick:t.testPost,disabled:e,className:"w-full bg-blue-600 hover:bg-blue-700",children:"POST /api/users"})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"PUT Requests"}),b.jsx(Ve,{children:"Update existing resources"})]}),b.jsx(Pe,{children:b.jsx(rt,{onClick:t.testPut,disabled:e,className:"w-full bg-orange-600 hover:bg-orange-700",children:"PUT /api/users/:id"})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"PATCH Requests"}),b.jsx(Ve,{children:"Partially update resources"})]}),b.jsx(Pe,{children:b.jsx(rt,{onClick:t.testPatch,disabled:e,className:"w-full bg-orange-600 hover:bg-orange-700",children:"PATCH /api/users/:id"})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"DELETE Requests"}),b.jsx(Ve,{children:"Remove resources"})]}),b.jsx(Pe,{children:b.jsx(rt,{onClick:t.testDelete,disabled:e,variant:"destructive",className:"w-full",children:"DELETE /api/users/:id"})})]})]})}function mU({isDisabled:e,auth:t}){return b.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Check Authentication"}),b.jsx(Ve,{children:"Verify user authentication status"})]}),b.jsx(Pe,{children:b.jsx(rt,{onClick:t.testIsAuthenticated,disabled:e,className:"w-full",children:"isAuthenticated()"})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Get Token"}),b.jsx(Ve,{children:"Retrieve environment token"})]}),b.jsx(Pe,{children:b.jsx(rt,{onClick:t.testGetToken,disabled:e,className:"w-full",children:"getEnvironmentToken()"})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Get Token Info"}),b.jsx(Ve,{children:"Get client token information"})]}),b.jsx(Pe,{children:b.jsx(rt,{onClick:t.testGetClientTokenInfo,disabled:e,className:"w-full",children:"getClientTokenInfo()"})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Get User"}),b.jsx(Ve,{children:"Get current user information"})]}),b.jsx(Pe,{children:b.jsx(rt,{onClick:t.testGetUser,disabled:e,className:"w-full !bg-purple-600 hover:!bg-purple-700 !text-white",children:"getUser()"})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Logout"}),b.jsx(Ve,{children:"End user session"})]}),b.jsx(Pe,{children:b.jsx(rt,{onClick:t.testLogout,disabled:e,variant:"destructive",className:"w-full",children:"logout()"})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Redirect to Login"}),b.jsx(Ve,{children:"Redirect to miso-controller login page"})]}),b.jsx(Pe,{children:b.jsx(rt,{onClick:t.testRedirectToLogin,disabled:e,className:"w-full bg-blue-600 hover:bg-blue-700",children:"redirectToLogin()"})})]})]})}function gU({isDisabled:e,errors:t}){return b.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Network Error"}),b.jsx(Ve,{children:"Simulate connection failure"})]}),b.jsx(Pe,{children:b.jsx(rt,{onClick:t.testNetworkError,disabled:e,variant:"destructive",className:"w-full",children:"Test Network Error"})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Timeout Error"}),b.jsx(Ve,{children:"Simulate request timeout"})]}),b.jsx(Pe,{children:b.jsx(rt,{onClick:t.testTimeout,disabled:e,variant:"destructive",className:"w-full",children:"Test Timeout"})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"API Error (400)"}),b.jsx(Ve,{children:"Simulate validation error"})]}),b.jsx(Pe,{children:b.jsx(rt,{onClick:t.testApiError,disabled:e,variant:"destructive",className:"w-full",children:"Test API Error"})})]})]})}function yU(){const{dataClient:e,isLoading:t}=yc(),{result:n,isDisabled:s,httpMethods:c,auth:i,errors:o}=hU(e,t);return b.jsxs("div",{className:"flex flex-col h-full",children:[b.jsx("div",{className:"border-b border-border bg-white",children:b.jsxs("div",{className:"px-8 py-6",children:[b.jsx("h1",{className:"text-2xl",children:"API Testing"}),b.jsx("p",{className:"text-muted-foreground mt-1",children:"Test HTTP methods, authentication, and error handling"})]})}),b.jsx("div",{className:"flex-1 overflow-auto p-8",children:b.jsxs("div",{className:"max-w-6xl",children:[b.jsxs(uh,{defaultValue:"http",className:"space-y-6",children:[b.jsxs(dh,{children:[b.jsx(Jr,{value:"http",children:"HTTP Methods"}),b.jsx(Jr,{value:"auth",children:"Authentication"}),b.jsx(Jr,{value:"errors",children:"Error Handling"})]}),b.jsx(Vr,{value:"http",className:"space-y-6",children:b.jsx(pU,{isDisabled:s,httpMethods:c})}),b.jsx(Vr,{value:"auth",className:"space-y-6",children:b.jsx(mU,{isDisabled:s,auth:i})}),b.jsx(Vr,{value:"errors",className:"space-y-6",children:b.jsx(gU,{isDisabled:s,errors:o})})]}),n&&b.jsxs(Ie,{className:"mt-6",children:[b.jsx(Ne,{children:b.jsx(Le,{className:"text-lg",children:"Response"})}),b.jsx(Pe,{children:b.jsx("pre",{className:"text-xs bg-muted p-4 rounded-lg overflow-x-auto",children:JSON.stringify(n,null,2)})})]})]})})]})}function aa({className:e,type:t,...n}){return b.jsx("input",{type:t,"data-slot":"input",className:rs("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}var vU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],wU=vU.reduce((e,t)=>{const n=Q1(`Primitive.${t}`),s=se.forwardRef((c,i)=>{const{asChild:o,...l}=c,f=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(f,{...l,ref:i})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{}),EU="Label",oA=se.forwardRef((e,t)=>b.jsx(wU.label,{...e,ref:t,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(e.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));oA.displayName=EU;var SU=oA;function yi({className:e,...t}){return b.jsx(SU,{"data-slot":"label",className:rs("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function bU(){const{dataClient:e,isLoading:t}=yc(),[n,s]=se.useState(!1),[c,i]=se.useState(null),[o,l]=se.useState("60000"),f=async()=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{const v=Date.now(),S=await e.get("/api/users",{cache:{enabled:!0,ttl:parseInt(o,10)}}),w=Date.now()-v;i({data:S,cached:w<100,cacheKey:"GET:/api/users",ttl:o+"ms",duration:w+"ms",timestamp:new Date().toISOString()}),Se.success("Data retrieved",{description:w<100?"Response served from cache":"Fetched from server"})}catch(v){const S=v instanceof Error?v.message:"Unknown error";Se.error("Request failed",{description:S})}finally{s(!1)}},p=async()=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{const v=Date.now(),S=await e.get("/api/users",{cache:{enabled:!1}}),w=Date.now()-v;i({data:S,cached:!1,duration:w+"ms",timestamp:new Date().toISOString()}),Se.success("Fresh data retrieved",{description:"Cache bypassed, fetched from server"})}catch(v){const S=v instanceof Error?v.message:"Unknown error";Se.error("Request failed",{description:S})}finally{s(!1)}},h=async()=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{e.clearCache();const v=e.getMetrics();i({message:"Cache cleared successfully",cacheHitRate:v.cacheHitRate,timestamp:new Date().toISOString()}),Se.success("Cache cleared",{description:"All cache entries removed"})}catch(v){const S=v instanceof Error?v.message:"Unknown error";Se.error("Failed to clear cache",{description:S})}finally{s(!1)}},u=async()=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{e.setInterceptors({onRequest:async(S,w)=>({...w,headers:{...w.headers,"X-Custom-Header":"intercepted","Cache-Control":"max-age=3600"}})});const v={url:"/api/users",method:"GET"};await e.get("/api/users",{cache:{enabled:!1}}),i({interceptor:"request",originalRequest:v,modifiedRequest:{...v,headers:{"X-Custom-Header":"intercepted","Cache-Control":"max-age=3600"}},timestamp:new Date().toISOString()}),Se.success("Request interceptor applied")}catch(v){const S=v instanceof Error?v.message:"Unknown error";Se.error("Interceptor test failed",{description:S})}finally{s(!1)}},m=async()=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{Se.info("Attempting request with retries...");const v=Date.now();await e.get("/api/users",{cache:{enabled:!1}});const S=Date.now()-v;i({message:"Request succeeded",duration:S+"ms",retries:"Automatic retries handled by DataClient",timestamp:new Date().toISOString()}),Se.success("Request completed")}catch(v){const S=v instanceof Error?v.message:"Unknown error";i({error:S,retries:"Retry logic attempted",timestamp:new Date().toISOString()}),Se.error("Request failed after retries",{description:S})}finally{s(!1)}},g=n||t||!e;return b.jsxs("div",{className:"flex flex-col h-full",children:[b.jsx("div",{className:"border-b border-border bg-white",children:b.jsxs("div",{className:"px-8 py-6",children:[b.jsx("h1",{className:"text-2xl",children:"Caching & Storage"}),b.jsx("p",{className:"text-muted-foreground mt-1",children:"Test caching mechanisms, interceptors, and retry logic"})]})}),b.jsx("div",{className:"flex-1 overflow-auto p-8",children:b.jsxs("div",{className:"max-w-6xl space-y-6",children:[b.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 flex items-center justify-center",children:b.jsx(Fy,{className:"w-5 h-5 text-green-600"})}),b.jsxs("div",{children:[b.jsx(Le,{className:"text-lg",children:"Cache Enabled"}),b.jsx(Ve,{children:"Retrieve data with caching"})]})]})}),b.jsxs(Pe,{className:"space-y-3",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(yi,{htmlFor:"cacheTTL",children:"Cache TTL (milliseconds)"}),b.jsx(aa,{id:"cacheTTL",type:"number",value:o,onChange:v=>l(v.target.value),placeholder:"60000"})]}),b.jsxs(rt,{onClick:f,disabled:g,className:"w-full bg-green-600 hover:bg-green-700",children:[b.jsx(Fy,{className:"w-4 h-4 mr-2"}),"GET with Cache"]})]})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center",children:b.jsx(Zd,{className:"w-5 h-5 text-blue-600"})}),b.jsxs("div",{children:[b.jsx(Le,{className:"text-lg",children:"Cache Bypassed"}),b.jsx(Ve,{children:"Fetch fresh data from server"})]})]})}),b.jsx(Pe,{children:b.jsxs(rt,{onClick:p,disabled:g,className:"w-full bg-blue-600 hover:bg-blue-700",children:[b.jsx(Zd,{className:"w-4 h-4 mr-2"}),"GET without Cache"]})})]})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Cache Management"}),b.jsx(Ve,{children:"Clear cache entries"})]}),b.jsx(Pe,{className:"space-y-4",children:b.jsx("div",{className:"grid grid-cols-2 gap-4",children:b.jsxs(rt,{onClick:h,disabled:g,variant:"outline",className:"border-orange-200 text-orange-700 hover:bg-orange-50",children:[b.jsx(Ky,{className:"w-4 h-4 mr-2"}),"Clear All Cache"]})})})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Request Interceptors"}),b.jsx(Ve,{children:"Modify requests before sending"})]}),b.jsx(Pe,{children:b.jsx(rt,{onClick:u,disabled:g,className:"w-full",children:"Test Request Interceptor"})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Retry Logic"}),b.jsx(Ve,{children:"Automatic retry on failures"})]}),b.jsx(Pe,{children:b.jsx(rt,{onClick:m,disabled:g,className:"w-full",children:"Test Retry Mechanism"})})]})]}),c&&b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{className:"text-lg",children:"Response"})}),b.jsx(Pe,{children:b.jsx("pre",{className:"text-xs bg-muted p-4 rounded-lg overflow-x-auto",children:JSON.stringify(c,null,2)})})]})]})})]})}function TU(){const{dataClient:e,isLoading:t}=yc(),[n,s]=se.useState(!1),[c,i]=se.useState(null),[o,l]=se.useState([]),f=()=>{if(e)try{const w=e.getMetrics();i({totalRequests:w.totalRequests,successfulRequests:w.totalRequests-w.totalFailures,failedRequests:w.totalFailures,cacheHits:Math.round(w.cacheHitRate*w.totalRequests*.3),cacheMisses:Math.round(w.totalRequests*.7),averageResponseTime:Math.round(w.averageResponseTime),cacheHitRate:w.cacheHitRate,errorRate:w.errorRate})}catch(w){console.error("Failed to load metrics:",w)}};se.useEffect(()=>{e&&f()},[e]);const p=async()=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{f(),Se.success("Metrics retrieved successfully")}catch(w){const C=w instanceof Error?w.message:"Unknown error";Se.error("Failed to get metrics",{description:C})}finally{s(!1)}},h=async()=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{Se.info("Making multiple requests...");const w=Date.now(),C=[e.get("/api/users",{cache:{enabled:!1}}).catch(()=>null),e.get("/api/products",{cache:{enabled:!1}}).catch(()=>null),e.get("/api/orders",{cache:{enabled:!1}}).catch(()=>null)];await Promise.all(C);const N=Date.now()-w,I=[{endpoint:"/api/users",status:200,duration:`${Math.round(N/3)}ms`,timestamp:new Date().toISOString()},{endpoint:"/api/products",status:200,duration:`${Math.round(N/3)}ms`,timestamp:new Date().toISOString()},{endpoint:"/api/orders",status:200,duration:`${Math.round(N/3)}ms`,timestamp:new Date().toISOString()}];l(R=>[...I,...R]),f(),Se.success("All requests completed",{description:`Total duration: ${N}ms`})}catch(w){const C=w instanceof Error?w.message:"Unknown error";Se.error("Some requests failed",{description:C})}finally{s(!1)}},u=async()=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{const w=Date.now();await e.put("/api/users/1",{name:"Updated User",email:"updated@example.com"}).catch(()=>null);const C=Date.now()-w,N={id:"audit-"+Date.now(),action:"USER_UPDATE",timestamp:new Date().toISOString(),endpoint:"/api/users/1",method:"PUT",status:200,duration:`${C}ms`};l(I=>[N,...I]),f(),Se.success("Audit log created")}catch(w){const C=w instanceof Error?w.message:"Unknown error";Se.error("Audit logging test failed",{description:C})}finally{s(!1)}},m=()=>{l([]),Se.success("Audit logs cleared")},g=c&&c.totalRequests>0?(c.successfulRequests/c.totalRequests*100).toFixed(1):"0",v=c&&c.cacheHitRate!==void 0?(c.cacheHitRate*100).toFixed(1):c&&c.cacheHits+c.cacheMisses>0?(c.cacheHits/(c.cacheHits+c.cacheMisses)*100).toFixed(1):"0",S=n||t||!e;return b.jsxs("div",{className:"flex flex-col h-full",children:[b.jsx("div",{className:"border-b border-border bg-white",children:b.jsxs("div",{className:"px-8 py-6",children:[b.jsx("h1",{className:"text-2xl",children:"Monitoring & Logs"}),b.jsx("p",{className:"text-muted-foreground mt-1",children:"View performance metrics, audit logs, and system health"})]})}),b.jsx("div",{className:"flex-1 overflow-auto p-8",children:b.jsx("div",{className:"max-w-6xl",children:b.jsxs(uh,{defaultValue:"metrics",className:"space-y-6",children:[b.jsxs(dh,{children:[b.jsx(Jr,{value:"metrics",children:"Metrics"}),b.jsx(Jr,{value:"audit",children:"Audit Logs"})]}),b.jsxs(Vr,{value:"metrics",className:"space-y-6",children:[b.jsxs("div",{className:"flex gap-2",children:[b.jsxs(rt,{onClick:p,disabled:S,className:"bg-blue-600 hover:bg-blue-700",children:[b.jsx(PI,{className:"w-4 h-4 mr-2"}),"Refresh Metrics"]}),b.jsxs(rt,{onClick:h,disabled:S,className:"bg-green-600 hover:bg-green-700",children:[b.jsx(BS,{className:"w-4 h-4 mr-2"}),"Make Multiple Requests"]})]}),c&&b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[b.jsx(Ie,{children:b.jsxs(Pe,{className:"pt-6",children:[b.jsx("div",{className:"text-2xl font-semibold",children:c.totalRequests}),b.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Total Requests"})]})}),b.jsx(Ie,{children:b.jsxs(Pe,{className:"pt-6",children:[b.jsxs("div",{className:"text-2xl font-semibold text-green-600",children:[g,"%"]}),b.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Success Rate"})]})}),b.jsx(Ie,{children:b.jsxs(Pe,{className:"pt-6",children:[b.jsxs("div",{className:"text-2xl font-semibold text-blue-600",children:[v,"%"]}),b.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Cache Hit Rate"})]})}),b.jsx(Ie,{children:b.jsxs(Pe,{className:"pt-6",children:[b.jsxs("div",{className:"text-2xl font-semibold",children:[c.averageResponseTime,"ms"]}),b.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Avg Response Time"})]})})]}),b.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Request Status"}),b.jsx(Ve,{children:"Breakdown by success/failure"})]}),b.jsx(Pe,{children:b.jsxs("div",{className:"space-y-3",children:[b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("span",{className:"text-sm text-muted-foreground",children:"Successful"}),b.jsx("span",{className:"text-sm font-medium text-green-600",children:c.successfulRequests})]}),b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("span",{className:"text-sm text-muted-foreground",children:"Failed"}),b.jsx("span",{className:"text-sm font-medium text-red-600",children:c.failedRequests})]}),b.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-border",children:[b.jsx("span",{className:"text-sm font-medium",children:"Total"}),b.jsx("span",{className:"text-sm font-medium",children:c.totalRequests})]})]})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Cache Performance"}),b.jsx(Ve,{children:"Cache hits vs misses"})]}),b.jsx(Pe,{children:b.jsxs("div",{className:"space-y-3",children:[b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("span",{className:"text-sm text-muted-foreground",children:"Cache Hits"}),b.jsx("span",{className:"text-sm font-medium text-green-600",children:c.cacheHits})]}),b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("span",{className:"text-sm text-muted-foreground",children:"Cache Misses"}),b.jsx("span",{className:"text-sm font-medium text-orange-600",children:c.cacheMisses})]}),b.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-border",children:[b.jsx("span",{className:"text-sm font-medium",children:"Hit Rate"}),b.jsxs("span",{className:"text-sm font-medium text-blue-600",children:[v,"%"]})]})]})})]})]}),c&&b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Metrics Details"}),b.jsx(Ve,{children:"Detailed performance metrics"})]}),b.jsx(Pe,{children:b.jsxs("div",{className:"space-y-3 text-sm",children:[b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{className:"text-muted-foreground",children:"Total Requests"}),b.jsx("span",{className:"font-medium",children:c.totalRequests})]}),b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{className:"text-muted-foreground",children:"Successful"}),b.jsx("span",{className:"font-medium text-green-600",children:c.successfulRequests})]}),b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{className:"text-muted-foreground",children:"Failed"}),b.jsx("span",{className:"font-medium text-red-600",children:c.failedRequests})]}),b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{className:"text-muted-foreground",children:"Error Rate"}),b.jsxs("span",{className:"font-medium",children:[(c.errorRate*100).toFixed(1),"%"]})]}),b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{className:"text-muted-foreground",children:"Average Response Time"}),b.jsxs("span",{className:"font-medium",children:[c.averageResponseTime,"ms"]})]})]})})]})]})]}),b.jsxs(Vr,{value:"audit",className:"space-y-6",children:[b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsxs("div",{className:"flex gap-2",children:[b.jsxs(rt,{onClick:u,disabled:S,children:[b.jsx(X1,{className:"w-4 h-4 mr-2"}),"Create Audit Log"]}),b.jsxs(rt,{onClick:h,disabled:S,className:"bg-green-600 hover:bg-green-700",children:[b.jsx(BS,{className:"w-4 h-4 mr-2"}),"Make Multiple Requests"]})]}),o.length>0&&b.jsx(rt,{onClick:m,variant:"outline",size:"sm",children:"Clear Logs"})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Audit Log Entries"}),b.jsx(Ve,{children:"Recent activity and requests"})]}),b.jsx(Pe,{children:o.length===0?b.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No audit logs yet. Make some requests to see logs here."}):b.jsx("div",{className:"space-y-2",children:o.map((w,C)=>b.jsxs("div",{className:"p-3 bg-muted rounded-lg text-sm",children:[b.jsxs("div",{className:"flex items-center justify-between mb-1",children:[b.jsx("span",{className:"font-mono text-xs",children:w.endpoint}),b.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(w.timestamp).toLocaleTimeString()})]}),b.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[b.jsxs("span",{children:["Method: ",b.jsx("span",{className:"font-medium",children:w.method||"GET"})]}),b.jsxs("span",{children:["Status: ",b.jsx("span",{className:`font-medium ${w.status===200?"text-green-600":"text-red-600"}`,children:w.status})]}),b.jsxs("span",{children:["Duration: ",b.jsx("span",{className:"font-medium",children:w.duration})]})]})]},C))})})]})]})]})})})]})}function CU(e){return!e||e.trim().length===0?{valid:!1,error:"Role name cannot be empty"}:e.length>100?{valid:!1,error:"Role name must be 100 characters or less"}:/^[a-zA-Z0-9_-]+$/.test(e.trim())?{valid:!0}:{valid:!1,error:"Role name can only contain letters, numbers, underscores, and hyphens"}}function aA(e){return!e||e.trim().length===0?{valid:!1,error:"Permission name cannot be empty"}:e.length>100?{valid:!1,error:"Permission name must be 100 characters or less"}:/^[a-zA-Z0-9_.-]+$/.test(e.trim())?{valid:!0}:{valid:!1,error:"Permission name can only contain letters, numbers, underscores, dots, and hyphens"}}function B1(e){if(!e||e.trim().length===0)return{valid:!1,error:"Permissions cannot be empty"};const t=e.split(",").map(n=>n.trim()).filter(Boolean);if(t.length===0)return{valid:!1,error:"At least one permission must be provided"};for(const n of t){const s=aA(n);if(!s.valid)return{valid:!1,error:`Invalid permission: ${n}. ${s.error}`}}return{valid:!0}}function _U(e,t){const[n,s]=se.useState(!1),[c,i]=se.useState(null),[o,l]=se.useState([]),[f,p]=se.useState([]);return{loading:n,result:c,roles:o,permissions:f,isDisabled:n||t||!e,testGetRoles:async()=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{const O=await e.getRoles();l(O),i({roles:O,count:O.length,timestamp:new Date().toISOString()}),Se.success(`Retrieved ${O.length} roles`)}catch(O){const x=Mt(O);Se.error("Failed to get roles",{description:x}),l([])}finally{s(!1)}},testGetPermissions:async()=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{const O=await e.getPermissions();p(O),i({permissions:O,count:O.length,timestamp:new Date().toISOString()}),Se.success(`Retrieved ${O.length} permissions`)}catch(O){const x=Mt(O);Se.error("Failed to get permissions",{description:x}),p([])}finally{s(!1)}},testHasRole:async O=>{if(!e){Se.error("DataClient not initialized");return}const x=CU(O);if(!x.valid){Se.error(x.error||"Invalid role name");return}s(!0);try{const M=await e.hasRole(O);i({role:O,hasRole:M,timestamp:new Date().toISOString()}),Se.success(M?`User has role: ${O}`:`User does not have role: ${O}`)}catch(M){const G=Mt(M);Se.error("Failed to check role",{description:G})}finally{s(!1)}},testHasPermission:async O=>{if(!e){Se.error("DataClient not initialized");return}const x=aA(O);if(!x.valid){Se.error(x.error||"Invalid permission name");return}s(!0);try{const M=await e.hasPermission(O);i({permission:O,hasPermission:M,timestamp:new Date().toISOString()}),Se.success(M?`User has permission: ${O}`:`User does not have permission: ${O}`)}catch(M){const G=Mt(M);Se.error("Failed to check permission",{description:G})}finally{s(!1)}},testHasAnyRole:async O=>{if(!e){Se.error("DataClient not initialized");return}if(!O){Se.error("Please enter roles to check (comma-separated)");return}s(!0);try{const x=O.split(",").map(G=>G.trim()).filter(Boolean),M=await e.hasAnyRole(x);i({roles:x,hasAnyRole:M,timestamp:new Date().toISOString()}),Se.success(M?"User has at least one of the roles":"User does not have any of the roles")}catch(x){const M=Mt(x);Se.error("Failed to check roles",{description:M})}finally{s(!1)}},testHasAllRoles:async O=>{if(!e){Se.error("DataClient not initialized");return}if(!O){Se.error("Please enter roles to check (comma-separated)");return}s(!0);try{const x=O.split(",").map(G=>G.trim()).filter(Boolean),M=await e.hasAllRoles(x);i({roles:x,hasAllRoles:M,timestamp:new Date().toISOString()}),Se.success(M?"User has all of the roles":"User does not have all of the roles")}catch(x){const M=Mt(x);Se.error("Failed to check roles",{description:M})}finally{s(!1)}},testHasAnyPermission:async O=>{if(!e){Se.error("DataClient not initialized");return}const x=B1(O);if(!x.valid){Se.error(x.error||"Invalid permissions");return}s(!0);try{const M=O.split(",").map(V=>V.trim()).filter(Boolean),G=await e.hasAnyPermission(M);i({permissions:M,hasAnyPermission:G,timestamp:new Date().toISOString()}),Se.success(G?"User has at least one of the permissions":"User does not have any of the permissions")}catch(M){const G=Mt(M);Se.error("Failed to check permissions",{description:G})}finally{s(!1)}},testHasAllPermissions:async O=>{if(!e){Se.error("DataClient not initialized");return}const x=B1(O);if(!x.valid){Se.error(x.error||"Invalid permissions");return}s(!0);try{const M=O.split(",").map(V=>V.trim()).filter(Boolean),G=await e.hasAllPermissions(M);i({permissions:M,hasAllPermissions:G,timestamp:new Date().toISOString()}),Se.success(G?"User has all of the permissions":"User does not have all of the permissions")}catch(M){const G=Mt(M);Se.error("Failed to check permissions",{description:G})}finally{s(!1)}},testRefreshRoles:async()=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{const O=await e.refreshRoles();l(O),i({message:"Roles cache refreshed",roles:O,timestamp:new Date().toISOString()}),Se.success("Roles cache refreshed")}catch(O){const x=Mt(O);Se.error("Failed to refresh roles",{description:x})}finally{s(!1)}},testRefreshPermissions:async()=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{const O=await e.refreshPermissions();p(O),i({message:"Permissions cache refreshed",permissions:O,timestamp:new Date().toISOString()}),Se.success("Permissions cache refreshed")}catch(O){const x=Mt(O);Se.error("Failed to refresh permissions",{description:x})}finally{s(!1)}},testClearRolesCache:async()=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{await e.clearRolesCache(),i({message:"Roles cache cleared",timestamp:new Date().toISOString()}),Se.success("Roles cache cleared")}catch(O){const x=Mt(O);Se.error("Failed to clear roles cache",{description:x})}finally{s(!1)}},testClearPermissionsCache:async()=>{if(!e){Se.error("DataClient not initialized");return}s(!0);try{await e.clearPermissionsCache(),i({message:"Permissions cache cleared",timestamp:new Date().toISOString()}),Se.success("Permissions cache cleared")}catch(O){const x=Mt(O);Se.error("Failed to clear permissions cache",{description:x})}finally{s(!1)}}}}function xU(){const{dataClient:e,isLoading:t}=yc(),{result:n,roles:s,permissions:c,isDisabled:i,testGetRoles:o,testGetPermissions:l,testHasRole:f,testHasPermission:p,testHasAnyRole:h,testHasAllRoles:u,testHasAnyPermission:m,testHasAllPermissions:g,testRefreshRoles:v,testRefreshPermissions:S,testClearRolesCache:w,testClearPermissionsCache:C}=_U(e,t),[N,I]=se.useState(""),[R,D]=se.useState(""),[A,O]=se.useState(""),[x,M]=se.useState("");return b.jsxs("div",{className:"flex flex-col h-full",children:[b.jsx("div",{className:"border-b border-border bg-white",children:b.jsxs("div",{className:"px-8 py-6",children:[b.jsx("h1",{className:"text-2xl",children:"Authorization"}),b.jsx("p",{className:"text-muted-foreground mt-1",children:"Test roles and permissions using DataClient methods"})]})}),b.jsx("div",{className:"flex-1 overflow-auto p-8",children:b.jsxs("div",{className:"max-w-6xl",children:[b.jsxs(uh,{defaultValue:"roles",className:"space-y-6",children:[b.jsxs(dh,{children:[b.jsx(Jr,{value:"roles",children:"Roles"}),b.jsx(Jr,{value:"permissions",children:"Permissions"})]}),b.jsx(Vr,{value:"roles",className:"space-y-6",children:b.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Get Roles"}),b.jsx(Ve,{children:"Retrieve user roles (auto-retrieves token from localStorage)"})]}),b.jsxs(Pe,{children:[b.jsxs(rt,{onClick:o,disabled:i,className:"w-full",children:[b.jsx(Wy,{className:"w-4 h-4 mr-2"}),"getRoles()"]}),s.length>0&&b.jsx("div",{className:"mt-4",children:b.jsxs(yi,{children:["Current Roles: ",s.length]})})]})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Check Role"}),b.jsx(Ve,{children:"Check if user has a specific role"})]}),b.jsxs(Pe,{className:"space-y-3",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(yi,{htmlFor:"roleToCheck",children:"Role Name"}),b.jsx(aa,{id:"roleToCheck",value:N,onChange:G=>I(G.target.value),placeholder:"admin"})]}),b.jsx(rt,{onClick:()=>f(N),disabled:i,className:"w-full",children:"hasRole()"})]})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Check Any Role"}),b.jsx(Ve,{children:"Check if user has any of the specified roles"})]}),b.jsxs(Pe,{className:"space-y-3",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(yi,{htmlFor:"rolesToCheck",children:"Roles (comma-separated)"}),b.jsx(aa,{id:"rolesToCheck",value:A,onChange:G=>O(G.target.value),placeholder:"admin, user"})]}),b.jsx(rt,{onClick:()=>h(A),disabled:i,className:"w-full",children:"hasAnyRole()"})]})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Check All Roles"}),b.jsx(Ve,{children:"Check if user has all of the specified roles"})]}),b.jsxs(Pe,{className:"space-y-3",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(yi,{htmlFor:"rolesToCheckAll",children:"Roles (comma-separated)"}),b.jsx(aa,{id:"rolesToCheckAll",value:A,onChange:G=>O(G.target.value),placeholder:"admin, user"})]}),b.jsx(rt,{onClick:()=>u(A),disabled:i,className:"w-full",children:"hasAllRoles()"})]})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Refresh Roles"}),b.jsx(Ve,{children:"Force refresh roles (bypass cache)"})]}),b.jsx(Pe,{children:b.jsxs(rt,{onClick:v,disabled:i,className:"w-full",children:[b.jsx(Zd,{className:"w-4 h-4 mr-2"}),"refreshRoles()"]})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Clear Roles Cache"}),b.jsx(Ve,{children:"Clear cached roles"})]}),b.jsx(Pe,{children:b.jsxs(rt,{onClick:w,disabled:i,variant:"outline",className:"w-full",children:[b.jsx(Ky,{className:"w-4 h-4 mr-2"}),"clearRolesCache()"]})})]})]})}),b.jsx(Vr,{value:"permissions",className:"space-y-6",children:b.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Get Permissions"}),b.jsx(Ve,{children:"Retrieve user permissions (auto-retrieves token from localStorage)"})]}),b.jsxs(Pe,{children:[b.jsxs(rt,{onClick:l,disabled:i,className:"w-full",children:[b.jsx(Wy,{className:"w-4 h-4 mr-2"}),"getPermissions()"]}),c.length>0&&b.jsx("div",{className:"mt-4",children:b.jsxs(yi,{children:["Current Permissions: ",c.length]})})]})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Check Permission"}),b.jsx(Ve,{children:"Check if user has a specific permission"})]}),b.jsxs(Pe,{className:"space-y-3",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(yi,{htmlFor:"permissionToCheck",children:"Permission Name"}),b.jsx(aa,{id:"permissionToCheck",value:R,onChange:G=>D(G.target.value),placeholder:"users:read"})]}),b.jsx(rt,{onClick:()=>p(R),disabled:i,className:"w-full",children:"hasPermission()"})]})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Check Any Permission"}),b.jsx(Ve,{children:"Check if user has any of the specified permissions"})]}),b.jsxs(Pe,{className:"space-y-3",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(yi,{htmlFor:"permissionsToCheck",children:"Permissions (comma-separated)"}),b.jsx(aa,{id:"permissionsToCheck",value:x,onChange:G=>M(G.target.value),placeholder:"users:read, users:write"})]}),b.jsx(rt,{onClick:()=>m(x),disabled:i,className:"w-full",children:"hasAnyPermission()"})]})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Check All Permissions"}),b.jsx(Ve,{children:"Check if user has all of the specified permissions"})]}),b.jsxs(Pe,{className:"space-y-3",children:[b.jsxs("div",{className:"space-y-2",children:[b.jsx(yi,{htmlFor:"permissionsToCheckAll",children:"Permissions (comma-separated)"}),b.jsx(aa,{id:"permissionsToCheckAll",value:x,onChange:G=>M(G.target.value),placeholder:"users:read, users:write"})]}),b.jsx(rt,{onClick:()=>g(x),disabled:i,className:"w-full",children:"hasAllPermissions()"})]})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Refresh Permissions"}),b.jsx(Ve,{children:"Force refresh permissions (bypass cache)"})]}),b.jsx(Pe,{children:b.jsxs(rt,{onClick:S,disabled:i,className:"w-full",children:[b.jsx(Zd,{className:"w-4 h-4 mr-2"}),"refreshPermissions()"]})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{className:"text-lg",children:"Clear Permissions Cache"}),b.jsx(Ve,{children:"Clear cached permissions"})]}),b.jsx(Pe,{children:b.jsxs(rt,{onClick:C,disabled:i,variant:"outline",className:"w-full",children:[b.jsx(Ky,{className:"w-4 h-4 mr-2"}),"clearPermissionsCache()"]})})]})]})})]}),n&&b.jsxs(Ie,{className:"mt-6",children:[b.jsx(Ne,{children:b.jsx(Le,{className:"text-lg",children:"Response"})}),b.jsx(Pe,{children:b.jsx("pre",{className:"text-xs bg-muted p-4 rounded-lg overflow-x-auto",children:JSON.stringify(n,null,2)})})]})]})})]})}const tt={gettingStarted:{serverSetup:`import express from 'express';
import { MisoClient, createClientTokenEndpoint, loadConfig } from '@aifabrix/miso-client';

const app = express();
app.use(express.json());

// Initialize MisoClient with environment variables
const misoClient = new MisoClient(loadConfig());
await misoClient.initialize();

// Create client token endpoint (environment token endpoint)
// This endpoint:
// - Validates request origin (CORS)
// - Fetches environment token (client token) from MISO Controller
// - Returns environment token + DataClient configuration
// NOTE: This provides an ENVIRONMENT TOKEN, not a user token
app.post('/api/v1/auth/client-token', createClientTokenEndpoint(misoClient));

// Your API routes
app.get('/api/users', async (req, res) => {
  // Your business logic here
  res.json({ users: [] });
});

app.listen(3000, () => {
  console.log('Server running on http://localhost:3000');
});`,environmentVariables:`# Server-side environment variables (.env)
# Required for MisoClient initialization

# MISO Controller Configuration
MISO_CLIENTID=ctrl-dev-my-app
MISO_CLIENTSECRET=your-client-secret-here
MISO_CONTROLLER_URL=https://controller.aifabrix.ai

# Optional: Redis for caching (recommended for production)
REDIS_HOST=localhost
REDIS_PORT=6379

# Optional: Logging level
MISO_LOG_LEVEL=info`,clientSetup:`import { autoInitializeDataClient } from '@aifabrix/miso-client';

// Zero-config initialization
// Automatically fetches config from server's /api/v1/auth/client-token endpoint
const dataClient = await autoInitializeDataClient();

// Now you can use DataClient
const users = await dataClient.get('/api/users');
console.log('Users:', users);`,completeExample:`// ============================================
// SERVER-SIDE (Express.js)
// ============================================

import express from 'express';
import { MisoClient, createClientTokenEndpoint, loadConfig } from '@aifabrix/miso-client';

const app = express();
app.use(express.json());

// 1. Initialize MisoClient
const misoClient = new MisoClient(loadConfig());
await misoClient.initialize();

// 2. Create client token endpoint (environment token endpoint)
// This endpoint:
// - Validates request origin (CORS)
// - Fetches environment token (client token) from MISO Controller
// - Returns environment token + DataClient configuration
// NOTE: This provides an ENVIRONMENT TOKEN (client token), not a user token
app.post('/api/v1/auth/client-token', createClientTokenEndpoint(misoClient));

// 3. Your API routes
// Option A: Public routes (no authentication)
app.get('/api/public', async (req, res) => {
  res.json({ message: 'Public endpoint' });
});

// Option B: Protected routes (validate user token)
app.get('/api/users', async (req, res) => {
  // Extract user token from Authorization header
  const userToken = misoClient.getToken(req);
  
  if (!userToken) {
    return res.status(401).json({ error: 'Unauthorized - no token' });
  }
  
  // Validate user token with MISO Controller
  const isValid = await misoClient.auth.validateToken(userToken);
  if (!isValid) {
    return res.status(401).json({ error: 'Unauthorized - invalid token' });
  }
  
  // Token is valid, proceed with business logic
  res.json({ users: [{ id: 1, name: 'John' }] });
});

app.listen(3000);

// ============================================
// CLIENT-SIDE (Browser/React)
// ============================================

import { autoInitializeDataClient } from '@aifabrix/miso-client';

// 1. Initialize DataClient (zero-config)
// Automatically calls POST /api/v1/auth/client-token
// Receives: environment token (client token) + DataClient config
const dataClient = await autoInitializeDataClient();

// 2. Use DataClient
// Environment token is automatically sent in x-client-token header
// This authenticates the CLIENT APPLICATION, not the user
const users = await dataClient.get('/api/users');
console.log('Users:', users);

// 3. For user-authenticated requests:
// User must login first (via MISO Controller)
// User token is stored in localStorage by DataClient
// DataClient automatically includes user token in Authorization header`,howItWorks:`// HOW IT WORKS:
//
// 1. SERVER SETUP:
//    - Server has MISO_CLIENTID and MISO_CLIENTSECRET (never exposed to browser)
//    - Server creates /api/v1/auth/client-token endpoint
//    - This endpoint fetches ENVIRONMENT TOKEN (client token) from MISO Controller
//    - Returns environment token + DataClient configuration to browser
//    - Validates request origin (CORS) before returning token
//
// 2. CLIENT SETUP:
//    - Browser calls autoInitializeDataClient()
//    - DataClient calls POST /api/v1/auth/client-token
//    - Receives environment token (client token) + configuration
//    - Stores environment token in localStorage (with expiration)
//    - Initializes DataClient with received config
//
// 3. REQUEST FLOW:
//    - Client makes request: dataClient.get('/api/users')
//    - DataClient automatically adds x-client-token header (environment token)
//    - Environment token authenticates the CLIENT APPLICATION
//    - For user authentication, validate user token (Bearer token) in your routes
//
// TOKEN TYPES:
// - ENVIRONMENT TOKEN (client token): Authenticates the client application
//   - Sent in x-client-token header
//   - Used to authenticate with MISO Controller
//   - Short-lived (default: 30 minutes)
//   - Automatically refreshed when expired
//
// - USER TOKEN: Authenticates the user
//   - Sent in Authorization: Bearer <token> header
//   - Obtained via login flow
//   - Validated in your API routes using misoClient.auth.validateToken()
//
// SECURITY:
// - Client secret NEVER exposed to browser
// - Environment token is short-lived (default: 30 minutes)
// - Token automatically refreshed when expired
// - Origin validation prevents token theft
// - Your API routes should validate USER tokens, not client tokens`,validateUserTokens:`// ============================================
// VALIDATING USER TOKENS IN API ROUTES
// ============================================

import express from 'express';
import { MisoClient, loadConfig } from '@aifabrix/miso-client';

const app = express();
app.use(express.json());

const misoClient = new MisoClient(loadConfig());
await misoClient.initialize();

// Option 1: Manual validation in each route
app.get('/api/users', async (req, res) => {
  // Extract user token from Authorization header
  const userToken = misoClient.getToken(req);
  
  if (!userToken) {
    return res.status(401).json({ error: 'Unauthorized - no token' });
  }
  
  // Validate user token with MISO Controller
  const isValid = await misoClient.auth.validateToken(userToken);
  if (!isValid) {
    return res.status(401).json({ error: 'Unauthorized - invalid token' });
  }
  
  // Get user info if needed
  const userInfo = await misoClient.auth.getUserInfo(userToken);
  
  // Token is valid, proceed with business logic
  res.json({ users: [], currentUser: userInfo });
});

// Option 2: Create middleware for reusable validation
function requireAuth(misoClient: MisoClient) {
  return async (req: express.Request, res: express.Response, next: express.NextFunction) => {
    const userToken = misoClient.getToken(req);
    
    if (!userToken) {
      return res.status(401).json({ error: 'Unauthorized - no token' });
    }
    
    const isValid = await misoClient.auth.validateToken(userToken);
    if (!isValid) {
      return res.status(401).json({ error: 'Unauthorized - invalid token' });
    }
    
    // Attach token to request for use in route handlers
    (req as any).userToken = userToken;
    next();
  };
}

// Use middleware
app.get('/api/protected', requireAuth(misoClient), async (req, res) => {
  const userToken = (req as any).userToken;
  const userInfo = await misoClient.auth.getUserInfo(userToken);
  res.json({ message: 'Protected route', user: userInfo });
});

// IMPORTANT NOTES:
// - Environment token (x-client-token) is for client app authentication
// - User token (Authorization: Bearer) is for user authentication
// - Your routes should validate USER tokens, not environment tokens
// - Environment token is handled automatically by DataClient`},initialization:{zeroConfig:`import { autoInitializeDataClient } from '@aifabrix/miso-client';

// One line - automatically fetches config and initializes DataClient
const dataClient = await autoInitializeDataClient();

// Use DataClient
const users = await dataClient.get('/api/users');`,manual:`import { DataClient } from '@aifabrix/miso-client';

// Manual configuration (browser-safe, no clientSecret)
const dataClient = new DataClient({
  baseUrl: 'https://api.example.com',
  misoConfig: {
    controllerUrl: 'https://controller.aifabrix.ai',
    clientId: 'ctrl-dev-my-app',
    // Use server-provided token pattern
    clientTokenUri: '/api/v1/auth/client-token',
  },
});`,reactContext:`import { DataClientProvider, useDataClient } from './contexts/DataClientContext';

// Wrap your app with DataClientProvider
function App() {
  return (
    <DataClientProvider>
      <YourComponents />
    </DataClientProvider>
  );
}

// Use DataClient in components
function MyComponent() {
  const { dataClient, isLoading, error } = useDataClient();
  
  if (isLoading) return <div>Loading...</div>;
  if (error) return <div>Error: {error.message}</div>;
  if (!dataClient) return <div>Not initialized</div>;
  
  // Use dataClient...
}`},httpMethods:{get:`// GET request with cache
const users = await dataClient.get('/api/users');

// GET request without cache
const freshUsers = await dataClient.get('/api/users', {
  cache: { enabled: false },
});

// GET request with custom options
const user = await dataClient.get('/api/users/1', {
  headers: { 'X-Custom-Header': 'value' },
  timeout: 5000,
});`,post:`// POST request
const newUser = await dataClient.post('/api/users', {
  name: 'John Doe',
  email: 'john@example.com',
});

// POST with error handling
try {
  const result = await dataClient.post('/api/users', userData);
  console.log('User created:', result);
} catch (error) {
  console.error('Failed to create user:', error.message);
}`,put:`// PUT request (full update)
const updatedUser = await dataClient.put('/api/users/1', {
  name: 'John Doe Updated',
  email: 'john.updated@example.com',
});`,patch:`// PATCH request (partial update)
const patchedUser = await dataClient.patch('/api/users/1', {
  email: 'john.newemail@example.com',
});`,delete:`// DELETE request
await dataClient.delete('/api/users/1');

// DELETE with error handling
try {
  await dataClient.delete('/api/users/1');
  console.log('User deleted');
} catch (error) {
  console.error('Failed to delete user:', error.message);
}`},authentication:{isAuthenticated:`// Check if user is authenticated
const isAuth = dataClient.isAuthenticated();
if (isAuth) {
  console.log('User is authenticated');
} else {
  console.log('User is not authenticated');
}`,getToken:`// Get environment token
const token = await dataClient.getEnvironmentToken();
if (token) {
  console.log('Token:', token);
} else {
  console.log('No token available');
}`,getTokenInfo:`// Get client token information
const tokenInfo = dataClient.getClientTokenInfo();
if (tokenInfo) {
  console.log('Token expires at:', tokenInfo.expiresAt);
  console.log('Token issued at:', tokenInfo.issuedAt);
}`,logout:`// Logout user
try {
  await dataClient.logout();
  console.log('User logged out');
} catch (error) {
  console.error('Logout failed:', error.message);
}`,redirectToLogin:`// Redirect to login
try {
  await dataClient.redirectToLogin();
} catch (error) {
  console.error('Redirect failed:', error.message);
}`,handleOAuthCallback:`// OAuth callback handling (automatically called on initialization)
// Token is extracted from URL hash fragment (#token=...) and stored securely
// Hash fragment is immediately removed from URL (< 100ms) for security

// Auto-called on DataClient initialization
const dataClient = new DataClient(config);
// Token is automatically extracted if present in URL hash

// Or manually call if needed
const token = dataClient.handleOAuthCallback();
if (token) {
  console.log('Token extracted and stored');
}

// OAuth Flow:
// 1. User calls redirectToLogin() â†’ redirects to controller login page
// 2. Controller handles OAuth flow with Keycloak
// 3. Controller redirects back: https://myapp.com/dashboard#token=eyJhbGc...
// 4. handleOAuthCallback() extracts token from hash fragment
// 5. Token is validated and stored in localStorage
// 6. Hash fragment is immediately removed from URL (< 100ms)
// 7. User sees clean URL: https://myapp.com/dashboard`,tokenRefresh:`// Token refresh callback (automatic refresh on 401 errors)
// Configure onTokenRefresh callback to handle token renewal securely
const dataClientWithRefresh = new DataClient({
  baseUrl: 'https://api.example.com',
  misoConfig: {
    controllerUrl: 'https://controller.aifabrix.ai',
    clientId: 'ctrl-dev-my-app',
    clientTokenUri: '/api/v1/auth/client-token',
  },
  onTokenRefresh: async () => {
    // Call your backend endpoint that handles refresh token securely
    // Backend should use httpOnly cookies or session storage for refresh token
    const response = await fetch('/api/refresh-token', {
      method: 'POST',
      credentials: 'include', // Include cookies for auth
      headers: {
        'Content-Type': 'application/json',
      },
    });
    
    if (!response.ok) {
      throw new Error('Token refresh failed');
    }
    
    const data = await response.json();
    // Return new access token and expiration time
    return {
      token: data.token, // New access token
      expiresIn: data.expiresIn, // Expiration in seconds
    };
  },
});

// How it works:
// - Automatically called when a request receives 401 Unauthorized
// - Refreshes token using your secure backend endpoint
// - Retries the original request with new token
// - Prevents infinite retry loops with tokenRefreshAttempted flag
// - Refresh tokens are NEVER stored in browser localStorage (security requirement)`},caching:{enabled:`// Cache-enabled GET request
const users = await dataClient.get('/api/users', {
  cache: { enabled: true, ttl: 60000 }, // Cache for 60 seconds
});`,disabled:`// Cache-bypassed GET request
const freshUsers = await dataClient.get('/api/users', {
  cache: { enabled: false },
});`,clearCache:`// Clear all cache
dataClient.clearCache();
console.log('Cache cleared');`},interceptors:{request:`// Set request interceptor
dataClient.setInterceptors({
  onRequest: async (url, options) => {
    // Modify request before sending
    return {
      ...options,
      headers: {
        ...options.headers,
        'X-Custom-Header': 'value',
      },
    };
  },
});`,response:`// Set response interceptor
dataClient.setInterceptors({
  onResponse: async (response) => {
    // Modify response before returning
    console.log('Response received:', response);
    return response;
  },
});`,error:`// Set error interceptor
dataClient.setInterceptors({
  onError: async (error) => {
    // Handle errors
    console.error('Request error:', error);
    throw error; // Re-throw to maintain error flow
  },
});`},roles:{getRoles:`// Get user roles (auto-retrieves token from localStorage)
const roles = await dataClient.getRoles();
console.log('User roles:', roles);`,hasRole:`// Check specific role
const isAdmin = await dataClient.hasRole('admin');
if (isAdmin) {
  console.log('User is admin');
}`,hasAnyRole:`// Check if user has any of the roles
const hasAccess = await dataClient.hasAnyRole(['admin', 'moderator']);
if (hasAccess) {
  console.log('User has access');
}`,hasAllRoles:`// Check if user has all of the roles
const isSuperAdmin = await dataClient.hasAllRoles(['admin', 'super']);
if (isSuperAdmin) {
  console.log('User is super admin');
}`,refreshRoles:`// Force refresh roles (bypass cache)
const refreshedRoles = await dataClient.refreshRoles();
console.log('Refreshed roles:', refreshedRoles);`,clearRolesCache:`// Clear cached roles
await dataClient.clearRolesCache();
console.log('Roles cache cleared');`},permissions:{getPermissions:`// Get user permissions (auto-retrieves token from localStorage)
const permissions = await dataClient.getPermissions();
console.log('User permissions:', permissions);`,hasPermission:`// Check specific permission
const canRead = await dataClient.hasPermission('users:read');
if (canRead) {
  console.log('User can read users');
}`,hasAnyPermission:`// Check if user has any of the permissions
const canAccess = await dataClient.hasAnyPermission(['users:read', 'users:write']);
if (canAccess) {
  console.log('User has access');
}`,hasAllPermissions:`// Check if user has all of the permissions
const canManage = await dataClient.hasAllPermissions(['users:read', 'users:write', 'users:delete']);
if (canManage) {
  console.log('User can manage users');
}`,refreshPermissions:`// Force refresh permissions (bypass cache)
const refreshedPermissions = await dataClient.refreshPermissions();
console.log('Refreshed permissions:', refreshedPermissions);`,clearPermissionsCache:`// Clear cached permissions
await dataClient.clearPermissionsCache();
console.log('Permissions cache cleared');`},errorHandling:{tryCatch:`// Basic error handling
try {
  const users = await dataClient.get('/api/users');
  console.log('Users:', users);
} catch (error) {
  console.error('Request failed:', error.message);
  // Display user-friendly error message
}`,networkError:`// Handle network errors
try {
  const users = await dataClient.get('/api/users');
} catch (error) {
  if (error.message.includes('Network')) {
    console.error('Network error - check your connection');
  } else {
    console.error('Request failed:', error.message);
  }
}`,apiError:`// Handle API errors
try {
  const result = await dataClient.post('/api/users', userData);
} catch (error: any) {
  if (error.status === 400) {
    console.error('Validation error:', error.response?.data);
  } else if (error.status === 401) {
    console.error('Unauthorized - please login');
  } else if (error.status === 403) {
    console.error('Forbidden - insufficient permissions');
  } else {
    console.error('Request failed:', error.message);
  }
}`},metrics:{getMetrics:`// Get request metrics
const metrics = dataClient.getMetrics();
console.log('Total requests:', metrics.totalRequests);
console.log('Failed requests:', metrics.totalFailures);
console.log('Average response time:', metrics.averageResponseTime);
console.log('Cache hit rate:', metrics.cacheHitRate);`}};function RU(){const[e,t]=se.useState(null),n=async(c,i)=>{try{await navigator.clipboard.writeText(c),t(i),Se.success("Code copied to clipboard"),setTimeout(()=>t(null),2e3)}catch{Se.error("Failed to copy code")}},s=({code:c,id:i})=>b.jsx("div",{className:"group",children:b.jsxs("pre",{className:"text-xs bg-muted p-4 rounded-lg overflow-x-auto relative",children:[b.jsx("code",{children:c}),b.jsx(rt,{size:"sm",variant:"ghost",style:{position:"absolute",top:"0.5rem",right:"0.5rem"},className:"z-10 opacity-0 group-hover:opacity-100 transition-opacity bg-background/80 backdrop-blur-sm",onClick:()=>n(c,i),children:e===i?b.jsx(V1,{className:"w-4 h-4 text-green-600"}):b.jsx(FI,{className:"w-4 h-4"})})]})});return b.jsxs("div",{className:"flex flex-col h-full",children:[b.jsx("div",{className:"border-b border-border bg-white",children:b.jsxs("div",{className:"px-8 py-6",children:[b.jsx("h1",{className:"text-2xl",children:"Code Examples"}),b.jsx("p",{className:"text-muted-foreground mt-1",children:"Copyable code examples for using DataClient"})]})}),b.jsx("div",{className:"flex-1 overflow-auto p-8",children:b.jsxs("div",{className:"max-w-6xl",children:[b.jsxs(uh,{defaultValue:"gettingStarted",className:"space-y-6",children:[b.jsxs(dh,{className:"grid w-full grid-cols-8",children:[b.jsx(Jr,{value:"gettingStarted",children:"Getting Started"}),b.jsx(Jr,{value:"initialization",children:"Init"}),b.jsx(Jr,{value:"http",children:"HTTP"}),b.jsx(Jr,{value:"auth",children:"Auth"}),b.jsx(Jr,{value:"caching",children:"Cache"}),b.jsx(Jr,{value:"interceptors",children:"Interceptors"}),b.jsx(Jr,{value:"roles",children:"Roles"}),b.jsx(Jr,{value:"permissions",children:"Permissions"})]}),b.jsxs(Vr,{value:"gettingStarted",className:"space-y-6",children:[b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{children:"Server Setup"}),b.jsx(Ve,{children:"Set up Express.js server with client token endpoint"})]}),b.jsx(Pe,{children:b.jsx(s,{code:tt.gettingStarted.serverSetup,id:"getting-started-server"})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{children:"Environment Variables"}),b.jsx(Ve,{children:"Configure server-side environment variables"})]}),b.jsx(Pe,{children:b.jsx(s,{code:tt.gettingStarted.environmentVariables,id:"getting-started-env"})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{children:"Client Setup"}),b.jsx(Ve,{children:"Initialize DataClient in your browser application"})]}),b.jsx(Pe,{children:b.jsx(s,{code:tt.gettingStarted.clientSetup,id:"getting-started-client"})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{children:"Complete Example"}),b.jsx(Ve,{children:"Full server and client integration example"})]}),b.jsx(Pe,{children:b.jsx(s,{code:tt.gettingStarted.completeExample,id:"getting-started-complete"})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{children:"How It Works"}),b.jsx(Ve,{children:"Understanding the authentication flow and security model"})]}),b.jsx(Pe,{children:b.jsx(s,{code:tt.gettingStarted.howItWorks,id:"getting-started-how-it-works"})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{children:"Validating User Tokens in Routes"}),b.jsx(Ve,{children:"How to protect your API routes with user token validation"})]}),b.jsx(Pe,{children:b.jsx(s,{code:tt.gettingStarted.validateUserTokens,id:"getting-started-validate-tokens"})})]})]}),b.jsxs(Vr,{value:"initialization",className:"space-y-6",children:[b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{children:"Zero-Config Initialization"}),b.jsx(Ve,{children:"Automatically fetch configuration from server"})]}),b.jsx(Pe,{children:b.jsx(s,{code:tt.initialization.zeroConfig,id:"init-zero"})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{children:"Manual Initialization"}),b.jsx(Ve,{children:"Configure DataClient with custom settings"})]}),b.jsx(Pe,{children:b.jsx(s,{code:tt.initialization.manual,id:"init-manual"})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{children:"React Context Setup"}),b.jsx(Ve,{children:"Use DataClient with React Context"})]}),b.jsx(Pe,{children:b.jsx(s,{code:tt.initialization.reactContext,id:"init-context"})})]})]}),b.jsxs(Vr,{value:"http",className:"space-y-6",children:[b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"GET Requests"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.httpMethods.get,id:"http-get"})})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"POST Requests"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.httpMethods.post,id:"http-post"})})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"PUT Requests"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.httpMethods.put,id:"http-put"})})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"PATCH Requests"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.httpMethods.patch,id:"http-patch"})})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"DELETE Requests"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.httpMethods.delete,id:"http-delete"})})]})]}),b.jsxs(Vr,{value:"auth",className:"space-y-6",children:[b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"Check Authentication"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.authentication.isAuthenticated,id:"auth-check"})})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"Get Token"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.authentication.getToken,id:"auth-token"})})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"Get Token Info"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.authentication.getTokenInfo,id:"auth-token-info"})})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"Logout"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.authentication.logout,id:"auth-logout"})})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"Redirect to Login"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.authentication.redirectToLogin,id:"auth-redirect"})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{children:"OAuth Callback Handling"}),b.jsx(Ve,{children:"Automatically extract and store tokens from OAuth redirect (hash fragment)"})]}),b.jsx(Pe,{children:b.jsx(s,{code:tt.authentication.handleOAuthCallback,id:"auth-oauth-callback"})})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{children:"Token Refresh Callback"}),b.jsx(Ve,{children:"Configure automatic token refresh on 401 errors using secure backend endpoint"})]}),b.jsx(Pe,{children:b.jsx(s,{code:tt.authentication.tokenRefresh,id:"auth-token-refresh"})})]})]}),b.jsxs(Vr,{value:"caching",className:"space-y-6",children:[b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"Cache-Enabled Requests"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.caching.enabled,id:"cache-enabled"})})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"Cache-Bypassed Requests"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.caching.disabled,id:"cache-disabled"})})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"Clear Cache"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.caching.clearCache,id:"cache-clear"})})]})]}),b.jsxs(Vr,{value:"interceptors",className:"space-y-6",children:[b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"Request Interceptor"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.interceptors.request,id:"interceptor-request"})})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"Response Interceptor"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.interceptors.response,id:"interceptor-response"})})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"Error Interceptor"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.interceptors.error,id:"interceptor-error"})})]})]}),b.jsxs(Vr,{value:"roles",className:"space-y-6",children:[b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"Get Roles"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.roles.getRoles,id:"roles-get"})})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"Check Role"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.roles.hasRole,id:"roles-has"})})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"Check Any Role"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.roles.hasAnyRole,id:"roles-any"})})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"Check All Roles"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.roles.hasAllRoles,id:"roles-all"})})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"Refresh Roles"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.roles.refreshRoles,id:"roles-refresh"})})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"Clear Roles Cache"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.roles.clearRolesCache,id:"roles-clear"})})]})]}),b.jsxs(Vr,{value:"permissions",className:"space-y-6",children:[b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"Get Permissions"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.permissions.getPermissions,id:"perms-get"})})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"Check Permission"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.permissions.hasPermission,id:"perms-has"})})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"Check Any Permission"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.permissions.hasAnyPermission,id:"perms-any"})})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"Check All Permissions"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.permissions.hasAllPermissions,id:"perms-all"})})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"Refresh Permissions"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.permissions.refreshPermissions,id:"perms-refresh"})})]}),b.jsxs(Ie,{children:[b.jsx(Ne,{children:b.jsx(Le,{children:"Clear Permissions Cache"})}),b.jsx(Pe,{children:b.jsx(s,{code:tt.permissions.clearPermissionsCache,id:"perms-clear"})})]})]})]}),b.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-6",children:[b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{children:"Error Handling"}),b.jsx(Ve,{children:"Patterns for handling errors"})]}),b.jsxs(Pe,{className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("h4",{className:"text-sm font-medium mb-2",children:"Basic Try-Catch"}),b.jsx(s,{code:tt.errorHandling.tryCatch,id:"error-basic"})]}),b.jsxs("div",{children:[b.jsx("h4",{className:"text-sm font-medium mb-2",children:"Network Errors"}),b.jsx(s,{code:tt.errorHandling.networkError,id:"error-network"})]}),b.jsxs("div",{children:[b.jsx("h4",{className:"text-sm font-medium mb-2",children:"API Errors"}),b.jsx(s,{code:tt.errorHandling.apiError,id:"error-api"})]})]})]}),b.jsxs(Ie,{children:[b.jsxs(Ne,{children:[b.jsx(Le,{children:"Metrics"}),b.jsx(Ve,{children:"Get request metrics"})]}),b.jsx(Pe,{children:b.jsx(s,{code:tt.metrics.getMetrics,id:"metrics-get"})})]})]})]})})]})}var kU=(e,t,n,s,c,i,o,l)=>{let f=document.documentElement,p=["light","dark"];function h(g){(Array.isArray(e)?e:[e]).forEach(v=>{let S=v==="class",w=S&&i?c.map(C=>i[C]||C):c;S?(f.classList.remove(...w),f.classList.add(i&&i[g]?i[g]:g)):f.setAttribute(v,g)}),u(g)}function u(g){l&&p.includes(g)&&(f.style.colorScheme=g)}function m(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(s)h(s);else try{let g=localStorage.getItem(t)||n,v=o&&g==="system"?m():g;h(v)}catch{}},z1=["light","dark"],cA="(prefers-color-scheme: dark)",AU=typeof window>"u",Cw=se.createContext(void 0),IU={setTheme:e=>{},themes:[]},PU=()=>{var e;return(e=se.useContext(Cw))!=null?e:IU},OU=e=>se.useContext(Cw)?se.createElement(se.Fragment,null,e.children):se.createElement(LU,{...e}),NU=["light","dark"],LU=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:n=!0,enableColorScheme:s=!0,storageKey:c="theme",themes:i=NU,defaultTheme:o=n?"system":"light",attribute:l="data-theme",value:f,children:p,nonce:h,scriptProps:u})=>{let[m,g]=se.useState(()=>DU(c,o)),[v,S]=se.useState(()=>m==="system"?Hy():m),w=f?Object.values(f):i,C=se.useCallback(D=>{let A=D;if(!A)return;D==="system"&&n&&(A=Hy());let O=f?f[A]:A,x=t?$U(h):null,M=document.documentElement,G=V=>{V==="class"?(M.classList.remove(...w),O&&M.classList.add(O)):V.startsWith("data-")&&(O?M.setAttribute(V,O):M.removeAttribute(V))};if(Array.isArray(l)?l.forEach(G):G(l),s){let V=z1.includes(o)?o:null,z=z1.includes(A)?A:V;M.style.colorScheme=z}x?.()},[h]),N=se.useCallback(D=>{let A=typeof D=="function"?D(m):D;g(A);try{localStorage.setItem(c,A)}catch{}},[m]),I=se.useCallback(D=>{let A=Hy(D);S(A),m==="system"&&n&&!e&&C("system")},[m,e]);se.useEffect(()=>{let D=window.matchMedia(cA);return D.addListener(I),I(D),()=>D.removeListener(I)},[I]),se.useEffect(()=>{let D=A=>{A.key===c&&(A.newValue?g(A.newValue):N(o))};return window.addEventListener("storage",D),()=>window.removeEventListener("storage",D)},[N]),se.useEffect(()=>{C(e??m)},[e,m]);let R=se.useMemo(()=>({theme:m,setTheme:N,forcedTheme:e,resolvedTheme:m==="system"?v:m,themes:n?[...i,"system"]:i,systemTheme:n?v:void 0}),[m,N,e,v,n,i]);return se.createElement(Cw.Provider,{value:R},se.createElement(jU,{forcedTheme:e,storageKey:c,attribute:l,enableSystem:n,enableColorScheme:s,defaultTheme:o,value:f,themes:i,nonce:h,scriptProps:u}),p)},jU=se.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:s,enableColorScheme:c,defaultTheme:i,value:o,themes:l,nonce:f,scriptProps:p})=>{let h=JSON.stringify([n,t,i,e,l,o,s,c]).slice(1,-1);return se.createElement("script",{...p,suppressHydrationWarning:!0,nonce:typeof window>"u"?f:"",dangerouslySetInnerHTML:{__html:`(${kU.toString()})(${h})`}})}),DU=(e,t)=>{if(AU)return;let n;try{n=localStorage.getItem(e)||void 0}catch{}return n||t},$U=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},Hy=e=>(e||(e=window.matchMedia(cA)),e.matches?"dark":"light");const UU=({...e})=>{const{theme:t="system"}=PU();return b.jsx(OO,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})},Xd={p18cc100:"M34.4572 24.1629C34.1171 23.2828 33.8371 22.5727 33.6171 22.0526C33.407 21.5126 33.137 21.0225 32.8169 20.5624C32.5069 20.1023 32.0868 19.7323 31.5668 19.4423C31.0567 19.1422 30.4166 18.9922 29.6465 18.9922C28.8764 18.9922 28.2463 19.1422 27.7262 19.4423C27.2161 19.7323 26.7961 20.1124 26.476 20.5824C26.166 21.0525 25.8659 21.6526 25.5759 22.3727C25.3059 23.0828 25.0658 23.6929 24.8658 24.2029L17.8648 41.9855C17.5748 42.6956 17.3747 43.2457 17.2447 43.6457C17.1247 44.0458 17.0547 44.4258 17.0547 44.8059C17.0547 45.456 17.3247 46.0361 17.8548 46.5461C18.3849 47.0562 19.005 47.3162 19.7051 47.3162C20.5252 47.3162 21.1153 47.0762 21.4753 46.6061C21.8354 46.1161 22.2754 45.1959 22.7855 43.8257L24.0957 40.3152H35.2273L36.5375 43.7557C36.7075 44.1758 36.9175 44.6759 37.1576 45.2359C37.4076 45.786 37.6376 46.1961 37.8477 46.4661C38.0577 46.7262 38.3177 46.9362 38.6278 47.0862C38.9378 47.2462 39.3079 47.3262 39.7479 47.3262C40.498 47.3262 41.1281 47.0662 41.6482 46.5461C42.1883 46.0061 42.4483 45.426 42.4483 44.7859C42.4483 44.1458 42.1683 43.1956 41.6082 41.8555L34.4572 24.1829V24.1629ZM25.5459 36.1346L29.5965 24.833L33.7271 36.1346H25.5459Z",p2888f670:"M66.9996 29.5342C65.3393 29.5342 63.9992 30.8744 63.9992 32.5346V46.8167C63.9992 51.4073 62.2089 55.728 58.9684 58.9684C55.728 62.2189 51.4074 63.9991 46.8167 63.9991H23.1833C18.5927 63.9991 14.272 62.2089 11.0316 58.9684C7.78111 55.718 6.00086 51.4073 6.00086 46.8167V23.1833C6.00086 18.5927 7.79111 14.272 11.0316 11.0316C14.272 7.79112 18.5927 6.00086 23.1833 6.00086H46.8167C48.4769 6.00086 49.8171 4.66067 49.8171 3.00043C49.8171 1.34019 48.4769 0 46.8167 0H23.1833C16.9924 0 11.1716 2.41035 6.79097 6.79097C2.41034 11.1716 0 16.9924 0 23.1833V46.8167C0 53.0076 2.41034 58.8284 6.79097 63.209C11.1716 67.5897 16.9924 70 23.1833 70H46.8167C53.0076 70 58.8384 67.5897 63.209 63.209C67.5897 58.8284 70 53.0076 70 46.8167V32.5346C70 30.8744 68.6598 29.5342 66.9996 29.5342Z",p3d0c8dc0:"M63.3766 24.1126C69.5907 24.1126 74.6282 19.0751 74.6282 12.861C74.6282 6.64689 69.5907 1.60938 63.3766 1.60938C57.1625 1.60938 52.125 6.64689 52.125 12.861C52.125 19.0751 57.1625 24.1126 63.3766 24.1126Z",p5723880:"M48.7157 26.5742C47.9656 26.5742 47.3555 26.8343 46.8854 27.3443C46.4253 27.8544 46.1953 28.6145 46.1953 29.6247V44.2167C46.1953 45.2169 46.4253 45.977 46.8854 46.5171C47.3555 47.0571 47.9656 47.3172 48.7157 47.3172C49.4658 47.3172 50.0759 47.0571 50.5659 46.5371C51.056 46.017 51.296 45.2369 51.296 44.2167V29.4746C51.296 28.5645 51.056 27.8544 50.5659 27.3443C50.0759 26.8343 49.4658 26.5742 48.7157 26.5742Z"},qU="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%2075%2070%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22clip0_5723_7999%22%3E%0A%3Cpath%20id%3D%22Vector%22%20d%3D%22M75%200H0V70H75V0Z%22%20fill%3D%22var(--fill-0%2C%20black)%22%2F%3E%0A%3C%2Fg%3E%0A%3C%2Fsvg%3E%0A";function MU(){return b.jsx("div",{className:"relative size-full","data-name":"favicon 1",children:b.jsx("div",{className:"absolute contents inset-0","data-name":"Clip path group",children:b.jsx("div",{className:"absolute inset-[0_0.5%_0_0] mask-alpha mask-intersect mask-no-clip mask-no-repeat mask-position-[0px] mask-size-[75px_70px]","data-name":"Group",style:{maskImage:`url('${qU}')`},children:b.jsx("svg",{className:"block size-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 75 70",children:b.jsxs("g",{id:"Group",children:[b.jsx("path",{d:Xd.p5723880,fill:"var(--fill-0, #111827)",id:"Vector"}),b.jsx("path",{d:Xd.p18cc100,fill:"var(--fill-0, #111827)",id:"Vector_2"}),b.jsx("path",{d:Xd.p2888f670,fill:"var(--fill-0, #0062FF)",id:"Vector_3"}),b.jsx("path",{d:Xd.p3d0c8dc0,fill:"var(--fill-0, #0062FF)",id:"Vector_4"})]})})})})})}function HU(){const[e,t]=se.useState("configuration"),n=()=>{switch(e){case"configuration":return b.jsx(K1,{});case"api-testing":return b.jsx(yU,{});case"caching":return b.jsx(bU,{});case"monitoring":return b.jsx(TU,{});case"authorization":return b.jsx(xU,{});case"code-examples":return b.jsx(RU,{});default:return b.jsx(K1,{})}};return b.jsxs("div",{className:"flex h-screen bg-background",children:[b.jsx(WU,{activeSection:e,onSectionChange:t}),b.jsx("main",{className:"flex-1 overflow-auto",children:n()}),b.jsx(UU,{position:"top-right"})]})}function FU(){const{dataClient:e,isLoading:t}=yc(),[n,s]=se.useState(!1),[c,i]=se.useState(!1);se.useEffect(()=>{if(!e)return;const f=()=>{e.handleOAuthCallback()?(s(!0),Se.success("Authentication successful",{description:"You have been successfully authenticated",duration:3e3})):s(e.isAuthenticated())};f();const p=()=>{f()};window.addEventListener("hashchange",p);const h=()=>{setTimeout(f,100)};return window.addEventListener("focus",h),()=>{window.removeEventListener("hashchange",p),window.removeEventListener("focus",h)}},[e]);const o=async()=>{if(!e){Se.error("DataClient not initialized",{description:"Please initialize DataClient first on the Configuration page",duration:5e3});return}i(!0);try{await e.redirectToLogin(),i(!1)}catch(f){const p=f instanceof Error?f.message:"Unknown error";Se.error("Login failed",{description:p,duration:1e4}),i(!1)}},l=async()=>{if(!e){Se.error("DataClient not initialized");return}i(!0);try{await e.logout(),s(!1),Se.success("Logged out successfully")}catch(f){const p=f instanceof Error?f.message:"Unknown error";Se.error("Logout failed",{description:p})}finally{i(!1)}};return t?b.jsx("div",{className:"p-4 border-t border-sidebar-border",children:b.jsx("div",{className:"text-xs text-muted-foreground",children:"Loading..."})}):b.jsxs("div",{className:"p-4 border-t border-sidebar-border space-y-3",children:[b.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[b.jsx(sP,{className:"w-3 h-3"}),b.jsx("span",{className:n?"text-green-600":"text-muted-foreground",children:n?"Authenticated":"Not authenticated"})]}),n?b.jsxs(rt,{variant:"outline",size:"sm",className:"w-full",onClick:l,disabled:c||!e,children:[b.jsx(JI,{className:"w-3 h-3 mr-2"}),c?"Logging out...":"Logout"]}):b.jsxs(rt,{variant:"default",size:"sm",className:"w-full",onClick:o,disabled:c||!e,children:[b.jsx(zI,{className:"w-3 h-3 mr-2"}),c?"Redirecting...":"Login"]})]})}function WU({activeSection:e,onSectionChange:t}){const n=[{id:"configuration",label:"Configuration",icon:ZI},{id:"api-testing",label:"API Testing",icon:XI},{id:"caching",label:"Caching & Storage",icon:Fy},{id:"monitoring",label:"Monitoring & Logs",icon:jI},{id:"authorization",label:"Authorization",icon:Wy},{id:"code-examples",label:"Code Examples",icon:MI}];return b.jsxs("div",{className:"w-64 bg-sidebar border-r border-sidebar-border flex flex-col",children:[b.jsx("div",{className:"p-6 border-b border-sidebar-border",children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"w-10 h-10",children:b.jsx(MU,{})}),b.jsxs("div",{children:[b.jsx("h1",{className:"text-sidebar-foreground font-medium",children:"AI Fabrix"}),b.jsx("p",{className:"text-sm text-muted-foreground",children:"MISO Data Client"})]})]})}),b.jsx("nav",{className:"flex-1 p-4",role:"navigation","aria-label":"Main navigation",children:b.jsx("ul",{className:"space-y-1",children:n.map(s=>{const c=e===s.id,i=s.icon;return b.jsx("li",{children:b.jsxs("button",{onClick:()=>t(s.id),className:`
                    w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors
                    ${c?"bg-sidebar-accent text-sidebar-accent-foreground font-medium":"text-sidebar-foreground hover:bg-sidebar-accent/50"}
                  `,children:[b.jsx(i,{className:"w-4 h-4"}),b.jsx("span",{children:s.label})]})},s.id)})})}),b.jsx(FU,{}),b.jsx("div",{className:"p-4 border-t border-sidebar-border",children:b.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{children:"Version"}),b.jsx("span",{className:"font-medium",children:"1.0.0"})]}),b.jsxs("div",{className:"flex justify-between",children:[b.jsx("span",{children:"Environment"}),b.jsx("span",{className:"font-medium text-green-600",children:"Development"})]})]})})]})}_I.createRoot(document.getElementById("root")).render(b.jsx(OU,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:b.jsx(I$,{children:b.jsx(HU,{})})}))});export default KU();
//# sourceMappingURL=index-CDXMn-sZ.js.map

var __=(t,s)=>()=>(s||t((s={exports:{}}).exports,s),s.exports);var xj=__((nt,Be)=>{function R_(t,s){for(var n=0;n<s.length;n++){const i=s[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();var qo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ml(t){return t&&Object.prototype.hasOwnProperty.call(t,"default")&&Object.keys(t).length===1?t.default:t}var eh={exports:{}},Ua={},th={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TE;function k_(){if(TE)return rt;TE=1;var t=Symbol.for("react.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function y(H){return H===null||typeof H!="object"?null:(H=p&&H[p]||H["@@iterator"],typeof H=="function"?H:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,b={};function x(H,X,ne){this.props=H,this.context=X,this.refs=b,this.updater=ne||S}x.prototype.isReactComponent={},x.prototype.setState=function(H,X){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,X,"setState")},x.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function v(){}v.prototype=x.prototype;function C(H,X,ne){this.props=H,this.context=X,this.refs=b,this.updater=ne||S}var _=C.prototype=new v;_.constructor=C,E(_,x.prototype),_.isPureReactComponent=!0;var R=Array.isArray,D=Object.prototype.hasOwnProperty,A={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function k(H,X,ne){var fe,he={},Ae=null,Ne=null;if(X!=null)for(fe in X.ref!==void 0&&(Ne=X.ref),X.key!==void 0&&(Ae=""+X.key),X)D.call(X,fe)&&!j.hasOwnProperty(fe)&&(he[fe]=X[fe]);var ue=arguments.length-2;if(ue===1)he.children=ne;else if(1<ue){for(var ve=Array(ue),He=0;He<ue;He++)ve[He]=arguments[He+2];he.children=ve}if(H&&H.defaultProps)for(fe in ue=H.defaultProps,ue)he[fe]===void 0&&(he[fe]=ue[fe]);return{$$typeof:t,type:H,key:Ae,ref:Ne,props:he,_owner:A.current}}function K(H,X){return{$$typeof:t,type:H.type,key:X,ref:H.ref,props:H.props,_owner:H._owner}}function Z(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function ie(H){var X={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ne){return X[ne]})}var ce=/\/+/g;function V(H,X){return typeof H=="object"&&H!==null&&H.key!=null?ie(""+H.key):X.toString(36)}function F(H,X,ne,fe,he){var Ae=typeof H;(Ae==="undefined"||Ae==="boolean")&&(H=null);var Ne=!1;if(H===null)Ne=!0;else switch(Ae){case"string":case"number":Ne=!0;break;case"object":switch(H.$$typeof){case t:case s:Ne=!0}}if(Ne)return Ne=H,he=he(Ne),H=fe===""?"."+V(Ne,0):fe,R(he)?(ne="",H!=null&&(ne=H.replace(ce,"$&/")+"/"),F(he,X,ne,"",function(He){return He})):he!=null&&(Z(he)&&(he=K(he,ne+(!he.key||Ne&&Ne.key===he.key?"":(""+he.key).replace(ce,"$&/")+"/")+H)),X.push(he)),1;if(Ne=0,fe=fe===""?".":fe+":",R(H))for(var ue=0;ue<H.length;ue++){Ae=H[ue];var ve=fe+V(Ae,ue);Ne+=F(Ae,X,ne,ve,he)}else if(ve=y(H),typeof ve=="function")for(H=ve.call(H),ue=0;!(Ae=H.next()).done;)Ae=Ae.value,ve=fe+V(Ae,ue++),Ne+=F(Ae,X,ne,ve,he);else if(Ae==="object")throw X=String(H),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return Ne}function O(H,X,ne){if(H==null)return H;var fe=[],he=0;return F(H,fe,"","",function(Ae){return X.call(ne,Ae,he++)}),fe}function q(H){if(H._status===-1){var X=H._result;X=X(),X.then(function(ne){(H._status===0||H._status===-1)&&(H._status=1,H._result=ne)},function(ne){(H._status===0||H._status===-1)&&(H._status=2,H._result=ne)}),H._status===-1&&(H._status=0,H._result=X)}if(H._status===1)return H._result.default;throw H._result}var W={current:null},L={transition:null},Y={ReactCurrentDispatcher:W,ReactCurrentBatchConfig:L,ReactCurrentOwner:A};function ee(){throw Error("act(...) is not supported in production builds of React.")}return rt.Children={map:O,forEach:function(H,X,ne){O(H,function(){X.apply(this,arguments)},ne)},count:function(H){var X=0;return O(H,function(){X++}),X},toArray:function(H){return O(H,function(X){return X})||[]},only:function(H){if(!Z(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},rt.Component=x,rt.Fragment=n,rt.Profiler=a,rt.PureComponent=C,rt.StrictMode=i,rt.Suspense=d,rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,rt.act=ee,rt.cloneElement=function(H,X,ne){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var fe=E({},H.props),he=H.key,Ae=H.ref,Ne=H._owner;if(X!=null){if(X.ref!==void 0&&(Ae=X.ref,Ne=A.current),X.key!==void 0&&(he=""+X.key),H.type&&H.type.defaultProps)var ue=H.type.defaultProps;for(ve in X)D.call(X,ve)&&!j.hasOwnProperty(ve)&&(fe[ve]=X[ve]===void 0&&ue!==void 0?ue[ve]:X[ve])}var ve=arguments.length-2;if(ve===1)fe.children=ne;else if(1<ve){ue=Array(ve);for(var He=0;He<ve;He++)ue[He]=arguments[He+2];fe.children=ue}return{$$typeof:t,type:H.type,key:he,ref:Ae,props:fe,_owner:Ne}},rt.createContext=function(H){return H={$$typeof:o,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:l,_context:H},H.Consumer=H},rt.createElement=k,rt.createFactory=function(H){var X=k.bind(null,H);return X.type=H,X},rt.createRef=function(){return{current:null}},rt.forwardRef=function(H){return{$$typeof:u,render:H}},rt.isValidElement=Z,rt.lazy=function(H){return{$$typeof:f,_payload:{_status:-1,_result:H},_init:q}},rt.memo=function(H,X){return{$$typeof:h,type:H,compare:X===void 0?null:X}},rt.startTransition=function(H){var X=L.transition;L.transition={};try{H()}finally{L.transition=X}},rt.unstable_act=ee,rt.useCallback=function(H,X){return W.current.useCallback(H,X)},rt.useContext=function(H){return W.current.useContext(H)},rt.useDebugValue=function(){},rt.useDeferredValue=function(H){return W.current.useDeferredValue(H)},rt.useEffect=function(H,X){return W.current.useEffect(H,X)},rt.useId=function(){return W.current.useId()},rt.useImperativeHandle=function(H,X,ne){return W.current.useImperativeHandle(H,X,ne)},rt.useInsertionEffect=function(H,X){return W.current.useInsertionEffect(H,X)},rt.useLayoutEffect=function(H,X){return W.current.useLayoutEffect(H,X)},rt.useMemo=function(H,X){return W.current.useMemo(H,X)},rt.useReducer=function(H,X,ne){return W.current.useReducer(H,X,ne)},rt.useRef=function(H){return W.current.useRef(H)},rt.useState=function(H){return W.current.useState(H)},rt.useSyncExternalStore=function(H,X,ne){return W.current.useSyncExternalStore(H,X,ne)},rt.useTransition=function(){return W.current.useTransition()},rt.version="18.3.1",rt}var _E;function Eg(){return _E||(_E=1,th.exports=k_()),th.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RE;function I_(){if(RE)return Ua;RE=1;var t=Eg(),s=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function o(u,d,h){var f,p={},y=null,S=null;h!==void 0&&(y=""+h),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(S=d.ref);for(f in d)i.call(d,f)&&!l.hasOwnProperty(f)&&(p[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)p[f]===void 0&&(p[f]=d[f]);return{$$typeof:s,type:u,key:y,ref:S,props:p,_owner:a.current}}return Ua.Fragment=n,Ua.jsx=o,Ua.jsxs=o,Ua}var kE;function A_(){return kE||(kE=1,eh.exports=I_()),eh.exports}var g=A_(),IE={},AE;function N_(){if(AE)return IE;if(AE=1,typeof process>"u"){const t={env:{},version:"v18.0.0",versions:{node:"18.0.0",v8:"10.0.0",uv:"1.0.0",zlib:"1.0.0",ares:"1.0.0",modules:"108",nghttp2:"1.0.0",napi:"8",llhttp:"6.0.0",openssl:"3.0.0",cldr:"41.0",icu:"71.1",tz:"2022a",unicode:"14.0",ngtcp2:"0.8.1",nghttp3:"0.7.0"},platform:"browser",arch:"x64",pid:1,nextTick:function(s){setTimeout(s,0)},cwd:function(){return"/"},exit:function(s){console.warn("process.exit called with code:",s)},on:function(){},off:function(){},emit:function(){},browser:!0,type:"browser"};typeof window<"u"&&(window.process=t),typeof qo<"u"&&(qo.process=t),typeof globalThis<"u"&&(globalThis.process=t)}if(typeof Buffer>"u"){class t{static from(n,i){const a=new t;return a._data=n,a._encoding=i,a}static alloc(n,i,a){const l=new t;return l._size=n,l._fill=i,l._encoding=a,l}static allocUnsafe(n){return t.alloc(n)}static isBuffer(n){return n instanceof t}toString(n){if(this._data!==void 0){if(typeof this._data=="string")return this._data;if(this._data&&typeof this._data.toString=="function")return this._data.toString()}return""}toJSON(){return{type:"Buffer",data:[]}}length=0}typeof window<"u"&&(window.Buffer=t),typeof qo<"u"&&(qo.Buffer=t),typeof globalThis<"u"&&(globalThis.Buffer=t)}return typeof qo>"u"&&(typeof window<"u"?window.global=window:typeof globalThis<"u"&&(globalThis.global=globalThis)),console.log("âœ… Node.js globals polyfill loaded"),IE}N_();class tn{static from(s,n){const i=new tn;return i._data=s,i}static alloc(s,n,i){const a=new tn;return a._size=s,a._fill=n,a}static allocUnsafe(s){return tn.alloc(s)}static isBuffer(s){return s instanceof tn}_data;_encoding;_size;_fill;toString(s){if(this._data!==void 0){if(typeof this._data=="string")return this._data;if(this._data&&typeof this._data.toString=="function")return this._data.toString()}return""}toJSON(){return{type:"Buffer",data:[]}}length=0}const P_=tn,Ho={Buffer:tn};typeof Be<"u"&&typeof Be.exports<"u"&&(Be.exports=Ho,Be.exports.Buffer=tn,Be.exports.default=Ho,Be.exports.buffer=Ho);typeof nt<"u"&&(nt.default=Ho,nt.buffer=Ho,nt.Buffer=tn);typeof window<"u"&&(window.Buffer=tn);typeof globalThis<"u"&&(globalThis.Buffer=tn);typeof global<"u"&&(global.Buffer=tn);const O_=Object.freeze(Object.defineProperty({__proto__:null,Buffer:P_,default:Ho},Symbol.toStringTag,{value:"Module"}));function wg(t,s){if(!s)return;let n=s.prototype;if(!n)try{Object.isExtensible&&Object.isExtensible(s)?(s.prototype={},n=s.prototype):n=Object.prototype}catch{n=Object.prototype}(typeof n!="object"||n===null)&&(n=Object.prototype),t.super_=s;try{t.prototype=Object.create(n,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}catch{try{if(t.prototype=Object.create(Object.prototype),t.prototype.constructor=t,n&&typeof n=="object"&&n!==Object.prototype){for(const a in n)if(n.hasOwnProperty(a))try{t.prototype[a]=n[a]}catch{}}}catch{t.prototype||(t.prototype={}),t.prototype.constructor||(t.prototype.constructor=t)}}}const gs={inherits:wg,inspect:t=>{try{return JSON.stringify(t,null,2)}catch{return String(t)}},promisify:t=>function(...s){return new Promise((n,i)=>{t(...s,(a,l)=>{a?i(a):n(l)})})}};if(typeof Be<"u"&&typeof Be.exports<"u"){const t={...gs,inherits:wg,default:gs,util:gs,inspect:gs.inspect,promisify:gs.promisify};Be.exports=t}typeof nt<"u"&&(nt.default=gs,nt.util=gs,nt.inherits=wg,nt.inspect=gs.inspect,nt.promisify=gs.promisify);const Ll={env:{},version:"v18.0.0",versions:{node:"18.0.0",v8:"10.0.0",uv:"1.0.0",zlib:"1.0.0",ares:"1.0.0",modules:"108",nghttp2:"1.0.0",napi:"8",llhttp:"6.0.0",openssl:"3.0.0",cldr:"41.0",icu:"71.1",tz:"2022a",unicode:"14.0",ngtcp2:"0.8.1",nghttp3:"0.7.0"},platform:"browser",arch:"x64",pid:1,nextTick:function(t){setTimeout(t,0)},cwd:function(){return"/"},exit:function(t){console.warn("process.exit called with code:",t)},on:function(){},off:function(){},emit:function(){},browser:!0,type:"browser"};typeof window<"u"&&(window.process=Ll);typeof global<"u"&&(global.process=Ll);typeof globalThis<"u"&&(globalThis.process=Ll);typeof Be<"u"&&typeof Be.exports<"u"&&(Be.exports=Ll,Be.exports.default=Ll);let Sg=class{_events=new Map;on(s,n){return this._events.has(s)||this._events.set(s,[]),this._events.get(s).push(n),this}once(s,n){const i=(...a)=>{this.removeListener(s,i),n(...a)};return Promise.resolve(this.on(s,i))}emit(s,...n){const i=this._events.get(s);return i&&i.length>0?(i.forEach(a=>{try{a(...n)}catch(l){console.error("EventEmitter error:",l)}}),!0):!1}removeListener(s,n){const i=this._events.get(s);if(i){const a=i.indexOf(n);a>-1&&i.splice(a,1)}return this}removeAllListeners(s){return s?this._events.delete(s):this._events.clear(),this}off(s,n){return this.removeListener(s,n)}addListener(s,n){return this.on(s,n)}};const Pl={EventEmitter:Sg};typeof Be<"u"&&typeof Be.exports<"u"&&(Be.exports=Pl,Be.exports.default=Pl,Be.exports.EventEmitter=Sg,Be.exports.events=Pl);typeof nt<"u"&&(nt.default=Pl,nt.events=Pl,nt.EventEmitter=Sg);var lu={},rh={exports:{}},Ar={},nh={exports:{}},sh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NE;function j_(){return NE||(NE=1,(function(t){function s(L,Y){var ee=L.length;L.push(Y);e:for(;0<ee;){var H=ee-1>>>1,X=L[H];if(0<a(X,Y))L[H]=Y,L[ee]=X,ee=H;else break e}}function n(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var Y=L[0],ee=L.pop();if(ee!==Y){L[0]=ee;e:for(var H=0,X=L.length,ne=X>>>1;H<ne;){var fe=2*(H+1)-1,he=L[fe],Ae=fe+1,Ne=L[Ae];if(0>a(he,ee))Ae<X&&0>a(Ne,he)?(L[H]=Ne,L[Ae]=ee,H=Ae):(L[H]=he,L[fe]=ee,H=fe);else if(Ae<X&&0>a(Ne,ee))L[H]=Ne,L[Ae]=ee,H=Ae;else break e}}return Y}function a(L,Y){var ee=L.sortIndex-Y.sortIndex;return ee!==0?ee:L.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var d=[],h=[],f=1,p=null,y=3,S=!1,E=!1,b=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(L){for(var Y=n(h);Y!==null;){if(Y.callback===null)i(h);else if(Y.startTime<=L)i(h),Y.sortIndex=Y.expirationTime,s(d,Y);else break;Y=n(h)}}function R(L){if(b=!1,_(L),!E)if(n(d)!==null)E=!0,q(D);else{var Y=n(h);Y!==null&&W(R,Y.startTime-L)}}function D(L,Y){E=!1,b&&(b=!1,v(k),k=-1),S=!0;var ee=y;try{for(_(Y),p=n(d);p!==null&&(!(p.expirationTime>Y)||L&&!ie());){var H=p.callback;if(typeof H=="function"){p.callback=null,y=p.priorityLevel;var X=H(p.expirationTime<=Y);Y=t.unstable_now(),typeof X=="function"?p.callback=X:p===n(d)&&i(d),_(Y)}else i(d);p=n(d)}if(p!==null)var ne=!0;else{var fe=n(h);fe!==null&&W(R,fe.startTime-Y),ne=!1}return ne}finally{p=null,y=ee,S=!1}}var A=!1,j=null,k=-1,K=5,Z=-1;function ie(){return!(t.unstable_now()-Z<K)}function ce(){if(j!==null){var L=t.unstable_now();Z=L;var Y=!0;try{Y=j(!0,L)}finally{Y?V():(A=!1,j=null)}}else A=!1}var V;if(typeof C=="function")V=function(){C(ce)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,O=F.port2;F.port1.onmessage=ce,V=function(){O.postMessage(null)}}else V=function(){x(ce,0)};function q(L){j=L,A||(A=!0,V())}function W(L,Y){k=x(function(){L(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){E||S||(E=!0,q(D))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(L){switch(y){case 1:case 2:case 3:var Y=3;break;default:Y=y}var ee=y;y=Y;try{return L()}finally{y=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,Y){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var ee=y;y=L;try{return Y()}finally{y=ee}},t.unstable_scheduleCallback=function(L,Y,ee){var H=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?H+ee:H):ee=H,L){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=ee+X,L={id:f++,callback:Y,priorityLevel:L,startTime:ee,expirationTime:X,sortIndex:-1},ee>H?(L.sortIndex=ee,s(h,L),n(d)===null&&L===n(h)&&(b?(v(k),k=-1):b=!0,W(R,ee-H))):(L.sortIndex=X,s(d,L),E||S||(E=!0,q(D))),L},t.unstable_shouldYield=ie,t.unstable_wrapCallback=function(L){var Y=y;return function(){var ee=y;y=Y;try{return L.apply(this,arguments)}finally{y=ee}}}})(sh)),sh}var PE;function L_(){return PE||(PE=1,nh.exports=j_()),nh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OE;function D_(){if(OE)return Ar;OE=1;var t=Eg(),s=L_();function n(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,c=1;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,a={};function l(e,r){o(e,r),o(e+"Capture",r)}function o(e,r){for(a[e]=r,e=0;e<r.length;e++)i.add(r[e])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function y(e){return d.call(p,e)?!0:d.call(f,e)?!1:h.test(e)?p[e]=!0:(f[e]=!0,!1)}function S(e,r,c,m){if(c!==null&&c.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return m?!1:c!==null?!c.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function E(e,r,c,m){if(r===null||typeof r>"u"||S(e,r,c,m))return!0;if(m)return!1;if(c!==null)switch(c.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function b(e,r,c,m,w,T,P){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=m,this.attributeNamespace=w,this.mustUseProperty=c,this.propertyName=e,this.type=r,this.sanitizeURL=T,this.removeEmptyString=P}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){x[e]=new b(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];x[r]=new b(r,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){x[e]=new b(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){x[e]=new b(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){x[e]=new b(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){x[e]=new b(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){x[e]=new b(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){x[e]=new b(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){x[e]=new b(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function C(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(v,C);x[r]=new b(r,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(v,C);x[r]=new b(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(v,C);x[r]=new b(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){x[e]=new b(e,1,!1,e.toLowerCase(),null,!1,!1)}),x.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){x[e]=new b(e,1,!1,e.toLowerCase(),null,!0,!0)});function _(e,r,c,m){var w=x.hasOwnProperty(r)?x[r]:null;(w!==null?w.type!==0:m||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(E(r,c,w,m)&&(c=null),m||w===null?y(r)&&(c===null?e.removeAttribute(r):e.setAttribute(r,""+c)):w.mustUseProperty?e[w.propertyName]=c===null?w.type===3?!1:"":c:(r=w.attributeName,m=w.attributeNamespace,c===null?e.removeAttribute(r):(w=w.type,c=w===3||w===4&&c===!0?"":""+c,m?e.setAttributeNS(m,r,c):e.setAttribute(r,c))))}var R=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),A=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),Z=Symbol.for("react.provider"),ie=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),W=Symbol.for("react.offscreen"),L=Symbol.iterator;function Y(e){return e===null||typeof e!="object"?null:(e=L&&e[L]||e["@@iterator"],typeof e=="function"?e:null)}var ee=Object.assign,H;function X(e){if(H===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);H=r&&r[1]||""}return`
`+H+e}var ne=!1;function fe(e,r){if(!e||ne)return"";ne=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(le){var m=le}Reflect.construct(e,[],r)}else{try{r.call()}catch(le){m=le}e.call(r.prototype)}else{try{throw Error()}catch(le){m=le}e()}}catch(le){if(le&&m&&typeof le.stack=="string"){for(var w=le.stack.split(`
`),T=m.stack.split(`
`),P=w.length-1,z=T.length-1;1<=P&&0<=z&&w[P]!==T[z];)z--;for(;1<=P&&0<=z;P--,z--)if(w[P]!==T[z]){if(P!==1||z!==1)do if(P--,z--,0>z||w[P]!==T[z]){var J=`
`+w[P].replace(" at new "," at ");return e.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",e.displayName)),J}while(1<=P&&0<=z);break}}}finally{ne=!1,Error.prepareStackTrace=c}return(e=e?e.displayName||e.name:"")?X(e):""}function he(e){switch(e.tag){case 5:return X(e.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return e=fe(e.type,!1),e;case 11:return e=fe(e.type.render,!1),e;case 1:return e=fe(e.type,!0),e;default:return""}}function Ae(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case j:return"Fragment";case A:return"Portal";case K:return"Profiler";case k:return"StrictMode";case V:return"Suspense";case F:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ie:return(e.displayName||"Context")+".Consumer";case Z:return(e._context.displayName||"Context")+".Provider";case ce:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case O:return r=e.displayName||null,r!==null?r:Ae(e.type)||"Memo";case q:r=e._payload,e=e._init;try{return Ae(e(r))}catch{}}return null}function Ne(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ae(r);case 8:return r===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function ue(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ve(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function He(e){var r=ve(e)?"checked":"value",c=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),m=""+e[r];if(!e.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var w=c.get,T=c.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return w.call(this)},set:function(P){m=""+P,T.call(this,P)}}),Object.defineProperty(e,r,{enumerable:c.enumerable}),{getValue:function(){return m},setValue:function(P){m=""+P},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function ft(e){e._valueTracker||(e._valueTracker=He(e))}function U(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var c=r.getValue(),m="";return e&&(m=ve(e)?e.checked?"true":"false":e.value),e=m,e!==c?(r.setValue(e),!0):!1}function me(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ee(e,r){var c=r.checked;return ee({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??e._wrapperState.initialChecked})}function tt(e,r){var c=r.defaultValue==null?"":r.defaultValue,m=r.checked!=null?r.checked:r.defaultChecked;c=ue(r.value!=null?r.value:c),e._wrapperState={initialChecked:m,initialValue:c,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function st(e,r){r=r.checked,r!=null&&_(e,"checked",r,!1)}function lt(e,r){st(e,r);var c=ue(r.value),m=r.type;if(c!=null)m==="number"?(c===0&&e.value===""||e.value!=c)&&(e.value=""+c):e.value!==""+c&&(e.value=""+c);else if(m==="submit"||m==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?lr(e,r.type,c):r.hasOwnProperty("defaultValue")&&lr(e,r.type,ue(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function ei(e,r,c){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var m=r.type;if(!(m!=="submit"&&m!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,c||r===e.value||(e.value=r),e.defaultValue=r}c=e.name,c!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,c!==""&&(e.name=c)}function lr(e,r,c){(r!=="number"||me(e.ownerDocument)!==e)&&(c==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+c&&(e.defaultValue=""+c))}var Kn=Array.isArray;function Cn(e,r,c,m){if(e=e.options,r){r={};for(var w=0;w<c.length;w++)r["$"+c[w]]=!0;for(c=0;c<e.length;c++)w=r.hasOwnProperty("$"+e[c].value),e[c].selected!==w&&(e[c].selected=w),w&&m&&(e[c].defaultSelected=!0)}else{for(c=""+ue(c),r=null,w=0;w<e.length;w++){if(e[w].value===c){e[w].selected=!0,m&&(e[w].defaultSelected=!0);return}r!==null||e[w].disabled||(r=e[w])}r!==null&&(r.selected=!0)}}function Mt(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return ee({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zr(e,r){var c=r.value;if(c==null){if(c=r.children,r=r.defaultValue,c!=null){if(r!=null)throw Error(n(92));if(Kn(c)){if(1<c.length)throw Error(n(93));c=c[0]}r=c}r==null&&(r=""),c=r}e._wrapperState={initialValue:ue(c)}}function Vi(e,r){var c=ue(r.value),m=ue(r.defaultValue);c!=null&&(c=""+c,c!==e.value&&(e.value=c),r.defaultValue==null&&e.defaultValue!==c&&(e.defaultValue=c)),m!=null&&(e.defaultValue=""+m)}function ra(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rt(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?ae(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ye,Es=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,c,m,w){MSApp.execUnsafeLocalFunction(function(){return e(r,c,m,w)})}:e})(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(Ye=Ye||document.createElement("div"),Ye.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Ye.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function er(e,r){if(r){var c=e.firstChild;if(c&&c===e.lastChild&&c.nodeType===3){c.nodeValue=r;return}}e.textContent=r}var on={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},an=["Webkit","ms","Moz","O"];Object.keys(on).forEach(function(e){an.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),on[r]=on[e]})});function Gi(e,r,c){return r==null||typeof r=="boolean"||r===""?"":c||typeof r!="number"||r===0||on.hasOwnProperty(e)&&on[e]?(""+r).trim():r+"px"}function Ji(e,r){e=e.style;for(var c in r)if(r.hasOwnProperty(c)){var m=c.indexOf("--")===0,w=Gi(c,r[c],m);c==="float"&&(c="cssFloat"),m?e.setProperty(c,w):e[c]=w}}var Wn=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vn(e,r){if(r){if(Wn[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function Gn(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tn=null;function xr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ws=null,_n=null,Kr=null;function Ss(e){if(e=Ca(e)){if(typeof ws!="function")throw Error(n(280));var r=e.stateNode;r&&(r=bc(r),ws(e.stateNode,e.type,r))}}function Je(e){_n?Kr?Kr.push(e):Kr=[e]:_n=e}function wt(){if(_n){var e=_n,r=Kr;if(Kr=_n=null,Ss(e),r)for(e=0;e<r.length;e++)Ss(r[e])}}function kt(e,r){return e(r)}function zt(){}var Wr=!1;function vt(e,r,c){if(Wr)return e(r,c);Wr=!0;try{return kt(e,r,c)}finally{Wr=!1,(_n!==null||Kr!==null)&&(zt(),wt())}}function Ot(e,r){var c=e.stateNode;if(c===null)return null;var m=bc(c);if(m===null)return null;c=m[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(e=e.type,m=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!m;break e;default:e=!1}if(e)return null;if(c&&typeof c!="function")throw Error(n(231,r,typeof c));return c}var Rn=!1;if(u)try{var $t={};Object.defineProperty($t,"passive",{get:function(){Rn=!0}}),window.addEventListener("test",$t,$t),window.removeEventListener("test",$t,$t)}catch{Rn=!1}function cr(e,r,c,m,w,T,P,z,J){var le=Array.prototype.slice.call(arguments,3);try{r.apply(c,le)}catch(ye){this.onError(ye)}}var pt=!1,br=null,ti=!1,na=null,Jl={onError:function(e){pt=!0,br=e}};function kd(e,r,c,m,w,T,P,z,J){pt=!1,br=null,cr.apply(Jl,arguments)}function sa(e,r,c,m,w,T,P,z,J){if(kd.apply(this,arguments),pt){if(pt){var le=br;pt=!1,br=null}else throw Error(n(198));ti||(ti=!0,na=le)}}function ln(e){var r=e,c=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(c=r.return),e=r.return;while(e)}return r.tag===3?c:null}function Yl(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function Xl(e){if(ln(e)!==e)throw Error(n(188))}function Ql(e){var r=e.alternate;if(!r){if(r=ln(e),r===null)throw Error(n(188));return r!==e?null:e}for(var c=e,m=r;;){var w=c.return;if(w===null)break;var T=w.alternate;if(T===null){if(m=w.return,m!==null){c=m;continue}break}if(w.child===T.child){for(T=w.child;T;){if(T===c)return Xl(w),e;if(T===m)return Xl(w),r;T=T.sibling}throw Error(n(188))}if(c.return!==m.return)c=w,m=T;else{for(var P=!1,z=w.child;z;){if(z===c){P=!0,c=w,m=T;break}if(z===m){P=!0,m=w,c=T;break}z=z.sibling}if(!P){for(z=T.child;z;){if(z===c){P=!0,c=T,m=w;break}if(z===m){P=!0,m=T,c=w;break}z=z.sibling}if(!P)throw Error(n(189))}}if(c.alternate!==m)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?e:r}function xs(e){return e=Ql(e),e!==null?ri(e):null}function ri(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=ri(e);if(r!==null)return r;e=e.sibling}return null}var Zl=s.unstable_scheduleCallback,ec=s.unstable_cancelCallback,ia=s.unstable_shouldYield,Id=s.unstable_requestPaint,St=s.unstable_now,Yi=s.unstable_getCurrentPriorityLevel,ur=s.unstable_ImmediatePriority,Xi=s.unstable_UserBlockingPriority,ni=s.unstable_NormalPriority,Ad=s.unstable_LowPriority,bs=s.unstable_IdlePriority,si=null,Vr=null;function Nd(e){if(Vr&&typeof Vr.onCommitFiberRoot=="function")try{Vr.onCommitFiberRoot(si,e,void 0,(e.current.flags&128)===128)}catch{}}var Mr=Math.clz32?Math.clz32:rc,Qi=Math.log,tc=Math.LN2;function rc(e){return e>>>=0,e===0?32:31-(Qi(e)/tc|0)|0}var Zi=64,eo=4194304;function ii(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function to(e,r){var c=e.pendingLanes;if(c===0)return 0;var m=0,w=e.suspendedLanes,T=e.pingedLanes,P=c&268435455;if(P!==0){var z=P&~w;z!==0?m=ii(z):(T&=P,T!==0&&(m=ii(T)))}else P=c&~w,P!==0?m=ii(P):T!==0&&(m=ii(T));if(m===0)return 0;if(r!==0&&r!==m&&(r&w)===0&&(w=m&-m,T=r&-r,w>=T||w===16&&(T&4194240)!==0))return r;if((m&4)!==0&&(m|=c&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=m;0<r;)c=31-Mr(r),w=1<<c,m|=e[c],r&=~w;return m}function nc(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sc(e,r){for(var c=e.suspendedLanes,m=e.pingedLanes,w=e.expirationTimes,T=e.pendingLanes;0<T;){var P=31-Mr(T),z=1<<P,J=w[P];J===-1?((z&c)===0||(z&m)!==0)&&(w[P]=nc(z,r)):J<=r&&(e.expiredLanes|=z),T&=~z}}function cn(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function oa(){var e=Zi;return Zi<<=1,(Zi&4194240)===0&&(Zi=64),e}function ic(e){for(var r=[],c=0;31>c;c++)r.push(e);return r}function oi(e,r,c){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-Mr(r),e[r]=c}function gy(e,r){var c=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var m=e.eventTimes;for(e=e.expirationTimes;0<c;){var w=31-Mr(c),T=1<<w;r[w]=0,m[w]=-1,e[w]=-1,c&=~T}}function aa(e,r){var c=e.entangledLanes|=r;for(e=e.entanglements;c;){var m=31-Mr(c),w=1<<m;w&r|e[m]&r&&(e[m]|=r),c&=~w}}var ct=0;function oc(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var ac,ro,la,ai,lc,no=!1,li=[],un=null,kn=null,In=null,Cs=new Map,Jn=new Map,dn=[],Pd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cc(e,r){switch(e){case"focusin":case"focusout":un=null;break;case"dragenter":case"dragleave":kn=null;break;case"mouseover":case"mouseout":In=null;break;case"pointerover":case"pointerout":Cs.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jn.delete(r.pointerId)}}function Ts(e,r,c,m,w,T){return e===null||e.nativeEvent!==T?(e={blockedOn:r,domEventName:c,eventSystemFlags:m,nativeEvent:T,targetContainers:[w]},r!==null&&(r=Ca(r),r!==null&&ro(r)),e):(e.eventSystemFlags|=m,r=e.targetContainers,w!==null&&r.indexOf(w)===-1&&r.push(w),e)}function ca(e,r,c,m,w){switch(r){case"focusin":return un=Ts(un,e,r,c,m,w),!0;case"dragenter":return kn=Ts(kn,e,r,c,m,w),!0;case"mouseover":return In=Ts(In,e,r,c,m,w),!0;case"pointerover":var T=w.pointerId;return Cs.set(T,Ts(Cs.get(T)||null,e,r,c,m,w)),!0;case"gotpointercapture":return T=w.pointerId,Jn.set(T,Ts(Jn.get(T)||null,e,r,c,m,w)),!0}return!1}function ua(e){var r=hi(e.target);if(r!==null){var c=ln(r);if(c!==null){if(r=c.tag,r===13){if(r=Yl(c),r!==null){e.blockedOn=r,lc(e.priority,function(){la(c)});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){e.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ci(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var c=ha(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(c===null){c=e.nativeEvent;var m=new c.constructor(c.type,c);Tn=m,c.target.dispatchEvent(m),Tn=null}else return r=Ca(c),r!==null&&ro(r),e.blockedOn=c,!1;r.shift()}return!0}function ui(e,r,c){ci(e)&&c.delete(r)}function uc(){no=!1,un!==null&&ci(un)&&(un=null),kn!==null&&ci(kn)&&(kn=null),In!==null&&ci(In)&&(In=null),Cs.forEach(ui),Jn.forEach(ui)}function di(e,r){e.blockedOn===r&&(e.blockedOn=null,no||(no=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,uc)))}function An(e){function r(w){return di(w,e)}if(0<li.length){di(li[0],e);for(var c=1;c<li.length;c++){var m=li[c];m.blockedOn===e&&(m.blockedOn=null)}}for(un!==null&&di(un,e),kn!==null&&di(kn,e),In!==null&&di(In,e),Cs.forEach(r),Jn.forEach(r),c=0;c<dn.length;c++)m=dn[c],m.blockedOn===e&&(m.blockedOn=null);for(;0<dn.length&&(c=dn[0],c.blockedOn===null);)ua(c),c.blockedOn===null&&dn.shift()}var Xt=R.ReactCurrentBatchConfig,Yn=!0;function so(e,r,c,m){var w=ct,T=Xt.transition;Xt.transition=null;try{ct=1,fa(e,r,c,m)}finally{ct=w,Xt.transition=T}}function da(e,r,c,m){var w=ct,T=Xt.transition;Xt.transition=null;try{ct=4,fa(e,r,c,m)}finally{ct=w,Xt.transition=T}}function fa(e,r,c,m){if(Yn){var w=ha(e,r,c,m);if(w===null)Bd(e,r,m,io,c),cc(e,m);else if(ca(w,e,r,c,m))m.stopPropagation();else if(cc(e,m),r&4&&-1<Pd.indexOf(e)){for(;w!==null;){var T=Ca(w);if(T!==null&&ac(T),T=ha(e,r,c,m),T===null&&Bd(e,r,m,io,c),T===w)break;w=T}w!==null&&m.stopPropagation()}else Bd(e,r,m,null,c)}}var io=null;function ha(e,r,c,m){if(io=null,e=xr(m),e=hi(e),e!==null)if(r=ln(e),r===null)e=null;else if(c=r.tag,c===13){if(e=Yl(r),e!==null)return e;e=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return io=e,null}function oo(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yi()){case ur:return 1;case Xi:return 4;case ni:case Ad:return 16;case bs:return 536870912;default:return 16}default:return 16}}var Nn=null,ao=null,mt=null;function I(){if(mt)return mt;var e,r=ao,c=r.length,m,w="value"in Nn?Nn.value:Nn.textContent,T=w.length;for(e=0;e<c&&r[e]===w[e];e++);var P=c-e;for(m=1;m<=P&&r[c-m]===w[T-m];m++);return mt=w.slice(e,1<m?1-m:void 0)}function N(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function M(){return!0}function $(){return!1}function B(e){function r(c,m,w,T,P){this._reactName=c,this._targetInst=w,this.type=m,this.nativeEvent=T,this.target=P,this.currentTarget=null;for(var z in e)e.hasOwnProperty(z)&&(c=e[z],this[z]=c?c(T):T[z]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?M:$,this.isPropagationStopped=$,this}return ee(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=M)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=M)},persist:function(){},isPersistent:M}),r}var te={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},re=B(te),de=ee({},te,{view:0,detail:0}),Me=B(de),_e,Se,Fe,ut=ee({},de,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_s,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fe&&(Fe&&e.type==="mousemove"?(_e=e.screenX-Fe.screenX,Se=e.screenY-Fe.screenY):Se=_e=0,Fe=e),_e)},movementY:function(e){return"movementY"in e?e.movementY:Se}}),Ut=B(ut),Te=ee({},ut,{dataTransfer:0}),Ve=B(Te),Ue=ee({},de,{relatedTarget:0}),xt=B(Ue),Cr=ee({},te,{animationName:0,elapsedTime:0,pseudoElement:0}),jt=B(Cr),tr=ee({},te,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$r=B(tr),Xn=ee({},te,{data:0}),dr=B(Xn),pa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fc(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=dc[e])?!!r[e]:!1}function _s(){return fc}var fi=ee({},de,{key:function(e){if(e.key){var r=pa[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=N(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lo[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_s,charCode:function(e){return e.type==="keypress"?N(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?N(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Qn=B(fi),hc=ee({},ut,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ur=B(hc),pc=ee({},de,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_s}),Pn=B(pc),mc=ee({},te,{propertyName:0,elapsedTime:0,pseudoElement:0}),Od=B(mc),On=ee({},ut,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rs=B(On),ma=[9,13,27,32],ks=u&&"CompositionEvent"in window,Is=null;u&&"documentMode"in document&&(Is=document.documentMode);var xT=u&&"TextEvent"in window&&!Is,yy=u&&(!ks||Is&&8<Is&&11>=Is),vy=" ",Ey=!1;function wy(e,r){switch(e){case"keyup":return ma.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sy(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var co=!1;function bT(e,r){switch(e){case"compositionend":return Sy(r);case"keypress":return r.which!==32?null:(Ey=!0,vy);case"textInput":return e=r.data,e===vy&&Ey?null:e;default:return null}}function CT(e,r){if(co)return e==="compositionend"||!ks&&wy(e,r)?(e=I(),mt=ao=Nn=null,co=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return yy&&r.locale!=="ko"?null:r.data;default:return null}}var TT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xy(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!TT[e.type]:r==="textarea"}function by(e,r,c,m){Je(m),r=wc(r,"onChange"),0<r.length&&(c=new re("onChange","change",null,c,m),e.push({event:c,listeners:r}))}var ga=null,ya=null;function _T(e){Fy(e,0)}function gc(e){var r=mo(e);if(U(r))return e}function RT(e,r){if(e==="change")return r}var Cy=!1;if(u){var jd;if(u){var Ld="oninput"in document;if(!Ld){var Ty=document.createElement("div");Ty.setAttribute("oninput","return;"),Ld=typeof Ty.oninput=="function"}jd=Ld}else jd=!1;Cy=jd&&(!document.documentMode||9<document.documentMode)}function _y(){ga&&(ga.detachEvent("onpropertychange",Ry),ya=ga=null)}function Ry(e){if(e.propertyName==="value"&&gc(ya)){var r=[];by(r,ya,e,xr(e)),vt(_T,r)}}function kT(e,r,c){e==="focusin"?(_y(),ga=r,ya=c,ga.attachEvent("onpropertychange",Ry)):e==="focusout"&&_y()}function IT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return gc(ya)}function AT(e,r){if(e==="click")return gc(r)}function NT(e,r){if(e==="input"||e==="change")return gc(r)}function PT(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var fn=typeof Object.is=="function"?Object.is:PT;function va(e,r){if(fn(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var c=Object.keys(e),m=Object.keys(r);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var w=c[m];if(!d.call(r,w)||!fn(e[w],r[w]))return!1}return!0}function ky(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Iy(e,r){var c=ky(e);e=0;for(var m;c;){if(c.nodeType===3){if(m=e+c.textContent.length,e<=r&&m>=r)return{node:c,offset:r-e};e=m}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=ky(c)}}function Ay(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?Ay(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function Ny(){for(var e=window,r=me();r instanceof e.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)e=r.contentWindow;else break;r=me(e.document)}return r}function Dd(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function OT(e){var r=Ny(),c=e.focusedElem,m=e.selectionRange;if(r!==c&&c&&c.ownerDocument&&Ay(c.ownerDocument.documentElement,c)){if(m!==null&&Dd(c)){if(r=m.start,e=m.end,e===void 0&&(e=r),"selectionStart"in c)c.selectionStart=r,c.selectionEnd=Math.min(e,c.value.length);else if(e=(r=c.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var w=c.textContent.length,T=Math.min(m.start,w);m=m.end===void 0?T:Math.min(m.end,w),!e.extend&&T>m&&(w=m,m=T,T=w),w=Iy(c,T);var P=Iy(c,m);w&&P&&(e.rangeCount!==1||e.anchorNode!==w.node||e.anchorOffset!==w.offset||e.focusNode!==P.node||e.focusOffset!==P.offset)&&(r=r.createRange(),r.setStart(w.node,w.offset),e.removeAllRanges(),T>m?(e.addRange(r),e.extend(P.node,P.offset)):(r.setEnd(P.node,P.offset),e.addRange(r)))}}for(r=[],e=c;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<r.length;c++)e=r[c],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var jT=u&&"documentMode"in document&&11>=document.documentMode,uo=null,Md=null,Ea=null,$d=!1;function Py(e,r,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;$d||uo==null||uo!==me(m)||(m=uo,"selectionStart"in m&&Dd(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Ea&&va(Ea,m)||(Ea=m,m=wc(Md,"onSelect"),0<m.length&&(r=new re("onSelect","select",null,r,c),e.push({event:r,listeners:m}),r.target=uo)))}function yc(e,r){var c={};return c[e.toLowerCase()]=r.toLowerCase(),c["Webkit"+e]="webkit"+r,c["Moz"+e]="moz"+r,c}var fo={animationend:yc("Animation","AnimationEnd"),animationiteration:yc("Animation","AnimationIteration"),animationstart:yc("Animation","AnimationStart"),transitionend:yc("Transition","TransitionEnd")},Ud={},Oy={};u&&(Oy=document.createElement("div").style,"AnimationEvent"in window||(delete fo.animationend.animation,delete fo.animationiteration.animation,delete fo.animationstart.animation),"TransitionEvent"in window||delete fo.transitionend.transition);function vc(e){if(Ud[e])return Ud[e];if(!fo[e])return e;var r=fo[e],c;for(c in r)if(r.hasOwnProperty(c)&&c in Oy)return Ud[e]=r[c];return e}var jy=vc("animationend"),Ly=vc("animationiteration"),Dy=vc("animationstart"),My=vc("transitionend"),$y=new Map,Uy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function As(e,r){$y.set(e,r),l(r,[e])}for(var qd=0;qd<Uy.length;qd++){var Fd=Uy[qd],LT=Fd.toLowerCase(),DT=Fd[0].toUpperCase()+Fd.slice(1);As(LT,"on"+DT)}As(jy,"onAnimationEnd"),As(Ly,"onAnimationIteration"),As(Dy,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(My,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MT=new Set("cancel close invalid load scroll toggle".split(" ").concat(wa));function qy(e,r,c){var m=e.type||"unknown-event";e.currentTarget=c,sa(m,r,void 0,e),e.currentTarget=null}function Fy(e,r){r=(r&4)!==0;for(var c=0;c<e.length;c++){var m=e[c],w=m.event;m=m.listeners;e:{var T=void 0;if(r)for(var P=m.length-1;0<=P;P--){var z=m[P],J=z.instance,le=z.currentTarget;if(z=z.listener,J!==T&&w.isPropagationStopped())break e;qy(w,z,le),T=J}else for(P=0;P<m.length;P++){if(z=m[P],J=z.instance,le=z.currentTarget,z=z.listener,J!==T&&w.isPropagationStopped())break e;qy(w,z,le),T=J}}}if(ti)throw e=na,ti=!1,na=null,e}function gt(e,r){var c=r[Jd];c===void 0&&(c=r[Jd]=new Set);var m=e+"__bubble";c.has(m)||(Hy(r,e,2,!1),c.add(m))}function Hd(e,r,c){var m=0;r&&(m|=4),Hy(c,e,m,r)}var Ec="_reactListening"+Math.random().toString(36).slice(2);function Sa(e){if(!e[Ec]){e[Ec]=!0,i.forEach(function(c){c!=="selectionchange"&&(MT.has(c)||Hd(c,!1,e),Hd(c,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[Ec]||(r[Ec]=!0,Hd("selectionchange",!1,r))}}function Hy(e,r,c,m){switch(oo(r)){case 1:var w=so;break;case 4:w=da;break;default:w=fa}c=w.bind(null,r,c,e),w=void 0,!Rn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(w=!0),m?w!==void 0?e.addEventListener(r,c,{capture:!0,passive:w}):e.addEventListener(r,c,!0):w!==void 0?e.addEventListener(r,c,{passive:w}):e.addEventListener(r,c,!1)}function Bd(e,r,c,m,w){var T=m;if((r&1)===0&&(r&2)===0&&m!==null)e:for(;;){if(m===null)return;var P=m.tag;if(P===3||P===4){var z=m.stateNode.containerInfo;if(z===w||z.nodeType===8&&z.parentNode===w)break;if(P===4)for(P=m.return;P!==null;){var J=P.tag;if((J===3||J===4)&&(J=P.stateNode.containerInfo,J===w||J.nodeType===8&&J.parentNode===w))return;P=P.return}for(;z!==null;){if(P=hi(z),P===null)return;if(J=P.tag,J===5||J===6){m=T=P;continue e}z=z.parentNode}}m=m.return}vt(function(){var le=T,ye=xr(c),we=[];e:{var ge=$y.get(e);if(ge!==void 0){var Ie=re,je=e;switch(e){case"keypress":if(N(c)===0)break e;case"keydown":case"keyup":Ie=Qn;break;case"focusin":je="focus",Ie=xt;break;case"focusout":je="blur",Ie=xt;break;case"beforeblur":case"afterblur":Ie=xt;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=Ut;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=Ve;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=Pn;break;case jy:case Ly:case Dy:Ie=jt;break;case My:Ie=Od;break;case"scroll":Ie=Me;break;case"wheel":Ie=Rs;break;case"copy":case"cut":case"paste":Ie=$r;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=Ur}var $e=(r&4)!==0,It=!$e&&e==="scroll",se=$e?ge!==null?ge+"Capture":null:ge;$e=[];for(var Q=le,oe;Q!==null;){oe=Q;var xe=oe.stateNode;if(oe.tag===5&&xe!==null&&(oe=xe,se!==null&&(xe=Ot(Q,se),xe!=null&&$e.push(xa(Q,xe,oe)))),It)break;Q=Q.return}0<$e.length&&(ge=new Ie(ge,je,null,c,ye),we.push({event:ge,listeners:$e}))}}if((r&7)===0){e:{if(ge=e==="mouseover"||e==="pointerover",Ie=e==="mouseout"||e==="pointerout",ge&&c!==Tn&&(je=c.relatedTarget||c.fromElement)&&(hi(je)||je[Zn]))break e;if((Ie||ge)&&(ge=ye.window===ye?ye:(ge=ye.ownerDocument)?ge.defaultView||ge.parentWindow:window,Ie?(je=c.relatedTarget||c.toElement,Ie=le,je=je?hi(je):null,je!==null&&(It=ln(je),je!==It||je.tag!==5&&je.tag!==6)&&(je=null)):(Ie=null,je=le),Ie!==je)){if($e=Ut,xe="onMouseLeave",se="onMouseEnter",Q="mouse",(e==="pointerout"||e==="pointerover")&&($e=Ur,xe="onPointerLeave",se="onPointerEnter",Q="pointer"),It=Ie==null?ge:mo(Ie),oe=je==null?ge:mo(je),ge=new $e(xe,Q+"leave",Ie,c,ye),ge.target=It,ge.relatedTarget=oe,xe=null,hi(ye)===le&&($e=new $e(se,Q+"enter",je,c,ye),$e.target=oe,$e.relatedTarget=It,xe=$e),It=xe,Ie&&je)t:{for($e=Ie,se=je,Q=0,oe=$e;oe;oe=ho(oe))Q++;for(oe=0,xe=se;xe;xe=ho(xe))oe++;for(;0<Q-oe;)$e=ho($e),Q--;for(;0<oe-Q;)se=ho(se),oe--;for(;Q--;){if($e===se||se!==null&&$e===se.alternate)break t;$e=ho($e),se=ho(se)}$e=null}else $e=null;Ie!==null&&By(we,ge,Ie,$e,!1),je!==null&&It!==null&&By(we,It,je,$e,!0)}}e:{if(ge=le?mo(le):window,Ie=ge.nodeName&&ge.nodeName.toLowerCase(),Ie==="select"||Ie==="input"&&ge.type==="file")var qe=RT;else if(xy(ge))if(Cy)qe=NT;else{qe=IT;var ze=kT}else(Ie=ge.nodeName)&&Ie.toLowerCase()==="input"&&(ge.type==="checkbox"||ge.type==="radio")&&(qe=AT);if(qe&&(qe=qe(e,le))){by(we,qe,c,ye);break e}ze&&ze(e,ge,le),e==="focusout"&&(ze=ge._wrapperState)&&ze.controlled&&ge.type==="number"&&lr(ge,"number",ge.value)}switch(ze=le?mo(le):window,e){case"focusin":(xy(ze)||ze.contentEditable==="true")&&(uo=ze,Md=le,Ea=null);break;case"focusout":Ea=Md=uo=null;break;case"mousedown":$d=!0;break;case"contextmenu":case"mouseup":case"dragend":$d=!1,Py(we,c,ye);break;case"selectionchange":if(jT)break;case"keydown":case"keyup":Py(we,c,ye)}var Ke;if(ks)e:{switch(e){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else co?wy(e,c)&&(Ge="onCompositionEnd"):e==="keydown"&&c.keyCode===229&&(Ge="onCompositionStart");Ge&&(yy&&c.locale!=="ko"&&(co||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&co&&(Ke=I()):(Nn=ye,ao="value"in Nn?Nn.value:Nn.textContent,co=!0)),ze=wc(le,Ge),0<ze.length&&(Ge=new dr(Ge,e,null,c,ye),we.push({event:Ge,listeners:ze}),Ke?Ge.data=Ke:(Ke=Sy(c),Ke!==null&&(Ge.data=Ke)))),(Ke=xT?bT(e,c):CT(e,c))&&(le=wc(le,"onBeforeInput"),0<le.length&&(ye=new dr("onBeforeInput","beforeinput",null,c,ye),we.push({event:ye,listeners:le}),ye.data=Ke))}Fy(we,r)})}function xa(e,r,c){return{instance:e,listener:r,currentTarget:c}}function wc(e,r){for(var c=r+"Capture",m=[];e!==null;){var w=e,T=w.stateNode;w.tag===5&&T!==null&&(w=T,T=Ot(e,c),T!=null&&m.unshift(xa(e,T,w)),T=Ot(e,r),T!=null&&m.push(xa(e,T,w))),e=e.return}return m}function ho(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function By(e,r,c,m,w){for(var T=r._reactName,P=[];c!==null&&c!==m;){var z=c,J=z.alternate,le=z.stateNode;if(J!==null&&J===m)break;z.tag===5&&le!==null&&(z=le,w?(J=Ot(c,T),J!=null&&P.unshift(xa(c,J,z))):w||(J=Ot(c,T),J!=null&&P.push(xa(c,J,z)))),c=c.return}P.length!==0&&e.push({event:r,listeners:P})}var $T=/\r\n?/g,UT=/\u0000|\uFFFD/g;function zy(e){return(typeof e=="string"?e:""+e).replace($T,`
`).replace(UT,"")}function Sc(e,r,c){if(r=zy(r),zy(e)!==r&&c)throw Error(n(425))}function xc(){}var zd=null,Kd=null;function Wd(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Vd=typeof setTimeout=="function"?setTimeout:void 0,qT=typeof clearTimeout=="function"?clearTimeout:void 0,Ky=typeof Promise=="function"?Promise:void 0,FT=typeof queueMicrotask=="function"?queueMicrotask:typeof Ky<"u"?function(e){return Ky.resolve(null).then(e).catch(HT)}:Vd;function HT(e){setTimeout(function(){throw e})}function Gd(e,r){var c=r,m=0;do{var w=c.nextSibling;if(e.removeChild(c),w&&w.nodeType===8)if(c=w.data,c==="/$"){if(m===0){e.removeChild(w),An(r);return}m--}else c!=="$"&&c!=="$?"&&c!=="$!"||m++;c=w}while(c);An(r)}function Ns(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function Wy(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var c=e.data;if(c==="$"||c==="$!"||c==="$?"){if(r===0)return e;r--}else c==="/$"&&r++}e=e.previousSibling}return null}var po=Math.random().toString(36).slice(2),jn="__reactFiber$"+po,ba="__reactProps$"+po,Zn="__reactContainer$"+po,Jd="__reactEvents$"+po,BT="__reactListeners$"+po,zT="__reactHandles$"+po;function hi(e){var r=e[jn];if(r)return r;for(var c=e.parentNode;c;){if(r=c[Zn]||c[jn]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(e=Wy(e);e!==null;){if(c=e[jn])return c;e=Wy(e)}return r}e=c,c=e.parentNode}return null}function Ca(e){return e=e[jn]||e[Zn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function mo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(n(33))}function bc(e){return e[ba]||null}var Yd=[],go=-1;function Ps(e){return{current:e}}function yt(e){0>go||(e.current=Yd[go],Yd[go]=null,go--)}function ht(e,r){go++,Yd[go]=e.current,e.current=r}var Os={},rr=Ps(Os),Tr=Ps(!1),pi=Os;function yo(e,r){var c=e.type.contextTypes;if(!c)return Os;var m=e.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===r)return m.__reactInternalMemoizedMaskedChildContext;var w={},T;for(T in c)w[T]=r[T];return m&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=w),w}function _r(e){return e=e.childContextTypes,e!=null}function Cc(){yt(Tr),yt(rr)}function Vy(e,r,c){if(rr.current!==Os)throw Error(n(168));ht(rr,r),ht(Tr,c)}function Gy(e,r,c){var m=e.stateNode;if(r=r.childContextTypes,typeof m.getChildContext!="function")return c;m=m.getChildContext();for(var w in m)if(!(w in r))throw Error(n(108,Ne(e)||"Unknown",w));return ee({},c,m)}function Tc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Os,pi=rr.current,ht(rr,e),ht(Tr,Tr.current),!0}function Jy(e,r,c){var m=e.stateNode;if(!m)throw Error(n(169));c?(e=Gy(e,r,pi),m.__reactInternalMemoizedMergedChildContext=e,yt(Tr),yt(rr),ht(rr,e)):yt(Tr),ht(Tr,c)}var es=null,_c=!1,Xd=!1;function Yy(e){es===null?es=[e]:es.push(e)}function KT(e){_c=!0,Yy(e)}function js(){if(!Xd&&es!==null){Xd=!0;var e=0,r=ct;try{var c=es;for(ct=1;e<c.length;e++){var m=c[e];do m=m(!0);while(m!==null)}es=null,_c=!1}catch(w){throw es!==null&&(es=es.slice(e+1)),Zl(ur,js),w}finally{ct=r,Xd=!1}}return null}var vo=[],Eo=0,Rc=null,kc=0,Gr=[],Jr=0,mi=null,ts=1,rs="";function gi(e,r){vo[Eo++]=kc,vo[Eo++]=Rc,Rc=e,kc=r}function Xy(e,r,c){Gr[Jr++]=ts,Gr[Jr++]=rs,Gr[Jr++]=mi,mi=e;var m=ts;e=rs;var w=32-Mr(m)-1;m&=~(1<<w),c+=1;var T=32-Mr(r)+w;if(30<T){var P=w-w%5;T=(m&(1<<P)-1).toString(32),m>>=P,w-=P,ts=1<<32-Mr(r)+w|c<<w|m,rs=T+e}else ts=1<<T|c<<w|m,rs=e}function Qd(e){e.return!==null&&(gi(e,1),Xy(e,1,0))}function Zd(e){for(;e===Rc;)Rc=vo[--Eo],vo[Eo]=null,kc=vo[--Eo],vo[Eo]=null;for(;e===mi;)mi=Gr[--Jr],Gr[Jr]=null,rs=Gr[--Jr],Gr[Jr]=null,ts=Gr[--Jr],Gr[Jr]=null}var qr=null,Fr=null,Et=!1,hn=null;function Qy(e,r){var c=Zr(5,null,null,0);c.elementType="DELETED",c.stateNode=r,c.return=e,r=e.deletions,r===null?(e.deletions=[c],e.flags|=16):r.push(c)}function Zy(e,r){switch(e.tag){case 5:var c=e.type;return r=r.nodeType!==1||c.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,qr=e,Fr=Ns(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,qr=e,Fr=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(c=mi!==null?{id:ts,overflow:rs}:null,e.memoizedState={dehydrated:r,treeContext:c,retryLane:1073741824},c=Zr(18,null,null,0),c.stateNode=r,c.return=e,e.child=c,qr=e,Fr=null,!0):!1;default:return!1}}function ef(e){return(e.mode&1)!==0&&(e.flags&128)===0}function tf(e){if(Et){var r=Fr;if(r){var c=r;if(!Zy(e,r)){if(ef(e))throw Error(n(418));r=Ns(c.nextSibling);var m=qr;r&&Zy(e,r)?Qy(m,c):(e.flags=e.flags&-4097|2,Et=!1,qr=e)}}else{if(ef(e))throw Error(n(418));e.flags=e.flags&-4097|2,Et=!1,qr=e}}}function ev(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qr=e}function Ic(e){if(e!==qr)return!1;if(!Et)return ev(e),Et=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!Wd(e.type,e.memoizedProps)),r&&(r=Fr)){if(ef(e))throw tv(),Error(n(418));for(;r;)Qy(e,r),r=Ns(r.nextSibling)}if(ev(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var c=e.data;if(c==="/$"){if(r===0){Fr=Ns(e.nextSibling);break e}r--}else c!=="$"&&c!=="$!"&&c!=="$?"||r++}e=e.nextSibling}Fr=null}}else Fr=qr?Ns(e.stateNode.nextSibling):null;return!0}function tv(){for(var e=Fr;e;)e=Ns(e.nextSibling)}function wo(){Fr=qr=null,Et=!1}function rf(e){hn===null?hn=[e]:hn.push(e)}var WT=R.ReactCurrentBatchConfig;function Ta(e,r,c){if(e=c.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(n(309));var m=c.stateNode}if(!m)throw Error(n(147,e));var w=m,T=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===T?r.ref:(r=function(P){var z=w.refs;P===null?delete z[T]:z[T]=P},r._stringRef=T,r)}if(typeof e!="string")throw Error(n(284));if(!c._owner)throw Error(n(290,e))}return e}function Ac(e,r){throw e=Object.prototype.toString.call(r),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function rv(e){var r=e._init;return r(e._payload)}function nv(e){function r(se,Q){if(e){var oe=se.deletions;oe===null?(se.deletions=[Q],se.flags|=16):oe.push(Q)}}function c(se,Q){if(!e)return null;for(;Q!==null;)r(se,Q),Q=Q.sibling;return null}function m(se,Q){for(se=new Map;Q!==null;)Q.key!==null?se.set(Q.key,Q):se.set(Q.index,Q),Q=Q.sibling;return se}function w(se,Q){return se=Hs(se,Q),se.index=0,se.sibling=null,se}function T(se,Q,oe){return se.index=oe,e?(oe=se.alternate,oe!==null?(oe=oe.index,oe<Q?(se.flags|=2,Q):oe):(se.flags|=2,Q)):(se.flags|=1048576,Q)}function P(se){return e&&se.alternate===null&&(se.flags|=2),se}function z(se,Q,oe,xe){return Q===null||Q.tag!==6?(Q=Gf(oe,se.mode,xe),Q.return=se,Q):(Q=w(Q,oe),Q.return=se,Q)}function J(se,Q,oe,xe){var qe=oe.type;return qe===j?ye(se,Q,oe.props.children,xe,oe.key):Q!==null&&(Q.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===q&&rv(qe)===Q.type)?(xe=w(Q,oe.props),xe.ref=Ta(se,Q,oe),xe.return=se,xe):(xe=eu(oe.type,oe.key,oe.props,null,se.mode,xe),xe.ref=Ta(se,Q,oe),xe.return=se,xe)}function le(se,Q,oe,xe){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==oe.containerInfo||Q.stateNode.implementation!==oe.implementation?(Q=Jf(oe,se.mode,xe),Q.return=se,Q):(Q=w(Q,oe.children||[]),Q.return=se,Q)}function ye(se,Q,oe,xe,qe){return Q===null||Q.tag!==7?(Q=Ci(oe,se.mode,xe,qe),Q.return=se,Q):(Q=w(Q,oe),Q.return=se,Q)}function we(se,Q,oe){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=Gf(""+Q,se.mode,oe),Q.return=se,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case D:return oe=eu(Q.type,Q.key,Q.props,null,se.mode,oe),oe.ref=Ta(se,null,Q),oe.return=se,oe;case A:return Q=Jf(Q,se.mode,oe),Q.return=se,Q;case q:var xe=Q._init;return we(se,xe(Q._payload),oe)}if(Kn(Q)||Y(Q))return Q=Ci(Q,se.mode,oe,null),Q.return=se,Q;Ac(se,Q)}return null}function ge(se,Q,oe,xe){var qe=Q!==null?Q.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number")return qe!==null?null:z(se,Q,""+oe,xe);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case D:return oe.key===qe?J(se,Q,oe,xe):null;case A:return oe.key===qe?le(se,Q,oe,xe):null;case q:return qe=oe._init,ge(se,Q,qe(oe._payload),xe)}if(Kn(oe)||Y(oe))return qe!==null?null:ye(se,Q,oe,xe,null);Ac(se,oe)}return null}function Ie(se,Q,oe,xe,qe){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return se=se.get(oe)||null,z(Q,se,""+xe,qe);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case D:return se=se.get(xe.key===null?oe:xe.key)||null,J(Q,se,xe,qe);case A:return se=se.get(xe.key===null?oe:xe.key)||null,le(Q,se,xe,qe);case q:var ze=xe._init;return Ie(se,Q,oe,ze(xe._payload),qe)}if(Kn(xe)||Y(xe))return se=se.get(oe)||null,ye(Q,se,xe,qe,null);Ac(Q,xe)}return null}function je(se,Q,oe,xe){for(var qe=null,ze=null,Ke=Q,Ge=Q=0,Vt=null;Ke!==null&&Ge<oe.length;Ge++){Ke.index>Ge?(Vt=Ke,Ke=null):Vt=Ke.sibling;var ot=ge(se,Ke,oe[Ge],xe);if(ot===null){Ke===null&&(Ke=Vt);break}e&&Ke&&ot.alternate===null&&r(se,Ke),Q=T(ot,Q,Ge),ze===null?qe=ot:ze.sibling=ot,ze=ot,Ke=Vt}if(Ge===oe.length)return c(se,Ke),Et&&gi(se,Ge),qe;if(Ke===null){for(;Ge<oe.length;Ge++)Ke=we(se,oe[Ge],xe),Ke!==null&&(Q=T(Ke,Q,Ge),ze===null?qe=Ke:ze.sibling=Ke,ze=Ke);return Et&&gi(se,Ge),qe}for(Ke=m(se,Ke);Ge<oe.length;Ge++)Vt=Ie(Ke,se,Ge,oe[Ge],xe),Vt!==null&&(e&&Vt.alternate!==null&&Ke.delete(Vt.key===null?Ge:Vt.key),Q=T(Vt,Q,Ge),ze===null?qe=Vt:ze.sibling=Vt,ze=Vt);return e&&Ke.forEach(function(Bs){return r(se,Bs)}),Et&&gi(se,Ge),qe}function $e(se,Q,oe,xe){var qe=Y(oe);if(typeof qe!="function")throw Error(n(150));if(oe=qe.call(oe),oe==null)throw Error(n(151));for(var ze=qe=null,Ke=Q,Ge=Q=0,Vt=null,ot=oe.next();Ke!==null&&!ot.done;Ge++,ot=oe.next()){Ke.index>Ge?(Vt=Ke,Ke=null):Vt=Ke.sibling;var Bs=ge(se,Ke,ot.value,xe);if(Bs===null){Ke===null&&(Ke=Vt);break}e&&Ke&&Bs.alternate===null&&r(se,Ke),Q=T(Bs,Q,Ge),ze===null?qe=Bs:ze.sibling=Bs,ze=Bs,Ke=Vt}if(ot.done)return c(se,Ke),Et&&gi(se,Ge),qe;if(Ke===null){for(;!ot.done;Ge++,ot=oe.next())ot=we(se,ot.value,xe),ot!==null&&(Q=T(ot,Q,Ge),ze===null?qe=ot:ze.sibling=ot,ze=ot);return Et&&gi(se,Ge),qe}for(Ke=m(se,Ke);!ot.done;Ge++,ot=oe.next())ot=Ie(Ke,se,Ge,ot.value,xe),ot!==null&&(e&&ot.alternate!==null&&Ke.delete(ot.key===null?Ge:ot.key),Q=T(ot,Q,Ge),ze===null?qe=ot:ze.sibling=ot,ze=ot);return e&&Ke.forEach(function(T_){return r(se,T_)}),Et&&gi(se,Ge),qe}function It(se,Q,oe,xe){if(typeof oe=="object"&&oe!==null&&oe.type===j&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case D:e:{for(var qe=oe.key,ze=Q;ze!==null;){if(ze.key===qe){if(qe=oe.type,qe===j){if(ze.tag===7){c(se,ze.sibling),Q=w(ze,oe.props.children),Q.return=se,se=Q;break e}}else if(ze.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===q&&rv(qe)===ze.type){c(se,ze.sibling),Q=w(ze,oe.props),Q.ref=Ta(se,ze,oe),Q.return=se,se=Q;break e}c(se,ze);break}else r(se,ze);ze=ze.sibling}oe.type===j?(Q=Ci(oe.props.children,se.mode,xe,oe.key),Q.return=se,se=Q):(xe=eu(oe.type,oe.key,oe.props,null,se.mode,xe),xe.ref=Ta(se,Q,oe),xe.return=se,se=xe)}return P(se);case A:e:{for(ze=oe.key;Q!==null;){if(Q.key===ze)if(Q.tag===4&&Q.stateNode.containerInfo===oe.containerInfo&&Q.stateNode.implementation===oe.implementation){c(se,Q.sibling),Q=w(Q,oe.children||[]),Q.return=se,se=Q;break e}else{c(se,Q);break}else r(se,Q);Q=Q.sibling}Q=Jf(oe,se.mode,xe),Q.return=se,se=Q}return P(se);case q:return ze=oe._init,It(se,Q,ze(oe._payload),xe)}if(Kn(oe))return je(se,Q,oe,xe);if(Y(oe))return $e(se,Q,oe,xe);Ac(se,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"?(oe=""+oe,Q!==null&&Q.tag===6?(c(se,Q.sibling),Q=w(Q,oe),Q.return=se,se=Q):(c(se,Q),Q=Gf(oe,se.mode,xe),Q.return=se,se=Q),P(se)):c(se,Q)}return It}var So=nv(!0),sv=nv(!1),Nc=Ps(null),Pc=null,xo=null,nf=null;function sf(){nf=xo=Pc=null}function of(e){var r=Nc.current;yt(Nc),e._currentValue=r}function af(e,r,c){for(;e!==null;){var m=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,m!==null&&(m.childLanes|=r)):m!==null&&(m.childLanes&r)!==r&&(m.childLanes|=r),e===c)break;e=e.return}}function bo(e,r){Pc=e,nf=xo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&r)!==0&&(Rr=!0),e.firstContext=null)}function Yr(e){var r=e._currentValue;if(nf!==e)if(e={context:e,memoizedValue:r,next:null},xo===null){if(Pc===null)throw Error(n(308));xo=e,Pc.dependencies={lanes:0,firstContext:e}}else xo=xo.next=e;return r}var yi=null;function lf(e){yi===null?yi=[e]:yi.push(e)}function iv(e,r,c,m){var w=r.interleaved;return w===null?(c.next=c,lf(r)):(c.next=w.next,w.next=c),r.interleaved=c,ns(e,m)}function ns(e,r){e.lanes|=r;var c=e.alternate;for(c!==null&&(c.lanes|=r),c=e,e=e.return;e!==null;)e.childLanes|=r,c=e.alternate,c!==null&&(c.childLanes|=r),c=e,e=e.return;return c.tag===3?c.stateNode:null}var Ls=!1;function cf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ov(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ss(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function Ds(e,r,c){var m=e.updateQueue;if(m===null)return null;if(m=m.shared,(it&2)!==0){var w=m.pending;return w===null?r.next=r:(r.next=w.next,w.next=r),m.pending=r,ns(e,c)}return w=m.interleaved,w===null?(r.next=r,lf(m)):(r.next=w.next,w.next=r),m.interleaved=r,ns(e,c)}function Oc(e,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194240)!==0)){var m=r.lanes;m&=e.pendingLanes,c|=m,r.lanes=c,aa(e,c)}}function av(e,r){var c=e.updateQueue,m=e.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var w=null,T=null;if(c=c.firstBaseUpdate,c!==null){do{var P={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};T===null?w=T=P:T=T.next=P,c=c.next}while(c!==null);T===null?w=T=r:T=T.next=r}else w=T=r;c={baseState:m.baseState,firstBaseUpdate:w,lastBaseUpdate:T,shared:m.shared,effects:m.effects},e.updateQueue=c;return}e=c.lastBaseUpdate,e===null?c.firstBaseUpdate=r:e.next=r,c.lastBaseUpdate=r}function jc(e,r,c,m){var w=e.updateQueue;Ls=!1;var T=w.firstBaseUpdate,P=w.lastBaseUpdate,z=w.shared.pending;if(z!==null){w.shared.pending=null;var J=z,le=J.next;J.next=null,P===null?T=le:P.next=le,P=J;var ye=e.alternate;ye!==null&&(ye=ye.updateQueue,z=ye.lastBaseUpdate,z!==P&&(z===null?ye.firstBaseUpdate=le:z.next=le,ye.lastBaseUpdate=J))}if(T!==null){var we=w.baseState;P=0,ye=le=J=null,z=T;do{var ge=z.lane,Ie=z.eventTime;if((m&ge)===ge){ye!==null&&(ye=ye.next={eventTime:Ie,lane:0,tag:z.tag,payload:z.payload,callback:z.callback,next:null});e:{var je=e,$e=z;switch(ge=r,Ie=c,$e.tag){case 1:if(je=$e.payload,typeof je=="function"){we=je.call(Ie,we,ge);break e}we=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=$e.payload,ge=typeof je=="function"?je.call(Ie,we,ge):je,ge==null)break e;we=ee({},we,ge);break e;case 2:Ls=!0}}z.callback!==null&&z.lane!==0&&(e.flags|=64,ge=w.effects,ge===null?w.effects=[z]:ge.push(z))}else Ie={eventTime:Ie,lane:ge,tag:z.tag,payload:z.payload,callback:z.callback,next:null},ye===null?(le=ye=Ie,J=we):ye=ye.next=Ie,P|=ge;if(z=z.next,z===null){if(z=w.shared.pending,z===null)break;ge=z,z=ge.next,ge.next=null,w.lastBaseUpdate=ge,w.shared.pending=null}}while(!0);if(ye===null&&(J=we),w.baseState=J,w.firstBaseUpdate=le,w.lastBaseUpdate=ye,r=w.shared.interleaved,r!==null){w=r;do P|=w.lane,w=w.next;while(w!==r)}else T===null&&(w.shared.lanes=0);wi|=P,e.lanes=P,e.memoizedState=we}}function lv(e,r,c){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var m=e[r],w=m.callback;if(w!==null){if(m.callback=null,m=c,typeof w!="function")throw Error(n(191,w));w.call(m)}}}var _a={},Ln=Ps(_a),Ra=Ps(_a),ka=Ps(_a);function vi(e){if(e===_a)throw Error(n(174));return e}function uf(e,r){switch(ht(ka,r),ht(Ra,e),ht(Ln,_a),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Rt(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=Rt(r,e)}yt(Ln),ht(Ln,r)}function Co(){yt(Ln),yt(Ra),yt(ka)}function cv(e){vi(ka.current);var r=vi(Ln.current),c=Rt(r,e.type);r!==c&&(ht(Ra,e),ht(Ln,c))}function df(e){Ra.current===e&&(yt(Ln),yt(Ra))}var bt=Ps(0);function Lc(e){for(var r=e;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ff=[];function hf(){for(var e=0;e<ff.length;e++)ff[e]._workInProgressVersionPrimary=null;ff.length=0}var Dc=R.ReactCurrentDispatcher,pf=R.ReactCurrentBatchConfig,Ei=0,Ct=null,qt=null,Kt=null,Mc=!1,Ia=!1,Aa=0,VT=0;function nr(){throw Error(n(321))}function mf(e,r){if(r===null)return!1;for(var c=0;c<r.length&&c<e.length;c++)if(!fn(e[c],r[c]))return!1;return!0}function gf(e,r,c,m,w,T){if(Ei=T,Ct=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Dc.current=e===null||e.memoizedState===null?XT:QT,e=c(m,w),Ia){T=0;do{if(Ia=!1,Aa=0,25<=T)throw Error(n(301));T+=1,Kt=qt=null,r.updateQueue=null,Dc.current=ZT,e=c(m,w)}while(Ia)}if(Dc.current=qc,r=qt!==null&&qt.next!==null,Ei=0,Kt=qt=Ct=null,Mc=!1,r)throw Error(n(300));return e}function yf(){var e=Aa!==0;return Aa=0,e}function Dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?Ct.memoizedState=Kt=e:Kt=Kt.next=e,Kt}function Xr(){if(qt===null){var e=Ct.alternate;e=e!==null?e.memoizedState:null}else e=qt.next;var r=Kt===null?Ct.memoizedState:Kt.next;if(r!==null)Kt=r,qt=e;else{if(e===null)throw Error(n(310));qt=e,e={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},Kt===null?Ct.memoizedState=Kt=e:Kt=Kt.next=e}return Kt}function Na(e,r){return typeof r=="function"?r(e):r}function vf(e){var r=Xr(),c=r.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=e;var m=qt,w=m.baseQueue,T=c.pending;if(T!==null){if(w!==null){var P=w.next;w.next=T.next,T.next=P}m.baseQueue=w=T,c.pending=null}if(w!==null){T=w.next,m=m.baseState;var z=P=null,J=null,le=T;do{var ye=le.lane;if((Ei&ye)===ye)J!==null&&(J=J.next={lane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),m=le.hasEagerState?le.eagerState:e(m,le.action);else{var we={lane:ye,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null};J===null?(z=J=we,P=m):J=J.next=we,Ct.lanes|=ye,wi|=ye}le=le.next}while(le!==null&&le!==T);J===null?P=m:J.next=z,fn(m,r.memoizedState)||(Rr=!0),r.memoizedState=m,r.baseState=P,r.baseQueue=J,c.lastRenderedState=m}if(e=c.interleaved,e!==null){w=e;do T=w.lane,Ct.lanes|=T,wi|=T,w=w.next;while(w!==e)}else w===null&&(c.lanes=0);return[r.memoizedState,c.dispatch]}function Ef(e){var r=Xr(),c=r.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=e;var m=c.dispatch,w=c.pending,T=r.memoizedState;if(w!==null){c.pending=null;var P=w=w.next;do T=e(T,P.action),P=P.next;while(P!==w);fn(T,r.memoizedState)||(Rr=!0),r.memoizedState=T,r.baseQueue===null&&(r.baseState=T),c.lastRenderedState=T}return[T,m]}function uv(){}function dv(e,r){var c=Ct,m=Xr(),w=r(),T=!fn(m.memoizedState,w);if(T&&(m.memoizedState=w,Rr=!0),m=m.queue,wf(pv.bind(null,c,m,e),[e]),m.getSnapshot!==r||T||Kt!==null&&Kt.memoizedState.tag&1){if(c.flags|=2048,Pa(9,hv.bind(null,c,m,w,r),void 0,null),Wt===null)throw Error(n(349));(Ei&30)!==0||fv(c,r,w)}return w}function fv(e,r,c){e.flags|=16384,e={getSnapshot:r,value:c},r=Ct.updateQueue,r===null?(r={lastEffect:null,stores:null},Ct.updateQueue=r,r.stores=[e]):(c=r.stores,c===null?r.stores=[e]:c.push(e))}function hv(e,r,c,m){r.value=c,r.getSnapshot=m,mv(r)&&gv(e)}function pv(e,r,c){return c(function(){mv(r)&&gv(e)})}function mv(e){var r=e.getSnapshot;e=e.value;try{var c=r();return!fn(e,c)}catch{return!0}}function gv(e){var r=ns(e,1);r!==null&&yn(r,e,1,-1)}function yv(e){var r=Dn();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:e},r.queue=e,e=e.dispatch=YT.bind(null,Ct,e),[r.memoizedState,e]}function Pa(e,r,c,m){return e={tag:e,create:r,destroy:c,deps:m,next:null},r=Ct.updateQueue,r===null?(r={lastEffect:null,stores:null},Ct.updateQueue=r,r.lastEffect=e.next=e):(c=r.lastEffect,c===null?r.lastEffect=e.next=e:(m=c.next,c.next=e,e.next=m,r.lastEffect=e)),e}function vv(){return Xr().memoizedState}function $c(e,r,c,m){var w=Dn();Ct.flags|=e,w.memoizedState=Pa(1|r,c,void 0,m===void 0?null:m)}function Uc(e,r,c,m){var w=Xr();m=m===void 0?null:m;var T=void 0;if(qt!==null){var P=qt.memoizedState;if(T=P.destroy,m!==null&&mf(m,P.deps)){w.memoizedState=Pa(r,c,T,m);return}}Ct.flags|=e,w.memoizedState=Pa(1|r,c,T,m)}function Ev(e,r){return $c(8390656,8,e,r)}function wf(e,r){return Uc(2048,8,e,r)}function wv(e,r){return Uc(4,2,e,r)}function Sv(e,r){return Uc(4,4,e,r)}function xv(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function bv(e,r,c){return c=c!=null?c.concat([e]):null,Uc(4,4,xv.bind(null,r,e),c)}function Sf(){}function Cv(e,r){var c=Xr();r=r===void 0?null:r;var m=c.memoizedState;return m!==null&&r!==null&&mf(r,m[1])?m[0]:(c.memoizedState=[e,r],e)}function Tv(e,r){var c=Xr();r=r===void 0?null:r;var m=c.memoizedState;return m!==null&&r!==null&&mf(r,m[1])?m[0]:(e=e(),c.memoizedState=[e,r],e)}function _v(e,r,c){return(Ei&21)===0?(e.baseState&&(e.baseState=!1,Rr=!0),e.memoizedState=c):(fn(c,r)||(c=oa(),Ct.lanes|=c,wi|=c,e.baseState=!0),r)}function GT(e,r){var c=ct;ct=c!==0&&4>c?c:4,e(!0);var m=pf.transition;pf.transition={};try{e(!1),r()}finally{ct=c,pf.transition=m}}function Rv(){return Xr().memoizedState}function JT(e,r,c){var m=qs(e);if(c={lane:m,action:c,hasEagerState:!1,eagerState:null,next:null},kv(e))Iv(r,c);else if(c=iv(e,r,c,m),c!==null){var w=hr();yn(c,e,m,w),Av(c,r,m)}}function YT(e,r,c){var m=qs(e),w={lane:m,action:c,hasEagerState:!1,eagerState:null,next:null};if(kv(e))Iv(r,w);else{var T=e.alternate;if(e.lanes===0&&(T===null||T.lanes===0)&&(T=r.lastRenderedReducer,T!==null))try{var P=r.lastRenderedState,z=T(P,c);if(w.hasEagerState=!0,w.eagerState=z,fn(z,P)){var J=r.interleaved;J===null?(w.next=w,lf(r)):(w.next=J.next,J.next=w),r.interleaved=w;return}}catch{}finally{}c=iv(e,r,w,m),c!==null&&(w=hr(),yn(c,e,m,w),Av(c,r,m))}}function kv(e){var r=e.alternate;return e===Ct||r!==null&&r===Ct}function Iv(e,r){Ia=Mc=!0;var c=e.pending;c===null?r.next=r:(r.next=c.next,c.next=r),e.pending=r}function Av(e,r,c){if((c&4194240)!==0){var m=r.lanes;m&=e.pendingLanes,c|=m,r.lanes=c,aa(e,c)}}var qc={readContext:Yr,useCallback:nr,useContext:nr,useEffect:nr,useImperativeHandle:nr,useInsertionEffect:nr,useLayoutEffect:nr,useMemo:nr,useReducer:nr,useRef:nr,useState:nr,useDebugValue:nr,useDeferredValue:nr,useTransition:nr,useMutableSource:nr,useSyncExternalStore:nr,useId:nr,unstable_isNewReconciler:!1},XT={readContext:Yr,useCallback:function(e,r){return Dn().memoizedState=[e,r===void 0?null:r],e},useContext:Yr,useEffect:Ev,useImperativeHandle:function(e,r,c){return c=c!=null?c.concat([e]):null,$c(4194308,4,xv.bind(null,r,e),c)},useLayoutEffect:function(e,r){return $c(4194308,4,e,r)},useInsertionEffect:function(e,r){return $c(4,2,e,r)},useMemo:function(e,r){var c=Dn();return r=r===void 0?null:r,e=e(),c.memoizedState=[e,r],e},useReducer:function(e,r,c){var m=Dn();return r=c!==void 0?c(r):r,m.memoizedState=m.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},m.queue=e,e=e.dispatch=JT.bind(null,Ct,e),[m.memoizedState,e]},useRef:function(e){var r=Dn();return e={current:e},r.memoizedState=e},useState:yv,useDebugValue:Sf,useDeferredValue:function(e){return Dn().memoizedState=e},useTransition:function(){var e=yv(!1),r=e[0];return e=GT.bind(null,e[1]),Dn().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,c){var m=Ct,w=Dn();if(Et){if(c===void 0)throw Error(n(407));c=c()}else{if(c=r(),Wt===null)throw Error(n(349));(Ei&30)!==0||fv(m,r,c)}w.memoizedState=c;var T={value:c,getSnapshot:r};return w.queue=T,Ev(pv.bind(null,m,T,e),[e]),m.flags|=2048,Pa(9,hv.bind(null,m,T,c,r),void 0,null),c},useId:function(){var e=Dn(),r=Wt.identifierPrefix;if(Et){var c=rs,m=ts;c=(m&~(1<<32-Mr(m)-1)).toString(32)+c,r=":"+r+"R"+c,c=Aa++,0<c&&(r+="H"+c.toString(32)),r+=":"}else c=VT++,r=":"+r+"r"+c.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},QT={readContext:Yr,useCallback:Cv,useContext:Yr,useEffect:wf,useImperativeHandle:bv,useInsertionEffect:wv,useLayoutEffect:Sv,useMemo:Tv,useReducer:vf,useRef:vv,useState:function(){return vf(Na)},useDebugValue:Sf,useDeferredValue:function(e){var r=Xr();return _v(r,qt.memoizedState,e)},useTransition:function(){var e=vf(Na)[0],r=Xr().memoizedState;return[e,r]},useMutableSource:uv,useSyncExternalStore:dv,useId:Rv,unstable_isNewReconciler:!1},ZT={readContext:Yr,useCallback:Cv,useContext:Yr,useEffect:wf,useImperativeHandle:bv,useInsertionEffect:wv,useLayoutEffect:Sv,useMemo:Tv,useReducer:Ef,useRef:vv,useState:function(){return Ef(Na)},useDebugValue:Sf,useDeferredValue:function(e){var r=Xr();return qt===null?r.memoizedState=e:_v(r,qt.memoizedState,e)},useTransition:function(){var e=Ef(Na)[0],r=Xr().memoizedState;return[e,r]},useMutableSource:uv,useSyncExternalStore:dv,useId:Rv,unstable_isNewReconciler:!1};function pn(e,r){if(e&&e.defaultProps){r=ee({},r),e=e.defaultProps;for(var c in e)r[c]===void 0&&(r[c]=e[c]);return r}return r}function xf(e,r,c,m){r=e.memoizedState,c=c(m,r),c=c==null?r:ee({},r,c),e.memoizedState=c,e.lanes===0&&(e.updateQueue.baseState=c)}var Fc={isMounted:function(e){return(e=e._reactInternals)?ln(e)===e:!1},enqueueSetState:function(e,r,c){e=e._reactInternals;var m=hr(),w=qs(e),T=ss(m,w);T.payload=r,c!=null&&(T.callback=c),r=Ds(e,T,w),r!==null&&(yn(r,e,w,m),Oc(r,e,w))},enqueueReplaceState:function(e,r,c){e=e._reactInternals;var m=hr(),w=qs(e),T=ss(m,w);T.tag=1,T.payload=r,c!=null&&(T.callback=c),r=Ds(e,T,w),r!==null&&(yn(r,e,w,m),Oc(r,e,w))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var c=hr(),m=qs(e),w=ss(c,m);w.tag=2,r!=null&&(w.callback=r),r=Ds(e,w,m),r!==null&&(yn(r,e,m,c),Oc(r,e,m))}};function Nv(e,r,c,m,w,T,P){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(m,T,P):r.prototype&&r.prototype.isPureReactComponent?!va(c,m)||!va(w,T):!0}function Pv(e,r,c){var m=!1,w=Os,T=r.contextType;return typeof T=="object"&&T!==null?T=Yr(T):(w=_r(r)?pi:rr.current,m=r.contextTypes,T=(m=m!=null)?yo(e,w):Os),r=new r(c,T),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Fc,e.stateNode=r,r._reactInternals=e,m&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=w,e.__reactInternalMemoizedMaskedChildContext=T),r}function Ov(e,r,c,m){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,m),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,m),r.state!==e&&Fc.enqueueReplaceState(r,r.state,null)}function bf(e,r,c,m){var w=e.stateNode;w.props=c,w.state=e.memoizedState,w.refs={},cf(e);var T=r.contextType;typeof T=="object"&&T!==null?w.context=Yr(T):(T=_r(r)?pi:rr.current,w.context=yo(e,T)),w.state=e.memoizedState,T=r.getDerivedStateFromProps,typeof T=="function"&&(xf(e,r,T,c),w.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(r=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),r!==w.state&&Fc.enqueueReplaceState(w,w.state,null),jc(e,c,w,m),w.state=e.memoizedState),typeof w.componentDidMount=="function"&&(e.flags|=4194308)}function To(e,r){try{var c="",m=r;do c+=he(m),m=m.return;while(m);var w=c}catch(T){w=`
Error generating stack: `+T.message+`
`+T.stack}return{value:e,source:r,stack:w,digest:null}}function Cf(e,r,c){return{value:e,source:null,stack:c??null,digest:r??null}}function Tf(e,r){try{console.error(r.value)}catch(c){setTimeout(function(){throw c})}}var e_=typeof WeakMap=="function"?WeakMap:Map;function jv(e,r,c){c=ss(-1,c),c.tag=3,c.payload={element:null};var m=r.value;return c.callback=function(){Gc||(Gc=!0,qf=m),Tf(e,r)},c}function Lv(e,r,c){c=ss(-1,c),c.tag=3;var m=e.type.getDerivedStateFromError;if(typeof m=="function"){var w=r.value;c.payload=function(){return m(w)},c.callback=function(){Tf(e,r)}}var T=e.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(c.callback=function(){Tf(e,r),typeof m!="function"&&($s===null?$s=new Set([this]):$s.add(this));var P=r.stack;this.componentDidCatch(r.value,{componentStack:P!==null?P:""})}),c}function Dv(e,r,c){var m=e.pingCache;if(m===null){m=e.pingCache=new e_;var w=new Set;m.set(r,w)}else w=m.get(r),w===void 0&&(w=new Set,m.set(r,w));w.has(c)||(w.add(c),e=p_.bind(null,e,r,c),r.then(e,e))}function Mv(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function $v(e,r,c,m,w){return(e.mode&1)===0?(e===r?e.flags|=65536:(e.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(r=ss(-1,1),r.tag=2,Ds(c,r,1))),c.lanes|=1),e):(e.flags|=65536,e.lanes=w,e)}var t_=R.ReactCurrentOwner,Rr=!1;function fr(e,r,c,m){r.child=e===null?sv(r,null,c,m):So(r,e.child,c,m)}function Uv(e,r,c,m,w){c=c.render;var T=r.ref;return bo(r,w),m=gf(e,r,c,m,T,w),c=yf(),e!==null&&!Rr?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~w,is(e,r,w)):(Et&&c&&Qd(r),r.flags|=1,fr(e,r,m,w),r.child)}function qv(e,r,c,m,w){if(e===null){var T=c.type;return typeof T=="function"&&!Vf(T)&&T.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(r.tag=15,r.type=T,Fv(e,r,T,m,w)):(e=eu(c.type,null,m,r,r.mode,w),e.ref=r.ref,e.return=r,r.child=e)}if(T=e.child,(e.lanes&w)===0){var P=T.memoizedProps;if(c=c.compare,c=c!==null?c:va,c(P,m)&&e.ref===r.ref)return is(e,r,w)}return r.flags|=1,e=Hs(T,m),e.ref=r.ref,e.return=r,r.child=e}function Fv(e,r,c,m,w){if(e!==null){var T=e.memoizedProps;if(va(T,m)&&e.ref===r.ref)if(Rr=!1,r.pendingProps=m=T,(e.lanes&w)!==0)(e.flags&131072)!==0&&(Rr=!0);else return r.lanes=e.lanes,is(e,r,w)}return _f(e,r,c,m,w)}function Hv(e,r,c){var m=r.pendingProps,w=m.children,T=e!==null?e.memoizedState:null;if(m.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},ht(Ro,Hr),Hr|=c;else{if((c&1073741824)===0)return e=T!==null?T.baseLanes|c:c,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,ht(Ro,Hr),Hr|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=T!==null?T.baseLanes:c,ht(Ro,Hr),Hr|=m}else T!==null?(m=T.baseLanes|c,r.memoizedState=null):m=c,ht(Ro,Hr),Hr|=m;return fr(e,r,w,c),r.child}function Bv(e,r){var c=r.ref;(e===null&&c!==null||e!==null&&e.ref!==c)&&(r.flags|=512,r.flags|=2097152)}function _f(e,r,c,m,w){var T=_r(c)?pi:rr.current;return T=yo(r,T),bo(r,w),c=gf(e,r,c,m,T,w),m=yf(),e!==null&&!Rr?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~w,is(e,r,w)):(Et&&m&&Qd(r),r.flags|=1,fr(e,r,c,w),r.child)}function zv(e,r,c,m,w){if(_r(c)){var T=!0;Tc(r)}else T=!1;if(bo(r,w),r.stateNode===null)Bc(e,r),Pv(r,c,m),bf(r,c,m,w),m=!0;else if(e===null){var P=r.stateNode,z=r.memoizedProps;P.props=z;var J=P.context,le=c.contextType;typeof le=="object"&&le!==null?le=Yr(le):(le=_r(c)?pi:rr.current,le=yo(r,le));var ye=c.getDerivedStateFromProps,we=typeof ye=="function"||typeof P.getSnapshotBeforeUpdate=="function";we||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(z!==m||J!==le)&&Ov(r,P,m,le),Ls=!1;var ge=r.memoizedState;P.state=ge,jc(r,m,P,w),J=r.memoizedState,z!==m||ge!==J||Tr.current||Ls?(typeof ye=="function"&&(xf(r,c,ye,m),J=r.memoizedState),(z=Ls||Nv(r,c,z,m,ge,J,le))?(we||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(r.flags|=4194308)):(typeof P.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=m,r.memoizedState=J),P.props=m,P.state=J,P.context=le,m=z):(typeof P.componentDidMount=="function"&&(r.flags|=4194308),m=!1)}else{P=r.stateNode,ov(e,r),z=r.memoizedProps,le=r.type===r.elementType?z:pn(r.type,z),P.props=le,we=r.pendingProps,ge=P.context,J=c.contextType,typeof J=="object"&&J!==null?J=Yr(J):(J=_r(c)?pi:rr.current,J=yo(r,J));var Ie=c.getDerivedStateFromProps;(ye=typeof Ie=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(z!==we||ge!==J)&&Ov(r,P,m,J),Ls=!1,ge=r.memoizedState,P.state=ge,jc(r,m,P,w);var je=r.memoizedState;z!==we||ge!==je||Tr.current||Ls?(typeof Ie=="function"&&(xf(r,c,Ie,m),je=r.memoizedState),(le=Ls||Nv(r,c,le,m,ge,je,J)||!1)?(ye||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(m,je,J),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(m,je,J)),typeof P.componentDidUpdate=="function"&&(r.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof P.componentDidUpdate!="function"||z===e.memoizedProps&&ge===e.memoizedState||(r.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||z===e.memoizedProps&&ge===e.memoizedState||(r.flags|=1024),r.memoizedProps=m,r.memoizedState=je),P.props=m,P.state=je,P.context=J,m=le):(typeof P.componentDidUpdate!="function"||z===e.memoizedProps&&ge===e.memoizedState||(r.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||z===e.memoizedProps&&ge===e.memoizedState||(r.flags|=1024),m=!1)}return Rf(e,r,c,m,T,w)}function Rf(e,r,c,m,w,T){Bv(e,r);var P=(r.flags&128)!==0;if(!m&&!P)return w&&Jy(r,c,!1),is(e,r,T);m=r.stateNode,t_.current=r;var z=P&&typeof c.getDerivedStateFromError!="function"?null:m.render();return r.flags|=1,e!==null&&P?(r.child=So(r,e.child,null,T),r.child=So(r,null,z,T)):fr(e,r,z,T),r.memoizedState=m.state,w&&Jy(r,c,!0),r.child}function Kv(e){var r=e.stateNode;r.pendingContext?Vy(e,r.pendingContext,r.pendingContext!==r.context):r.context&&Vy(e,r.context,!1),uf(e,r.containerInfo)}function Wv(e,r,c,m,w){return wo(),rf(w),r.flags|=256,fr(e,r,c,m),r.child}var kf={dehydrated:null,treeContext:null,retryLane:0};function If(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vv(e,r,c){var m=r.pendingProps,w=bt.current,T=!1,P=(r.flags&128)!==0,z;if((z=P)||(z=e!==null&&e.memoizedState===null?!1:(w&2)!==0),z?(T=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(w|=1),ht(bt,w&1),e===null)return tf(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((r.mode&1)===0?r.lanes=1:e.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(P=m.children,e=m.fallback,T?(m=r.mode,T=r.child,P={mode:"hidden",children:P},(m&1)===0&&T!==null?(T.childLanes=0,T.pendingProps=P):T=tu(P,m,0,null),e=Ci(e,m,c,null),T.return=r,e.return=r,T.sibling=e,r.child=T,r.child.memoizedState=If(c),r.memoizedState=kf,e):Af(r,P));if(w=e.memoizedState,w!==null&&(z=w.dehydrated,z!==null))return r_(e,r,P,m,z,w,c);if(T){T=m.fallback,P=r.mode,w=e.child,z=w.sibling;var J={mode:"hidden",children:m.children};return(P&1)===0&&r.child!==w?(m=r.child,m.childLanes=0,m.pendingProps=J,r.deletions=null):(m=Hs(w,J),m.subtreeFlags=w.subtreeFlags&14680064),z!==null?T=Hs(z,T):(T=Ci(T,P,c,null),T.flags|=2),T.return=r,m.return=r,m.sibling=T,r.child=m,m=T,T=r.child,P=e.child.memoizedState,P=P===null?If(c):{baseLanes:P.baseLanes|c,cachePool:null,transitions:P.transitions},T.memoizedState=P,T.childLanes=e.childLanes&~c,r.memoizedState=kf,m}return T=e.child,e=T.sibling,m=Hs(T,{mode:"visible",children:m.children}),(r.mode&1)===0&&(m.lanes=c),m.return=r,m.sibling=null,e!==null&&(c=r.deletions,c===null?(r.deletions=[e],r.flags|=16):c.push(e)),r.child=m,r.memoizedState=null,m}function Af(e,r){return r=tu({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function Hc(e,r,c,m){return m!==null&&rf(m),So(r,e.child,null,c),e=Af(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function r_(e,r,c,m,w,T,P){if(c)return r.flags&256?(r.flags&=-257,m=Cf(Error(n(422))),Hc(e,r,P,m)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(T=m.fallback,w=r.mode,m=tu({mode:"visible",children:m.children},w,0,null),T=Ci(T,w,P,null),T.flags|=2,m.return=r,T.return=r,m.sibling=T,r.child=m,(r.mode&1)!==0&&So(r,e.child,null,P),r.child.memoizedState=If(P),r.memoizedState=kf,T);if((r.mode&1)===0)return Hc(e,r,P,null);if(w.data==="$!"){if(m=w.nextSibling&&w.nextSibling.dataset,m)var z=m.dgst;return m=z,T=Error(n(419)),m=Cf(T,m,void 0),Hc(e,r,P,m)}if(z=(P&e.childLanes)!==0,Rr||z){if(m=Wt,m!==null){switch(P&-P){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(m.suspendedLanes|P))!==0?0:w,w!==0&&w!==T.retryLane&&(T.retryLane=w,ns(e,w),yn(m,e,w,-1))}return Wf(),m=Cf(Error(n(421))),Hc(e,r,P,m)}return w.data==="$?"?(r.flags|=128,r.child=e.child,r=m_.bind(null,e),w._reactRetry=r,null):(e=T.treeContext,Fr=Ns(w.nextSibling),qr=r,Et=!0,hn=null,e!==null&&(Gr[Jr++]=ts,Gr[Jr++]=rs,Gr[Jr++]=mi,ts=e.id,rs=e.overflow,mi=r),r=Af(r,m.children),r.flags|=4096,r)}function Gv(e,r,c){e.lanes|=r;var m=e.alternate;m!==null&&(m.lanes|=r),af(e.return,r,c)}function Nf(e,r,c,m,w){var T=e.memoizedState;T===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:w}:(T.isBackwards=r,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=c,T.tailMode=w)}function Jv(e,r,c){var m=r.pendingProps,w=m.revealOrder,T=m.tail;if(fr(e,r,m.children,c),m=bt.current,(m&2)!==0)m=m&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gv(e,c,r);else if(e.tag===19)Gv(e,c,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}m&=1}if(ht(bt,m),(r.mode&1)===0)r.memoizedState=null;else switch(w){case"forwards":for(c=r.child,w=null;c!==null;)e=c.alternate,e!==null&&Lc(e)===null&&(w=c),c=c.sibling;c=w,c===null?(w=r.child,r.child=null):(w=c.sibling,c.sibling=null),Nf(r,!1,w,c,T);break;case"backwards":for(c=null,w=r.child,r.child=null;w!==null;){if(e=w.alternate,e!==null&&Lc(e)===null){r.child=w;break}e=w.sibling,w.sibling=c,c=w,w=e}Nf(r,!0,c,null,T);break;case"together":Nf(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Bc(e,r){(r.mode&1)===0&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function is(e,r,c){if(e!==null&&(r.dependencies=e.dependencies),wi|=r.lanes,(c&r.childLanes)===0)return null;if(e!==null&&r.child!==e.child)throw Error(n(153));if(r.child!==null){for(e=r.child,c=Hs(e,e.pendingProps),r.child=c,c.return=r;e.sibling!==null;)e=e.sibling,c=c.sibling=Hs(e,e.pendingProps),c.return=r;c.sibling=null}return r.child}function n_(e,r,c){switch(r.tag){case 3:Kv(r),wo();break;case 5:cv(r);break;case 1:_r(r.type)&&Tc(r);break;case 4:uf(r,r.stateNode.containerInfo);break;case 10:var m=r.type._context,w=r.memoizedProps.value;ht(Nc,m._currentValue),m._currentValue=w;break;case 13:if(m=r.memoizedState,m!==null)return m.dehydrated!==null?(ht(bt,bt.current&1),r.flags|=128,null):(c&r.child.childLanes)!==0?Vv(e,r,c):(ht(bt,bt.current&1),e=is(e,r,c),e!==null?e.sibling:null);ht(bt,bt.current&1);break;case 19:if(m=(c&r.childLanes)!==0,(e.flags&128)!==0){if(m)return Jv(e,r,c);r.flags|=128}if(w=r.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),ht(bt,bt.current),m)break;return null;case 22:case 23:return r.lanes=0,Hv(e,r,c)}return is(e,r,c)}var Yv,Pf,Xv,Qv;Yv=function(e,r){for(var c=r.child;c!==null;){if(c.tag===5||c.tag===6)e.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===r)break;for(;c.sibling===null;){if(c.return===null||c.return===r)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Pf=function(){},Xv=function(e,r,c,m){var w=e.memoizedProps;if(w!==m){e=r.stateNode,vi(Ln.current);var T=null;switch(c){case"input":w=Ee(e,w),m=Ee(e,m),T=[];break;case"select":w=ee({},w,{value:void 0}),m=ee({},m,{value:void 0}),T=[];break;case"textarea":w=Mt(e,w),m=Mt(e,m),T=[];break;default:typeof w.onClick!="function"&&typeof m.onClick=="function"&&(e.onclick=xc)}Vn(c,m);var P;c=null;for(le in w)if(!m.hasOwnProperty(le)&&w.hasOwnProperty(le)&&w[le]!=null)if(le==="style"){var z=w[le];for(P in z)z.hasOwnProperty(P)&&(c||(c={}),c[P]="")}else le!=="dangerouslySetInnerHTML"&&le!=="children"&&le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&le!=="autoFocus"&&(a.hasOwnProperty(le)?T||(T=[]):(T=T||[]).push(le,null));for(le in m){var J=m[le];if(z=w?.[le],m.hasOwnProperty(le)&&J!==z&&(J!=null||z!=null))if(le==="style")if(z){for(P in z)!z.hasOwnProperty(P)||J&&J.hasOwnProperty(P)||(c||(c={}),c[P]="");for(P in J)J.hasOwnProperty(P)&&z[P]!==J[P]&&(c||(c={}),c[P]=J[P])}else c||(T||(T=[]),T.push(le,c)),c=J;else le==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,z=z?z.__html:void 0,J!=null&&z!==J&&(T=T||[]).push(le,J)):le==="children"?typeof J!="string"&&typeof J!="number"||(T=T||[]).push(le,""+J):le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&(a.hasOwnProperty(le)?(J!=null&&le==="onScroll"&&gt("scroll",e),T||z===J||(T=[])):(T=T||[]).push(le,J))}c&&(T=T||[]).push("style",c);var le=T;(r.updateQueue=le)&&(r.flags|=4)}},Qv=function(e,r,c,m){c!==m&&(r.flags|=4)};function Oa(e,r){if(!Et)switch(e.tailMode){case"hidden":r=e.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?e.tail=null:c.sibling=null;break;case"collapsed":c=e.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:m.sibling=null}}function sr(e){var r=e.alternate!==null&&e.alternate.child===e.child,c=0,m=0;if(r)for(var w=e.child;w!==null;)c|=w.lanes|w.childLanes,m|=w.subtreeFlags&14680064,m|=w.flags&14680064,w.return=e,w=w.sibling;else for(w=e.child;w!==null;)c|=w.lanes|w.childLanes,m|=w.subtreeFlags,m|=w.flags,w.return=e,w=w.sibling;return e.subtreeFlags|=m,e.childLanes=c,r}function s_(e,r,c){var m=r.pendingProps;switch(Zd(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sr(r),null;case 1:return _r(r.type)&&Cc(),sr(r),null;case 3:return m=r.stateNode,Co(),yt(Tr),yt(rr),hf(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(e===null||e.child===null)&&(Ic(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,hn!==null&&(Bf(hn),hn=null))),Pf(e,r),sr(r),null;case 5:df(r);var w=vi(ka.current);if(c=r.type,e!==null&&r.stateNode!=null)Xv(e,r,c,m,w),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!m){if(r.stateNode===null)throw Error(n(166));return sr(r),null}if(e=vi(Ln.current),Ic(r)){m=r.stateNode,c=r.type;var T=r.memoizedProps;switch(m[jn]=r,m[ba]=T,e=(r.mode&1)!==0,c){case"dialog":gt("cancel",m),gt("close",m);break;case"iframe":case"object":case"embed":gt("load",m);break;case"video":case"audio":for(w=0;w<wa.length;w++)gt(wa[w],m);break;case"source":gt("error",m);break;case"img":case"image":case"link":gt("error",m),gt("load",m);break;case"details":gt("toggle",m);break;case"input":tt(m,T),gt("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!T.multiple},gt("invalid",m);break;case"textarea":zr(m,T),gt("invalid",m)}Vn(c,T),w=null;for(var P in T)if(T.hasOwnProperty(P)){var z=T[P];P==="children"?typeof z=="string"?m.textContent!==z&&(T.suppressHydrationWarning!==!0&&Sc(m.textContent,z,e),w=["children",z]):typeof z=="number"&&m.textContent!==""+z&&(T.suppressHydrationWarning!==!0&&Sc(m.textContent,z,e),w=["children",""+z]):a.hasOwnProperty(P)&&z!=null&&P==="onScroll"&&gt("scroll",m)}switch(c){case"input":ft(m),ei(m,T,!0);break;case"textarea":ft(m),ra(m);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(m.onclick=xc)}m=w,r.updateQueue=m,m!==null&&(r.flags|=4)}else{P=w.nodeType===9?w:w.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ae(c)),e==="http://www.w3.org/1999/xhtml"?c==="script"?(e=P.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof m.is=="string"?e=P.createElement(c,{is:m.is}):(e=P.createElement(c),c==="select"&&(P=e,m.multiple?P.multiple=!0:m.size&&(P.size=m.size))):e=P.createElementNS(e,c),e[jn]=r,e[ba]=m,Yv(e,r,!1,!1),r.stateNode=e;e:{switch(P=Gn(c,m),c){case"dialog":gt("cancel",e),gt("close",e),w=m;break;case"iframe":case"object":case"embed":gt("load",e),w=m;break;case"video":case"audio":for(w=0;w<wa.length;w++)gt(wa[w],e);w=m;break;case"source":gt("error",e),w=m;break;case"img":case"image":case"link":gt("error",e),gt("load",e),w=m;break;case"details":gt("toggle",e),w=m;break;case"input":tt(e,m),w=Ee(e,m),gt("invalid",e);break;case"option":w=m;break;case"select":e._wrapperState={wasMultiple:!!m.multiple},w=ee({},m,{value:void 0}),gt("invalid",e);break;case"textarea":zr(e,m),w=Mt(e,m),gt("invalid",e);break;default:w=m}Vn(c,w),z=w;for(T in z)if(z.hasOwnProperty(T)){var J=z[T];T==="style"?Ji(e,J):T==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,J!=null&&Es(e,J)):T==="children"?typeof J=="string"?(c!=="textarea"||J!=="")&&er(e,J):typeof J=="number"&&er(e,""+J):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(a.hasOwnProperty(T)?J!=null&&T==="onScroll"&&gt("scroll",e):J!=null&&_(e,T,J,P))}switch(c){case"input":ft(e),ei(e,m,!1);break;case"textarea":ft(e),ra(e);break;case"option":m.value!=null&&e.setAttribute("value",""+ue(m.value));break;case"select":e.multiple=!!m.multiple,T=m.value,T!=null?Cn(e,!!m.multiple,T,!1):m.defaultValue!=null&&Cn(e,!!m.multiple,m.defaultValue,!0);break;default:typeof w.onClick=="function"&&(e.onclick=xc)}switch(c){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return sr(r),null;case 6:if(e&&r.stateNode!=null)Qv(e,r,e.memoizedProps,m);else{if(typeof m!="string"&&r.stateNode===null)throw Error(n(166));if(c=vi(ka.current),vi(Ln.current),Ic(r)){if(m=r.stateNode,c=r.memoizedProps,m[jn]=r,(T=m.nodeValue!==c)&&(e=qr,e!==null))switch(e.tag){case 3:Sc(m.nodeValue,c,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Sc(m.nodeValue,c,(e.mode&1)!==0)}T&&(r.flags|=4)}else m=(c.nodeType===9?c:c.ownerDocument).createTextNode(m),m[jn]=r,r.stateNode=m}return sr(r),null;case 13:if(yt(bt),m=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Et&&Fr!==null&&(r.mode&1)!==0&&(r.flags&128)===0)tv(),wo(),r.flags|=98560,T=!1;else if(T=Ic(r),m!==null&&m.dehydrated!==null){if(e===null){if(!T)throw Error(n(318));if(T=r.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(n(317));T[jn]=r}else wo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;sr(r),T=!1}else hn!==null&&(Bf(hn),hn=null),T=!0;if(!T)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=c,r):(m=m!==null,m!==(e!==null&&e.memoizedState!==null)&&m&&(r.child.flags|=8192,(r.mode&1)!==0&&(e===null||(bt.current&1)!==0?Ft===0&&(Ft=3):Wf())),r.updateQueue!==null&&(r.flags|=4),sr(r),null);case 4:return Co(),Pf(e,r),e===null&&Sa(r.stateNode.containerInfo),sr(r),null;case 10:return of(r.type._context),sr(r),null;case 17:return _r(r.type)&&Cc(),sr(r),null;case 19:if(yt(bt),T=r.memoizedState,T===null)return sr(r),null;if(m=(r.flags&128)!==0,P=T.rendering,P===null)if(m)Oa(T,!1);else{if(Ft!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(P=Lc(e),P!==null){for(r.flags|=128,Oa(T,!1),m=P.updateQueue,m!==null&&(r.updateQueue=m,r.flags|=4),r.subtreeFlags=0,m=c,c=r.child;c!==null;)T=c,e=m,T.flags&=14680066,P=T.alternate,P===null?(T.childLanes=0,T.lanes=e,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=P.childLanes,T.lanes=P.lanes,T.child=P.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=P.memoizedProps,T.memoizedState=P.memoizedState,T.updateQueue=P.updateQueue,T.type=P.type,e=P.dependencies,T.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),c=c.sibling;return ht(bt,bt.current&1|2),r.child}e=e.sibling}T.tail!==null&&St()>ko&&(r.flags|=128,m=!0,Oa(T,!1),r.lanes=4194304)}else{if(!m)if(e=Lc(P),e!==null){if(r.flags|=128,m=!0,c=e.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),Oa(T,!0),T.tail===null&&T.tailMode==="hidden"&&!P.alternate&&!Et)return sr(r),null}else 2*St()-T.renderingStartTime>ko&&c!==1073741824&&(r.flags|=128,m=!0,Oa(T,!1),r.lanes=4194304);T.isBackwards?(P.sibling=r.child,r.child=P):(c=T.last,c!==null?c.sibling=P:r.child=P,T.last=P)}return T.tail!==null?(r=T.tail,T.rendering=r,T.tail=r.sibling,T.renderingStartTime=St(),r.sibling=null,c=bt.current,ht(bt,m?c&1|2:c&1),r):(sr(r),null);case 22:case 23:return Kf(),m=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==m&&(r.flags|=8192),m&&(r.mode&1)!==0?(Hr&1073741824)!==0&&(sr(r),r.subtreeFlags&6&&(r.flags|=8192)):sr(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function i_(e,r){switch(Zd(r),r.tag){case 1:return _r(r.type)&&Cc(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return Co(),yt(Tr),yt(rr),hf(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 5:return df(r),null;case 13:if(yt(bt),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(n(340));wo()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return yt(bt),null;case 4:return Co(),null;case 10:return of(r.type._context),null;case 22:case 23:return Kf(),null;case 24:return null;default:return null}}var zc=!1,ir=!1,o_=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function _o(e,r){var c=e.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(m){_t(e,r,m)}else c.current=null}function Of(e,r,c){try{c()}catch(m){_t(e,r,m)}}var Zv=!1;function a_(e,r){if(zd=Yn,e=Ny(),Dd(e)){if("selectionStart"in e)var c={start:e.selectionStart,end:e.selectionEnd};else e:{c=(c=e.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var w=m.anchorOffset,T=m.focusNode;m=m.focusOffset;try{c.nodeType,T.nodeType}catch{c=null;break e}var P=0,z=-1,J=-1,le=0,ye=0,we=e,ge=null;t:for(;;){for(var Ie;we!==c||w!==0&&we.nodeType!==3||(z=P+w),we!==T||m!==0&&we.nodeType!==3||(J=P+m),we.nodeType===3&&(P+=we.nodeValue.length),(Ie=we.firstChild)!==null;)ge=we,we=Ie;for(;;){if(we===e)break t;if(ge===c&&++le===w&&(z=P),ge===T&&++ye===m&&(J=P),(Ie=we.nextSibling)!==null)break;we=ge,ge=we.parentNode}we=Ie}c=z===-1||J===-1?null:{start:z,end:J}}else c=null}c=c||{start:0,end:0}}else c=null;for(Kd={focusedElem:e,selectionRange:c},Yn=!1,Pe=r;Pe!==null;)if(r=Pe,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,Pe=e;else for(;Pe!==null;){r=Pe;try{var je=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(je!==null){var $e=je.memoizedProps,It=je.memoizedState,se=r.stateNode,Q=se.getSnapshotBeforeUpdate(r.elementType===r.type?$e:pn(r.type,$e),It);se.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var oe=r.stateNode.containerInfo;oe.nodeType===1?oe.textContent="":oe.nodeType===9&&oe.documentElement&&oe.removeChild(oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(xe){_t(r,r.return,xe)}if(e=r.sibling,e!==null){e.return=r.return,Pe=e;break}Pe=r.return}return je=Zv,Zv=!1,je}function ja(e,r,c){var m=r.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var w=m=m.next;do{if((w.tag&e)===e){var T=w.destroy;w.destroy=void 0,T!==void 0&&Of(r,c,T)}w=w.next}while(w!==m)}}function Kc(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var c=r=r.next;do{if((c.tag&e)===e){var m=c.create;c.destroy=m()}c=c.next}while(c!==r)}}function jf(e){var r=e.ref;if(r!==null){var c=e.stateNode;switch(e.tag){case 5:e=c;break;default:e=c}typeof r=="function"?r(e):r.current=e}}function eE(e){var r=e.alternate;r!==null&&(e.alternate=null,eE(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[jn],delete r[ba],delete r[Jd],delete r[BT],delete r[zT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function tE(e){return e.tag===5||e.tag===3||e.tag===4}function rE(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||tE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Lf(e,r,c){var m=e.tag;if(m===5||m===6)e=e.stateNode,r?c.nodeType===8?c.parentNode.insertBefore(e,r):c.insertBefore(e,r):(c.nodeType===8?(r=c.parentNode,r.insertBefore(e,c)):(r=c,r.appendChild(e)),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=xc));else if(m!==4&&(e=e.child,e!==null))for(Lf(e,r,c),e=e.sibling;e!==null;)Lf(e,r,c),e=e.sibling}function Df(e,r,c){var m=e.tag;if(m===5||m===6)e=e.stateNode,r?c.insertBefore(e,r):c.appendChild(e);else if(m!==4&&(e=e.child,e!==null))for(Df(e,r,c),e=e.sibling;e!==null;)Df(e,r,c),e=e.sibling}var Qt=null,mn=!1;function Ms(e,r,c){for(c=c.child;c!==null;)nE(e,r,c),c=c.sibling}function nE(e,r,c){if(Vr&&typeof Vr.onCommitFiberUnmount=="function")try{Vr.onCommitFiberUnmount(si,c)}catch{}switch(c.tag){case 5:ir||_o(c,r);case 6:var m=Qt,w=mn;Qt=null,Ms(e,r,c),Qt=m,mn=w,Qt!==null&&(mn?(e=Qt,c=c.stateNode,e.nodeType===8?e.parentNode.removeChild(c):e.removeChild(c)):Qt.removeChild(c.stateNode));break;case 18:Qt!==null&&(mn?(e=Qt,c=c.stateNode,e.nodeType===8?Gd(e.parentNode,c):e.nodeType===1&&Gd(e,c),An(e)):Gd(Qt,c.stateNode));break;case 4:m=Qt,w=mn,Qt=c.stateNode.containerInfo,mn=!0,Ms(e,r,c),Qt=m,mn=w;break;case 0:case 11:case 14:case 15:if(!ir&&(m=c.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){w=m=m.next;do{var T=w,P=T.destroy;T=T.tag,P!==void 0&&((T&2)!==0||(T&4)!==0)&&Of(c,r,P),w=w.next}while(w!==m)}Ms(e,r,c);break;case 1:if(!ir&&(_o(c,r),m=c.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=c.memoizedProps,m.state=c.memoizedState,m.componentWillUnmount()}catch(z){_t(c,r,z)}Ms(e,r,c);break;case 21:Ms(e,r,c);break;case 22:c.mode&1?(ir=(m=ir)||c.memoizedState!==null,Ms(e,r,c),ir=m):Ms(e,r,c);break;default:Ms(e,r,c)}}function sE(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var c=e.stateNode;c===null&&(c=e.stateNode=new o_),r.forEach(function(m){var w=g_.bind(null,e,m);c.has(m)||(c.add(m),m.then(w,w))})}}function gn(e,r){var c=r.deletions;if(c!==null)for(var m=0;m<c.length;m++){var w=c[m];try{var T=e,P=r,z=P;e:for(;z!==null;){switch(z.tag){case 5:Qt=z.stateNode,mn=!1;break e;case 3:Qt=z.stateNode.containerInfo,mn=!0;break e;case 4:Qt=z.stateNode.containerInfo,mn=!0;break e}z=z.return}if(Qt===null)throw Error(n(160));nE(T,P,w),Qt=null,mn=!1;var J=w.alternate;J!==null&&(J.return=null),w.return=null}catch(le){_t(w,r,le)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)iE(r,e),r=r.sibling}function iE(e,r){var c=e.alternate,m=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gn(r,e),Mn(e),m&4){try{ja(3,e,e.return),Kc(3,e)}catch($e){_t(e,e.return,$e)}try{ja(5,e,e.return)}catch($e){_t(e,e.return,$e)}}break;case 1:gn(r,e),Mn(e),m&512&&c!==null&&_o(c,c.return);break;case 5:if(gn(r,e),Mn(e),m&512&&c!==null&&_o(c,c.return),e.flags&32){var w=e.stateNode;try{er(w,"")}catch($e){_t(e,e.return,$e)}}if(m&4&&(w=e.stateNode,w!=null)){var T=e.memoizedProps,P=c!==null?c.memoizedProps:T,z=e.type,J=e.updateQueue;if(e.updateQueue=null,J!==null)try{z==="input"&&T.type==="radio"&&T.name!=null&&st(w,T),Gn(z,P);var le=Gn(z,T);for(P=0;P<J.length;P+=2){var ye=J[P],we=J[P+1];ye==="style"?Ji(w,we):ye==="dangerouslySetInnerHTML"?Es(w,we):ye==="children"?er(w,we):_(w,ye,we,le)}switch(z){case"input":lt(w,T);break;case"textarea":Vi(w,T);break;case"select":var ge=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!T.multiple;var Ie=T.value;Ie!=null?Cn(w,!!T.multiple,Ie,!1):ge!==!!T.multiple&&(T.defaultValue!=null?Cn(w,!!T.multiple,T.defaultValue,!0):Cn(w,!!T.multiple,T.multiple?[]:"",!1))}w[ba]=T}catch($e){_t(e,e.return,$e)}}break;case 6:if(gn(r,e),Mn(e),m&4){if(e.stateNode===null)throw Error(n(162));w=e.stateNode,T=e.memoizedProps;try{w.nodeValue=T}catch($e){_t(e,e.return,$e)}}break;case 3:if(gn(r,e),Mn(e),m&4&&c!==null&&c.memoizedState.isDehydrated)try{An(r.containerInfo)}catch($e){_t(e,e.return,$e)}break;case 4:gn(r,e),Mn(e);break;case 13:gn(r,e),Mn(e),w=e.child,w.flags&8192&&(T=w.memoizedState!==null,w.stateNode.isHidden=T,!T||w.alternate!==null&&w.alternate.memoizedState!==null||(Uf=St())),m&4&&sE(e);break;case 22:if(ye=c!==null&&c.memoizedState!==null,e.mode&1?(ir=(le=ir)||ye,gn(r,e),ir=le):gn(r,e),Mn(e),m&8192){if(le=e.memoizedState!==null,(e.stateNode.isHidden=le)&&!ye&&(e.mode&1)!==0)for(Pe=e,ye=e.child;ye!==null;){for(we=Pe=ye;Pe!==null;){switch(ge=Pe,Ie=ge.child,ge.tag){case 0:case 11:case 14:case 15:ja(4,ge,ge.return);break;case 1:_o(ge,ge.return);var je=ge.stateNode;if(typeof je.componentWillUnmount=="function"){m=ge,c=ge.return;try{r=m,je.props=r.memoizedProps,je.state=r.memoizedState,je.componentWillUnmount()}catch($e){_t(m,c,$e)}}break;case 5:_o(ge,ge.return);break;case 22:if(ge.memoizedState!==null){lE(we);continue}}Ie!==null?(Ie.return=ge,Pe=Ie):lE(we)}ye=ye.sibling}e:for(ye=null,we=e;;){if(we.tag===5){if(ye===null){ye=we;try{w=we.stateNode,le?(T=w.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(z=we.stateNode,J=we.memoizedProps.style,P=J!=null&&J.hasOwnProperty("display")?J.display:null,z.style.display=Gi("display",P))}catch($e){_t(e,e.return,$e)}}}else if(we.tag===6){if(ye===null)try{we.stateNode.nodeValue=le?"":we.memoizedProps}catch($e){_t(e,e.return,$e)}}else if((we.tag!==22&&we.tag!==23||we.memoizedState===null||we===e)&&we.child!==null){we.child.return=we,we=we.child;continue}if(we===e)break e;for(;we.sibling===null;){if(we.return===null||we.return===e)break e;ye===we&&(ye=null),we=we.return}ye===we&&(ye=null),we.sibling.return=we.return,we=we.sibling}}break;case 19:gn(r,e),Mn(e),m&4&&sE(e);break;case 21:break;default:gn(r,e),Mn(e)}}function Mn(e){var r=e.flags;if(r&2){try{e:{for(var c=e.return;c!==null;){if(tE(c)){var m=c;break e}c=c.return}throw Error(n(160))}switch(m.tag){case 5:var w=m.stateNode;m.flags&32&&(er(w,""),m.flags&=-33);var T=rE(e);Df(e,T,w);break;case 3:case 4:var P=m.stateNode.containerInfo,z=rE(e);Lf(e,z,P);break;default:throw Error(n(161))}}catch(J){_t(e,e.return,J)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function l_(e,r,c){Pe=e,oE(e)}function oE(e,r,c){for(var m=(e.mode&1)!==0;Pe!==null;){var w=Pe,T=w.child;if(w.tag===22&&m){var P=w.memoizedState!==null||zc;if(!P){var z=w.alternate,J=z!==null&&z.memoizedState!==null||ir;z=zc;var le=ir;if(zc=P,(ir=J)&&!le)for(Pe=w;Pe!==null;)P=Pe,J=P.child,P.tag===22&&P.memoizedState!==null?cE(w):J!==null?(J.return=P,Pe=J):cE(w);for(;T!==null;)Pe=T,oE(T),T=T.sibling;Pe=w,zc=z,ir=le}aE(e)}else(w.subtreeFlags&8772)!==0&&T!==null?(T.return=w,Pe=T):aE(e)}}function aE(e){for(;Pe!==null;){var r=Pe;if((r.flags&8772)!==0){var c=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:ir||Kc(5,r);break;case 1:var m=r.stateNode;if(r.flags&4&&!ir)if(c===null)m.componentDidMount();else{var w=r.elementType===r.type?c.memoizedProps:pn(r.type,c.memoizedProps);m.componentDidUpdate(w,c.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var T=r.updateQueue;T!==null&&lv(r,T,m);break;case 3:var P=r.updateQueue;if(P!==null){if(c=null,r.child!==null)switch(r.child.tag){case 5:c=r.child.stateNode;break;case 1:c=r.child.stateNode}lv(r,P,c)}break;case 5:var z=r.stateNode;if(c===null&&r.flags&4){c=z;var J=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":J.autoFocus&&c.focus();break;case"img":J.src&&(c.src=J.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var le=r.alternate;if(le!==null){var ye=le.memoizedState;if(ye!==null){var we=ye.dehydrated;we!==null&&An(we)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}ir||r.flags&512&&jf(r)}catch(ge){_t(r,r.return,ge)}}if(r===e){Pe=null;break}if(c=r.sibling,c!==null){c.return=r.return,Pe=c;break}Pe=r.return}}function lE(e){for(;Pe!==null;){var r=Pe;if(r===e){Pe=null;break}var c=r.sibling;if(c!==null){c.return=r.return,Pe=c;break}Pe=r.return}}function cE(e){for(;Pe!==null;){var r=Pe;try{switch(r.tag){case 0:case 11:case 15:var c=r.return;try{Kc(4,r)}catch(J){_t(r,c,J)}break;case 1:var m=r.stateNode;if(typeof m.componentDidMount=="function"){var w=r.return;try{m.componentDidMount()}catch(J){_t(r,w,J)}}var T=r.return;try{jf(r)}catch(J){_t(r,T,J)}break;case 5:var P=r.return;try{jf(r)}catch(J){_t(r,P,J)}}}catch(J){_t(r,r.return,J)}if(r===e){Pe=null;break}var z=r.sibling;if(z!==null){z.return=r.return,Pe=z;break}Pe=r.return}}var c_=Math.ceil,Wc=R.ReactCurrentDispatcher,Mf=R.ReactCurrentOwner,Qr=R.ReactCurrentBatchConfig,it=0,Wt=null,Lt=null,Zt=0,Hr=0,Ro=Ps(0),Ft=0,La=null,wi=0,Vc=0,$f=0,Da=null,kr=null,Uf=0,ko=1/0,os=null,Gc=!1,qf=null,$s=null,Jc=!1,Us=null,Yc=0,Ma=0,Ff=null,Xc=-1,Qc=0;function hr(){return(it&6)!==0?St():Xc!==-1?Xc:Xc=St()}function qs(e){return(e.mode&1)===0?1:(it&2)!==0&&Zt!==0?Zt&-Zt:WT.transition!==null?(Qc===0&&(Qc=oa()),Qc):(e=ct,e!==0||(e=window.event,e=e===void 0?16:oo(e.type)),e)}function yn(e,r,c,m){if(50<Ma)throw Ma=0,Ff=null,Error(n(185));oi(e,c,m),((it&2)===0||e!==Wt)&&(e===Wt&&((it&2)===0&&(Vc|=c),Ft===4&&Fs(e,Zt)),Ir(e,m),c===1&&it===0&&(r.mode&1)===0&&(ko=St()+500,_c&&js()))}function Ir(e,r){var c=e.callbackNode;sc(e,r);var m=to(e,e===Wt?Zt:0);if(m===0)c!==null&&ec(c),e.callbackNode=null,e.callbackPriority=0;else if(r=m&-m,e.callbackPriority!==r){if(c!=null&&ec(c),r===1)e.tag===0?KT(dE.bind(null,e)):Yy(dE.bind(null,e)),FT(function(){(it&6)===0&&js()}),c=null;else{switch(oc(m)){case 1:c=ur;break;case 4:c=Xi;break;case 16:c=ni;break;case 536870912:c=bs;break;default:c=ni}c=EE(c,uE.bind(null,e))}e.callbackPriority=r,e.callbackNode=c}}function uE(e,r){if(Xc=-1,Qc=0,(it&6)!==0)throw Error(n(327));var c=e.callbackNode;if(Io()&&e.callbackNode!==c)return null;var m=to(e,e===Wt?Zt:0);if(m===0)return null;if((m&30)!==0||(m&e.expiredLanes)!==0||r)r=Zc(e,m);else{r=m;var w=it;it|=2;var T=hE();(Wt!==e||Zt!==r)&&(os=null,ko=St()+500,xi(e,r));do try{f_();break}catch(z){fE(e,z)}while(!0);sf(),Wc.current=T,it=w,Lt!==null?r=0:(Wt=null,Zt=0,r=Ft)}if(r!==0){if(r===2&&(w=cn(e),w!==0&&(m=w,r=Hf(e,w))),r===1)throw c=La,xi(e,0),Fs(e,m),Ir(e,St()),c;if(r===6)Fs(e,m);else{if(w=e.current.alternate,(m&30)===0&&!u_(w)&&(r=Zc(e,m),r===2&&(T=cn(e),T!==0&&(m=T,r=Hf(e,T))),r===1))throw c=La,xi(e,0),Fs(e,m),Ir(e,St()),c;switch(e.finishedWork=w,e.finishedLanes=m,r){case 0:case 1:throw Error(n(345));case 2:bi(e,kr,os);break;case 3:if(Fs(e,m),(m&130023424)===m&&(r=Uf+500-St(),10<r)){if(to(e,0)!==0)break;if(w=e.suspendedLanes,(w&m)!==m){hr(),e.pingedLanes|=e.suspendedLanes&w;break}e.timeoutHandle=Vd(bi.bind(null,e,kr,os),r);break}bi(e,kr,os);break;case 4:if(Fs(e,m),(m&4194240)===m)break;for(r=e.eventTimes,w=-1;0<m;){var P=31-Mr(m);T=1<<P,P=r[P],P>w&&(w=P),m&=~T}if(m=w,m=St()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*c_(m/1960))-m,10<m){e.timeoutHandle=Vd(bi.bind(null,e,kr,os),m);break}bi(e,kr,os);break;case 5:bi(e,kr,os);break;default:throw Error(n(329))}}}return Ir(e,St()),e.callbackNode===c?uE.bind(null,e):null}function Hf(e,r){var c=Da;return e.current.memoizedState.isDehydrated&&(xi(e,r).flags|=256),e=Zc(e,r),e!==2&&(r=kr,kr=c,r!==null&&Bf(r)),e}function Bf(e){kr===null?kr=e:kr.push.apply(kr,e)}function u_(e){for(var r=e;;){if(r.flags&16384){var c=r.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var m=0;m<c.length;m++){var w=c[m],T=w.getSnapshot;w=w.value;try{if(!fn(T(),w))return!1}catch{return!1}}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Fs(e,r){for(r&=~$f,r&=~Vc,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var c=31-Mr(r),m=1<<c;e[c]=-1,r&=~m}}function dE(e){if((it&6)!==0)throw Error(n(327));Io();var r=to(e,0);if((r&1)===0)return Ir(e,St()),null;var c=Zc(e,r);if(e.tag!==0&&c===2){var m=cn(e);m!==0&&(r=m,c=Hf(e,m))}if(c===1)throw c=La,xi(e,0),Fs(e,r),Ir(e,St()),c;if(c===6)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,bi(e,kr,os),Ir(e,St()),null}function zf(e,r){var c=it;it|=1;try{return e(r)}finally{it=c,it===0&&(ko=St()+500,_c&&js())}}function Si(e){Us!==null&&Us.tag===0&&(it&6)===0&&Io();var r=it;it|=1;var c=Qr.transition,m=ct;try{if(Qr.transition=null,ct=1,e)return e()}finally{ct=m,Qr.transition=c,it=r,(it&6)===0&&js()}}function Kf(){Hr=Ro.current,yt(Ro)}function xi(e,r){e.finishedWork=null,e.finishedLanes=0;var c=e.timeoutHandle;if(c!==-1&&(e.timeoutHandle=-1,qT(c)),Lt!==null)for(c=Lt.return;c!==null;){var m=c;switch(Zd(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Cc();break;case 3:Co(),yt(Tr),yt(rr),hf();break;case 5:df(m);break;case 4:Co();break;case 13:yt(bt);break;case 19:yt(bt);break;case 10:of(m.type._context);break;case 22:case 23:Kf()}c=c.return}if(Wt=e,Lt=e=Hs(e.current,null),Zt=Hr=r,Ft=0,La=null,$f=Vc=wi=0,kr=Da=null,yi!==null){for(r=0;r<yi.length;r++)if(c=yi[r],m=c.interleaved,m!==null){c.interleaved=null;var w=m.next,T=c.pending;if(T!==null){var P=T.next;T.next=w,m.next=P}c.pending=m}yi=null}return e}function fE(e,r){do{var c=Lt;try{if(sf(),Dc.current=qc,Mc){for(var m=Ct.memoizedState;m!==null;){var w=m.queue;w!==null&&(w.pending=null),m=m.next}Mc=!1}if(Ei=0,Kt=qt=Ct=null,Ia=!1,Aa=0,Mf.current=null,c===null||c.return===null){Ft=1,La=r,Lt=null;break}e:{var T=e,P=c.return,z=c,J=r;if(r=Zt,z.flags|=32768,J!==null&&typeof J=="object"&&typeof J.then=="function"){var le=J,ye=z,we=ye.tag;if((ye.mode&1)===0&&(we===0||we===11||we===15)){var ge=ye.alternate;ge?(ye.updateQueue=ge.updateQueue,ye.memoizedState=ge.memoizedState,ye.lanes=ge.lanes):(ye.updateQueue=null,ye.memoizedState=null)}var Ie=Mv(P);if(Ie!==null){Ie.flags&=-257,$v(Ie,P,z,T,r),Ie.mode&1&&Dv(T,le,r),r=Ie,J=le;var je=r.updateQueue;if(je===null){var $e=new Set;$e.add(J),r.updateQueue=$e}else je.add(J);break e}else{if((r&1)===0){Dv(T,le,r),Wf();break e}J=Error(n(426))}}else if(Et&&z.mode&1){var It=Mv(P);if(It!==null){(It.flags&65536)===0&&(It.flags|=256),$v(It,P,z,T,r),rf(To(J,z));break e}}T=J=To(J,z),Ft!==4&&(Ft=2),Da===null?Da=[T]:Da.push(T),T=P;do{switch(T.tag){case 3:T.flags|=65536,r&=-r,T.lanes|=r;var se=jv(T,J,r);av(T,se);break e;case 1:z=J;var Q=T.type,oe=T.stateNode;if((T.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||oe!==null&&typeof oe.componentDidCatch=="function"&&($s===null||!$s.has(oe)))){T.flags|=65536,r&=-r,T.lanes|=r;var xe=Lv(T,z,r);av(T,xe);break e}}T=T.return}while(T!==null)}mE(c)}catch(qe){r=qe,Lt===c&&c!==null&&(Lt=c=c.return);continue}break}while(!0)}function hE(){var e=Wc.current;return Wc.current=qc,e===null?qc:e}function Wf(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),Wt===null||(wi&268435455)===0&&(Vc&268435455)===0||Fs(Wt,Zt)}function Zc(e,r){var c=it;it|=2;var m=hE();(Wt!==e||Zt!==r)&&(os=null,xi(e,r));do try{d_();break}catch(w){fE(e,w)}while(!0);if(sf(),it=c,Wc.current=m,Lt!==null)throw Error(n(261));return Wt=null,Zt=0,Ft}function d_(){for(;Lt!==null;)pE(Lt)}function f_(){for(;Lt!==null&&!ia();)pE(Lt)}function pE(e){var r=vE(e.alternate,e,Hr);e.memoizedProps=e.pendingProps,r===null?mE(e):Lt=r,Mf.current=null}function mE(e){var r=e;do{var c=r.alternate;if(e=r.return,(r.flags&32768)===0){if(c=s_(c,r,Hr),c!==null){Lt=c;return}}else{if(c=i_(c,r),c!==null){c.flags&=32767,Lt=c;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ft=6,Lt=null;return}}if(r=r.sibling,r!==null){Lt=r;return}Lt=r=e}while(r!==null);Ft===0&&(Ft=5)}function bi(e,r,c){var m=ct,w=Qr.transition;try{Qr.transition=null,ct=1,h_(e,r,c,m)}finally{Qr.transition=w,ct=m}return null}function h_(e,r,c,m){do Io();while(Us!==null);if((it&6)!==0)throw Error(n(327));c=e.finishedWork;var w=e.finishedLanes;if(c===null)return null;if(e.finishedWork=null,e.finishedLanes=0,c===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var T=c.lanes|c.childLanes;if(gy(e,T),e===Wt&&(Lt=Wt=null,Zt=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Jc||(Jc=!0,EE(ni,function(){return Io(),null})),T=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||T){T=Qr.transition,Qr.transition=null;var P=ct;ct=1;var z=it;it|=4,Mf.current=null,a_(e,c),iE(c,e),OT(Kd),Yn=!!zd,Kd=zd=null,e.current=c,l_(c),Id(),it=z,ct=P,Qr.transition=T}else e.current=c;if(Jc&&(Jc=!1,Us=e,Yc=w),T=e.pendingLanes,T===0&&($s=null),Nd(c.stateNode),Ir(e,St()),r!==null)for(m=e.onRecoverableError,c=0;c<r.length;c++)w=r[c],m(w.value,{componentStack:w.stack,digest:w.digest});if(Gc)throw Gc=!1,e=qf,qf=null,e;return(Yc&1)!==0&&e.tag!==0&&Io(),T=e.pendingLanes,(T&1)!==0?e===Ff?Ma++:(Ma=0,Ff=e):Ma=0,js(),null}function Io(){if(Us!==null){var e=oc(Yc),r=Qr.transition,c=ct;try{if(Qr.transition=null,ct=16>e?16:e,Us===null)var m=!1;else{if(e=Us,Us=null,Yc=0,(it&6)!==0)throw Error(n(331));var w=it;for(it|=4,Pe=e.current;Pe!==null;){var T=Pe,P=T.child;if((Pe.flags&16)!==0){var z=T.deletions;if(z!==null){for(var J=0;J<z.length;J++){var le=z[J];for(Pe=le;Pe!==null;){var ye=Pe;switch(ye.tag){case 0:case 11:case 15:ja(8,ye,T)}var we=ye.child;if(we!==null)we.return=ye,Pe=we;else for(;Pe!==null;){ye=Pe;var ge=ye.sibling,Ie=ye.return;if(eE(ye),ye===le){Pe=null;break}if(ge!==null){ge.return=Ie,Pe=ge;break}Pe=Ie}}}var je=T.alternate;if(je!==null){var $e=je.child;if($e!==null){je.child=null;do{var It=$e.sibling;$e.sibling=null,$e=It}while($e!==null)}}Pe=T}}if((T.subtreeFlags&2064)!==0&&P!==null)P.return=T,Pe=P;else e:for(;Pe!==null;){if(T=Pe,(T.flags&2048)!==0)switch(T.tag){case 0:case 11:case 15:ja(9,T,T.return)}var se=T.sibling;if(se!==null){se.return=T.return,Pe=se;break e}Pe=T.return}}var Q=e.current;for(Pe=Q;Pe!==null;){P=Pe;var oe=P.child;if((P.subtreeFlags&2064)!==0&&oe!==null)oe.return=P,Pe=oe;else e:for(P=Q;Pe!==null;){if(z=Pe,(z.flags&2048)!==0)try{switch(z.tag){case 0:case 11:case 15:Kc(9,z)}}catch(qe){_t(z,z.return,qe)}if(z===P){Pe=null;break e}var xe=z.sibling;if(xe!==null){xe.return=z.return,Pe=xe;break e}Pe=z.return}}if(it=w,js(),Vr&&typeof Vr.onPostCommitFiberRoot=="function")try{Vr.onPostCommitFiberRoot(si,e)}catch{}m=!0}return m}finally{ct=c,Qr.transition=r}}return!1}function gE(e,r,c){r=To(c,r),r=jv(e,r,1),e=Ds(e,r,1),r=hr(),e!==null&&(oi(e,1,r),Ir(e,r))}function _t(e,r,c){if(e.tag===3)gE(e,e,c);else for(;r!==null;){if(r.tag===3){gE(r,e,c);break}else if(r.tag===1){var m=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&($s===null||!$s.has(m))){e=To(c,e),e=Lv(r,e,1),r=Ds(r,e,1),e=hr(),r!==null&&(oi(r,1,e),Ir(r,e));break}}r=r.return}}function p_(e,r,c){var m=e.pingCache;m!==null&&m.delete(r),r=hr(),e.pingedLanes|=e.suspendedLanes&c,Wt===e&&(Zt&c)===c&&(Ft===4||Ft===3&&(Zt&130023424)===Zt&&500>St()-Uf?xi(e,0):$f|=c),Ir(e,r)}function yE(e,r){r===0&&((e.mode&1)===0?r=1:(r=eo,eo<<=1,(eo&130023424)===0&&(eo=4194304)));var c=hr();e=ns(e,r),e!==null&&(oi(e,r,c),Ir(e,c))}function m_(e){var r=e.memoizedState,c=0;r!==null&&(c=r.retryLane),yE(e,c)}function g_(e,r){var c=0;switch(e.tag){case 13:var m=e.stateNode,w=e.memoizedState;w!==null&&(c=w.retryLane);break;case 19:m=e.stateNode;break;default:throw Error(n(314))}m!==null&&m.delete(r),yE(e,c)}var vE;vE=function(e,r,c){if(e!==null)if(e.memoizedProps!==r.pendingProps||Tr.current)Rr=!0;else{if((e.lanes&c)===0&&(r.flags&128)===0)return Rr=!1,n_(e,r,c);Rr=(e.flags&131072)!==0}else Rr=!1,Et&&(r.flags&1048576)!==0&&Xy(r,kc,r.index);switch(r.lanes=0,r.tag){case 2:var m=r.type;Bc(e,r),e=r.pendingProps;var w=yo(r,rr.current);bo(r,c),w=gf(null,r,m,e,w,c);var T=yf();return r.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,_r(m)?(T=!0,Tc(r)):T=!1,r.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,cf(r),w.updater=Fc,r.stateNode=w,w._reactInternals=r,bf(r,m,e,c),r=Rf(null,r,m,!0,T,c)):(r.tag=0,Et&&T&&Qd(r),fr(null,r,w,c),r=r.child),r;case 16:m=r.elementType;e:{switch(Bc(e,r),e=r.pendingProps,w=m._init,m=w(m._payload),r.type=m,w=r.tag=v_(m),e=pn(m,e),w){case 0:r=_f(null,r,m,e,c);break e;case 1:r=zv(null,r,m,e,c);break e;case 11:r=Uv(null,r,m,e,c);break e;case 14:r=qv(null,r,m,pn(m.type,e),c);break e}throw Error(n(306,m,""))}return r;case 0:return m=r.type,w=r.pendingProps,w=r.elementType===m?w:pn(m,w),_f(e,r,m,w,c);case 1:return m=r.type,w=r.pendingProps,w=r.elementType===m?w:pn(m,w),zv(e,r,m,w,c);case 3:e:{if(Kv(r),e===null)throw Error(n(387));m=r.pendingProps,T=r.memoizedState,w=T.element,ov(e,r),jc(r,m,null,c);var P=r.memoizedState;if(m=P.element,T.isDehydrated)if(T={element:m,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},r.updateQueue.baseState=T,r.memoizedState=T,r.flags&256){w=To(Error(n(423)),r),r=Wv(e,r,m,c,w);break e}else if(m!==w){w=To(Error(n(424)),r),r=Wv(e,r,m,c,w);break e}else for(Fr=Ns(r.stateNode.containerInfo.firstChild),qr=r,Et=!0,hn=null,c=sv(r,null,m,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(wo(),m===w){r=is(e,r,c);break e}fr(e,r,m,c)}r=r.child}return r;case 5:return cv(r),e===null&&tf(r),m=r.type,w=r.pendingProps,T=e!==null?e.memoizedProps:null,P=w.children,Wd(m,w)?P=null:T!==null&&Wd(m,T)&&(r.flags|=32),Bv(e,r),fr(e,r,P,c),r.child;case 6:return e===null&&tf(r),null;case 13:return Vv(e,r,c);case 4:return uf(r,r.stateNode.containerInfo),m=r.pendingProps,e===null?r.child=So(r,null,m,c):fr(e,r,m,c),r.child;case 11:return m=r.type,w=r.pendingProps,w=r.elementType===m?w:pn(m,w),Uv(e,r,m,w,c);case 7:return fr(e,r,r.pendingProps,c),r.child;case 8:return fr(e,r,r.pendingProps.children,c),r.child;case 12:return fr(e,r,r.pendingProps.children,c),r.child;case 10:e:{if(m=r.type._context,w=r.pendingProps,T=r.memoizedProps,P=w.value,ht(Nc,m._currentValue),m._currentValue=P,T!==null)if(fn(T.value,P)){if(T.children===w.children&&!Tr.current){r=is(e,r,c);break e}}else for(T=r.child,T!==null&&(T.return=r);T!==null;){var z=T.dependencies;if(z!==null){P=T.child;for(var J=z.firstContext;J!==null;){if(J.context===m){if(T.tag===1){J=ss(-1,c&-c),J.tag=2;var le=T.updateQueue;if(le!==null){le=le.shared;var ye=le.pending;ye===null?J.next=J:(J.next=ye.next,ye.next=J),le.pending=J}}T.lanes|=c,J=T.alternate,J!==null&&(J.lanes|=c),af(T.return,c,r),z.lanes|=c;break}J=J.next}}else if(T.tag===10)P=T.type===r.type?null:T.child;else if(T.tag===18){if(P=T.return,P===null)throw Error(n(341));P.lanes|=c,z=P.alternate,z!==null&&(z.lanes|=c),af(P,c,r),P=T.sibling}else P=T.child;if(P!==null)P.return=T;else for(P=T;P!==null;){if(P===r){P=null;break}if(T=P.sibling,T!==null){T.return=P.return,P=T;break}P=P.return}T=P}fr(e,r,w.children,c),r=r.child}return r;case 9:return w=r.type,m=r.pendingProps.children,bo(r,c),w=Yr(w),m=m(w),r.flags|=1,fr(e,r,m,c),r.child;case 14:return m=r.type,w=pn(m,r.pendingProps),w=pn(m.type,w),qv(e,r,m,w,c);case 15:return Fv(e,r,r.type,r.pendingProps,c);case 17:return m=r.type,w=r.pendingProps,w=r.elementType===m?w:pn(m,w),Bc(e,r),r.tag=1,_r(m)?(e=!0,Tc(r)):e=!1,bo(r,c),Pv(r,m,w),bf(r,m,w,c),Rf(null,r,m,!0,e,c);case 19:return Jv(e,r,c);case 22:return Hv(e,r,c)}throw Error(n(156,r.tag))};function EE(e,r){return Zl(e,r)}function y_(e,r,c,m){this.tag=e,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zr(e,r,c,m){return new y_(e,r,c,m)}function Vf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function v_(e){if(typeof e=="function")return Vf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ce)return 11;if(e===O)return 14}return 2}function Hs(e,r){var c=e.alternate;return c===null?(c=Zr(e.tag,r,e.key,e.mode),c.elementType=e.elementType,c.type=e.type,c.stateNode=e.stateNode,c.alternate=e,e.alternate=c):(c.pendingProps=r,c.type=e.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=e.flags&14680064,c.childLanes=e.childLanes,c.lanes=e.lanes,c.child=e.child,c.memoizedProps=e.memoizedProps,c.memoizedState=e.memoizedState,c.updateQueue=e.updateQueue,r=e.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=e.sibling,c.index=e.index,c.ref=e.ref,c}function eu(e,r,c,m,w,T){var P=2;if(m=e,typeof e=="function")Vf(e)&&(P=1);else if(typeof e=="string")P=5;else e:switch(e){case j:return Ci(c.children,w,T,r);case k:P=8,w|=8;break;case K:return e=Zr(12,c,r,w|2),e.elementType=K,e.lanes=T,e;case V:return e=Zr(13,c,r,w),e.elementType=V,e.lanes=T,e;case F:return e=Zr(19,c,r,w),e.elementType=F,e.lanes=T,e;case W:return tu(c,w,T,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Z:P=10;break e;case ie:P=9;break e;case ce:P=11;break e;case O:P=14;break e;case q:P=16,m=null;break e}throw Error(n(130,e==null?e:typeof e,""))}return r=Zr(P,c,r,w),r.elementType=e,r.type=m,r.lanes=T,r}function Ci(e,r,c,m){return e=Zr(7,e,m,r),e.lanes=c,e}function tu(e,r,c,m){return e=Zr(22,e,m,r),e.elementType=W,e.lanes=c,e.stateNode={isHidden:!1},e}function Gf(e,r,c){return e=Zr(6,e,null,r),e.lanes=c,e}function Jf(e,r,c){return r=Zr(4,e.children!==null?e.children:[],e.key,r),r.lanes=c,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function E_(e,r,c,m,w){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ic(0),this.expirationTimes=ic(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ic(0),this.identifierPrefix=m,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function Yf(e,r,c,m,w,T,P,z,J){return e=new E_(e,r,c,z,J),r===1?(r=1,T===!0&&(r|=8)):r=0,T=Zr(3,null,null,r),e.current=T,T.stateNode=e,T.memoizedState={element:m,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},cf(T),e}function w_(e,r,c){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:m==null?null:""+m,children:e,containerInfo:r,implementation:c}}function wE(e){if(!e)return Os;e=e._reactInternals;e:{if(ln(e)!==e||e.tag!==1)throw Error(n(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(_r(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(e.tag===1){var c=e.type;if(_r(c))return Gy(e,c,r)}return r}function SE(e,r,c,m,w,T,P,z,J){return e=Yf(c,m,!0,e,w,T,P,z,J),e.context=wE(null),c=e.current,m=hr(),w=qs(c),T=ss(m,w),T.callback=r??null,Ds(c,T,w),e.current.lanes=w,oi(e,w,m),Ir(e,m),e}function ru(e,r,c,m){var w=r.current,T=hr(),P=qs(w);return c=wE(c),r.context===null?r.context=c:r.pendingContext=c,r=ss(T,P),r.payload={element:e},m=m===void 0?null:m,m!==null&&(r.callback=m),e=Ds(w,r,P),e!==null&&(yn(e,w,P,T),Oc(e,w,P)),P}function nu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function xE(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var c=e.retryLane;e.retryLane=c!==0&&c<r?c:r}}function Xf(e,r){xE(e,r),(e=e.alternate)&&xE(e,r)}function S_(){return null}var bE=typeof reportError=="function"?reportError:function(e){console.error(e)};function Qf(e){this._internalRoot=e}su.prototype.render=Qf.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(n(409));ru(e,r,null,null)},su.prototype.unmount=Qf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;Si(function(){ru(null,e,null,null)}),r[Zn]=null}};function su(e){this._internalRoot=e}su.prototype.unstable_scheduleHydration=function(e){if(e){var r=ai();e={blockedOn:null,target:e,priority:r};for(var c=0;c<dn.length&&r!==0&&r<dn[c].priority;c++);dn.splice(c,0,e),c===0&&ua(e)}};function Zf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function iu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function CE(){}function x_(e,r,c,m,w){if(w){if(typeof m=="function"){var T=m;m=function(){var le=nu(P);T.call(le)}}var P=SE(r,m,e,0,null,!1,!1,"",CE);return e._reactRootContainer=P,e[Zn]=P.current,Sa(e.nodeType===8?e.parentNode:e),Si(),P}for(;w=e.lastChild;)e.removeChild(w);if(typeof m=="function"){var z=m;m=function(){var le=nu(J);z.call(le)}}var J=Yf(e,0,!1,null,null,!1,!1,"",CE);return e._reactRootContainer=J,e[Zn]=J.current,Sa(e.nodeType===8?e.parentNode:e),Si(function(){ru(r,J,c,m)}),J}function ou(e,r,c,m,w){var T=c._reactRootContainer;if(T){var P=T;if(typeof w=="function"){var z=w;w=function(){var J=nu(P);z.call(J)}}ru(r,P,e,w)}else P=x_(c,r,e,w,m);return nu(P)}ac=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var c=ii(r.pendingLanes);c!==0&&(aa(r,c|1),Ir(r,St()),(it&6)===0&&(ko=St()+500,js()))}break;case 13:Si(function(){var m=ns(e,1);if(m!==null){var w=hr();yn(m,e,1,w)}}),Xf(e,1)}},ro=function(e){if(e.tag===13){var r=ns(e,134217728);if(r!==null){var c=hr();yn(r,e,134217728,c)}Xf(e,134217728)}},la=function(e){if(e.tag===13){var r=qs(e),c=ns(e,r);if(c!==null){var m=hr();yn(c,e,r,m)}Xf(e,r)}},ai=function(){return ct},lc=function(e,r){var c=ct;try{return ct=e,r()}finally{ct=c}},ws=function(e,r,c){switch(r){case"input":if(lt(e,c),r=c.name,c.type==="radio"&&r!=null){for(c=e;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<c.length;r++){var m=c[r];if(m!==e&&m.form===e.form){var w=bc(m);if(!w)throw Error(n(90));U(m),lt(m,w)}}}break;case"textarea":Vi(e,c);break;case"select":r=c.value,r!=null&&Cn(e,!!c.multiple,r,!1)}},kt=zf,zt=Si;var b_={usingClientEntryPoint:!1,Events:[Ca,mo,bc,Je,wt,zf]},$a={findFiberByHostInstance:hi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},C_={bundleType:$a.bundleType,version:$a.version,rendererPackageName:$a.rendererPackageName,rendererConfig:$a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xs(e),e===null?null:e.stateNode},findFiberByHostInstance:$a.findFiberByHostInstance||S_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!au.isDisabled&&au.supportsFiber)try{si=au.inject(C_),Vr=au}catch{}}return Ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b_,Ar.createPortal=function(e,r){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zf(r))throw Error(n(200));return w_(e,r,null,c)},Ar.createRoot=function(e,r){if(!Zf(e))throw Error(n(299));var c=!1,m="",w=bE;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(m=r.identifierPrefix),r.onRecoverableError!==void 0&&(w=r.onRecoverableError)),r=Yf(e,1,!1,null,null,c,!1,m,w),e[Zn]=r.current,Sa(e.nodeType===8?e.parentNode:e),new Qf(r)},Ar.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=xs(r),e=e===null?null:e.stateNode,e},Ar.flushSync=function(e){return Si(e)},Ar.hydrate=function(e,r,c){if(!iu(r))throw Error(n(200));return ou(null,e,r,!0,c)},Ar.hydrateRoot=function(e,r,c){if(!Zf(e))throw Error(n(405));var m=c!=null&&c.hydratedSources||null,w=!1,T="",P=bE;if(c!=null&&(c.unstable_strictMode===!0&&(w=!0),c.identifierPrefix!==void 0&&(T=c.identifierPrefix),c.onRecoverableError!==void 0&&(P=c.onRecoverableError)),r=SE(r,null,e,1,c??null,w,!1,T,P),e[Zn]=r.current,Sa(e),m)for(e=0;e<m.length;e++)c=m[e],w=c._getVersion,w=w(c._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[c,w]:r.mutableSourceEagerHydrationData.push(c,w);return new su(r)},Ar.render=function(e,r,c){if(!iu(r))throw Error(n(200));return ou(null,e,r,!1,c)},Ar.unmountComponentAtNode=function(e){if(!iu(e))throw Error(n(40));return e._reactRootContainer?(Si(function(){ou(null,null,e,!1,function(){e._reactRootContainer=null,e[Zn]=null})}),!0):!1},Ar.unstable_batchedUpdates=zf,Ar.unstable_renderSubtreeIntoContainer=function(e,r,c,m){if(!iu(c))throw Error(n(200));if(e==null||e._reactInternals===void 0)throw Error(n(38));return ou(e,r,c,!1,m)},Ar.version="18.3.1-next-f1338f8080-20240426",Ar}var jE;function Xb(){if(jE)return rh.exports;jE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(s){console.error(s)}}return t(),rh.exports=D_(),rh.exports}var LE;function M_(){if(LE)return lu;LE=1;var t=Xb();return lu.createRoot=t.createRoot,lu.hydrateRoot=t.hydrateRoot,lu}var $_=M_(),G=Eg();const xg=R_({__proto__:null,default:G},[G]);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),q_=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,n,i)=>i?i.toUpperCase():n.toLowerCase()),DE=t=>{const s=q_(t);return s.charAt(0).toUpperCase()+s.slice(1)},Qb=(...t)=>t.filter((s,n,i)=>!!s&&s.trim()!==""&&i.indexOf(s)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var F_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=G.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:a="",children:l,iconNode:o,...u},d)=>G.createElement("svg",{ref:d,...F_,width:s,height:s,stroke:t,strokeWidth:i?Number(n)*24/Number(s):n,className:Qb("lucide",a),...u},[...o.map(([h,f])=>G.createElement(h,f)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=(t,s)=>{const n=G.forwardRef(({className:i,...a},l)=>G.createElement(H_,{ref:l,iconNode:s,className:Qb(`lucide-${U_(DE(t))}`,`lucide-${t}`,i),...a}));return n.displayName=DE(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],z_=Bt("activity",B_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],W_=Bt("arrow-right",K_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],G_=Bt("chart-no-axes-column-increasing",V_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Y_=Bt("circle-alert",J_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Zb=Bt("circle-check",X_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],Z_=Bt("code",Q_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],tR=Bt("copy",eR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Zm=Bt("database",rR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],e1=Bt("file-text",nR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],iR=Bt("log-in",sR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],aR=Bt("log-out",oR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]],cR=Bt("radio",lR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ju=Bt("refresh-cw",uR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fR=Bt("settings",dR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],eg=Bt("shield",hR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],tg=Bt("trash-2",pR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],ME=Bt("trending-up",mR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],yR=Bt("user",gR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ER=Bt("zap",vR);function $E(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function bg(...t){return s=>{let n=!1;const i=t.map(a=>{const l=$E(a,s);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let a=0;a<i.length;a++){const l=i[a];typeof l=="function"?l():$E(t[a],null)}}}}function Lu(...t){return G.useCallback(bg(...t),t)}var wR=Symbol.for("react.lazy"),Du=xg[" use ".trim().toString()];function SR(t){return typeof t=="object"&&t!==null&&"then"in t}function t1(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===wR&&"_payload"in t&&SR(t._payload)}function r1(t){const s=bR(t),n=G.forwardRef((i,a)=>{let{children:l,...o}=i;t1(l)&&typeof Du=="function"&&(l=Du(l._payload));const u=G.Children.toArray(l),d=u.find(TR);if(d){const h=d.props.children,f=u.map(p=>p===d?G.Children.count(h)>1?G.Children.only(null):G.isValidElement(h)?h.props.children:null:p);return g.jsx(s,{...o,ref:a,children:G.isValidElement(h)?G.cloneElement(h,void 0,f):null})}return g.jsx(s,{...o,ref:a,children:l})});return n.displayName=`${t}.Slot`,n}var xR=r1("Slot");function bR(t){const s=G.forwardRef((n,i)=>{let{children:a,...l}=n;if(t1(a)&&typeof Du=="function"&&(a=Du(a._payload)),G.isValidElement(a)){const o=RR(a),u=_R(l,a.props);return a.type!==G.Fragment&&(u.ref=i?bg(i,o):o),G.cloneElement(a,u)}return G.Children.count(a)>1?G.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var CR=Symbol("radix.slottable");function TR(t){return G.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===CR}function _R(t,s){const n={...s};for(const i in s){const a=t[i],l=s[i];/^on[A-Z]/.test(i)?a&&l?n[i]=(...u)=>{const d=l(...u);return a(...u),d}:a&&(n[i]=a):i==="style"?n[i]={...a,...l}:i==="className"&&(n[i]=[a,l].filter(Boolean).join(" "))}return{...t,...n}}function RR(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function n1(t){var s,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(s=0;s<a;s++)t[s]&&(n=n1(t[s]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function s1(){for(var t,s,n=0,i="",a=arguments.length;n<a;n++)(t=arguments[n])&&(s=n1(t))&&(i&&(i+=" "),i+=s);return i}const UE=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,qE=s1,kR=(t,s)=>n=>{var i;if(s?.variants==null)return qE(t,n?.class,n?.className);const{variants:a,defaultVariants:l}=s,o=Object.keys(a).map(h=>{const f=n?.[h],p=l?.[h];if(f===null)return null;const y=UE(f)||UE(p);return a[h][y]}),u=n&&Object.entries(n).reduce((h,f)=>{let[p,y]=f;return y===void 0||(h[p]=y),h},{}),d=s==null||(i=s.compoundVariants)===null||i===void 0?void 0:i.reduce((h,f)=>{let{class:p,className:y,...S}=f;return Object.entries(S).every(E=>{let[b,x]=E;return Array.isArray(x)?x.includes({...l,...u}[b]):{...l,...u}[b]===x})?[...h,p,y]:h},[]);return qE(t,o,d,n?.class,n?.className)},IR=(t,s)=>{const n=new Array(t.length+s.length);for(let i=0;i<t.length;i++)n[i]=t[i];for(let i=0;i<s.length;i++)n[t.length+i]=s[i];return n},AR=(t,s)=>({classGroupId:t,validator:s}),i1=(t=new Map,s=null,n)=>({nextPart:t,validators:s,classGroupId:n}),Mu="-",FE=[],NR="arbitrary..",PR=t=>{const s=jR(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=t;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return OR(o);const u=o.split(Mu),d=u[0]===""&&u.length>1?1:0;return o1(u,d,s)},getConflictingClassGroupIds:(o,u)=>{if(u){const d=i[o],h=n[o];return d?h?IR(h,d):d:h||FE}return n[o]||FE}}},o1=(t,s,n)=>{if(t.length-s===0)return n.classGroupId;const a=t[s],l=n.nextPart.get(a);if(l){const h=o1(t,s+1,l);if(h)return h}const o=n.validators;if(o===null)return;const u=s===0?t.join(Mu):t.slice(s).join(Mu),d=o.length;for(let h=0;h<d;h++){const f=o[h];if(f.validator(u))return f.classGroupId}},OR=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const s=t.slice(1,-1),n=s.indexOf(":"),i=s.slice(0,n);return i?NR+i:void 0})(),jR=t=>{const{theme:s,classGroups:n}=t;return LR(n,s)},LR=(t,s)=>{const n=i1();for(const i in t){const a=t[i];Cg(a,n,i,s)}return n},Cg=(t,s,n,i)=>{const a=t.length;for(let l=0;l<a;l++){const o=t[l];DR(o,s,n,i)}},DR=(t,s,n,i)=>{if(typeof t=="string"){MR(t,s,n);return}if(typeof t=="function"){$R(t,s,n,i);return}UR(t,s,n,i)},MR=(t,s,n)=>{const i=t===""?s:a1(s,t);i.classGroupId=n},$R=(t,s,n,i)=>{if(qR(t)){Cg(t(i),s,n,i);return}s.validators===null&&(s.validators=[]),s.validators.push(AR(n,t))},UR=(t,s,n,i)=>{const a=Object.entries(t),l=a.length;for(let o=0;o<l;o++){const[u,d]=a[o];Cg(d,a1(s,u),n,i)}},a1=(t,s)=>{let n=t;const i=s.split(Mu),a=i.length;for(let l=0;l<a;l++){const o=i[l];let u=n.nextPart.get(o);u||(u=i1(),n.nextPart.set(o,u)),n=u}return n},qR=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,FR=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,n=Object.create(null),i=Object.create(null);const a=(l,o)=>{n[l]=o,s++,s>t&&(s=0,i=n,n=Object.create(null))};return{get(l){let o=n[l];if(o!==void 0)return o;if((o=i[l])!==void 0)return a(l,o),o},set(l,o){l in n?n[l]=o:a(l,o)}}},rg="!",HE=":",HR=[],BE=(t,s,n,i,a)=>({modifiers:t,hasImportantModifier:s,baseClassName:n,maybePostfixModifierPosition:i,isExternal:a}),BR=t=>{const{prefix:s,experimentalParseClassName:n}=t;let i=a=>{const l=[];let o=0,u=0,d=0,h;const f=a.length;for(let b=0;b<f;b++){const x=a[b];if(o===0&&u===0){if(x===HE){l.push(a.slice(d,b)),d=b+1;continue}if(x==="/"){h=b;continue}}x==="["?o++:x==="]"?o--:x==="("?u++:x===")"&&u--}const p=l.length===0?a:a.slice(d);let y=p,S=!1;p.endsWith(rg)?(y=p.slice(0,-1),S=!0):p.startsWith(rg)&&(y=p.slice(1),S=!0);const E=h&&h>d?h-d:void 0;return BE(l,S,y,E)};if(s){const a=s+HE,l=i;i=o=>o.startsWith(a)?l(o.slice(a.length)):BE(HR,!1,o,void 0,!0)}if(n){const a=i;i=l=>n({className:l,parseClassName:a})}return i},zR=t=>{const s=new Map;return t.orderSensitiveModifiers.forEach((n,i)=>{s.set(n,1e6+i)}),n=>{const i=[];let a=[];for(let l=0;l<n.length;l++){const o=n[l],u=o[0]==="[",d=s.has(o);u||d?(a.length>0&&(a.sort(),i.push(...a),a=[]),i.push(o)):a.push(o)}return a.length>0&&(a.sort(),i.push(...a)),i}},KR=t=>({cache:FR(t.cacheSize),parseClassName:BR(t),sortModifiers:zR(t),...PR(t)}),WR=/\s+/,VR=(t,s)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:a,sortModifiers:l}=s,o=[],u=t.trim().split(WR);let d="";for(let h=u.length-1;h>=0;h-=1){const f=u[h],{isExternal:p,modifiers:y,hasImportantModifier:S,baseClassName:E,maybePostfixModifierPosition:b}=n(f);if(p){d=f+(d.length>0?" "+d:d);continue}let x=!!b,v=i(x?E.substring(0,b):E);if(!v){if(!x){d=f+(d.length>0?" "+d:d);continue}if(v=i(E),!v){d=f+(d.length>0?" "+d:d);continue}x=!1}const C=y.length===0?"":y.length===1?y[0]:l(y).join(":"),_=S?C+rg:C,R=_+v;if(o.indexOf(R)>-1)continue;o.push(R);const D=a(v,x);for(let A=0;A<D.length;++A){const j=D[A];o.push(_+j)}d=f+(d.length>0?" "+d:d)}return d},GR=(...t)=>{let s=0,n,i,a="";for(;s<t.length;)(n=t[s++])&&(i=l1(n))&&(a&&(a+=" "),a+=i);return a},l1=t=>{if(typeof t=="string")return t;let s,n="";for(let i=0;i<t.length;i++)t[i]&&(s=l1(t[i]))&&(n&&(n+=" "),n+=s);return n},JR=(t,...s)=>{let n,i,a,l;const o=d=>{const h=s.reduce((f,p)=>p(f),t());return n=KR(h),i=n.cache.get,a=n.cache.set,l=u,u(d)},u=d=>{const h=i(d);if(h)return h;const f=VR(d,n);return a(d,f),f};return l=o,(...d)=>l(GR(...d))},YR=[],Ht=t=>{const s=n=>n[t]||YR;return s.isThemeGetter=!0,s},c1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,u1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,XR=/^\d+\/\d+$/,QR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ZR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ek=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,tk=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,rk=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ao=t=>XR.test(t),et=t=>!!t&&!Number.isNaN(Number(t)),zs=t=>!!t&&Number.isInteger(Number(t)),ih=t=>t.endsWith("%")&&et(t.slice(0,-1)),as=t=>QR.test(t),nk=()=>!0,sk=t=>ZR.test(t)&&!ek.test(t),d1=()=>!1,ik=t=>tk.test(t),ok=t=>rk.test(t),ak=t=>!Le(t)&&!De(t),lk=t=>Ko(t,p1,d1),Le=t=>c1.test(t),Ti=t=>Ko(t,m1,sk),oh=t=>Ko(t,hk,et),zE=t=>Ko(t,f1,d1),ck=t=>Ko(t,h1,ok),cu=t=>Ko(t,g1,ik),De=t=>u1.test(t),qa=t=>Wo(t,m1),uk=t=>Wo(t,pk),KE=t=>Wo(t,f1),dk=t=>Wo(t,p1),fk=t=>Wo(t,h1),uu=t=>Wo(t,g1,!0),Ko=(t,s,n)=>{const i=c1.exec(t);return i?i[1]?s(i[1]):n(i[2]):!1},Wo=(t,s,n=!1)=>{const i=u1.exec(t);return i?i[1]?s(i[1]):n:!1},f1=t=>t==="position"||t==="percentage",h1=t=>t==="image"||t==="url",p1=t=>t==="length"||t==="size"||t==="bg-size",m1=t=>t==="length",hk=t=>t==="number",pk=t=>t==="family-name",g1=t=>t==="shadow",mk=()=>{const t=Ht("color"),s=Ht("font"),n=Ht("text"),i=Ht("font-weight"),a=Ht("tracking"),l=Ht("leading"),o=Ht("breakpoint"),u=Ht("container"),d=Ht("spacing"),h=Ht("radius"),f=Ht("shadow"),p=Ht("inset-shadow"),y=Ht("text-shadow"),S=Ht("drop-shadow"),E=Ht("blur"),b=Ht("perspective"),x=Ht("aspect"),v=Ht("ease"),C=Ht("animate"),_=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],D=()=>[...R(),De,Le],A=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto","contain","none"],k=()=>[De,Le,d],K=()=>[Ao,"full","auto",...k()],Z=()=>[zs,"none","subgrid",De,Le],ie=()=>["auto",{span:["full",zs,De,Le]},zs,De,Le],ce=()=>[zs,"auto",De,Le],V=()=>["auto","min","max","fr",De,Le],F=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],O=()=>["start","end","center","stretch","center-safe","end-safe"],q=()=>["auto",...k()],W=()=>[Ao,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...k()],L=()=>[t,De,Le],Y=()=>[...R(),KE,zE,{position:[De,Le]}],ee=()=>["no-repeat",{repeat:["","x","y","space","round"]}],H=()=>["auto","cover","contain",dk,lk,{size:[De,Le]}],X=()=>[ih,qa,Ti],ne=()=>["","none","full",h,De,Le],fe=()=>["",et,qa,Ti],he=()=>["solid","dashed","dotted","double"],Ae=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ne=()=>[et,ih,KE,zE],ue=()=>["","none",E,De,Le],ve=()=>["none",et,De,Le],He=()=>["none",et,De,Le],ft=()=>[et,De,Le],U=()=>[Ao,"full",...k()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[as],breakpoint:[as],color:[nk],container:[as],"drop-shadow":[as],ease:["in","out","in-out"],font:[ak],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[as],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[as],shadow:[as],spacing:["px",et],text:[as],"text-shadow":[as],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ao,Le,De,x]}],container:["container"],columns:[{columns:[et,Le,De,u]}],"break-after":[{"break-after":_()}],"break-before":[{"break-before":_()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:D()}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:K()}],"inset-x":[{"inset-x":K()}],"inset-y":[{"inset-y":K()}],start:[{start:K()}],end:[{end:K()}],top:[{top:K()}],right:[{right:K()}],bottom:[{bottom:K()}],left:[{left:K()}],visibility:["visible","invisible","collapse"],z:[{z:[zs,"auto",De,Le]}],basis:[{basis:[Ao,"full","auto",u,...k()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[et,Ao,"auto","initial","none",Le]}],grow:[{grow:["",et,De,Le]}],shrink:[{shrink:["",et,De,Le]}],order:[{order:[zs,"first","last","none",De,Le]}],"grid-cols":[{"grid-cols":Z()}],"col-start-end":[{col:ie()}],"col-start":[{"col-start":ce()}],"col-end":[{"col-end":ce()}],"grid-rows":[{"grid-rows":Z()}],"row-start-end":[{row:ie()}],"row-start":[{"row-start":ce()}],"row-end":[{"row-end":ce()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":V()}],"auto-rows":[{"auto-rows":V()}],gap:[{gap:k()}],"gap-x":[{"gap-x":k()}],"gap-y":[{"gap-y":k()}],"justify-content":[{justify:[...F(),"normal"]}],"justify-items":[{"justify-items":[...O(),"normal"]}],"justify-self":[{"justify-self":["auto",...O()]}],"align-content":[{content:["normal",...F()]}],"align-items":[{items:[...O(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...O(),{baseline:["","last"]}]}],"place-content":[{"place-content":F()}],"place-items":[{"place-items":[...O(),"baseline"]}],"place-self":[{"place-self":["auto",...O()]}],p:[{p:k()}],px:[{px:k()}],py:[{py:k()}],ps:[{ps:k()}],pe:[{pe:k()}],pt:[{pt:k()}],pr:[{pr:k()}],pb:[{pb:k()}],pl:[{pl:k()}],m:[{m:q()}],mx:[{mx:q()}],my:[{my:q()}],ms:[{ms:q()}],me:[{me:q()}],mt:[{mt:q()}],mr:[{mr:q()}],mb:[{mb:q()}],ml:[{ml:q()}],"space-x":[{"space-x":k()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":k()}],"space-y-reverse":["space-y-reverse"],size:[{size:W()}],w:[{w:[u,"screen",...W()]}],"min-w":[{"min-w":[u,"screen","none",...W()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[o]},...W()]}],h:[{h:["screen","lh",...W()]}],"min-h":[{"min-h":["screen","lh","none",...W()]}],"max-h":[{"max-h":["screen","lh",...W()]}],"font-size":[{text:["base",n,qa,Ti]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,De,oh]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ih,Le]}],"font-family":[{font:[uk,Le,s]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,De,Le]}],"line-clamp":[{"line-clamp":[et,"none",De,oh]}],leading:[{leading:[l,...k()]}],"list-image":[{"list-image":["none",De,Le]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",De,Le]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:L()}],"text-color":[{text:L()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...he(),"wavy"]}],"text-decoration-thickness":[{decoration:[et,"from-font","auto",De,Ti]}],"text-decoration-color":[{decoration:L()}],"underline-offset":[{"underline-offset":[et,"auto",De,Le]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",De,Le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",De,Le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Y()}],"bg-repeat":[{bg:ee()}],"bg-size":[{bg:H()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},zs,De,Le],radial:["",De,Le],conic:[zs,De,Le]},fk,ck]}],"bg-color":[{bg:L()}],"gradient-from-pos":[{from:X()}],"gradient-via-pos":[{via:X()}],"gradient-to-pos":[{to:X()}],"gradient-from":[{from:L()}],"gradient-via":[{via:L()}],"gradient-to":[{to:L()}],rounded:[{rounded:ne()}],"rounded-s":[{"rounded-s":ne()}],"rounded-e":[{"rounded-e":ne()}],"rounded-t":[{"rounded-t":ne()}],"rounded-r":[{"rounded-r":ne()}],"rounded-b":[{"rounded-b":ne()}],"rounded-l":[{"rounded-l":ne()}],"rounded-ss":[{"rounded-ss":ne()}],"rounded-se":[{"rounded-se":ne()}],"rounded-ee":[{"rounded-ee":ne()}],"rounded-es":[{"rounded-es":ne()}],"rounded-tl":[{"rounded-tl":ne()}],"rounded-tr":[{"rounded-tr":ne()}],"rounded-br":[{"rounded-br":ne()}],"rounded-bl":[{"rounded-bl":ne()}],"border-w":[{border:fe()}],"border-w-x":[{"border-x":fe()}],"border-w-y":[{"border-y":fe()}],"border-w-s":[{"border-s":fe()}],"border-w-e":[{"border-e":fe()}],"border-w-t":[{"border-t":fe()}],"border-w-r":[{"border-r":fe()}],"border-w-b":[{"border-b":fe()}],"border-w-l":[{"border-l":fe()}],"divide-x":[{"divide-x":fe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":fe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...he(),"hidden","none"]}],"divide-style":[{divide:[...he(),"hidden","none"]}],"border-color":[{border:L()}],"border-color-x":[{"border-x":L()}],"border-color-y":[{"border-y":L()}],"border-color-s":[{"border-s":L()}],"border-color-e":[{"border-e":L()}],"border-color-t":[{"border-t":L()}],"border-color-r":[{"border-r":L()}],"border-color-b":[{"border-b":L()}],"border-color-l":[{"border-l":L()}],"divide-color":[{divide:L()}],"outline-style":[{outline:[...he(),"none","hidden"]}],"outline-offset":[{"outline-offset":[et,De,Le]}],"outline-w":[{outline:["",et,qa,Ti]}],"outline-color":[{outline:L()}],shadow:[{shadow:["","none",f,uu,cu]}],"shadow-color":[{shadow:L()}],"inset-shadow":[{"inset-shadow":["none",p,uu,cu]}],"inset-shadow-color":[{"inset-shadow":L()}],"ring-w":[{ring:fe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:L()}],"ring-offset-w":[{"ring-offset":[et,Ti]}],"ring-offset-color":[{"ring-offset":L()}],"inset-ring-w":[{"inset-ring":fe()}],"inset-ring-color":[{"inset-ring":L()}],"text-shadow":[{"text-shadow":["none",y,uu,cu]}],"text-shadow-color":[{"text-shadow":L()}],opacity:[{opacity:[et,De,Le]}],"mix-blend":[{"mix-blend":[...Ae(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ae()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[et]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ne()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ne()}],"mask-image-linear-from-color":[{"mask-linear-from":L()}],"mask-image-linear-to-color":[{"mask-linear-to":L()}],"mask-image-t-from-pos":[{"mask-t-from":Ne()}],"mask-image-t-to-pos":[{"mask-t-to":Ne()}],"mask-image-t-from-color":[{"mask-t-from":L()}],"mask-image-t-to-color":[{"mask-t-to":L()}],"mask-image-r-from-pos":[{"mask-r-from":Ne()}],"mask-image-r-to-pos":[{"mask-r-to":Ne()}],"mask-image-r-from-color":[{"mask-r-from":L()}],"mask-image-r-to-color":[{"mask-r-to":L()}],"mask-image-b-from-pos":[{"mask-b-from":Ne()}],"mask-image-b-to-pos":[{"mask-b-to":Ne()}],"mask-image-b-from-color":[{"mask-b-from":L()}],"mask-image-b-to-color":[{"mask-b-to":L()}],"mask-image-l-from-pos":[{"mask-l-from":Ne()}],"mask-image-l-to-pos":[{"mask-l-to":Ne()}],"mask-image-l-from-color":[{"mask-l-from":L()}],"mask-image-l-to-color":[{"mask-l-to":L()}],"mask-image-x-from-pos":[{"mask-x-from":Ne()}],"mask-image-x-to-pos":[{"mask-x-to":Ne()}],"mask-image-x-from-color":[{"mask-x-from":L()}],"mask-image-x-to-color":[{"mask-x-to":L()}],"mask-image-y-from-pos":[{"mask-y-from":Ne()}],"mask-image-y-to-pos":[{"mask-y-to":Ne()}],"mask-image-y-from-color":[{"mask-y-from":L()}],"mask-image-y-to-color":[{"mask-y-to":L()}],"mask-image-radial":[{"mask-radial":[De,Le]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ne()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ne()}],"mask-image-radial-from-color":[{"mask-radial-from":L()}],"mask-image-radial-to-color":[{"mask-radial-to":L()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":R()}],"mask-image-conic-pos":[{"mask-conic":[et]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ne()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ne()}],"mask-image-conic-from-color":[{"mask-conic-from":L()}],"mask-image-conic-to-color":[{"mask-conic-to":L()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Y()}],"mask-repeat":[{mask:ee()}],"mask-size":[{mask:H()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",De,Le]}],filter:[{filter:["","none",De,Le]}],blur:[{blur:ue()}],brightness:[{brightness:[et,De,Le]}],contrast:[{contrast:[et,De,Le]}],"drop-shadow":[{"drop-shadow":["","none",S,uu,cu]}],"drop-shadow-color":[{"drop-shadow":L()}],grayscale:[{grayscale:["",et,De,Le]}],"hue-rotate":[{"hue-rotate":[et,De,Le]}],invert:[{invert:["",et,De,Le]}],saturate:[{saturate:[et,De,Le]}],sepia:[{sepia:["",et,De,Le]}],"backdrop-filter":[{"backdrop-filter":["","none",De,Le]}],"backdrop-blur":[{"backdrop-blur":ue()}],"backdrop-brightness":[{"backdrop-brightness":[et,De,Le]}],"backdrop-contrast":[{"backdrop-contrast":[et,De,Le]}],"backdrop-grayscale":[{"backdrop-grayscale":["",et,De,Le]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[et,De,Le]}],"backdrop-invert":[{"backdrop-invert":["",et,De,Le]}],"backdrop-opacity":[{"backdrop-opacity":[et,De,Le]}],"backdrop-saturate":[{"backdrop-saturate":[et,De,Le]}],"backdrop-sepia":[{"backdrop-sepia":["",et,De,Le]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":k()}],"border-spacing-x":[{"border-spacing-x":k()}],"border-spacing-y":[{"border-spacing-y":k()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",De,Le]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[et,"initial",De,Le]}],ease:[{ease:["linear","initial",v,De,Le]}],delay:[{delay:[et,De,Le]}],animate:[{animate:["none",C,De,Le]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,De,Le]}],"perspective-origin":[{"perspective-origin":D()}],rotate:[{rotate:ve()}],"rotate-x":[{"rotate-x":ve()}],"rotate-y":[{"rotate-y":ve()}],"rotate-z":[{"rotate-z":ve()}],scale:[{scale:He()}],"scale-x":[{"scale-x":He()}],"scale-y":[{"scale-y":He()}],"scale-z":[{"scale-z":He()}],"scale-3d":["scale-3d"],skew:[{skew:ft()}],"skew-x":[{"skew-x":ft()}],"skew-y":[{"skew-y":ft()}],transform:[{transform:[De,Le,"","none","gpu","cpu"]}],"transform-origin":[{origin:D()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:U()}],"translate-x":[{"translate-x":U()}],"translate-y":[{"translate-y":U()}],"translate-z":[{"translate-z":U()}],"translate-none":["translate-none"],accent:[{accent:L()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:L()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",De,Le]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",De,Le]}],fill:[{fill:["none",...L()]}],"stroke-w":[{stroke:[et,qa,Ti,oh]}],stroke:[{stroke:["none",...L()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},gk=JR(mk);function sn(...t){return gk(s1(t))}const yk=kR("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),Qe=G.forwardRef(({className:t,variant:s,size:n,asChild:i=!1,...a},l)=>{const o=i?xR:"button";return g.jsx(o,{"data-slot":"button",className:sn(yk({variant:s,size:n,className:t})),ref:l,...a})});Qe.displayName="Button";function be({className:t,...s}){return g.jsx("div",{"data-slot":"card",className:sn("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...s})}function Re({className:t,...s}){return g.jsx("div",{"data-slot":"card-header",className:sn("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function ke({className:t,...s}){return g.jsx("h4",{"data-slot":"card-title",className:sn("leading-none",t),...s})}function We({className:t,...s}){return g.jsx("p",{"data-slot":"card-description",className:sn("text-muted-foreground",t),...s})}function Ce({className:t,...s}){return g.jsx("div",{"data-slot":"card-content",className:sn("px-6 [&:last-child]:pb-6",t),...s})}var vk=Xb();function Ek(t){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const wk=t=>{switch(t){case"success":return bk;case"info":return Tk;case"warning":return Ck;case"error":return _k;default:return null}},Sk=Array(12).fill(0),xk=({visible:t,className:s})=>G.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":t},G.createElement("div",{className:"sonner-spinner"},Sk.map((n,i)=>G.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),bk=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Ck=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Tk=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),_k=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Rk=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},G.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),G.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),kk=()=>{const[t,s]=G.useState(document.hidden);return G.useEffect(()=>{const n=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let ng=1;class Ik{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{const n=this.subscribers.indexOf(s);this.subscribers.splice(n,1)}),this.publish=s=>{this.subscribers.forEach(n=>n(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var n;const{message:i,...a}=s,l=typeof s?.id=="number"||((n=s.id)==null?void 0:n.length)>0?s.id:ng++,o=this.toasts.find(d=>d.id===l),u=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(l)&&this.dismissedToasts.delete(l),o?this.toasts=this.toasts.map(d=>d.id===l?(this.publish({...d,...s,id:l,title:i}),{...d,...s,id:l,dismissible:u,title:i}):d):this.addToast({title:i,...a,dismissible:u,id:l}),l},this.dismiss=s=>(s?(this.dismissedToasts.add(s),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:s,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(i=>i({id:n.id,dismiss:!0}))}),s),this.message=(s,n)=>this.create({...n,message:s}),this.error=(s,n)=>this.create({...n,message:s,type:"error"}),this.success=(s,n)=>this.create({...n,type:"success",message:s}),this.info=(s,n)=>this.create({...n,type:"info",message:s}),this.warning=(s,n)=>this.create({...n,type:"warning",message:s}),this.loading=(s,n)=>this.create({...n,type:"loading",message:s}),this.promise=(s,n)=>{if(!n)return;let i;n.loading!==void 0&&(i=this.create({...n,promise:s,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(s instanceof Function?s():s);let l=i!==void 0,o;const u=a.then(async h=>{if(o=["resolve",h],G.isValidElement(h))l=!1,this.create({id:i,type:"default",message:h});else if(Nk(h)&&!h.ok){l=!1;const p=typeof n.error=="function"?await n.error(`HTTP error! status: ${h.status}`):n.error,y=typeof n.description=="function"?await n.description(`HTTP error! status: ${h.status}`):n.description,E=typeof p=="object"&&!G.isValidElement(p)?p:{message:p};this.create({id:i,type:"error",description:y,...E})}else if(h instanceof Error){l=!1;const p=typeof n.error=="function"?await n.error(h):n.error,y=typeof n.description=="function"?await n.description(h):n.description,E=typeof p=="object"&&!G.isValidElement(p)?p:{message:p};this.create({id:i,type:"error",description:y,...E})}else if(n.success!==void 0){l=!1;const p=typeof n.success=="function"?await n.success(h):n.success,y=typeof n.description=="function"?await n.description(h):n.description,E=typeof p=="object"&&!G.isValidElement(p)?p:{message:p};this.create({id:i,type:"success",description:y,...E})}}).catch(async h=>{if(o=["reject",h],n.error!==void 0){l=!1;const f=typeof n.error=="function"?await n.error(h):n.error,p=typeof n.description=="function"?await n.description(h):n.description,S=typeof f=="object"&&!G.isValidElement(f)?f:{message:f};this.create({id:i,type:"error",description:p,...S})}}).finally(()=>{l&&(this.dismiss(i),i=void 0),n.finally==null||n.finally.call(n)}),d=()=>new Promise((h,f)=>u.then(()=>o[0]==="reject"?f(o[1]):h(o[1])).catch(f));return typeof i!="string"&&typeof i!="number"?{unwrap:d}:Object.assign(i,{unwrap:d})},this.custom=(s,n)=>{const i=n?.id||ng++;return this.create({jsx:s(i),id:i,...n}),i},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Or=new Ik,Ak=(t,s)=>{const n=s?.id||ng++;return Or.addToast({title:t,...s,id:n}),n},Nk=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Pk=Ak,Ok=()=>Or.toasts,jk=()=>Or.getActiveToasts(),pe=Object.assign(Pk,{success:Or.success,info:Or.info,warning:Or.warning,error:Or.error,custom:Or.custom,message:Or.message,promise:Or.promise,dismiss:Or.dismiss,loading:Or.loading},{getHistory:Ok,getToasts:jk});Ek("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function du(t){return t.label!==void 0}const Lk=3,Dk="24px",Mk="16px",WE=4e3,$k=356,Uk=14,qk=45,Fk=200;function $n(...t){return t.filter(Boolean).join(" ")}function Hk(t){const[s,n]=t.split("-"),i=[];return s&&i.push(s),n&&i.push(n),i}const Bk=t=>{var s,n,i,a,l,o,u,d,h;const{invert:f,toast:p,unstyled:y,interacting:S,setHeights:E,visibleToasts:b,heights:x,index:v,toasts:C,expanded:_,removeToast:R,defaultRichColors:D,closeButton:A,style:j,cancelButtonStyle:k,actionButtonStyle:K,className:Z="",descriptionClassName:ie="",duration:ce,position:V,gap:F,expandByDefault:O,classNames:q,icons:W,closeButtonAriaLabel:L="Close toast"}=t,[Y,ee]=G.useState(null),[H,X]=G.useState(null),[ne,fe]=G.useState(!1),[he,Ae]=G.useState(!1),[Ne,ue]=G.useState(!1),[ve,He]=G.useState(!1),[ft,U]=G.useState(!1),[me,Ee]=G.useState(0),[tt,st]=G.useState(0),lt=G.useRef(p.duration||ce||WE),ei=G.useRef(null),lr=G.useRef(null),Kn=v===0,Cn=v+1<=b,Mt=p.type,zr=p.dismissible!==!1,Vi=p.className||"",ra=p.descriptionClassName||"",ae=G.useMemo(()=>x.findIndex(Je=>Je.toastId===p.id)||0,[x,p.id]),Rt=G.useMemo(()=>{var Je;return(Je=p.closeButton)!=null?Je:A},[p.closeButton,A]),Ye=G.useMemo(()=>p.duration||ce||WE,[p.duration,ce]),Es=G.useRef(0),er=G.useRef(0),on=G.useRef(0),an=G.useRef(null),[Gi,Ji]=V.split("-"),Wn=G.useMemo(()=>x.reduce((Je,wt,kt)=>kt>=ae?Je:Je+wt.height,0),[x,ae]),Vn=kk(),Gn=p.invert||f,Tn=Mt==="loading";er.current=G.useMemo(()=>ae*F+Wn,[ae,Wn]),G.useEffect(()=>{lt.current=Ye},[Ye]),G.useEffect(()=>{fe(!0)},[]),G.useEffect(()=>{const Je=lr.current;if(Je){const wt=Je.getBoundingClientRect().height;return st(wt),E(kt=>[{toastId:p.id,height:wt,position:p.position},...kt]),()=>E(kt=>kt.filter(zt=>zt.toastId!==p.id))}},[E,p.id]),G.useLayoutEffect(()=>{if(!ne)return;const Je=lr.current,wt=Je.style.height;Je.style.height="auto";const kt=Je.getBoundingClientRect().height;Je.style.height=wt,st(kt),E(zt=>zt.find(vt=>vt.toastId===p.id)?zt.map(vt=>vt.toastId===p.id?{...vt,height:kt}:vt):[{toastId:p.id,height:kt,position:p.position},...zt])},[ne,p.title,p.description,E,p.id,p.jsx,p.action,p.cancel]);const xr=G.useCallback(()=>{Ae(!0),Ee(er.current),E(Je=>Je.filter(wt=>wt.toastId!==p.id)),setTimeout(()=>{R(p)},Fk)},[p,R,E,er]);G.useEffect(()=>{if(p.promise&&Mt==="loading"||p.duration===1/0||p.type==="loading")return;let Je;return _||S||Vn?(()=>{if(on.current<Es.current){const zt=new Date().getTime()-Es.current;lt.current=lt.current-zt}on.current=new Date().getTime()})():(()=>{lt.current!==1/0&&(Es.current=new Date().getTime(),Je=setTimeout(()=>{p.onAutoClose==null||p.onAutoClose.call(p,p),xr()},lt.current))})(),()=>clearTimeout(Je)},[_,S,p,Mt,Vn,xr]),G.useEffect(()=>{p.delete&&(xr(),p.onDismiss==null||p.onDismiss.call(p,p))},[xr,p.delete]);function ws(){var Je;if(W?.loading){var wt;return G.createElement("div",{className:$n(q?.loader,p==null||(wt=p.classNames)==null?void 0:wt.loader,"sonner-loader"),"data-visible":Mt==="loading"},W.loading)}return G.createElement(xk,{className:$n(q?.loader,p==null||(Je=p.classNames)==null?void 0:Je.loader),visible:Mt==="loading"})}const _n=p.icon||W?.[Mt]||wk(Mt);var Kr,Ss;return G.createElement("li",{tabIndex:0,ref:lr,className:$n(Z,Vi,q?.toast,p==null||(s=p.classNames)==null?void 0:s.toast,q?.default,q?.[Mt],p==null||(n=p.classNames)==null?void 0:n[Mt]),"data-sonner-toast":"","data-rich-colors":(Kr=p.richColors)!=null?Kr:D,"data-styled":!(p.jsx||p.unstyled||y),"data-mounted":ne,"data-promise":!!p.promise,"data-swiped":ft,"data-removed":he,"data-visible":Cn,"data-y-position":Gi,"data-x-position":Ji,"data-index":v,"data-front":Kn,"data-swiping":Ne,"data-dismissible":zr,"data-type":Mt,"data-invert":Gn,"data-swipe-out":ve,"data-swipe-direction":H,"data-expanded":!!(_||O&&ne),"data-testid":p.testId,style:{"--index":v,"--toasts-before":v,"--z-index":C.length-v,"--offset":`${he?me:er.current}px`,"--initial-height":O?"auto":`${tt}px`,...j,...p.style},onDragEnd:()=>{ue(!1),ee(null),an.current=null},onPointerDown:Je=>{Je.button!==2&&(Tn||!zr||(ei.current=new Date,Ee(er.current),Je.target.setPointerCapture(Je.pointerId),Je.target.tagName!=="BUTTON"&&(ue(!0),an.current={x:Je.clientX,y:Je.clientY})))},onPointerUp:()=>{var Je,wt,kt;if(ve||!zr)return;an.current=null;const zt=Number(((Je=lr.current)==null?void 0:Je.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Wr=Number(((wt=lr.current)==null?void 0:wt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),vt=new Date().getTime()-((kt=ei.current)==null?void 0:kt.getTime()),Ot=Y==="x"?zt:Wr,Rn=Math.abs(Ot)/vt;if(Math.abs(Ot)>=qk||Rn>.11){Ee(er.current),p.onDismiss==null||p.onDismiss.call(p,p),X(Y==="x"?zt>0?"right":"left":Wr>0?"down":"up"),xr(),He(!0);return}else{var $t,cr;($t=lr.current)==null||$t.style.setProperty("--swipe-amount-x","0px"),(cr=lr.current)==null||cr.style.setProperty("--swipe-amount-y","0px")}U(!1),ue(!1),ee(null)},onPointerMove:Je=>{var wt,kt,zt;if(!an.current||!zr||((wt=window.getSelection())==null?void 0:wt.toString().length)>0)return;const vt=Je.clientY-an.current.y,Ot=Je.clientX-an.current.x;var Rn;const $t=(Rn=t.swipeDirections)!=null?Rn:Hk(V);!Y&&(Math.abs(Ot)>1||Math.abs(vt)>1)&&ee(Math.abs(Ot)>Math.abs(vt)?"x":"y");let cr={x:0,y:0};const pt=br=>1/(1.5+Math.abs(br)/20);if(Y==="y"){if($t.includes("top")||$t.includes("bottom"))if($t.includes("top")&&vt<0||$t.includes("bottom")&&vt>0)cr.y=vt;else{const br=vt*pt(vt);cr.y=Math.abs(br)<Math.abs(vt)?br:vt}}else if(Y==="x"&&($t.includes("left")||$t.includes("right")))if($t.includes("left")&&Ot<0||$t.includes("right")&&Ot>0)cr.x=Ot;else{const br=Ot*pt(Ot);cr.x=Math.abs(br)<Math.abs(Ot)?br:Ot}(Math.abs(cr.x)>0||Math.abs(cr.y)>0)&&U(!0),(kt=lr.current)==null||kt.style.setProperty("--swipe-amount-x",`${cr.x}px`),(zt=lr.current)==null||zt.style.setProperty("--swipe-amount-y",`${cr.y}px`)}},Rt&&!p.jsx&&Mt!=="loading"?G.createElement("button",{"aria-label":L,"data-disabled":Tn,"data-close-button":!0,onClick:Tn||!zr?()=>{}:()=>{xr(),p.onDismiss==null||p.onDismiss.call(p,p)},className:$n(q?.closeButton,p==null||(i=p.classNames)==null?void 0:i.closeButton)},(Ss=W?.close)!=null?Ss:Rk):null,(Mt||p.icon||p.promise)&&p.icon!==null&&(W?.[Mt]!==null||p.icon)?G.createElement("div",{"data-icon":"",className:$n(q?.icon,p==null||(a=p.classNames)==null?void 0:a.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||ws():null,p.type!=="loading"?_n:null):null,G.createElement("div",{"data-content":"",className:$n(q?.content,p==null||(l=p.classNames)==null?void 0:l.content)},G.createElement("div",{"data-title":"",className:$n(q?.title,p==null||(o=p.classNames)==null?void 0:o.title)},p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title),p.description?G.createElement("div",{"data-description":"",className:$n(ie,ra,q?.description,p==null||(u=p.classNames)==null?void 0:u.description)},typeof p.description=="function"?p.description():p.description):null),G.isValidElement(p.cancel)?p.cancel:p.cancel&&du(p.cancel)?G.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||k,onClick:Je=>{du(p.cancel)&&zr&&(p.cancel.onClick==null||p.cancel.onClick.call(p.cancel,Je),xr())},className:$n(q?.cancelButton,p==null||(d=p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,G.isValidElement(p.action)?p.action:p.action&&du(p.action)?G.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||K,onClick:Je=>{du(p.action)&&(p.action.onClick==null||p.action.onClick.call(p.action,Je),!Je.defaultPrevented&&xr())},className:$n(q?.actionButton,p==null||(h=p.classNames)==null?void 0:h.actionButton)},p.action.label):null)};function VE(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function zk(t,s){const n={};return[t,s].forEach((i,a)=>{const l=a===1,o=l?"--mobile-offset":"--offset",u=l?Mk:Dk;function d(h){["top","right","bottom","left"].forEach(f=>{n[`${o}-${f}`]=typeof h=="number"?`${h}px`:h})}typeof i=="number"||typeof i=="string"?d(i):typeof i=="object"?["top","right","bottom","left"].forEach(h=>{i[h]===void 0?n[`${o}-${h}`]=u:n[`${o}-${h}`]=typeof i[h]=="number"?`${i[h]}px`:i[h]}):d(u)}),n}const Kk=G.forwardRef(function(s,n){const{id:i,invert:a,position:l="bottom-right",hotkey:o=["altKey","KeyT"],expand:u,closeButton:d,className:h,offset:f,mobileOffset:p,theme:y="light",richColors:S,duration:E,style:b,visibleToasts:x=Lk,toastOptions:v,dir:C=VE(),gap:_=Uk,icons:R,containerAriaLabel:D="Notifications"}=s,[A,j]=G.useState([]),k=G.useMemo(()=>i?A.filter(ne=>ne.toasterId===i):A.filter(ne=>!ne.toasterId),[A,i]),K=G.useMemo(()=>Array.from(new Set([l].concat(k.filter(ne=>ne.position).map(ne=>ne.position)))),[k,l]),[Z,ie]=G.useState([]),[ce,V]=G.useState(!1),[F,O]=G.useState(!1),[q,W]=G.useState(y!=="system"?y:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),L=G.useRef(null),Y=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),ee=G.useRef(null),H=G.useRef(!1),X=G.useCallback(ne=>{j(fe=>{var he;return(he=fe.find(Ae=>Ae.id===ne.id))!=null&&he.delete||Or.dismiss(ne.id),fe.filter(({id:Ae})=>Ae!==ne.id)})},[]);return G.useEffect(()=>Or.subscribe(ne=>{if(ne.dismiss){requestAnimationFrame(()=>{j(fe=>fe.map(he=>he.id===ne.id?{...he,delete:!0}:he))});return}setTimeout(()=>{vk.flushSync(()=>{j(fe=>{const he=fe.findIndex(Ae=>Ae.id===ne.id);return he!==-1?[...fe.slice(0,he),{...fe[he],...ne},...fe.slice(he+1)]:[ne,...fe]})})})}),[A]),G.useEffect(()=>{if(y!=="system"){W(y);return}if(y==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?W("dark"):W("light")),typeof window>"u")return;const ne=window.matchMedia("(prefers-color-scheme: dark)");try{ne.addEventListener("change",({matches:fe})=>{W(fe?"dark":"light")})}catch{ne.addListener(({matches:he})=>{try{W(he?"dark":"light")}catch(Ae){console.error(Ae)}})}},[y]),G.useEffect(()=>{A.length<=1&&V(!1)},[A]),G.useEffect(()=>{const ne=fe=>{var he;if(o.every(ue=>fe[ue]||fe.code===ue)){var Ne;V(!0),(Ne=L.current)==null||Ne.focus()}fe.code==="Escape"&&(document.activeElement===L.current||(he=L.current)!=null&&he.contains(document.activeElement))&&V(!1)};return document.addEventListener("keydown",ne),()=>document.removeEventListener("keydown",ne)},[o]),G.useEffect(()=>{if(L.current)return()=>{ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null,H.current=!1)}},[L.current]),G.createElement("section",{ref:n,"aria-label":`${D} ${Y}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},K.map((ne,fe)=>{var he;const[Ae,Ne]=ne.split("-");return k.length?G.createElement("ol",{key:ne,dir:C==="auto"?VE():C,tabIndex:-1,ref:L,className:h,"data-sonner-toaster":!0,"data-sonner-theme":q,"data-y-position":Ae,"data-x-position":Ne,style:{"--front-toast-height":`${((he=Z[0])==null?void 0:he.height)||0}px`,"--width":`${$k}px`,"--gap":`${_}px`,...b,...zk(f,p)},onBlur:ue=>{H.current&&!ue.currentTarget.contains(ue.relatedTarget)&&(H.current=!1,ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null))},onFocus:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||H.current||(H.current=!0,ee.current=ue.relatedTarget)},onMouseEnter:()=>V(!0),onMouseMove:()=>V(!0),onMouseLeave:()=>{F||V(!1)},onDragEnd:()=>V(!1),onPointerDown:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||O(!0)},onPointerUp:()=>O(!1)},k.filter(ue=>!ue.position&&fe===0||ue.position===ne).map((ue,ve)=>{var He,ft;return G.createElement(Bk,{key:ue.id,icons:R,index:ve,toast:ue,defaultRichColors:S,duration:(He=v?.duration)!=null?He:E,className:v?.className,descriptionClassName:v?.descriptionClassName,invert:a,visibleToasts:x,closeButton:(ft=v?.closeButton)!=null?ft:d,interacting:F,position:ne,style:v?.style,unstyled:v?.unstyled,classNames:v?.classNames,cancelButtonStyle:v?.cancelButtonStyle,actionButtonStyle:v?.actionButtonStyle,closeButtonAriaLabel:v?.closeButtonAriaLabel,removeToast:X,toasts:k.filter(U=>U.position==ue.position),heights:Z.filter(U=>U.position==ue.position),setHeights:ie,expandByDefault:u,gap:_,expanded:ce,swipeDirections:s.swipeDirections})})):null}))});var _i={},Br={};const $u={createHash:()=>({update:()=>({digest:()=>""})}),randomBytes:()=>({toString:()=>""})};typeof Be<"u"&&Be.exports&&(Be.exports=$u,Be.exports.default=$u);const Wk=Object.freeze(Object.defineProperty({__proto__:null,crypto:$u,default:$u},Symbol.toStringTag,{value:"Module"})),Wi=Ml(Wk);var Ri={},GE;function $l(){if(GE)return Ri;GE=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.isBrowser=t,Ri.validateUrl=s,Ri.resolveControllerUrl=n,Ri.resolveKeycloakUrl=i;function t(){return typeof globalThis.window<"u"&&typeof globalThis.localStorage<"u"&&typeof globalThis.fetch<"u"}function s(a){try{const l=new URL(a);return l.protocol==="http:"||l.protocol==="https:"}catch{return!1}}function n(a){const l=t();let o;if(l?o=a.controllerPublicUrl:o=a.controllerPrivateUrl,o||(o=a.controllerUrl),!o)throw new Error(`No controller URL configured. Please provide ${l?"controllerPublicUrl":"controllerPrivateUrl"} or controllerUrl in your configuration.`);if(!s(o))throw new Error(`Invalid controller URL format: "${o}". URL must be a valid HTTP or HTTPS URL.`);return o.includes("localhost")&&(o=o.replace(/localhost/g,"127.0.0.1")),o}function i(a){const l=t();let o;if(l?o=a.authServerPublicUrl:o=a.authServerPrivateUrl,o||(o=a.authServerUrl),!o)throw new Error(`No Keycloak URL configured. Please provide ${l?"authServerPublicUrl":"authServerPrivateUrl"} or authServerUrl in your Keycloak configuration.`);if(!s(o))throw new Error(`Invalid Keycloak URL format: "${o}". URL must be a valid HTTP or HTTPS URL.`);return o.includes("localhost")&&(o=o.replace(/localhost/g,"127.0.0.1")),o}return Ri}var ls={},fu={exports:{}};const Ys=Ml(O_);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var JE;function Ul(){return JE||(JE=1,(function(t,s){var n=Ys,i=n.Buffer;function a(o,u){for(var d in o)u[d]=o[d]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(a(n,s),s.Buffer=l);function l(o,u,d){return i(o,u,d)}l.prototype=Object.create(i.prototype),a(i,l),l.from=function(o,u,d){if(typeof o=="number")throw new TypeError("Argument must not be a number");return i(o,u,d)},l.alloc=function(o,u,d){if(typeof o!="number")throw new TypeError("Argument must be a number");var h=i(o);return u!==void 0?typeof d=="string"?h.fill(u,d):h.fill(u):h.fill(0),h},l.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return i(o)},l.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(fu,fu.exports)),fu.exports}class Qs{static from(s){return new Qs}constructor(){}pipe(){return{}}on(){return this}once(){return Promise.resolve({})}read(){return null}push(){return!0}destroy(){}emit(){return!1}removeListener(){return this}removeAllListeners(){return this}}class Gu{write(){return!0}end(){return this}on(){return this}once(){return Promise.resolve({})}destroy(){}}class Ju extends Qs{_transform(){}}class Tg extends Qs{write(){return!0}end(){return this}}class _g extends Ju{}const Bi={Readable:Qs,Writable:Gu,Transform:Ju,Duplex:Tg,PassThrough:_g};typeof Be<"u"&&typeof Be.exports<"u"&&(Be.exports=Bi,Be.exports.default=Bi,Be.exports.stream=Bi,Be.exports.Readable=Qs,Be.exports.Writable=Gu,Be.exports.Transform=Ju,Be.exports.Duplex=Tg,Be.exports.PassThrough=_g);typeof nt<"u"&&(nt.default=Bi,nt.stream=Bi,nt.Readable=Qs,nt.Writable=Gu,nt.Transform=Ju,nt.Duplex=Tg,nt.PassThrough=_g);const Vo=Object.freeze(Object.defineProperty({__proto__:null,Readable:Qs,Writable:Gu,default:Bi,stream:Bi},Symbol.toStringTag,{value:"Module"}));function Yu(t,s){if(!s)return;let n=s.prototype;if(!n)try{Object.isExtensible&&Object.isExtensible(s)?(s.prototype={},n=s.prototype):n=Object.prototype}catch{n=Object.prototype}(typeof n!="object"||n===null)&&(n=Object.prototype),t.super_=s;try{t.prototype=Object.create(n,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}catch{try{if(t.prototype=Object.create(Object.prototype),t.prototype.constructor=t,n&&typeof n=="object"&&n!==Object.prototype){for(const a in n)if(n.hasOwnProperty(a))try{t.prototype[a]=n[a]}catch{}}}catch{t.prototype||(t.prototype={}),t.prototype.constructor||(t.prototype.constructor=t)}}}function Xu(t){try{return JSON.stringify(t,null,2)}catch{return String(t)}}function Qu(t){return function(...s){return new Promise((n,i)=>{t(...s,(a,l)=>{a?i(a):n(l)})})}}function Zu(t,s){let n=!1;return function(...i){return n||(console.warn("DeprecationWarning:",s),n=!0),t.apply(this,i)}}const zi={inherits:Yu,inspect:Xu,promisify:Qu,deprecate:Zu};typeof Be<"u"&&typeof Be.exports<"u"&&(Be.exports=zi,Be.exports.default=zi,Be.exports.util=zi,Be.exports.inherits=Yu,Be.exports.inspect=Xu,Be.exports.promisify=Qu,Be.exports.deprecate=Zu);typeof nt<"u"&&(nt.default=zi,nt.util=zi,nt.inherits=Yu,nt.inspect=Xu,nt.promisify=Qu,nt.deprecate=Zu);const Zs=Object.freeze(Object.defineProperty({__proto__:null,default:zi,deprecate:Zu,inherits:Yu,inspect:Xu,promisify:Qu,util:zi},Symbol.toStringTag,{value:"Module"}));var ah,YE;function y1(){if(YE)return ah;YE=1;var t=Ul().Buffer,s=Vo,n=Zs;function i(a){if(this.buffer=null,this.writable=!0,this.readable=!0,!a)return this.buffer=t.alloc(0),this;if(typeof a.pipe=="function")return this.buffer=t.alloc(0),a.pipe(this),this;if(a.length||typeof a=="object")return this.buffer=a,this.writable=!1,process.nextTick(function(){this.emit("end",a),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof a+")")}return n.inherits(i,s),i.prototype.write=function(l){this.buffer=t.concat([this.buffer,t.from(l)]),this.emit("data",l)},i.prototype.end=function(l){l&&this.write(l),this.emit("end",l),this.emit("close"),this.writable=!1,this.readable=!1},ah=i,ah}var lh,XE;function Vk(){if(XE)return lh;XE=1;function t(i){var a=(i/8|0)+(i%8===0?0:1);return a}var s={ES256:t(256),ES384:t(384),ES512:t(521)};function n(i){var a=s[i];if(a)return a;throw new Error('Unknown algorithm "'+i+'"')}return lh=n,lh}var ch,QE;function Gk(){if(QE)return ch;QE=1;var t=Ul().Buffer,s=Vk(),n=128,i=0,a=32,l=16,o=2,u=l|a|i<<6,d=o|i<<6;function h(E){return E.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function f(E){if(t.isBuffer(E))return E;if(typeof E=="string")return t.from(E,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function p(E,b){E=f(E);var x=s(b),v=x+1,C=E.length,_=0;if(E[_++]!==u)throw new Error('Could not find expected "seq"');var R=E[_++];if(R===(n|1)&&(R=E[_++]),C-_<R)throw new Error('"seq" specified length of "'+R+'", only "'+(C-_)+'" remaining');if(E[_++]!==d)throw new Error('Could not find expected "int" for "r"');var D=E[_++];if(C-_-2<D)throw new Error('"r" specified length of "'+D+'", only "'+(C-_-2)+'" available');if(v<D)throw new Error('"r" specified length of "'+D+'", max of "'+v+'" is acceptable');var A=_;if(_+=D,E[_++]!==d)throw new Error('Could not find expected "int" for "s"');var j=E[_++];if(C-_!==j)throw new Error('"s" specified length of "'+j+'", expected "'+(C-_)+'"');if(v<j)throw new Error('"s" specified length of "'+j+'", max of "'+v+'" is acceptable');var k=_;if(_+=j,_!==C)throw new Error('Expected to consume entire buffer, but "'+(C-_)+'" bytes remain');var K=x-D,Z=x-j,ie=t.allocUnsafe(K+D+Z+j);for(_=0;_<K;++_)ie[_]=0;E.copy(ie,_,A+Math.max(-K,0),A+D),_=x;for(var ce=_;_<ce+Z;++_)ie[_]=0;return E.copy(ie,_,k+Math.max(-Z,0),k+j),ie=ie.toString("base64"),ie=h(ie),ie}function y(E,b,x){for(var v=0;b+v<x&&E[b+v]===0;)++v;var C=E[b+v]>=n;return C&&--v,v}function S(E,b){E=f(E);var x=s(b),v=E.length;if(v!==x*2)throw new TypeError('"'+b+'" signatures must be "'+x*2+'" bytes, saw "'+v+'"');var C=y(E,0,x),_=y(E,x,E.length),R=x-C,D=x-_,A=2+R+1+1+D,j=A<n,k=t.allocUnsafe((j?2:3)+A),K=0;return k[K++]=u,j?k[K++]=A:(k[K++]=n|1,k[K++]=A&255),k[K++]=d,k[K++]=R,C<0?(k[K++]=0,K+=E.copy(k,K,0,x)):K+=E.copy(k,K,C,x),k[K++]=d,k[K++]=D,_<0?(k[K++]=0,E.copy(k,K,x)):E.copy(k,K,x+_),k}return ch={derToJose:p,joseToDer:S},ch}var uh,ZE;function Jk(){if(ZE)return uh;ZE=1;var t=Ys.Buffer,s=Ys.SlowBuffer;uh=n;function n(l,o){if(!t.isBuffer(l)||!t.isBuffer(o)||l.length!==o.length)return!1;for(var u=0,d=0;d<l.length;d++)u|=l[d]^o[d];return u===0}n.install=function(){t.prototype.equal=s.prototype.equal=function(o){return n(this,o)}};var i=t.prototype.equal,a=s.prototype.equal;return n.restore=function(){t.prototype.equal=i,s.prototype.equal=a},uh}var dh,ew;function v1(){if(ew)return dh;ew=1;var t=Ul().Buffer,s=Wi,n=Gk(),i=Zs,a=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,l="secret must be a string or buffer",o="key must be a string or a buffer",u="key must be a string, a buffer or an object",d=typeof s.createPublicKey=="function";d&&(o+=" or a KeyObject",l+="or a KeyObject");function h(V){if(!t.isBuffer(V)&&typeof V!="string"&&(!d||typeof V!="object"||typeof V.type!="string"||typeof V.asymmetricKeyType!="string"||typeof V.export!="function"))throw E(o)}function f(V){if(!t.isBuffer(V)&&typeof V!="string"&&typeof V!="object")throw E(u)}function p(V){if(!t.isBuffer(V)){if(typeof V=="string")return V;if(!d||typeof V!="object"||V.type!=="secret"||typeof V.export!="function")throw E(l)}}function y(V){return V.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function S(V){V=V.toString();var F=4-V.length%4;if(F!==4)for(var O=0;O<F;++O)V+="=";return V.replace(/\-/g,"+").replace(/_/g,"/")}function E(V){var F=[].slice.call(arguments,1),O=i.format.bind(i,V).apply(null,F);return new TypeError(O)}function b(V){return t.isBuffer(V)||typeof V=="string"}function x(V){return b(V)||(V=JSON.stringify(V)),V}function v(V){return function(O,q){p(q),O=x(O);var W=s.createHmac("sha"+V,q),L=(W.update(O),W.digest("base64"));return y(L)}}var C,_="timingSafeEqual"in s?function(F,O){return F.byteLength!==O.byteLength?!1:s.timingSafeEqual(F,O)}:function(F,O){return C||(C=Jk()),C(F,O)};function R(V){return function(O,q,W){var L=v(V)(O,W);return _(t.from(q),t.from(L))}}function D(V){return function(O,q){f(q),O=x(O);var W=s.createSign("RSA-SHA"+V),L=(W.update(O),W.sign(q,"base64"));return y(L)}}function A(V){return function(O,q,W){h(W),O=x(O),q=S(q);var L=s.createVerify("RSA-SHA"+V);return L.update(O),L.verify(W,q,"base64")}}function j(V){return function(O,q){f(q),O=x(O);var W=s.createSign("RSA-SHA"+V),L=(W.update(O),W.sign({key:q,padding:s.constants.RSA_PKCS1_PSS_PADDING,saltLength:s.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return y(L)}}function k(V){return function(O,q,W){h(W),O=x(O),q=S(q);var L=s.createVerify("RSA-SHA"+V);return L.update(O),L.verify({key:W,padding:s.constants.RSA_PKCS1_PSS_PADDING,saltLength:s.constants.RSA_PSS_SALTLEN_DIGEST},q,"base64")}}function K(V){var F=D(V);return function(){var q=F.apply(null,arguments);return q=n.derToJose(q,"ES"+V),q}}function Z(V){var F=A(V);return function(q,W,L){W=n.joseToDer(W,"ES"+V).toString("base64");var Y=F(q,W,L);return Y}}function ie(){return function(){return""}}function ce(){return function(F,O){return O===""}}return dh=function(F){var O={hs:v,rs:D,ps:j,es:K,none:ie},q={hs:R,rs:A,ps:k,es:Z,none:ce},W=F.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!W)throw E(a,F);var L=(W[1]||W[3]).toLowerCase(),Y=W[2];return{sign:O[L](Y),verify:q[L](Y)}},dh}var fh,tw;function E1(){if(tw)return fh;tw=1;var t=Ys.Buffer;return fh=function(n){return typeof n=="string"?n:typeof n=="number"||t.isBuffer(n)?n.toString():JSON.stringify(n)},fh}var hh,rw;function Yk(){if(rw)return hh;rw=1;var t=Ul().Buffer,s=y1(),n=v1(),i=Vo,a=E1(),l=Zs;function o(f,p){return t.from(f,p).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function u(f,p,y){y=y||"utf8";var S=o(a(f),"binary"),E=o(a(p),y);return l.format("%s.%s",S,E)}function d(f){var p=f.header,y=f.payload,S=f.secret||f.privateKey,E=f.encoding,b=n(p.alg),x=u(p,y,E),v=b.sign(x,S);return l.format("%s.%s",x,v)}function h(f){var p=f.secret;if(p=p??f.privateKey,p=p??f.key,/^hs/i.test(f.header.alg)===!0&&p==null)throw new TypeError("secret must be a string or buffer or a KeyObject");var y=new s(p);this.readable=!0,this.header=f.header,this.encoding=f.encoding,this.secret=this.privateKey=this.key=y,this.payload=new s(f.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}return l.inherits(h,i),h.prototype.sign=function(){try{var p=d({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",p),this.emit("data",p),this.emit("end"),this.readable=!1,p}catch(y){this.readable=!1,this.emit("error",y),this.emit("close")}},h.sign=d,hh=h,hh}var ph,nw;function Xk(){if(nw)return ph;nw=1;var t=Ul().Buffer,s=y1(),n=v1(),i=Vo,a=E1(),l=Zs,o=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function u(v){return Object.prototype.toString.call(v)==="[object Object]"}function d(v){if(u(v))return v;try{return JSON.parse(v)}catch{return}}function h(v){var C=v.split(".",1)[0];return d(t.from(C,"base64").toString("binary"))}function f(v){return v.split(".",2).join(".")}function p(v){return v.split(".")[2]}function y(v,C){C=C||"utf8";var _=v.split(".")[1];return t.from(_,"base64").toString(C)}function S(v){return o.test(v)&&!!h(v)}function E(v,C,_){if(!C){var R=new Error("Missing algorithm parameter for jws.verify");throw R.code="MISSING_ALGORITHM",R}v=a(v);var D=p(v),A=f(v),j=n(C);return j.verify(A,D,_)}function b(v,C){if(C=C||{},v=a(v),!S(v))return null;var _=h(v);if(!_)return null;var R=y(v);return(_.typ==="JWT"||C.json)&&(R=JSON.parse(R,C.encoding)),{header:_,payload:R,signature:p(v)}}function x(v){v=v||{};var C=v.secret;if(C=C??v.publicKey,C=C??v.key,/^hs/i.test(v.algorithm)===!0&&C==null)throw new TypeError("secret must be a string or buffer or a KeyObject");var _=new s(C);this.readable=!0,this.algorithm=v.algorithm,this.encoding=v.encoding,this.secret=this.publicKey=this.key=_,this.signature=new s(v.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}return l.inherits(x,i),x.prototype.verify=function(){try{var C=E(this.signature.buffer,this.algorithm,this.key.buffer),_=b(this.signature.buffer,this.encoding);return this.emit("done",C,_),this.emit("data",C),this.emit("end"),this.readable=!1,C}catch(R){this.readable=!1,this.emit("error",R),this.emit("close")}},x.decode=b,x.isValid=S,x.verify=E,ph=x,ph}var sw;function Rg(){if(sw)return ls;sw=1;var t=Yk(),s=Xk(),n=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];return ls.ALGORITHMS=n,ls.sign=t.sign,ls.verify=s.verify,ls.decode=s.decode,ls.isValid=s.isValid,ls.createSign=function(a){return new t(a)},ls.createVerify=function(a){return new s(a)},ls}var mh,iw;function w1(){if(iw)return mh;iw=1;var t=Rg();return mh=function(s,n){n=n||{};var i=t.decode(s,n);if(!i)return null;var a=i.payload;if(typeof a=="string")try{var l=JSON.parse(a);l!==null&&typeof l=="object"&&(a=l)}catch{}return n.complete===!0?{header:i.header,payload:a,signature:i.signature}:a},mh}var gh,ow;function ed(){if(ow)return gh;ow=1;var t=function(s,n){Error.call(this,s),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=s,n&&(this.inner=n)};return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,gh=t,gh}var yh,aw;function S1(){if(aw)return yh;aw=1;var t=ed(),s=function(n,i){t.call(this,n),this.name="NotBeforeError",this.date=i};return s.prototype=Object.create(t.prototype),s.prototype.constructor=s,yh=s,yh}var vh,lw;function x1(){if(lw)return vh;lw=1;var t=ed(),s=function(n,i){t.call(this,n),this.name="TokenExpiredError",this.expiredAt=i};return s.prototype=Object.create(t.prototype),s.prototype.constructor=s,vh=s,vh}var Eh,cw;function Qk(){if(cw)return Eh;cw=1;var t=1e3,s=t*60,n=s*60,i=n*24,a=i*7,l=i*365.25;Eh=function(f,p){p=p||{};var y=typeof f;if(y==="string"&&f.length>0)return o(f);if(y==="number"&&isFinite(f))return p.long?d(f):u(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function o(f){if(f=String(f),!(f.length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(p){var y=parseFloat(p[1]),S=(p[2]||"ms").toLowerCase();switch(S){case"years":case"year":case"yrs":case"yr":case"y":return y*l;case"weeks":case"week":case"w":return y*a;case"days":case"day":case"d":return y*i;case"hours":case"hour":case"hrs":case"hr":case"h":return y*n;case"minutes":case"minute":case"mins":case"min":case"m":return y*s;case"seconds":case"second":case"secs":case"sec":case"s":return y*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}}function u(f){var p=Math.abs(f);return p>=i?Math.round(f/i)+"d":p>=n?Math.round(f/n)+"h":p>=s?Math.round(f/s)+"m":p>=t?Math.round(f/t)+"s":f+"ms"}function d(f){var p=Math.abs(f);return p>=i?h(f,p,i,"day"):p>=n?h(f,p,n,"hour"):p>=s?h(f,p,s,"minute"):p>=t?h(f,p,t,"second"):f+" ms"}function h(f,p,y,S){var E=p>=y*1.5;return Math.round(f/y)+" "+S+(E?"s":"")}return Eh}var wh,uw;function b1(){if(uw)return wh;uw=1;var t=Qk();return wh=function(s,n){var i=n||Math.floor(Date.now()/1e3);if(typeof s=="string"){var a=t(s);return typeof a>"u"?void 0:Math.floor(i+a/1e3)}else return typeof s=="number"?i+s:void 0},wh}var hu={exports:{}},Sh,dw;function td(){if(dw)return Sh;dw=1;const t="2.0.0",s=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,a=s-6;return Sh={MAX_LENGTH:s,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:a,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Sh}var xh,fw;function rd(){if(fw)return xh;fw=1;var t={};return xh=typeof process=="object"&&t&&t.NODE_DEBUG&&/\bsemver\b/i.test(t.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},xh}var hw;function ql(){return hw||(hw=1,(function(t,s){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:a}=td(),l=rd();s=t.exports={};const o=s.re=[],u=s.safeRe=[],d=s.src=[],h=s.safeSrc=[],f=s.t={};let p=0;const y="[a-zA-Z0-9-]",S=[["\\s",1],["\\d",a],[y,i]],E=x=>{for(const[v,C]of S)x=x.split(`${v}*`).join(`${v}{0,${C}}`).split(`${v}+`).join(`${v}{1,${C}}`);return x},b=(x,v,C)=>{const _=E(v),R=p++;l(x,R,v),f[x]=R,d[R]=v,h[R]=_,o[R]=new RegExp(v,C?"g":void 0),u[R]=new RegExp(_,C?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*"),b("NUMERICIDENTIFIERLOOSE","\\d+"),b("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${y}*`),b("MAINVERSION",`(${d[f.NUMERICIDENTIFIER]})\\.(${d[f.NUMERICIDENTIFIER]})\\.(${d[f.NUMERICIDENTIFIER]})`),b("MAINVERSIONLOOSE",`(${d[f.NUMERICIDENTIFIERLOOSE]})\\.(${d[f.NUMERICIDENTIFIERLOOSE]})\\.(${d[f.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASEIDENTIFIER",`(?:${d[f.NONNUMERICIDENTIFIER]}|${d[f.NUMERICIDENTIFIER]})`),b("PRERELEASEIDENTIFIERLOOSE",`(?:${d[f.NONNUMERICIDENTIFIER]}|${d[f.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASE",`(?:-(${d[f.PRERELEASEIDENTIFIER]}(?:\\.${d[f.PRERELEASEIDENTIFIER]})*))`),b("PRERELEASELOOSE",`(?:-?(${d[f.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${d[f.PRERELEASEIDENTIFIERLOOSE]})*))`),b("BUILDIDENTIFIER",`${y}+`),b("BUILD",`(?:\\+(${d[f.BUILDIDENTIFIER]}(?:\\.${d[f.BUILDIDENTIFIER]})*))`),b("FULLPLAIN",`v?${d[f.MAINVERSION]}${d[f.PRERELEASE]}?${d[f.BUILD]}?`),b("FULL",`^${d[f.FULLPLAIN]}$`),b("LOOSEPLAIN",`[v=\\s]*${d[f.MAINVERSIONLOOSE]}${d[f.PRERELEASELOOSE]}?${d[f.BUILD]}?`),b("LOOSE",`^${d[f.LOOSEPLAIN]}$`),b("GTLT","((?:<|>)?=?)"),b("XRANGEIDENTIFIERLOOSE",`${d[f.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),b("XRANGEIDENTIFIER",`${d[f.NUMERICIDENTIFIER]}|x|X|\\*`),b("XRANGEPLAIN",`[v=\\s]*(${d[f.XRANGEIDENTIFIER]})(?:\\.(${d[f.XRANGEIDENTIFIER]})(?:\\.(${d[f.XRANGEIDENTIFIER]})(?:${d[f.PRERELEASE]})?${d[f.BUILD]}?)?)?`),b("XRANGEPLAINLOOSE",`[v=\\s]*(${d[f.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[f.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[f.XRANGEIDENTIFIERLOOSE]})(?:${d[f.PRERELEASELOOSE]})?${d[f.BUILD]}?)?)?`),b("XRANGE",`^${d[f.GTLT]}\\s*${d[f.XRANGEPLAIN]}$`),b("XRANGELOOSE",`^${d[f.GTLT]}\\s*${d[f.XRANGEPLAINLOOSE]}$`),b("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),b("COERCE",`${d[f.COERCEPLAIN]}(?:$|[^\\d])`),b("COERCEFULL",d[f.COERCEPLAIN]+`(?:${d[f.PRERELEASE]})?(?:${d[f.BUILD]})?(?:$|[^\\d])`),b("COERCERTL",d[f.COERCE],!0),b("COERCERTLFULL",d[f.COERCEFULL],!0),b("LONETILDE","(?:~>?)"),b("TILDETRIM",`(\\s*)${d[f.LONETILDE]}\\s+`,!0),s.tildeTrimReplace="$1~",b("TILDE",`^${d[f.LONETILDE]}${d[f.XRANGEPLAIN]}$`),b("TILDELOOSE",`^${d[f.LONETILDE]}${d[f.XRANGEPLAINLOOSE]}$`),b("LONECARET","(?:\\^)"),b("CARETTRIM",`(\\s*)${d[f.LONECARET]}\\s+`,!0),s.caretTrimReplace="$1^",b("CARET",`^${d[f.LONECARET]}${d[f.XRANGEPLAIN]}$`),b("CARETLOOSE",`^${d[f.LONECARET]}${d[f.XRANGEPLAINLOOSE]}$`),b("COMPARATORLOOSE",`^${d[f.GTLT]}\\s*(${d[f.LOOSEPLAIN]})$|^$`),b("COMPARATOR",`^${d[f.GTLT]}\\s*(${d[f.FULLPLAIN]})$|^$`),b("COMPARATORTRIM",`(\\s*)${d[f.GTLT]}\\s*(${d[f.LOOSEPLAIN]}|${d[f.XRANGEPLAIN]})`,!0),s.comparatorTrimReplace="$1$2$3",b("HYPHENRANGE",`^\\s*(${d[f.XRANGEPLAIN]})\\s+-\\s+(${d[f.XRANGEPLAIN]})\\s*$`),b("HYPHENRANGELOOSE",`^\\s*(${d[f.XRANGEPLAINLOOSE]})\\s+-\\s+(${d[f.XRANGEPLAINLOOSE]})\\s*$`),b("STAR","(<|>)?=?\\s*\\*"),b("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),b("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(hu,hu.exports)),hu.exports}var bh,pw;function kg(){if(pw)return bh;pw=1;const t=Object.freeze({loose:!0}),s=Object.freeze({});return bh=i=>i?typeof i!="object"?t:i:s,bh}var Ch,mw;function C1(){if(mw)return Ch;mw=1;const t=/^[0-9]+$/,s=(i,a)=>{if(typeof i=="number"&&typeof a=="number")return i===a?0:i<a?-1:1;const l=t.test(i),o=t.test(a);return l&&o&&(i=+i,a=+a),i===a?0:l&&!o?-1:o&&!l?1:i<a?-1:1};return Ch={compareIdentifiers:s,rcompareIdentifiers:(i,a)=>s(a,i)},Ch}var Th,gw;function wr(){if(gw)return Th;gw=1;const t=rd(),{MAX_LENGTH:s,MAX_SAFE_INTEGER:n}=td(),{safeRe:i,t:a}=ql(),l=kg(),{compareIdentifiers:o}=C1();class u{constructor(h,f){if(f=l(f),h instanceof u){if(h.loose===!!f.loose&&h.includePrerelease===!!f.includePrerelease)return h;h=h.version}else if(typeof h!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof h}".`);if(h.length>s)throw new TypeError(`version is longer than ${s} characters`);t("SemVer",h,f),this.options=f,this.loose=!!f.loose,this.includePrerelease=!!f.includePrerelease;const p=h.trim().match(f.loose?i[a.LOOSE]:i[a.FULL]);if(!p)throw new TypeError(`Invalid Version: ${h}`);if(this.raw=h,this.major=+p[1],this.minor=+p[2],this.patch=+p[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");p[4]?this.prerelease=p[4].split(".").map(y=>{if(/^[0-9]+$/.test(y)){const S=+y;if(S>=0&&S<n)return S}return y}):this.prerelease=[],this.build=p[5]?p[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(h){if(t("SemVer.compare",this.version,this.options,h),!(h instanceof u)){if(typeof h=="string"&&h===this.version)return 0;h=new u(h,this.options)}return h.version===this.version?0:this.compareMain(h)||this.comparePre(h)}compareMain(h){return h instanceof u||(h=new u(h,this.options)),this.major<h.major?-1:this.major>h.major?1:this.minor<h.minor?-1:this.minor>h.minor?1:this.patch<h.patch?-1:this.patch>h.patch?1:0}comparePre(h){if(h instanceof u||(h=new u(h,this.options)),this.prerelease.length&&!h.prerelease.length)return-1;if(!this.prerelease.length&&h.prerelease.length)return 1;if(!this.prerelease.length&&!h.prerelease.length)return 0;let f=0;do{const p=this.prerelease[f],y=h.prerelease[f];if(t("prerelease compare",f,p,y),p===void 0&&y===void 0)return 0;if(y===void 0)return 1;if(p===void 0)return-1;if(p===y)continue;return o(p,y)}while(++f)}compareBuild(h){h instanceof u||(h=new u(h,this.options));let f=0;do{const p=this.build[f],y=h.build[f];if(t("build compare",f,p,y),p===void 0&&y===void 0)return 0;if(y===void 0)return 1;if(p===void 0)return-1;if(p===y)continue;return o(p,y)}while(++f)}inc(h,f,p){if(h.startsWith("pre")){if(!f&&p===!1)throw new Error("invalid increment argument: identifier is empty");if(f){const y=`-${f}`.match(this.options.loose?i[a.PRERELEASELOOSE]:i[a.PRERELEASE]);if(!y||y[1]!==f)throw new Error(`invalid identifier: ${f}`)}}switch(h){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",f,p);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",f,p);break;case"prepatch":this.prerelease.length=0,this.inc("patch",f,p),this.inc("pre",f,p);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",f,p),this.inc("pre",f,p);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const y=Number(p)?1:0;if(this.prerelease.length===0)this.prerelease=[y];else{let S=this.prerelease.length;for(;--S>=0;)typeof this.prerelease[S]=="number"&&(this.prerelease[S]++,S=-2);if(S===-1){if(f===this.prerelease.join(".")&&p===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(y)}}if(f){let S=[f,y];p===!1&&(S=[f]),o(this.prerelease[0],f)===0?isNaN(this.prerelease[1])&&(this.prerelease=S):this.prerelease=S}break}default:throw new Error(`invalid increment argument: ${h}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return Th=u,Th}var _h,yw;function Go(){if(yw)return _h;yw=1;const t=wr();return _h=(n,i,a=!1)=>{if(n instanceof t)return n;try{return new t(n,i)}catch(l){if(!a)return null;throw l}},_h}var Rh,vw;function Zk(){if(vw)return Rh;vw=1;const t=Go();return Rh=(n,i)=>{const a=t(n,i);return a?a.version:null},Rh}var kh,Ew;function eI(){if(Ew)return kh;Ew=1;const t=Go();return kh=(n,i)=>{const a=t(n.trim().replace(/^[=v]+/,""),i);return a?a.version:null},kh}var Ih,ww;function tI(){if(ww)return Ih;ww=1;const t=wr();return Ih=(n,i,a,l,o)=>{typeof a=="string"&&(o=l,l=a,a=void 0);try{return new t(n instanceof t?n.version:n,a).inc(i,l,o).version}catch{return null}},Ih}var Ah,Sw;function rI(){if(Sw)return Ah;Sw=1;const t=Go();return Ah=(n,i)=>{const a=t(n,null,!0),l=t(i,null,!0),o=a.compare(l);if(o===0)return null;const u=o>0,d=u?a:l,h=u?l:a,f=!!d.prerelease.length;if(!!h.prerelease.length&&!f){if(!h.patch&&!h.minor)return"major";if(h.compareMain(d)===0)return h.minor&&!h.patch?"minor":"patch"}const y=f?"pre":"";return a.major!==l.major?y+"major":a.minor!==l.minor?y+"minor":a.patch!==l.patch?y+"patch":"prerelease"},Ah}var Nh,xw;function nI(){if(xw)return Nh;xw=1;const t=wr();return Nh=(n,i)=>new t(n,i).major,Nh}var Ph,bw;function sI(){if(bw)return Ph;bw=1;const t=wr();return Ph=(n,i)=>new t(n,i).minor,Ph}var Oh,Cw;function iI(){if(Cw)return Oh;Cw=1;const t=wr();return Oh=(n,i)=>new t(n,i).patch,Oh}var jh,Tw;function oI(){if(Tw)return jh;Tw=1;const t=Go();return jh=(n,i)=>{const a=t(n,i);return a&&a.prerelease.length?a.prerelease:null},jh}var Lh,_w;function wn(){if(_w)return Lh;_w=1;const t=wr();return Lh=(n,i,a)=>new t(n,a).compare(new t(i,a)),Lh}var Dh,Rw;function aI(){if(Rw)return Dh;Rw=1;const t=wn();return Dh=(n,i,a)=>t(i,n,a),Dh}var Mh,kw;function lI(){if(kw)return Mh;kw=1;const t=wn();return Mh=(n,i)=>t(n,i,!0),Mh}var $h,Iw;function Ig(){if(Iw)return $h;Iw=1;const t=wr();return $h=(n,i,a)=>{const l=new t(n,a),o=new t(i,a);return l.compare(o)||l.compareBuild(o)},$h}var Uh,Aw;function cI(){if(Aw)return Uh;Aw=1;const t=Ig();return Uh=(n,i)=>n.sort((a,l)=>t(a,l,i)),Uh}var qh,Nw;function uI(){if(Nw)return qh;Nw=1;const t=Ig();return qh=(n,i)=>n.sort((a,l)=>t(l,a,i)),qh}var Fh,Pw;function nd(){if(Pw)return Fh;Pw=1;const t=wn();return Fh=(n,i,a)=>t(n,i,a)>0,Fh}var Hh,Ow;function Ag(){if(Ow)return Hh;Ow=1;const t=wn();return Hh=(n,i,a)=>t(n,i,a)<0,Hh}var Bh,jw;function T1(){if(jw)return Bh;jw=1;const t=wn();return Bh=(n,i,a)=>t(n,i,a)===0,Bh}var zh,Lw;function _1(){if(Lw)return zh;Lw=1;const t=wn();return zh=(n,i,a)=>t(n,i,a)!==0,zh}var Kh,Dw;function Ng(){if(Dw)return Kh;Dw=1;const t=wn();return Kh=(n,i,a)=>t(n,i,a)>=0,Kh}var Wh,Mw;function Pg(){if(Mw)return Wh;Mw=1;const t=wn();return Wh=(n,i,a)=>t(n,i,a)<=0,Wh}var Vh,$w;function R1(){if($w)return Vh;$w=1;const t=T1(),s=_1(),n=nd(),i=Ng(),a=Ag(),l=Pg();return Vh=(u,d,h,f)=>{switch(d){case"===":return typeof u=="object"&&(u=u.version),typeof h=="object"&&(h=h.version),u===h;case"!==":return typeof u=="object"&&(u=u.version),typeof h=="object"&&(h=h.version),u!==h;case"":case"=":case"==":return t(u,h,f);case"!=":return s(u,h,f);case">":return n(u,h,f);case">=":return i(u,h,f);case"<":return a(u,h,f);case"<=":return l(u,h,f);default:throw new TypeError(`Invalid operator: ${d}`)}},Vh}var Gh,Uw;function dI(){if(Uw)return Gh;Uw=1;const t=wr(),s=Go(),{safeRe:n,t:i}=ql();return Gh=(l,o)=>{if(l instanceof t)return l;if(typeof l=="number"&&(l=String(l)),typeof l!="string")return null;o=o||{};let u=null;if(!o.rtl)u=l.match(o.includePrerelease?n[i.COERCEFULL]:n[i.COERCE]);else{const S=o.includePrerelease?n[i.COERCERTLFULL]:n[i.COERCERTL];let E;for(;(E=S.exec(l))&&(!u||u.index+u[0].length!==l.length);)(!u||E.index+E[0].length!==u.index+u[0].length)&&(u=E),S.lastIndex=E.index+E[1].length+E[2].length;S.lastIndex=-1}if(u===null)return null;const d=u[2],h=u[3]||"0",f=u[4]||"0",p=o.includePrerelease&&u[5]?`-${u[5]}`:"",y=o.includePrerelease&&u[6]?`+${u[6]}`:"";return s(`${d}.${h}.${f}${p}${y}`,o)},Gh}var Jh,qw;function fI(){if(qw)return Jh;qw=1;class t{constructor(){this.max=1e3,this.map=new Map}get(n){const i=this.map.get(n);if(i!==void 0)return this.map.delete(n),this.map.set(n,i),i}delete(n){return this.map.delete(n)}set(n,i){if(!this.delete(n)&&i!==void 0){if(this.map.size>=this.max){const l=this.map.keys().next().value;this.delete(l)}this.map.set(n,i)}return this}}return Jh=t,Jh}var Yh,Fw;function Sn(){if(Fw)return Yh;Fw=1;const t=/\s+/g;class s{constructor(O,q){if(q=a(q),O instanceof s)return O.loose===!!q.loose&&O.includePrerelease===!!q.includePrerelease?O:new s(O.raw,q);if(O instanceof l)return this.raw=O.value,this.set=[[O]],this.formatted=void 0,this;if(this.options=q,this.loose=!!q.loose,this.includePrerelease=!!q.includePrerelease,this.raw=O.trim().replace(t," "),this.set=this.raw.split("||").map(W=>this.parseRange(W.trim())).filter(W=>W.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const W=this.set[0];if(this.set=this.set.filter(L=>!b(L[0])),this.set.length===0)this.set=[W];else if(this.set.length>1){for(const L of this.set)if(L.length===1&&x(L[0])){this.set=[L];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let O=0;O<this.set.length;O++){O>0&&(this.formatted+="||");const q=this.set[O];for(let W=0;W<q.length;W++)W>0&&(this.formatted+=" "),this.formatted+=q[W].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(O){const W=((this.options.includePrerelease&&S)|(this.options.loose&&E))+":"+O,L=i.get(W);if(L)return L;const Y=this.options.loose,ee=Y?d[h.HYPHENRANGELOOSE]:d[h.HYPHENRANGE];O=O.replace(ee,ce(this.options.includePrerelease)),o("hyphen replace",O),O=O.replace(d[h.COMPARATORTRIM],f),o("comparator trim",O),O=O.replace(d[h.TILDETRIM],p),o("tilde trim",O),O=O.replace(d[h.CARETTRIM],y),o("caret trim",O);let H=O.split(" ").map(he=>C(he,this.options)).join(" ").split(/\s+/).map(he=>ie(he,this.options));Y&&(H=H.filter(he=>(o("loose invalid filter",he,this.options),!!he.match(d[h.COMPARATORLOOSE])))),o("range list",H);const X=new Map,ne=H.map(he=>new l(he,this.options));for(const he of ne){if(b(he))return[he];X.set(he.value,he)}X.size>1&&X.has("")&&X.delete("");const fe=[...X.values()];return i.set(W,fe),fe}intersects(O,q){if(!(O instanceof s))throw new TypeError("a Range is required");return this.set.some(W=>v(W,q)&&O.set.some(L=>v(L,q)&&W.every(Y=>L.every(ee=>Y.intersects(ee,q)))))}test(O){if(!O)return!1;if(typeof O=="string")try{O=new u(O,this.options)}catch{return!1}for(let q=0;q<this.set.length;q++)if(V(this.set[q],O,this.options))return!0;return!1}}Yh=s;const n=fI(),i=new n,a=kg(),l=sd(),o=rd(),u=wr(),{safeRe:d,t:h,comparatorTrimReplace:f,tildeTrimReplace:p,caretTrimReplace:y}=ql(),{FLAG_INCLUDE_PRERELEASE:S,FLAG_LOOSE:E}=td(),b=F=>F.value==="<0.0.0-0",x=F=>F.value==="",v=(F,O)=>{let q=!0;const W=F.slice();let L=W.pop();for(;q&&W.length;)q=W.every(Y=>L.intersects(Y,O)),L=W.pop();return q},C=(F,O)=>(F=F.replace(d[h.BUILD],""),o("comp",F,O),F=A(F,O),o("caret",F),F=R(F,O),o("tildes",F),F=k(F,O),o("xrange",F),F=Z(F,O),o("stars",F),F),_=F=>!F||F.toLowerCase()==="x"||F==="*",R=(F,O)=>F.trim().split(/\s+/).map(q=>D(q,O)).join(" "),D=(F,O)=>{const q=O.loose?d[h.TILDELOOSE]:d[h.TILDE];return F.replace(q,(W,L,Y,ee,H)=>{o("tilde",F,W,L,Y,ee,H);let X;return _(L)?X="":_(Y)?X=`>=${L}.0.0 <${+L+1}.0.0-0`:_(ee)?X=`>=${L}.${Y}.0 <${L}.${+Y+1}.0-0`:H?(o("replaceTilde pr",H),X=`>=${L}.${Y}.${ee}-${H} <${L}.${+Y+1}.0-0`):X=`>=${L}.${Y}.${ee} <${L}.${+Y+1}.0-0`,o("tilde return",X),X})},A=(F,O)=>F.trim().split(/\s+/).map(q=>j(q,O)).join(" "),j=(F,O)=>{o("caret",F,O);const q=O.loose?d[h.CARETLOOSE]:d[h.CARET],W=O.includePrerelease?"-0":"";return F.replace(q,(L,Y,ee,H,X)=>{o("caret",F,L,Y,ee,H,X);let ne;return _(Y)?ne="":_(ee)?ne=`>=${Y}.0.0${W} <${+Y+1}.0.0-0`:_(H)?Y==="0"?ne=`>=${Y}.${ee}.0${W} <${Y}.${+ee+1}.0-0`:ne=`>=${Y}.${ee}.0${W} <${+Y+1}.0.0-0`:X?(o("replaceCaret pr",X),Y==="0"?ee==="0"?ne=`>=${Y}.${ee}.${H}-${X} <${Y}.${ee}.${+H+1}-0`:ne=`>=${Y}.${ee}.${H}-${X} <${Y}.${+ee+1}.0-0`:ne=`>=${Y}.${ee}.${H}-${X} <${+Y+1}.0.0-0`):(o("no pr"),Y==="0"?ee==="0"?ne=`>=${Y}.${ee}.${H}${W} <${Y}.${ee}.${+H+1}-0`:ne=`>=${Y}.${ee}.${H}${W} <${Y}.${+ee+1}.0-0`:ne=`>=${Y}.${ee}.${H} <${+Y+1}.0.0-0`),o("caret return",ne),ne})},k=(F,O)=>(o("replaceXRanges",F,O),F.split(/\s+/).map(q=>K(q,O)).join(" ")),K=(F,O)=>{F=F.trim();const q=O.loose?d[h.XRANGELOOSE]:d[h.XRANGE];return F.replace(q,(W,L,Y,ee,H,X)=>{o("xRange",F,W,L,Y,ee,H,X);const ne=_(Y),fe=ne||_(ee),he=fe||_(H),Ae=he;return L==="="&&Ae&&(L=""),X=O.includePrerelease?"-0":"",ne?L===">"||L==="<"?W="<0.0.0-0":W="*":L&&Ae?(fe&&(ee=0),H=0,L===">"?(L=">=",fe?(Y=+Y+1,ee=0,H=0):(ee=+ee+1,H=0)):L==="<="&&(L="<",fe?Y=+Y+1:ee=+ee+1),L==="<"&&(X="-0"),W=`${L+Y}.${ee}.${H}${X}`):fe?W=`>=${Y}.0.0${X} <${+Y+1}.0.0-0`:he&&(W=`>=${Y}.${ee}.0${X} <${Y}.${+ee+1}.0-0`),o("xRange return",W),W})},Z=(F,O)=>(o("replaceStars",F,O),F.trim().replace(d[h.STAR],"")),ie=(F,O)=>(o("replaceGTE0",F,O),F.trim().replace(d[O.includePrerelease?h.GTE0PRE:h.GTE0],"")),ce=F=>(O,q,W,L,Y,ee,H,X,ne,fe,he,Ae)=>(_(W)?q="":_(L)?q=`>=${W}.0.0${F?"-0":""}`:_(Y)?q=`>=${W}.${L}.0${F?"-0":""}`:ee?q=`>=${q}`:q=`>=${q}${F?"-0":""}`,_(ne)?X="":_(fe)?X=`<${+ne+1}.0.0-0`:_(he)?X=`<${ne}.${+fe+1}.0-0`:Ae?X=`<=${ne}.${fe}.${he}-${Ae}`:F?X=`<${ne}.${fe}.${+he+1}-0`:X=`<=${X}`,`${q} ${X}`.trim()),V=(F,O,q)=>{for(let W=0;W<F.length;W++)if(!F[W].test(O))return!1;if(O.prerelease.length&&!q.includePrerelease){for(let W=0;W<F.length;W++)if(o(F[W].semver),F[W].semver!==l.ANY&&F[W].semver.prerelease.length>0){const L=F[W].semver;if(L.major===O.major&&L.minor===O.minor&&L.patch===O.patch)return!0}return!1}return!0};return Yh}var Xh,Hw;function sd(){if(Hw)return Xh;Hw=1;const t=Symbol("SemVer ANY");class s{static get ANY(){return t}constructor(f,p){if(p=n(p),f instanceof s){if(f.loose===!!p.loose)return f;f=f.value}f=f.trim().split(/\s+/).join(" "),o("comparator",f,p),this.options=p,this.loose=!!p.loose,this.parse(f),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(f){const p=this.options.loose?i[a.COMPARATORLOOSE]:i[a.COMPARATOR],y=f.match(p);if(!y)throw new TypeError(`Invalid comparator: ${f}`);this.operator=y[1]!==void 0?y[1]:"",this.operator==="="&&(this.operator=""),y[2]?this.semver=new u(y[2],this.options.loose):this.semver=t}toString(){return this.value}test(f){if(o("Comparator.test",f,this.options.loose),this.semver===t||f===t)return!0;if(typeof f=="string")try{f=new u(f,this.options)}catch{return!1}return l(f,this.operator,this.semver,this.options)}intersects(f,p){if(!(f instanceof s))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new d(f.value,p).test(this.value):f.operator===""?f.value===""?!0:new d(this.value,p).test(f.semver):(p=n(p),p.includePrerelease&&(this.value==="<0.0.0-0"||f.value==="<0.0.0-0")||!p.includePrerelease&&(this.value.startsWith("<0.0.0")||f.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&f.operator.startsWith(">")||this.operator.startsWith("<")&&f.operator.startsWith("<")||this.semver.version===f.semver.version&&this.operator.includes("=")&&f.operator.includes("=")||l(this.semver,"<",f.semver,p)&&this.operator.startsWith(">")&&f.operator.startsWith("<")||l(this.semver,">",f.semver,p)&&this.operator.startsWith("<")&&f.operator.startsWith(">")))}}Xh=s;const n=kg(),{safeRe:i,t:a}=ql(),l=R1(),o=rd(),u=wr(),d=Sn();return Xh}var Qh,Bw;function id(){if(Bw)return Qh;Bw=1;const t=Sn();return Qh=(n,i,a)=>{try{i=new t(i,a)}catch{return!1}return i.test(n)},Qh}var Zh,zw;function hI(){if(zw)return Zh;zw=1;const t=Sn();return Zh=(n,i)=>new t(n,i).set.map(a=>a.map(l=>l.value).join(" ").trim().split(" ")),Zh}var ep,Kw;function pI(){if(Kw)return ep;Kw=1;const t=wr(),s=Sn();return ep=(i,a,l)=>{let o=null,u=null,d=null;try{d=new s(a,l)}catch{return null}return i.forEach(h=>{d.test(h)&&(!o||u.compare(h)===-1)&&(o=h,u=new t(o,l))}),o},ep}var tp,Ww;function mI(){if(Ww)return tp;Ww=1;const t=wr(),s=Sn();return tp=(i,a,l)=>{let o=null,u=null,d=null;try{d=new s(a,l)}catch{return null}return i.forEach(h=>{d.test(h)&&(!o||u.compare(h)===1)&&(o=h,u=new t(o,l))}),o},tp}var rp,Vw;function gI(){if(Vw)return rp;Vw=1;const t=wr(),s=Sn(),n=nd();return rp=(a,l)=>{a=new s(a,l);let o=new t("0.0.0");if(a.test(o)||(o=new t("0.0.0-0"),a.test(o)))return o;o=null;for(let u=0;u<a.set.length;++u){const d=a.set[u];let h=null;d.forEach(f=>{const p=new t(f.semver.version);switch(f.operator){case">":p.prerelease.length===0?p.patch++:p.prerelease.push(0),p.raw=p.format();case"":case">=":(!h||n(p,h))&&(h=p);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${f.operator}`)}}),h&&(!o||n(o,h))&&(o=h)}return o&&a.test(o)?o:null},rp}var np,Gw;function yI(){if(Gw)return np;Gw=1;const t=Sn();return np=(n,i)=>{try{return new t(n,i).range||"*"}catch{return null}},np}var sp,Jw;function Og(){if(Jw)return sp;Jw=1;const t=wr(),s=sd(),{ANY:n}=s,i=Sn(),a=id(),l=nd(),o=Ag(),u=Pg(),d=Ng();return sp=(f,p,y,S)=>{f=new t(f,S),p=new i(p,S);let E,b,x,v,C;switch(y){case">":E=l,b=u,x=o,v=">",C=">=";break;case"<":E=o,b=d,x=l,v="<",C="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(f,p,S))return!1;for(let _=0;_<p.set.length;++_){const R=p.set[_];let D=null,A=null;if(R.forEach(j=>{j.semver===n&&(j=new s(">=0.0.0")),D=D||j,A=A||j,E(j.semver,D.semver,S)?D=j:x(j.semver,A.semver,S)&&(A=j)}),D.operator===v||D.operator===C||(!A.operator||A.operator===v)&&b(f,A.semver))return!1;if(A.operator===C&&x(f,A.semver))return!1}return!0},sp}var ip,Yw;function vI(){if(Yw)return ip;Yw=1;const t=Og();return ip=(n,i,a)=>t(n,i,">",a),ip}var op,Xw;function EI(){if(Xw)return op;Xw=1;const t=Og();return op=(n,i,a)=>t(n,i,"<",a),op}var ap,Qw;function wI(){if(Qw)return ap;Qw=1;const t=Sn();return ap=(n,i,a)=>(n=new t(n,a),i=new t(i,a),n.intersects(i,a)),ap}var lp,Zw;function SI(){if(Zw)return lp;Zw=1;const t=id(),s=wn();return lp=(n,i,a)=>{const l=[];let o=null,u=null;const d=n.sort((y,S)=>s(y,S,a));for(const y of d)t(y,i,a)?(u=y,o||(o=y)):(u&&l.push([o,u]),u=null,o=null);o&&l.push([o,null]);const h=[];for(const[y,S]of l)y===S?h.push(y):!S&&y===d[0]?h.push("*"):S?y===d[0]?h.push(`<=${S}`):h.push(`${y} - ${S}`):h.push(`>=${y}`);const f=h.join(" || "),p=typeof i.raw=="string"?i.raw:String(i);return f.length<p.length?f:i},lp}var cp,e0;function xI(){if(e0)return cp;e0=1;const t=Sn(),s=sd(),{ANY:n}=s,i=id(),a=wn(),l=(p,y,S={})=>{if(p===y)return!0;p=new t(p,S),y=new t(y,S);let E=!1;e:for(const b of p.set){for(const x of y.set){const v=d(b,x,S);if(E=E||v!==null,v)continue e}if(E)return!1}return!0},o=[new s(">=0.0.0-0")],u=[new s(">=0.0.0")],d=(p,y,S)=>{if(p===y)return!0;if(p.length===1&&p[0].semver===n){if(y.length===1&&y[0].semver===n)return!0;S.includePrerelease?p=o:p=u}if(y.length===1&&y[0].semver===n){if(S.includePrerelease)return!0;y=u}const E=new Set;let b,x;for(const k of p)k.operator===">"||k.operator===">="?b=h(b,k,S):k.operator==="<"||k.operator==="<="?x=f(x,k,S):E.add(k.semver);if(E.size>1)return null;let v;if(b&&x){if(v=a(b.semver,x.semver,S),v>0)return null;if(v===0&&(b.operator!==">="||x.operator!=="<="))return null}for(const k of E){if(b&&!i(k,String(b),S)||x&&!i(k,String(x),S))return null;for(const K of y)if(!i(k,String(K),S))return!1;return!0}let C,_,R,D,A=x&&!S.includePrerelease&&x.semver.prerelease.length?x.semver:!1,j=b&&!S.includePrerelease&&b.semver.prerelease.length?b.semver:!1;A&&A.prerelease.length===1&&x.operator==="<"&&A.prerelease[0]===0&&(A=!1);for(const k of y){if(D=D||k.operator===">"||k.operator===">=",R=R||k.operator==="<"||k.operator==="<=",b){if(j&&k.semver.prerelease&&k.semver.prerelease.length&&k.semver.major===j.major&&k.semver.minor===j.minor&&k.semver.patch===j.patch&&(j=!1),k.operator===">"||k.operator===">="){if(C=h(b,k,S),C===k&&C!==b)return!1}else if(b.operator===">="&&!i(b.semver,String(k),S))return!1}if(x){if(A&&k.semver.prerelease&&k.semver.prerelease.length&&k.semver.major===A.major&&k.semver.minor===A.minor&&k.semver.patch===A.patch&&(A=!1),k.operator==="<"||k.operator==="<="){if(_=f(x,k,S),_===k&&_!==x)return!1}else if(x.operator==="<="&&!i(x.semver,String(k),S))return!1}if(!k.operator&&(x||b)&&v!==0)return!1}return!(b&&R&&!x&&v!==0||x&&D&&!b&&v!==0||j||A)},h=(p,y,S)=>{if(!p)return y;const E=a(p.semver,y.semver,S);return E>0?p:E<0||y.operator===">"&&p.operator===">="?y:p},f=(p,y,S)=>{if(!p)return y;const E=a(p.semver,y.semver,S);return E<0?p:E>0||y.operator==="<"&&p.operator==="<="?y:p};return cp=l,cp}var up,t0;function jg(){if(t0)return up;t0=1;const t=ql(),s=td(),n=wr(),i=C1(),a=Go(),l=Zk(),o=eI(),u=tI(),d=rI(),h=nI(),f=sI(),p=iI(),y=oI(),S=wn(),E=aI(),b=lI(),x=Ig(),v=cI(),C=uI(),_=nd(),R=Ag(),D=T1(),A=_1(),j=Ng(),k=Pg(),K=R1(),Z=dI(),ie=sd(),ce=Sn(),V=id(),F=hI(),O=pI(),q=mI(),W=gI(),L=yI(),Y=Og(),ee=vI(),H=EI(),X=wI(),ne=SI(),fe=xI();return up={parse:a,valid:l,clean:o,inc:u,diff:d,major:h,minor:f,patch:p,prerelease:y,compare:S,rcompare:E,compareLoose:b,compareBuild:x,sort:v,rsort:C,gt:_,lt:R,eq:D,neq:A,gte:j,lte:k,cmp:K,coerce:Z,Comparator:ie,Range:ce,satisfies:V,toComparators:F,maxSatisfying:O,minSatisfying:q,minVersion:W,validRange:L,outside:Y,gtr:ee,ltr:H,intersects:X,simplifyRange:ne,subset:fe,SemVer:n,re:t.re,src:t.src,tokens:t.t,SEMVER_SPEC_VERSION:s.SEMVER_SPEC_VERSION,RELEASE_TYPES:s.RELEASE_TYPES,compareIdentifiers:i.compareIdentifiers,rcompareIdentifiers:i.rcompareIdentifiers},up}var dp,r0;function bI(){return r0||(r0=1,dp=jg().satisfies(process.version,">=15.7.0")),dp}var fp,n0;function CI(){return n0||(n0=1,fp=jg().satisfies(process.version,">=16.9.0")),fp}var hp,s0;function k1(){if(s0)return hp;s0=1;const t=bI(),s=CI(),n={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},i={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};return hp=function(a,l){if(!a||!l)return;const o=l.asymmetricKeyType;if(!o)return;const u=n[o];if(!u)throw new Error(`Unknown key type "${o}".`);if(!u.includes(a))throw new Error(`"alg" parameter for "${o}" key type must be one of: ${u.join(", ")}.`);if(t)switch(o){case"ec":const d=l.asymmetricKeyDetails.namedCurve,h=i[a];if(d!==h)throw new Error(`"alg" parameter "${a}" requires curve "${h}".`);break;case"rsa-pss":if(s){const f=parseInt(a.slice(-3),10),{hashAlgorithm:p,mgf1HashAlgorithm:y,saltLength:S}=l.asymmetricKeyDetails;if(p!==`sha${f}`||y!==p)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${a}.`);if(S!==void 0&&S>f>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${a}.`)}break}},hp}var pp,i0;function I1(){if(i0)return pp;i0=1;var t=jg();return pp=t.satisfies(process.version,"^6.12.0 || >=8.0.0"),pp}var mp,o0;function TI(){if(o0)return mp;o0=1;const t=ed(),s=S1(),n=x1(),i=w1(),a=b1(),l=k1(),o=I1(),u=Rg(),{KeyObject:d,createSecretKey:h,createPublicKey:f}=Wi,p=["RS256","RS384","RS512"],y=["ES256","ES384","ES512"],S=["RS256","RS384","RS512"],E=["HS256","HS384","HS512"];return o&&(p.splice(p.length,0,"PS256","PS384","PS512"),S.splice(S.length,0,"PS256","PS384","PS512")),mp=function(b,x,v,C){typeof v=="function"&&!C&&(C=v,v={}),v||(v={}),v=Object.assign({},v);let _;if(C?_=C:_=function(K,Z){if(K)throw K;return Z},v.clockTimestamp&&typeof v.clockTimestamp!="number")return _(new t("clockTimestamp must be a number"));if(v.nonce!==void 0&&(typeof v.nonce!="string"||v.nonce.trim()===""))return _(new t("nonce must be a non-empty string"));if(v.allowInvalidAsymmetricKeyTypes!==void 0&&typeof v.allowInvalidAsymmetricKeyTypes!="boolean")return _(new t("allowInvalidAsymmetricKeyTypes must be a boolean"));const R=v.clockTimestamp||Math.floor(Date.now()/1e3);if(!b)return _(new t("jwt must be provided"));if(typeof b!="string")return _(new t("jwt must be a string"));const D=b.split(".");if(D.length!==3)return _(new t("jwt malformed"));let A;try{A=i(b,{complete:!0})}catch(K){return _(K)}if(!A)return _(new t("invalid token"));const j=A.header;let k;if(typeof x=="function"){if(!C)return _(new t("verify must be called asynchronous if secret or public key is provided as a callback"));k=x}else k=function(K,Z){return Z(null,x)};return k(j,function(K,Z){if(K)return _(new t("error in secret or public key callback: "+K.message));const ie=D[2].trim()!=="";if(!ie&&Z)return _(new t("jwt signature is required"));if(ie&&!Z)return _(new t("secret or public key must be provided"));if(!ie&&!v.algorithms)return _(new t('please specify "none" in "algorithms" to verify unsigned tokens'));if(Z!=null&&!(Z instanceof d))try{Z=f(Z)}catch{try{Z=h(typeof Z=="string"?Buffer.from(Z):Z)}catch{return _(new t("secretOrPublicKey is not valid key material"))}}if(v.algorithms||(Z.type==="secret"?v.algorithms=E:["rsa","rsa-pss"].includes(Z.asymmetricKeyType)?v.algorithms=S:Z.asymmetricKeyType==="ec"?v.algorithms=y:v.algorithms=p),v.algorithms.indexOf(A.header.alg)===-1)return _(new t("invalid algorithm"));if(j.alg.startsWith("HS")&&Z.type!=="secret")return _(new t(`secretOrPublicKey must be a symmetric key when using ${j.alg}`));if(/^(?:RS|PS|ES)/.test(j.alg)&&Z.type!=="public")return _(new t(`secretOrPublicKey must be an asymmetric key when using ${j.alg}`));if(!v.allowInvalidAsymmetricKeyTypes)try{l(j.alg,Z)}catch(F){return _(F)}let ce;try{ce=u.verify(b,A.header.alg,Z)}catch(F){return _(F)}if(!ce)return _(new t("invalid signature"));const V=A.payload;if(typeof V.nbf<"u"&&!v.ignoreNotBefore){if(typeof V.nbf!="number")return _(new t("invalid nbf value"));if(V.nbf>R+(v.clockTolerance||0))return _(new s("jwt not active",new Date(V.nbf*1e3)))}if(typeof V.exp<"u"&&!v.ignoreExpiration){if(typeof V.exp!="number")return _(new t("invalid exp value"));if(R>=V.exp+(v.clockTolerance||0))return _(new n("jwt expired",new Date(V.exp*1e3)))}if(v.audience){const F=Array.isArray(v.audience)?v.audience:[v.audience];if(!(Array.isArray(V.aud)?V.aud:[V.aud]).some(function(W){return F.some(function(L){return L instanceof RegExp?L.test(W):L===W})}))return _(new t("jwt audience invalid. expected: "+F.join(" or ")))}if(v.issuer&&(typeof v.issuer=="string"&&V.iss!==v.issuer||Array.isArray(v.issuer)&&v.issuer.indexOf(V.iss)===-1))return _(new t("jwt issuer invalid. expected: "+v.issuer));if(v.subject&&V.sub!==v.subject)return _(new t("jwt subject invalid. expected: "+v.subject));if(v.jwtid&&V.jti!==v.jwtid)return _(new t("jwt jwtid invalid. expected: "+v.jwtid));if(v.nonce&&V.nonce!==v.nonce)return _(new t("jwt nonce invalid. expected: "+v.nonce));if(v.maxAge){if(typeof V.iat!="number")return _(new t("iat required when maxAge is specified"));const F=a(v.maxAge,V.iat);if(typeof F>"u")return _(new t('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(R>=F+(v.clockTolerance||0))return _(new n("maxAge exceeded",new Date(F*1e3)))}if(v.complete===!0){const F=A.signature;return _(null,{header:j,payload:V,signature:F})}return _(null,V)})},mp}var gp,a0;function _I(){if(a0)return gp;a0=1;var t=1/0,s=9007199254740991,n=17976931348623157e292,i=NaN,a="[object Arguments]",l="[object Function]",o="[object GeneratorFunction]",u="[object String]",d="[object Symbol]",h=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,y=/^0o[0-7]+$/i,S=/^(?:0|[1-9]\d*)$/,E=parseInt;function b(U,me){for(var Ee=-1,tt=U?U.length:0,st=Array(tt);++Ee<tt;)st[Ee]=me(U[Ee],Ee,U);return st}function x(U,me,Ee,tt){for(var st=U.length,lt=Ee+-1;++lt<st;)if(me(U[lt],lt,U))return lt;return-1}function v(U,me,Ee){if(me!==me)return x(U,C,Ee);for(var tt=Ee-1,st=U.length;++tt<st;)if(U[tt]===me)return tt;return-1}function C(U){return U!==U}function _(U,me){for(var Ee=-1,tt=Array(U);++Ee<U;)tt[Ee]=me(Ee);return tt}function R(U,me){return b(me,function(Ee){return U[Ee]})}function D(U,me){return function(Ee){return U(me(Ee))}}var A=Object.prototype,j=A.hasOwnProperty,k=A.toString,K=A.propertyIsEnumerable,Z=D(Object.keys,Object),ie=Math.max;function ce(U,me){var Ee=L(U)||W(U)?_(U.length,String):[],tt=Ee.length,st=!!tt;for(var lt in U)j.call(U,lt)&&!(st&&(lt=="length"||F(lt,tt)))&&Ee.push(lt);return Ee}function V(U){if(!O(U))return Z(U);var me=[];for(var Ee in Object(U))j.call(U,Ee)&&Ee!="constructor"&&me.push(Ee);return me}function F(U,me){return me=me??s,!!me&&(typeof U=="number"||S.test(U))&&U>-1&&U%1==0&&U<me}function O(U){var me=U&&U.constructor,Ee=typeof me=="function"&&me.prototype||A;return U===Ee}function q(U,me,Ee,tt){U=Y(U)?U:ft(U),Ee=Ee&&!tt?ue(Ee):0;var st=U.length;return Ee<0&&(Ee=ie(st+Ee,0)),he(U)?Ee<=st&&U.indexOf(me,Ee)>-1:!!st&&v(U,me,Ee)>-1}function W(U){return ee(U)&&j.call(U,"callee")&&(!K.call(U,"callee")||k.call(U)==a)}var L=Array.isArray;function Y(U){return U!=null&&X(U.length)&&!H(U)}function ee(U){return fe(U)&&Y(U)}function H(U){var me=ne(U)?k.call(U):"";return me==l||me==o}function X(U){return typeof U=="number"&&U>-1&&U%1==0&&U<=s}function ne(U){var me=typeof U;return!!U&&(me=="object"||me=="function")}function fe(U){return!!U&&typeof U=="object"}function he(U){return typeof U=="string"||!L(U)&&fe(U)&&k.call(U)==u}function Ae(U){return typeof U=="symbol"||fe(U)&&k.call(U)==d}function Ne(U){if(!U)return U===0?U:0;if(U=ve(U),U===t||U===-t){var me=U<0?-1:1;return me*n}return U===U?U:0}function ue(U){var me=Ne(U),Ee=me%1;return me===me?Ee?me-Ee:me:0}function ve(U){if(typeof U=="number")return U;if(Ae(U))return i;if(ne(U)){var me=typeof U.valueOf=="function"?U.valueOf():U;U=ne(me)?me+"":me}if(typeof U!="string")return U===0?U:+U;U=U.replace(h,"");var Ee=p.test(U);return Ee||y.test(U)?E(U.slice(2),Ee?2:8):f.test(U)?i:+U}function He(U){return Y(U)?ce(U):V(U)}function ft(U){return U?R(U,He(U)):[]}return gp=q,gp}var yp,l0;function RI(){if(l0)return yp;l0=1;var t="[object Boolean]",s=Object.prototype,n=s.toString;function i(l){return l===!0||l===!1||a(l)&&n.call(l)==t}function a(l){return!!l&&typeof l=="object"}return yp=i,yp}var vp,c0;function kI(){if(c0)return vp;c0=1;var t=1/0,s=17976931348623157e292,n=NaN,i="[object Symbol]",a=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,u=/^0o[0-7]+$/i,d=parseInt,h=Object.prototype,f=h.toString;function p(C){return typeof C=="number"&&C==x(C)}function y(C){var _=typeof C;return!!C&&(_=="object"||_=="function")}function S(C){return!!C&&typeof C=="object"}function E(C){return typeof C=="symbol"||S(C)&&f.call(C)==i}function b(C){if(!C)return C===0?C:0;if(C=v(C),C===t||C===-t){var _=C<0?-1:1;return _*s}return C===C?C:0}function x(C){var _=b(C),R=_%1;return _===_?R?_-R:_:0}function v(C){if(typeof C=="number")return C;if(E(C))return n;if(y(C)){var _=typeof C.valueOf=="function"?C.valueOf():C;C=y(_)?_+"":_}if(typeof C!="string")return C===0?C:+C;C=C.replace(a,"");var R=o.test(C);return R||u.test(C)?d(C.slice(2),R?2:8):l.test(C)?n:+C}return vp=p,vp}var Ep,u0;function II(){if(u0)return Ep;u0=1;var t="[object Number]",s=Object.prototype,n=s.toString;function i(l){return!!l&&typeof l=="object"}function a(l){return typeof l=="number"||i(l)&&n.call(l)==t}return Ep=a,Ep}var wp,d0;function AI(){if(d0)return wp;d0=1;var t="[object Object]";function s(y){var S=!1;if(y!=null&&typeof y.toString!="function")try{S=!!(y+"")}catch{}return S}function n(y,S){return function(E){return y(S(E))}}var i=Function.prototype,a=Object.prototype,l=i.toString,o=a.hasOwnProperty,u=l.call(Object),d=a.toString,h=n(Object.getPrototypeOf,Object);function f(y){return!!y&&typeof y=="object"}function p(y){if(!f(y)||d.call(y)!=t||s(y))return!1;var S=h(y);if(S===null)return!0;var E=o.call(S,"constructor")&&S.constructor;return typeof E=="function"&&E instanceof E&&l.call(E)==u}return wp=p,wp}var Sp,f0;function NI(){if(f0)return Sp;f0=1;var t="[object String]",s=Object.prototype,n=s.toString,i=Array.isArray;function a(o){return!!o&&typeof o=="object"}function l(o){return typeof o=="string"||!i(o)&&a(o)&&n.call(o)==t}return Sp=l,Sp}var xp,h0;function PI(){if(h0)return xp;h0=1;var t="Expected a function",s=1/0,n=17976931348623157e292,i=NaN,a="[object Symbol]",l=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,d=/^0o[0-7]+$/i,h=parseInt,f=Object.prototype,p=f.toString;function y(R,D){var A;if(typeof D!="function")throw new TypeError(t);return R=C(R),function(){return--R>0&&(A=D.apply(this,arguments)),R<=1&&(D=void 0),A}}function S(R){return y(2,R)}function E(R){var D=typeof R;return!!R&&(D=="object"||D=="function")}function b(R){return!!R&&typeof R=="object"}function x(R){return typeof R=="symbol"||b(R)&&p.call(R)==a}function v(R){if(!R)return R===0?R:0;if(R=_(R),R===s||R===-s){var D=R<0?-1:1;return D*n}return R===R?R:0}function C(R){var D=v(R),A=D%1;return D===D?A?D-A:D:0}function _(R){if(typeof R=="number")return R;if(x(R))return i;if(E(R)){var D=typeof R.valueOf=="function"?R.valueOf():R;R=E(D)?D+"":D}if(typeof R!="string")return R===0?R:+R;R=R.replace(l,"");var A=u.test(R);return A||d.test(R)?h(R.slice(2),A?2:8):o.test(R)?i:+R}return xp=S,xp}var bp,p0;function OI(){if(p0)return bp;p0=1;const t=b1(),s=I1(),n=k1(),i=Rg(),a=_I(),l=RI(),o=kI(),u=II(),d=AI(),h=NI(),f=PI(),{KeyObject:p,createSecretKey:y,createPrivateKey:S}=Wi,E=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];s&&E.splice(3,0,"PS256","PS384","PS512");const b={expiresIn:{isValid:function(A){return o(A)||h(A)&&A},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(A){return o(A)||h(A)&&A},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(A){return h(A)||Array.isArray(A)},message:'"audience" must be a string or array'},algorithm:{isValid:a.bind(null,E),message:'"algorithm" must be a valid string enum value'},header:{isValid:d,message:'"header" must be an object'},encoding:{isValid:h,message:'"encoding" must be a string'},issuer:{isValid:h,message:'"issuer" must be a string'},subject:{isValid:h,message:'"subject" must be a string'},jwtid:{isValid:h,message:'"jwtid" must be a string'},noTimestamp:{isValid:l,message:'"noTimestamp" must be a boolean'},keyid:{isValid:h,message:'"keyid" must be a string'},mutatePayload:{isValid:l,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:l,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:l,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},x={iat:{isValid:u,message:'"iat" should be a number of seconds'},exp:{isValid:u,message:'"exp" should be a number of seconds'},nbf:{isValid:u,message:'"nbf" should be a number of seconds'}};function v(A,j,k,K){if(!d(k))throw new Error('Expected "'+K+'" to be a plain object.');Object.keys(k).forEach(function(Z){const ie=A[Z];if(!ie){if(!j)throw new Error('"'+Z+'" is not allowed in "'+K+'"');return}if(!ie.isValid(k[Z]))throw new Error(ie.message)})}function C(A){return v(b,!1,A,"options")}function _(A){return v(x,!0,A,"payload")}const R={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},D=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];return bp=function(A,j,k,K){typeof k=="function"?(K=k,k={}):k=k||{};const Z=typeof A=="object"&&!Buffer.isBuffer(A),ie=Object.assign({alg:k.algorithm||"HS256",typ:Z?"JWT":void 0,kid:k.keyid},k.header);function ce(O){if(K)return K(O);throw O}if(!j&&k.algorithm!=="none")return ce(new Error("secretOrPrivateKey must have a value"));if(j!=null&&!(j instanceof p))try{j=S(j)}catch{try{j=y(typeof j=="string"?Buffer.from(j):j)}catch{return ce(new Error("secretOrPrivateKey is not valid key material"))}}if(ie.alg.startsWith("HS")&&j.type!=="secret")return ce(new Error(`secretOrPrivateKey must be a symmetric key when using ${ie.alg}`));if(/^(?:RS|PS|ES)/.test(ie.alg)){if(j.type!=="private")return ce(new Error(`secretOrPrivateKey must be an asymmetric key when using ${ie.alg}`));if(!k.allowInsecureKeySizes&&!ie.alg.startsWith("ES")&&j.asymmetricKeyDetails!==void 0&&j.asymmetricKeyDetails.modulusLength<2048)return ce(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${ie.alg}`))}if(typeof A>"u")return ce(new Error("payload is required"));if(Z){try{_(A)}catch(O){return ce(O)}k.mutatePayload||(A=Object.assign({},A))}else{const O=D.filter(function(q){return typeof k[q]<"u"});if(O.length>0)return ce(new Error("invalid "+O.join(",")+" option for "+typeof A+" payload"))}if(typeof A.exp<"u"&&typeof k.expiresIn<"u")return ce(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof A.nbf<"u"&&typeof k.notBefore<"u")return ce(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{C(k)}catch(O){return ce(O)}if(!k.allowInvalidAsymmetricKeyTypes)try{n(ie.alg,j)}catch(O){return ce(O)}const V=A.iat||Math.floor(Date.now()/1e3);if(k.noTimestamp?delete A.iat:Z&&(A.iat=V),typeof k.notBefore<"u"){try{A.nbf=t(k.notBefore,V)}catch(O){return ce(O)}if(typeof A.nbf>"u")return ce(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof k.expiresIn<"u"&&typeof A=="object"){try{A.exp=t(k.expiresIn,V)}catch(O){return ce(O)}if(typeof A.exp>"u")return ce(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(R).forEach(function(O){const q=R[O];if(typeof k[O]<"u"){if(typeof A[q]<"u")return ce(new Error('Bad "options.'+O+'" option. The payload already has an "'+q+'" property.'));A[q]=k[O]}});const F=k.encoding||"utf8";if(typeof K=="function")K=K&&f(K),i.createSign({header:ie,privateKey:j,payload:A,encoding:F}).once("error",K).once("done",function(O){if(!k.allowInsecureKeySizes&&/^(?:RS|PS)/.test(ie.alg)&&O.length<256)return K(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${ie.alg}`));K(null,O)});else{let O=i.sign({header:ie,payload:A,secret:j,encoding:F});if(!k.allowInsecureKeySizes&&/^(?:RS|PS)/.test(ie.alg)&&O.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${ie.alg}`);return O}},bp}var Cp,m0;function Jo(){return m0||(m0=1,Cp={decode:w1(),verify:TI(),sign:OI(),JsonWebTokenError:ed(),NotBeforeError:S1(),TokenExpiredError:x1()}),Cp}var ki={},cs={},g0;function Lg(){if(g0)return cs;g0=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.ApiErrorException=cs.MisoClientError=void 0,cs.transformError=i,cs.handleApiError=l;class t extends Error{constructor(u,d,h,f,p){let y=u;d&&(d.title?y=d.title:d.errors&&d.errors.length>0&&(y=d.errors[0])),super(y),this.name="MisoClientError",this.errorResponse=d,this.errorBody=h,this.statusCode=f??d?.statusCode,this.authMethod=p??d?.authMethod??null,Error.captureStackTrace&&Error.captureStackTrace(this,t)}}cs.MisoClientError=t;function s(o,u){const d=o.error;return{errors:d.errors??["Unknown error"],type:d.type??"about:blank",title:d.title??u.message??"Unknown error",statusCode:d.statusCode??u.response?.status??500,instance:d.instance??u.config?.url,correlationId:d.correlationId}}function n(o,u){const d=typeof o.statusCode=="number"?o.statusCode:typeof u.response?.status=="number"?u.response.status:500;return{errors:Array.isArray(o.errors)?o.errors:["Unknown error"],type:o.type??"about:blank",title:o.title??u.message??"Unknown error",statusCode:d,instance:o.instance??u.config?.url,correlationId:o.correlationId}}function i(o){if(o&&typeof o=="object"&&"response"in o){const u=o,d=u.response?.data;return d&&typeof d=="object"?"error"in d?s(d,u):n(d,u):{errors:[u.message??"Network error"],type:"about:blank",title:"Network error",statusCode:u.response?.status??0}}return o instanceof Error?{errors:[o.message??"Unknown error"],type:"about:blank",title:"Error",statusCode:0}:{errors:["Unknown error"],type:"about:blank",title:"Unknown error",statusCode:0}}class a extends Error{constructor(u){super(u.title||"API Error"),this.name="ApiErrorException",this.statusCode=u.statusCode,this.correlationId=u.correlationId,this.type=u.type,this.instance=u.instance,this.errors=u.errors,Error.captureStackTrace&&Error.captureStackTrace(this,a)}}cs.ApiErrorException=a;function l(o){const u=i(o);throw new a(u)}return cs}var y0;function jI(){if(y0)return ki;y0=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.formatAuthError=s,ki.handleAuthError=i,ki.handleAuthErrorSilent=a,ki.isHttpStatus=l;const t=Lg();function s(o,u,d,h){if(o instanceof t.MisoClientError){const p={statusCode:o.statusCode,message:o.message,errorResponse:o.errorResponse,errorBody:o.errorBody};return`${u} failed: ${o.message}. Full response: ${JSON.stringify(p)} [correlationId: ${d}, clientId: ${h}]`}if(n(o)){const p=o.response?`status: ${o.response.status}, data: ${JSON.stringify(o.response.data)}`:`message: ${o.message}`;return`${u} failed: ${o.message}. ${p} [correlationId: ${d}, clientId: ${h}]`}const f=o instanceof Error?o.message:"Unknown error";return`${u} failed: ${f} [correlationId: ${d}, clientId: ${h}]`}function n(o){return o!==null&&typeof o=="object"&&"isAxiosError"in o&&o.isAxiosError===!0}function i(o,u,d,h){throw new Error(s(o,u,d,h))}function a(o,u,d,h){return console.error(s(o,u,d,h),{correlationId:d,clientId:h,operation:u}),null}function l(o,u){return o instanceof t.MisoClientError?o.statusCode===u:n(o)&&o.response?o.response.status===u:!1}return ki}/*! Axios v1.13.4 Copyright (c) 2026 Matt Zabriskie and contributors */var Tp,v0;function od(){if(v0)return Tp;v0=1;function t(I,N){return function(){return I.apply(N,arguments)}}const{toString:s}=Object.prototype,{getPrototypeOf:n}=Object,{iterator:i,toStringTag:a}=Symbol,l=(I=>N=>{const M=s.call(N);return I[M]||(I[M]=M.slice(8,-1).toLowerCase())})(Object.create(null)),o=I=>(I=I.toLowerCase(),N=>l(N)===I),u=I=>N=>typeof N===I,{isArray:d}=Array,h=u("undefined");function f(I){return I!==null&&!h(I)&&I.constructor!==null&&!h(I.constructor)&&E(I.constructor.isBuffer)&&I.constructor.isBuffer(I)}const p=o("ArrayBuffer");function y(I){let N;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?N=ArrayBuffer.isView(I):N=I&&I.buffer&&p(I.buffer),N}const S=u("string"),E=u("function"),b=u("number"),x=I=>I!==null&&typeof I=="object",v=I=>I===!0||I===!1,C=I=>{if(l(I)!=="object")return!1;const N=n(I);return(N===null||N===Object.prototype||Object.getPrototypeOf(N)===null)&&!(a in I)&&!(i in I)},_=I=>{if(!x(I)||f(I))return!1;try{return Object.keys(I).length===0&&Object.getPrototypeOf(I)===Object.prototype}catch{return!1}},R=o("Date"),D=o("File"),A=o("Blob"),j=o("FileList"),k=I=>x(I)&&E(I.pipe),K=I=>{let N;return I&&(typeof FormData=="function"&&I instanceof FormData||E(I.append)&&((N=l(I))==="formdata"||N==="object"&&E(I.toString)&&I.toString()==="[object FormData]"))},Z=o("URLSearchParams"),[ie,ce,V,F]=["ReadableStream","Request","Response","Headers"].map(o),O=I=>I.trim?I.trim():I.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function q(I,N,{allOwnKeys:M=!1}={}){if(I===null||typeof I>"u")return;let $,B;if(typeof I!="object"&&(I=[I]),d(I))for($=0,B=I.length;$<B;$++)N.call(null,I[$],$,I);else{if(f(I))return;const te=M?Object.getOwnPropertyNames(I):Object.keys(I),re=te.length;let de;for($=0;$<re;$++)de=te[$],N.call(null,I[de],de,I)}}function W(I,N){if(f(I))return null;N=N.toLowerCase();const M=Object.keys(I);let $=M.length,B;for(;$-- >0;)if(B=M[$],N===B.toLowerCase())return B;return null}const L=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:qo,Y=I=>!h(I)&&I!==L;function ee(){const{caseless:I,skipUndefined:N}=Y(this)&&this||{},M={},$=(B,te)=>{const re=I&&W(M,te)||te;C(M[re])&&C(B)?M[re]=ee(M[re],B):C(B)?M[re]=ee({},B):d(B)?M[re]=B.slice():(!N||!h(B))&&(M[re]=B)};for(let B=0,te=arguments.length;B<te;B++)arguments[B]&&q(arguments[B],$);return M}const H=(I,N,M,{allOwnKeys:$}={})=>(q(N,(B,te)=>{M&&E(B)?Object.defineProperty(I,te,{value:t(B,M),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(I,te,{value:B,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:$}),I),X=I=>(I.charCodeAt(0)===65279&&(I=I.slice(1)),I),ne=(I,N,M,$)=>{I.prototype=Object.create(N.prototype,$),Object.defineProperty(I.prototype,"constructor",{value:I,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(I,"super",{value:N.prototype}),M&&Object.assign(I.prototype,M)},fe=(I,N,M,$)=>{let B,te,re;const de={};if(N=N||{},I==null)return N;do{for(B=Object.getOwnPropertyNames(I),te=B.length;te-- >0;)re=B[te],(!$||$(re,I,N))&&!de[re]&&(N[re]=I[re],de[re]=!0);I=M!==!1&&n(I)}while(I&&(!M||M(I,N))&&I!==Object.prototype);return N},he=(I,N,M)=>{I=String(I),(M===void 0||M>I.length)&&(M=I.length),M-=N.length;const $=I.indexOf(N,M);return $!==-1&&$===M},Ae=I=>{if(!I)return null;if(d(I))return I;let N=I.length;if(!b(N))return null;const M=new Array(N);for(;N-- >0;)M[N]=I[N];return M},Ne=(I=>N=>I&&N instanceof I)(typeof Uint8Array<"u"&&n(Uint8Array)),ue=(I,N)=>{const $=(I&&I[i]).call(I);let B;for(;(B=$.next())&&!B.done;){const te=B.value;N.call(I,te[0],te[1])}},ve=(I,N)=>{let M;const $=[];for(;(M=I.exec(N))!==null;)$.push(M);return $},He=o("HTMLFormElement"),ft=I=>I.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(M,$,B){return $.toUpperCase()+B}),U=(({hasOwnProperty:I})=>(N,M)=>I.call(N,M))(Object.prototype),me=o("RegExp"),Ee=(I,N)=>{const M=Object.getOwnPropertyDescriptors(I),$={};q(M,(B,te)=>{let re;(re=N(B,te,I))!==!1&&($[te]=re||B)}),Object.defineProperties(I,$)},tt=I=>{Ee(I,(N,M)=>{if(E(I)&&["arguments","caller","callee"].indexOf(M)!==-1)return!1;const $=I[M];if(E($)){if(N.enumerable=!1,"writable"in N){N.writable=!1;return}N.set||(N.set=()=>{throw Error("Can not rewrite read-only method '"+M+"'")})}})},st=(I,N)=>{const M={},$=B=>{B.forEach(te=>{M[te]=!0})};return d(I)?$(I):$(String(I).split(N)),M},lt=()=>{},ei=(I,N)=>I!=null&&Number.isFinite(I=+I)?I:N;function lr(I){return!!(I&&E(I.append)&&I[a]==="FormData"&&I[i])}const Kn=I=>{const N=new Array(10),M=($,B)=>{if(x($)){if(N.indexOf($)>=0)return;if(f($))return $;if(!("toJSON"in $)){N[B]=$;const te=d($)?[]:{};return q($,(re,de)=>{const Me=M(re,B+1);!h(Me)&&(te[de]=Me)}),N[B]=void 0,te}}return $};return M(I,0)},Cn=o("AsyncFunction"),Mt=I=>I&&(x(I)||E(I))&&E(I.then)&&E(I.catch),zr=((I,N)=>I?setImmediate:N?((M,$)=>(L.addEventListener("message",({source:B,data:te})=>{B===L&&te===M&&$.length&&$.shift()()},!1),B=>{$.push(B),L.postMessage(M,"*")}))(`axios@${Math.random()}`,[]):M=>setTimeout(M))(typeof setImmediate=="function",E(L.postMessage)),Vi=typeof queueMicrotask<"u"?queueMicrotask.bind(L):typeof process<"u"&&process.nextTick||zr;var ae={isArray:d,isArrayBuffer:p,isBuffer:f,isFormData:K,isArrayBufferView:y,isString:S,isNumber:b,isBoolean:v,isObject:x,isPlainObject:C,isEmptyObject:_,isReadableStream:ie,isRequest:ce,isResponse:V,isHeaders:F,isUndefined:h,isDate:R,isFile:D,isBlob:A,isRegExp:me,isFunction:E,isStream:k,isURLSearchParams:Z,isTypedArray:Ne,isFileList:j,forEach:q,merge:ee,extend:H,trim:O,stripBOM:X,inherits:ne,toFlatObject:fe,kindOf:l,kindOfTest:o,endsWith:he,toArray:Ae,forEachEntry:ue,matchAll:ve,isHTMLForm:He,hasOwnProperty:U,hasOwnProp:U,reduceDescriptors:Ee,freezeMethods:tt,toObjectSet:st,toCamelCase:ft,noop:lt,toFiniteNumber:ei,findKey:W,global:L,isContextDefined:Y,isSpecCompliantForm:lr,toJSONObject:Kn,isAsyncFn:Cn,isThenable:Mt,setImmediate:zr,asap:Vi,isIterable:I=>I!=null&&E(I[i])};class Rt extends Error{static from(N,M,$,B,te,re){const de=new Rt(N.message,M||N.code,$,B,te);return de.cause=N,de.name=N.name,re&&Object.assign(de,re),de}constructor(N,M,$,B,te){super(N),this.name="AxiosError",this.isAxiosError=!0,M&&(this.code=M),$&&(this.config=$),B&&(this.request=B),te&&(this.response=te,this.status=te.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ae.toJSONObject(this.config),code:this.code,status:this.status}}}Rt.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE",Rt.ERR_BAD_OPTION="ERR_BAD_OPTION",Rt.ECONNABORTED="ECONNABORTED",Rt.ETIMEDOUT="ETIMEDOUT",Rt.ERR_NETWORK="ERR_NETWORK",Rt.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS",Rt.ERR_DEPRECATED="ERR_DEPRECATED",Rt.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE",Rt.ERR_BAD_REQUEST="ERR_BAD_REQUEST",Rt.ERR_CANCELED="ERR_CANCELED",Rt.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT",Rt.ERR_INVALID_URL="ERR_INVALID_URL";var Ye=Rt,Es=null;function er(I){return ae.isPlainObject(I)||ae.isArray(I)}function on(I){return ae.endsWith(I,"[]")?I.slice(0,-2):I}function an(I,N,M){return I?I.concat(N).map(function(B,te){return B=on(B),!M&&te?"["+B+"]":B}).join(M?".":""):N}function Gi(I){return ae.isArray(I)&&!I.some(er)}const Ji=ae.toFlatObject(ae,{},null,function(N){return/^is[A-Z]/.test(N)});function Wn(I,N,M){if(!ae.isObject(I))throw new TypeError("target must be an object");N=N||new FormData,M=ae.toFlatObject(M,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Ve,Ue){return!ae.isUndefined(Ue[Ve])});const $=M.metaTokens,B=M.visitor||Se,te=M.dots,re=M.indexes,Me=(M.Blob||typeof Blob<"u"&&Blob)&&ae.isSpecCompliantForm(N);if(!ae.isFunction(B))throw new TypeError("visitor must be a function");function _e(Te){if(Te===null)return"";if(ae.isDate(Te))return Te.toISOString();if(ae.isBoolean(Te))return Te.toString();if(!Me&&ae.isBlob(Te))throw new Ye("Blob is not supported. Use a Buffer instead.");return ae.isArrayBuffer(Te)||ae.isTypedArray(Te)?Me&&typeof Blob=="function"?new Blob([Te]):Buffer.from(Te):Te}function Se(Te,Ve,Ue){let xt=Te;if(Te&&!Ue&&typeof Te=="object"){if(ae.endsWith(Ve,"{}"))Ve=$?Ve:Ve.slice(0,-2),Te=JSON.stringify(Te);else if(ae.isArray(Te)&&Gi(Te)||(ae.isFileList(Te)||ae.endsWith(Ve,"[]"))&&(xt=ae.toArray(Te)))return Ve=on(Ve),xt.forEach(function(jt,tr){!(ae.isUndefined(jt)||jt===null)&&N.append(re===!0?an([Ve],tr,te):re===null?Ve:Ve+"[]",_e(jt))}),!1}return er(Te)?!0:(N.append(an(Ue,Ve,te),_e(Te)),!1)}const Fe=[],ut=Object.assign(Ji,{defaultVisitor:Se,convertValue:_e,isVisitable:er});function Ut(Te,Ve){if(!ae.isUndefined(Te)){if(Fe.indexOf(Te)!==-1)throw Error("Circular reference detected in "+Ve.join("."));Fe.push(Te),ae.forEach(Te,function(xt,Cr){(!(ae.isUndefined(xt)||xt===null)&&B.call(N,xt,ae.isString(Cr)?Cr.trim():Cr,Ve,ut))===!0&&Ut(xt,Ve?Ve.concat(Cr):[Cr])}),Fe.pop()}}if(!ae.isObject(I))throw new TypeError("data must be an object");return Ut(I),N}function Vn(I){const N={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(I).replace(/[!'()~]|%20|%00/g,function($){return N[$]})}function Gn(I,N){this._pairs=[],I&&Wn(I,this,N)}const Tn=Gn.prototype;Tn.append=function(N,M){this._pairs.push([N,M])},Tn.toString=function(N){const M=N?function($){return N.call(this,$,Vn)}:Vn;return this._pairs.map(function(B){return M(B[0])+"="+M(B[1])},"").join("&")};function xr(I){return encodeURIComponent(I).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ws(I,N,M){if(!N)return I;const $=M&&M.encode||xr,B=ae.isFunction(M)?{serialize:M}:M,te=B&&B.serialize;let re;if(te?re=te(N,B):re=ae.isURLSearchParams(N)?N.toString():new Gn(N,B).toString($),re){const de=I.indexOf("#");de!==-1&&(I=I.slice(0,de)),I+=(I.indexOf("?")===-1?"?":"&")+re}return I}class _n{constructor(){this.handlers=[]}use(N,M,$){return this.handlers.push({fulfilled:N,rejected:M,synchronous:$?$.synchronous:!1,runWhen:$?$.runWhen:null}),this.handlers.length-1}eject(N){this.handlers[N]&&(this.handlers[N]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(N){ae.forEach(this.handlers,function($){$!==null&&N($)})}}var Kr=_n,Ss={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Je=typeof URLSearchParams<"u"?URLSearchParams:Gn,wt=typeof FormData<"u"?FormData:null,kt=typeof Blob<"u"?Blob:null,zt={isBrowser:!0,classes:{URLSearchParams:Je,FormData:wt,Blob:kt},protocols:["http","https","file","blob","url","data"]};const Wr=typeof window<"u"&&typeof document<"u",vt=typeof navigator=="object"&&navigator||void 0,Ot=Wr&&(!vt||["ReactNative","NativeScript","NS"].indexOf(vt.product)<0),Rn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",$t=Wr&&window.location.href||"http://localhost";var cr=Object.freeze({__proto__:null,hasBrowserEnv:Wr,hasStandardBrowserWebWorkerEnv:Rn,hasStandardBrowserEnv:Ot,navigator:vt,origin:$t}),pt={...cr,...zt};function br(I,N){return Wn(I,new pt.classes.URLSearchParams,{visitor:function(M,$,B,te){return pt.isNode&&ae.isBuffer(M)?(this.append($,M.toString("base64")),!1):te.defaultVisitor.apply(this,arguments)},...N})}function ti(I){return ae.matchAll(/\w+|\[(\w*)]/g,I).map(N=>N[0]==="[]"?"":N[1]||N[0])}function na(I){const N={},M=Object.keys(I);let $;const B=M.length;let te;for($=0;$<B;$++)te=M[$],N[te]=I[te];return N}function Jl(I){function N(M,$,B,te){let re=M[te++];if(re==="__proto__")return!0;const de=Number.isFinite(+re),Me=te>=M.length;return re=!re&&ae.isArray(B)?B.length:re,Me?(ae.hasOwnProp(B,re)?B[re]=[B[re],$]:B[re]=$,!de):((!B[re]||!ae.isObject(B[re]))&&(B[re]=[]),N(M,$,B[re],te)&&ae.isArray(B[re])&&(B[re]=na(B[re])),!de)}if(ae.isFormData(I)&&ae.isFunction(I.entries)){const M={};return ae.forEachEntry(I,($,B)=>{N(ti($),B,M,0)}),M}return null}function kd(I,N,M){if(ae.isString(I))try{return(N||JSON.parse)(I),ae.trim(I)}catch($){if($.name!=="SyntaxError")throw $}return(M||JSON.stringify)(I)}const sa={transitional:Ss,adapter:["xhr","http","fetch"],transformRequest:[function(N,M){const $=M.getContentType()||"",B=$.indexOf("application/json")>-1,te=ae.isObject(N);if(te&&ae.isHTMLForm(N)&&(N=new FormData(N)),ae.isFormData(N))return B?JSON.stringify(Jl(N)):N;if(ae.isArrayBuffer(N)||ae.isBuffer(N)||ae.isStream(N)||ae.isFile(N)||ae.isBlob(N)||ae.isReadableStream(N))return N;if(ae.isArrayBufferView(N))return N.buffer;if(ae.isURLSearchParams(N))return M.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),N.toString();let de;if(te){if($.indexOf("application/x-www-form-urlencoded")>-1)return br(N,this.formSerializer).toString();if((de=ae.isFileList(N))||$.indexOf("multipart/form-data")>-1){const Me=this.env&&this.env.FormData;return Wn(de?{"files[]":N}:N,Me&&new Me,this.formSerializer)}}return te||B?(M.setContentType("application/json",!1),kd(N)):N}],transformResponse:[function(N){const M=this.transitional||sa.transitional,$=M&&M.forcedJSONParsing,B=this.responseType==="json";if(ae.isResponse(N)||ae.isReadableStream(N))return N;if(N&&ae.isString(N)&&($&&!this.responseType||B)){const re=!(M&&M.silentJSONParsing)&&B;try{return JSON.parse(N,this.parseReviver)}catch(de){if(re)throw de.name==="SyntaxError"?Ye.from(de,Ye.ERR_BAD_RESPONSE,this,null,this.response):de}}return N}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pt.classes.FormData,Blob:pt.classes.Blob},validateStatus:function(N){return N>=200&&N<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ae.forEach(["delete","get","head","post","put","patch"],I=>{sa.headers[I]={}});var ln=sa;const Yl=ae.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var Xl=I=>{const N={};let M,$,B;return I&&I.split(`
`).forEach(function(re){B=re.indexOf(":"),M=re.substring(0,B).trim().toLowerCase(),$=re.substring(B+1).trim(),!(!M||N[M]&&Yl[M])&&(M==="set-cookie"?N[M]?N[M].push($):N[M]=[$]:N[M]=N[M]?N[M]+", "+$:$)}),N};const Ql=Symbol("internals");function xs(I){return I&&String(I).trim().toLowerCase()}function ri(I){return I===!1||I==null?I:ae.isArray(I)?I.map(ri):String(I)}function Zl(I){const N=Object.create(null),M=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let $;for(;$=M.exec(I);)N[$[1]]=$[2];return N}const ec=I=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(I.trim());function ia(I,N,M,$,B){if(ae.isFunction($))return $.call(this,N,M);if(B&&(N=M),!!ae.isString(N)){if(ae.isString($))return N.indexOf($)!==-1;if(ae.isRegExp($))return $.test(N)}}function Id(I){return I.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(N,M,$)=>M.toUpperCase()+$)}function St(I,N){const M=ae.toCamelCase(" "+N);["get","set","has"].forEach($=>{Object.defineProperty(I,$+M,{value:function(B,te,re){return this[$].call(this,N,B,te,re)},configurable:!0})})}class Yi{constructor(N){N&&this.set(N)}set(N,M,$){const B=this;function te(de,Me,_e){const Se=xs(Me);if(!Se)throw new Error("header name must be a non-empty string");const Fe=ae.findKey(B,Se);(!Fe||B[Fe]===void 0||_e===!0||_e===void 0&&B[Fe]!==!1)&&(B[Fe||Me]=ri(de))}const re=(de,Me)=>ae.forEach(de,(_e,Se)=>te(_e,Se,Me));if(ae.isPlainObject(N)||N instanceof this.constructor)re(N,M);else if(ae.isString(N)&&(N=N.trim())&&!ec(N))re(Xl(N),M);else if(ae.isObject(N)&&ae.isIterable(N)){let de={},Me,_e;for(const Se of N){if(!ae.isArray(Se))throw TypeError("Object iterator must return a key-value pair");de[_e=Se[0]]=(Me=de[_e])?ae.isArray(Me)?[...Me,Se[1]]:[Me,Se[1]]:Se[1]}re(de,M)}else N!=null&&te(M,N,$);return this}get(N,M){if(N=xs(N),N){const $=ae.findKey(this,N);if($){const B=this[$];if(!M)return B;if(M===!0)return Zl(B);if(ae.isFunction(M))return M.call(this,B,$);if(ae.isRegExp(M))return M.exec(B);throw new TypeError("parser must be boolean|regexp|function")}}}has(N,M){if(N=xs(N),N){const $=ae.findKey(this,N);return!!($&&this[$]!==void 0&&(!M||ia(this,this[$],$,M)))}return!1}delete(N,M){const $=this;let B=!1;function te(re){if(re=xs(re),re){const de=ae.findKey($,re);de&&(!M||ia($,$[de],de,M))&&(delete $[de],B=!0)}}return ae.isArray(N)?N.forEach(te):te(N),B}clear(N){const M=Object.keys(this);let $=M.length,B=!1;for(;$--;){const te=M[$];(!N||ia(this,this[te],te,N,!0))&&(delete this[te],B=!0)}return B}normalize(N){const M=this,$={};return ae.forEach(this,(B,te)=>{const re=ae.findKey($,te);if(re){M[re]=ri(B),delete M[te];return}const de=N?Id(te):String(te).trim();de!==te&&delete M[te],M[de]=ri(B),$[de]=!0}),this}concat(...N){return this.constructor.concat(this,...N)}toJSON(N){const M=Object.create(null);return ae.forEach(this,($,B)=>{$!=null&&$!==!1&&(M[B]=N&&ae.isArray($)?$.join(", "):$)}),M}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([N,M])=>N+": "+M).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(N){return N instanceof this?N:new this(N)}static concat(N,...M){const $=new this(N);return M.forEach(B=>$.set(B)),$}static accessor(N){const $=(this[Ql]=this[Ql]={accessors:{}}).accessors,B=this.prototype;function te(re){const de=xs(re);$[de]||(St(B,re),$[de]=!0)}return ae.isArray(N)?N.forEach(te):te(N),this}}Yi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ae.reduceDescriptors(Yi.prototype,({value:I},N)=>{let M=N[0].toUpperCase()+N.slice(1);return{get:()=>I,set($){this[M]=$}}}),ae.freezeMethods(Yi);var ur=Yi;function Xi(I,N){const M=this||ln,$=N||M,B=ur.from($.headers);let te=$.data;return ae.forEach(I,function(de){te=de.call(M,te,B.normalize(),N?N.status:void 0)}),B.normalize(),te}function ni(I){return!!(I&&I.__CANCEL__)}class Ad extends Ye{constructor(N,M,$){super(N??"canceled",Ye.ERR_CANCELED,M,$),this.name="CanceledError",this.__CANCEL__=!0}}var bs=Ad;function si(I,N,M){const $=M.config.validateStatus;!M.status||!$||$(M.status)?I(M):N(new Ye("Request failed with status code "+M.status,[Ye.ERR_BAD_REQUEST,Ye.ERR_BAD_RESPONSE][Math.floor(M.status/100)-4],M.config,M.request,M))}function Vr(I){const N=/^([-+\w]{1,25})(:?\/\/|:)/.exec(I);return N&&N[1]||""}function Nd(I,N){I=I||10;const M=new Array(I),$=new Array(I);let B=0,te=0,re;return N=N!==void 0?N:1e3,function(Me){const _e=Date.now(),Se=$[te];re||(re=_e),M[B]=Me,$[B]=_e;let Fe=te,ut=0;for(;Fe!==B;)ut+=M[Fe++],Fe=Fe%I;if(B=(B+1)%I,B===te&&(te=(te+1)%I),_e-re<N)return;const Ut=Se&&_e-Se;return Ut?Math.round(ut*1e3/Ut):void 0}}function Mr(I,N){let M=0,$=1e3/N,B,te;const re=(_e,Se=Date.now())=>{M=Se,B=null,te&&(clearTimeout(te),te=null),I(..._e)};return[(..._e)=>{const Se=Date.now(),Fe=Se-M;Fe>=$?re(_e,Se):(B=_e,te||(te=setTimeout(()=>{te=null,re(B)},$-Fe)))},()=>B&&re(B)]}const Qi=(I,N,M=3)=>{let $=0;const B=Nd(50,250);return Mr(te=>{const re=te.loaded,de=te.lengthComputable?te.total:void 0,Me=re-$,_e=B(Me),Se=re<=de;$=re;const Fe={loaded:re,total:de,progress:de?re/de:void 0,bytes:Me,rate:_e||void 0,estimated:_e&&de&&Se?(de-re)/_e:void 0,event:te,lengthComputable:de!=null,[N?"download":"upload"]:!0};I(Fe)},M)},tc=(I,N)=>{const M=I!=null;return[$=>N[0]({lengthComputable:M,total:I,loaded:$}),N[1]]},rc=I=>(...N)=>ae.asap(()=>I(...N));var Zi=pt.hasStandardBrowserEnv?((I,N)=>M=>(M=new URL(M,pt.origin),I.protocol===M.protocol&&I.host===M.host&&(N||I.port===M.port)))(new URL(pt.origin),pt.navigator&&/(msie|trident)/i.test(pt.navigator.userAgent)):()=>!0,eo=pt.hasStandardBrowserEnv?{write(I,N,M,$,B,te,re){if(typeof document>"u")return;const de=[`${I}=${encodeURIComponent(N)}`];ae.isNumber(M)&&de.push(`expires=${new Date(M).toUTCString()}`),ae.isString($)&&de.push(`path=${$}`),ae.isString(B)&&de.push(`domain=${B}`),te===!0&&de.push("secure"),ae.isString(re)&&de.push(`SameSite=${re}`),document.cookie=de.join("; ")},read(I){if(typeof document>"u")return null;const N=document.cookie.match(new RegExp("(?:^|; )"+I+"=([^;]*)"));return N?decodeURIComponent(N[1]):null},remove(I){this.write(I,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function ii(I){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(I)}function to(I,N){return N?I.replace(/\/?\/$/,"")+"/"+N.replace(/^\/+/,""):I}function nc(I,N,M){let $=!ii(N);return I&&($||M==!1)?to(I,N):N}const sc=I=>I instanceof ur?{...I}:I;function cn(I,N){N=N||{};const M={};function $(_e,Se,Fe,ut){return ae.isPlainObject(_e)&&ae.isPlainObject(Se)?ae.merge.call({caseless:ut},_e,Se):ae.isPlainObject(Se)?ae.merge({},Se):ae.isArray(Se)?Se.slice():Se}function B(_e,Se,Fe,ut){if(ae.isUndefined(Se)){if(!ae.isUndefined(_e))return $(void 0,_e,Fe,ut)}else return $(_e,Se,Fe,ut)}function te(_e,Se){if(!ae.isUndefined(Se))return $(void 0,Se)}function re(_e,Se){if(ae.isUndefined(Se)){if(!ae.isUndefined(_e))return $(void 0,_e)}else return $(void 0,Se)}function de(_e,Se,Fe){if(Fe in N)return $(_e,Se);if(Fe in I)return $(void 0,_e)}const Me={url:te,method:te,data:te,baseURL:re,transformRequest:re,transformResponse:re,paramsSerializer:re,timeout:re,timeoutMessage:re,withCredentials:re,withXSRFToken:re,adapter:re,responseType:re,xsrfCookieName:re,xsrfHeaderName:re,onUploadProgress:re,onDownloadProgress:re,decompress:re,maxContentLength:re,maxBodyLength:re,beforeRedirect:re,transport:re,httpAgent:re,httpsAgent:re,cancelToken:re,socketPath:re,responseEncoding:re,validateStatus:de,headers:(_e,Se,Fe)=>B(sc(_e),sc(Se),Fe,!0)};return ae.forEach(Object.keys({...I,...N}),function(Se){const Fe=Me[Se]||B,ut=Fe(I[Se],N[Se],Se);ae.isUndefined(ut)&&Fe!==de||(M[Se]=ut)}),M}var oa=I=>{const N=cn({},I);let{data:M,withXSRFToken:$,xsrfHeaderName:B,xsrfCookieName:te,headers:re,auth:de}=N;if(N.headers=re=ur.from(re),N.url=ws(nc(N.baseURL,N.url,N.allowAbsoluteUrls),I.params,I.paramsSerializer),de&&re.set("Authorization","Basic "+btoa((de.username||"")+":"+(de.password?unescape(encodeURIComponent(de.password)):""))),ae.isFormData(M)){if(pt.hasStandardBrowserEnv||pt.hasStandardBrowserWebWorkerEnv)re.setContentType(void 0);else if(ae.isFunction(M.getHeaders)){const Me=M.getHeaders(),_e=["content-type","content-length"];Object.entries(Me).forEach(([Se,Fe])=>{_e.includes(Se.toLowerCase())&&re.set(Se,Fe)})}}if(pt.hasStandardBrowserEnv&&($&&ae.isFunction($)&&($=$(N)),$||$!==!1&&Zi(N.url))){const Me=B&&te&&eo.read(te);Me&&re.set(B,Me)}return N},oi=typeof XMLHttpRequest<"u"&&function(I){return new Promise(function(M,$){const B=oa(I);let te=B.data;const re=ur.from(B.headers).normalize();let{responseType:de,onUploadProgress:Me,onDownloadProgress:_e}=B,Se,Fe,ut,Ut,Te;function Ve(){Ut&&Ut(),Te&&Te(),B.cancelToken&&B.cancelToken.unsubscribe(Se),B.signal&&B.signal.removeEventListener("abort",Se)}let Ue=new XMLHttpRequest;Ue.open(B.method.toUpperCase(),B.url,!0),Ue.timeout=B.timeout;function xt(){if(!Ue)return;const jt=ur.from("getAllResponseHeaders"in Ue&&Ue.getAllResponseHeaders()),$r={data:!de||de==="text"||de==="json"?Ue.responseText:Ue.response,status:Ue.status,statusText:Ue.statusText,headers:jt,config:I,request:Ue};si(function(dr){M(dr),Ve()},function(dr){$(dr),Ve()},$r),Ue=null}"onloadend"in Ue?Ue.onloadend=xt:Ue.onreadystatechange=function(){!Ue||Ue.readyState!==4||Ue.status===0&&!(Ue.responseURL&&Ue.responseURL.indexOf("file:")===0)||setTimeout(xt)},Ue.onabort=function(){Ue&&($(new Ye("Request aborted",Ye.ECONNABORTED,I,Ue)),Ue=null)},Ue.onerror=function(tr){const $r=tr&&tr.message?tr.message:"Network Error",Xn=new Ye($r,Ye.ERR_NETWORK,I,Ue);Xn.event=tr||null,$(Xn),Ue=null},Ue.ontimeout=function(){let tr=B.timeout?"timeout of "+B.timeout+"ms exceeded":"timeout exceeded";const $r=B.transitional||Ss;B.timeoutErrorMessage&&(tr=B.timeoutErrorMessage),$(new Ye(tr,$r.clarifyTimeoutError?Ye.ETIMEDOUT:Ye.ECONNABORTED,I,Ue)),Ue=null},te===void 0&&re.setContentType(null),"setRequestHeader"in Ue&&ae.forEach(re.toJSON(),function(tr,$r){Ue.setRequestHeader($r,tr)}),ae.isUndefined(B.withCredentials)||(Ue.withCredentials=!!B.withCredentials),de&&de!=="json"&&(Ue.responseType=B.responseType),_e&&([ut,Te]=Qi(_e,!0),Ue.addEventListener("progress",ut)),Me&&Ue.upload&&([Fe,Ut]=Qi(Me),Ue.upload.addEventListener("progress",Fe),Ue.upload.addEventListener("loadend",Ut)),(B.cancelToken||B.signal)&&(Se=jt=>{Ue&&($(!jt||jt.type?new bs(null,I,Ue):jt),Ue.abort(),Ue=null)},B.cancelToken&&B.cancelToken.subscribe(Se),B.signal&&(B.signal.aborted?Se():B.signal.addEventListener("abort",Se)));const Cr=Vr(B.url);if(Cr&&pt.protocols.indexOf(Cr)===-1){$(new Ye("Unsupported protocol "+Cr+":",Ye.ERR_BAD_REQUEST,I));return}Ue.send(te||null)})},aa=(I,N)=>{const{length:M}=I=I?I.filter(Boolean):[];if(N||M){let $=new AbortController,B;const te=function(_e){if(!B){B=!0,de();const Se=_e instanceof Error?_e:this.reason;$.abort(Se instanceof Ye?Se:new bs(Se instanceof Error?Se.message:Se))}};let re=N&&setTimeout(()=>{re=null,te(new Ye(`timeout of ${N}ms exceeded`,Ye.ETIMEDOUT))},N);const de=()=>{I&&(re&&clearTimeout(re),re=null,I.forEach(_e=>{_e.unsubscribe?_e.unsubscribe(te):_e.removeEventListener("abort",te)}),I=null)};I.forEach(_e=>_e.addEventListener("abort",te));const{signal:Me}=$;return Me.unsubscribe=()=>ae.asap(de),Me}};const ct=function*(I,N){let M=I.byteLength;if(M<N){yield I;return}let $=0,B;for(;$<M;)B=$+N,yield I.slice($,B),$=B},oc=async function*(I,N){for await(const M of ac(I))yield*ct(M,N)},ac=async function*(I){if(I[Symbol.asyncIterator]){yield*I;return}const N=I.getReader();try{for(;;){const{done:M,value:$}=await N.read();if(M)break;yield $}}finally{await N.cancel()}},ro=(I,N,M,$)=>{const B=oc(I,N);let te=0,re,de=Me=>{re||(re=!0,$&&$(Me))};return new ReadableStream({async pull(Me){try{const{done:_e,value:Se}=await B.next();if(_e){de(),Me.close();return}let Fe=Se.byteLength;if(M){let ut=te+=Fe;M(ut)}Me.enqueue(new Uint8Array(Se))}catch(_e){throw de(_e),_e}},cancel(Me){return de(Me),B.return()}},{highWaterMark:2})},la=64*1024,{isFunction:ai}=ae,lc=(({Request:I,Response:N})=>({Request:I,Response:N}))(ae.global),{ReadableStream:no,TextEncoder:li}=ae.global,un=(I,...N)=>{try{return!!I(...N)}catch{return!1}},kn=I=>{I=ae.merge.call({skipUndefined:!0},lc,I);const{fetch:N,Request:M,Response:$}=I,B=N?ai(N):typeof fetch=="function",te=ai(M),re=ai($);if(!B)return!1;const de=B&&ai(no),Me=B&&(typeof li=="function"?(Te=>Ve=>Te.encode(Ve))(new li):async Te=>new Uint8Array(await new M(Te).arrayBuffer())),_e=te&&de&&un(()=>{let Te=!1;const Ve=new M(pt.origin,{body:new no,method:"POST",get duplex(){return Te=!0,"half"}}).headers.has("Content-Type");return Te&&!Ve}),Se=re&&de&&un(()=>ae.isReadableStream(new $("").body)),Fe={stream:Se&&(Te=>Te.body)};B&&["text","arrayBuffer","blob","formData","stream"].forEach(Te=>{!Fe[Te]&&(Fe[Te]=(Ve,Ue)=>{let xt=Ve&&Ve[Te];if(xt)return xt.call(Ve);throw new Ye(`Response type '${Te}' is not supported`,Ye.ERR_NOT_SUPPORT,Ue)})});const ut=async Te=>{if(Te==null)return 0;if(ae.isBlob(Te))return Te.size;if(ae.isSpecCompliantForm(Te))return(await new M(pt.origin,{method:"POST",body:Te}).arrayBuffer()).byteLength;if(ae.isArrayBufferView(Te)||ae.isArrayBuffer(Te))return Te.byteLength;if(ae.isURLSearchParams(Te)&&(Te=Te+""),ae.isString(Te))return(await Me(Te)).byteLength},Ut=async(Te,Ve)=>{const Ue=ae.toFiniteNumber(Te.getContentLength());return Ue??ut(Ve)};return async Te=>{let{url:Ve,method:Ue,data:xt,signal:Cr,cancelToken:jt,timeout:tr,onDownloadProgress:$r,onUploadProgress:Xn,responseType:dr,headers:pa,withCredentials:lo="same-origin",fetchOptions:dc}=oa(Te),fc=N||fetch;dr=dr?(dr+"").toLowerCase():"text";let _s=aa([Cr,jt&&jt.toAbortSignal()],tr),fi=null;const Qn=_s&&_s.unsubscribe&&(()=>{_s.unsubscribe()});let hc;try{if(Xn&&_e&&Ue!=="get"&&Ue!=="head"&&(hc=await Ut(pa,xt))!==0){let On=new M(Ve,{method:"POST",body:xt,duplex:"half"}),Rs;if(ae.isFormData(xt)&&(Rs=On.headers.get("content-type"))&&pa.setContentType(Rs),On.body){const[ma,ks]=tc(hc,Qi(rc(Xn)));xt=ro(On.body,la,ma,ks)}}ae.isString(lo)||(lo=lo?"include":"omit");const Ur=te&&"credentials"in M.prototype,pc={...dc,signal:_s,method:Ue.toUpperCase(),headers:pa.normalize().toJSON(),body:xt,duplex:"half",credentials:Ur?lo:void 0};fi=te&&new M(Ve,pc);let Pn=await(te?fc(fi,dc):fc(Ve,pc));const mc=Se&&(dr==="stream"||dr==="response");if(Se&&($r||mc&&Qn)){const On={};["status","statusText","headers"].forEach(Is=>{On[Is]=Pn[Is]});const Rs=ae.toFiniteNumber(Pn.headers.get("content-length")),[ma,ks]=$r&&tc(Rs,Qi(rc($r),!0))||[];Pn=new $(ro(Pn.body,la,ma,()=>{ks&&ks(),Qn&&Qn()}),On)}dr=dr||"text";let Od=await Fe[ae.findKey(Fe,dr)||"text"](Pn,Te);return!mc&&Qn&&Qn(),await new Promise((On,Rs)=>{si(On,Rs,{data:Od,headers:ur.from(Pn.headers),status:Pn.status,statusText:Pn.statusText,config:Te,request:fi})})}catch(Ur){throw Qn&&Qn(),Ur&&Ur.name==="TypeError"&&/Load failed|fetch/i.test(Ur.message)?Object.assign(new Ye("Network Error",Ye.ERR_NETWORK,Te,fi),{cause:Ur.cause||Ur}):Ye.from(Ur,Ur&&Ur.code,Te,fi)}}},In=new Map,Cs=I=>{let N=I&&I.env||{};const{fetch:M,Request:$,Response:B}=N,te=[$,B,M];let re=te.length,de=re,Me,_e,Se=In;for(;de--;)Me=te[de],_e=Se.get(Me),_e===void 0&&Se.set(Me,_e=de?new Map:kn(N)),Se=_e;return _e};Cs();const Jn={http:Es,xhr:oi,fetch:{get:Cs}};ae.forEach(Jn,(I,N)=>{if(I){try{Object.defineProperty(I,"name",{value:N})}catch{}Object.defineProperty(I,"adapterName",{value:N})}});const dn=I=>`- ${I}`,Pd=I=>ae.isFunction(I)||I===null||I===!1;function cc(I,N){I=ae.isArray(I)?I:[I];const{length:M}=I;let $,B;const te={};for(let re=0;re<M;re++){$=I[re];let de;if(B=$,!Pd($)&&(B=Jn[(de=String($)).toLowerCase()],B===void 0))throw new Ye(`Unknown adapter '${de}'`);if(B&&(ae.isFunction(B)||(B=B.get(N))))break;te[de||"#"+re]=B}if(!B){const re=Object.entries(te).map(([Me,_e])=>`adapter ${Me} `+(_e===!1?"is not supported by the environment":"is not available in the build"));let de=M?re.length>1?`since :
`+re.map(dn).join(`
`):" "+dn(re[0]):"as no adapter specified";throw new Ye("There is no suitable adapter to dispatch the request "+de,"ERR_NOT_SUPPORT")}return B}var Ts={getAdapter:cc,adapters:Jn};function ca(I){if(I.cancelToken&&I.cancelToken.throwIfRequested(),I.signal&&I.signal.aborted)throw new bs(null,I)}function ua(I){return ca(I),I.headers=ur.from(I.headers),I.data=Xi.call(I,I.transformRequest),["post","put","patch"].indexOf(I.method)!==-1&&I.headers.setContentType("application/x-www-form-urlencoded",!1),Ts.getAdapter(I.adapter||ln.adapter,I)(I).then(function($){return ca(I),$.data=Xi.call(I,I.transformResponse,$),$.headers=ur.from($.headers),$},function($){return ni($)||(ca(I),$&&$.response&&($.response.data=Xi.call(I,I.transformResponse,$.response),$.response.headers=ur.from($.response.headers))),Promise.reject($)})}const ci="1.13.4",ui={};["object","boolean","number","function","string","symbol"].forEach((I,N)=>{ui[I]=function($){return typeof $===I||"a"+(N<1?"n ":" ")+I}});const uc={};ui.transitional=function(N,M,$){function B(te,re){return"[Axios v"+ci+"] Transitional option '"+te+"'"+re+($?". "+$:"")}return(te,re,de)=>{if(N===!1)throw new Ye(B(re," has been removed"+(M?" in "+M:"")),Ye.ERR_DEPRECATED);return M&&!uc[re]&&(uc[re]=!0,console.warn(B(re," has been deprecated since v"+M+" and will be removed in the near future"))),N?N(te,re,de):!0}},ui.spelling=function(N){return(M,$)=>(console.warn(`${$} is likely a misspelling of ${N}`),!0)};function di(I,N,M){if(typeof I!="object")throw new Ye("options must be an object",Ye.ERR_BAD_OPTION_VALUE);const $=Object.keys(I);let B=$.length;for(;B-- >0;){const te=$[B],re=N[te];if(re){const de=I[te],Me=de===void 0||re(de,te,I);if(Me!==!0)throw new Ye("option "+te+" must be "+Me,Ye.ERR_BAD_OPTION_VALUE);continue}if(M!==!0)throw new Ye("Unknown option "+te,Ye.ERR_BAD_OPTION)}}var An={assertOptions:di,validators:ui};const Xt=An.validators;class Yn{constructor(N){this.defaults=N||{},this.interceptors={request:new Kr,response:new Kr}}async request(N,M){try{return await this._request(N,M)}catch($){if($ instanceof Error){let B={};Error.captureStackTrace?Error.captureStackTrace(B):B=new Error;const te=B.stack?B.stack.replace(/^.+\n/,""):"";try{$.stack?te&&!String($.stack).endsWith(te.replace(/^.+\n.+\n/,""))&&($.stack+=`
`+te):$.stack=te}catch{}}throw $}}_request(N,M){typeof N=="string"?(M=M||{},M.url=N):M=N||{},M=cn(this.defaults,M);const{transitional:$,paramsSerializer:B,headers:te}=M;$!==void 0&&An.assertOptions($,{silentJSONParsing:Xt.transitional(Xt.boolean),forcedJSONParsing:Xt.transitional(Xt.boolean),clarifyTimeoutError:Xt.transitional(Xt.boolean)},!1),B!=null&&(ae.isFunction(B)?M.paramsSerializer={serialize:B}:An.assertOptions(B,{encode:Xt.function,serialize:Xt.function},!0)),M.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?M.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:M.allowAbsoluteUrls=!0),An.assertOptions(M,{baseUrl:Xt.spelling("baseURL"),withXsrfToken:Xt.spelling("withXSRFToken")},!0),M.method=(M.method||this.defaults.method||"get").toLowerCase();let re=te&&ae.merge(te.common,te[M.method]);te&&ae.forEach(["delete","get","head","post","put","patch","common"],Te=>{delete te[Te]}),M.headers=ur.concat(re,te);const de=[];let Me=!0;this.interceptors.request.forEach(function(Ve){typeof Ve.runWhen=="function"&&Ve.runWhen(M)===!1||(Me=Me&&Ve.synchronous,de.unshift(Ve.fulfilled,Ve.rejected))});const _e=[];this.interceptors.response.forEach(function(Ve){_e.push(Ve.fulfilled,Ve.rejected)});let Se,Fe=0,ut;if(!Me){const Te=[ua.bind(this),void 0];for(Te.unshift(...de),Te.push(..._e),ut=Te.length,Se=Promise.resolve(M);Fe<ut;)Se=Se.then(Te[Fe++],Te[Fe++]);return Se}ut=de.length;let Ut=M;for(;Fe<ut;){const Te=de[Fe++],Ve=de[Fe++];try{Ut=Te(Ut)}catch(Ue){Ve.call(this,Ue);break}}try{Se=ua.call(this,Ut)}catch(Te){return Promise.reject(Te)}for(Fe=0,ut=_e.length;Fe<ut;)Se=Se.then(_e[Fe++],_e[Fe++]);return Se}getUri(N){N=cn(this.defaults,N);const M=nc(N.baseURL,N.url,N.allowAbsoluteUrls);return ws(M,N.params,N.paramsSerializer)}}ae.forEach(["delete","get","head","options"],function(N){Yn.prototype[N]=function(M,$){return this.request(cn($||{},{method:N,url:M,data:($||{}).data}))}}),ae.forEach(["post","put","patch"],function(N){function M($){return function(te,re,de){return this.request(cn(de||{},{method:N,headers:$?{"Content-Type":"multipart/form-data"}:{},url:te,data:re}))}}Yn.prototype[N]=M(),Yn.prototype[N+"Form"]=M(!0)});var so=Yn;class da{constructor(N){if(typeof N!="function")throw new TypeError("executor must be a function.");let M;this.promise=new Promise(function(te){M=te});const $=this;this.promise.then(B=>{if(!$._listeners)return;let te=$._listeners.length;for(;te-- >0;)$._listeners[te](B);$._listeners=null}),this.promise.then=B=>{let te;const re=new Promise(de=>{$.subscribe(de),te=de}).then(B);return re.cancel=function(){$.unsubscribe(te)},re},N(function(te,re,de){$.reason||($.reason=new bs(te,re,de),M($.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(N){if(this.reason){N(this.reason);return}this._listeners?this._listeners.push(N):this._listeners=[N]}unsubscribe(N){if(!this._listeners)return;const M=this._listeners.indexOf(N);M!==-1&&this._listeners.splice(M,1)}toAbortSignal(){const N=new AbortController,M=$=>{N.abort($)};return this.subscribe(M),N.signal.unsubscribe=()=>this.unsubscribe(M),N.signal}static source(){let N;return{token:new da(function(B){N=B}),cancel:N}}}var fa=da;function io(I){return function(M){return I.apply(null,M)}}function ha(I){return ae.isObject(I)&&I.isAxiosError===!0}const oo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(oo).forEach(([I,N])=>{oo[N]=I});var Nn=oo;function ao(I){const N=new so(I),M=t(so.prototype.request,N);return ae.extend(M,so.prototype,N,{allOwnKeys:!0}),ae.extend(M,N,null,{allOwnKeys:!0}),M.create=function(B){return ao(cn(I,B))},M}const mt=ao(ln);return mt.Axios=so,mt.CanceledError=bs,mt.CancelToken=fa,mt.isCancel=ni,mt.VERSION=ci,mt.toFormData=Wn,mt.AxiosError=Ye,mt.Cancel=mt.CanceledError,mt.all=function(N){return Promise.all(N)},mt.spread=io,mt.isAxiosError=ha,mt.mergeConfig=cn,mt.AxiosHeaders=ur,mt.formToJSON=I=>Jl(ae.isHTMLForm(I)?new FormData(I):I),mt.getAdapter=Ts.getAdapter,mt.HttpStatusCode=Nn,mt.default=mt,Tp=mt,Tp}const LI={},DI=Object.freeze(Object.defineProperty({__proto__:null,default:LI},Symbol.toStringTag,{value:"Module"})),Ki=Ml(DI);var E0;function w0(){if(E0)return Br;E0=1;var t=Br&&Br.__createBinding||(Object.create?(function(h,f,p,y){y===void 0&&(y=p);var S=Object.getOwnPropertyDescriptor(f,p);(!S||("get"in S?!f.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return f[p]}}),Object.defineProperty(h,y,S)}):(function(h,f,p,y){y===void 0&&(y=p),h[y]=f[p]})),s=Br&&Br.__setModuleDefault||(Object.create?(function(h,f){Object.defineProperty(h,"default",{enumerable:!0,value:f})}):function(h,f){h.default=f}),n=Br&&Br.__importStar||(function(){var h=function(f){return h=Object.getOwnPropertyNames||function(p){var y=[];for(var S in p)Object.prototype.hasOwnProperty.call(p,S)&&(y[y.length]=S);return y},h(f)};return function(f){if(f&&f.__esModule)return f;var p={};if(f!=null)for(var y=h(f),S=0;S<y.length;S++)y[S]!=="default"&&t(p,f,y[S]);return s(p,f),p}})(),i=Br&&Br.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Br,"__esModule",{value:!0}),Br.AuthService=void 0;const a=i(Wi),l=$l(),o=i(Jo()),u=jI();class d{constructor(f,p,y){this.config=f.config,this.cache=y,this.httpClient=f,this.apiClient=p,this.tokenValidationTTL=this.config.cache?.tokenValidationTTL||900,this.minValidationTTL=this.config.cache?.minValidationTTL||60,this.userTTL=this.config.cache?.userTTL||300}isApiKeyToken(f){return this.config.apiKey!==void 0&&f===this.config.apiKey}extractUserIdFromToken(f){try{const p=o.default.decode(f);return p?p.sub||p.userId||p.user_id||p.id:null}catch{return null}}getTokenCacheKey(f){return`token_validation:${a.default.createHash("sha256").update(f).digest("hex")}`}getCacheTtlFromToken(f){try{const y=o.default.decode(f);if(!y||typeof y.exp!="number")return this.tokenValidationTTL;const S=Math.floor(Date.now()/1e3),E=y.exp-S-30;return Math.max(this.minValidationTTL,Math.min(E,this.tokenValidationTTL))}catch{return this.tokenValidationTTL}}generateCorrelationId(){const f=Date.now(),p=Math.random().toString(36).substring(2,8);return`${this.config.clientId.substring(0,10)}-${f}-${p}`}extractTokenFromEnvResponse(f){const p=f,y=p?.data;return y?.data?.token||y?.token||p?.token}async getEnvironmentToken(){const f=this.generateCorrelationId(),p=this.config.clientId,y=4e3;try{const{tempAxios:S,timeoutId:E,controller:b}=await this.createEnvTokenClient(y,p),x=await this.fetchEnvironmentToken(S,E,b,y),v=this.extractTokenFromEnvResponse(x.data);if(x.status>=200&&x.status<300&&v)return v;throw new Error(`Invalid response format. Status: ${x.status}`)}catch(S){return(0,u.handleAuthErrorSilent)(S,"Get environment token",f,p),""}}async createEnvTokenClient(f,p){const y=(await Promise.resolve().then(()=>n(od()))).default,S=await Promise.resolve().then(()=>n(Ki)),E=await Promise.resolve().then(()=>n(Ki)),b=(0,l.resolveControllerUrl)(this.config),x=b.startsWith("https://"),v={family:4,timeout:f},C=new AbortController,_=setTimeout(()=>C.abort(),f);return{tempAxios:y.create({baseURL:b,timeout:f,signal:C.signal,httpAgent:x?void 0:new S.Agent(v),httpsAgent:x?new E.Agent(v):void 0,headers:{"Content-Type":"application/json","x-client-id":p,"x-client-secret":this.config.clientSecret}}),timeoutId:_,controller:C}}async fetchEnvironmentToken(f,p,y,S){const E=new Promise((b,x)=>setTimeout(()=>x(new Error(`Request timeout after ${S}ms`)),S));try{const b=await Promise.race([f.post(this.config.clientTokenUri||"/api/v1/auth/token"),E]);return clearTimeout(p),b}catch(b){throw clearTimeout(p),y.abort(),b}}async login(f){const p=this.generateCorrelationId(),y=this.config.clientId;try{const S={redirect:f.redirect};f.state&&(S.state=f.state);const E=this.config.authStrategy,b=await this.apiClient.auth.login({redirect:f.redirect,state:f.state},E);return{success:b.success,data:{loginUrl:b.data.loginUrl,state:b.data.state||""},timestamp:b.timestamp}}catch(S){return(0,u.handleAuthErrorSilent)(S,"Login",p,y),{success:!1,data:{loginUrl:"",state:f.state||""},timestamp:new Date().toISOString()}}}async validateToken(f,p){if(this.isApiKeyToken(f))return!0;try{const y=this.getTokenCacheKey(f),S=await this.cache.get(y);if(S)return S.authenticated;const E=p||this.config.authStrategy,b=E?{...E,bearerToken:f}:{methods:["bearer"],bearerToken:f},v=(await this.apiClient.auth.validateToken({token:f},b)).data?.authenticated||!1,C=this.getCacheTtlFromToken(f);return await this.cache.set(y,{authenticated:v,timestamp:Date.now()},C),v}catch(y){return this.logAuthServiceError("Validate token",y,f,"/api/auth/validate"),!1}}async getUser(f,p){if(this.isApiKeyToken(f))return null;try{const y=p||this.config.authStrategy,S=y?{...y,bearerToken:f}:{methods:["bearer"],bearerToken:f},E=await this.apiClient.auth.validateToken({token:f},S);return E.data?.authenticated&&E.data.user?{id:E.data.user.id,username:E.data.user.username,email:E.data.user.email}:null}catch(y){return this.logAuthServiceError("Get user",y,f,"/api/auth/validate"),null}}logAuthServiceError(f,p,y,S,E="POST"){const b=this.extractUserIdFromToken(y),x=p?.statusCode||p?.response?.status;console.error(`${f} failed`,{operation:f,path:S,method:E,ipAddress:"unknown",userId:b||void 0,statusCode:x,correlationId:p?.correlationId,errorMessage:p instanceof Error?p.message:String(p),stackTrace:p instanceof Error?p.stack:void 0})}async getUserInfo(f,p){if(this.isApiKeyToken(f))return null;try{const y=this.extractUserIdFromToken(f),S=y?`user:${y}`:null;if(S){const v=await this.cache.get(S);if(v)return v.user}const E=p||this.config.authStrategy,b=E?{...E,bearerToken:f}:{methods:["bearer"],bearerToken:f},x=await this.apiClient.auth.getUser(b);if(x.data?.authenticated&&x.data.user){const v={id:x.data.user.id,username:x.data.user.username,email:x.data.user.email};return S&&await this.cache.set(S,{user:v,timestamp:Date.now()},this.userTTL),v}return null}catch(y){return this.logAuthServiceError("Get user info",y,f,"/api/auth/user","GET"),null}}clearTokenCache(f){try{const p=this.getTokenCacheKey(f);this.cache.delete(p)}catch(p){console.warn("Failed to clear token cache:",p)}}clearUserCache(f){try{const p=this.extractUserIdFromToken(f);p&&this.cache.delete(`user:${p}`)}catch(p){console.warn("Failed to clear user cache:",{errorMessage:p instanceof Error?p.message:String(p)})}}async logout(f){const p=this.generateCorrelationId(),y=this.config.clientId;try{const S=await this.apiClient.auth.logoutWithToken(f.token);return this.clearTokenCache(f.token),this.clearUserCache(f.token),S}catch(S){return(0,u.isHttpStatus)(S,400)?(console.warn("Logout: No active session (400)",{correlationId:p}),this.clearTokenCache(f.token),this.clearUserCache(f.token),{success:!0,message:"Logout successful (no active session)",timestamp:new Date().toISOString()}):((0,u.handleAuthErrorSilent)(S,"Logout",p,y),{success:!1,message:"Logout failed",timestamp:new Date().toISOString()})}}async refreshToken(f,p){const y=this.generateCorrelationId(),S=this.config.clientId;try{const E=p||this.config.authStrategy,b=await this.apiClient.auth.refreshToken({refreshToken:f},E);return b.data?{success:b.success,accessToken:b.data.accessToken,refreshToken:b.data.refreshToken||f,expiresIn:b.data.expiresIn,expiresAt:b.timestamp,timestamp:b.timestamp}:null}catch(E){return(0,u.handleAuthErrorSilent)(E,"Refresh token",y,S)}}async isAuthenticated(f,p){return this.validateToken(f,p)}}return Br.AuthService=d,Br}var Fa={},Ha={},S0;function ad(){if(S0)return Ha;S0=1,Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.decodeJWT=s,Ha.extractUserIdFromToken=n;function t(i){let a=i.replace(/-/g,"+").replace(/_/g,"/");for(;a.length%4;)a+="=";return a}function s(i){try{const a=i.split(".");if(a.length!==3)return null;const l=a[1],o=t(l),u=atob(o);return JSON.parse(u)}catch{return null}}function n(i){try{const a=s(i);if(!a)return null;const l=a.sub||a.userId||a.user_id||a.id;return l||null}catch{return null}}return Ha}var Ba={},No={},us={},pu={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var x0;function Fl(){return x0||(x0=1,(function(t,s){var n=Ys,i=n.Buffer;function a(o,u){for(var d in o)u[d]=o[d]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(a(n,s),s.Buffer=l);function l(o,u,d){return i(o,u,d)}l.prototype=Object.create(i.prototype),a(i,l),l.from=function(o,u,d){if(typeof o=="number")throw new TypeError("Argument must not be a number");return i(o,u,d)},l.alloc=function(o,u,d){if(typeof o!="number")throw new TypeError("Argument must be a number");var h=i(o);return u!==void 0?typeof d=="string"?h.fill(u,d):h.fill(u):h.fill(0),h},l.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return i(o)},l.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(pu,pu.exports)),pu.exports}var _p,b0;function A1(){if(b0)return _p;b0=1;var t=Fl().Buffer,s=Vo,n=Zs;function i(a){if(this.buffer=null,this.writable=!0,this.readable=!0,!a)return this.buffer=t.alloc(0),this;if(typeof a.pipe=="function")return this.buffer=t.alloc(0),a.pipe(this),this;if(a.length||typeof a=="object")return this.buffer=a,this.writable=!1,process.nextTick(function(){this.emit("end",a),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof a+")")}return n.inherits(i,s),i.prototype.write=function(l){this.buffer=t.concat([this.buffer,t.from(l)]),this.emit("data",l)},i.prototype.end=function(l){l&&this.write(l),this.emit("end",l),this.emit("close"),this.writable=!1,this.readable=!1},_p=i,_p}var Rp,C0;function MI(){if(C0)return Rp;C0=1;function t(i){var a=(i/8|0)+(i%8===0?0:1);return a}var s={ES256:t(256),ES384:t(384),ES512:t(521)};function n(i){var a=s[i];if(a)return a;throw new Error('Unknown algorithm "'+i+'"')}return Rp=n,Rp}var kp,T0;function $I(){if(T0)return kp;T0=1;var t=Fl().Buffer,s=MI(),n=128,i=0,a=32,l=16,o=2,u=l|a|i<<6,d=o|i<<6;function h(E){return E.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function f(E){if(t.isBuffer(E))return E;if(typeof E=="string")return t.from(E,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function p(E,b){E=f(E);var x=s(b),v=x+1,C=E.length,_=0;if(E[_++]!==u)throw new Error('Could not find expected "seq"');var R=E[_++];if(R===(n|1)&&(R=E[_++]),C-_<R)throw new Error('"seq" specified length of "'+R+'", only "'+(C-_)+'" remaining');if(E[_++]!==d)throw new Error('Could not find expected "int" for "r"');var D=E[_++];if(C-_-2<D)throw new Error('"r" specified length of "'+D+'", only "'+(C-_-2)+'" available');if(v<D)throw new Error('"r" specified length of "'+D+'", max of "'+v+'" is acceptable');var A=_;if(_+=D,E[_++]!==d)throw new Error('Could not find expected "int" for "s"');var j=E[_++];if(C-_!==j)throw new Error('"s" specified length of "'+j+'", expected "'+(C-_)+'"');if(v<j)throw new Error('"s" specified length of "'+j+'", max of "'+v+'" is acceptable');var k=_;if(_+=j,_!==C)throw new Error('Expected to consume entire buffer, but "'+(C-_)+'" bytes remain');var K=x-D,Z=x-j,ie=t.allocUnsafe(K+D+Z+j);for(_=0;_<K;++_)ie[_]=0;E.copy(ie,_,A+Math.max(-K,0),A+D),_=x;for(var ce=_;_<ce+Z;++_)ie[_]=0;return E.copy(ie,_,k+Math.max(-Z,0),k+j),ie=ie.toString("base64"),ie=h(ie),ie}function y(E,b,x){for(var v=0;b+v<x&&E[b+v]===0;)++v;var C=E[b+v]>=n;return C&&--v,v}function S(E,b){E=f(E);var x=s(b),v=E.length;if(v!==x*2)throw new TypeError('"'+b+'" signatures must be "'+x*2+'" bytes, saw "'+v+'"');var C=y(E,0,x),_=y(E,x,E.length),R=x-C,D=x-_,A=2+R+1+1+D,j=A<n,k=t.allocUnsafe((j?2:3)+A),K=0;return k[K++]=u,j?k[K++]=A:(k[K++]=n|1,k[K++]=A&255),k[K++]=d,k[K++]=R,C<0?(k[K++]=0,K+=E.copy(k,K,0,x)):K+=E.copy(k,K,C,x),k[K++]=d,k[K++]=D,_<0?(k[K++]=0,E.copy(k,K,x)):E.copy(k,K,x+_),k}return kp={derToJose:p,joseToDer:S},kp}var Ip,_0;function UI(){if(_0)return Ip;_0=1;var t=Ys.Buffer,s=Ys.SlowBuffer;Ip=n;function n(l,o){if(!t.isBuffer(l)||!t.isBuffer(o)||l.length!==o.length)return!1;for(var u=0,d=0;d<l.length;d++)u|=l[d]^o[d];return u===0}n.install=function(){t.prototype.equal=s.prototype.equal=function(o){return n(this,o)}};var i=t.prototype.equal,a=s.prototype.equal;return n.restore=function(){t.prototype.equal=i,s.prototype.equal=a},Ip}var Ap,R0;function N1(){if(R0)return Ap;R0=1;var t=Fl().Buffer,s=Wi,n=$I(),i=Zs,a=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,l="secret must be a string or buffer",o="key must be a string or a buffer",u="key must be a string, a buffer or an object",d=typeof s.createPublicKey=="function";d&&(o+=" or a KeyObject",l+="or a KeyObject");function h(V){if(!t.isBuffer(V)&&typeof V!="string"&&(!d||typeof V!="object"||typeof V.type!="string"||typeof V.asymmetricKeyType!="string"||typeof V.export!="function"))throw E(o)}function f(V){if(!t.isBuffer(V)&&typeof V!="string"&&typeof V!="object")throw E(u)}function p(V){if(!t.isBuffer(V)){if(typeof V=="string")return V;if(!d||typeof V!="object"||V.type!=="secret"||typeof V.export!="function")throw E(l)}}function y(V){return V.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function S(V){V=V.toString();var F=4-V.length%4;if(F!==4)for(var O=0;O<F;++O)V+="=";return V.replace(/\-/g,"+").replace(/_/g,"/")}function E(V){var F=[].slice.call(arguments,1),O=i.format.bind(i,V).apply(null,F);return new TypeError(O)}function b(V){return t.isBuffer(V)||typeof V=="string"}function x(V){return b(V)||(V=JSON.stringify(V)),V}function v(V){return function(O,q){p(q),O=x(O);var W=s.createHmac("sha"+V,q),L=(W.update(O),W.digest("base64"));return y(L)}}var C,_="timingSafeEqual"in s?function(F,O){return F.byteLength!==O.byteLength?!1:s.timingSafeEqual(F,O)}:function(F,O){return C||(C=UI()),C(F,O)};function R(V){return function(O,q,W){var L=v(V)(O,W);return _(t.from(q),t.from(L))}}function D(V){return function(O,q){f(q),O=x(O);var W=s.createSign("RSA-SHA"+V),L=(W.update(O),W.sign(q,"base64"));return y(L)}}function A(V){return function(O,q,W){h(W),O=x(O),q=S(q);var L=s.createVerify("RSA-SHA"+V);return L.update(O),L.verify(W,q,"base64")}}function j(V){return function(O,q){f(q),O=x(O);var W=s.createSign("RSA-SHA"+V),L=(W.update(O),W.sign({key:q,padding:s.constants.RSA_PKCS1_PSS_PADDING,saltLength:s.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return y(L)}}function k(V){return function(O,q,W){h(W),O=x(O),q=S(q);var L=s.createVerify("RSA-SHA"+V);return L.update(O),L.verify({key:W,padding:s.constants.RSA_PKCS1_PSS_PADDING,saltLength:s.constants.RSA_PSS_SALTLEN_DIGEST},q,"base64")}}function K(V){var F=D(V);return function(){var q=F.apply(null,arguments);return q=n.derToJose(q,"ES"+V),q}}function Z(V){var F=A(V);return function(q,W,L){W=n.joseToDer(W,"ES"+V).toString("base64");var Y=F(q,W,L);return Y}}function ie(){return function(){return""}}function ce(){return function(F,O){return O===""}}return Ap=function(F){var O={hs:v,rs:D,ps:j,es:K,none:ie},q={hs:R,rs:A,ps:k,es:Z,none:ce},W=F.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!W)throw E(a,F);var L=(W[1]||W[3]).toLowerCase(),Y=W[2];return{sign:O[L](Y),verify:q[L](Y)}},Ap}var Np,k0;function P1(){if(k0)return Np;k0=1;var t=Ys.Buffer;return Np=function(n){return typeof n=="string"?n:typeof n=="number"||t.isBuffer(n)?n.toString():JSON.stringify(n)},Np}var Pp,I0;function qI(){if(I0)return Pp;I0=1;var t=Fl().Buffer,s=A1(),n=N1(),i=Vo,a=P1(),l=Zs;function o(f,p){return t.from(f,p).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function u(f,p,y){y=y||"utf8";var S=o(a(f),"binary"),E=o(a(p),y);return l.format("%s.%s",S,E)}function d(f){var p=f.header,y=f.payload,S=f.secret||f.privateKey,E=f.encoding,b=n(p.alg),x=u(p,y,E),v=b.sign(x,S);return l.format("%s.%s",x,v)}function h(f){var p=f.secret||f.privateKey||f.key,y=new s(p);this.readable=!0,this.header=f.header,this.encoding=f.encoding,this.secret=this.privateKey=this.key=y,this.payload=new s(f.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}return l.inherits(h,i),h.prototype.sign=function(){try{var p=d({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",p),this.emit("data",p),this.emit("end"),this.readable=!1,p}catch(y){this.readable=!1,this.emit("error",y),this.emit("close")}},h.sign=d,Pp=h,Pp}var Op,A0;function FI(){if(A0)return Op;A0=1;var t=Fl().Buffer,s=A1(),n=N1(),i=Vo,a=P1(),l=Zs,o=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function u(v){return Object.prototype.toString.call(v)==="[object Object]"}function d(v){if(u(v))return v;try{return JSON.parse(v)}catch{return}}function h(v){var C=v.split(".",1)[0];return d(t.from(C,"base64").toString("binary"))}function f(v){return v.split(".",2).join(".")}function p(v){return v.split(".")[2]}function y(v,C){C=C||"utf8";var _=v.split(".")[1];return t.from(_,"base64").toString(C)}function S(v){return o.test(v)&&!!h(v)}function E(v,C,_){if(!C){var R=new Error("Missing algorithm parameter for jws.verify");throw R.code="MISSING_ALGORITHM",R}v=a(v);var D=p(v),A=f(v),j=n(C);return j.verify(A,D,_)}function b(v,C){if(C=C||{},v=a(v),!S(v))return null;var _=h(v);if(!_)return null;var R=y(v);return(_.typ==="JWT"||C.json)&&(R=JSON.parse(R,C.encoding)),{header:_,payload:R,signature:p(v)}}function x(v){v=v||{};var C=v.secret||v.publicKey||v.key,_=new s(C);this.readable=!0,this.algorithm=v.algorithm,this.encoding=v.encoding,this.secret=this.publicKey=this.key=_,this.signature=new s(v.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}return l.inherits(x,i),x.prototype.verify=function(){try{var C=E(this.signature.buffer,this.algorithm,this.key.buffer),_=b(this.signature.buffer,this.encoding);return this.emit("done",C,_),this.emit("data",C),this.emit("end"),this.readable=!1,C}catch(R){this.readable=!1,this.emit("error",R),this.emit("close")}},x.decode=b,x.isValid=S,x.verify=E,Op=x,Op}var N0;function Dg(){if(N0)return us;N0=1;var t=qI(),s=FI(),n=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];return us.ALGORITHMS=n,us.sign=t.sign,us.verify=s.verify,us.decode=s.decode,us.isValid=s.isValid,us.createSign=function(a){return new t(a)},us.createVerify=function(a){return new s(a)},us}var jp,P0;function O1(){if(P0)return jp;P0=1;var t=Dg();return jp=function(s,n){n=n||{};var i=t.decode(s,n);if(!i)return null;var a=i.payload;if(typeof a=="string")try{var l=JSON.parse(a);l!==null&&typeof l=="object"&&(a=l)}catch{}return n.complete===!0?{header:i.header,payload:a,signature:i.signature}:a},jp}var Lp,O0;function ld(){if(O0)return Lp;O0=1;var t=function(s,n){Error.call(this,s),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=s,n&&(this.inner=n)};return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,Lp=t,Lp}var Dp,j0;function j1(){if(j0)return Dp;j0=1;var t=ld(),s=function(n,i){t.call(this,n),this.name="NotBeforeError",this.date=i};return s.prototype=Object.create(t.prototype),s.prototype.constructor=s,Dp=s,Dp}var Mp,L0;function L1(){if(L0)return Mp;L0=1;var t=ld(),s=function(n,i){t.call(this,n),this.name="TokenExpiredError",this.expiredAt=i};return s.prototype=Object.create(t.prototype),s.prototype.constructor=s,Mp=s,Mp}var $p,D0;function HI(){if(D0)return $p;D0=1;var t=1e3,s=t*60,n=s*60,i=n*24,a=i*7,l=i*365.25;$p=function(f,p){p=p||{};var y=typeof f;if(y==="string"&&f.length>0)return o(f);if(y==="number"&&isFinite(f))return p.long?d(f):u(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function o(f){if(f=String(f),!(f.length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(p){var y=parseFloat(p[1]),S=(p[2]||"ms").toLowerCase();switch(S){case"years":case"year":case"yrs":case"yr":case"y":return y*l;case"weeks":case"week":case"w":return y*a;case"days":case"day":case"d":return y*i;case"hours":case"hour":case"hrs":case"hr":case"h":return y*n;case"minutes":case"minute":case"mins":case"min":case"m":return y*s;case"seconds":case"second":case"secs":case"sec":case"s":return y*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}}function u(f){var p=Math.abs(f);return p>=i?Math.round(f/i)+"d":p>=n?Math.round(f/n)+"h":p>=s?Math.round(f/s)+"m":p>=t?Math.round(f/t)+"s":f+"ms"}function d(f){var p=Math.abs(f);return p>=i?h(f,p,i,"day"):p>=n?h(f,p,n,"hour"):p>=s?h(f,p,s,"minute"):p>=t?h(f,p,t,"second"):f+" ms"}function h(f,p,y,S){var E=p>=y*1.5;return Math.round(f/y)+" "+S+(E?"s":"")}return $p}var Up,M0;function D1(){if(M0)return Up;M0=1;var t=HI();return Up=function(s,n){var i=n||Math.floor(Date.now()/1e3);if(typeof s=="string"){var a=t(s);return typeof a>"u"?void 0:Math.floor(i+a/1e3)}else return typeof s=="number"?i+s:void 0},Up}var mu={exports:{}},qp,$0;function cd(){if($0)return qp;$0=1;const t="2.0.0",s=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,a=s-6;return qp={MAX_LENGTH:s,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:a,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},qp}var Fp,U0;function ud(){if(U0)return Fp;U0=1;var t={};return Fp=typeof process=="object"&&t&&t.NODE_DEBUG&&/\bsemver\b/i.test(t.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},Fp}var q0;function Hl(){return q0||(q0=1,(function(t,s){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:a}=cd(),l=ud();s=t.exports={};const o=s.re=[],u=s.safeRe=[],d=s.src=[],h=s.safeSrc=[],f=s.t={};let p=0;const y="[a-zA-Z0-9-]",S=[["\\s",1],["\\d",a],[y,i]],E=x=>{for(const[v,C]of S)x=x.split(`${v}*`).join(`${v}{0,${C}}`).split(`${v}+`).join(`${v}{1,${C}}`);return x},b=(x,v,C)=>{const _=E(v),R=p++;l(x,R,v),f[x]=R,d[R]=v,h[R]=_,o[R]=new RegExp(v,C?"g":void 0),u[R]=new RegExp(_,C?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*"),b("NUMERICIDENTIFIERLOOSE","\\d+"),b("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${y}*`),b("MAINVERSION",`(${d[f.NUMERICIDENTIFIER]})\\.(${d[f.NUMERICIDENTIFIER]})\\.(${d[f.NUMERICIDENTIFIER]})`),b("MAINVERSIONLOOSE",`(${d[f.NUMERICIDENTIFIERLOOSE]})\\.(${d[f.NUMERICIDENTIFIERLOOSE]})\\.(${d[f.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASEIDENTIFIER",`(?:${d[f.NONNUMERICIDENTIFIER]}|${d[f.NUMERICIDENTIFIER]})`),b("PRERELEASEIDENTIFIERLOOSE",`(?:${d[f.NONNUMERICIDENTIFIER]}|${d[f.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASE",`(?:-(${d[f.PRERELEASEIDENTIFIER]}(?:\\.${d[f.PRERELEASEIDENTIFIER]})*))`),b("PRERELEASELOOSE",`(?:-?(${d[f.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${d[f.PRERELEASEIDENTIFIERLOOSE]})*))`),b("BUILDIDENTIFIER",`${y}+`),b("BUILD",`(?:\\+(${d[f.BUILDIDENTIFIER]}(?:\\.${d[f.BUILDIDENTIFIER]})*))`),b("FULLPLAIN",`v?${d[f.MAINVERSION]}${d[f.PRERELEASE]}?${d[f.BUILD]}?`),b("FULL",`^${d[f.FULLPLAIN]}$`),b("LOOSEPLAIN",`[v=\\s]*${d[f.MAINVERSIONLOOSE]}${d[f.PRERELEASELOOSE]}?${d[f.BUILD]}?`),b("LOOSE",`^${d[f.LOOSEPLAIN]}$`),b("GTLT","((?:<|>)?=?)"),b("XRANGEIDENTIFIERLOOSE",`${d[f.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),b("XRANGEIDENTIFIER",`${d[f.NUMERICIDENTIFIER]}|x|X|\\*`),b("XRANGEPLAIN",`[v=\\s]*(${d[f.XRANGEIDENTIFIER]})(?:\\.(${d[f.XRANGEIDENTIFIER]})(?:\\.(${d[f.XRANGEIDENTIFIER]})(?:${d[f.PRERELEASE]})?${d[f.BUILD]}?)?)?`),b("XRANGEPLAINLOOSE",`[v=\\s]*(${d[f.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[f.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[f.XRANGEIDENTIFIERLOOSE]})(?:${d[f.PRERELEASELOOSE]})?${d[f.BUILD]}?)?)?`),b("XRANGE",`^${d[f.GTLT]}\\s*${d[f.XRANGEPLAIN]}$`),b("XRANGELOOSE",`^${d[f.GTLT]}\\s*${d[f.XRANGEPLAINLOOSE]}$`),b("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),b("COERCE",`${d[f.COERCEPLAIN]}(?:$|[^\\d])`),b("COERCEFULL",d[f.COERCEPLAIN]+`(?:${d[f.PRERELEASE]})?(?:${d[f.BUILD]})?(?:$|[^\\d])`),b("COERCERTL",d[f.COERCE],!0),b("COERCERTLFULL",d[f.COERCEFULL],!0),b("LONETILDE","(?:~>?)"),b("TILDETRIM",`(\\s*)${d[f.LONETILDE]}\\s+`,!0),s.tildeTrimReplace="$1~",b("TILDE",`^${d[f.LONETILDE]}${d[f.XRANGEPLAIN]}$`),b("TILDELOOSE",`^${d[f.LONETILDE]}${d[f.XRANGEPLAINLOOSE]}$`),b("LONECARET","(?:\\^)"),b("CARETTRIM",`(\\s*)${d[f.LONECARET]}\\s+`,!0),s.caretTrimReplace="$1^",b("CARET",`^${d[f.LONECARET]}${d[f.XRANGEPLAIN]}$`),b("CARETLOOSE",`^${d[f.LONECARET]}${d[f.XRANGEPLAINLOOSE]}$`),b("COMPARATORLOOSE",`^${d[f.GTLT]}\\s*(${d[f.LOOSEPLAIN]})$|^$`),b("COMPARATOR",`^${d[f.GTLT]}\\s*(${d[f.FULLPLAIN]})$|^$`),b("COMPARATORTRIM",`(\\s*)${d[f.GTLT]}\\s*(${d[f.LOOSEPLAIN]}|${d[f.XRANGEPLAIN]})`,!0),s.comparatorTrimReplace="$1$2$3",b("HYPHENRANGE",`^\\s*(${d[f.XRANGEPLAIN]})\\s+-\\s+(${d[f.XRANGEPLAIN]})\\s*$`),b("HYPHENRANGELOOSE",`^\\s*(${d[f.XRANGEPLAINLOOSE]})\\s+-\\s+(${d[f.XRANGEPLAINLOOSE]})\\s*$`),b("STAR","(<|>)?=?\\s*\\*"),b("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),b("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(mu,mu.exports)),mu.exports}var Hp,F0;function Mg(){if(F0)return Hp;F0=1;const t=Object.freeze({loose:!0}),s=Object.freeze({});return Hp=i=>i?typeof i!="object"?t:i:s,Hp}var Bp,H0;function M1(){if(H0)return Bp;H0=1;const t=/^[0-9]+$/,s=(i,a)=>{if(typeof i=="number"&&typeof a=="number")return i===a?0:i<a?-1:1;const l=t.test(i),o=t.test(a);return l&&o&&(i=+i,a=+a),i===a?0:l&&!o?-1:o&&!l?1:i<a?-1:1};return Bp={compareIdentifiers:s,rcompareIdentifiers:(i,a)=>s(a,i)},Bp}var zp,B0;function Sr(){if(B0)return zp;B0=1;const t=ud(),{MAX_LENGTH:s,MAX_SAFE_INTEGER:n}=cd(),{safeRe:i,t:a}=Hl(),l=Mg(),{compareIdentifiers:o}=M1();class u{constructor(h,f){if(f=l(f),h instanceof u){if(h.loose===!!f.loose&&h.includePrerelease===!!f.includePrerelease)return h;h=h.version}else if(typeof h!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof h}".`);if(h.length>s)throw new TypeError(`version is longer than ${s} characters`);t("SemVer",h,f),this.options=f,this.loose=!!f.loose,this.includePrerelease=!!f.includePrerelease;const p=h.trim().match(f.loose?i[a.LOOSE]:i[a.FULL]);if(!p)throw new TypeError(`Invalid Version: ${h}`);if(this.raw=h,this.major=+p[1],this.minor=+p[2],this.patch=+p[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");p[4]?this.prerelease=p[4].split(".").map(y=>{if(/^[0-9]+$/.test(y)){const S=+y;if(S>=0&&S<n)return S}return y}):this.prerelease=[],this.build=p[5]?p[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(h){if(t("SemVer.compare",this.version,this.options,h),!(h instanceof u)){if(typeof h=="string"&&h===this.version)return 0;h=new u(h,this.options)}return h.version===this.version?0:this.compareMain(h)||this.comparePre(h)}compareMain(h){return h instanceof u||(h=new u(h,this.options)),this.major<h.major?-1:this.major>h.major?1:this.minor<h.minor?-1:this.minor>h.minor?1:this.patch<h.patch?-1:this.patch>h.patch?1:0}comparePre(h){if(h instanceof u||(h=new u(h,this.options)),this.prerelease.length&&!h.prerelease.length)return-1;if(!this.prerelease.length&&h.prerelease.length)return 1;if(!this.prerelease.length&&!h.prerelease.length)return 0;let f=0;do{const p=this.prerelease[f],y=h.prerelease[f];if(t("prerelease compare",f,p,y),p===void 0&&y===void 0)return 0;if(y===void 0)return 1;if(p===void 0)return-1;if(p===y)continue;return o(p,y)}while(++f)}compareBuild(h){h instanceof u||(h=new u(h,this.options));let f=0;do{const p=this.build[f],y=h.build[f];if(t("build compare",f,p,y),p===void 0&&y===void 0)return 0;if(y===void 0)return 1;if(p===void 0)return-1;if(p===y)continue;return o(p,y)}while(++f)}inc(h,f,p){if(h.startsWith("pre")){if(!f&&p===!1)throw new Error("invalid increment argument: identifier is empty");if(f){const y=`-${f}`.match(this.options.loose?i[a.PRERELEASELOOSE]:i[a.PRERELEASE]);if(!y||y[1]!==f)throw new Error(`invalid identifier: ${f}`)}}switch(h){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",f,p);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",f,p);break;case"prepatch":this.prerelease.length=0,this.inc("patch",f,p),this.inc("pre",f,p);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",f,p),this.inc("pre",f,p);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const y=Number(p)?1:0;if(this.prerelease.length===0)this.prerelease=[y];else{let S=this.prerelease.length;for(;--S>=0;)typeof this.prerelease[S]=="number"&&(this.prerelease[S]++,S=-2);if(S===-1){if(f===this.prerelease.join(".")&&p===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(y)}}if(f){let S=[f,y];p===!1&&(S=[f]),o(this.prerelease[0],f)===0?isNaN(this.prerelease[1])&&(this.prerelease=S):this.prerelease=S}break}default:throw new Error(`invalid increment argument: ${h}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return zp=u,zp}var Kp,z0;function Yo(){if(z0)return Kp;z0=1;const t=Sr();return Kp=(n,i,a=!1)=>{if(n instanceof t)return n;try{return new t(n,i)}catch(l){if(!a)return null;throw l}},Kp}var Wp,K0;function BI(){if(K0)return Wp;K0=1;const t=Yo();return Wp=(n,i)=>{const a=t(n,i);return a?a.version:null},Wp}var Vp,W0;function zI(){if(W0)return Vp;W0=1;const t=Yo();return Vp=(n,i)=>{const a=t(n.trim().replace(/^[=v]+/,""),i);return a?a.version:null},Vp}var Gp,V0;function KI(){if(V0)return Gp;V0=1;const t=Sr();return Gp=(n,i,a,l,o)=>{typeof a=="string"&&(o=l,l=a,a=void 0);try{return new t(n instanceof t?n.version:n,a).inc(i,l,o).version}catch{return null}},Gp}var Jp,G0;function WI(){if(G0)return Jp;G0=1;const t=Yo();return Jp=(n,i)=>{const a=t(n,null,!0),l=t(i,null,!0),o=a.compare(l);if(o===0)return null;const u=o>0,d=u?a:l,h=u?l:a,f=!!d.prerelease.length;if(!!h.prerelease.length&&!f){if(!h.patch&&!h.minor)return"major";if(h.compareMain(d)===0)return h.minor&&!h.patch?"minor":"patch"}const y=f?"pre":"";return a.major!==l.major?y+"major":a.minor!==l.minor?y+"minor":a.patch!==l.patch?y+"patch":"prerelease"},Jp}var Yp,J0;function VI(){if(J0)return Yp;J0=1;const t=Sr();return Yp=(n,i)=>new t(n,i).major,Yp}var Xp,Y0;function GI(){if(Y0)return Xp;Y0=1;const t=Sr();return Xp=(n,i)=>new t(n,i).minor,Xp}var Qp,X0;function JI(){if(X0)return Qp;X0=1;const t=Sr();return Qp=(n,i)=>new t(n,i).patch,Qp}var Zp,Q0;function YI(){if(Q0)return Zp;Q0=1;const t=Yo();return Zp=(n,i)=>{const a=t(n,i);return a&&a.prerelease.length?a.prerelease:null},Zp}var em,Z0;function xn(){if(Z0)return em;Z0=1;const t=Sr();return em=(n,i,a)=>new t(n,a).compare(new t(i,a)),em}var tm,eS;function XI(){if(eS)return tm;eS=1;const t=xn();return tm=(n,i,a)=>t(i,n,a),tm}var rm,tS;function QI(){if(tS)return rm;tS=1;const t=xn();return rm=(n,i)=>t(n,i,!0),rm}var nm,rS;function $g(){if(rS)return nm;rS=1;const t=Sr();return nm=(n,i,a)=>{const l=new t(n,a),o=new t(i,a);return l.compare(o)||l.compareBuild(o)},nm}var sm,nS;function ZI(){if(nS)return sm;nS=1;const t=$g();return sm=(n,i)=>n.sort((a,l)=>t(a,l,i)),sm}var im,sS;function eA(){if(sS)return im;sS=1;const t=$g();return im=(n,i)=>n.sort((a,l)=>t(l,a,i)),im}var om,iS;function dd(){if(iS)return om;iS=1;const t=xn();return om=(n,i,a)=>t(n,i,a)>0,om}var am,oS;function Ug(){if(oS)return am;oS=1;const t=xn();return am=(n,i,a)=>t(n,i,a)<0,am}var lm,aS;function $1(){if(aS)return lm;aS=1;const t=xn();return lm=(n,i,a)=>t(n,i,a)===0,lm}var cm,lS;function U1(){if(lS)return cm;lS=1;const t=xn();return cm=(n,i,a)=>t(n,i,a)!==0,cm}var um,cS;function qg(){if(cS)return um;cS=1;const t=xn();return um=(n,i,a)=>t(n,i,a)>=0,um}var dm,uS;function Fg(){if(uS)return dm;uS=1;const t=xn();return dm=(n,i,a)=>t(n,i,a)<=0,dm}var fm,dS;function q1(){if(dS)return fm;dS=1;const t=$1(),s=U1(),n=dd(),i=qg(),a=Ug(),l=Fg();return fm=(u,d,h,f)=>{switch(d){case"===":return typeof u=="object"&&(u=u.version),typeof h=="object"&&(h=h.version),u===h;case"!==":return typeof u=="object"&&(u=u.version),typeof h=="object"&&(h=h.version),u!==h;case"":case"=":case"==":return t(u,h,f);case"!=":return s(u,h,f);case">":return n(u,h,f);case">=":return i(u,h,f);case"<":return a(u,h,f);case"<=":return l(u,h,f);default:throw new TypeError(`Invalid operator: ${d}`)}},fm}var hm,fS;function tA(){if(fS)return hm;fS=1;const t=Sr(),s=Yo(),{safeRe:n,t:i}=Hl();return hm=(l,o)=>{if(l instanceof t)return l;if(typeof l=="number"&&(l=String(l)),typeof l!="string")return null;o=o||{};let u=null;if(!o.rtl)u=l.match(o.includePrerelease?n[i.COERCEFULL]:n[i.COERCE]);else{const S=o.includePrerelease?n[i.COERCERTLFULL]:n[i.COERCERTL];let E;for(;(E=S.exec(l))&&(!u||u.index+u[0].length!==l.length);)(!u||E.index+E[0].length!==u.index+u[0].length)&&(u=E),S.lastIndex=E.index+E[1].length+E[2].length;S.lastIndex=-1}if(u===null)return null;const d=u[2],h=u[3]||"0",f=u[4]||"0",p=o.includePrerelease&&u[5]?`-${u[5]}`:"",y=o.includePrerelease&&u[6]?`+${u[6]}`:"";return s(`${d}.${h}.${f}${p}${y}`,o)},hm}var pm,hS;function rA(){if(hS)return pm;hS=1;class t{constructor(){this.max=1e3,this.map=new Map}get(n){const i=this.map.get(n);if(i!==void 0)return this.map.delete(n),this.map.set(n,i),i}delete(n){return this.map.delete(n)}set(n,i){if(!this.delete(n)&&i!==void 0){if(this.map.size>=this.max){const l=this.map.keys().next().value;this.delete(l)}this.map.set(n,i)}return this}}return pm=t,pm}var mm,pS;function bn(){if(pS)return mm;pS=1;const t=/\s+/g;class s{constructor(O,q){if(q=a(q),O instanceof s)return O.loose===!!q.loose&&O.includePrerelease===!!q.includePrerelease?O:new s(O.raw,q);if(O instanceof l)return this.raw=O.value,this.set=[[O]],this.formatted=void 0,this;if(this.options=q,this.loose=!!q.loose,this.includePrerelease=!!q.includePrerelease,this.raw=O.trim().replace(t," "),this.set=this.raw.split("||").map(W=>this.parseRange(W.trim())).filter(W=>W.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const W=this.set[0];if(this.set=this.set.filter(L=>!b(L[0])),this.set.length===0)this.set=[W];else if(this.set.length>1){for(const L of this.set)if(L.length===1&&x(L[0])){this.set=[L];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let O=0;O<this.set.length;O++){O>0&&(this.formatted+="||");const q=this.set[O];for(let W=0;W<q.length;W++)W>0&&(this.formatted+=" "),this.formatted+=q[W].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(O){const W=((this.options.includePrerelease&&S)|(this.options.loose&&E))+":"+O,L=i.get(W);if(L)return L;const Y=this.options.loose,ee=Y?d[h.HYPHENRANGELOOSE]:d[h.HYPHENRANGE];O=O.replace(ee,ce(this.options.includePrerelease)),o("hyphen replace",O),O=O.replace(d[h.COMPARATORTRIM],f),o("comparator trim",O),O=O.replace(d[h.TILDETRIM],p),o("tilde trim",O),O=O.replace(d[h.CARETTRIM],y),o("caret trim",O);let H=O.split(" ").map(he=>C(he,this.options)).join(" ").split(/\s+/).map(he=>ie(he,this.options));Y&&(H=H.filter(he=>(o("loose invalid filter",he,this.options),!!he.match(d[h.COMPARATORLOOSE])))),o("range list",H);const X=new Map,ne=H.map(he=>new l(he,this.options));for(const he of ne){if(b(he))return[he];X.set(he.value,he)}X.size>1&&X.has("")&&X.delete("");const fe=[...X.values()];return i.set(W,fe),fe}intersects(O,q){if(!(O instanceof s))throw new TypeError("a Range is required");return this.set.some(W=>v(W,q)&&O.set.some(L=>v(L,q)&&W.every(Y=>L.every(ee=>Y.intersects(ee,q)))))}test(O){if(!O)return!1;if(typeof O=="string")try{O=new u(O,this.options)}catch{return!1}for(let q=0;q<this.set.length;q++)if(V(this.set[q],O,this.options))return!0;return!1}}mm=s;const n=rA(),i=new n,a=Mg(),l=fd(),o=ud(),u=Sr(),{safeRe:d,t:h,comparatorTrimReplace:f,tildeTrimReplace:p,caretTrimReplace:y}=Hl(),{FLAG_INCLUDE_PRERELEASE:S,FLAG_LOOSE:E}=cd(),b=F=>F.value==="<0.0.0-0",x=F=>F.value==="",v=(F,O)=>{let q=!0;const W=F.slice();let L=W.pop();for(;q&&W.length;)q=W.every(Y=>L.intersects(Y,O)),L=W.pop();return q},C=(F,O)=>(F=F.replace(d[h.BUILD],""),o("comp",F,O),F=A(F,O),o("caret",F),F=R(F,O),o("tildes",F),F=k(F,O),o("xrange",F),F=Z(F,O),o("stars",F),F),_=F=>!F||F.toLowerCase()==="x"||F==="*",R=(F,O)=>F.trim().split(/\s+/).map(q=>D(q,O)).join(" "),D=(F,O)=>{const q=O.loose?d[h.TILDELOOSE]:d[h.TILDE];return F.replace(q,(W,L,Y,ee,H)=>{o("tilde",F,W,L,Y,ee,H);let X;return _(L)?X="":_(Y)?X=`>=${L}.0.0 <${+L+1}.0.0-0`:_(ee)?X=`>=${L}.${Y}.0 <${L}.${+Y+1}.0-0`:H?(o("replaceTilde pr",H),X=`>=${L}.${Y}.${ee}-${H} <${L}.${+Y+1}.0-0`):X=`>=${L}.${Y}.${ee} <${L}.${+Y+1}.0-0`,o("tilde return",X),X})},A=(F,O)=>F.trim().split(/\s+/).map(q=>j(q,O)).join(" "),j=(F,O)=>{o("caret",F,O);const q=O.loose?d[h.CARETLOOSE]:d[h.CARET],W=O.includePrerelease?"-0":"";return F.replace(q,(L,Y,ee,H,X)=>{o("caret",F,L,Y,ee,H,X);let ne;return _(Y)?ne="":_(ee)?ne=`>=${Y}.0.0${W} <${+Y+1}.0.0-0`:_(H)?Y==="0"?ne=`>=${Y}.${ee}.0${W} <${Y}.${+ee+1}.0-0`:ne=`>=${Y}.${ee}.0${W} <${+Y+1}.0.0-0`:X?(o("replaceCaret pr",X),Y==="0"?ee==="0"?ne=`>=${Y}.${ee}.${H}-${X} <${Y}.${ee}.${+H+1}-0`:ne=`>=${Y}.${ee}.${H}-${X} <${Y}.${+ee+1}.0-0`:ne=`>=${Y}.${ee}.${H}-${X} <${+Y+1}.0.0-0`):(o("no pr"),Y==="0"?ee==="0"?ne=`>=${Y}.${ee}.${H}${W} <${Y}.${ee}.${+H+1}-0`:ne=`>=${Y}.${ee}.${H}${W} <${Y}.${+ee+1}.0-0`:ne=`>=${Y}.${ee}.${H} <${+Y+1}.0.0-0`),o("caret return",ne),ne})},k=(F,O)=>(o("replaceXRanges",F,O),F.split(/\s+/).map(q=>K(q,O)).join(" ")),K=(F,O)=>{F=F.trim();const q=O.loose?d[h.XRANGELOOSE]:d[h.XRANGE];return F.replace(q,(W,L,Y,ee,H,X)=>{o("xRange",F,W,L,Y,ee,H,X);const ne=_(Y),fe=ne||_(ee),he=fe||_(H),Ae=he;return L==="="&&Ae&&(L=""),X=O.includePrerelease?"-0":"",ne?L===">"||L==="<"?W="<0.0.0-0":W="*":L&&Ae?(fe&&(ee=0),H=0,L===">"?(L=">=",fe?(Y=+Y+1,ee=0,H=0):(ee=+ee+1,H=0)):L==="<="&&(L="<",fe?Y=+Y+1:ee=+ee+1),L==="<"&&(X="-0"),W=`${L+Y}.${ee}.${H}${X}`):fe?W=`>=${Y}.0.0${X} <${+Y+1}.0.0-0`:he&&(W=`>=${Y}.${ee}.0${X} <${Y}.${+ee+1}.0-0`),o("xRange return",W),W})},Z=(F,O)=>(o("replaceStars",F,O),F.trim().replace(d[h.STAR],"")),ie=(F,O)=>(o("replaceGTE0",F,O),F.trim().replace(d[O.includePrerelease?h.GTE0PRE:h.GTE0],"")),ce=F=>(O,q,W,L,Y,ee,H,X,ne,fe,he,Ae)=>(_(W)?q="":_(L)?q=`>=${W}.0.0${F?"-0":""}`:_(Y)?q=`>=${W}.${L}.0${F?"-0":""}`:ee?q=`>=${q}`:q=`>=${q}${F?"-0":""}`,_(ne)?X="":_(fe)?X=`<${+ne+1}.0.0-0`:_(he)?X=`<${ne}.${+fe+1}.0-0`:Ae?X=`<=${ne}.${fe}.${he}-${Ae}`:F?X=`<${ne}.${fe}.${+he+1}-0`:X=`<=${X}`,`${q} ${X}`.trim()),V=(F,O,q)=>{for(let W=0;W<F.length;W++)if(!F[W].test(O))return!1;if(O.prerelease.length&&!q.includePrerelease){for(let W=0;W<F.length;W++)if(o(F[W].semver),F[W].semver!==l.ANY&&F[W].semver.prerelease.length>0){const L=F[W].semver;if(L.major===O.major&&L.minor===O.minor&&L.patch===O.patch)return!0}return!1}return!0};return mm}var gm,mS;function fd(){if(mS)return gm;mS=1;const t=Symbol("SemVer ANY");class s{static get ANY(){return t}constructor(f,p){if(p=n(p),f instanceof s){if(f.loose===!!p.loose)return f;f=f.value}f=f.trim().split(/\s+/).join(" "),o("comparator",f,p),this.options=p,this.loose=!!p.loose,this.parse(f),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(f){const p=this.options.loose?i[a.COMPARATORLOOSE]:i[a.COMPARATOR],y=f.match(p);if(!y)throw new TypeError(`Invalid comparator: ${f}`);this.operator=y[1]!==void 0?y[1]:"",this.operator==="="&&(this.operator=""),y[2]?this.semver=new u(y[2],this.options.loose):this.semver=t}toString(){return this.value}test(f){if(o("Comparator.test",f,this.options.loose),this.semver===t||f===t)return!0;if(typeof f=="string")try{f=new u(f,this.options)}catch{return!1}return l(f,this.operator,this.semver,this.options)}intersects(f,p){if(!(f instanceof s))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new d(f.value,p).test(this.value):f.operator===""?f.value===""?!0:new d(this.value,p).test(f.semver):(p=n(p),p.includePrerelease&&(this.value==="<0.0.0-0"||f.value==="<0.0.0-0")||!p.includePrerelease&&(this.value.startsWith("<0.0.0")||f.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&f.operator.startsWith(">")||this.operator.startsWith("<")&&f.operator.startsWith("<")||this.semver.version===f.semver.version&&this.operator.includes("=")&&f.operator.includes("=")||l(this.semver,"<",f.semver,p)&&this.operator.startsWith(">")&&f.operator.startsWith("<")||l(this.semver,">",f.semver,p)&&this.operator.startsWith("<")&&f.operator.startsWith(">")))}}gm=s;const n=Mg(),{safeRe:i,t:a}=Hl(),l=q1(),o=ud(),u=Sr(),d=bn();return gm}var ym,gS;function hd(){if(gS)return ym;gS=1;const t=bn();return ym=(n,i,a)=>{try{i=new t(i,a)}catch{return!1}return i.test(n)},ym}var vm,yS;function nA(){if(yS)return vm;yS=1;const t=bn();return vm=(n,i)=>new t(n,i).set.map(a=>a.map(l=>l.value).join(" ").trim().split(" ")),vm}var Em,vS;function sA(){if(vS)return Em;vS=1;const t=Sr(),s=bn();return Em=(i,a,l)=>{let o=null,u=null,d=null;try{d=new s(a,l)}catch{return null}return i.forEach(h=>{d.test(h)&&(!o||u.compare(h)===-1)&&(o=h,u=new t(o,l))}),o},Em}var wm,ES;function iA(){if(ES)return wm;ES=1;const t=Sr(),s=bn();return wm=(i,a,l)=>{let o=null,u=null,d=null;try{d=new s(a,l)}catch{return null}return i.forEach(h=>{d.test(h)&&(!o||u.compare(h)===1)&&(o=h,u=new t(o,l))}),o},wm}var Sm,wS;function oA(){if(wS)return Sm;wS=1;const t=Sr(),s=bn(),n=dd();return Sm=(a,l)=>{a=new s(a,l);let o=new t("0.0.0");if(a.test(o)||(o=new t("0.0.0-0"),a.test(o)))return o;o=null;for(let u=0;u<a.set.length;++u){const d=a.set[u];let h=null;d.forEach(f=>{const p=new t(f.semver.version);switch(f.operator){case">":p.prerelease.length===0?p.patch++:p.prerelease.push(0),p.raw=p.format();case"":case">=":(!h||n(p,h))&&(h=p);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${f.operator}`)}}),h&&(!o||n(o,h))&&(o=h)}return o&&a.test(o)?o:null},Sm}var xm,SS;function aA(){if(SS)return xm;SS=1;const t=bn();return xm=(n,i)=>{try{return new t(n,i).range||"*"}catch{return null}},xm}var bm,xS;function Hg(){if(xS)return bm;xS=1;const t=Sr(),s=fd(),{ANY:n}=s,i=bn(),a=hd(),l=dd(),o=Ug(),u=Fg(),d=qg();return bm=(f,p,y,S)=>{f=new t(f,S),p=new i(p,S);let E,b,x,v,C;switch(y){case">":E=l,b=u,x=o,v=">",C=">=";break;case"<":E=o,b=d,x=l,v="<",C="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(f,p,S))return!1;for(let _=0;_<p.set.length;++_){const R=p.set[_];let D=null,A=null;if(R.forEach(j=>{j.semver===n&&(j=new s(">=0.0.0")),D=D||j,A=A||j,E(j.semver,D.semver,S)?D=j:x(j.semver,A.semver,S)&&(A=j)}),D.operator===v||D.operator===C||(!A.operator||A.operator===v)&&b(f,A.semver))return!1;if(A.operator===C&&x(f,A.semver))return!1}return!0},bm}var Cm,bS;function lA(){if(bS)return Cm;bS=1;const t=Hg();return Cm=(n,i,a)=>t(n,i,">",a),Cm}var Tm,CS;function cA(){if(CS)return Tm;CS=1;const t=Hg();return Tm=(n,i,a)=>t(n,i,"<",a),Tm}var _m,TS;function uA(){if(TS)return _m;TS=1;const t=bn();return _m=(n,i,a)=>(n=new t(n,a),i=new t(i,a),n.intersects(i,a)),_m}var Rm,_S;function dA(){if(_S)return Rm;_S=1;const t=hd(),s=xn();return Rm=(n,i,a)=>{const l=[];let o=null,u=null;const d=n.sort((y,S)=>s(y,S,a));for(const y of d)t(y,i,a)?(u=y,o||(o=y)):(u&&l.push([o,u]),u=null,o=null);o&&l.push([o,null]);const h=[];for(const[y,S]of l)y===S?h.push(y):!S&&y===d[0]?h.push("*"):S?y===d[0]?h.push(`<=${S}`):h.push(`${y} - ${S}`):h.push(`>=${y}`);const f=h.join(" || "),p=typeof i.raw=="string"?i.raw:String(i);return f.length<p.length?f:i},Rm}var km,RS;function fA(){if(RS)return km;RS=1;const t=bn(),s=fd(),{ANY:n}=s,i=hd(),a=xn(),l=(p,y,S={})=>{if(p===y)return!0;p=new t(p,S),y=new t(y,S);let E=!1;e:for(const b of p.set){for(const x of y.set){const v=d(b,x,S);if(E=E||v!==null,v)continue e}if(E)return!1}return!0},o=[new s(">=0.0.0-0")],u=[new s(">=0.0.0")],d=(p,y,S)=>{if(p===y)return!0;if(p.length===1&&p[0].semver===n){if(y.length===1&&y[0].semver===n)return!0;S.includePrerelease?p=o:p=u}if(y.length===1&&y[0].semver===n){if(S.includePrerelease)return!0;y=u}const E=new Set;let b,x;for(const k of p)k.operator===">"||k.operator===">="?b=h(b,k,S):k.operator==="<"||k.operator==="<="?x=f(x,k,S):E.add(k.semver);if(E.size>1)return null;let v;if(b&&x){if(v=a(b.semver,x.semver,S),v>0)return null;if(v===0&&(b.operator!==">="||x.operator!=="<="))return null}for(const k of E){if(b&&!i(k,String(b),S)||x&&!i(k,String(x),S))return null;for(const K of y)if(!i(k,String(K),S))return!1;return!0}let C,_,R,D,A=x&&!S.includePrerelease&&x.semver.prerelease.length?x.semver:!1,j=b&&!S.includePrerelease&&b.semver.prerelease.length?b.semver:!1;A&&A.prerelease.length===1&&x.operator==="<"&&A.prerelease[0]===0&&(A=!1);for(const k of y){if(D=D||k.operator===">"||k.operator===">=",R=R||k.operator==="<"||k.operator==="<=",b){if(j&&k.semver.prerelease&&k.semver.prerelease.length&&k.semver.major===j.major&&k.semver.minor===j.minor&&k.semver.patch===j.patch&&(j=!1),k.operator===">"||k.operator===">="){if(C=h(b,k,S),C===k&&C!==b)return!1}else if(b.operator===">="&&!i(b.semver,String(k),S))return!1}if(x){if(A&&k.semver.prerelease&&k.semver.prerelease.length&&k.semver.major===A.major&&k.semver.minor===A.minor&&k.semver.patch===A.patch&&(A=!1),k.operator==="<"||k.operator==="<="){if(_=f(x,k,S),_===k&&_!==x)return!1}else if(x.operator==="<="&&!i(x.semver,String(k),S))return!1}if(!k.operator&&(x||b)&&v!==0)return!1}return!(b&&R&&!x&&v!==0||x&&D&&!b&&v!==0||j||A)},h=(p,y,S)=>{if(!p)return y;const E=a(p.semver,y.semver,S);return E>0?p:E<0||y.operator===">"&&p.operator===">="?y:p},f=(p,y,S)=>{if(!p)return y;const E=a(p.semver,y.semver,S);return E<0?p:E>0||y.operator==="<"&&p.operator==="<="?y:p};return km=l,km}var Im,kS;function Bg(){if(kS)return Im;kS=1;const t=Hl(),s=cd(),n=Sr(),i=M1(),a=Yo(),l=BI(),o=zI(),u=KI(),d=WI(),h=VI(),f=GI(),p=JI(),y=YI(),S=xn(),E=XI(),b=QI(),x=$g(),v=ZI(),C=eA(),_=dd(),R=Ug(),D=$1(),A=U1(),j=qg(),k=Fg(),K=q1(),Z=tA(),ie=fd(),ce=bn(),V=hd(),F=nA(),O=sA(),q=iA(),W=oA(),L=aA(),Y=Hg(),ee=lA(),H=cA(),X=uA(),ne=dA(),fe=fA();return Im={parse:a,valid:l,clean:o,inc:u,diff:d,major:h,minor:f,patch:p,prerelease:y,compare:S,rcompare:E,compareLoose:b,compareBuild:x,sort:v,rsort:C,gt:_,lt:R,eq:D,neq:A,gte:j,lte:k,cmp:K,coerce:Z,Comparator:ie,Range:ce,satisfies:V,toComparators:F,maxSatisfying:O,minSatisfying:q,minVersion:W,validRange:L,outside:Y,gtr:ee,ltr:H,intersects:X,simplifyRange:ne,subset:fe,SemVer:n,re:t.re,src:t.src,tokens:t.t,SEMVER_SPEC_VERSION:s.SEMVER_SPEC_VERSION,RELEASE_TYPES:s.RELEASE_TYPES,compareIdentifiers:i.compareIdentifiers,rcompareIdentifiers:i.rcompareIdentifiers},Im}var Am,IS;function hA(){return IS||(IS=1,Am=Bg().satisfies(process.version,">=15.7.0")),Am}var Nm,AS;function pA(){return AS||(AS=1,Nm=Bg().satisfies(process.version,">=16.9.0")),Nm}var Pm,NS;function F1(){if(NS)return Pm;NS=1;const t=hA(),s=pA(),n={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},i={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};return Pm=function(a,l){if(!a||!l)return;const o=l.asymmetricKeyType;if(!o)return;const u=n[o];if(!u)throw new Error(`Unknown key type "${o}".`);if(!u.includes(a))throw new Error(`"alg" parameter for "${o}" key type must be one of: ${u.join(", ")}.`);if(t)switch(o){case"ec":const d=l.asymmetricKeyDetails.namedCurve,h=i[a];if(d!==h)throw new Error(`"alg" parameter "${a}" requires curve "${h}".`);break;case"rsa-pss":if(s){const f=parseInt(a.slice(-3),10),{hashAlgorithm:p,mgf1HashAlgorithm:y,saltLength:S}=l.asymmetricKeyDetails;if(p!==`sha${f}`||y!==p)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${a}.`);if(S!==void 0&&S>f>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${a}.`)}break}},Pm}var Om,PS;function H1(){if(PS)return Om;PS=1;var t=Bg();return Om=t.satisfies(process.version,"^6.12.0 || >=8.0.0"),Om}var jm,OS;function mA(){if(OS)return jm;OS=1;const t=ld(),s=j1(),n=L1(),i=O1(),a=D1(),l=F1(),o=H1(),u=Dg(),{KeyObject:d,createSecretKey:h,createPublicKey:f}=Wi,p=["RS256","RS384","RS512"],y=["ES256","ES384","ES512"],S=["RS256","RS384","RS512"],E=["HS256","HS384","HS512"];return o&&(p.splice(p.length,0,"PS256","PS384","PS512"),S.splice(S.length,0,"PS256","PS384","PS512")),jm=function(b,x,v,C){typeof v=="function"&&!C&&(C=v,v={}),v||(v={}),v=Object.assign({},v);let _;if(C?_=C:_=function(K,Z){if(K)throw K;return Z},v.clockTimestamp&&typeof v.clockTimestamp!="number")return _(new t("clockTimestamp must be a number"));if(v.nonce!==void 0&&(typeof v.nonce!="string"||v.nonce.trim()===""))return _(new t("nonce must be a non-empty string"));if(v.allowInvalidAsymmetricKeyTypes!==void 0&&typeof v.allowInvalidAsymmetricKeyTypes!="boolean")return _(new t("allowInvalidAsymmetricKeyTypes must be a boolean"));const R=v.clockTimestamp||Math.floor(Date.now()/1e3);if(!b)return _(new t("jwt must be provided"));if(typeof b!="string")return _(new t("jwt must be a string"));const D=b.split(".");if(D.length!==3)return _(new t("jwt malformed"));let A;try{A=i(b,{complete:!0})}catch(K){return _(K)}if(!A)return _(new t("invalid token"));const j=A.header;let k;if(typeof x=="function"){if(!C)return _(new t("verify must be called asynchronous if secret or public key is provided as a callback"));k=x}else k=function(K,Z){return Z(null,x)};return k(j,function(K,Z){if(K)return _(new t("error in secret or public key callback: "+K.message));const ie=D[2].trim()!=="";if(!ie&&Z)return _(new t("jwt signature is required"));if(ie&&!Z)return _(new t("secret or public key must be provided"));if(!ie&&!v.algorithms)return _(new t('please specify "none" in "algorithms" to verify unsigned tokens'));if(Z!=null&&!(Z instanceof d))try{Z=f(Z)}catch{try{Z=h(typeof Z=="string"?Buffer.from(Z):Z)}catch{return _(new t("secretOrPublicKey is not valid key material"))}}if(v.algorithms||(Z.type==="secret"?v.algorithms=E:["rsa","rsa-pss"].includes(Z.asymmetricKeyType)?v.algorithms=S:Z.asymmetricKeyType==="ec"?v.algorithms=y:v.algorithms=p),v.algorithms.indexOf(A.header.alg)===-1)return _(new t("invalid algorithm"));if(j.alg.startsWith("HS")&&Z.type!=="secret")return _(new t(`secretOrPublicKey must be a symmetric key when using ${j.alg}`));if(/^(?:RS|PS|ES)/.test(j.alg)&&Z.type!=="public")return _(new t(`secretOrPublicKey must be an asymmetric key when using ${j.alg}`));if(!v.allowInvalidAsymmetricKeyTypes)try{l(j.alg,Z)}catch(F){return _(F)}let ce;try{ce=u.verify(b,A.header.alg,Z)}catch(F){return _(F)}if(!ce)return _(new t("invalid signature"));const V=A.payload;if(typeof V.nbf<"u"&&!v.ignoreNotBefore){if(typeof V.nbf!="number")return _(new t("invalid nbf value"));if(V.nbf>R+(v.clockTolerance||0))return _(new s("jwt not active",new Date(V.nbf*1e3)))}if(typeof V.exp<"u"&&!v.ignoreExpiration){if(typeof V.exp!="number")return _(new t("invalid exp value"));if(R>=V.exp+(v.clockTolerance||0))return _(new n("jwt expired",new Date(V.exp*1e3)))}if(v.audience){const F=Array.isArray(v.audience)?v.audience:[v.audience];if(!(Array.isArray(V.aud)?V.aud:[V.aud]).some(function(W){return F.some(function(L){return L instanceof RegExp?L.test(W):L===W})}))return _(new t("jwt audience invalid. expected: "+F.join(" or ")))}if(v.issuer&&(typeof v.issuer=="string"&&V.iss!==v.issuer||Array.isArray(v.issuer)&&v.issuer.indexOf(V.iss)===-1))return _(new t("jwt issuer invalid. expected: "+v.issuer));if(v.subject&&V.sub!==v.subject)return _(new t("jwt subject invalid. expected: "+v.subject));if(v.jwtid&&V.jti!==v.jwtid)return _(new t("jwt jwtid invalid. expected: "+v.jwtid));if(v.nonce&&V.nonce!==v.nonce)return _(new t("jwt nonce invalid. expected: "+v.nonce));if(v.maxAge){if(typeof V.iat!="number")return _(new t("iat required when maxAge is specified"));const F=a(v.maxAge,V.iat);if(typeof F>"u")return _(new t('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(R>=F+(v.clockTolerance||0))return _(new n("maxAge exceeded",new Date(F*1e3)))}if(v.complete===!0){const F=A.signature;return _(null,{header:j,payload:V,signature:F})}return _(null,V)})},jm}var Lm,jS;function gA(){if(jS)return Lm;jS=1;var t=1/0,s=9007199254740991,n=17976931348623157e292,i=NaN,a="[object Arguments]",l="[object Function]",o="[object GeneratorFunction]",u="[object String]",d="[object Symbol]",h=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,y=/^0o[0-7]+$/i,S=/^(?:0|[1-9]\d*)$/,E=parseInt;function b(U,me){for(var Ee=-1,tt=U?U.length:0,st=Array(tt);++Ee<tt;)st[Ee]=me(U[Ee],Ee,U);return st}function x(U,me,Ee,tt){for(var st=U.length,lt=Ee+-1;++lt<st;)if(me(U[lt],lt,U))return lt;return-1}function v(U,me,Ee){if(me!==me)return x(U,C,Ee);for(var tt=Ee-1,st=U.length;++tt<st;)if(U[tt]===me)return tt;return-1}function C(U){return U!==U}function _(U,me){for(var Ee=-1,tt=Array(U);++Ee<U;)tt[Ee]=me(Ee);return tt}function R(U,me){return b(me,function(Ee){return U[Ee]})}function D(U,me){return function(Ee){return U(me(Ee))}}var A=Object.prototype,j=A.hasOwnProperty,k=A.toString,K=A.propertyIsEnumerable,Z=D(Object.keys,Object),ie=Math.max;function ce(U,me){var Ee=L(U)||W(U)?_(U.length,String):[],tt=Ee.length,st=!!tt;for(var lt in U)j.call(U,lt)&&!(st&&(lt=="length"||F(lt,tt)))&&Ee.push(lt);return Ee}function V(U){if(!O(U))return Z(U);var me=[];for(var Ee in Object(U))j.call(U,Ee)&&Ee!="constructor"&&me.push(Ee);return me}function F(U,me){return me=me??s,!!me&&(typeof U=="number"||S.test(U))&&U>-1&&U%1==0&&U<me}function O(U){var me=U&&U.constructor,Ee=typeof me=="function"&&me.prototype||A;return U===Ee}function q(U,me,Ee,tt){U=Y(U)?U:ft(U),Ee=Ee&&!tt?ue(Ee):0;var st=U.length;return Ee<0&&(Ee=ie(st+Ee,0)),he(U)?Ee<=st&&U.indexOf(me,Ee)>-1:!!st&&v(U,me,Ee)>-1}function W(U){return ee(U)&&j.call(U,"callee")&&(!K.call(U,"callee")||k.call(U)==a)}var L=Array.isArray;function Y(U){return U!=null&&X(U.length)&&!H(U)}function ee(U){return fe(U)&&Y(U)}function H(U){var me=ne(U)?k.call(U):"";return me==l||me==o}function X(U){return typeof U=="number"&&U>-1&&U%1==0&&U<=s}function ne(U){var me=typeof U;return!!U&&(me=="object"||me=="function")}function fe(U){return!!U&&typeof U=="object"}function he(U){return typeof U=="string"||!L(U)&&fe(U)&&k.call(U)==u}function Ae(U){return typeof U=="symbol"||fe(U)&&k.call(U)==d}function Ne(U){if(!U)return U===0?U:0;if(U=ve(U),U===t||U===-t){var me=U<0?-1:1;return me*n}return U===U?U:0}function ue(U){var me=Ne(U),Ee=me%1;return me===me?Ee?me-Ee:me:0}function ve(U){if(typeof U=="number")return U;if(Ae(U))return i;if(ne(U)){var me=typeof U.valueOf=="function"?U.valueOf():U;U=ne(me)?me+"":me}if(typeof U!="string")return U===0?U:+U;U=U.replace(h,"");var Ee=p.test(U);return Ee||y.test(U)?E(U.slice(2),Ee?2:8):f.test(U)?i:+U}function He(U){return Y(U)?ce(U):V(U)}function ft(U){return U?R(U,He(U)):[]}return Lm=q,Lm}var Dm,LS;function yA(){if(LS)return Dm;LS=1;var t="[object Boolean]",s=Object.prototype,n=s.toString;function i(l){return l===!0||l===!1||a(l)&&n.call(l)==t}function a(l){return!!l&&typeof l=="object"}return Dm=i,Dm}var Mm,DS;function vA(){if(DS)return Mm;DS=1;var t=1/0,s=17976931348623157e292,n=NaN,i="[object Symbol]",a=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,u=/^0o[0-7]+$/i,d=parseInt,h=Object.prototype,f=h.toString;function p(C){return typeof C=="number"&&C==x(C)}function y(C){var _=typeof C;return!!C&&(_=="object"||_=="function")}function S(C){return!!C&&typeof C=="object"}function E(C){return typeof C=="symbol"||S(C)&&f.call(C)==i}function b(C){if(!C)return C===0?C:0;if(C=v(C),C===t||C===-t){var _=C<0?-1:1;return _*s}return C===C?C:0}function x(C){var _=b(C),R=_%1;return _===_?R?_-R:_:0}function v(C){if(typeof C=="number")return C;if(E(C))return n;if(y(C)){var _=typeof C.valueOf=="function"?C.valueOf():C;C=y(_)?_+"":_}if(typeof C!="string")return C===0?C:+C;C=C.replace(a,"");var R=o.test(C);return R||u.test(C)?d(C.slice(2),R?2:8):l.test(C)?n:+C}return Mm=p,Mm}var $m,MS;function EA(){if(MS)return $m;MS=1;var t="[object Number]",s=Object.prototype,n=s.toString;function i(l){return!!l&&typeof l=="object"}function a(l){return typeof l=="number"||i(l)&&n.call(l)==t}return $m=a,$m}var Um,$S;function wA(){if($S)return Um;$S=1;var t="[object Object]";function s(y){var S=!1;if(y!=null&&typeof y.toString!="function")try{S=!!(y+"")}catch{}return S}function n(y,S){return function(E){return y(S(E))}}var i=Function.prototype,a=Object.prototype,l=i.toString,o=a.hasOwnProperty,u=l.call(Object),d=a.toString,h=n(Object.getPrototypeOf,Object);function f(y){return!!y&&typeof y=="object"}function p(y){if(!f(y)||d.call(y)!=t||s(y))return!1;var S=h(y);if(S===null)return!0;var E=o.call(S,"constructor")&&S.constructor;return typeof E=="function"&&E instanceof E&&l.call(E)==u}return Um=p,Um}var qm,US;function SA(){if(US)return qm;US=1;var t="[object String]",s=Object.prototype,n=s.toString,i=Array.isArray;function a(o){return!!o&&typeof o=="object"}function l(o){return typeof o=="string"||!i(o)&&a(o)&&n.call(o)==t}return qm=l,qm}var Fm,qS;function xA(){if(qS)return Fm;qS=1;var t="Expected a function",s=1/0,n=17976931348623157e292,i=NaN,a="[object Symbol]",l=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,d=/^0o[0-7]+$/i,h=parseInt,f=Object.prototype,p=f.toString;function y(R,D){var A;if(typeof D!="function")throw new TypeError(t);return R=C(R),function(){return--R>0&&(A=D.apply(this,arguments)),R<=1&&(D=void 0),A}}function S(R){return y(2,R)}function E(R){var D=typeof R;return!!R&&(D=="object"||D=="function")}function b(R){return!!R&&typeof R=="object"}function x(R){return typeof R=="symbol"||b(R)&&p.call(R)==a}function v(R){if(!R)return R===0?R:0;if(R=_(R),R===s||R===-s){var D=R<0?-1:1;return D*n}return R===R?R:0}function C(R){var D=v(R),A=D%1;return D===D?A?D-A:D:0}function _(R){if(typeof R=="number")return R;if(x(R))return i;if(E(R)){var D=typeof R.valueOf=="function"?R.valueOf():R;R=E(D)?D+"":D}if(typeof R!="string")return R===0?R:+R;R=R.replace(l,"");var A=u.test(R);return A||d.test(R)?h(R.slice(2),A?2:8):o.test(R)?i:+R}return Fm=S,Fm}var Hm,FS;function bA(){if(FS)return Hm;FS=1;const t=D1(),s=H1(),n=F1(),i=Dg(),a=gA(),l=yA(),o=vA(),u=EA(),d=wA(),h=SA(),f=xA(),{KeyObject:p,createSecretKey:y,createPrivateKey:S}=Wi,E=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];s&&E.splice(3,0,"PS256","PS384","PS512");const b={expiresIn:{isValid:function(A){return o(A)||h(A)&&A},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(A){return o(A)||h(A)&&A},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(A){return h(A)||Array.isArray(A)},message:'"audience" must be a string or array'},algorithm:{isValid:a.bind(null,E),message:'"algorithm" must be a valid string enum value'},header:{isValid:d,message:'"header" must be an object'},encoding:{isValid:h,message:'"encoding" must be a string'},issuer:{isValid:h,message:'"issuer" must be a string'},subject:{isValid:h,message:'"subject" must be a string'},jwtid:{isValid:h,message:'"jwtid" must be a string'},noTimestamp:{isValid:l,message:'"noTimestamp" must be a boolean'},keyid:{isValid:h,message:'"keyid" must be a string'},mutatePayload:{isValid:l,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:l,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:l,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},x={iat:{isValid:u,message:'"iat" should be a number of seconds'},exp:{isValid:u,message:'"exp" should be a number of seconds'},nbf:{isValid:u,message:'"nbf" should be a number of seconds'}};function v(A,j,k,K){if(!d(k))throw new Error('Expected "'+K+'" to be a plain object.');Object.keys(k).forEach(function(Z){const ie=A[Z];if(!ie){if(!j)throw new Error('"'+Z+'" is not allowed in "'+K+'"');return}if(!ie.isValid(k[Z]))throw new Error(ie.message)})}function C(A){return v(b,!1,A,"options")}function _(A){return v(x,!0,A,"payload")}const R={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},D=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];return Hm=function(A,j,k,K){typeof k=="function"?(K=k,k={}):k=k||{};const Z=typeof A=="object"&&!Buffer.isBuffer(A),ie=Object.assign({alg:k.algorithm||"HS256",typ:Z?"JWT":void 0,kid:k.keyid},k.header);function ce(O){if(K)return K(O);throw O}if(!j&&k.algorithm!=="none")return ce(new Error("secretOrPrivateKey must have a value"));if(j!=null&&!(j instanceof p))try{j=S(j)}catch{try{j=y(typeof j=="string"?Buffer.from(j):j)}catch{return ce(new Error("secretOrPrivateKey is not valid key material"))}}if(ie.alg.startsWith("HS")&&j.type!=="secret")return ce(new Error(`secretOrPrivateKey must be a symmetric key when using ${ie.alg}`));if(/^(?:RS|PS|ES)/.test(ie.alg)){if(j.type!=="private")return ce(new Error(`secretOrPrivateKey must be an asymmetric key when using ${ie.alg}`));if(!k.allowInsecureKeySizes&&!ie.alg.startsWith("ES")&&j.asymmetricKeyDetails!==void 0&&j.asymmetricKeyDetails.modulusLength<2048)return ce(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${ie.alg}`))}if(typeof A>"u")return ce(new Error("payload is required"));if(Z){try{_(A)}catch(O){return ce(O)}k.mutatePayload||(A=Object.assign({},A))}else{const O=D.filter(function(q){return typeof k[q]<"u"});if(O.length>0)return ce(new Error("invalid "+O.join(",")+" option for "+typeof A+" payload"))}if(typeof A.exp<"u"&&typeof k.expiresIn<"u")return ce(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof A.nbf<"u"&&typeof k.notBefore<"u")return ce(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{C(k)}catch(O){return ce(O)}if(!k.allowInvalidAsymmetricKeyTypes)try{n(ie.alg,j)}catch(O){return ce(O)}const V=A.iat||Math.floor(Date.now()/1e3);if(k.noTimestamp?delete A.iat:Z&&(A.iat=V),typeof k.notBefore<"u"){try{A.nbf=t(k.notBefore,V)}catch(O){return ce(O)}if(typeof A.nbf>"u")return ce(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof k.expiresIn<"u"&&typeof A=="object"){try{A.exp=t(k.expiresIn,V)}catch(O){return ce(O)}if(typeof A.exp>"u")return ce(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(R).forEach(function(O){const q=R[O];if(typeof k[O]<"u"){if(typeof A[q]<"u")return ce(new Error('Bad "options.'+O+'" option. The payload already has an "'+q+'" property.'));A[q]=k[O]}});const F=k.encoding||"utf8";if(typeof K=="function")K=K&&f(K),i.createSign({header:ie,privateKey:j,payload:A,encoding:F}).once("error",K).once("done",function(O){if(!k.allowInsecureKeySizes&&/^(?:RS|PS)/.test(ie.alg)&&O.length<256)return K(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${ie.alg}`));K(null,O)});else{let O=i.sign({header:ie,payload:A,secret:j,encoding:F});if(!k.allowInsecureKeySizes&&/^(?:RS|PS)/.test(ie.alg)&&O.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${ie.alg}`);return O}},Hm}var Bm,HS;function pd(){return HS||(HS=1,Bm={decode:O1(),verify:mA(),sign:bA(),JsonWebTokenError:ld(),NotBeforeError:j1(),TokenExpiredError:L1()}),Bm}var pr={},BS;function B1(){if(BS)return pr;BS=1;var t=pr&&pr.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(pr,"__esModule",{value:!0}),pr.isBrowser=n,pr.getLocalStorage=i,pr.setLocalStorage=a,pr.removeLocalStorage=l,pr.extractUserIdFromToken=o,pr.generateCacheKey=u,pr.truncatePayload=d,pr.calculateSize=h,pr.isRetryableError=f,pr.calculateBackoffDelay=p;const s=t(pd());function n(){return typeof globalThis.window<"u"&&typeof globalThis.localStorage<"u"&&typeof globalThis.fetch<"u"}function i(y){if(!n())return null;try{return globalThis.localStorage.getItem(y)}catch{return null}}function a(y,S){if(n())try{globalThis.localStorage.setItem(y,S)}catch{}}function l(y){if(n())try{globalThis.localStorage.removeItem(y)}catch{}}function o(y){try{const S=s.default.decode(y);return S?S.sub||S.userId||S.user_id||S.id:null}catch{return null}}function u(y,S){const E=S?.method||"GET",b=S?.body?JSON.stringify(S.body):"";return`data-client:${E}:${y}:${b}`}function d(y,S){const E=JSON.stringify(y);return E.length<=S?{data:y,truncated:!1}:{data:{_message:"Payload truncated for performance",_size:E.length},truncated:!0}}function h(y){try{return JSON.stringify(y).length}catch{return 0}}function f(y,S){return!y||y>=500||y===408||y===429?!0:(y===401||y===403||y>=400&&y<500,!1)}function p(y,S,E){return Math.min(S*Math.pow(2,y),E)+Math.random()*1e3}return pr}var zS;function z1(){if(zS)return No;zS=1;var t=No&&No.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(No,"__esModule",{value:!0}),No.extractClientTokenInfo=a;const s=t(pd()),n=B1();function i(l){if((0,n.isBrowser)())try{const o=l.split(".");if(o.length!==3)return null;let u=o[1];for(;u.length%4;)u+="=";return u=u.replace(/-/g,"+").replace(/_/g,"/"),JSON.parse(atob(u))}catch(o){return console.warn("[decodeJWT] Browser decode failed:",o),null}else try{return s.default.decode(l)}catch(o){return console.warn("[decodeJWT] Node.js decode failed:",o),null}}function a(l){try{const o=i(l);if(!o||typeof o!="object")return console.warn("[extractClientTokenInfo] Failed to decode client token: Invalid token format"),{};const u={};return o.application&&typeof o.application=="string"?u.application=o.application:o.app&&typeof o.app=="string"&&(u.application=o.app),o.environment&&typeof o.environment=="string"?u.environment=o.environment:o.env&&typeof o.env=="string"?u.environment=o.env:o.environmentKey&&typeof o.environmentKey=="string"&&(u.environment=o.environmentKey),o.applicationId&&typeof o.applicationId=="string"?u.applicationId=o.applicationId:o.app_id&&typeof o.app_id=="string"&&(u.applicationId=o.app_id),o.clientId&&typeof o.clientId=="string"?u.clientId=o.clientId:o.client_id&&typeof o.client_id=="string"&&(u.clientId=o.client_id),u}catch(o){return console.warn("[extractClientTokenInfo] Failed to decode client token:",o instanceof Error?o.message:o),{}}}return No}var KS;function Bl(){if(KS)return Ba;KS=1,Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.ApplicationContextService=void 0;const t=z1(),s=B1();class n{constructor(a){this.cachedContext=null,this.config=a.config,this.httpClient=a}parseClientIdFormat(a){try{if(!a||typeof a!="string")return{environment:null,application:null};const l=a.split("-");if(l.length<4||l[0]!=="miso"||l[1]!=="controller")return{environment:null,application:null};const o=l[2]||null,u=l.slice(3).join("-")||null;return{environment:o,application:u}}catch(l){return console.warn("[ApplicationContextService] Failed to parse clientId format:",{errorMessage:l instanceof Error?l.message:String(l)}),{environment:null,application:null}}}getClientToken(){try{if(this.config.clientToken)return this.config.clientToken;if((0,s.isBrowser)()){const l=(0,s.getLocalStorage)("miso:client-token");if(l)return l}const a=this.httpClient.internalClient;if(a){const l=a.clientToken;if(l&&typeof l=="string")return l}return null}catch(a){return console.warn("[ApplicationContextService] Failed to get client token:",{errorMessage:a instanceof Error?a.message:String(a)}),null}}getApplicationContext(){if(this.cachedContext)return this.cachedContext;let a="",l="",o="";const u=this.getClientToken();if(u)try{const h=(0,t.extractClientTokenInfo)(u);h.applicationId&&(l=h.applicationId),h.environment&&(o=h.environment),h.application&&(a=h.application)}catch(h){console.warn("[ApplicationContextService] Failed to extract from client token:",{errorMessage:h instanceof Error?h.message:String(h)})}if(!o||!a){const h=this.parseClientIdFormat(this.config.clientId);!o&&h.environment&&(o=h.environment),!a&&h.application&&(a=h.application)}const d={application:a||"",applicationId:l||"",environment:o||""};return this.cachedContext=d,d}clearCache(){this.cachedContext=null}}return Ba.ApplicationContextService=n,Ba}var WS;function VS(){if(WS)return Fa;WS=1,Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.RoleService=void 0;const t=ad(),s=Bl();class n{constructor(a,l,o){this.config=a.config,this.cache=o,this.httpClient=a,this.apiClient=l,this.roleTTL=this.config.cache?.roleTTL||900,this.applicationContextService=new s.ApplicationContextService(a)}buildAuthStrategy(a,l){const o=l||this.config.authStrategy;return o?{...o,bearerToken:a}:{methods:["bearer"],bearerToken:a}}getEnvironmentParams(){const a=this.applicationContextService.getApplicationContext();return a.environment?{environment:a.environment}:void 0}async resolveUserId(a,l){const o=(0,t.extractUserIdFromToken)(a);if(o)return o;const u=this.buildAuthStrategy(a,l);return(await this.apiClient.auth.validateToken({token:a},u)).data?.user?.id||null}async getRoles(a,l){try{let o=(0,t.extractUserIdFromToken)(a);const u=o?`roles:${o}`:null;if(u){const h=await this.cache.get(u);if(h)return h.roles||[]}if(!o&&(o=await this.resolveUserId(a,l),!o))return[];const d=await this.fetchRolesFromController(a,l);return await this.cache.set(`roles:${o}`,{roles:d,timestamp:Date.now()},this.roleTTL),d}catch(o){const u=o?.statusCode||o?.response?.status;return console.error("Failed to get roles:",{method:"GET",path:"/api/auth/roles",statusCode:u,ipAddress:"unknown",correlationId:o?.correlationId,userId:(0,t.extractUserIdFromToken)(a)||void 0,errorMessage:o instanceof Error?o.message:String(o),stackTrace:o instanceof Error?o.stack:void 0}),[]}}async fetchRolesFromController(a,l){const o=this.buildAuthStrategy(a,l),u=this.getEnvironmentParams();return(await this.apiClient.roles.getRoles(u,o)).data?.roles||[]}async hasRole(a,l,o){return(await this.getRoles(a,o)).includes(l)}async hasAnyRole(a,l,o){const u=await this.getRoles(a,o);return l.some(d=>u.includes(d))}async hasAllRoles(a,l,o){const u=await this.getRoles(a,o);return l.every(d=>u.includes(d))}async refreshRoles(a,l){try{const o=this.buildAuthStrategy(a,l),d=(await this.apiClient.auth.validateToken({token:a},o)).data?.user?.id;if(!d)return[];const h=this.getEnvironmentParams(),p=(await this.apiClient.roles.refreshRoles(h,o)).data?.roles||[];return await this.cache.set(`roles:${d}`,{roles:p,timestamp:Date.now()},this.roleTTL),p}catch(o){const u=o?.statusCode||o?.response?.status;return console.error("Failed to refresh roles:",{method:"POST",path:"/api/auth/roles/refresh",statusCode:u,ipAddress:"unknown",correlationId:o?.correlationId,userId:(0,t.extractUserIdFromToken)(a)||void 0,errorMessage:o instanceof Error?o.message:String(o),stackTrace:o instanceof Error?o.stack:void 0}),[]}}}return Fa.RoleService=n,Fa}var za={},GS;function JS(){if(GS)return za;GS=1,Object.defineProperty(za,"__esModule",{value:!0}),za.PermissionService=void 0;const t=ad(),s=Bl();class n{constructor(a,l,o){this.config=a.config,this.cache=o,this.httpClient=a,this.apiClient=l,this.permissionTTL=this.config.cache?.permissionTTL||900,this.applicationContextService=new s.ApplicationContextService(a)}buildAuthStrategy(a,l){const o=l||this.config.authStrategy;return o?{...o,bearerToken:a}:{methods:["bearer"],bearerToken:a}}getEnvironmentParams(){const a=this.applicationContextService.getApplicationContext();return a.environment?{environment:a.environment}:void 0}async resolveUserId(a,l){const o=(0,t.extractUserIdFromToken)(a);if(o)return o;const u=this.buildAuthStrategy(a,l);return(await this.apiClient.auth.validateToken({token:a},u)).data?.user?.id||null}async getPermissions(a,l){try{let o=(0,t.extractUserIdFromToken)(a);const u=o?`permissions:${o}`:null;if(u){const h=await this.cache.get(u);if(h)return h.permissions||[]}if(!o&&(o=await this.resolveUserId(a,l),!o))return[];const d=await this.fetchPermissionsFromController(a,l);return await this.cache.set(`permissions:${o}`,{permissions:d,timestamp:Date.now()},this.permissionTTL),d}catch(o){const u=o?.statusCode||o?.response?.status;return console.error("Failed to get permissions:",{method:"GET",path:"/api/auth/permissions",statusCode:u,ipAddress:"unknown",correlationId:o?.correlationId,userId:(0,t.extractUserIdFromToken)(a)||void 0,errorMessage:o instanceof Error?o.message:String(o),stackTrace:o instanceof Error?o.stack:void 0}),[]}}async fetchPermissionsFromController(a,l){const o=this.buildAuthStrategy(a,l),u=this.getEnvironmentParams();return(await this.apiClient.permissions.getPermissions(u,o)).data?.permissions||[]}async hasPermission(a,l,o){return(await this.getPermissions(a,o)).includes(l)}async hasAnyPermission(a,l,o){const u=await this.getPermissions(a,o);return l.some(d=>u.includes(d))}async hasAllPermissions(a,l,o){const u=await this.getPermissions(a,o);return l.every(d=>u.includes(d))}async refreshPermissions(a,l){try{const o=this.buildAuthStrategy(a,l),d=(await this.apiClient.auth.validateToken({token:a},o)).data?.user?.id;if(!d)return[];const h=this.getEnvironmentParams(),p=(await this.apiClient.permissions.refreshPermissions(h,o)).data?.permissions||[];return await this.cache.set(`permissions:${d}`,{permissions:p,timestamp:Date.now()},this.permissionTTL),p}catch(o){const u=o?.statusCode||o?.response?.status;return console.error("Failed to refresh permissions:",{method:"POST",path:"/api/auth/permissions/refresh",statusCode:u,ipAddress:"unknown",correlationId:o?.correlationId,userId:(0,t.extractUserIdFromToken)(a)||void 0,errorMessage:o instanceof Error?o.message:String(o),stackTrace:o instanceof Error?o.stack:void 0}),[]}}async clearPermissionsCache(a,l){try{const o=this.buildAuthStrategy(a,l),d=(await this.apiClient.auth.validateToken({token:a},o)).data?.user?.id;if(!d)return;await this.cache.delete(`permissions:${d}`)}catch(o){const u=o?.statusCode||o?.response?.status;console.error("Failed to clear permissions cache:",{method:"DELETE",path:"/cache/permissions",statusCode:u,ipAddress:"unknown",correlationId:o?.correlationId,userId:(0,t.extractUserIdFromToken)(a)||void 0,errorMessage:o instanceof Error?o.message:String(o),stackTrace:o instanceof Error?o.stack:void 0})}}}return za.PermissionService=n,za}var zm={},Ka={};class md{constructor(){this._events=new Map}on(s,n){return this._events.has(s)||this._events.set(s,[]),this._events.get(s).push(n),this}once(s,n){const i=(...a)=>{this.removeListener(s,i),n(...a)};return this.on(s,i),this}emit(s,...n){const i=this._events.get(s);return i&&i.length>0?(i.forEach(a=>{try{a(...n)}catch(l){console.error("EventEmitter error:",l)}}),!0):!1}removeListener(s,n){const i=this._events.get(s);if(i){const a=i.indexOf(n);a>-1&&i.splice(a,1)}return this}removeAllListeners(s){return s?this._events.delete(s):this._events.clear(),this}off(s,n){return this.removeListener(s,n)}addListener(s,n){return this.on(s,n)}}const Bo={EventEmitter:md};typeof Be<"u"&&typeof Be.exports<"u"&&(Be.exports=Bo,Be.exports.default=Bo,Be.exports.EventEmitter=md,Be.exports.events=Bo);typeof nt<"u"&&(nt.default=Bo,nt.events=Bo,nt.EventEmitter=md);const CA=Object.freeze(Object.defineProperty({__proto__:null,EventEmitter:md,events:Bo},Symbol.toStringTag,{value:"Module"}));var Wa={},Nr={};const YS={},TA=Object.freeze(Object.defineProperty({__proto__:null,default:YS,fs:YS},Symbol.toStringTag,{value:"Module"})),K1=Ml(TA),XS={join:(...t)=>t.join("/"),resolve:(...t)=>t.join("/"),dirname:()=>"",basename:()=>"",extname:()=>""},_A=Object.freeze(Object.defineProperty({__proto__:null,default:XS,path:XS},Symbol.toStringTag,{value:"Module"})),W1=Ml(_A),RA="1.0.0",kA="ISO 27001 compliant sensitive fields configuration for data masking",IA={authentication:["password","passwd","pwd","secret","token","key","auth","authorization","cookie","session","apiKey","accessToken","refreshToken"],pii:["email","emailAddress","phone","phoneNumber","telephone","mobile","cellPhone","ssn","socialSecurityNumber","taxId","taxIdentification"],financial:["creditCard","cc","cardNumber","cvv","cvv2","cvc","pin","bankAccount","bankAccountNumber","routingNumber","iban","swift","accountNumber"],security:["otp","oneTimePassword","privateKey","publicKey","encryptionKey","decryptionKey"]},AA=["password","secret","token","key","ssn","creditcard","bankaccount","accountnumber"],NA={version:RA,description:kA,categories:IA,fieldPatterns:AA};var QS;function PA(){if(QS)return Nr;QS=1;var t={},s=Nr&&Nr.__createBinding||(Object.create?(function(S,E,b,x){x===void 0&&(x=b);var v=Object.getOwnPropertyDescriptor(E,b);(!v||("get"in v?!E.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return E[b]}}),Object.defineProperty(S,x,v)}):(function(S,E,b,x){x===void 0&&(x=b),S[x]=E[b]})),n=Nr&&Nr.__setModuleDefault||(Object.create?(function(S,E){Object.defineProperty(S,"default",{enumerable:!0,value:E})}):function(S,E){S.default=E}),i=Nr&&Nr.__importStar||(function(){var S=function(E){return S=Object.getOwnPropertyNames||function(b){var x=[];for(var v in b)Object.prototype.hasOwnProperty.call(b,v)&&(x[x.length]=v);return x},S(E)};return function(E){if(E&&E.__esModule)return E;var b={};if(E!=null)for(var x=S(E),v=0;v<x.length;v++)x[v]!=="default"&&s(b,E,x[v]);return n(b,E),b}})(),a=Nr&&Nr.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.loadSensitiveFieldsConfig=f,Nr.getFieldPatterns=p,Nr.getSensitiveFieldsArray=y;const l=i(K1),o=i(W1),u=a(NA);function d(){return new Set(["password","passwd","pwd","secret","token","key","auth","authorization","cookie","session","apikey","accesstoken","refreshtoken","email","emailaddress","phone","phonenumber","telephone","mobile","cellphone","ssn","socialsecuritynumber","taxid","taxidentification","creditcard","cc","cardnumber","cvv","cvv2","cvc","pin","bankaccount","bankaccountnumber","routingnumber","iban","swift","accountnumber","otp","onetimepassword","privatekey","publickey","encryptionkey","decryptionkey"])}function h(){return["password","secret","token","key","ssn","creditcard","bankaccount","accountnumber"]}function f(S){if(typeof globalThis<"u"&&"window"in globalThis&&typeof globalThis.window<"u"||typeof process>"u"||!t)return d();try{if(S||t.MISO_SENSITIVE_FIELDS_CONFIG){let E;if(S)E=o.isAbsolute(S)?S:o.resolve(process.cwd(),S);else{const _=t.MISO_SENSITIVE_FIELDS_CONFIG;E=o.isAbsolute(_)?_:o.resolve(process.cwd(),_)}if(!l.existsSync(E))return d();const b=l.readFileSync(E,"utf8"),x=JSON.parse(b),v=new Set;return Object.values(x.categories).forEach(_=>{_.forEach(R=>v.add(R.toLowerCase()))}),d().forEach(_=>v.add(_)),v}try{const E=u.default,b=new Set;return Object.values(E.categories).forEach(v=>{v.forEach(C=>b.add(C.toLowerCase()))}),d().forEach(v=>b.add(v)),b}catch{const E=o.join(__dirname,"sensitive-fields.config.json");if(l.existsSync(E)){const b=l.readFileSync(E,"utf8"),x=JSON.parse(b),v=new Set;return Object.values(x.categories).forEach(_=>{_.forEach(R=>v.add(R.toLowerCase()))}),d().forEach(_=>v.add(_)),v}}return d()}catch{return d()}}function p(S){if(typeof globalThis<"u"&&"window"in globalThis&&typeof globalThis.window<"u"||typeof process>"u"||!t)return h();try{if(S||t.MISO_SENSITIVE_FIELDS_CONFIG){let E;if(S)E=o.isAbsolute(S)?S:o.resolve(process.cwd(),S);else{const v=t.MISO_SENSITIVE_FIELDS_CONFIG;E=o.isAbsolute(v)?v:o.resolve(process.cwd(),v)}if(!l.existsSync(E))return h();const b=l.readFileSync(E,"utf8");return JSON.parse(b).fieldPatterns||h()}try{return u.default.fieldPatterns||h()}catch{const E=o.join(__dirname,"sensitive-fields.config.json");if(l.existsSync(E)){const b=l.readFileSync(E,"utf8");return JSON.parse(b).fieldPatterns||h()}}return h()}catch{return h()}}function y(S){const E=f(S);return Array.from(E)}return Nr}var ZS;function zg(){if(ZS)return Wa;ZS=1,Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.DataMasker=void 0;const t=PA();class s{static initializeSensitiveFields(i){return this.configPath!==i&&(this.cachedFields=null,this.cachedFieldPatterns=null,this.configPath=i),this.cachedFields?this.cachedFields:(this.cachedFields=(0,t.loadSensitiveFieldsConfig)(i),this.cachedFieldPatterns=(0,t.getFieldPatterns)(i),this.cachedFields)}static getSensitiveFields(){return this.initializeSensitiveFields(this.configPath)}static getFieldPatterns(){return this.cachedFieldPatterns||(this.cachedFieldPatterns=(0,t.getFieldPatterns)(this.configPath)),this.cachedFieldPatterns}static setConfigPath(i){this.configPath=i,this.cachedFields=null,this.cachedFieldPatterns=null}static isSensitiveField(i){const a=this.getSensitiveFields(),l=this.getFieldPatterns(),o=i.toLowerCase().replace(/[_-]/g,"");if(a.has(o))return!0;for(const u of l)if(o.includes(u.toLowerCase()))return!0;return!1}static maskSensitiveData(i){if(i==null||typeof i!="object")return i;if(Array.isArray(i))return i.map(l=>this.maskSensitiveData(l));const a={};for(const[l,o]of Object.entries(i))this.isSensitiveField(l)?a[l]=this.MASKED_VALUE:typeof o=="object"&&o!==null?a[l]=this.maskSensitiveData(o):a[l]=o;return a}static maskValue(i,a=0,l=0){if(!i||i.length<=a+l)return this.MASKED_VALUE;const o=i.substring(0,a),u=i.substring(i.length-l),d="*".repeat(Math.min(8,i.length-a-l));return`${o}${d}${u}`}static containsSensitiveData(i){if(i==null||typeof i!="object")return!1;if(Array.isArray(i))return i.some(a=>this.containsSensitiveData(a));for(const[a,l]of Object.entries(i))if(this.isSensitiveField(a)||typeof l=="object"&&l!==null&&this.containsSensitiveData(l))return!0;return!1}}return Wa.DataMasker=s,s.MASKED_VALUE="***MASKED***",s.cachedFields=null,s.cachedFieldPatterns=null,s.configPath=void 0,Wa}var Va={},ex;function OA(){if(ex)return Va;ex=1,Object.defineProperty(Va,"__esModule",{value:!0}),Va.AuditLogQueue=void 0;class t{constructor(n,i,a,l){this.queue=[],this.flushTimer=null,this.isFlushing=!1,this.httpLoggingFailures=0,this.httpLoggingDisabledUntil=null,this.httpClient=n,this.redis=i,this.config=a,this.eventEmitter=l;const o=a.audit||{};this.batchSize=o.batchSize??10,this.batchInterval=o.batchInterval??100,typeof process<"u"&&(process.on("SIGINT",()=>this.flush(!0)),process.on("SIGTERM",()=>this.flush(!0)),process.on("beforeExit",()=>this.flush(!0)))}setApiClient(n){this.apiClient=n}async add(n){if(this.queue.push({entry:n,timestamp:Date.now()}),this.queue.length>=this.batchSize){await this.flush(!1);return}!this.flushTimer&&this.queue.length>0&&(this.flushTimer=setTimeout(()=>{this.flush(!1).catch(()=>{})},this.batchInterval))}async flush(n=!1){if(!this.isFlushing&&(this.flushTimer&&(clearTimeout(this.flushTimer),this.flushTimer=null),this.queue.length!==0)){this.isFlushing=!0;try{const i=this.queue.splice(0);if(i.length===0){this.isFlushing=!1;return}const a=i.map(o=>o.entry);if(this.config.emitEvents&&this.eventEmitter){this.eventEmitter.emit("log:batch",a),this.isFlushing=!1;return}if(this.redis.isConnected()){const o=`audit-logs:${this.config.clientId}`;if(await this.redis.rpush(o,JSON.stringify(a))){this.isFlushing=!1;return}}const l=Date.now();if(this.httpLoggingDisabledUntil&&l<this.httpLoggingDisabledUntil)return;try{this.apiClient?await this.apiClient.logs.createBatchLogs({logs:a.map(o=>({...o,environment:void 0,application:void 0}))}):await this.httpClient.request("POST","/api/v1/logs/batch",{logs:a.map(o=>({...o,environment:void 0,application:void 0}))}),this.httpLoggingFailures=0,this.httpLoggingDisabledUntil=null}catch{this.httpLoggingFailures++,this.httpLoggingFailures>=t.MAX_FAILURES&&(this.httpLoggingDisabledUntil=l+t.DISABLE_DURATION_MS,this.httpLoggingFailures=0)}}catch{}finally{this.isFlushing=!1}}}getQueueSize(){return this.queue.length}clear(){this.flushTimer&&(clearTimeout(this.flushTimer),this.flushTimer=null),this.queue=[]}}return Va.AuditLogQueue=t,t.MAX_FAILURES=3,t.DISABLE_DURATION_MS=6e4,Va}var Ga={},Po={},tx;function gd(){if(tx)return Po;tx=1;var t=Po&&Po.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Po,"__esModule",{value:!0}),Po.extractRequestContext=i;const s=t(pd());function n(a){const o=(a.headers||{}).authorization;if(!o?.startsWith("Bearer "))return{};try{const u=o.substring(7),d=s.default.decode(u);return d?{userId:d.sub||d.userId||d.user_id||d.id,sessionId:d.sessionId||d.sid}:{}}catch{return{}}}function i(a){const l=a.headers||{},o=a.ip||l["x-forwarded-for"]?.split(",")[0]?.trim()||a.socket?.remoteAddress,u=l["x-correlation-id"]||l["x-request-id"]||l["request-id"],{userId:d,sessionId:h}=n(a);return{ipAddress:o,method:a.method,path:a.originalUrl||a.path,userAgent:l["user-agent"],correlationId:u,referer:l.referer,userId:d,sessionId:h,requestId:l["x-request-id"],requestSize:l["content-length"]?parseInt(l["content-length"],10):void 0}}return Po}var rx;function V1(){if(rx)return Ga;rx=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.LoggerChain=void 0;const t=gd();class s{constructor(i,a={},l={}){this.logger=i,this.context=a,this.options=l}addContext(i,a){return this.context[i]=a,this}addUser(i){return this.options.userId=i,this}addApplication(i){return this.options.applicationId=i,this}addCorrelation(i){return this.options.correlationId=i,this}withToken(i){return this.options.token=i,this}withoutMasking(){return this.options.maskSensitiveData=!1,this}withIndexedContext(i){return this.options.sourceKey=i.sourceKey,this.options.sourceDisplayName=i.sourceDisplayName,this.options.externalSystemKey=i.externalSystemKey,this.options.externalSystemDisplayName=i.externalSystemDisplayName,this.options.recordKey=i.recordKey,this.options.recordDisplayName=i.recordDisplayName,this}withCredentialContext(i,a){return this.options.credentialId=i,this.options.credentialType=a,this}withRequestMetrics(i,a,l){return this.options.requestSize=i,this.options.responseSize=a,this.options.durationMs=l,this}withRequest(i){const a=(0,t.extractRequestContext)(i);return a.userId&&(this.options.userId=a.userId),a.sessionId&&(this.options.sessionId=a.sessionId),a.correlationId&&(this.options.correlationId=a.correlationId),a.requestId&&(this.options.requestId=a.requestId),a.ipAddress&&(this.options.ipAddress=a.ipAddress),a.userAgent&&(this.options.userAgent=a.userAgent),a.method&&(this.context.method=a.method),a.path&&(this.context.path=a.path),a.referer&&(this.context.referer=a.referer),a.requestSize!==void 0&&(this.context.requestSize=a.requestSize),this}async error(i,a){await this.logger.error(i,this.context,a,this.options)}async info(i){await this.logger.info(i,this.context,this.options)}async audit(i,a){await this.logger.audit(i,a,this.context,this.options)}}return Ga.LoggerChain=s,Ga}var Un={},nx;function Kg(){if(nx)return Un;nx=1;var t={},s=Un&&Un.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(Un,"__esModule",{value:!0}),Un.extractJwtContext=l,Un.extractEnvironmentMetadata=o,Un.getLogWithRequest=u,Un.getWithContext=d,Un.getWithToken=h;const n=s(pd()),i=zg(),a=gd();function l(f){if(!f)return{};try{const p=n.default.decode(f);return p?{userId:p.sub||p.userId||p.user_id,applicationId:p.applicationId||p.app_id,sessionId:p.sessionId||p.sid,roles:p.roles||p.realm_access?.roles||[],permissions:p.permissions||p.scope?.split(" ")||[]}:{}}catch{return{}}}function o(){const f={};if(typeof globalThis<"u"&&"window"in globalThis){const p=globalThis,y=p.window?.navigator,S=p.window?.location;f.userAgent=y?.userAgent,f.hostname=S?.hostname}return typeof process<"u"&&t&&(f.hostname=t.HOSTNAME||"unknown"),f}function u(f,p,y="info",S,E,b,x,v){const C=(0,a.extractRequestContext)(f),_=l(f.headers.authorization?.replace("Bearer ","")),R=o(),D=E.getApplicationContext(),A=C.correlationId||b(),j=x&&S?i.DataMasker.maskSensitiveData(S):S;let k=_.applicationId||"";return!k&&D.applicationId&&(k=D.applicationId),{timestamp:new Date().toISOString(),level:y,environment:D.environment||"unknown",application:D.application||v||"",applicationId:k,message:p,context:j,correlationId:A,userId:C.userId||_.userId,sessionId:C.sessionId||_.sessionId,requestId:C.requestId,ipAddress:C.ipAddress||R.ipAddress,userAgent:C.userAgent||R.userAgent,referer:C.referer,requestSize:C.requestSize,...R}}function d(f,p,y="info",S,E,b,x){const v=o(),C=E(),_=S.getApplicationContext(),R=b?i.DataMasker.maskSensitiveData(f):f;return{timestamp:new Date().toISOString(),level:y,environment:_.environment||"unknown",application:_.application||x||"",applicationId:_.applicationId||"",message:p,context:R,correlationId:C,...v}}function h(f,p,y="info",S,E,b,x,v){const C=l(f),_=o(),R=b(),D=E.getApplicationContext(),A=x&&S?i.DataMasker.maskSensitiveData(S):S;let j=C.applicationId||"";return!j&&D.applicationId&&(j=D.applicationId),{timestamp:new Date().toISOString(),level:y,environment:D.environment||"unknown",application:D.application||v||"",applicationId:j,message:p,context:A,correlationId:R,userId:C.userId,sessionId:C.sessionId,..._}}return Un}var sx;function jA(){if(sx)return Ka;sx=1,Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.LoggerService=void 0;const t=CA,s=zg(),n=OA(),i=V1(),a=Bl(),l=Kg();class o extends t.EventEmitter{constructor(d,h){super(),this.maskSensitiveData=!0,this.correlationCounter=0,this.auditLogQueue=null,this.httpLoggingFailures=0,this.httpLoggingDisabledUntil=null,this.config=d.config,this.redis=h,this.httpClient=d,this.applicationContextService=new a.ApplicationContextService(d);const f=this.config.audit||{};(f.batchSize!==void 0||f.batchInterval!==void 0)&&(this.auditLogQueue=new n.AuditLogQueue(d,h,this.config,this))}setApiClient(d){this.apiClient=d,this.auditLogQueue&&this.auditLogQueue.setApiClient(d)}getApplicationContextService(){return this.applicationContextService}setMasking(d){this.maskSensitiveData=d}generateCorrelationId(){this.correlationCounter=(this.correlationCounter+1)%1e4;const d=Date.now(),h=Math.random().toString(36).substring(2,8);return`${this.config.clientId.substring(0,10)}-${d}-${this.correlationCounter}-${h}`}async error(d,h,f,p){await this.log("error",d,h,f,p)}async audit(d,h,f,p){const y={action:d,resource:h,...f};await this.log("audit",`Audit: ${d} on ${h}`,y,void 0,p)}async info(d,h,f){await this.log("info",d,h,void 0,f)}async debug(d,h,f){this.config.logLevel==="debug"&&await this.log("debug",d,h,void 0,f)}async log(d,h,f,p,y){const S=y?.token?(0,l.extractJwtContext)(y.token):{},E=(0,l.extractEnvironmentMetadata)(),b=y?.correlationId||this.generateCorrelationId(),x=this.maskContext(f,y),v=this.applicationContextService.getApplicationContext(),C=this.buildLogEntry(d,h,x,p,y,S,E,v,b);if(this.config.emitEvents){this.emit("log",C);return}if(d==="audit"&&this.auditLogQueue){await this.auditLogQueue.add(C);return}await this.sendToRedis(C)||this.isCircuitOpen()||await this.sendToHttp(d,C)}maskContext(d,h){return!(h?.maskSensitiveData!==!1&&this.maskSensitiveData)||!d?d:s.DataMasker.maskSensitiveData(d)}buildLogEntry(d,h,f,p,y,S,E,b,x){const v=this.resolveApplicationId(y,S,b);return{timestamp:new Date().toISOString(),level:d,environment:b.environment||"unknown",application:b.application||this.config.clientId,applicationId:v,message:h,context:f,stackTrace:p,correlationId:x,userId:y?.userId||S.userId,sessionId:y?.sessionId||S.sessionId,requestId:y?.requestId,ipAddress:y?.ipAddress||E.ipAddress,userAgent:y?.userAgent||E.userAgent,referer:y?.referer,...E,sourceKey:y?.sourceKey,sourceDisplayName:y?.sourceDisplayName,externalSystemKey:y?.externalSystemKey,externalSystemDisplayName:y?.externalSystemDisplayName,recordKey:y?.recordKey,recordDisplayName:y?.recordDisplayName,credentialId:y?.credentialId,credentialType:y?.credentialType,requestSize:y?.requestSize,responseSize:y?.responseSize,durationMs:y?.durationMs,errorCategory:y?.errorCategory,httpStatusCategory:y?.httpStatusCategory}}resolveApplicationId(d,h,f){return d?.applicationId?d.applicationId:f.applicationId?f.applicationId:h.applicationId||""}async sendToRedis(d){if(!this.redis.isConnected())return!1;const h=`logs:${this.config.clientId}`;return!!await this.redis.rpush(h,JSON.stringify(d))}isCircuitOpen(){const d=Date.now();return!!(this.httpLoggingDisabledUntil&&d<this.httpLoggingDisabledUntil)}mapLogType(d){return{logType:d==="audit"?"audit":d==="error"?"error":"general",logLevel:d==="audit"?"info":d==="error"?"error":d==="info"?"info":"debug"}}buildEnrichedContext(d){const h={...d.context,userId:d.userId,sessionId:d.sessionId,requestId:d.requestId,ipAddress:d.ipAddress,userAgent:d.userAgent,referer:d.referer,hostname:d.hostname,applicationId:d.applicationId,sourceKey:d.sourceKey,sourceDisplayName:d.sourceDisplayName,externalSystemKey:d.externalSystemKey,externalSystemDisplayName:d.externalSystemDisplayName,recordKey:d.recordKey,recordDisplayName:d.recordDisplayName,credentialId:d.credentialId,credentialType:d.credentialType,requestSize:d.requestSize,responseSize:d.responseSize,durationMs:d.durationMs,errorCategory:d.errorCategory,httpStatusCategory:d.httpStatusCategory};return Object.keys(h).forEach(f=>{h[f]===void 0&&delete h[f]}),d.stackTrace&&(h.stackTrace=d.stackTrace),h}isAuthError(d){return d instanceof Error?d.message.includes("401")||d.message.includes("Unauthorized")?!0:d.statusCode===401:!1}async sendToHttp(d,h){const f=Date.now();try{if(!this.apiClient)throw new Error("ApiClient not initialized. Call setApiClient() before logging.");const{logType:p,logLevel:y}=this.mapLogType(d),S=this.buildEnrichedContext(h);if(d==="audit"){const E=S.action,b=S.resource,x=S.entityType,v=S.entityId,C=S.oldValues,_=S.newValues;delete S.action,delete S.resource,delete S.entityType,delete S.entityId,delete S.oldValues,delete S.newValues;const R=x||(b&&b.startsWith("/api/")?"API Endpoint":"HTTP Request"),D=v||b||"unknown",A=E||"unknown";await this.apiClient.logs.createLog({type:p,data:{level:y,message:h.message,context:S,correlationId:h.correlationId,entityType:R,entityId:D,action:A,oldValues:C,newValues:_}})}else await this.apiClient.logs.createLog({type:p,data:{level:y,message:h.message,context:S,correlationId:h.correlationId}});this.httpLoggingFailures=0,this.httpLoggingDisabledUntil=null}catch(p){this.isAuthError(p)||(this.httpLoggingFailures++,this.httpLoggingFailures>=o.MAX_FAILURES&&(this.httpLoggingDisabledUntil=f+o.DISABLE_DURATION_MS,this.httpLoggingFailures=0))}}withContext(d){return new i.LoggerChain(this,d)}withToken(d){return new i.LoggerChain(this,{},{token:d})}withoutMasking(){return new i.LoggerChain(this,{},{maskSensitiveData:!1})}getLogWithRequest(d,h,f="info",p){return(0,l.getLogWithRequest)(d,h,f,p,this.applicationContextService,()=>this.generateCorrelationId(),this.maskSensitiveData,this.config.clientId)}getWithContext(d,h,f="info"){return(0,l.getWithContext)(d,h,f,this.applicationContextService,()=>this.generateCorrelationId(),this.maskSensitiveData,this.config.clientId)}getWithToken(d,h,f="info",p){return(0,l.getWithToken)(d,h,f,p,this.applicationContextService,()=>this.generateCorrelationId(),this.maskSensitiveData,this.config.clientId)}getForRequest(d,h,f="info",p){return this.getLogWithRequest(d,h,f,p)}forRequest(d){return new i.LoggerChain(this,{},{}).withRequest(d)}}return Ka.LoggerService=o,o.MAX_FAILURES=3,o.DISABLE_DURATION_MS=6e4,Ka}var Ja={},ix;function Wg(){if(ix)return Ja;ix=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.UnifiedLoggerService=void 0;const t=Kg();class s{constructor(i,a){this.loggerService=i,this.contextStorage=a}getContext(){return this.contextStorage.getContext()||{}}buildLoggingOptions(i){const a={ipAddress:i.ipAddress,userAgent:i.userAgent,referer:i.referer,correlationId:i.correlationId,userId:i.userId,sessionId:i.sessionId,requestId:i.requestId,applicationId:i.applicationId,token:i.token,requestSize:i.requestSize,maskSensitiveData:!0},o=this.loggerService.getApplicationContextService().getApplicationContext();if(i.token){const u=(0,t.extractJwtContext)(i.token);!a.userId&&u.userId&&(a.userId=u.userId),!a.sessionId&&u.sessionId&&(a.sessionId=u.sessionId),!a.applicationId&&u.applicationId&&(a.applicationId=u.applicationId)}return!a.applicationId&&o.applicationId&&(a.applicationId=o.applicationId),a}extractErrorContext(i){if(!i)return{};if(i instanceof Error)return{stackTrace:i.stack,errorName:i.name,errorMessage:i.message};if(typeof i=="string")return{errorMessage:i};if(typeof i=="object"&&i!==null){const a=i;return{stackTrace:a.stack,errorName:a.name,errorMessage:a.message}}return{}}async info(i){try{const a=this.getContext(),l=this.buildLoggingOptions(a);await this.loggerService.info(i,void 0,l)}catch{}}async warn(i){try{const a=this.getContext(),l=this.buildLoggingOptions(a);await this.loggerService.info(i,void 0,l)}catch{}}async debug(i){try{const a=this.getContext(),l=this.buildLoggingOptions(a);await this.loggerService.debug(i,void 0,l)}catch{}}async error(i,a){try{const l=this.getContext(),o=this.buildLoggingOptions(l),u=this.extractErrorContext(a),d={};u.errorName&&(d.errorName=u.errorName),u.errorMessage&&(d.errorMessage=u.errorMessage),await this.loggerService.error(i,d,u.stackTrace,o)}catch{}}async audit(i,a,l,o,u){try{const d=this.getContext(),h=this.buildLoggingOptions(d),f={entityId:l||"unknown"};o!==void 0&&(f.oldValues=o),u!==void 0&&(f.newValues=u),await this.loggerService.audit(i,a,f,h)}catch{}}}return Ja.UnifiedLoggerService=s,Ja}var Ya={},ox;function Vg(){if(ox)return Ya;ox=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.LoggerContextStorage=void 0;const t=Ki;class s{constructor(){this.asyncLocalStorage=new t.AsyncLocalStorage}static getInstance(){return s.instance||(s.instance=new s),s.instance}getContext(){const i=this.asyncLocalStorage.getStore();return i===void 0?null:i}setContext(i){const a=this.asyncLocalStorage.getStore()||{};this.asyncLocalStorage.enterWith({...a,...i})}clearContext(){this.asyncLocalStorage.enterWith({})}mergeContext(i){const a=this.asyncLocalStorage.getStore()||{};this.asyncLocalStorage.enterWith({...a,...i})}runWithContext(i,a){const l={...this.asyncLocalStorage.getStore()||{},...i};return this.asyncLocalStorage.run(l,a)}async runWithContextAsync(i,a){const l={...this.asyncLocalStorage.getStore()||{},...i};return this.asyncLocalStorage.run(l,a)}}return Ya.LoggerContextStorage=s,s.instance=null,Ya}var qn={},ax;function G1(){if(ax)return qn;ax=1,Object.defineProperty(qn,"__esModule",{value:!0}),qn.LoggerServiceRegistry=void 0,qn.getLogger=i,qn.setLoggerContext=a,qn.clearLoggerContext=l,qn.mergeLoggerContext=o,qn.registerLoggerService=u;const t=Wg(),s=Vg();class n{static register(h){n.instance=h}static get(){return n.instance}static clear(){n.instance=null}}qn.LoggerServiceRegistry=n,n.instance=null;function i(d){const h=s.LoggerContextStorage.getInstance(),f=d||n.get();if(!f)throw new Error("LoggerService not available. Either pass LoggerService to getLogger() or ensure MisoClient is initialized.");return new t.UnifiedLoggerService(f,h)}function a(d){s.LoggerContextStorage.getInstance().setContext(d)}function l(){s.LoggerContextStorage.getInstance().clearContext()}function o(d){s.LoggerContextStorage.getInstance().mergeContext(d)}function u(d){n.register(d)}return qn}var lx;function sg(){return lx||(lx=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.registerLoggerService=t.mergeLoggerContext=t.clearLoggerContext=t.setLoggerContext=t.getLogger=t.LoggerContextStorage=t.UnifiedLoggerService=t.LoggerChain=t.LoggerService=void 0;var s=jA();Object.defineProperty(t,"LoggerService",{enumerable:!0,get:function(){return s.LoggerService}});var n=V1();Object.defineProperty(t,"LoggerChain",{enumerable:!0,get:function(){return n.LoggerChain}});var i=Wg();Object.defineProperty(t,"UnifiedLoggerService",{enumerable:!0,get:function(){return i.UnifiedLoggerService}});var a=Vg();Object.defineProperty(t,"LoggerContextStorage",{enumerable:!0,get:function(){return a.LoggerContextStorage}});var l=G1();Object.defineProperty(t,"getLogger",{enumerable:!0,get:function(){return l.getLogger}}),Object.defineProperty(t,"setLoggerContext",{enumerable:!0,get:function(){return l.setLoggerContext}}),Object.defineProperty(t,"clearLoggerContext",{enumerable:!0,get:function(){return l.clearLoggerContext}}),Object.defineProperty(t,"mergeLoggerContext",{enumerable:!0,get:function(){return l.mergeLoggerContext}}),Object.defineProperty(t,"registerLoggerService",{enumerable:!0,get:function(){return l.registerLoggerService}})})(zm)),zm}var Ii={};class Gg{constructor(s){this.options=s||{},this.connected=!1}async connect(){return console.warn("[Redis Stub] Redis.connect() called in browser - Redis is server-side only"),this.connected=!0,Promise.resolve()}async disconnect(){return this.connected=!1,Promise.resolve()}async get(s){return null}async set(s,n){return"OK"}async del(s){return 0}async rpush(s,n){return 0}async lpop(s){return null}async exists(s){return 0}async expire(s,n){return 0}async keys(s){return[]}isConnected(){return!1}on(){return this}off(){return this}once(){return Promise.resolve({})}emit(){return!1}}const Uu=Gg;typeof Be<"u"&&typeof Be.exports<"u"&&(Be.exports=Uu,Be.exports.default=Uu,Be.exports.Redis=Gg);const LA=Object.freeze(Object.defineProperty({__proto__:null,Redis:Uu,RedisStub:Gg,default:Uu},Symbol.toStringTag,{value:"Module"}));var cx;function ig(){if(cx)return Ii;cx=1;var t=Ii&&Ii.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.RedisService=void 0;const s=t(LA);class n{constructor(a){this.connected=!1,this.config=a}async connect(){if(this.config)try{this.redis=new s.default({host:this.config.host,port:this.config.port,password:this.config.password,db:this.config.db||0,keyPrefix:this.config.keyPrefix||"miso:",maxRetriesPerRequest:3,lazyConnect:!0,enableReadyCheck:!1,disableClientInfo:!0}),await this.redis.connect(),this.connected=!0}catch(a){throw console.error("Failed to connect to Redis:",{errorMessage:a instanceof Error?a.message:String(a)}),this.connected=!1,a}}async disconnect(){this.redis&&(await this.redis.disconnect(),this.connected=!1)}async get(a){if(!this.redis||!this.connected)return null;try{return await this.redis.get(a)}catch(l){return console.error("Redis get error:",{key:a,errorMessage:l instanceof Error?l.message:String(l)}),null}}async set(a,l,o){if(!this.redis||!this.connected)return!1;try{return await this.redis.setex(a,o,l),!0}catch(u){return console.error("Redis set error:",{key:a,errorMessage:u instanceof Error?u.message:String(u)}),!1}}async delete(a){if(!this.redis||!this.connected)return!1;try{return await this.redis.del(a),!0}catch(l){return console.error("Redis delete error:",{key:a,errorMessage:l instanceof Error?l.message:String(l)}),!1}}async rpush(a,l){if(!this.redis||!this.connected)return!1;try{return await this.redis.rpush(a,l),!0}catch(o){return console.error("Redis rpush error:",{queue:a,errorMessage:o instanceof Error?o.message:String(o)}),!1}}isConnected(){return this.connected}}return Ii.RedisService=n,Ii}var Xa={},ux;function og(){if(ux)return Xa;ux=1,Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.CacheService=void 0;class t{constructor(n){this.memoryCache=new Map,this.redis=n,this.cleanupInterval=setInterval(()=>{this.cleanupExpired()},300*1e3),this.cleanupInterval&&typeof this.cleanupInterval.unref=="function"&&this.cleanupInterval.unref()}cleanupExpired(){const n=Date.now(),i=[];for(const[a,l]of this.memoryCache.entries())l.expiresAt<n&&i.push(a);for(const a of i)this.memoryCache.delete(a)}async get(n){try{if(this.redis&&this.redis.isConnected()){const a=await this.redis.get(n);if(a)try{const l=JSON.parse(a);return this.setInMemory(n,l,300),l}catch(l){return console.warn("Failed to parse cached data:",{key:n,errorMessage:l instanceof Error?l.message:String(l)}),await this.delete(n),null}}const i=this.memoryCache.get(n);return i?i.expiresAt<Date.now()?(this.memoryCache.delete(n),null):i.value:null}catch{const a=this.memoryCache.get(n);return a&&a.expiresAt>=Date.now()?a.value:null}}async set(n,i,a){try{const l=JSON.stringify(i);let o=!0;return this.redis&&this.redis.isConnected()&&(o=await this.redis.set(n,l,a)),this.setInMemory(n,i,a),o}catch(l){try{return this.setInMemory(n,i,a),!1}catch{return console.error("Failed to cache value:",{key:n,errorMessage:l instanceof Error?l.message:String(l)}),!1}}}setInMemory(n,i,a){const l=Date.now()+a*1e3;this.memoryCache.set(n,{value:i,expiresAt:l})}async delete(n){let i=!1;this.redis&&this.redis.isConnected()&&(i=await this.redis.delete(n));const a=this.memoryCache.delete(n);return i||a}async clear(){this.memoryCache.clear()}destroy(){this.cleanupInterval&&(clearInterval(this.cleanupInterval),this.cleanupInterval=void 0),this.memoryCache.clear()}}return Xa.CacheService=t,Xa}var Qa={},Ai={},Za={},dx;function J1(){if(dx)return Za;dx=1,Object.defineProperty(Za,"__esModule",{value:!0}),Za.AuthStrategyHandler=void 0;class t{static buildAuthHeaders(n,i,a,l){const o={};for(const u of n.methods)switch(u){case"bearer":if(n.bearerToken)return o.Authorization=`Bearer ${n.bearerToken}`,o;break;case"client-token":if(i)return o["x-client-token"]=i,o;break;case"client-credentials":if(a&&l)return o["x-client-id"]=a,o["x-client-secret"]=l,o;break;case"api-key":if(n.apiKey)return o.Authorization=`Bearer ${n.apiKey}`,o;break}return o}static shouldTryMethod(n,i){if(!i.methods.includes(n))return!1;switch(n){case"bearer":return!!i.bearerToken;case"client-token":return!0;case"client-credentials":return!0;case"api-key":return!!i.apiKey;default:return!1}}static getDefaultStrategy(n){return{methods:["bearer","client-token"],bearerToken:n}}static mergeStrategy(n,i){return n?{methods:n.methods.length>0?n.methods:i.methods,bearerToken:n.bearerToken||i.bearerToken,apiKey:n.apiKey||i.apiKey}:i}}return Za.AuthStrategyHandler=t,Za}var Ni={},fx;function zl(){if(fx)return Ni;fx=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.isBrowser=t,Ni.validateUrl=s,Ni.resolveControllerUrl=n,Ni.resolveKeycloakUrl=i;function t(){return typeof globalThis.window<"u"&&typeof globalThis.localStorage<"u"&&typeof globalThis.fetch<"u"}function s(a){try{const l=new URL(a);return l.protocol==="http:"||l.protocol==="https:"}catch{return!1}}function n(a){const l=t();let o;if(l?o=a.controllerPublicUrl:o=a.controllerPrivateUrl,o||(o=a.controllerUrl),!o)throw new Error(`No controller URL configured. Please provide ${l?"controllerPublicUrl":"controllerPrivateUrl"} or controllerUrl in your configuration.`);if(!s(o))throw new Error(`Invalid controller URL format: "${o}". URL must be a valid HTTP or HTTPS URL.`);return o.includes("localhost")&&(o=o.replace(/localhost/g,"127.0.0.1")),o}function i(a){const l=t();let o;if(l?o=a.authServerPublicUrl:o=a.authServerPrivateUrl,o||(o=a.authServerUrl),!o)throw new Error(`No Keycloak URL configured. Please provide ${l?"authServerPublicUrl":"authServerPrivateUrl"} or authServerUrl in your Keycloak configuration.`);if(!s(o))throw new Error(`Invalid Keycloak URL format: "${o}". URL must be a valid HTTP or HTTPS URL.`);return o.includes("localhost")&&(o=o.replace(/localhost/g,"127.0.0.1")),o}return Ni}var gu={},Km={},yu={},hx;function Jg(){if(hx)return yu;hx=1,Object.defineProperty(yu,"__esModule",{value:!0}),yu.isErrorResponse=t;function t(s){if(!s||typeof s!="object")return!1;const n=s;return!(!Array.isArray(n.errors)||!n.errors.every(i=>typeof i=="string")||typeof n.type!="string"||typeof n.title!="string"||typeof n.statusCode!="number"||n.instance!==void 0&&typeof n.instance!="string")}return yu}var px;function DA(){return px||(px=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateErrorResponse=void 0,t.validateSuccessResponse=s,t.validatePaginatedResponse=n,t.getResponseType=a;function s(l){if(!l||typeof l!="object")return!1;const o=l;return!(typeof o.success!="boolean"||typeof o.timestamp!="string"||o.message!==void 0&&typeof o.message!="string")}function n(l){if(!l||typeof l!="object")return!1;const o=l;if(!Array.isArray(o.data)||!o.meta||typeof o.meta!="object")return!1;const u=o.meta;if(typeof u.totalItems!="number"||typeof u.currentPage!="number"||typeof u.pageSize!="number"||typeof u.type!="string")return!1;if(o.links!==void 0){if(typeof o.links!="object"||o.links===null)return!1;const d=o.links;if(d.first!==void 0&&typeof d.first!="string"||d.prev!==void 0&&typeof d.prev!="string"||d.next!==void 0&&typeof d.next!="string"||d.last!==void 0&&typeof d.last!="string")return!1}return!0}var i=Jg();Object.defineProperty(t,"validateErrorResponse",{enumerable:!0,get:function(){return i.isErrorResponse}});function a(l){return s(l)?"success":n(l)?"paginated":"unknown"}})(Km)),Km}var mx;function MA(){if(mx)return gu;mx=1,Object.defineProperty(gu,"__esModule",{value:!0}),gu.validateHttpResponse=s;const t=DA();function s(n,i,a){if(a.validateResponses===!1||(i.includes("/api/v1/auth/validate")||i.includes("/api/auth/validate"))&&n&&typeof n=="object"&&"data"in n)return!0;const l=(0,t.getResponseType)(n);return l==="unknown"?(console.warn(`Response validation failed for ${i}: Response structure doesn't match expected format.`,"Expected: success response ({success, data?, message?, timestamp}) or paginated response ({data[], meta, links?}).","Actual:",n),!1):l==="success"&&!(0,t.validateSuccessResponse)(n)?(console.warn(`Response validation failed for ${i}: Success response structure invalid.`,"Expected: {success: boolean, data?: T, message?: string, timestamp: string}.","Actual:",n),!1):l==="paginated"&&!(0,t.validatePaginatedResponse)(n)?(console.warn(`Response validation failed for ${i}: Paginated response structure invalid.`,"Expected: {data: T[], meta: {totalItems, currentPage, pageSize, type}, links?}.","Actual:",n),!1):!0}return gu}var Pi={},ds={},gx;function Xo(){if(gx)return ds;gx=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.ApiErrorException=ds.MisoClientError=void 0,ds.transformError=i,ds.handleApiError=l;class t extends Error{constructor(u,d,h,f,p){let y=u;d&&(d.title?y=d.title:d.errors&&d.errors.length>0&&(y=d.errors[0])),super(y),this.name="MisoClientError",this.errorResponse=d,this.errorBody=h,this.statusCode=f??d?.statusCode,this.authMethod=p??d?.authMethod??null,Error.captureStackTrace&&Error.captureStackTrace(this,t)}}ds.MisoClientError=t;function s(o,u){const d=o.error;return{errors:d.errors??["Unknown error"],type:d.type??"about:blank",title:d.title??u.message??"Unknown error",statusCode:d.statusCode??u.response?.status??500,instance:d.instance??u.config?.url,correlationId:d.correlationId}}function n(o,u){const d=typeof o.statusCode=="number"?o.statusCode:typeof u.response?.status=="number"?u.response.status:500;return{errors:Array.isArray(o.errors)?o.errors:["Unknown error"],type:o.type??"about:blank",title:o.title??u.message??"Unknown error",statusCode:d,instance:o.instance??u.config?.url,correlationId:o.correlationId}}function i(o){if(o&&typeof o=="object"&&"response"in o){const u=o,d=u.response?.data;return d&&typeof d=="object"?"error"in d?s(d,u):n(d,u):{errors:[u.message??"Network error"],type:"about:blank",title:"Network error",statusCode:u.response?.status??0}}return o instanceof Error?{errors:[o.message??"Unknown error"],type:"about:blank",title:"Error",statusCode:0}:{errors:["Unknown error"],type:"about:blank",title:"Unknown error",statusCode:0}}class a extends Error{constructor(u){super(u.title||"API Error"),this.name="ApiErrorException",this.statusCode=u.statusCode,this.correlationId=u.correlationId,this.type=u.type,this.instance=u.instance,this.errors=u.errors,Error.captureStackTrace&&Error.captureStackTrace(this,a)}}ds.ApiErrorException=a;function l(o){const u=i(o);throw new a(u)}return ds}var yx;function Yg(){if(yx)return Pi;yx=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.detectAuthMethodFromHeaders=i,Pi.parseErrorResponse=a,Pi.createMisoClientError=l,Pi.isAxiosError=o;const t=od(),s=Jg(),n=Xo();function i(u){return u?u.Authorization?"bearer":u["x-client-token"]?"client-token":u["x-client-id"]?"client-credentials":null:null}function a(u,d){try{if(!u.response?.data)return null;const h=u.response.data;if(typeof h=="object"&&h!==null&&(0,s.isErrorResponse)(h)){const f=h;return{errors:h.errors,type:h.type,title:h.title,statusCode:h.statusCode,instance:h.instance||d,authMethod:f.authMethod}}if(typeof h=="string")try{const f=JSON.parse(h);if((0,s.isErrorResponse)(f)){const p=f;return{errors:f.errors,type:f.type,title:f.title,statusCode:f.statusCode,instance:f.instance||d,authMethod:p.authMethod}}}catch{return null}return null}catch{return null}}function l(u,d){const h=u.response?.status,f=a(u,d);let p=null;h===401&&(p=f?.authMethod??i(u.config?.headers));let y;u.response?.data&&typeof u.response.data=="object"&&(y=u.response.data);let S=u.message||"Request failed";return u.response&&(S=u.response.statusText||`Request failed with status code ${h}`),new n.MisoClientError(S,f||void 0,y,h,p)}function o(u){return u instanceof t.AxiosError?!0:typeof u=="object"&&u!==null&&"isAxiosError"in u?u.isAxiosError===!0:!1}return Pi}var Gt={},vx;function $A(){if(vx)return Gt;vx=1;var t=Gt&&Gt.__createBinding||(Object.create?(function(b,x,v,C){C===void 0&&(C=v);var _=Object.getOwnPropertyDescriptor(x,v);(!_||("get"in _?!x.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return x[v]}}),Object.defineProperty(b,C,_)}):(function(b,x,v,C){C===void 0&&(C=v),b[C]=x[v]})),s=Gt&&Gt.__setModuleDefault||(Object.create?(function(b,x){Object.defineProperty(b,"default",{enumerable:!0,value:x})}):function(b,x){b.default=x}),n=Gt&&Gt.__importStar||(function(){var b=function(x){return b=Object.getOwnPropertyNames||function(v){var C=[];for(var _ in v)Object.prototype.hasOwnProperty.call(v,_)&&(C[C.length]=_);return C},b(x)};return function(x){if(x&&x.__esModule)return x;var v={};if(x!=null)for(var C=b(x),_=0;_<C.length;_++)C[_]!=="default"&&t(v,x,C[_]);return s(v,x),v}})(),i=Gt&&Gt.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.generateCorrelationId=d,Gt.createHttpAgent=h,Gt.extractTokenFromResponse=f,Gt.formatTokenFetchError=p,Gt.fetchClientToken=y,Gt.refreshClientTokenFromCallback=S,Gt.isTokenValid=E;const a=i(od()),l=zl(),o=Yg(),u=Xo();function d(b){const x=Date.now(),v=Math.random().toString(36).substring(2,8);return`${b.substring(0,10)}-${x}-${v}`}async function h(b,x){const v=await Promise.resolve().then(()=>n(Ki)),C=await Promise.resolve().then(()=>n(Ki));return b?new C.Agent({family:4,timeout:x}):new v.Agent({family:4,timeout:x})}function f(b,x){const v=b.data.data?.token||b.data.token,C=b.data.data?.expiresIn||b.data.expiresIn,_=b.data.success===!0,R=b.status>=200&&b.status<300;return v&&(_||R)?(x.token=v,C&&(x.expiresAt=new Date(Date.now()+(C-30)*1e3)),x.token):null}function p(b,x,v){const C=b instanceof Error?b.message:"Unknown error",_=(0,o.isAxiosError)(b)?b.response?.status:void 0,R=(0,o.isAxiosError)(b)&&b.response?`status: ${b.response.status}, data: ${JSON.stringify(b.response.data)}`:(0,o.isAxiosError)(b)&&b.request?`code: ${b.code||"N/A"}`:"",D=`Failed to get client token: ${C}${R?`. ${R}`:""}`,A={errors:[`Client credential authentication failed: ${C}${R?`. ${R}`:""}`],type:"/Errors/Unauthorized",title:D,statusCode:_||401,instance:"/api/v1/auth/token",authMethod:"client-credentials"};return new u.MisoClientError(`Failed to authenticate with client credentials (clientId: ${v}) [correlationId: ${x}]`,A,void 0,_||401,"client-credentials")}async function y(b,x){if(!b.clientSecret)throw new Error("Cannot fetch client token: clientSecret is required but not provided");const v=d(b.clientId),C=b.clientId,_=3e4;try{const R=new AbortController,D=setTimeout(()=>R.abort(),_),A=(0,l.resolveControllerUrl)(b),j=A.startsWith("https://"),k=await h(j,_),K=a.default.create({baseURL:A,timeout:_,signal:R.signal,httpAgent:j?void 0:k,httpsAgent:j?k:void 0,headers:{"Content-Type":"application/json","x-client-id":b.clientId,"x-client-secret":b.clientSecret}}),Z=new Promise((V,F)=>setTimeout(()=>F(new Error(`Request timeout after ${_}ms`)),_));let ie;try{ie=await Promise.race([K.post(b.clientTokenUri||"/api/v1/auth/token"),Z]),clearTimeout(D)}catch(V){throw clearTimeout(D),V}const ce=f(ie,x);if(ce)return ce;throw new Error(`Failed to get client token: Invalid response format. Full response: ${JSON.stringify({status:ie.status,data:ie.data})} [correlationId: ${v}, clientId: ${C}]`)}catch(R){throw p(R,v,C)}}async function S(b,x){if(!b.onClientTokenRefresh)throw new Error("Client token expired and no refresh callback provided");try{const v=await b.onClientTokenRefresh();if(x.token=v.token,v.expiresIn){const C=v.expiresIn-30;x.expiresAt=new Date(Date.now()+C*1e3)}return x.token}catch(v){throw x.token=null,x.expiresAt=null,v}}function E(b,x=6e4){const v=new Date;return!!(b.token&&b.expiresAt&&b.expiresAt>new Date(v.getTime()+x))}return Gt}var Ex;function Xg(){if(Ex)return Ai;Ex=1;var t=Ai&&Ai.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.InternalHttpClient=void 0;const s=t(od()),n=J1(),i=zl(),a=MA(),l=Yg(),o=$A();class u{constructor(h){this.tokenState={token:null,expiresAt:null},this.tokenRefreshPromise=null,this.config=h,this.initializeTokenFromConfig(h),this.axios=this.createAxiosInstance(h),this.setupInterceptors()}initializeTokenFromConfig(h){h.clientToken&&(this.tokenState.token=h.clientToken,h.clientTokenExpiresAt&&(this.tokenState.expiresAt=typeof h.clientTokenExpiresAt=="string"?new Date(h.clientTokenExpiresAt):h.clientTokenExpiresAt))}createAxiosInstance(h){const f=(0,i.resolveControllerUrl)(h),p=f.startsWith("https://");let y,S;if(typeof globalThis.window>"u"){const E=Ki,b=Ki,x={family:4,timeout:3e4,keepAlive:!1};y=p?void 0:new E.Agent(x),S=p?new b.Agent(x):void 0}return s.default.create({baseURL:f,timeout:3e4,httpAgent:y,httpsAgent:S,headers:{"Content-Type":"application/json"}})}setupInterceptors(){this.axios.interceptors.request.use(async h=>{if(h.headers=h.headers||{},!h.headers["x-client-token"]&&!h.headers["x-client-id"]){const f=await this.getClientToken();f?h.headers["x-client-token"]=f:console.warn("Client token is not available. Ensure clientSecret or onClientTokenRefresh is configured.")}return h},h=>Promise.reject(h)),this.axios.interceptors.response.use(h=>h,h=>(h.response?.status===401&&this.handle401Error(h),Promise.reject(h)))}handle401Error(h){const f=h.config?.headers,p=!!f?.Authorization,y=!!f?.["x-client-token"];p?h.message="Bearer token authentication failed - token may be invalid or expired":y?h.message="Client token authentication failed - x-client-token may be invalid or expired":h.message="Authentication failed - token may be invalid",this.tokenState.token=null,this.tokenState.expiresAt=null}async getClientToken(){return(0,o.isTokenValid)(this.tokenState)?this.tokenState.token:this.tokenRefreshPromise?this.tokenRefreshPromise:this.config.onClientTokenRefresh?this.executeTokenRefresh(()=>(0,o.refreshClientTokenFromCallback)(this.config,this.tokenState)):this.config.clientSecret?this.executeTokenRefresh(()=>(0,o.fetchClientToken)(this.config,this.tokenState)):null}async executeTokenRefresh(h){this.tokenRefreshPromise=h();try{return await this.tokenRefreshPromise}finally{this.tokenRefreshPromise=null}}mergeAbortSignals(h,f){const p=new AbortController,y=()=>p.abort();return h.addEventListener("abort",y),f.addEventListener("abort",y),p.signal}async executeWithTimeout(h,f){const y=new AbortController,S=setTimeout(()=>y.abort(),3e4),E={...f,signal:f?.signal?this.mergeAbortSignals(y.signal,f.signal):y.signal};try{const b=await Promise.race([h(E),new Promise((x,v)=>setTimeout(()=>v(new Error("Request timeout after 30000ms")),3e4))]);return clearTimeout(S),(0,a.validateHttpResponse)(b.data,b.config?.url||"",this.config),b.data}catch(b){throw clearTimeout(S),(0,l.isAxiosError)(b)?(0,l.createMisoClientError)(b,b.config?.url):b}}async buildAuthStrategyConfig(h,f){const p=await this.getClientToken(),y=n.AuthStrategyHandler.buildAuthHeaders(h,p,this.config.clientId,this.config.clientSecret);return{...f,headers:{...f?.headers,...y}}}async executeMethod(h,f,p,y){switch(h){case"GET":return this.get(f,y);case"POST":return this.post(f,p,y);case"PUT":return this.put(f,p,y);case"DELETE":return this.delete(f,y);default:throw new Error(`Unsupported HTTP method: ${h}`)}}getAxiosInstance(){return this.axios}async get(h,f){return this.executeWithTimeout(p=>this.axios.get(h,p),f)}async post(h,f,p){const{data:y,...S}=p??{};return this.executeWithTimeout(E=>this.axios.post(h,f,E),S)}async put(h,f,p){const{data:y,...S}=p??{};return this.executeWithTimeout(E=>this.axios.put(h,f,E),S)}async delete(h,f){return this.executeWithTimeout(p=>this.axios.delete(h,p),f)}async request(h,f,p,y){return this.executeMethod(h,f,p,y||{})}async authenticatedRequest(h,f,p,y,S,E){const b=E?await this.buildAuthStrategyConfig(E,S):{...S,headers:{...S?.headers,Authorization:`Bearer ${p}`}};return this.executeMethod(h,f,y,b)}async requestWithAuthStrategy(h,f,p,y,S){const E=await this.buildAuthStrategyConfig(p,S);return this.executeMethod(h,f,y,E)}}return Ai.InternalHttpClient=u,Ai}var el={},Pr={};const UA="1.0.0",qA="ISO 27001 compliant sensitive fields configuration for data masking",FA={authentication:["password","passwd","pwd","secret","token","key","auth","authorization","cookie","session","apiKey","accessToken","refreshToken"],pii:["email","emailAddress","phone","phoneNumber","telephone","mobile","cellPhone","ssn","socialSecurityNumber","taxId","taxIdentification"],financial:["creditCard","cc","cardNumber","cvv","cvv2","cvc","pin","bankAccount","bankAccountNumber","routingNumber","iban","swift","accountNumber"],security:["otp","oneTimePassword","privateKey","publicKey","encryptionKey","decryptionKey"]},HA=["password","secret","token","key","ssn","creditcard","bankaccount","accountnumber"],BA={version:UA,description:qA,categories:FA,fieldPatterns:HA};var wx;function zA(){if(wx)return Pr;wx=1;var t={},s=Pr&&Pr.__createBinding||(Object.create?(function(S,E,b,x){x===void 0&&(x=b);var v=Object.getOwnPropertyDescriptor(E,b);(!v||("get"in v?!E.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return E[b]}}),Object.defineProperty(S,x,v)}):(function(S,E,b,x){x===void 0&&(x=b),S[x]=E[b]})),n=Pr&&Pr.__setModuleDefault||(Object.create?(function(S,E){Object.defineProperty(S,"default",{enumerable:!0,value:E})}):function(S,E){S.default=E}),i=Pr&&Pr.__importStar||(function(){var S=function(E){return S=Object.getOwnPropertyNames||function(b){var x=[];for(var v in b)Object.prototype.hasOwnProperty.call(b,v)&&(x[x.length]=v);return x},S(E)};return function(E){if(E&&E.__esModule)return E;var b={};if(E!=null)for(var x=S(E),v=0;v<x.length;v++)x[v]!=="default"&&s(b,E,x[v]);return n(b,E),b}})(),a=Pr&&Pr.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.loadSensitiveFieldsConfig=f,Pr.getFieldPatterns=p,Pr.getSensitiveFieldsArray=y;const l=i(K1),o=i(W1),u=a(BA);function d(){return new Set(["password","passwd","pwd","secret","token","key","auth","authorization","cookie","session","apikey","accesstoken","refreshtoken","email","emailaddress","phone","phonenumber","telephone","mobile","cellphone","ssn","socialsecuritynumber","taxid","taxidentification","creditcard","cc","cardnumber","cvv","cvv2","cvc","pin","bankaccount","bankaccountnumber","routingnumber","iban","swift","accountnumber","otp","onetimepassword","privatekey","publickey","encryptionkey","decryptionkey"])}function h(){return["password","secret","token","key","ssn","creditcard","bankaccount","accountnumber"]}function f(S){if(typeof globalThis<"u"&&"window"in globalThis&&typeof globalThis.window<"u"||typeof process>"u"||!t)return d();try{if(S||t.MISO_SENSITIVE_FIELDS_CONFIG){let E;if(S)E=o.isAbsolute(S)?S:o.resolve(process.cwd(),S);else{const _=t.MISO_SENSITIVE_FIELDS_CONFIG;E=o.isAbsolute(_)?_:o.resolve(process.cwd(),_)}if(!l.existsSync(E))return d();const b=l.readFileSync(E,"utf8"),x=JSON.parse(b),v=new Set;return Object.values(x.categories).forEach(_=>{_.forEach(R=>v.add(R.toLowerCase()))}),d().forEach(_=>v.add(_)),v}try{const E=u.default,b=new Set;return Object.values(E.categories).forEach(v=>{v.forEach(C=>b.add(C.toLowerCase()))}),d().forEach(v=>b.add(v)),b}catch{const E=o.join(__dirname,"sensitive-fields.config.json");if(l.existsSync(E)){const b=l.readFileSync(E,"utf8"),x=JSON.parse(b),v=new Set;return Object.values(x.categories).forEach(_=>{_.forEach(R=>v.add(R.toLowerCase()))}),d().forEach(_=>v.add(_)),v}}return d()}catch{return d()}}function p(S){if(typeof globalThis<"u"&&"window"in globalThis&&typeof globalThis.window<"u"||typeof process>"u"||!t)return h();try{if(S||t.MISO_SENSITIVE_FIELDS_CONFIG){let E;if(S)E=o.isAbsolute(S)?S:o.resolve(process.cwd(),S);else{const v=t.MISO_SENSITIVE_FIELDS_CONFIG;E=o.isAbsolute(v)?v:o.resolve(process.cwd(),v)}if(!l.existsSync(E))return h();const b=l.readFileSync(E,"utf8");return JSON.parse(b).fieldPatterns||h()}try{return u.default.fieldPatterns||h()}catch{const E=o.join(__dirname,"sensitive-fields.config.json");if(l.existsSync(E)){const b=l.readFileSync(E,"utf8");return JSON.parse(b).fieldPatterns||h()}}return h()}catch{return h()}}function y(S){const E=f(S);return Array.from(E)}return Pr}var Sx;function Qo(){if(Sx)return el;Sx=1,Object.defineProperty(el,"__esModule",{value:!0}),el.DataMasker=void 0;const t=zA();class s{static initializeSensitiveFields(i){return this.configPath!==i&&(this.cachedFields=null,this.cachedFieldPatterns=null,this.configPath=i),this.cachedFields?this.cachedFields:(this.cachedFields=(0,t.loadSensitiveFieldsConfig)(i),this.cachedFieldPatterns=(0,t.getFieldPatterns)(i),this.cachedFields)}static getSensitiveFields(){return this.initializeSensitiveFields(this.configPath)}static getFieldPatterns(){return this.cachedFieldPatterns||(this.cachedFieldPatterns=(0,t.getFieldPatterns)(this.configPath)),this.cachedFieldPatterns}static setConfigPath(i){this.configPath=i,this.cachedFields=null,this.cachedFieldPatterns=null}static isSensitiveField(i){const a=this.getSensitiveFields(),l=this.getFieldPatterns(),o=i.toLowerCase().replace(/[_-]/g,"");if(a.has(o))return!0;for(const u of l)if(o.includes(u.toLowerCase()))return!0;return!1}static maskSensitiveData(i){if(i==null||typeof i!="object")return i;if(Array.isArray(i))return i.map(l=>this.maskSensitiveData(l));const a={};for(const[l,o]of Object.entries(i))this.isSensitiveField(l)?a[l]=this.MASKED_VALUE:typeof o=="object"&&o!==null?a[l]=this.maskSensitiveData(o):a[l]=o;return a}static maskValue(i,a=0,l=0){if(!i||i.length<=a+l)return this.MASKED_VALUE;const o=i.substring(0,a),u=i.substring(i.length-l),d="*".repeat(Math.min(8,i.length-a-l));return`${o}${d}${u}`}static containsSensitiveData(i){if(i==null||typeof i!="object")return!1;if(Array.isArray(i))return i.some(a=>this.containsSensitiveData(a));for(const[a,l]of Object.entries(i))if(this.isSensitiveField(a)||typeof l=="object"&&l!==null&&this.containsSensitiveData(l))return!0;return!1}}return el.DataMasker=s,s.MASKED_VALUE="***MASKED***",s.cachedFields=null,s.cachedFieldPatterns=null,s.configPath=void 0,el}var Oi={},xx;function KA(){if(xx)return Oi;xx=1;var t=Oi&&Oi.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.extractRequestMetadata=i,Oi.extractUserIdFromToken=u;const s=t(Jo()),n=zl();function i(d,h,f){const p=d?.config||h?.config;if(!p)return null;const y=p.metadata;if(!y)return null;const S=a(y,p,f),E=l(p,h),b=o(d,h);return{...S,...E,...b}}function a(d,h,f){const p=Date.now()-d.startTime,y=d.method||"UNKNOWN",S=d.url||"",E=d.baseURL||(0,n.resolveControllerUrl)(f),b=`${E}${S}`,x=h.headers?.authorization,v=u(x);return{config:h,metadata:d,duration:p,method:y,url:S,fullUrl:b,baseURL:E,statusCode:0,authHeader:x,userId:v}}function l(d,h){return{requestHeaders:d.headers||{},requestBody:d.data||h?.config?.data}}function o(d,h){return{statusCode:d?.status||h?.response?.status||0,responseBody:d?.data||h?.response?.data,responseHeaders:d?.headers||h?.response?.headers||{}}}function u(d){if(!d||!d.startsWith("Bearer "))return null;const h=d.substring(7);try{const f=s.default.decode(h);return f?f.sub||f.userId||f.user_id||f.id:null}catch{return null}}return Oi}var tl={},Fn={},bx;function WA(){if(bx)return Fn;bx=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.estimateObjectSize=s,Fn.truncateResponseBody=n,Fn.analyzeRequestSizes=i,Fn.truncateBodies=a,Fn.applyMaskingStrategy=l,Fn.applyStandardMasking=o,Fn.applyDetailedMasking=u;const t=Qo();function s(p){if(p==null)return 0;if(typeof p=="string")return p.length;if(typeof p!="object")return 10;if(Array.isArray(p)){const E=p.length;if(E===0)return 10;const b=Math.min(3,E);let x=0;for(let C=0;C<b;C++)x+=s(p[C]);const v=b>0?x/b:100;return E*v}const y=Object.entries(p);let S=0;for(const[E,b]of y)S+=E.length+s(b);return S}function n(p,y=1e4){if(p==null)return{data:p,truncated:!1};if(typeof p=="string")return p.length<=y?{data:p,truncated:!1}:{data:p.substring(0,y)+"...",truncated:!0};const S=s(p);return S<=y?{data:p,truncated:!1}:{data:{_message:"Response body too large, truncated for performance",_estimatedSize:S},truncated:!0}}function i(p,y,S){const E=p?s(p):0,b=y?s(y):0,x=E<1024&&b<1024,v=E>S||b>S;return{isSmallRequest:x,isLargeRequest:v}}function a(p,y,S){const{data:E,truncated:b}=n(y,S),{data:x,truncated:v}=p&&s(p)>S?n(p,S):{data:p,truncated:!1};return{requestBody:x,responseBody:E,requestTruncated:v,responseTruncated:b}}async function l(p,y,S,E){const b=i(p.requestBody,p.responseBody,E),x=a(p.requestBody,p.responseBody,S);return y==="standard"?o(p.requestHeaders,p.responseHeaders,x.requestBody,x.responseBody,b.isSmallRequest,b.isLargeRequest,x.requestTruncated,x.responseTruncated):u(p.requestHeaders,p.responseHeaders,x.requestBody,x.responseBody,b.isSmallRequest,b.isLargeRequest,x.requestTruncated,x.responseTruncated)}function o(p,y,S,E,b,x,v,C){const _=t.DataMasker.maskSensitiveData(p),R=t.DataMasker.maskSensitiveData(y);let D,A;return b||!x?(D=t.DataMasker.maskSensitiveData(S),A=t.DataMasker.maskSensitiveData(E)):(D={_message:"Request body too large, masking skipped"},A={_message:"Response body too large, masking skipped"}),{headers:_,requestBody:D,responseBody:A,responseHeaders:R,requestTruncated:v,responseTruncated:C}}async function u(p,y,S,E,b,x,v,C){return x?d(p,y,v,C):b?h(p,y,S,E,v,C):f(p,y,S,E,v,C)}function d(p,y,S,E){return{headers:p,requestBody:{_message:"Request body too large, masking skipped"},responseBody:{_message:"Response body too large, masking skipped"},responseHeaders:y,requestTruncated:S,responseTruncated:E}}function h(p,y,S,E,b,x){return{headers:t.DataMasker.maskSensitiveData(p),requestBody:t.DataMasker.maskSensitiveData(S),responseBody:t.DataMasker.maskSensitiveData(E),responseHeaders:t.DataMasker.maskSensitiveData(y),requestTruncated:b,responseTruncated:x}}async function f(p,y,S,E,b,x){const[v,C,_,R]=await Promise.all([Promise.resolve(t.DataMasker.maskSensitiveData(p)),Promise.resolve(t.DataMasker.maskSensitiveData(S)),Promise.resolve(t.DataMasker.maskSensitiveData(E)),Promise.resolve(t.DataMasker.maskSensitiveData(y))]);return{headers:v,requestBody:C,responseBody:_,responseHeaders:R,requestTruncated:b,responseTruncated:x}}return Fn}var Cx;function VA(){if(Cx)return tl;Cx=1,Object.defineProperty(tl,"__esModule",{value:!0}),tl.logHttpRequestAudit=s,tl.calculateRequestSizes=a;const t=WA();async function s(h,f,p,y){try{if(!h)return;const S=p.audit||{},E=S.level||"detailed";if(E==="minimal"){await n(h,f,y);return}await i(h,E,S,f,p,y)}catch{}}async function n(h,f,p){await p.audit(`http.request.${h.method}`,h.url,{method:h.method,url:h.fullUrl,statusCode:h.statusCode,duration:h.duration,userId:h.userId||void 0,error:f?.message||void 0},{token:h.userId?void 0:h.authHeader?.replace("Bearer ","")})}async function i(h,f,p,y,S,E){const b=await(0,t.applyMaskingStrategy)({requestHeaders:h.requestHeaders,requestBody:h.requestBody,responseBody:h.responseBody,responseHeaders:h.responseHeaders},f,p.maxResponseSize??1e4,p.maxMaskingSize??5e4),x=f==="detailed"||f==="full"?a(h.requestBody,h.responseBody):{requestSize:void 0,responseSize:void 0},v=l({method:h.method,fullUrl:h.fullUrl,duration:h.duration,statusCode:h.statusCode,userId:h.userId},x,b,f,y);if(await E.audit(`http.request.${h.method}`,h.url,v,{token:h.userId?void 0:h.authHeader?.replace("Bearer ","")}),S.logLevel==="debug")try{await o(h,b,x,y,E)}catch{}}function a(h,f){let p,y;if(h){const S=JSON.stringify(h),E=Buffer.byteLength(S);p=E<=2?void 0:E}if(f){const S=JSON.stringify(f),E=Buffer.byteLength(S);y=E<=2?void 0:E}return{requestSize:p,responseSize:y}}function l(h,f,p,y,S){const E={method:h.method,url:h.fullUrl,statusCode:h.statusCode,duration:h.duration,userId:h.userId||void 0,error:S?.message||void 0};return(y==="detailed"||y==="full")&&(E.requestSize=f.requestSize!==void 0&&f.requestSize>0?f.requestSize:void 0,E.responseSize=f.responseSize!==void 0&&f.responseSize>0?f.responseSize:void 0,p.requestTruncated&&(E.requestTruncated=!0),p.responseTruncated&&(E.responseTruncated=!0)),E}async function o(h,f,p,y,S){const E=u(f.responseBody),b=d(h,f,p,E,y);await S.debug(`HTTP ${h.method} ${h.url}`,b,{token:h.userId?void 0:h.authHeader?.replace("Bearer ","")})}function u(h){if(!h||typeof h!="object")return h;const f=JSON.stringify(h);if(f.length<=1e3)return h;try{return JSON.parse(f.substring(0,1e3)+"...")}catch{return{_message:"Response body truncated"}}}function d(h,f,p,y,S){return{method:h.method,url:h.fullUrl,baseURL:h.baseURL,statusCode:h.statusCode,duration:h.duration,userId:h.userId||void 0,timeout:h.config.timeout||3e4,requestHeaders:f.headers,responseHeaders:f.responseHeaders,requestBody:f.requestBody,responseBody:y,requestSize:p.requestSize!==void 0&&p.requestSize>0?p.requestSize:void 0,responseSize:p.responseSize!==void 0&&p.responseSize>0?p.responseSize:void 0,error:S?.message||void 0}}return tl}var Tx;function ag(){if(Tx)return Qa;Tx=1,Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.HttpClient=void 0;const t=Xg(),s=Qo(),n=KA(),i=VA();class a{constructor(o,u){this.config=o,this.logger=u,this.internalClient=new t.InternalHttpClient(o),o.sensitiveFieldsConfig&&s.DataMasker.setConfigPath(o.sensitiveFieldsConfig),this.setupAuditLogging()}setupAuditLogging(){const o=this.internalClient.getAxiosInstance();o.interceptors.request.use(async u=>(this.shouldAuditRequest(u.url||"")&&(u.metadata={startTime:Date.now(),method:u.method?.toUpperCase(),url:u.url,baseURL:u.baseURL}),u),u=>Promise.reject(u)),o.interceptors.response.use(u=>(setTimeout(()=>{this.logHttpRequestAudit(u,null).catch(()=>{})},0),u),u=>(setTimeout(()=>{this.logHttpRequestAudit(u.response,u).catch(()=>{})},0),Promise.reject(u)))}shouldAuditRequest(o){if(this.config.audit?.enabled===!1)return!1;if(this.config.audit?.skipEndpoints){for(const u of this.config.audit.skipEndpoints)if(o&&o.includes(u))return!1}return!(o&&o.includes("/api/v1/logs")||o&&o.includes("/api/v1/auth/token"))}async logHttpRequestAudit(o,u){try{const d=(0,n.extractRequestMetadata)(o,u,this.config);await(0,i.logHttpRequestAudit)(d,u,this.config,this.logger)}catch{}}async get(o,u){return this.internalClient.get(o,u)}async post(o,u,d){return this.internalClient.post(o,u,d)}async put(o,u,d){return this.internalClient.put(o,u,d)}async delete(o,u){return this.internalClient.delete(o,u)}async request(o,u,d,h){return this.internalClient.request(o,u,d,h)}async authenticatedRequest(o,u,d,h,f,p){return this.internalClient.authenticatedRequest(o,u,d,h,f,p)}async requestWithAuthStrategy(o,u,d,h,f){return this.internalClient.requestWithAuthStrategy(o,u,d,h,f)}async validateTokenRequest(o,u){return this.authenticatedRequest("POST","/api/v1/auth/validate",o,{token:o},void 0,u)}async getWithFilters(o,u,d){const h=u.toQueryString(),f=h?`${o}?${h}`:o;return this.internalClient.get(f,d)}async getPaginated(o,u,d){const h=new URLSearchParams;h.append("page",u.page.toString()),h.append("page_size",u.pageSize.toString());const f=`${o}?${h.toString()}`;return this.internalClient.get(f,d)}}return Qa.HttpClient=a,Qa}var rl={},nl={},sl={},vu={},_x;function Lr(){if(_x)return vu;_x=1,Object.defineProperty(vu,"__esModule",{value:!0}),vu.logErrorWithContext=t;function t(s,n="[MisoClient]"){const i=s.correlationId||"no-correlation-id",a=[];a.push(`${s.errorName}: ${s.message}`),s.statusCode!==void 0&&a.push(`Status: ${s.statusCode}`),s.endpoint&&s.method?a.push(`Endpoint: ${s.method} ${s.endpoint}`):s.endpoint?a.push(`Endpoint: ${s.endpoint}`):s.method&&a.push(`Method: ${s.method}`);const l=a.join(" | ");console.error(`${n} [${i}] ${l}`),s.responseBody&&console.error(`${n} [${i}] Response Body:`,JSON.stringify(s.responseBody,null,2)),s.stackTrace&&console.error(`${n} [${i}] Stack Trace:`,s.stackTrace),s.originalError&&console.error(`${n} [${i}] Original Error:`,s.originalError)}return vu}var Eu={},vn={},Rx;function Qg(){if(Rx)return vn;Rx=1,Object.defineProperty(vn,"__esModule",{value:!0}),vn.AuthenticationError=vn.TimeoutError=vn.NetworkError=vn.ApiError=void 0;class t extends Error{constructor(l,o,u,d){super(l),this.name="ApiError",this.statusCode=o,this.response=u,this.originalError=d,Error.captureStackTrace&&Error.captureStackTrace(this,t)}}vn.ApiError=t;class s extends t{constructor(l,o){super(l,0,void 0,o),this.name="NetworkError"}}vn.NetworkError=s;class n extends t{constructor(l,o){super(l,408),this.name="TimeoutError"}}vn.TimeoutError=n;class i extends t{constructor(l,o){super(l,401,o),this.name="AuthenticationError"}}return vn.AuthenticationError=i,vn}var kx;function Dr(){if(kx)return Eu;kx=1,Object.defineProperty(Eu,"__esModule",{value:!0}),Eu.extractErrorInfo=n;const t=Xo(),s=Qg();function n(i,a){const l={errorType:"Unknown",errorName:"Error",message:"Unknown error",endpoint:a?.endpoint,method:a?.method,correlationId:a?.correlationId};if(i instanceof t.MisoClientError)l.errorType="MisoClientError",l.errorName=i.name,l.message=i.message,l.statusCode=i.statusCode,l.stackTrace=i.stack,i.errorResponse&&"correlationId"in i.errorResponse&&(l.correlationId=l.correlationId||i.errorResponse.correlationId),i.errorResponse?l.responseBody={errors:i.errorResponse.errors,type:i.errorResponse.type,title:i.errorResponse.title,statusCode:i.errorResponse.statusCode,instance:i.errorResponse.instance,correlationId:i.errorResponse.correlationId}:i.errorBody&&(l.responseBody=i.errorBody);else if(i instanceof s.ApiError){if(l.errorType=i.name,l.errorName=i.name,l.message=i.message,l.statusCode=i.statusCode,l.stackTrace=i.stack,l.originalError=i.originalError,i.response)try{l.responseBody={status:i.statusCode,message:i.message}}catch{}}else i instanceof s.AuthenticationError?(l.errorType="AuthenticationError",l.errorName=i.name,l.message=i.message,l.statusCode=401,l.stackTrace=i.stack):i instanceof s.NetworkError?(l.errorType="NetworkError",l.errorName=i.name,l.message=i.message,l.statusCode=0,l.stackTrace=i.stack):i instanceof s.TimeoutError?(l.errorType="TimeoutError",l.errorName=i.name,l.message=i.message,l.statusCode=408,l.stackTrace=i.stack):i instanceof Error?(l.errorType="Error",l.errorName=i.name,l.message=i.message,l.stackTrace=i.stack):(l.errorType="Unknown",l.errorName="UnknownError",l.message=typeof i=="string"?i:i&&typeof i=="object"&&"message"in i?String(i.message):"Unknown error occurred");return l}return Eu}var Ix;function GA(){if(Ix)return sl;Ix=1,Object.defineProperty(sl,"__esModule",{value:!0}),sl.AuthLoginApi=void 0;const t=Lr(),s=Dr();class n{constructor(a){this.httpClient=a}async login(a,l){try{return l?await this.httpClient.requestWithAuthStrategy("GET",n.LOGIN_ENDPOINT,l,void 0,{params:a}):await this.httpClient.request("GET",n.LOGIN_ENDPOINT,void 0,{params:a})}catch(o){const u=(0,s.extractErrorInfo)(o,{endpoint:n.LOGIN_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(u,"[AuthLoginApi]"),o}}async initiateDeviceCode(a,l){try{return l?await this.httpClient.requestWithAuthStrategy("POST",n.LOGIN_ENDPOINT,l,a):await this.httpClient.request("POST",n.LOGIN_ENDPOINT,a)}catch(o){const u=(0,s.extractErrorInfo)(o,{endpoint:n.LOGIN_ENDPOINT,method:"POST"});throw(0,t.logErrorWithContext)(u,"[AuthLoginApi]"),o}}async pollDeviceCodeToken(a){try{return await this.httpClient.request("POST",n.DEVICE_CODE_TOKEN_ENDPOINT,a)}catch(l){const o=(0,s.extractErrorInfo)(l,{endpoint:n.DEVICE_CODE_TOKEN_ENDPOINT,method:"POST"});throw(0,t.logErrorWithContext)(o,"[AuthLoginApi]"),l}}async refreshDeviceCodeToken(a){try{return await this.httpClient.request("POST",n.DEVICE_CODE_REFRESH_ENDPOINT,a)}catch(l){const o=(0,s.extractErrorInfo)(l,{endpoint:n.DEVICE_CODE_REFRESH_ENDPOINT,method:"POST"});throw(0,t.logErrorWithContext)(o,"[AuthLoginApi]"),l}}async getLoginDiagnostics(a){try{const l=a?{environment:a}:void 0,o=await this.httpClient.request("GET",n.LOGIN_DIAGNOSTICS_ENDPOINT,void 0,{params:l});if(o.success!==void 0)return o;if(o.data&&typeof o.data=="object"){const u=o.data;return{success:!0,data:{database:u.database||{},controller:u.controller||{},environment:u.environment||{},keycloak:u.keycloak||{}},timestamp:typeof o.timestamp=="string"?o.timestamp:new Date().toISOString()}}throw new Error(`Unexpected response format from login diagnostics endpoint: ${JSON.stringify(o)}`)}catch(l){const o=(0,s.extractErrorInfo)(l,{endpoint:n.LOGIN_DIAGNOSTICS_ENDPOINT,method:"GET"});throw(0,t.logErrorWithContext)(o,"[AuthLoginApi]"),l}}}return sl.AuthLoginApi=n,n.LOGIN_ENDPOINT="/api/v1/auth/login",n.DEVICE_CODE_TOKEN_ENDPOINT="/api/v1/auth/login/device/token",n.DEVICE_CODE_REFRESH_ENDPOINT="/api/v1/auth/login/device/refresh",n.LOGIN_DIAGNOSTICS_ENDPOINT="/api/v1/auth/login/diagnostics",sl}var il={},Ax;function JA(){if(Ax)return il;Ax=1,Object.defineProperty(il,"__esModule",{value:!0}),il.AuthTokenApi=void 0;const t=Dr(),s=Lr();class n{constructor(a){this.httpClient=a}async getClientToken(a){try{if(a)return await this.httpClient.requestWithAuthStrategy("POST",n.CLIENT_TOKEN_ENDPOINT,a);const l=await this.httpClient.request("POST",n.CLIENT_TOKEN_ENDPOINT,void 0,{headers:{"x-client-id":this.httpClient.config.clientId||""}});if(l.success!==void 0)return l;if(l.data&&typeof l.data=="object"){const o=l.data;if(typeof o.token=="string")return{success:!0,data:{token:o.token,expiresIn:typeof o.expiresIn=="number"?o.expiresIn:0,expiresAt:typeof o.expiresAt=="string"?o.expiresAt:new Date().toISOString()},timestamp:typeof l.timestamp=="string"?l.timestamp:new Date().toISOString()}}throw new Error(`Unexpected response format from client-token endpoint: ${JSON.stringify(l)}`)}catch(l){const o=(0,t.extractErrorInfo)(l,{endpoint:n.CLIENT_TOKEN_ENDPOINT,method:"POST"});throw(0,s.logErrorWithContext)(o,"[AuthTokenApi]"),l}}async generateClientToken(a){try{if(a)return await this.httpClient.requestWithAuthStrategy("POST",n.CLIENT_TOKEN_LEGACY_ENDPOINT,a);const l=await this.httpClient.request("POST",n.CLIENT_TOKEN_LEGACY_ENDPOINT,void 0,{headers:{"x-client-id":this.httpClient.config.clientId||"","x-client-secret":this.httpClient.config.clientSecret||""}});if(l.success!==void 0)return l;if(l.data&&typeof l.data=="object"){const o=l.data;if(typeof o.token=="string")return{success:!0,token:o.token,expiresIn:typeof o.expiresIn=="number"?o.expiresIn:0,expiresAt:typeof o.expiresAt=="string"?o.expiresAt:new Date().toISOString(),timestamp:typeof l.timestamp=="string"?l.timestamp:new Date().toISOString()}}else if(typeof l.token=="string")return{success:!0,token:l.token,expiresIn:typeof l.expiresIn=="number"?l.expiresIn:0,expiresAt:typeof l.expiresAt=="string"?l.expiresAt:new Date().toISOString(),timestamp:typeof l.timestamp=="string"?l.timestamp:new Date().toISOString()};throw new Error(`Unexpected response format from token endpoint: ${JSON.stringify(l)}`)}catch(l){const o=(0,t.extractErrorInfo)(l,{endpoint:n.CLIENT_TOKEN_LEGACY_ENDPOINT,method:"POST"});throw(0,s.logErrorWithContext)(o,"[AuthTokenApi]"),l}}async validateToken(a,l){try{return await this.httpClient.authenticatedRequest("POST",n.VALIDATE_ENDPOINT,a.token,a,void 0,l)}catch(o){const u=(0,t.extractErrorInfo)(o,{endpoint:n.VALIDATE_ENDPOINT,method:"POST"});throw(0,s.logErrorWithContext)(u,"[AuthTokenApi]"),o}}async refreshToken(a,l){try{return l?await this.httpClient.requestWithAuthStrategy("POST",n.REFRESH_ENDPOINT,l,a):await this.httpClient.request("POST",n.REFRESH_ENDPOINT,a)}catch(o){const u=(0,t.extractErrorInfo)(o,{endpoint:n.REFRESH_ENDPOINT,method:"POST"});throw(0,s.logErrorWithContext)(u,"[AuthTokenApi]"),o}}}return il.AuthTokenApi=n,n.CLIENT_TOKEN_ENDPOINT="/api/v1/auth/client-token",n.CLIENT_TOKEN_LEGACY_ENDPOINT="/api/v1/auth/token",n.VALIDATE_ENDPOINT="/api/v1/auth/validate",n.REFRESH_ENDPOINT="/api/v1/auth/refresh",il}var ol={},Nx;function YA(){if(Nx)return ol;Nx=1,Object.defineProperty(ol,"__esModule",{value:!0}),ol.AuthUserApi=void 0;const t=Dr(),s=Lr();class n{constructor(a){this.httpClient=a}async getUser(a){try{if(a?.bearerToken)return await this.httpClient.authenticatedRequest("GET",n.USER_ENDPOINT,a.bearerToken,void 0,void 0,a);if(a)return await this.httpClient.requestWithAuthStrategy("GET",n.USER_ENDPOINT,a);throw new Error("getUser requires authentication - provide authStrategy with bearerToken")}catch(l){const o=(0,t.extractErrorInfo)(l,{endpoint:n.USER_ENDPOINT,method:"GET"});throw(0,s.logErrorWithContext)(o,"[AuthUserApi]"),l}}async logout(){try{return await this.httpClient.request("POST",n.LOGOUT_ENDPOINT)}catch(a){const l=(0,t.extractErrorInfo)(a,{endpoint:n.LOGOUT_ENDPOINT,method:"POST"});throw(0,s.logErrorWithContext)(l,"[AuthUserApi]"),a}}async logoutWithToken(a){try{return await this.httpClient.request("POST",n.LOGOUT_ENDPOINT,{token:a})}catch(l){const o=(0,t.extractErrorInfo)(l,{endpoint:n.LOGOUT_ENDPOINT,method:"POST"});throw(0,s.logErrorWithContext)(o,"[AuthUserApi]"),l}}async handleCallback(a,l){try{return l?await this.httpClient.requestWithAuthStrategy("GET",n.CALLBACK_ENDPOINT,l,void 0,{params:a}):await this.httpClient.request("GET",n.CALLBACK_ENDPOINT,void 0,{params:a})}catch(o){const u=(0,t.extractErrorInfo)(o,{endpoint:n.CALLBACK_ENDPOINT,method:"GET"});throw(0,s.logErrorWithContext)(u,"[AuthUserApi]"),o}}}return ol.AuthUserApi=n,n.USER_ENDPOINT="/api/v1/auth/user",n.LOGOUT_ENDPOINT="/api/v1/auth/logout",n.CALLBACK_ENDPOINT="/api/v1/auth/callback",ol}var al={},Px;function XA(){if(Px)return al;Px=1,Object.defineProperty(al,"__esModule",{value:!0}),al.AuthCacheApi=void 0;const t=Dr(),s=Lr();class n{constructor(a){this.httpClient=a}async getCacheStats(a){try{return a?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.CACHE_STATS_ENDPOINT,a.bearerToken,void 0,void 0,a):a?await this.httpClient.requestWithAuthStrategy("GET",n.CACHE_STATS_ENDPOINT,a):await this.httpClient.request("GET",n.CACHE_STATS_ENDPOINT)}catch(l){const o=(0,t.extractErrorInfo)(l,{endpoint:n.CACHE_STATS_ENDPOINT,method:"GET"});throw(0,s.logErrorWithContext)(o,"[AuthCacheApi]"),l}}async getCachePerformance(a){try{return a?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.CACHE_PERFORMANCE_ENDPOINT,a.bearerToken,void 0,void 0,a):a?await this.httpClient.requestWithAuthStrategy("GET",n.CACHE_PERFORMANCE_ENDPOINT,a):await this.httpClient.request("GET",n.CACHE_PERFORMANCE_ENDPOINT)}catch(l){const o=(0,t.extractErrorInfo)(l,{endpoint:n.CACHE_PERFORMANCE_ENDPOINT,method:"GET"});throw(0,s.logErrorWithContext)(o,"[AuthCacheApi]"),l}}async getCacheEfficiency(a){try{return a?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.CACHE_EFFICIENCY_ENDPOINT,a.bearerToken,void 0,void 0,a):a?await this.httpClient.requestWithAuthStrategy("GET",n.CACHE_EFFICIENCY_ENDPOINT,a):await this.httpClient.request("GET",n.CACHE_EFFICIENCY_ENDPOINT)}catch(l){const o=(0,t.extractErrorInfo)(l,{endpoint:n.CACHE_EFFICIENCY_ENDPOINT,method:"GET"});throw(0,s.logErrorWithContext)(o,"[AuthCacheApi]"),l}}async clearCache(a){try{return a?.bearerToken?await this.httpClient.authenticatedRequest("POST",n.CACHE_CLEAR_ENDPOINT,a.bearerToken,void 0,void 0,a):a?await this.httpClient.requestWithAuthStrategy("POST",n.CACHE_CLEAR_ENDPOINT,a):await this.httpClient.request("POST",n.CACHE_CLEAR_ENDPOINT)}catch(l){const o=(0,t.extractErrorInfo)(l,{endpoint:n.CACHE_CLEAR_ENDPOINT,method:"POST"});throw(0,s.logErrorWithContext)(o,"[AuthCacheApi]"),l}}async invalidateCache(a,l){try{return l?.bearerToken?await this.httpClient.authenticatedRequest("POST",n.CACHE_INVALIDATE_ENDPOINT,l.bearerToken,a,void 0,l):l?await this.httpClient.requestWithAuthStrategy("POST",n.CACHE_INVALIDATE_ENDPOINT,l,a):await this.httpClient.request("POST",n.CACHE_INVALIDATE_ENDPOINT,a)}catch(o){const u=(0,t.extractErrorInfo)(o,{endpoint:n.CACHE_INVALIDATE_ENDPOINT,method:"POST"});throw(0,s.logErrorWithContext)(u,"[AuthCacheApi]"),o}}}return al.AuthCacheApi=n,n.CACHE_STATS_ENDPOINT="/api/v1/auth/cache/stats",n.CACHE_PERFORMANCE_ENDPOINT="/api/v1/auth/cache/performance",n.CACHE_EFFICIENCY_ENDPOINT="/api/v1/auth/cache/efficiency",n.CACHE_CLEAR_ENDPOINT="/api/v1/auth/cache/clear",n.CACHE_INVALIDATE_ENDPOINT="/api/v1/auth/cache/invalidate",al}var Ox;function QA(){if(Ox)return nl;Ox=1,Object.defineProperty(nl,"__esModule",{value:!0}),nl.AuthApi=void 0;const t=GA(),s=JA(),n=YA(),i=XA();class a{constructor(o){this.httpClient=o,this.loginApi=new t.AuthLoginApi(o),this.tokenApi=new s.AuthTokenApi(o),this.userApi=new n.AuthUserApi(o),this.cacheApi=new i.AuthCacheApi(o)}async login(o,u){return this.loginApi.login(o,u)}async initiateDeviceCode(o,u){return this.loginApi.initiateDeviceCode(o,u)}async pollDeviceCodeToken(o){return this.loginApi.pollDeviceCodeToken(o)}async refreshDeviceCodeToken(o){return this.loginApi.refreshDeviceCodeToken(o)}async getLoginDiagnostics(o){return this.loginApi.getLoginDiagnostics(o)}async getClientToken(o){return this.tokenApi.getClientToken(o)}async generateClientToken(o){return this.tokenApi.generateClientToken(o)}async validateToken(o,u){return this.tokenApi.validateToken(o,u)}async refreshToken(o,u){return this.tokenApi.refreshToken(o,u)}async getUser(o){return this.userApi.getUser(o)}async logout(){return this.userApi.logout()}async logoutWithToken(o){return this.userApi.logoutWithToken(o)}async handleCallback(o,u){return this.userApi.handleCallback(o,u)}async getCacheStats(o){return this.cacheApi.getCacheStats(o)}async getCachePerformance(o){return this.cacheApi.getCachePerformance(o)}async getCacheEfficiency(o){return this.cacheApi.getCacheEfficiency(o)}async clearCache(o){return this.cacheApi.clearCache(o)}async invalidateCache(o,u){return this.cacheApi.invalidateCache(o,u)}}return nl.AuthApi=a,nl}var ll={},jx;function ZA(){if(jx)return ll;jx=1,Object.defineProperty(ll,"__esModule",{value:!0}),ll.RolesApi=void 0;const t=Dr(),s=Lr();class n{constructor(a){this.httpClient=a}async getRoles(a,l){try{if(l?.bearerToken)return await this.httpClient.authenticatedRequest("GET",n.ROLES_ENDPOINT,l.bearerToken,void 0,{params:a},l);if(l)return await this.httpClient.requestWithAuthStrategy("GET",n.ROLES_ENDPOINT,l,void 0,{params:a});throw new Error("getRoles requires authentication - provide authStrategy with bearerToken")}catch(o){const u=(0,t.extractErrorInfo)(o,{endpoint:n.ROLES_ENDPOINT,method:"GET"});throw(0,s.logErrorWithContext)(u,"[RolesApi]"),o}}async refreshRoles(a,l){try{if(l?.bearerToken)return await this.httpClient.authenticatedRequest("GET",n.ROLES_REFRESH_ENDPOINT,l.bearerToken,void 0,{params:a},l);if(l)return await this.httpClient.requestWithAuthStrategy("GET",n.ROLES_REFRESH_ENDPOINT,l,void 0,{params:a});throw new Error("refreshRoles requires authentication - provide authStrategy with bearerToken")}catch(o){const u=(0,t.extractErrorInfo)(o,{endpoint:n.ROLES_REFRESH_ENDPOINT,method:"GET"});throw(0,s.logErrorWithContext)(u,"[RolesApi]"),o}}}return ll.RolesApi=n,n.ROLES_ENDPOINT="/api/v1/auth/roles",n.ROLES_REFRESH_ENDPOINT="/api/v1/auth/roles/refresh",ll}var cl={},Lx;function eN(){if(Lx)return cl;Lx=1,Object.defineProperty(cl,"__esModule",{value:!0}),cl.PermissionsApi=void 0;const t=Dr(),s=Lr();class n{constructor(a){this.httpClient=a}async getPermissions(a,l){try{if(l?.bearerToken)return await this.httpClient.authenticatedRequest("GET",n.PERMISSIONS_ENDPOINT,l.bearerToken,void 0,{params:a},l);if(l)return await this.httpClient.requestWithAuthStrategy("GET",n.PERMISSIONS_ENDPOINT,l,void 0,{params:a});throw new Error("getPermissions requires authentication - provide authStrategy with bearerToken")}catch(o){const u=(0,t.extractErrorInfo)(o,{endpoint:n.PERMISSIONS_ENDPOINT,method:"GET"});throw(0,s.logErrorWithContext)(u,"[PermissionsApi]"),o}}async refreshPermissions(a,l){try{if(l?.bearerToken)return await this.httpClient.authenticatedRequest("GET",n.PERMISSIONS_REFRESH_ENDPOINT,l.bearerToken,void 0,{params:a},l);if(l)return await this.httpClient.requestWithAuthStrategy("GET",n.PERMISSIONS_REFRESH_ENDPOINT,l,void 0,{params:a});throw new Error("refreshPermissions requires authentication - provide authStrategy with bearerToken")}catch(o){const u=(0,t.extractErrorInfo)(o,{endpoint:n.PERMISSIONS_REFRESH_ENDPOINT,method:"GET"});throw(0,s.logErrorWithContext)(u,"[PermissionsApi]"),o}}}return cl.PermissionsApi=n,n.PERMISSIONS_ENDPOINT="/api/v1/auth/permissions",n.PERMISSIONS_REFRESH_ENDPOINT="/api/v1/auth/permissions/refresh",cl}var ul={},dl={},Dx;function tN(){if(Dx)return dl;Dx=1,Object.defineProperty(dl,"__esModule",{value:!0}),dl.LogsCreateApi=void 0;const t=Dr(),s=Lr(),n=Xo();class i{constructor(l){this.httpClient=l}async createLog(l,o){try{if(o?.bearerToken)return await this.httpClient.authenticatedRequest("POST",i.LOGS_ENDPOINT,o.bearerToken,l,void 0,o);if(o)return await this.httpClient.requestWithAuthStrategy("POST",i.LOGS_ENDPOINT,o,l);const u=await this.httpClient.request("POST",i.LOGS_ENDPOINT,l);return u.success!==void 0?u:{success:!0,data:null,message:typeof u.message=="string"?u.message:"Log created successfully",timestamp:typeof u.timestamp=="string"?u.timestamp:new Date().toISOString()}}catch(u){if(!(u instanceof n.MisoClientError&&u.statusCode===401)){const h=(0,t.extractErrorInfo)(u,{endpoint:i.LOGS_ENDPOINT,method:"POST"});(0,s.logErrorWithContext)(h,"[LogsCreateApi]")}throw u}}async createBatchLogs(l,o){try{if(o?.bearerToken)return await this.httpClient.authenticatedRequest("POST",i.LOGS_BATCH_ENDPOINT,o.bearerToken,l,void 0,o);if(o)return await this.httpClient.requestWithAuthStrategy("POST",i.LOGS_BATCH_ENDPOINT,o,l);const u=await this.httpClient.request("POST",i.LOGS_BATCH_ENDPOINT,l);if(u.success!==void 0)return u;{const d=u.data&&typeof u.data=="object"?u.data:void 0;return{success:!0,message:typeof u.message=="string"?u.message:"Batch logs processed",processed:typeof d?.processed=="number"?d.processed:typeof u.processed=="number"?u.processed:0,failed:typeof d?.failed=="number"?d.failed:typeof u.failed=="number"?u.failed:0,errors:Array.isArray(d?.errors)?d.errors:Array.isArray(u.errors)?u.errors:void 0,timestamp:typeof u.timestamp=="string"?u.timestamp:new Date().toISOString()}}}catch(u){if(!(u instanceof n.MisoClientError&&u.statusCode===401)){const h=(0,t.extractErrorInfo)(u,{endpoint:i.LOGS_BATCH_ENDPOINT,method:"POST"});(0,s.logErrorWithContext)(h,"[LogsCreateApi]")}throw u}}}return dl.LogsCreateApi=i,i.LOGS_ENDPOINT="/api/v1/logs",i.LOGS_BATCH_ENDPOINT="/api/v1/logs/batch",dl}var fl={},Mx;function rN(){if(Mx)return fl;Mx=1,Object.defineProperty(fl,"__esModule",{value:!0}),fl.LogsListApi=void 0;const t=Dr(),s=Lr();class n{constructor(a){this.httpClient=a}async listGeneralLogs(a,l){try{return l?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_GENERAL_ENDPOINT,l.bearerToken,void 0,{params:a},l):l?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_GENERAL_ENDPOINT,l,void 0,{params:a}):await this.httpClient.request("GET",n.LOGS_GENERAL_ENDPOINT,void 0,{params:a})}catch(o){const u=(0,t.extractErrorInfo)(o,{endpoint:n.LOGS_GENERAL_ENDPOINT,method:"GET"});throw(0,s.logErrorWithContext)(u,"[LogsListApi]"),o}}async getGeneralLog(a,l,o){try{const u=`${n.LOGS_GENERAL_ENDPOINT}/${a}`,d=l?{environment:l}:void 0;return o?.bearerToken?await this.httpClient.authenticatedRequest("GET",u,o.bearerToken,void 0,{params:d},o):o?await this.httpClient.requestWithAuthStrategy("GET",u,o,void 0,{params:d}):await this.httpClient.request("GET",u,void 0,{params:d})}catch(u){const d=(0,t.extractErrorInfo)(u,{endpoint:n.LOGS_GENERAL_ENDPOINT,method:"GET"});throw(0,s.logErrorWithContext)(d,"[LogsListApi]"),u}}async listAuditLogs(a,l){try{return l?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_AUDIT_ENDPOINT,l.bearerToken,void 0,{params:a},l):l?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_AUDIT_ENDPOINT,l,void 0,{params:a}):await this.httpClient.request("GET",n.LOGS_AUDIT_ENDPOINT,void 0,{params:a})}catch(o){const u=(0,t.extractErrorInfo)(o,{endpoint:n.LOGS_AUDIT_ENDPOINT,method:"GET"});throw(0,s.logErrorWithContext)(u,"[LogsListApi]"),o}}async getAuditLog(a,l,o){try{const u=`${n.LOGS_AUDIT_ENDPOINT}/${a}`,d=l?{environment:l}:void 0;return o?.bearerToken?await this.httpClient.authenticatedRequest("GET",u,o.bearerToken,void 0,{params:d},o):o?await this.httpClient.requestWithAuthStrategy("GET",u,o,void 0,{params:d}):await this.httpClient.request("GET",u,void 0,{params:d})}catch(u){const d=(0,t.extractErrorInfo)(u,{endpoint:n.LOGS_AUDIT_ENDPOINT,method:"GET"});throw(0,s.logErrorWithContext)(d,"[LogsListApi]"),u}}async listJobLogs(a,l){try{return l?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_JOBS_ENDPOINT,l.bearerToken,void 0,{params:a},l):l?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_JOBS_ENDPOINT,l,void 0,{params:a}):await this.httpClient.request("GET",n.LOGS_JOBS_ENDPOINT,void 0,{params:a})}catch(o){const u=(0,t.extractErrorInfo)(o,{endpoint:void 0,method:"GET"});throw(0,s.logErrorWithContext)(u,"[LogsListApi]"),o}}async getJobLog(a,l){try{const o=`${n.LOGS_JOBS_ENDPOINT}/${a}`;return l?.bearerToken?await this.httpClient.authenticatedRequest("GET",o,l.bearerToken,void 0,void 0,l):l?await this.httpClient.requestWithAuthStrategy("GET",o,l):await this.httpClient.request("GET",o)}catch(o){const u=(0,t.extractErrorInfo)(o,{endpoint:void 0,method:"GET"});throw(0,s.logErrorWithContext)(u,"[LogsListApi]"),o}}}return fl.LogsListApi=n,n.LOGS_GENERAL_ENDPOINT="/api/v1/logs/general",n.LOGS_AUDIT_ENDPOINT="/api/v1/logs/audit",n.LOGS_JOBS_ENDPOINT="/api/v1/logs/jobs",fl}var hl={},$x;function nN(){if($x)return hl;$x=1,Object.defineProperty(hl,"__esModule",{value:!0}),hl.LogsStatsApi=void 0;const t=Dr(),s=Lr();class n{constructor(a){this.httpClient=a}async getLogStatsSummary(a,l){try{return l?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_STATS_SUMMARY_ENDPOINT,l.bearerToken,void 0,{params:a},l):l?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_STATS_SUMMARY_ENDPOINT,l,void 0,{params:a}):await this.httpClient.request("GET",n.LOGS_STATS_SUMMARY_ENDPOINT,void 0,{params:a})}catch(o){const u=(0,t.extractErrorInfo)(o,{endpoint:void 0,method:"GET"});throw(0,s.logErrorWithContext)(u,"[LogsStatsApi]"),o}}async getErrorStats(a,l){try{return l?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_STATS_ERRORS_ENDPOINT,l.bearerToken,void 0,{params:a},l):l?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_STATS_ERRORS_ENDPOINT,l,void 0,{params:a}):await this.httpClient.request("GET",n.LOGS_STATS_ERRORS_ENDPOINT,void 0,{params:a})}catch(o){const u=(0,t.extractErrorInfo)(o,{endpoint:void 0,method:"GET"});throw(0,s.logErrorWithContext)(u,"[LogsStatsApi]"),o}}async getUserActivityStats(a,l){try{return l?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_STATS_USERS_ENDPOINT,l.bearerToken,void 0,{params:a},l):l?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_STATS_USERS_ENDPOINT,l,void 0,{params:a}):await this.httpClient.request("GET",n.LOGS_STATS_USERS_ENDPOINT,void 0,{params:a})}catch(o){const u=(0,t.extractErrorInfo)(o,{endpoint:void 0,method:"GET"});throw(0,s.logErrorWithContext)(u,"[LogsStatsApi]"),o}}async getApplicationStats(a,l){try{return l?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_STATS_APPLICATIONS_ENDPOINT,l.bearerToken,void 0,{params:a},l):l?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_STATS_APPLICATIONS_ENDPOINT,l,void 0,{params:a}):await this.httpClient.request("GET",n.LOGS_STATS_APPLICATIONS_ENDPOINT,void 0,{params:a})}catch(o){const u=(0,t.extractErrorInfo)(o,{endpoint:void 0,method:"GET"});throw(0,s.logErrorWithContext)(u,"[LogsStatsApi]"),o}}}return hl.LogsStatsApi=n,n.LOGS_STATS_SUMMARY_ENDPOINT="/api/v1/logs/stats/summary",n.LOGS_STATS_ERRORS_ENDPOINT="/api/v1/logs/stats/errors",n.LOGS_STATS_USERS_ENDPOINT="/api/v1/logs/stats/users",n.LOGS_STATS_APPLICATIONS_ENDPOINT="/api/v1/logs/stats/applications",hl}var pl={},Ux;function sN(){if(Ux)return pl;Ux=1,Object.defineProperty(pl,"__esModule",{value:!0}),pl.LogsExportApi=void 0;const t=Dr(),s=Lr();class n{constructor(a){this.httpClient=a}async exportLogs(a,l){try{return l?.bearerToken?await this.httpClient.authenticatedRequest("GET",n.LOGS_EXPORT_ENDPOINT,l.bearerToken,void 0,{params:a},l):l?await this.httpClient.requestWithAuthStrategy("GET",n.LOGS_EXPORT_ENDPOINT,l,void 0,{params:a}):await this.httpClient.request("GET",n.LOGS_EXPORT_ENDPOINT,void 0,{params:a})}catch(o){const u=(0,t.extractErrorInfo)(o,{endpoint:void 0,method:"GET"});throw(0,s.logErrorWithContext)(u,"[LogsExportApi]"),o}}}return pl.LogsExportApi=n,n.LOGS_EXPORT_ENDPOINT="/api/v1/logs/export",pl}var qx;function iN(){if(qx)return ul;qx=1,Object.defineProperty(ul,"__esModule",{value:!0}),ul.LogsApi=void 0;const t=tN(),s=rN(),n=nN(),i=sN();class a{constructor(o){this.httpClient=o,this.create=new t.LogsCreateApi(o),this.list=new s.LogsListApi(o),this.stats=new n.LogsStatsApi(o),this.export=new i.LogsExportApi(o)}async createLog(o,u){return this.create.createLog(o,u)}async createBatchLogs(o,u){return this.create.createBatchLogs(o,u)}async listGeneralLogs(o,u){return this.list.listGeneralLogs(o,u)}async getGeneralLog(o,u,d){return this.list.getGeneralLog(o,u,d)}async listAuditLogs(o,u){return this.list.listAuditLogs(o,u)}async getAuditLog(o,u,d){return this.list.getAuditLog(o,u,d)}async listJobLogs(o,u){return this.list.listJobLogs(o,u)}async getJobLog(o,u){return this.list.getJobLog(o,u)}async getLogStatsSummary(o,u){return this.stats.getLogStatsSummary(o,u)}async getErrorStats(o,u){return this.stats.getErrorStats(o,u)}async getUserActivityStats(o,u){return this.stats.getUserActivityStats(o,u)}async getApplicationStats(o,u){return this.stats.getApplicationStats(o,u)}async exportLogs(o,u){return this.export.exportLogs(o,u)}}return ul.LogsApi=a,ul}var ml={},Fx;function oN(){if(Fx)return ml;Fx=1,Object.defineProperty(ml,"__esModule",{value:!0}),ml.EncryptionApi=void 0;const t=Dr(),s=Lr();class n{constructor(a){this.httpClient=a}async encrypt(a){try{return await this.httpClient.request("POST",n.ENCRYPT_ENDPOINT,a)}catch(l){const o=(0,t.extractErrorInfo)(l,{endpoint:n.ENCRYPT_ENDPOINT,method:"POST"});throw(0,s.logErrorWithContext)(o,"[EncryptionApi]"),l}}async decrypt(a){try{return await this.httpClient.request("POST",n.DECRYPT_ENDPOINT,a)}catch(l){const o=(0,t.extractErrorInfo)(l,{endpoint:n.DECRYPT_ENDPOINT,method:"POST"});throw(0,s.logErrorWithContext)(o,"[EncryptionApi]"),l}}}return ml.EncryptionApi=n,n.ENCRYPT_ENDPOINT="/api/security/parameters/encrypt",n.DECRYPT_ENDPOINT="/api/security/parameters/decrypt",ml}var Hx;function Y1(){if(Hx)return rl;Hx=1,Object.defineProperty(rl,"__esModule",{value:!0}),rl.ApiClient=void 0;const t=QA(),s=ZA(),n=eN(),i=iN(),a=oN();class l{constructor(u){this.auth=new t.AuthApi(u),this.roles=new s.RolesApi(u),this.permissions=new n.PermissionsApi(u),this.logs=new i.LogsApi(u),this.encryption=new a.EncryptionApi(u)}}return rl.ApiClient=l,rl}var wu={},Bx;function lg(){if(Bx)return wu;Bx=1,Object.defineProperty(wu,"__esModule",{value:!0}),wu.validateOrigin=n;function t(i){return i.trim().toLowerCase().replace(/\/$/,"")}function s(i,a){const l=t(i),o=t(a);if(l===o)return!0;if(a.includes(":*"))try{const u=new URL(l),d=new URL(o.replace(":*",""));if(u.protocol===d.protocol&&u.hostname===d.hostname)return!0}catch{}return!1}function n(i,a){if(!a||a.length===0)return{valid:!0};let l=Array.isArray(i.headers.origin)?i.headers.origin[0]:i.headers.origin;if(!l||typeof l!="string"){const u=Array.isArray(i.headers.referer)?i.headers.referer[0]:i.headers.referer;if(u&&typeof u=="string")try{const d=new URL(u);l=`${d.protocol}//${d.host}`}catch{return{valid:!1,error:"Missing origin header"}}else return{valid:!1,error:"Missing origin header"}}const o=l;for(const u of a)if(s(o,u))return{valid:!0};return{valid:!1,error:`Origin '${o}' is not allowed`}}return wu}var gl={};const Ze=crypto,jr=t=>t instanceof CryptoKey,X1=async(t,s)=>{const n=`SHA-${t.slice(-3)}`;return new Uint8Array(await Ze.subtle.digest(n,s))},Nt=new TextEncoder,rn=new TextDecoder,qu=2**32;function zn(...t){const s=t.reduce((a,{length:l})=>a+l,0),n=new Uint8Array(s);let i=0;for(const a of t)n.set(a,i),i+=a.length;return n}function aN(t,s){return zn(Nt.encode(t),new Uint8Array([0]),s)}function cg(t,s,n){if(s<0||s>=qu)throw new RangeError(`value must be >= 0 and <= ${qu-1}. Received ${s}`);t.set([s>>>24,s>>>16,s>>>8,s&255],n)}function Q1(t){const s=Math.floor(t/qu),n=t%qu,i=new Uint8Array(8);return cg(i,s,0),cg(i,n,4),i}function Zg(t){const s=new Uint8Array(4);return cg(s,t),s}function Wm(t){return zn(Zg(t.length),t)}async function lN(t,s,n){const i=Math.ceil((s>>3)/32),a=new Uint8Array(i*32);for(let l=0;l<i;l++){const o=new Uint8Array(4+t.length+n.length);o.set(Zg(l+1)),o.set(t,4),o.set(n,4+t.length),a.set(await X1("sha256",o),l*32)}return a.slice(0,s>>3)}const ey=t=>{let s=t;typeof s=="string"&&(s=Nt.encode(s));const n=32768,i=[];for(let a=0;a<s.length;a+=n)i.push(String.fromCharCode.apply(null,s.subarray(a,a+n)));return btoa(i.join(""))},Dt=t=>ey(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),Z1=t=>{const s=atob(t),n=new Uint8Array(s.length);for(let i=0;i<s.length;i++)n[i]=s.charCodeAt(i);return n},At=t=>{let s=t;s instanceof Uint8Array&&(s=rn.decode(s)),s=s.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return Z1(s)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class Yt extends Error{constructor(s,n){super(s,n),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}Yt.code="ERR_JOSE_GENERIC";class gr extends Yt{constructor(s,n,i="unspecified",a="unspecified"){super(s,{cause:{claim:i,reason:a,payload:n}}),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=i,this.reason=a,this.payload=n}}gr.code="ERR_JWT_CLAIM_VALIDATION_FAILED";class Fu extends Yt{constructor(s,n,i="unspecified",a="unspecified"){super(s,{cause:{claim:i,reason:a,payload:n}}),this.code="ERR_JWT_EXPIRED",this.claim=i,this.reason=a,this.payload=n}}Fu.code="ERR_JWT_EXPIRED";class Dl extends Yt{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}}Dl.code="ERR_JOSE_ALG_NOT_ALLOWED";class at extends Yt{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}}at.code="ERR_JOSE_NOT_SUPPORTED";class zo extends Yt{constructor(s="decryption operation failed",n){super(s,n),this.code="ERR_JWE_DECRYPTION_FAILED"}}zo.code="ERR_JWE_DECRYPTION_FAILED";class Oe extends Yt{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}}Oe.code="ERR_JWE_INVALID";class dt extends Yt{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}}dt.code="ERR_JWS_INVALID";class Er extends Yt{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}}Er.code="ERR_JWT_INVALID";class ty extends Yt{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}}ty.code="ERR_JWK_INVALID";class yd extends Yt{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}}yd.code="ERR_JWKS_INVALID";class vd extends Yt{constructor(s="no applicable key found in the JSON Web Key Set",n){super(s,n),this.code="ERR_JWKS_NO_MATCHING_KEY"}}vd.code="ERR_JWKS_NO_MATCHING_KEY";class ry extends Yt{constructor(s="multiple matching keys found in the JSON Web Key Set",n){super(s,n),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}ry.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";class ny extends Yt{constructor(s="request timed out",n){super(s,n),this.code="ERR_JWKS_TIMEOUT"}}ny.code="ERR_JWKS_TIMEOUT";class Ed extends Yt{constructor(s="signature verification failed",n){super(s,n),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}Ed.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";const cN=Object.freeze(Object.defineProperty({__proto__:null,JOSEAlgNotAllowed:Dl,JOSEError:Yt,JOSENotSupported:at,JWEDecryptionFailed:zo,JWEInvalid:Oe,JWKInvalid:ty,JWKSInvalid:yd,JWKSMultipleMatchingKeys:ry,JWKSNoMatchingKey:vd,JWKSTimeout:ny,JWSInvalid:dt,JWSSignatureVerificationFailed:Ed,JWTClaimValidationFailed:gr,JWTExpired:Fu,JWTInvalid:Er},Symbol.toStringTag,{value:"Module"})),wd=Ze.getRandomValues.bind(Ze);function eC(t){switch(t){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new at(`Unsupported JWE Algorithm: ${t}`)}}const uN=t=>wd(new Uint8Array(eC(t)>>3)),tC=(t,s)=>{if(s.length<<3!==eC(t))throw new Oe("Invalid Initialization Vector length")},Hu=(t,s)=>{const n=t.byteLength<<3;if(n!==s)throw new Oe(`Invalid Content Encryption Key length. Expected ${s} bits, got ${n} bits`)},dN=(t,s)=>{if(!(t instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(s instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(t.length!==s.length)throw new TypeError("Input buffers must have the same length");const n=t.length;let i=0,a=-1;for(;++a<n;)i|=t[a]^s[a];return i===0};function Jt(t,s="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${s} must be ${t}`)}function ys(t,s){return t.name===s}function Ou(t){return parseInt(t.name.slice(4),10)}function fN(t){switch(t){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function rC(t,s){if(s.length&&!s.some(n=>t.usages.includes(n))){let n="CryptoKey does not support this operation, its usages must include ";if(s.length>2){const i=s.pop();n+=`one of ${s.join(", ")}, or ${i}.`}else s.length===2?n+=`one of ${s[0]} or ${s[1]}.`:n+=`${s[0]}.`;throw new TypeError(n)}}function hN(t,s,...n){switch(s){case"HS256":case"HS384":case"HS512":{if(!ys(t.algorithm,"HMAC"))throw Jt("HMAC");const i=parseInt(s.slice(2),10);if(Ou(t.algorithm.hash)!==i)throw Jt(`SHA-${i}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!ys(t.algorithm,"RSASSA-PKCS1-v1_5"))throw Jt("RSASSA-PKCS1-v1_5");const i=parseInt(s.slice(2),10);if(Ou(t.algorithm.hash)!==i)throw Jt(`SHA-${i}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!ys(t.algorithm,"RSA-PSS"))throw Jt("RSA-PSS");const i=parseInt(s.slice(2),10);if(Ou(t.algorithm.hash)!==i)throw Jt(`SHA-${i}`,"algorithm.hash");break}case"EdDSA":{if(t.algorithm.name!=="Ed25519"&&t.algorithm.name!=="Ed448")throw Jt("Ed25519 or Ed448");break}case"Ed25519":{if(!ys(t.algorithm,"Ed25519"))throw Jt("Ed25519");break}case"ES256":case"ES384":case"ES512":{if(!ys(t.algorithm,"ECDSA"))throw Jt("ECDSA");const i=fN(s);if(t.algorithm.namedCurve!==i)throw Jt(i,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}rC(t,n)}function Xs(t,s,...n){switch(s){case"A128GCM":case"A192GCM":case"A256GCM":{if(!ys(t.algorithm,"AES-GCM"))throw Jt("AES-GCM");const i=parseInt(s.slice(1,4),10);if(t.algorithm.length!==i)throw Jt(i,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!ys(t.algorithm,"AES-KW"))throw Jt("AES-KW");const i=parseInt(s.slice(1,4),10);if(t.algorithm.length!==i)throw Jt(i,"algorithm.length");break}case"ECDH":{switch(t.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw Jt("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!ys(t.algorithm,"PBKDF2"))throw Jt("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!ys(t.algorithm,"RSA-OAEP"))throw Jt("RSA-OAEP");const i=parseInt(s.slice(9),10)||1;if(Ou(t.algorithm.hash)!==i)throw Jt(`SHA-${i}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}rC(t,n)}function nC(t,s,...n){if(n=n.filter(Boolean),n.length>2){const i=n.pop();t+=`one of type ${n.join(", ")}, or ${i}.`}else n.length===2?t+=`one of type ${n[0]} or ${n[1]}.`:t+=`of type ${n[0]}.`;return s==null?t+=` Received ${s}`:typeof s=="function"&&s.name?t+=` Received function ${s.name}`:typeof s=="object"&&s!=null&&s.constructor?.name&&(t+=` Received an instance of ${s.constructor.name}`),t}const or=(t,...s)=>nC("Key must be ",t,...s);function sC(t,s,...n){return nC(`Key for the ${t} algorithm must be `,s,...n)}const iC=t=>jr(t)?!0:t?.[Symbol.toStringTag]==="KeyObject",ar=["CryptoKey"];async function pN(t,s,n,i,a,l){if(!(s instanceof Uint8Array))throw new TypeError(or(s,"Uint8Array"));const o=parseInt(t.slice(1,4),10),u=await Ze.subtle.importKey("raw",s.subarray(o>>3),"AES-CBC",!1,["decrypt"]),d=await Ze.subtle.importKey("raw",s.subarray(0,o>>3),{hash:`SHA-${o<<1}`,name:"HMAC"},!1,["sign"]),h=zn(l,i,n,Q1(l.length<<3)),f=new Uint8Array((await Ze.subtle.sign("HMAC",d,h)).slice(0,o>>3));let p;try{p=dN(a,f)}catch{}if(!p)throw new zo;let y;try{y=new Uint8Array(await Ze.subtle.decrypt({iv:i,name:"AES-CBC"},u,n))}catch{}if(!y)throw new zo;return y}async function mN(t,s,n,i,a,l){let o;s instanceof Uint8Array?o=await Ze.subtle.importKey("raw",s,"AES-GCM",!1,["decrypt"]):(Xs(s,t,"decrypt"),o=s);try{return new Uint8Array(await Ze.subtle.decrypt({additionalData:l,iv:i,name:"AES-GCM",tagLength:128},o,zn(n,a)))}catch{throw new zo}}const oC=async(t,s,n,i,a,l)=>{if(!jr(s)&&!(s instanceof Uint8Array))throw new TypeError(or(s,...ar,"Uint8Array"));if(!i)throw new Oe("JWE Initialization Vector missing");if(!a)throw new Oe("JWE Authentication Tag missing");switch(tC(t,i),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return s instanceof Uint8Array&&Hu(s,parseInt(t.slice(-3),10)),pN(t,s,n,i,a,l);case"A128GCM":case"A192GCM":case"A256GCM":return s instanceof Uint8Array&&Hu(s,parseInt(t.slice(1,4),10)),mN(t,s,n,i,a,l);default:throw new at("Unsupported JWE Content Encryption Algorithm")}},Kl=(...t)=>{const s=t.filter(Boolean);if(s.length===0||s.length===1)return!0;let n;for(const i of s){const a=Object.keys(i);if(!n||n.size===0){n=new Set(a);continue}for(const l of a){if(n.has(l))return!1;n.add(l)}}return!0};function gN(t){return typeof t=="object"&&t!==null}function Pt(t){if(!gN(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let s=t;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(t)===s}const Sd=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function aC(t,s){if(t.algorithm.length!==parseInt(s.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${s}`)}function lC(t,s,n){if(jr(t))return Xs(t,s,n),t;if(t instanceof Uint8Array)return Ze.subtle.importKey("raw",t,"AES-KW",!0,[n]);throw new TypeError(or(t,...ar,"Uint8Array"))}const ug=async(t,s,n)=>{const i=await lC(s,t,"wrapKey");aC(i,t);const a=await Ze.subtle.importKey("raw",n,...Sd);return new Uint8Array(await Ze.subtle.wrapKey("raw",a,i,"AES-KW"))},dg=async(t,s,n)=>{const i=await lC(s,t,"unwrapKey");aC(i,t);const a=await Ze.subtle.unwrapKey("raw",n,i,"AES-KW",...Sd);return new Uint8Array(await Ze.subtle.exportKey("raw",a))};async function cC(t,s,n,i,a=new Uint8Array(0),l=new Uint8Array(0)){if(!jr(t))throw new TypeError(or(t,...ar));if(Xs(t,"ECDH"),!jr(s))throw new TypeError(or(s,...ar));Xs(s,"ECDH","deriveBits");const o=zn(Wm(Nt.encode(n)),Wm(a),Wm(l),Zg(i));let u;t.algorithm.name==="X25519"?u=256:t.algorithm.name==="X448"?u=448:u=Math.ceil(parseInt(t.algorithm.namedCurve.substr(-3),10)/8)<<3;const d=new Uint8Array(await Ze.subtle.deriveBits({name:t.algorithm.name,public:t},s,u));return lN(d,i,o)}async function yN(t){if(!jr(t))throw new TypeError(or(t,...ar));return Ze.subtle.generateKey(t.algorithm,!0,["deriveBits"])}function uC(t){if(!jr(t))throw new TypeError(or(t,...ar));return["P-256","P-384","P-521"].includes(t.algorithm.namedCurve)||t.algorithm.name==="X25519"||t.algorithm.name==="X448"}function vN(t){if(!(t instanceof Uint8Array)||t.length<8)throw new Oe("PBES2 Salt Input must be 8 or more octets")}function EN(t,s){if(t instanceof Uint8Array)return Ze.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits"]);if(jr(t))return Xs(t,s,"deriveBits","deriveKey"),t;throw new TypeError(or(t,...ar,"Uint8Array"))}async function dC(t,s,n,i){vN(t);const a=aN(s,t),l=parseInt(s.slice(13,16),10),o={hash:`SHA-${s.slice(8,11)}`,iterations:n,name:"PBKDF2",salt:a},u={length:l,name:"AES-KW"},d=await EN(i,s);if(d.usages.includes("deriveBits"))return new Uint8Array(await Ze.subtle.deriveBits(o,d,l));if(d.usages.includes("deriveKey"))return Ze.subtle.deriveKey(o,d,u,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}const wN=async(t,s,n,i=2048,a=wd(new Uint8Array(16)))=>{const l=await dC(a,t,i,s);return{encryptedKey:await ug(t.slice(-6),l,n),p2c:i,p2s:Dt(a)}},SN=async(t,s,n,i,a)=>{const l=await dC(a,t,i,s);return dg(t.slice(-6),l,n)};function Bu(t){switch(t){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new at(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}const xd=(t,s)=>{if(t.startsWith("RS")||t.startsWith("PS")){const{modulusLength:n}=s.algorithm;if(typeof n!="number"||n<2048)throw new TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}},xN=async(t,s,n)=>{if(!jr(s))throw new TypeError(or(s,...ar));if(Xs(s,t,"encrypt","wrapKey"),xd(t,s),s.usages.includes("encrypt"))return new Uint8Array(await Ze.subtle.encrypt(Bu(t),s,n));if(s.usages.includes("wrapKey")){const i=await Ze.subtle.importKey("raw",n,...Sd);return new Uint8Array(await Ze.subtle.wrapKey("raw",i,s,Bu(t)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},bN=async(t,s,n)=>{if(!jr(s))throw new TypeError(or(s,...ar));if(Xs(s,t,"decrypt","unwrapKey"),xd(t,s),s.usages.includes("decrypt"))return new Uint8Array(await Ze.subtle.decrypt(Bu(t),s,n));if(s.usages.includes("unwrapKey")){const i=await Ze.subtle.unwrapKey("raw",n,s,Bu(t),...Sd);return new Uint8Array(await Ze.subtle.exportKey("raw",i))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function Zo(t){return Pt(t)&&typeof t.kty=="string"}function CN(t){return t.kty!=="oct"&&typeof t.d=="string"}function TN(t){return t.kty!=="oct"&&typeof t.d>"u"}function _N(t){return Zo(t)&&t.kty==="oct"&&typeof t.k=="string"}function RN(t){let s,n;switch(t.kty){case"RSA":{switch(t.alg){case"PS256":case"PS384":case"PS512":s={name:"RSA-PSS",hash:`SHA-${t.alg.slice(-3)}`},n=t.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":s={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${t.alg.slice(-3)}`},n=t.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":s={name:"RSA-OAEP",hash:`SHA-${parseInt(t.alg.slice(-3),10)||1}`},n=t.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new at('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(t.alg){case"ES256":s={name:"ECDSA",namedCurve:"P-256"},n=t.d?["sign"]:["verify"];break;case"ES384":s={name:"ECDSA",namedCurve:"P-384"},n=t.d?["sign"]:["verify"];break;case"ES512":s={name:"ECDSA",namedCurve:"P-521"},n=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":s={name:"ECDH",namedCurve:t.crv},n=t.d?["deriveBits"]:[];break;default:throw new at('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(t.alg){case"Ed25519":s={name:"Ed25519"},n=t.d?["sign"]:["verify"];break;case"EdDSA":s={name:t.crv},n=t.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":s={name:t.crv},n=t.d?["deriveBits"]:[];break;default:throw new at('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new at('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:s,keyUsages:n}}const fC=async t=>{if(!t.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:s,keyUsages:n}=RN(t),i=[s,t.ext??!1,t.key_ops??n],a={...t};return delete a.alg,delete a.use,Ze.subtle.importKey("jwk",a,...i)},hC=t=>At(t);let Oo,jo;const pC=t=>t?.[Symbol.toStringTag]==="KeyObject",zu=async(t,s,n,i,a=!1)=>{let l=t.get(s);if(l?.[i])return l[i];const o=await fC({...n,alg:i});return a&&Object.freeze(s),l?l[i]=o:t.set(s,{[i]:o}),o},kN=(t,s)=>{if(pC(t)){let n=t.export({format:"jwk"});return delete n.d,delete n.dp,delete n.dq,delete n.p,delete n.q,delete n.qi,n.k?hC(n.k):(jo||(jo=new WeakMap),zu(jo,t,n,s))}return Zo(t)?t.k?At(t.k):(jo||(jo=new WeakMap),zu(jo,t,t,s,!0)):t},IN=(t,s)=>{if(pC(t)){let n=t.export({format:"jwk"});return n.k?hC(n.k):(Oo||(Oo=new WeakMap),zu(Oo,t,n,s))}return Zo(t)?t.k?At(t.k):(Oo||(Oo=new WeakMap),zu(Oo,t,t,s,!0)):t},Ku={normalizePublicKey:kN,normalizePrivateKey:IN};function sy(t){switch(t){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new at(`Unsupported JWE Algorithm: ${t}`)}}const Hi=t=>wd(new Uint8Array(sy(t)>>3)),mC=(t,s)=>{const n=(t.match(/.{1,64}/g)||[]).join(`
`);return`-----BEGIN ${s}-----
${n}
-----END ${s}-----`},gC=async(t,s,n)=>{if(!jr(n))throw new TypeError(or(n,...ar));if(!n.extractable)throw new TypeError("CryptoKey is not extractable");if(n.type!==t)throw new TypeError(`key is not a ${t} key`);return mC(ey(new Uint8Array(await Ze.subtle.exportKey(s,n))),`${t.toUpperCase()} KEY`)},AN=t=>gC("public","spki",t),NN=t=>gC("private","pkcs8",t),Gs=(t,s,n=0)=>{n===0&&(s.unshift(s.length),s.unshift(6));const i=t.indexOf(s[0],n);if(i===-1)return!1;const a=t.subarray(i,i+s.length);return a.length!==s.length?!1:a.every((l,o)=>l===s[o])||Gs(t,s,i+1)},zx=t=>{switch(!0){case Gs(t,[42,134,72,206,61,3,1,7]):return"P-256";case Gs(t,[43,129,4,0,34]):return"P-384";case Gs(t,[43,129,4,0,35]):return"P-521";case Gs(t,[43,101,110]):return"X25519";case Gs(t,[43,101,111]):return"X448";case Gs(t,[43,101,112]):return"Ed25519";case Gs(t,[43,101,113]):return"Ed448";default:throw new at("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},yC=async(t,s,n,i,a)=>{let l,o;const u=new Uint8Array(atob(n.replace(t,"")).split("").map(h=>h.charCodeAt(0))),d=s==="spki";switch(i){case"PS256":case"PS384":case"PS512":l={name:"RSA-PSS",hash:`SHA-${i.slice(-3)}`},o=d?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":l={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${i.slice(-3)}`},o=d?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":l={name:"RSA-OAEP",hash:`SHA-${parseInt(i.slice(-3),10)||1}`},o=d?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":l={name:"ECDSA",namedCurve:"P-256"},o=d?["verify"]:["sign"];break;case"ES384":l={name:"ECDSA",namedCurve:"P-384"},o=d?["verify"]:["sign"];break;case"ES512":l={name:"ECDSA",namedCurve:"P-521"},o=d?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{const h=zx(u);l=h.startsWith("P-")?{name:"ECDH",namedCurve:h}:{name:h},o=d?[]:["deriveBits"];break}case"Ed25519":l={name:"Ed25519"},o=d?["verify"]:["sign"];break;case"EdDSA":l={name:zx(u)},o=d?["verify"]:["sign"];break;default:throw new at('Invalid or unsupported "alg" (Algorithm) value')}return Ze.subtle.importKey(s,u,l,a?.extractable??!1,o)},PN=(t,s,n)=>yC(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",t,s,n),vC=(t,s,n)=>yC(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",t,s,n);function Kx(t){const s=[];let n=0;for(;n<t.length;){const i=EC(t.subarray(n));s.push(i),n+=i.byteLength}return s}function EC(t){let s=0,n=t[0]&31;if(s++,n===31){for(n=0;t[s]>=128;)n=n*128+t[s]-128,s++;n=n*128+t[s]-128,s++}let i=0;if(t[s]<128)i=t[s],s++;else if(i===128){for(i=0;t[s+i]!==0||t[s+i+1]!==0;){if(i>t.byteLength)throw new TypeError("invalid indefinite form length");i++}const l=s+i+2;return{byteLength:l,contents:t.subarray(s,s+i),raw:t.subarray(0,l)}}else{const l=t[s]&127;s++,i=0;for(let o=0;o<l;o++)i=i*256+t[s],s++}const a=s+i;return{byteLength:a,contents:t.subarray(s,a),raw:t.subarray(0,a)}}function ON(t){const s=Kx(Kx(EC(t).contents)[0].contents);return ey(s[s[0].raw[0]===160?6:5].raw)}function jN(t){const s=t.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),n=Z1(s);return mC(ON(n),"PUBLIC KEY")}const LN=(t,s,n)=>{let i;try{i=jN(t)}catch(a){throw new TypeError("Failed to parse the X.509 certificate",{cause:a})}return vC(i,s,n)};async function DN(t,s,n){if(typeof t!="string"||t.indexOf("-----BEGIN PUBLIC KEY-----")!==0)throw new TypeError('"spki" must be SPKI formatted string');return vC(t,s,n)}async function MN(t,s,n){if(typeof t!="string"||t.indexOf("-----BEGIN CERTIFICATE-----")!==0)throw new TypeError('"x509" must be X.509 formatted string');return LN(t,s,n)}async function $N(t,s,n){if(typeof t!="string"||t.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return PN(t,s,n)}async function Wl(t,s){if(!Pt(t))throw new TypeError("JWK must be an object");switch(s||(s=t.alg),t.kty){case"oct":if(typeof t.k!="string"||!t.k)throw new TypeError('missing "k" (Key Value) Parameter value');return At(t.k);case"RSA":if("oth"in t&&t.oth!==void 0)throw new at('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return fC({...t,alg:s});default:throw new at('Unsupported "kty" (Key Type) Parameter value')}}const Fo=t=>t?.[Symbol.toStringTag],fg=(t,s,n)=>{if(s.use!==void 0&&s.use!=="sig")throw new TypeError("Invalid key for this operation, when present its use must be sig");if(s.key_ops!==void 0&&s.key_ops.includes?.(n)!==!0)throw new TypeError(`Invalid key for this operation, when present its key_ops must include ${n}`);if(s.alg!==void 0&&s.alg!==t)throw new TypeError(`Invalid key for this operation, when present its alg must be ${t}`);return!0},UN=(t,s,n,i)=>{if(!(s instanceof Uint8Array)){if(i&&Zo(s)){if(_N(s)&&fg(t,s,n))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!iC(s))throw new TypeError(sC(t,s,...ar,"Uint8Array",i?"JSON Web Key":null));if(s.type!=="secret")throw new TypeError(`${Fo(s)} instances for symmetric algorithms must be of type "secret"`)}},qN=(t,s,n,i)=>{if(i&&Zo(s))switch(n){case"sign":if(CN(s)&&fg(t,s,n))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"verify":if(TN(s)&&fg(t,s,n))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!iC(s))throw new TypeError(sC(t,s,...ar,i?"JSON Web Key":null));if(s.type==="secret")throw new TypeError(`${Fo(s)} instances for asymmetric algorithms must not be of type "secret"`);if(n==="sign"&&s.type==="public")throw new TypeError(`${Fo(s)} instances for asymmetric algorithm signing must be of type "private"`);if(n==="decrypt"&&s.type==="public")throw new TypeError(`${Fo(s)} instances for asymmetric algorithm decryption must be of type "private"`);if(s.algorithm&&n==="verify"&&s.type==="private")throw new TypeError(`${Fo(s)} instances for asymmetric algorithm verifying must be of type "public"`);if(s.algorithm&&n==="encrypt"&&s.type==="private")throw new TypeError(`${Fo(s)} instances for asymmetric algorithm encryption must be of type "public"`)};function wC(t,s,n,i){s.startsWith("HS")||s==="dir"||s.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(s)?UN(s,n,i,t):qN(s,n,i,t)}const SC=wC.bind(void 0,!1),hg=wC.bind(void 0,!0);async function FN(t,s,n,i,a){if(!(n instanceof Uint8Array))throw new TypeError(or(n,"Uint8Array"));const l=parseInt(t.slice(1,4),10),o=await Ze.subtle.importKey("raw",n.subarray(l>>3),"AES-CBC",!1,["encrypt"]),u=await Ze.subtle.importKey("raw",n.subarray(0,l>>3),{hash:`SHA-${l<<1}`,name:"HMAC"},!1,["sign"]),d=new Uint8Array(await Ze.subtle.encrypt({iv:i,name:"AES-CBC"},o,s)),h=zn(a,i,d,Q1(a.length<<3)),f=new Uint8Array((await Ze.subtle.sign("HMAC",u,h)).slice(0,l>>3));return{ciphertext:d,tag:f,iv:i}}async function HN(t,s,n,i,a){let l;n instanceof Uint8Array?l=await Ze.subtle.importKey("raw",n,"AES-GCM",!1,["encrypt"]):(Xs(n,t,"encrypt"),l=n);const o=new Uint8Array(await Ze.subtle.encrypt({additionalData:a,iv:i,name:"AES-GCM",tagLength:128},l,s)),u=o.slice(-16);return{ciphertext:o.slice(0,-16),tag:u,iv:i}}const xC=async(t,s,n,i,a)=>{if(!jr(n)&&!(n instanceof Uint8Array))throw new TypeError(or(n,...ar,"Uint8Array"));switch(i?tC(t,i):i=uN(t),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return n instanceof Uint8Array&&Hu(n,parseInt(t.slice(-3),10)),FN(t,s,n,i,a);case"A128GCM":case"A192GCM":case"A256GCM":return n instanceof Uint8Array&&Hu(n,parseInt(t.slice(1,4),10)),HN(t,s,n,i,a);default:throw new at("Unsupported JWE Content Encryption Algorithm")}};async function BN(t,s,n,i){const a=t.slice(0,7),l=await xC(a,n,s,i,new Uint8Array(0));return{encryptedKey:l.ciphertext,iv:Dt(l.iv),tag:Dt(l.tag)}}async function zN(t,s,n,i,a){const l=t.slice(0,7);return oC(l,s,n,i,a,new Uint8Array(0))}async function KN(t,s,n,i,a){switch(SC(t,s,"decrypt"),s=await Ku.normalizePrivateKey?.(s,t)||s,t){case"dir":{if(n!==void 0)throw new Oe("Encountered unexpected JWE Encrypted Key");return s}case"ECDH-ES":if(n!==void 0)throw new Oe("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!Pt(i.epk))throw new Oe('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!uC(s))throw new at("ECDH with the provided key is not allowed or not supported by your javascript runtime");const l=await Wl(i.epk,t);let o,u;if(i.apu!==void 0){if(typeof i.apu!="string")throw new Oe('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{o=At(i.apu)}catch{throw new Oe("Failed to base64url decode the apu")}}if(i.apv!==void 0){if(typeof i.apv!="string")throw new Oe('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{u=At(i.apv)}catch{throw new Oe("Failed to base64url decode the apv")}}const d=await cC(l,s,t==="ECDH-ES"?i.enc:t,t==="ECDH-ES"?sy(i.enc):parseInt(t.slice(-5,-2),10),o,u);if(t==="ECDH-ES")return d;if(n===void 0)throw new Oe("JWE Encrypted Key missing");return dg(t.slice(-6),d,n)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(n===void 0)throw new Oe("JWE Encrypted Key missing");return bN(t,s,n)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(n===void 0)throw new Oe("JWE Encrypted Key missing");if(typeof i.p2c!="number")throw new Oe('JOSE Header "p2c" (PBES2 Count) missing or invalid');const l=a?.maxPBES2Count||1e4;if(i.p2c>l)throw new Oe('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof i.p2s!="string")throw new Oe('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let o;try{o=At(i.p2s)}catch{throw new Oe("Failed to base64url decode the p2s")}return SN(t,s,n,i.p2c,o)}case"A128KW":case"A192KW":case"A256KW":{if(n===void 0)throw new Oe("JWE Encrypted Key missing");return dg(t,s,n)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(n===void 0)throw new Oe("JWE Encrypted Key missing");if(typeof i.iv!="string")throw new Oe('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof i.tag!="string")throw new Oe('JOSE Header "tag" (Authentication Tag) missing or invalid');let l;try{l=At(i.iv)}catch{throw new Oe("Failed to base64url decode the iv")}let o;try{o=At(i.tag)}catch{throw new Oe("Failed to base64url decode the tag")}return zN(t,s,n,l,o)}default:throw new at('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function Vl(t,s,n,i,a){if(a.crit!==void 0&&i?.crit===void 0)throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if(!i||i.crit===void 0)return new Set;if(!Array.isArray(i.crit)||i.crit.length===0||i.crit.some(o=>typeof o!="string"||o.length===0))throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let l;n!==void 0?l=new Map([...Object.entries(n),...s.entries()]):l=s;for(const o of i.crit){if(!l.has(o))throw new at(`Extension Header Parameter "${o}" is not recognized`);if(a[o]===void 0)throw new t(`Extension Header Parameter "${o}" is missing`);if(l.get(o)&&i[o]===void 0)throw new t(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(i.crit)}const pg=(t,s)=>{if(s!==void 0&&(!Array.isArray(s)||s.some(n=>typeof n!="string")))throw new TypeError(`"${t}" option must be an array of strings`);if(s)return new Set(s)};async function iy(t,s,n){if(!Pt(t))throw new Oe("Flattened JWE must be an object");if(t.protected===void 0&&t.header===void 0&&t.unprotected===void 0)throw new Oe("JOSE Header missing");if(t.iv!==void 0&&typeof t.iv!="string")throw new Oe("JWE Initialization Vector incorrect type");if(typeof t.ciphertext!="string")throw new Oe("JWE Ciphertext missing or incorrect type");if(t.tag!==void 0&&typeof t.tag!="string")throw new Oe("JWE Authentication Tag incorrect type");if(t.protected!==void 0&&typeof t.protected!="string")throw new Oe("JWE Protected Header incorrect type");if(t.encrypted_key!==void 0&&typeof t.encrypted_key!="string")throw new Oe("JWE Encrypted Key incorrect type");if(t.aad!==void 0&&typeof t.aad!="string")throw new Oe("JWE AAD incorrect type");if(t.header!==void 0&&!Pt(t.header))throw new Oe("JWE Shared Unprotected Header incorrect type");if(t.unprotected!==void 0&&!Pt(t.unprotected))throw new Oe("JWE Per-Recipient Unprotected Header incorrect type");let i;if(t.protected)try{const _=At(t.protected);i=JSON.parse(rn.decode(_))}catch{throw new Oe("JWE Protected Header is invalid")}if(!Kl(i,t.header,t.unprotected))throw new Oe("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const a={...i,...t.header,...t.unprotected};if(Vl(Oe,new Map,n?.crit,i,a),a.zip!==void 0)throw new at('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:l,enc:o}=a;if(typeof l!="string"||!l)throw new Oe("missing JWE Algorithm (alg) in JWE Header");if(typeof o!="string"||!o)throw new Oe("missing JWE Encryption Algorithm (enc) in JWE Header");const u=n&&pg("keyManagementAlgorithms",n.keyManagementAlgorithms),d=n&&pg("contentEncryptionAlgorithms",n.contentEncryptionAlgorithms);if(u&&!u.has(l)||!u&&l.startsWith("PBES2"))throw new Dl('"alg" (Algorithm) Header Parameter value not allowed');if(d&&!d.has(o))throw new Dl('"enc" (Encryption Algorithm) Header Parameter value not allowed');let h;if(t.encrypted_key!==void 0)try{h=At(t.encrypted_key)}catch{throw new Oe("Failed to base64url decode the encrypted_key")}let f=!1;typeof s=="function"&&(s=await s(i,t),f=!0);let p;try{p=await KN(l,s,h,a,n)}catch(_){if(_ instanceof TypeError||_ instanceof Oe||_ instanceof at)throw _;p=Hi(o)}let y,S;if(t.iv!==void 0)try{y=At(t.iv)}catch{throw new Oe("Failed to base64url decode the iv")}if(t.tag!==void 0)try{S=At(t.tag)}catch{throw new Oe("Failed to base64url decode the tag")}const E=Nt.encode(t.protected??"");let b;t.aad!==void 0?b=zn(E,Nt.encode("."),Nt.encode(t.aad)):b=E;let x;try{x=At(t.ciphertext)}catch{throw new Oe("Failed to base64url decode the ciphertext")}const C={plaintext:await oC(o,p,x,y,S,b)};if(t.protected!==void 0&&(C.protectedHeader=i),t.aad!==void 0)try{C.additionalAuthenticatedData=At(t.aad)}catch{throw new Oe("Failed to base64url decode the aad")}return t.unprotected!==void 0&&(C.sharedUnprotectedHeader=t.unprotected),t.header!==void 0&&(C.unprotectedHeader=t.header),f?{...C,key:s}:C}async function bC(t,s,n){if(t instanceof Uint8Array&&(t=rn.decode(t)),typeof t!="string")throw new Oe("Compact JWE must be a string or Uint8Array");const{0:i,1:a,2:l,3:o,4:u,length:d}=t.split(".");if(d!==5)throw new Oe("Invalid Compact JWE");const h=await iy({ciphertext:o,iv:l||void 0,protected:i,tag:u||void 0,encrypted_key:a||void 0},s,n),f={plaintext:h.plaintext,protectedHeader:h.protectedHeader};return typeof s=="function"?{...f,key:h.key}:f}async function WN(t,s,n){if(!Pt(t))throw new Oe("General JWE must be an object");if(!Array.isArray(t.recipients)||!t.recipients.every(Pt))throw new Oe("JWE Recipients missing or incorrect type");if(!t.recipients.length)throw new Oe("JWE Recipients has no members");for(const i of t.recipients)try{return await iy({aad:t.aad,ciphertext:t.ciphertext,encrypted_key:i.encrypted_key,header:i.header,iv:t.iv,protected:t.protected,tag:t.tag,unprotected:t.unprotected},s,n)}catch{}throw new zo}const CC=Symbol(),VN=async t=>{if(t instanceof Uint8Array)return{kty:"oct",k:Dt(t)};if(!jr(t))throw new TypeError(or(t,...ar,"Uint8Array"));if(!t.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:s,key_ops:n,alg:i,use:a,...l}=await Ze.subtle.exportKey("jwk",t);return l};async function GN(t){return AN(t)}async function JN(t){return NN(t)}async function TC(t){return VN(t)}async function _C(t,s,n,i,a={}){let l,o,u;switch(SC(t,n,"encrypt"),n=await Ku.normalizePublicKey?.(n,t)||n,t){case"dir":{u=n;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!uC(n))throw new at("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:d,apv:h}=a;let{epk:f}=a;f||(f=(await yN(n)).privateKey);const{x:p,y,crv:S,kty:E}=await TC(f),b=await cC(n,f,t==="ECDH-ES"?s:t,t==="ECDH-ES"?sy(s):parseInt(t.slice(-5,-2),10),d,h);if(o={epk:{x:p,crv:S,kty:E}},E==="EC"&&(o.epk.y=y),d&&(o.apu=Dt(d)),h&&(o.apv=Dt(h)),t==="ECDH-ES"){u=b;break}u=i||Hi(s);const x=t.slice(-6);l=await ug(x,b,u);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{u=i||Hi(s),l=await xN(t,n,u);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{u=i||Hi(s);const{p2c:d,p2s:h}=a;({encryptedKey:l,...o}=await wN(t,n,u,d,h));break}case"A128KW":case"A192KW":case"A256KW":{u=i||Hi(s),l=await ug(t,n,u);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{u=i||Hi(s);const{iv:d}=a;({encryptedKey:l,...o}=await BN(t,n,u,d));break}default:throw new at('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:u,encryptedKey:l,parameters:o}}class Wu{constructor(s){if(!(s instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=s}setKeyManagementParameters(s){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=s,this}setProtectedHeader(s){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=s,this}setSharedUnprotectedHeader(s){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=s,this}setUnprotectedHeader(s){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=s,this}setAdditionalAuthenticatedData(s){return this._aad=s,this}setContentEncryptionKey(s){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=s,this}setInitializationVector(s){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=s,this}async encrypt(s,n){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new Oe("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!Kl(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new Oe("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const i={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(Vl(Oe,new Map,n?.crit,this._protectedHeader,i),i.zip!==void 0)throw new at('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:a,enc:l}=i;if(typeof a!="string"||!a)throw new Oe('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof l!="string"||!l)throw new Oe('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let o;if(this._cek&&(a==="dir"||a==="ECDH-ES"))throw new TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${a}`);let u;{let b;({cek:u,encryptedKey:o,parameters:b}=await _C(a,l,s,this._cek,this._keyManagementParameters)),b&&(n&&CC in n?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...b}:this.setUnprotectedHeader(b):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...b}:this.setProtectedHeader(b))}let d,h,f;this._protectedHeader?h=Nt.encode(Dt(JSON.stringify(this._protectedHeader))):h=Nt.encode(""),this._aad?(f=Dt(this._aad),d=zn(h,Nt.encode("."),Nt.encode(f))):d=h;const{ciphertext:p,tag:y,iv:S}=await xC(l,this._plaintext,u,this._iv,d),E={ciphertext:Dt(p)};return S&&(E.iv=Dt(S)),y&&(E.tag=Dt(y)),o&&(E.encrypted_key=Dt(o)),f&&(E.aad=f),this._protectedHeader&&(E.protected=rn.decode(h)),this._sharedUnprotectedHeader&&(E.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(E.header=this._unprotectedHeader),E}}class YN{constructor(s,n,i){this.parent=s,this.key=n,this.options=i}setUnprotectedHeader(s){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=s,this}addRecipient(...s){return this.parent.addRecipient(...s)}encrypt(...s){return this.parent.encrypt(...s)}done(){return this.parent}}class XN{constructor(s){this._recipients=[],this._plaintext=s}addRecipient(s,n){const i=new YN(this,s,{crit:n?.crit});return this._recipients.push(i),i}setProtectedHeader(s){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=s,this}setSharedUnprotectedHeader(s){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=s,this}setAdditionalAuthenticatedData(s){return this._aad=s,this}async encrypt(){if(!this._recipients.length)throw new Oe("at least one recipient must be added");if(this._recipients.length===1){const[a]=this._recipients,l=await new Wu(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(a.unprotectedHeader).encrypt(a.key,{...a.options}),o={ciphertext:l.ciphertext,iv:l.iv,recipients:[{}],tag:l.tag};return l.aad&&(o.aad=l.aad),l.protected&&(o.protected=l.protected),l.unprotected&&(o.unprotected=l.unprotected),l.encrypted_key&&(o.recipients[0].encrypted_key=l.encrypted_key),l.header&&(o.recipients[0].header=l.header),o}let s;for(let a=0;a<this._recipients.length;a++){const l=this._recipients[a];if(!Kl(this._protectedHeader,this._unprotectedHeader,l.unprotectedHeader))throw new Oe("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const o={...this._protectedHeader,...this._unprotectedHeader,...l.unprotectedHeader},{alg:u}=o;if(typeof u!="string"||!u)throw new Oe('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(u==="dir"||u==="ECDH-ES")throw new Oe('"dir" and "ECDH-ES" alg may only be used with a single recipient');if(typeof o.enc!="string"||!o.enc)throw new Oe('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(!s)s=o.enc;else if(s!==o.enc)throw new Oe('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');if(Vl(Oe,new Map,l.options.crit,this._protectedHeader,o),o.zip!==void 0)throw new at('JWE "zip" (Compression Algorithm) Header Parameter is not supported.')}const n=Hi(s),i={ciphertext:"",iv:"",recipients:[],tag:""};for(let a=0;a<this._recipients.length;a++){const l=this._recipients[a],o={};i.recipients.push(o);const d={...this._protectedHeader,...this._unprotectedHeader,...l.unprotectedHeader}.alg.startsWith("PBES2")?2048+a:void 0;if(a===0){const p=await new Wu(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(n).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(l.unprotectedHeader).setKeyManagementParameters({p2c:d}).encrypt(l.key,{...l.options,[CC]:!0});i.ciphertext=p.ciphertext,i.iv=p.iv,i.tag=p.tag,p.aad&&(i.aad=p.aad),p.protected&&(i.protected=p.protected),p.unprotected&&(i.unprotected=p.unprotected),o.encrypted_key=p.encrypted_key,p.header&&(o.header=p.header);continue}const{encryptedKey:h,parameters:f}=await _C(l.unprotectedHeader?.alg||this._protectedHeader?.alg||this._unprotectedHeader?.alg,s,l.key,n,{p2c:d});o.encrypted_key=Dt(h),(l.unprotectedHeader||f)&&(o.header={...l.unprotectedHeader,...f})}return i}}function RC(t,s){const n=`SHA-${t.slice(-3)}`;switch(t){case"HS256":case"HS384":case"HS512":return{hash:n,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:n,name:"RSA-PSS",saltLength:t.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:n,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:n,name:"ECDSA",namedCurve:s.namedCurve};case"Ed25519":return{name:"Ed25519"};case"EdDSA":return{name:s.name};default:throw new at(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}async function kC(t,s,n){if(n==="sign"&&(s=await Ku.normalizePrivateKey(s,t)),n==="verify"&&(s=await Ku.normalizePublicKey(s,t)),jr(s))return hN(s,t,n),s;if(s instanceof Uint8Array){if(!t.startsWith("HS"))throw new TypeError(or(s,...ar));return Ze.subtle.importKey("raw",s,{hash:`SHA-${t.slice(-3)}`,name:"HMAC"},!1,[n])}throw new TypeError(or(s,...ar,"Uint8Array","JSON Web Key"))}const QN=async(t,s,n,i)=>{const a=await kC(t,s,"verify");xd(t,a);const l=RC(t,a.algorithm);try{return await Ze.subtle.verify(l,a,n,i)}catch{return!1}};async function oy(t,s,n){if(!Pt(t))throw new dt("Flattened JWS must be an object");if(t.protected===void 0&&t.header===void 0)throw new dt('Flattened JWS must have either of the "protected" or "header" members');if(t.protected!==void 0&&typeof t.protected!="string")throw new dt("JWS Protected Header incorrect type");if(t.payload===void 0)throw new dt("JWS Payload missing");if(typeof t.signature!="string")throw new dt("JWS Signature missing or incorrect type");if(t.header!==void 0&&!Pt(t.header))throw new dt("JWS Unprotected Header incorrect type");let i={};if(t.protected)try{const b=At(t.protected);i=JSON.parse(rn.decode(b))}catch{throw new dt("JWS Protected Header is invalid")}if(!Kl(i,t.header))throw new dt("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const a={...i,...t.header},l=Vl(dt,new Map([["b64",!0]]),n?.crit,i,a);let o=!0;if(l.has("b64")&&(o=i.b64,typeof o!="boolean"))throw new dt('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:u}=a;if(typeof u!="string"||!u)throw new dt('JWS "alg" (Algorithm) Header Parameter missing or invalid');const d=n&&pg("algorithms",n.algorithms);if(d&&!d.has(u))throw new Dl('"alg" (Algorithm) Header Parameter value not allowed');if(o){if(typeof t.payload!="string")throw new dt("JWS Payload must be a string")}else if(typeof t.payload!="string"&&!(t.payload instanceof Uint8Array))throw new dt("JWS Payload must be a string or an Uint8Array instance");let h=!1;typeof s=="function"?(s=await s(i,t),h=!0,hg(u,s,"verify"),Zo(s)&&(s=await Wl(s,u))):hg(u,s,"verify");const f=zn(Nt.encode(t.protected??""),Nt.encode("."),typeof t.payload=="string"?Nt.encode(t.payload):t.payload);let p;try{p=At(t.signature)}catch{throw new dt("Failed to base64url decode the signature")}if(!await QN(u,s,p,f))throw new Ed;let S;if(o)try{S=At(t.payload)}catch{throw new dt("Failed to base64url decode the payload")}else typeof t.payload=="string"?S=Nt.encode(t.payload):S=t.payload;const E={payload:S};return t.protected!==void 0&&(E.protectedHeader=i),t.header!==void 0&&(E.unprotectedHeader=t.header),h?{...E,key:s}:E}async function IC(t,s,n){if(t instanceof Uint8Array&&(t=rn.decode(t)),typeof t!="string")throw new dt("Compact JWS must be a string or Uint8Array");const{0:i,1:a,2:l,length:o}=t.split(".");if(o!==3)throw new dt("Invalid Compact JWS");const u=await oy({payload:a,protected:i,signature:l},s,n),d={payload:u.payload,protectedHeader:u.protectedHeader};return typeof s=="function"?{...d,key:u.key}:d}async function ZN(t,s,n){if(!Pt(t))throw new dt("General JWS must be an object");if(!Array.isArray(t.signatures)||!t.signatures.every(Pt))throw new dt("JWS Signatures missing or incorrect type");for(const i of t.signatures)try{return await oy({header:i.header,payload:t.payload,protected:i.protected,signature:i.signature},s,n)}catch{}throw new Ed}const Js=t=>Math.floor(t.getTime()/1e3),AC=60,NC=AC*60,ay=NC*24,eP=ay*7,tP=ay*365.25,rP=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,Ol=t=>{const s=rP.exec(t);if(!s||s[4]&&s[1])throw new TypeError("Invalid time period format");const n=parseFloat(s[2]),i=s[3].toLowerCase();let a;switch(i){case"sec":case"secs":case"second":case"seconds":case"s":a=Math.round(n);break;case"minute":case"minutes":case"min":case"mins":case"m":a=Math.round(n*AC);break;case"hour":case"hours":case"hr":case"hrs":case"h":a=Math.round(n*NC);break;case"day":case"days":case"d":a=Math.round(n*ay);break;case"week":case"weeks":case"w":a=Math.round(n*eP);break;default:a=Math.round(n*tP);break}return s[1]==="-"||s[4]==="ago"?-a:a},Wx=t=>t.toLowerCase().replace(/^application\//,""),nP=(t,s)=>typeof t=="string"?s.includes(t):Array.isArray(t)?s.some(Set.prototype.has.bind(new Set(t))):!1,ly=(t,s,n={})=>{let i;try{i=JSON.parse(rn.decode(s))}catch{}if(!Pt(i))throw new Er("JWT Claims Set must be a top-level JSON object");const{typ:a}=n;if(a&&(typeof t.typ!="string"||Wx(t.typ)!==Wx(a)))throw new gr('unexpected "typ" JWT header value',i,"typ","check_failed");const{requiredClaims:l=[],issuer:o,subject:u,audience:d,maxTokenAge:h}=n,f=[...l];h!==void 0&&f.push("iat"),d!==void 0&&f.push("aud"),u!==void 0&&f.push("sub"),o!==void 0&&f.push("iss");for(const E of new Set(f.reverse()))if(!(E in i))throw new gr(`missing required "${E}" claim`,i,E,"missing");if(o&&!(Array.isArray(o)?o:[o]).includes(i.iss))throw new gr('unexpected "iss" claim value',i,"iss","check_failed");if(u&&i.sub!==u)throw new gr('unexpected "sub" claim value',i,"sub","check_failed");if(d&&!nP(i.aud,typeof d=="string"?[d]:d))throw new gr('unexpected "aud" claim value',i,"aud","check_failed");let p;switch(typeof n.clockTolerance){case"string":p=Ol(n.clockTolerance);break;case"number":p=n.clockTolerance;break;case"undefined":p=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:y}=n,S=Js(y||new Date);if((i.iat!==void 0||h)&&typeof i.iat!="number")throw new gr('"iat" claim must be a number',i,"iat","invalid");if(i.nbf!==void 0){if(typeof i.nbf!="number")throw new gr('"nbf" claim must be a number',i,"nbf","invalid");if(i.nbf>S+p)throw new gr('"nbf" claim timestamp check failed',i,"nbf","check_failed")}if(i.exp!==void 0){if(typeof i.exp!="number")throw new gr('"exp" claim must be a number',i,"exp","invalid");if(i.exp<=S-p)throw new Fu('"exp" claim timestamp check failed',i,"exp","check_failed")}if(h){const E=S-i.iat,b=typeof h=="number"?h:Ol(h);if(E-p>b)throw new Fu('"iat" claim timestamp check failed (too far in the past)',i,"iat","check_failed");if(E<0-p)throw new gr('"iat" claim timestamp check failed (it should be in the past)',i,"iat","check_failed")}return i};async function sP(t,s,n){const i=await IC(t,s,n);if(i.protectedHeader.crit?.includes("b64")&&i.protectedHeader.b64===!1)throw new Er("JWTs MUST NOT use unencoded payload");const l={payload:ly(i.protectedHeader,i.payload,n),protectedHeader:i.protectedHeader};return typeof s=="function"?{...l,key:i.key}:l}async function iP(t,s,n){const i=await bC(t,s,n),a=ly(i.protectedHeader,i.plaintext,n),{protectedHeader:l}=i;if(l.iss!==void 0&&l.iss!==a.iss)throw new gr('replicated "iss" claim header parameter mismatch',a,"iss","mismatch");if(l.sub!==void 0&&l.sub!==a.sub)throw new gr('replicated "sub" claim header parameter mismatch',a,"sub","mismatch");if(l.aud!==void 0&&JSON.stringify(l.aud)!==JSON.stringify(a.aud))throw new gr('replicated "aud" claim header parameter mismatch',a,"aud","mismatch");const o={payload:a,protectedHeader:l};return typeof s=="function"?{...o,key:i.key}:o}class PC{constructor(s){this._flattened=new Wu(s)}setContentEncryptionKey(s){return this._flattened.setContentEncryptionKey(s),this}setInitializationVector(s){return this._flattened.setInitializationVector(s),this}setProtectedHeader(s){return this._flattened.setProtectedHeader(s),this}setKeyManagementParameters(s){return this._flattened.setKeyManagementParameters(s),this}async encrypt(s,n){const i=await this._flattened.encrypt(s,n);return[i.protected,i.encrypted_key,i.iv,i.ciphertext,i.tag].join(".")}}const oP=async(t,s,n)=>{const i=await kC(t,s,"sign");xd(t,i);const a=await Ze.subtle.sign(RC(t,i.algorithm),i,n);return new Uint8Array(a)};class cy{constructor(s){if(!(s instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=s}setProtectedHeader(s){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=s,this}setUnprotectedHeader(s){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=s,this}async sign(s,n){if(!this._protectedHeader&&!this._unprotectedHeader)throw new dt("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!Kl(this._protectedHeader,this._unprotectedHeader))throw new dt("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const i={...this._protectedHeader,...this._unprotectedHeader},a=Vl(dt,new Map([["b64",!0]]),n?.crit,this._protectedHeader,i);let l=!0;if(a.has("b64")&&(l=this._protectedHeader.b64,typeof l!="boolean"))throw new dt('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:o}=i;if(typeof o!="string"||!o)throw new dt('JWS "alg" (Algorithm) Header Parameter missing or invalid');hg(o,s,"sign");let u=this._payload;l&&(u=Nt.encode(Dt(u)));let d;this._protectedHeader?d=Nt.encode(Dt(JSON.stringify(this._protectedHeader))):d=Nt.encode("");const h=zn(d,Nt.encode("."),u),f=await oP(o,s,h),p={signature:Dt(f),payload:""};return l&&(p.payload=rn.decode(u)),this._unprotectedHeader&&(p.header=this._unprotectedHeader),this._protectedHeader&&(p.protected=rn.decode(d)),p}}class OC{constructor(s){this._flattened=new cy(s)}setProtectedHeader(s){return this._flattened.setProtectedHeader(s),this}async sign(s,n){const i=await this._flattened.sign(s,n);if(i.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${i.protected}.${i.payload}.${i.signature}`}}class aP{constructor(s,n,i){this.parent=s,this.key=n,this.options=i}setProtectedHeader(s){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=s,this}setUnprotectedHeader(s){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=s,this}addSignature(...s){return this.parent.addSignature(...s)}sign(...s){return this.parent.sign(...s)}done(){return this.parent}}class lP{constructor(s){this._signatures=[],this._payload=s}addSignature(s,n){const i=new aP(this,s,n);return this._signatures.push(i),i}async sign(){if(!this._signatures.length)throw new dt("at least one signature must be added");const s={signatures:[],payload:""};for(let n=0;n<this._signatures.length;n++){const i=this._signatures[n],a=new cy(this._payload);a.setProtectedHeader(i.protectedHeader),a.setUnprotectedHeader(i.unprotectedHeader);const{payload:l,...o}=await a.sign(i.key,i.options);if(n===0)s.payload=l;else if(s.payload!==l)throw new dt("inconsistent use of JWS Unencoded Payload (RFC7797)");s.signatures.push(o)}return s}}function ji(t,s){if(!Number.isFinite(s))throw new TypeError(`Invalid ${t} input`);return s}class uy{constructor(s={}){if(!Pt(s))throw new TypeError("JWT Claims Set MUST be an object");this._payload=s}setIssuer(s){return this._payload={...this._payload,iss:s},this}setSubject(s){return this._payload={...this._payload,sub:s},this}setAudience(s){return this._payload={...this._payload,aud:s},this}setJti(s){return this._payload={...this._payload,jti:s},this}setNotBefore(s){return typeof s=="number"?this._payload={...this._payload,nbf:ji("setNotBefore",s)}:s instanceof Date?this._payload={...this._payload,nbf:ji("setNotBefore",Js(s))}:this._payload={...this._payload,nbf:Js(new Date)+Ol(s)},this}setExpirationTime(s){return typeof s=="number"?this._payload={...this._payload,exp:ji("setExpirationTime",s)}:s instanceof Date?this._payload={...this._payload,exp:ji("setExpirationTime",Js(s))}:this._payload={...this._payload,exp:Js(new Date)+Ol(s)},this}setIssuedAt(s){return typeof s>"u"?this._payload={...this._payload,iat:Js(new Date)}:s instanceof Date?this._payload={...this._payload,iat:ji("setIssuedAt",Js(s))}:typeof s=="string"?this._payload={...this._payload,iat:ji("setIssuedAt",Js(new Date)+Ol(s))}:this._payload={...this._payload,iat:ji("setIssuedAt",s)},this}}class cP extends uy{setProtectedHeader(s){return this._protectedHeader=s,this}async sign(s,n){const i=new OC(Nt.encode(JSON.stringify(this._payload)));if(i.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new Er("JWTs MUST NOT use unencoded payload");return i.sign(s,n)}}class uP extends uy{setProtectedHeader(s){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=s,this}setKeyManagementParameters(s){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=s,this}setContentEncryptionKey(s){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=s,this}setInitializationVector(s){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=s,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(s,n){const i=new PC(Nt.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),i.setProtectedHeader(this._protectedHeader),this._iv&&i.setInitializationVector(this._iv),this._cek&&i.setContentEncryptionKey(this._cek),this._keyManagementParameters&&i.setKeyManagementParameters(this._keyManagementParameters),i.encrypt(s,n)}}const Ks=(t,s)=>{if(typeof t!="string"||!t)throw new ty(`${s} missing or invalid`)};async function jC(t,s){if(!Pt(t))throw new TypeError("JWK must be an object");if(s??(s="sha256"),s!=="sha256"&&s!=="sha384"&&s!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let n;switch(t.kty){case"EC":Ks(t.crv,'"crv" (Curve) Parameter'),Ks(t.x,'"x" (X Coordinate) Parameter'),Ks(t.y,'"y" (Y Coordinate) Parameter'),n={crv:t.crv,kty:t.kty,x:t.x,y:t.y};break;case"OKP":Ks(t.crv,'"crv" (Subtype of Key Pair) Parameter'),Ks(t.x,'"x" (Public Key) Parameter'),n={crv:t.crv,kty:t.kty,x:t.x};break;case"RSA":Ks(t.e,'"e" (Exponent) Parameter'),Ks(t.n,'"n" (Modulus) Parameter'),n={e:t.e,kty:t.kty,n:t.n};break;case"oct":Ks(t.k,'"k" (Key Value) Parameter'),n={k:t.k,kty:t.kty};break;default:throw new at('"kty" (Key Type) Parameter missing or unsupported')}const i=Nt.encode(JSON.stringify(n));return Dt(await X1(s,i))}async function dP(t,s){s??(s="sha256");const n=await jC(t,s);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${s.slice(-3)}:${n}`}async function fP(t,s){const n={...t,...s?.header};if(!Pt(n.jwk))throw new dt('"jwk" (JSON Web Key) Header Parameter must be a JSON object');const i=await Wl({...n.jwk,ext:!0},n.alg);if(i instanceof Uint8Array||i.type!=="public")throw new dt('"jwk" (JSON Web Key) Header Parameter must be a public key');return i}function hP(t){switch(typeof t=="string"&&t.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new at('Unsupported "alg" value for a JSON Web Key Set')}}function pP(t){return t&&typeof t=="object"&&Array.isArray(t.keys)&&t.keys.every(mP)}function mP(t){return Pt(t)}function LC(t){return typeof structuredClone=="function"?structuredClone(t):JSON.parse(JSON.stringify(t))}class gP{constructor(s){if(this._cached=new WeakMap,!pP(s))throw new yd("JSON Web Key Set malformed");this._jwks=LC(s)}async getKey(s,n){const{alg:i,kid:a}={...s,...n?.header},l=hP(i),o=this._jwks.keys.filter(h=>{let f=l===h.kty;if(f&&typeof a=="string"&&(f=a===h.kid),f&&typeof h.alg=="string"&&(f=i===h.alg),f&&typeof h.use=="string"&&(f=h.use==="sig"),f&&Array.isArray(h.key_ops)&&(f=h.key_ops.includes("verify")),f)switch(i){case"ES256":f=h.crv==="P-256";break;case"ES256K":f=h.crv==="secp256k1";break;case"ES384":f=h.crv==="P-384";break;case"ES512":f=h.crv==="P-521";break;case"Ed25519":f=h.crv==="Ed25519";break;case"EdDSA":f=h.crv==="Ed25519"||h.crv==="Ed448";break}return f}),{0:u,length:d}=o;if(d===0)throw new vd;if(d!==1){const h=new ry,{_cached:f}=this;throw h[Symbol.asyncIterator]=async function*(){for(const p of o)try{yield await Vx(f,p,i)}catch{}},h}return Vx(this._cached,u,i)}}async function Vx(t,s,n){const i=t.get(s)||t.set(s,{}).get(s);if(i[n]===void 0){const a=await Wl({...s,ext:!0},n);if(a instanceof Uint8Array||a.type!=="public")throw new yd("JSON Web Key Set members must be public keys");i[n]=a}return i[n]}function mg(t){const s=new gP(t),n=async(i,a)=>s.getKey(i,a);return Object.defineProperties(n,{jwks:{value:()=>LC(s._jwks),enumerable:!0,configurable:!1,writable:!1}}),n}const yP=async(t,s,n)=>{let i,a,l=!1;typeof AbortController=="function"&&(i=new AbortController,a=setTimeout(()=>{l=!0,i.abort()},s));const o=await fetch(t.href,{signal:i?i.signal:void 0,redirect:"manual",headers:n.headers}).catch(u=>{throw l?new ny:u});if(a!==void 0&&clearTimeout(a),o.status!==200)throw new Yt("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await o.json()}catch{throw new Yt("Failed to parse the JSON Web Key Set HTTP response as JSON")}};function vP(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}let gg;(typeof navigator>"u"||!navigator.userAgent?.startsWith?.("Mozilla/5.0 "))&&(gg="jose/v5.10.0");const jl=Symbol();function EP(t,s){return!(typeof t!="object"||t===null||!("uat"in t)||typeof t.uat!="number"||Date.now()-t.uat>=s||!("jwks"in t)||!Pt(t.jwks)||!Array.isArray(t.jwks.keys)||!Array.prototype.every.call(t.jwks.keys,Pt))}class wP{constructor(s,n){if(!(s instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(s.href),this._options={agent:n?.agent,headers:n?.headers},this._timeoutDuration=typeof n?.timeoutDuration=="number"?n?.timeoutDuration:5e3,this._cooldownDuration=typeof n?.cooldownDuration=="number"?n?.cooldownDuration:3e4,this._cacheMaxAge=typeof n?.cacheMaxAge=="number"?n?.cacheMaxAge:6e5,n?.[jl]!==void 0&&(this._cache=n?.[jl],EP(n?.[jl],this._cacheMaxAge)&&(this._jwksTimestamp=this._cache.uat,this._local=mg(this._cache.jwks)))}coolingDown(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cooldownDuration:!1}fresh(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cacheMaxAge:!1}async getKey(s,n){(!this._local||!this.fresh())&&await this.reload();try{return await this._local(s,n)}catch(i){if(i instanceof vd&&this.coolingDown()===!1)return await this.reload(),this._local(s,n);throw i}}async reload(){this._pendingFetch&&vP()&&(this._pendingFetch=void 0);const s=new Headers(this._options.headers);gg&&!s.has("User-Agent")&&(s.set("User-Agent",gg),this._options.headers=Object.fromEntries(s.entries())),this._pendingFetch||(this._pendingFetch=yP(this._url,this._timeoutDuration,this._options).then(n=>{this._local=mg(n),this._cache&&(this._cache.uat=Date.now(),this._cache.jwks=n),this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(n=>{throw this._pendingFetch=void 0,n})),await this._pendingFetch}}function SP(t,s){const n=new wP(t,s),i=async(a,l)=>n.getKey(a,l);return Object.defineProperties(i,{coolingDown:{get:()=>n.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>n.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>n.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>!!n._pendingFetch,enumerable:!0,configurable:!1},jwks:{value:()=>n._local?.jwks(),enumerable:!0,configurable:!1,writable:!1}}),i}const xP=jl;class bP extends uy{encode(){const s=Dt(JSON.stringify({alg:"none"})),n=Dt(JSON.stringify(this._payload));return`${s}.${n}.`}static decode(s,n){if(typeof s!="string")throw new Er("Unsecured JWT must be a string");const{0:i,1:a,2:l,length:o}=s.split(".");if(o!==3||l!=="")throw new Er("Invalid Unsecured JWT");let u;try{if(u=JSON.parse(rn.decode(At(i))),u.alg!=="none")throw new Error}catch{throw new Er("Invalid Unsecured JWT")}return{payload:ly(u,At(a),n),header:u}}}const CP=Dt,dy=At,TP=Object.freeze(Object.defineProperty({__proto__:null,decode:dy,encode:CP},Symbol.toStringTag,{value:"Module"}));function _P(t){let s;if(typeof t=="string"){const n=t.split(".");(n.length===3||n.length===5)&&([s]=n)}else if(typeof t=="object"&&t)if("protected"in t)s=t.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof s!="string"||!s)throw new Error;const n=JSON.parse(rn.decode(dy(s)));if(!Pt(n))throw new Error;return n}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}function RP(t){if(typeof t!="string")throw new Er("JWTs must use Compact JWS serialization, JWT must be a string");const{1:s,length:n}=t.split(".");if(n===5)throw new Er("Only JWTs using Compact JWS serialization can be decoded");if(n!==3)throw new Er("Invalid JWT");if(!s)throw new Er("JWTs must contain a payload");let i;try{i=dy(s)}catch{throw new Er("Failed to base64url decode the payload")}let a;try{a=JSON.parse(rn.decode(i))}catch{throw new Er("Failed to parse the decoded payload as JSON")}if(!Pt(a))throw new Er("Invalid JWT Claims Set");return a}async function kP(t,s){let n,i,a;switch(t){case"HS256":case"HS384":case"HS512":n=parseInt(t.slice(-3),10),i={name:"HMAC",hash:`SHA-${n}`,length:n},a=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return n=parseInt(t.slice(-3),10),wd(new Uint8Array(n>>3));case"A128KW":case"A192KW":case"A256KW":n=parseInt(t.slice(1,4),10),i={name:"AES-KW",length:n},a=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":n=parseInt(t.slice(1,4),10),i={name:"AES-GCM",length:n},a=["encrypt","decrypt"];break;default:throw new at('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return Ze.subtle.generateKey(i,s?.extractable??!1,a)}function Vm(t){const s=t?.modulusLength??2048;if(typeof s!="number"||s<2048)throw new at("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return s}async function IP(t,s){let n,i;switch(t){case"PS256":case"PS384":case"PS512":n={name:"RSA-PSS",hash:`SHA-${t.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Vm(s)},i=["sign","verify"];break;case"RS256":case"RS384":case"RS512":n={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${t.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Vm(s)},i=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":n={name:"RSA-OAEP",hash:`SHA-${parseInt(t.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Vm(s)},i=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":n={name:"ECDSA",namedCurve:"P-256"},i=["sign","verify"];break;case"ES384":n={name:"ECDSA",namedCurve:"P-384"},i=["sign","verify"];break;case"ES512":n={name:"ECDSA",namedCurve:"P-521"},i=["sign","verify"];break;case"Ed25519":n={name:"Ed25519"},i=["sign","verify"];break;case"EdDSA":{i=["sign","verify"];const a=s?.crv??"Ed25519";switch(a){case"Ed25519":case"Ed448":n={name:a};break;default:throw new at("Invalid or unsupported crv option provided")}break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{i=["deriveKey","deriveBits"];const a=s?.crv??"P-256";switch(a){case"P-256":case"P-384":case"P-521":{n={name:"ECDH",namedCurve:a};break}case"X25519":case"X448":n={name:a};break;default:throw new at("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new at('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return Ze.subtle.generateKey(n,s?.extractable??!1,i)}async function AP(t,s){return IP(t,s)}async function NP(t,s){return kP(t,s)}const PP="WebCryptoAPI",OP=Object.freeze(Object.defineProperty({__proto__:null,CompactEncrypt:PC,CompactSign:OC,EmbeddedJWK:fP,EncryptJWT:uP,FlattenedEncrypt:Wu,FlattenedSign:cy,GeneralEncrypt:XN,GeneralSign:lP,SignJWT:cP,UnsecuredJWT:bP,base64url:TP,calculateJwkThumbprint:jC,calculateJwkThumbprintUri:dP,compactDecrypt:bC,compactVerify:IC,createLocalJWKSet:mg,createRemoteJWKSet:SP,cryptoRuntime:PP,decodeJwt:RP,decodeProtectedHeader:_P,errors:cN,experimental_jwksCache:xP,exportJWK:TC,exportPKCS8:JN,exportSPKI:GN,flattenedDecrypt:iy,flattenedVerify:oy,generalDecrypt:WN,generalVerify:ZN,generateKeyPair:AP,generateSecret:NP,importJWK:Wl,importPKCS8:$N,importSPKI:DN,importX509:MN,jwksCache:jl,jwtDecrypt:iP,jwtVerify:sP},Symbol.toStringTag,{value:"Module"}));var Gx;function Jx(){if(Gx)return gl;Gx=1,Object.defineProperty(gl,"__esModule",{value:!0}),gl.TokenValidationService=void 0;const t=OP,s=$l();class n{constructor(a){this.jwksCache=new Map,this.JWKS_CACHE_TTL_MS=3600*1e3,this.resultCache=new Map,this.RESULT_CACHE_TTL_MS=60*1e3,this.keycloakConfig=a}setKeycloakConfig(a){this.keycloakConfig=a}async validateTokenLocal(a,l){try{if(!l?.skipResultCache){const u=this.getCachedResult(a);if(u)return{...u,cached:!0}}const o=await this.performValidation(a,l);return!l?.skipResultCache&&this.shouldCacheResult(o)&&this.cacheResult(a,o),o}catch(o){const u=o instanceof Error?o.message:"Token validation failed";return{valid:!1,tokenType:l?.tokenType||"auto",error:u}}}clearCache(a){a?this.jwksCache.delete(a):this.jwksCache.clear()}clearResultCache(){this.resultCache.clear()}clearAllCaches(){this.jwksCache.clear(),this.resultCache.clear()}async performValidation(a,l){const u=(0,t.decodeJwt)(a).iss;return u?this.determineTokenType(u,l?.tokenType)==="keycloak"?this.validateKeycloakToken(a,l):this.validateDelegatedToken(a,u,l):{valid:!1,tokenType:"auto",error:"Token missing issuer (iss) claim"}}determineTokenType(a,l){if(l&&l!=="auto")return l;if(this.keycloakConfig){const u=`${this.keycloakConfig.authServerPublicUrl||this.keycloakConfig.authServerUrl}/realms/${this.keycloakConfig.realm}`;if(a===u)return"keycloak"}return"delegated"}async validateKeycloakToken(a,l){if(!this.keycloakConfig)return{valid:!1,tokenType:"keycloak",error:"Keycloak not configured"};const u=`${(0,s.resolveKeycloakUrl)(this.keycloakConfig)}/realms/${this.keycloakConfig.realm}/protocol/openid-connect/certs`,h=`${this.keycloakConfig.authServerPublicUrl||this.keycloakConfig.authServerUrl}/realms/${this.keycloakConfig.realm}`;try{const f=await this.getJWKS(u),p={issuer:h};this.keycloakConfig.verifyAudience&&this.keycloakConfig.clientId&&!l?.skipAudienceValidation&&(p.audience=this.keycloakConfig.clientId);const{payload:y}=await(0,t.jwtVerify)(a,f,p);return{valid:!0,tokenType:"keycloak",payload:this.mapPayload(y)}}catch(f){return{valid:!1,tokenType:"keycloak",error:f instanceof Error?f.message:"Keycloak token validation failed"}}}async validateDelegatedToken(a,l,o){let u=null;if(typeof o?.delegatedProvider=="function"?u=await o.delegatedProvider(l):o?.delegatedProvider&&(u=o.delegatedProvider),!u)return{valid:!1,tokenType:"delegated",error:`No delegated provider configured for issuer: ${l}`};try{const d=await this.getJWKS(u.jwksUri),h={issuer:u.issuer};!o?.skipAudienceValidation&&u.audience&&(h.audience=u.audience);const{payload:f}=await(0,t.jwtVerify)(a,d,h);return{valid:!0,tokenType:"delegated",providerKey:u.key,payload:this.mapPayload(f)}}catch(d){return{valid:!1,tokenType:"delegated",providerKey:u.key,error:d instanceof Error?d.message:"Delegated token validation failed"}}}mapPayload(a){return{...a,sub:a.sub,iss:a.iss,email:a.email,preferredUsername:a.preferred_username,name:a.name,realmAccess:a.realm_access,resourceAccess:a.resource_access}}async getJWKS(a){const l=this.jwksCache.get(a);if(l&&l.expiresAt>Date.now())return l.keySet;const o=(0,t.createRemoteJWKSet)(new URL(a));return this.jwksCache.set(a,{keySet:o,expiresAt:Date.now()+this.JWKS_CACHE_TTL_MS}),o}getTokenHash(a){return a.length<=32?a:`${a.slice(0,16)}...${a.slice(-16)}`}getCachedResult(a){const l=this.getTokenHash(a),o=this.resultCache.get(l);return o&&o.expiresAt>Date.now()?o.result:(o&&this.resultCache.delete(l),null)}cacheResult(a,l){const o=this.getTokenHash(a);this.resultCache.set(o,{result:l,expiresAt:Date.now()+this.RESULT_CACHE_TTL_MS})}shouldCacheResult(a){return!!(a.valid||a.error?.includes("expired")||a.error?.includes('"exp"')||a.error?.includes("signature")||a.error?.includes("invalid"))}}return gl.TokenValidationService=n,gl}var yl={},vl={},Yx;function jP(){if(Yx)return vl;Yx=1,Object.defineProperty(vl,"__esModule",{value:!0}),vl.EncryptionError=void 0;const t=Lg();class s extends t.MisoClientError{constructor(i,a,l){super(i),this.name="EncryptionError",this.code=a,this.parameterName=l,Error.captureStackTrace&&Error.captureStackTrace(this,s)}}return vl.EncryptionError=s,vl}var Xx;function Qx(){if(Xx)return yl;Xx=1,Object.defineProperty(yl,"__esModule",{value:!0}),yl.EncryptionService=void 0;const t=jP();class s{constructor(i,a){this.apiClient=i,this.encryptionKey=a}async encrypt(i,a){this.validateEncryptionKey(),this.validateParameterName(a);const l=await this.apiClient.encryption.encrypt({plaintext:i,parameterName:a,encryptionKey:this.encryptionKey});return{value:l.value,storage:l.storage}}async decrypt(i,a){return this.validateEncryptionKey(),this.validateParameterName(a),(await this.apiClient.encryption.decrypt({value:i,parameterName:a,encryptionKey:this.encryptionKey})).plaintext}validateEncryptionKey(){if(!this.encryptionKey)throw new t.EncryptionError("Encryption key is required. Set MISO_ENCRYPTION_KEY environment variable or provide encryptionKey in config.","ENCRYPTION_KEY_REQUIRED")}validateParameterName(i){if(!s.PARAMETER_NAME_REGEX.test(i))throw new t.EncryptionError("Invalid parameter name. Must be 1-128 characters, alphanumeric with dots, underscores, hyphens only.","INVALID_PARAMETER_NAME",i)}}return yl.EncryptionService=s,s.PARAMETER_NAME_REGEX=/^[a-zA-Z0-9._-]{1,128}$/,yl}var Hn={},Zx;function eb(){if(Zx)return Hn;Zx=1,Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.LoggerServiceRegistry=void 0,Hn.getLogger=i,Hn.setLoggerContext=a,Hn.clearLoggerContext=l,Hn.mergeLoggerContext=o,Hn.registerLoggerService=u;const t=Wg(),s=Vg();class n{static register(h){n.instance=h}static get(){return n.instance}static clear(){n.instance=null}}Hn.LoggerServiceRegistry=n,n.instance=null;function i(d){const h=s.LoggerContextStorage.getInstance(),f=d||n.get();if(!f)throw new Error("LoggerService not available. Either pass LoggerService to getLogger() or ensure MisoClient is initialized.");return new t.UnifiedLoggerService(f,h)}function a(d){s.LoggerContextStorage.getInstance().setContext(d)}function l(){s.LoggerContextStorage.getInstance().clearContext()}function o(d){s.LoggerContextStorage.getInstance().mergeContext(d)}function u(d){n.register(d)}return Hn}var El={},tb;function DC(){if(tb)return El;tb=1,Object.defineProperty(El,"__esModule",{value:!0}),El.FilterBuilder=void 0;class t{constructor(){this.filters=[]}add(n,i,a){return this.filters.push({field:n,op:i,value:a}),this}addMany(n){return this.filters.push(...n),this}build(){return[...this.filters]}toQueryString(){if(this.filters.length===0)return"";const n={};this.filters.forEach(l=>{n[l.field]||(n[l.field]={}),n[l.field][l.op]=l.value===null?null:l.value});const i=JSON.stringify(n),a=new URLSearchParams;return a.append("filter",i),a.toString()}}return El.FilterBuilder=t,El}var Li={},rb;function MC(){return rb||(rb=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.DefaultOperatorsByType=Li.FilterErrorCode=void 0,Li.FilterErrorCode={UNKNOWN_FIELD:"UNKNOWN_FIELD",INVALID_OPERATOR:"INVALID_OPERATOR",INVALID_TYPE:"INVALID_TYPE",INVALID_UUID:"INVALID_UUID",INVALID_DATE:"INVALID_DATE",INVALID_ENUM:"INVALID_ENUM",INVALID_IN:"INVALID_IN",INVALID_FORMAT:"INVALID_FORMAT"},Li.DefaultOperatorsByType={string:["eq","neq","in","nin","contains","like","ilike"],number:["eq","neq","gt","gte","lt","lte","in","nin"],boolean:["eq"],uuid:["eq","in"],timestamp:["eq","gt","gte","lt","lte"],enum:["eq","in"]}),Li}var wl={},nb;function $C(){if(nb)return wl;nb=1,Object.defineProperty(wl,"__esModule",{value:!0}),wl.BrowserPermissionService=void 0;const t=ad(),s=Bl();class n{constructor(a,l,o){this.config=a.config,this.cache=o,this.httpClient=a,this.apiClient=l,this.permissionTTL=this.config.cache?.permissionTTL||900,this.applicationContextService=new s.ApplicationContextService(a)}extractUserIdFromToken(a){try{const l=(0,t.decodeJWT)(a);return l?l.sub||l.userId||l.user_id||l.id:null}catch{return null}}async getPermissions(a,l){try{let o=this.extractUserIdFromToken(a);const u=o?`permissions:${o}`:null;if(u){const b=await this.cache.get(u);if(b)return b.permissions||[]}if(!o){const b=l||this.config.authStrategy,x=b?{...b,bearerToken:a}:{methods:["bearer"],bearerToken:a};if(o=(await this.apiClient.auth.validateToken({token:a},x)).data?.user?.id||null,!o)return[]}const d=l||this.config.authStrategy,h=d?{...d,bearerToken:a}:{methods:["bearer"],bearerToken:a},f=this.applicationContextService.getApplicationContext(),p=f.environment?{environment:f.environment}:void 0,S=(await this.apiClient.permissions.getPermissions(p,h)).data?.permissions||[],E=`permissions:${o}`;return await this.cache.set(E,{permissions:S,timestamp:Date.now()},this.permissionTTL),S}catch(o){const u=o?.statusCode||o?.response?.status;return console.error("Failed to get permissions:",{method:"GET",path:"/api/auth/permissions",statusCode:u,ipAddress:"unknown",correlationId:o?.correlationId,userId:this.extractUserIdFromToken(a)||void 0,errorMessage:o instanceof Error?o.message:String(o),stackTrace:o instanceof Error?o.stack:void 0}),[]}}async hasPermission(a,l,o){return(await this.getPermissions(a,o)).includes(l)}async hasAnyPermission(a,l,o){const u=await this.getPermissions(a,o);return l.some(d=>u.includes(d))}async hasAllPermissions(a,l,o){const u=await this.getPermissions(a,o);return l.every(d=>u.includes(d))}async refreshPermissions(a,l){try{const o=l||this.config.authStrategy,u=o?{...o,bearerToken:a}:{methods:["bearer"],bearerToken:a},d=await this.apiClient.auth.validateToken({token:a},u);if(!d.data?.user?.id)return[];const f=`permissions:${d.data.user.id}`,p=this.applicationContextService.getApplicationContext(),y=p.environment?{environment:p.environment}:void 0,E=(await this.apiClient.permissions.refreshPermissions(y,u)).data?.permissions||[];return await this.cache.set(f,{permissions:E,timestamp:Date.now()},this.permissionTTL),E}catch(o){const u=o?.statusCode||o?.response?.status;return console.error("Failed to refresh permissions:",{method:"POST",path:"/api/auth/permissions/refresh",statusCode:u,ipAddress:"unknown",correlationId:o?.correlationId,userId:this.extractUserIdFromToken(a)||void 0,errorMessage:o instanceof Error?o.message:String(o),stackTrace:o instanceof Error?o.stack:void 0}),[]}}async clearPermissionsCache(a,l){try{const o=l||this.config.authStrategy,u=o?{...o,bearerToken:a}:{methods:["bearer"],bearerToken:a},d=await this.apiClient.auth.validateToken({token:a},u);if(!d.data?.user?.id)return;const f=`permissions:${d.data.user.id}`;await this.cache.delete(f)}catch(o){const u=o?.statusCode||o?.response?.status;console.error("Failed to clear permissions cache:",{method:"DELETE",path:"/cache/permissions",statusCode:u,ipAddress:"unknown",correlationId:o?.correlationId,userId:this.extractUserIdFromToken(a)||void 0,errorMessage:o instanceof Error?o.message:String(o),stackTrace:o instanceof Error?o.stack:void 0})}}}return wl.BrowserPermissionService=n,wl}var Sl={},sb;function UC(){if(sb)return Sl;sb=1,Object.defineProperty(Sl,"__esModule",{value:!0}),Sl.BrowserRoleService=void 0;const t=ad(),s=Bl();class n{constructor(a,l,o){this.config=a.config,this.cache=o,this.httpClient=a,this.apiClient=l,this.roleTTL=this.config.cache?.roleTTL||900,this.applicationContextService=new s.ApplicationContextService(a)}extractUserIdFromToken(a){try{const l=(0,t.decodeJWT)(a);return l?l.sub||l.userId||l.user_id||l.id:null}catch{return null}}async getRoles(a,l){try{let o=this.extractUserIdFromToken(a);const u=o?`roles:${o}`:null;if(u){const b=await this.cache.get(u);if(b)return b.roles||[]}if(!o){const b=l||this.config.authStrategy,x=b?{...b,bearerToken:a}:{methods:["bearer"],bearerToken:a};if(o=(await this.apiClient.auth.validateToken({token:a},x)).data?.user?.id||null,!o)return[]}const d=l||this.config.authStrategy,h=d?{...d,bearerToken:a}:{methods:["bearer"],bearerToken:a},f=this.applicationContextService.getApplicationContext(),p=f.environment?{environment:f.environment}:void 0,S=(await this.apiClient.roles.getRoles(p,h)).data?.roles||[],E=`roles:${o}`;return await this.cache.set(E,{roles:S,timestamp:Date.now()},this.roleTTL),S}catch(o){const u=o?.statusCode||o?.response?.status;return console.error("Failed to get roles:",{method:"GET",path:"/api/auth/roles",statusCode:u,ipAddress:"unknown",correlationId:o?.correlationId,userId:this.extractUserIdFromToken(a)||void 0,errorMessage:o instanceof Error?o.message:String(o),stackTrace:o instanceof Error?o.stack:void 0}),[]}}async hasRole(a,l,o){return(await this.getRoles(a,o)).includes(l)}async hasAnyRole(a,l,o){const u=await this.getRoles(a,o);return l.some(d=>u.includes(d))}async hasAllRoles(a,l,o){const u=await this.getRoles(a,o);return l.every(d=>u.includes(d))}async refreshRoles(a,l){try{const o=l||this.config.authStrategy,u=o?{...o,bearerToken:a}:{methods:["bearer"],bearerToken:a},d=await this.apiClient.auth.validateToken({token:a},u);if(!d.data?.user?.id)return[];const f=`roles:${d.data.user.id}`,p=this.applicationContextService.getApplicationContext(),y=p.environment?{environment:p.environment}:void 0,E=(await this.apiClient.roles.refreshRoles(y,u)).data?.roles||[];return await this.cache.set(f,{roles:E,timestamp:Date.now()},this.roleTTL),E}catch(o){const u=o?.statusCode||o?.response?.status;return console.error("Failed to refresh roles:",{method:"POST",path:"/api/auth/roles/refresh",statusCode:u,ipAddress:"unknown",correlationId:o?.correlationId,userId:this.extractUserIdFromToken(a)||void 0,errorMessage:o instanceof Error?o.message:String(o),stackTrace:o instanceof Error?o.stack:void 0}),[]}}async clearRolesCache(a,l){try{const o=l||this.config.authStrategy,u=o?{...o,bearerToken:a}:{methods:["bearer"],bearerToken:a},d=await this.apiClient.auth.validateToken({token:a},u);if(!d.data?.user?.id)return;const f=`roles:${d.data.user.id}`;await this.cache.delete(f)}catch(o){const u=o?.statusCode||o?.response?.status;console.error("Failed to clear roles cache:",{method:"DELETE",path:"/cache/roles",statusCode:u,ipAddress:"unknown",correlationId:o?.correlationId,userId:this.extractUserIdFromToken(a)||void 0,errorMessage:o instanceof Error?o.message:String(o),stackTrace:o instanceof Error?o.stack:void 0})}}}return Sl.BrowserRoleService=n,Sl}var Su={},ib;function LP(){if(ib)return Su;ib=1;var t={};Object.defineProperty(Su,"__esModule",{value:!0}),Su.loadConfig=l;function s(){const o=t.REDIS_HOST;if(!o)return;const u={host:o,port:parseInt(t.REDIS_PORT||"6379"),password:t.REDIS_PASSWORD};return t.REDIS_DB&&(u.db=parseInt(t.REDIS_DB)),t.REDIS_KEY_PREFIX&&(u.keyPrefix=t.REDIS_KEY_PREFIX),u}function n(){if(!t.MISO_AUTH_STRATEGY)return;const u=t.MISO_AUTH_STRATEGY.split(",").map(h=>h.trim()).filter(h=>["bearer","client-token","client-credentials","api-key"].includes(h));if(u.length===0)return;const d={methods:u};return t.MISO_BEARER_TOKEN&&(d.bearerToken=t.MISO_BEARER_TOKEN),(t.MISO_API_KEY||t.API_KEY)&&(d.apiKey=t.MISO_API_KEY||t.API_KEY),d}function i(){if(!(!t.KEYCLOAK_SERVER_URL&&!t.KEYCLOAK_PUBLIC_SERVER_URL))return{authServerUrl:t.KEYCLOAK_PUBLIC_SERVER_URL||t.KEYCLOAK_SERVER_URL||"",authServerPrivateUrl:t.KEYCLOAK_SERVER_URL,authServerPublicUrl:t.KEYCLOAK_PUBLIC_SERVER_URL,realm:t.KEYCLOAK_REALM||"",clientId:t.KEYCLOAK_CLIENT_ID,verifyAudience:t.KEYCLOAK_VERIFY_AUDIENCE==="true"}}function a(){if(!t.MISO_ALLOWED_ORIGINS)return;const o=t.MISO_ALLOWED_ORIGINS.split(",").map(u=>u.trim()).filter(u=>u.length>0);return o.length>0?o:void 0}function l(){const o={controllerUrl:t.MISO_CONTROLLER_URL||"https://controller.aifabrix.ai",clientId:t.MISO_CLIENTID||t.MISO_CLIENT_ID||"",clientSecret:t.MISO_CLIENTSECRET||t.MISO_CLIENT_SECRET||"",logLevel:t.MISO_LOG_LEVEL||"debug"};if(t.MISO_WEB_SERVER_URL&&(o.controllerPublicUrl=t.MISO_WEB_SERVER_URL),t.MISO_CONTROLLER_URL&&(o.controllerPrivateUrl=t.MISO_CONTROLLER_URL,o.controllerUrl=t.MISO_CONTROLLER_URL),!o.clientId)throw new Error("MISO_CLIENTID environment variable is required");if(!o.clientSecret)throw new Error("MISO_CLIENTSECRET environment variable is required");const u=s();u&&(o.redis=u),t.API_KEY&&(o.apiKey=t.API_KEY),t.MISO_SENSITIVE_FIELDS_CONFIG&&(o.sensitiveFieldsConfig=t.MISO_SENSITIVE_FIELDS_CONFIG),t.MISO_EMIT_EVENTS&&(o.emitEvents=t.MISO_EMIT_EVENTS.toLowerCase()==="true");const d=n();d&&(o.authStrategy=d),t.MISO_CLIENT_TOKEN_URI&&(o.clientTokenUri=t.MISO_CLIENT_TOKEN_URI);const h=a();h&&(o.allowedOrigins=h),o.validateResponses=t.MISO_VALIDATE_RESPONSES!==void 0?t.MISO_VALIDATE_RESPONSES.toLowerCase()==="true":!1;const f=i();return f&&(o.keycloak=f),t.MISO_ENCRYPTION_KEY&&(o.encryptionKey=t.MISO_ENCRYPTION_KEY),o}return Su}var xu={},ob;function DP(){if(ob)return xu;ob=1,Object.defineProperty(xu,"__esModule",{value:!0}),xu.getEnvironmentToken=i;const t=lg(),s=Qo(),n=zl();async function i(a,l){const o=a.getConfig(),u=o.allowedOrigins,d=(0,t.validateOrigin)(l,u);if(!d.valid){const h=`Origin validation failed: ${d.error}`,f=l.headers.origin||l.headers.referer||"unknown";throw await a.log.forRequest(l).addContext("origin",f).addContext("allowedOrigins",u||[]).addContext("reason","origin_validation_failed").error(h),await a.log.forRequest(l).addContext("reason","origin_validation_failed").addContext("origin",f).addContext("allowedOrigins",u||[]).audit("client.token.request.rejected","environment-token"),new Error(h)}try{(0,n.resolveControllerUrl)(o);const h=await a.getEnvironmentToken(),f=s.DataMasker.maskSensitiveData({clientId:o.clientId}),p=o.clientSecret?s.DataMasker.maskSensitiveData({clientSecret:o.clientSecret}):{clientSecret:void 0};return await a.log.forRequest(l).addContext("clientId",f.clientId).addContext("clientSecret",p.clientSecret).addContext("origin",l.headers.origin||l.headers.referer||"unknown").audit("client.token.request.success","environment-token"),h}catch(h){const f=h instanceof Error?h.message:"Unknown error",p=s.DataMasker.maskSensitiveData({clientId:o.clientId});throw await a.log.forRequest(l).addContext("clientId",p.clientId).addContext("origin",l.headers.origin||l.headers.referer||"unknown").addContext("reason","token_fetch_failed").error(`Failed to get environment token: ${f}`,h instanceof Error?h.stack:void 0),await a.log.forRequest(l).addContext("reason","token_fetch_failed").addContext("error",f).addContext("clientId",p.clientId).addContext("origin",l.headers.origin||l.headers.referer||"unknown").audit("client.token.request.failed","environment-token"),h}}return xu}var Lo={},mr={},ab;function nn(){if(ab)return mr;ab=1;var t=mr&&mr.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(mr,"__esModule",{value:!0}),mr.isBrowser=n,mr.getLocalStorage=i,mr.setLocalStorage=a,mr.removeLocalStorage=l,mr.extractUserIdFromToken=o,mr.generateCacheKey=u,mr.truncatePayload=d,mr.calculateSize=h,mr.isRetryableError=f,mr.calculateBackoffDelay=p;const s=t(Jo());function n(){return typeof globalThis.window<"u"&&typeof globalThis.localStorage<"u"&&typeof globalThis.fetch<"u"}function i(y){if(!n())return null;try{return globalThis.localStorage.getItem(y)}catch{return null}}function a(y,S){if(n())try{globalThis.localStorage.setItem(y,S)}catch{}}function l(y){if(n())try{globalThis.localStorage.removeItem(y)}catch{}}function o(y){try{const S=s.default.decode(y);return S?S.sub||S.userId||S.user_id||S.id:null}catch{return null}}function u(y,S){const E=S?.method||"GET",b=S?.body?JSON.stringify(S.body):"";return`data-client:${E}:${y}:${b}`}function d(y,S){const E=JSON.stringify(y);return E.length<=S?{data:y,truncated:!1}:{data:{_message:"Payload truncated for performance",_size:E.length},truncated:!0}}function h(y){try{return JSON.stringify(y).length}catch{return 0}}function f(y,S){return!y||y>=500||y===408||y===429?!0:(y===401||y===403||y>=400&&y<500,!1)}function p(y,S,E){return Math.min(S*Math.pow(2,y),E)+Math.random()*1e3}return mr}var lb;function qC(){if(lb)return Lo;lb=1;var t=Lo&&Lo.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.extractClientTokenInfo=a;const s=t(Jo()),n=nn();function i(l){if((0,n.isBrowser)())try{const o=l.split(".");if(o.length!==3)return null;let u=o[1];for(;u.length%4;)u+="=";return u=u.replace(/-/g,"+").replace(/_/g,"/"),JSON.parse(atob(u))}catch(o){return console.warn("[decodeJWT] Browser decode failed:",o),null}else try{return s.default.decode(l)}catch(o){return console.warn("[decodeJWT] Node.js decode failed:",o),null}}function a(l){try{const o=i(l);if(!o||typeof o!="object")return console.warn("[extractClientTokenInfo] Failed to decode client token: Invalid token format"),{};const u={};return o.application&&typeof o.application=="string"?u.application=o.application:o.app&&typeof o.app=="string"&&(u.application=o.app),o.environment&&typeof o.environment=="string"?u.environment=o.environment:o.env&&typeof o.env=="string"?u.environment=o.env:o.environmentKey&&typeof o.environmentKey=="string"&&(u.environment=o.environmentKey),o.applicationId&&typeof o.applicationId=="string"?u.applicationId=o.applicationId:o.app_id&&typeof o.app_id=="string"&&(u.applicationId=o.app_id),o.clientId&&typeof o.clientId=="string"?u.clientId=o.clientId:o.client_id&&typeof o.client_id=="string"&&(u.clientId=o.client_id),u}catch(o){return console.warn("[extractClientTokenInfo] Failed to decode client token:",o instanceof Error?o.message:o),{}}}return Lo}var bu={},cb;function MP(){if(cb)return bu;cb=1,Object.defineProperty(bu,"__esModule",{value:!0}),bu.extractLoggingContext=t;function t(s){const n={};return s.source&&(n.sourceKey=s.source.key,s.source.displayName!==void 0&&(n.sourceDisplayName=s.source.displayName),s.source.externalSystem&&(n.externalSystemKey=s.source.externalSystem.key,s.source.externalSystem.displayName!==void 0&&(n.externalSystemDisplayName=s.source.externalSystem.displayName))),s.externalSystem&&(n.externalSystemKey=s.externalSystem.key,s.externalSystem.displayName!==void 0&&(n.externalSystemDisplayName=s.externalSystem.displayName)),s.record&&(n.recordKey=s.record.key,s.record.displayName!==void 0&&(n.recordDisplayName=s.record.displayName)),n}return bu}var Do={},ub;function $P(){if(ub)return Do;ub=1;var t=Do&&Do.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Do,"__esModule",{value:!0}),Do.extractRequestContext=i;const s=t(Jo());function n(a){const o=(a.headers||{}).authorization;if(!o?.startsWith("Bearer "))return{};try{const u=o.substring(7),d=s.default.decode(u);return d?{userId:d.sub||d.userId||d.user_id||d.id,sessionId:d.sessionId||d.sid}:{}}catch{return{}}}function i(a){const l=a.headers||{},o=a.ip||l["x-forwarded-for"]?.split(",")[0]?.trim()||a.socket?.remoteAddress,u=l["x-correlation-id"]||l["x-request-id"]||l["request-id"],{userId:d,sessionId:h}=n(a);return{ipAddress:o,method:a.method,path:a.originalUrl||a.path,userAgent:l["user-agent"],correlationId:u,referer:l.referer,userId:d,sessionId:h,requestId:l["x-request-id"],requestSize:l["content-length"]?parseInt(l["content-length"],10):void 0}}return Do}var Di={},db;function UP(){if(db)return Di;db=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.parsePaginationParams=t,Di.createMetaObject=s,Di.applyPaginationToArray=n,Di.createPaginatedListResponse=i;function t(a){const l=parseInt(String(a.page??"1"),10),o=parseInt(String(a.page_size??"20"),10);return{currentPage:l,pageSize:o}}function s(a,l,o,u){return{totalItems:a,currentPage:l,pageSize:o,type:u}}function n(a,l,o){const u=(l-1)*o;return a.slice(u,u+o)}function i(a,l,o,u,d){return{meta:s(l,o,u,d),data:a}}return Di}var Gm={},Mo={},fb;function qP(){if(fb)return Mo;fb=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.normalizeOperator=t,Mo.isColonFormat=s,Mo.parseColonFilter=n;function t(i){return{equals:"eq",notEquals:"neq",">":"gt","<":"lt",">=":"gte","<=":"lte",equal:"eq",notEqual:"neq",greaterThan:"gt",lessThan:"lt",greaterThanOrEqual:"gte",lessThanOrEqual:"lte"}[i.toLowerCase()]||i}function s(i){if(!i||!i.includes(":"))return!1;const a=i.trim();return!a.startsWith("{")&&!a.startsWith("[")}function n(i){const a=i.indexOf(":");if(a===-1)throw new Error(`Invalid colon filter format: missing operator. Got: "${i}". Expected: "field:op:value"`);const l=i.substring(0,a);if(!l)throw new Error(`Invalid colon filter format: missing field name. Got: "${i}". Expected: "field:op:value"`);const o=i.substring(a+1),u=o.indexOf(":");let d,h;if(u===-1?(d=o,h=""):(d=o.substring(0,u),h=o.substring(u+1)),!d)throw new Error(`Invalid colon filter format: missing operator. Got: "${i}". Expected: "field:op:value"`);const f=t(d);let p;if(f==="isNull"||f==="isNotNull")p=null;else if(f==="in"||f==="nin")h?p=h.split(",").map(y=>{const S=y.trim(),E=Number(S);return!isNaN(E)&&S!==""?E:S}):p=[];else{if(h==="")throw new Error(`Invalid colon filter format: missing value for operator '${f}'. Got: "${i}". Expected: "field:${f}:value"`);if(h==="true")p=!0;else if(h==="false")p=!1;else if(h==="null")p=null;else{const y=Number(h);p=!isNaN(y)&&h!==""?y:h}}return{field:l,op:f,value:p}}return Mo}var hb;function FP(){return hb||(hb=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FilterBuilder=void 0,t.parseFilterParams=l,t.buildQueryString=o,t.applyFilters=u,t.validateJsonFilter=d,t.filterQueryToJson=h,t.jsonToFilterQuery=f;const s=DC();Object.defineProperty(t,"FilterBuilder",{enumerable:!0,get:function(){return s.FilterBuilder}});const n=qP();function i(p,y){if((p==="in"||p==="nin")&&!Array.isArray(y))throw new Error(`Operator '${p}' requires array value, got ${typeof y}. Example: {"field": {"${p}": ["value1", "value2"]}}`);if((p==="isNull"||p==="isNotNull")&&y!==null)throw new Error(`Operator '${p}' requires null value, got ${typeof y}. Example: {"field": {"${p}": null}}`)}function a(p){const y=[];for(const[S,E]of Object.entries(p)){if(!S||typeof S!="string")throw new Error(`Invalid filter format. Field names must be non-empty strings. Got: ${typeof S}`);if(typeof E!="object"||E===null||Array.isArray(E))throw new Error(`Field '${S}' must have operator dictionary, got ${typeof E}. Expected format: {"${S}": {"op": value}}`);const b=E;for(const[x,v]of Object.entries(b)){const C=(0,n.normalizeOperator)(x);i(C,v);let _;C==="isNull"||C==="isNotNull"?_=null:(Array.isArray(v),_=v),y.push({field:S,op:C,value:_})}}return y}function l(p){const y=p.filter;if(!y)return[];try{if(typeof y=="object"&&!Array.isArray(y)&&y!==null)return a(y);if(typeof y=="string"){if((0,n.isColonFormat)(y))return[(0,n.parseColonFilter)(y)];try{const S=decodeURIComponent(y),E=JSON.parse(S);if(Array.isArray(E)){const b=[];for(const x of E)typeof x=="object"&&x!==null&&b.push(...a(x));return b}return a(E)}catch{try{const S=JSON.parse(y);if(Array.isArray(S)){const E=[];for(const b of S)typeof b=="object"&&b!==null&&E.push(...a(b));return E}return a(S)}catch{if(y.includes(":"))return[(0,n.parseColonFilter)(y)];throw new Error(`Could not parse filter string: "${y}"`)}}}if(Array.isArray(y)){const S=[];for(const E of y)if(typeof E=="string")if((0,n.isColonFormat)(E))S.push((0,n.parseColonFilter)(E));else try{const b=decodeURIComponent(E),x=JSON.parse(b);S.push(...a(x))}catch{try{const b=JSON.parse(E);S.push(...a(b))}catch{if(E.includes(":"))S.push((0,n.parseColonFilter)(E));else throw new Error(`Could not parse filter item: "${E}"`)}}else typeof E=="object"&&E!==null&&S.push(...a(E));return S}throw new Error(`Invalid filter format. Expected object, string, or array, got ${typeof y}.`)}catch(S){throw S instanceof Error?new Error(`Invalid filter format. ${S.message}`):new Error(`Invalid filter format. Got: ${typeof y}`)}}function o(p){const y=new URLSearchParams;if(p.filters&&p.filters.length>0){const S={};for(const b of p.filters)S[b.field]||(S[b.field]={}),S[b.field][b.op]=b.value===null?null:b.value;const E=JSON.stringify(S);y.append("filter",E)}return p.sort?.forEach(S=>y.append("sort",S)),p.page&&y.append("page",p.page.toString()),p.pageSize&&y.append("page_size",p.pageSize.toString()),p.fields&&p.fields.length>0&&y.append("fields",p.fields.join(",")),y.toString()}function u(p,y){return p.filter(S=>y.every(E=>{const b=S[E.field],x=E.value;if(E.op==="isNull")return b==null;if(E.op==="isNotNull")return b!=null;if(Array.isArray(x))return E.op==="in"?x.includes(b):!x.includes(b);switch(E.op){case"eq":return b===x;case"neq":return b!==x;case"gt":return b>x;case"lt":return b<x;case"gte":return b>=x;case"lte":return b<=x;case"contains":return String(b).includes(String(x));case"like":case"ilike":return new RegExp(String(x),"i").test(String(b));default:return!0}}))}function d(p){if(typeof p!="object"||p===null||Array.isArray(p))throw new Error(`Invalid filter format. Expected object, got ${typeof p}. Example: {"field": {"op": value}}`);const y=p;for(const[S,E]of Object.entries(y)){if(!S||typeof S!="string")throw new Error(`Invalid filter format. Field names must be non-empty strings. Got: ${typeof S}`);if(typeof E!="object"||E===null||Array.isArray(E))throw new Error(`Field '${S}' must have operator dictionary, got ${typeof E}. Expected format: {"${S}": {"op": value}}`);const b=E;for(const[x,v]of Object.entries(b)){const C=(0,n.normalizeOperator)(x);i(C,v)}}}function h(p){const y={};if(p.filters)for(const S of p.filters)y[S.field]||(y[S.field]={}),y[S.field][S.op]=S.value;return y}function f(p){return{filters:a(p)}}})(Gm)),Gm}var Bn={},pb;function HP(){if(pb)return Bn;pb=1,Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.createFilterError=s,Bn.coerceValue=a,Bn.validateFilter=l,Bn.validateFilters=d,Bn.compileFilter=f,Bn.createFilterSchema=p,Bn.loadFilterSchema=y;const t=MC();function s(x,v,C){return{code:x,message:v,...C}}function n(x){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(x)}function i(x){const v=new Date(x);return!isNaN(v.getTime())}function a(x,v){if(x===null)return null;switch(v.type){case"number":{if(Array.isArray(x))return x.map(_=>{const R=Number(_);if(isNaN(R))throw new Error(`Cannot coerce "${_}" to number`);return R});const C=Number(x);if(isNaN(C))throw new Error(`Cannot coerce "${x}" to number`);return C}case"boolean":{if(typeof x=="boolean")return x;if(x==="true"||x==="1")return!0;if(x==="false"||x==="0")return!1;throw new Error(`Cannot coerce "${x}" to boolean`)}case"timestamp":{if(typeof x=="string"){const C=new Date(x);if(isNaN(C.getTime()))throw new Error(`Cannot coerce "${x}" to timestamp`);return C.toISOString()}return x}case"uuid":case"string":case"enum":default:return x}}function l(x,v){const C=v.fields[x.field];if(!C)return s(t.FilterErrorCode.UNKNOWN_FIELD,`Field '${x.field}' is not allowed for filtering on '${v.resource}'`,{field:x.field});if(!C.operators.includes(x.op))return s(t.FilterErrorCode.INVALID_OPERATOR,`Operator '${x.op}' is not allowed for field '${x.field}'`,{field:x.field,operator:x.op,allowedOperators:C.operators});if(x.op==="isNull"||x.op==="isNotNull")return null;const _=o(x.value,C,x.field,x.op);return _||null}function o(x,v,C,_){if(x===null)return null;if(_==="in"||_==="nin"){if(!Array.isArray(x))return s(t.FilterErrorCode.INVALID_IN,`Operator '${_}' requires an array value for field '${C}'`,{field:C,operator:_,value:x});if(x.length===0)return s(t.FilterErrorCode.INVALID_IN,`Operator '${_}' requires a non-empty array for field '${C}'`,{field:C,operator:_,value:x});for(const R of x){const D=u(R,v,C);if(D)return D}return null}return u(x,v,C)}function u(x,v,C){switch(v.type){case"uuid":if(typeof x!="string"||!n(x))return s(t.FilterErrorCode.INVALID_UUID,`Invalid UUID value for field '${C}': ${x}`,{field:C,value:x});break;case"timestamp":if(typeof x!="string"||!i(x))return s(t.FilterErrorCode.INVALID_DATE,`Invalid timestamp value for field '${C}': ${x}`,{field:C,value:x});break;case"number":if(typeof x!="number"&&isNaN(Number(x)))return s(t.FilterErrorCode.INVALID_TYPE,`Expected number for field '${C}', got ${typeof x}`,{field:C,value:x});break;case"boolean":if(typeof x!="boolean"&&x!=="true"&&x!=="false")return s(t.FilterErrorCode.INVALID_TYPE,`Expected boolean for field '${C}', got ${typeof x}`,{field:C,value:x});break;case"enum":if(v.enumValues&&!v.enumValues.includes(String(x)))return s(t.FilterErrorCode.INVALID_ENUM,`Invalid value '${x}' for field '${C}'. Allowed: ${v.enumValues.join(", ")}`,{field:C,value:x,allowedValues:v.enumValues});break}return null}function d(x,v){const C=[];for(const _ of x){const R=l(_,v);R&&C.push(R)}return{valid:C.length===0,errors:C}}function h(x,v,C){switch(x){case"eq":return{sql:`${v} = $${C}`,hasParam:!0};case"neq":return{sql:`${v} != $${C}`,hasParam:!0};case"gt":return{sql:`${v} > $${C}`,hasParam:!0};case"gte":return{sql:`${v} >= $${C}`,hasParam:!0};case"lt":return{sql:`${v} < $${C}`,hasParam:!0};case"lte":return{sql:`${v} <= $${C}`,hasParam:!0};case"in":return{sql:`${v} = ANY($${C})`,hasParam:!0};case"nin":return{sql:`${v} != ALL($${C})`,hasParam:!0};case"like":return{sql:`${v} LIKE $${C}`,hasParam:!0};case"ilike":return{sql:`${v} ILIKE $${C}`,hasParam:!0};case"contains":return{sql:`${v} ILIKE $${C}`,hasParam:!0};case"isNull":return{sql:`${v} IS NULL`,hasParam:!1};case"isNotNull":return{sql:`${v} IS NOT NULL`,hasParam:!1};default:return{sql:`${v} = $${C}`,hasParam:!0}}}function f(x,v,C="and"){if(x.length===0)return{sql:"",params:[]};const _=[],R=[];for(const A of x){const j=v.fields[A.field];if(!j)throw new Error(`Unknown field '${A.field}' in schema '${v.resource}'`);const k=j.column;let K=A.value;try{K=a(K,j)}catch{}A.op==="contains"&&typeof K=="string"&&(K=`%${K}%`);const Z=_.length+1,{sql:ie,hasParam:ce}=h(A.op,k,Z);R.push(ie),ce&&_.push(K)}const D=C==="or"?" OR ":" AND ";return{sql:R.join(D),params:_}}function p(x,v,C){const _={};for(const[R,D]of Object.entries(v))_[R]={...D,operators:D.operators||t.DefaultOperatorsByType[D.type]};return{resource:x,version:C,fields:_}}function y(x){const v=S(x),C=E(v.fields);return{resource:v.resource,version:typeof v.version=="string"?v.version:void 0,fields:C}}function S(x){if(typeof x!="object"||x===null)throw new Error("Invalid filter schema: expected object");const v=x;if(typeof v.resource!="string")throw new Error("Invalid filter schema: missing 'resource' field");if(typeof v.fields!="object"||v.fields===null)throw new Error("Invalid filter schema: missing 'fields' object");return{resource:v.resource,version:typeof v.version=="string"?v.version:void 0,fields:v.fields}}function E(x){const v={};for(const[C,_]of Object.entries(x))v[C]=b(C,_);return v}function b(x,v){if(typeof v!="object"||v===null)throw new Error(`Invalid filter schema: field '${x}' must be an object`);const C=v;if(typeof C.column!="string")throw new Error(`Invalid filter schema: field '${x}' missing 'column'`);if(typeof C.type!="string")throw new Error(`Invalid filter schema: field '${x}' missing 'type'`);if(!Array.isArray(C.operators))throw new Error(`Invalid filter schema: field '${x}' missing 'operators' array`);return{column:C.column,type:C.type,operators:C.operators,enumValues:Array.isArray(C.enumValues)?C.enumValues:void 0,nullable:typeof C.nullable=="boolean"?C.nullable:void 0,description:typeof C.description=="string"?C.description:void 0}}return Bn}var $o={},mb;function BP(){if(mb)return $o;mb=1,Object.defineProperty($o,"__esModule",{value:!0}),$o.parseSortParams=t,$o.buildSortString=s,$o.applySorting=n;function t(i){const a=i.sort;return(Array.isArray(a)?a:a?[a]:[]).map(o=>{const u=String(o).trim();if(!u||u==="-"||u===":")return null;if(u.includes(":")){const[d,h]=u.split(":"),f=d.trim();return f?{field:f,order:h?.trim().toLowerCase()==="desc"?"desc":"asc"}:null}if(u.startsWith("-")){const d=u.substring(1).trim();return d?{field:d,order:"desc"}:null}return{field:u,order:"asc"}}).filter(o=>o!==null)}function s(i){return i.map(a=>a.order==="desc"?`-${a.field}`:a.field)}function n(i,a){return!a||a.length===0?i:[...i].sort((l,o)=>{for(const u of a){const d=l[u.field],h=o[u.field];if(d==null)return 1;if(h==null)return-1;if(d<h)return u.order==="asc"?-1:1;if(d>h)return u.order==="asc"?1:-1}return 0})}return $o}var xl={},gb;function zP(){if(gb)return xl;gb=1,Object.defineProperty(xl,"__esModule",{value:!0}),xl.EncryptionError=void 0;const t=Xo();class s extends t.MisoClientError{constructor(i,a,l){super(i),this.name="EncryptionError",this.code=a,this.parameterName=l,Error.captureStackTrace&&Error.captureStackTrace(this,s)}}return xl.EncryptionError=s,xl}var Jm={},bl={},Mi={},yb;function KP(){if(yb)return Mi;yb=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.parsePaginationParams=t,Mi.createMetaObject=s,Mi.applyPaginationToArray=n,Mi.createPaginatedListResponse=i;function t(a){const l=parseInt(String(a.page??"1"),10),o=parseInt(String(a.page_size??"20"),10);return{currentPage:l,pageSize:o}}function s(a,l,o,u){return{totalItems:a,currentPage:l,pageSize:o,type:u}}function n(a,l,o){const u=(l-1)*o;return a.slice(u,u+o)}function i(a,l,o,u,d){return{meta:s(l,o,u,d),data:a}}return Mi}var fs={},vb;function bd(){if(vb)return fs;vb=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.createErrorResponse=fs.createSuccessResponse=fs.AppError=void 0;const t={400:"/Errors/BadRequest",401:"/Errors/Unauthorized",403:"/Errors/Forbidden",404:"/Errors/NotFound",405:"/Errors/MethodNotAllowed",409:"/Errors/Conflict",422:"/Errors/UnprocessableEntity",429:"/Errors/TooManyRequests",500:"/Errors/InternalServerError",503:"/Errors/ServiceUnavailable"},s={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",409:"Conflict",422:"Unprocessable Entity",429:"Too Many Requests",500:"Internal Server Error",503:"Service Unavailable"};class n extends Error{constructor(o,u=500,d=!0,h,f,p,y){super(o),this.statusCode=u,this.isOperational=d,this.validationErrors=h||[],this.errorType=f,this.instance=p,this.correlationId=y,Error.captureStackTrace(this,this.constructor)}toErrorResponse(o){return{type:this.errorType||t[this.statusCode]||"/Errors/InternalServerError",title:s[this.statusCode]||"Internal Server Error",status:this.statusCode,detail:this.message,instance:this.instance||o,correlationId:this.correlationId,errors:this.validationErrors&&this.validationErrors.length>0?this.validationErrors:void 0}}}fs.AppError=n;const i=(l,o,u)=>{const d={success:!0,data:l,timestamp:new Date().toISOString()};return o&&(d.message=o),u&&(d.correlationId=u),d};fs.createSuccessResponse=i;const a=(l,o)=>{const u={success:!1,error:l,timestamp:new Date().toISOString()};return o&&(u.correlationId=o),u};return fs.createErrorResponse=a,fs}var Eb;function FC(){if(Eb)return bl;Eb=1,Object.defineProperty(bl,"__esModule",{value:!0}),bl.ResponseHelper=void 0;const t=KP(),s=bd();class n{static success(a,l,o,u=200){const d={success:!0,data:l,timestamp:new Date().toISOString()};return o&&(d.message=o),a.status(u).json(d)}static created(a,l,o="Resource created"){return n.success(a,l,o,201)}static paginated(a,l,o){const u=(0,t.createPaginatedListResponse)(l,o.totalItems,o.currentPage,o.pageSize,o.type);return a.status(200).json(u)}static noContent(a){return a.status(204).send()}static accepted(a,l,o="Request accepted"){return n.success(a,l,o,202)}static error(a,l=400,o=!0,u,d){throw new s.AppError(a,l,o,u,d)}}return bl.ResponseHelper=n,bl}var Cu={},wb;function WP(){if(wb)return Cu;wb=1,Object.defineProperty(Cu,"__esModule",{value:!0}),Cu.injectResponseHelpers=s;const t=FC();function s(n,i,a){i.success=(l,o)=>t.ResponseHelper.success(i,l,o),i.created=(l,o)=>t.ResponseHelper.created(i,l,o),i.paginated=(l,o)=>t.ResponseHelper.paginated(i,l,o),i.noContent=()=>t.ResponseHelper.noContent(i),i.accepted=(l,o)=>t.ResponseHelper.accepted(i,l,o),a()}return Cu}var Cl={},Tl={},$i={},Sb;function Cd(){if(Sb)return $i;Sb=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.getErrorTypeUri=s,$i.getErrorTitle=n,$i.createErrorResponse=i,$i.sendErrorResponse=a;const t={400:"/Errors/BadRequest",401:"/Errors/Unauthorized",403:"/Errors/Forbidden",404:"/Errors/NotFound",405:"/Errors/MethodNotAllowed",409:"/Errors/Conflict",422:"/Errors/UnprocessableEntity",429:"/Errors/TooManyRequests",500:"/Errors/InternalServerError",503:"/Errors/ServiceUnavailable",504:"/Errors/GatewayTimeout"};function s(l){return t[l]||"/Errors/InternalServerError"}function n(l){return{400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",409:"Conflict",422:"Unprocessable Entity",429:"Too Many Requests",500:"Internal Server Error",503:"Service Unavailable",504:"Gateway Timeout"}[l]||"Internal Server Error"}function i(l,o,u,d,h){let f;l instanceof Error?f=l.message:typeof l=="string"?f=l:l==null?f="An error occurred":f=String(l)||"An error occurred";const p=d||u?.correlationId||u?.headers["x-correlation-id"],y={type:s(o),title:n(o),status:o,detail:f,instance:u?.originalUrl};return p&&(y.correlationId=p),h&&h.length>0&&(y.errors=h),y}function a(l,o){l.setHeader("Content-Type","application/problem+json"),l.status(o.status).json(o)}return $i}var Tu={},En={},xb;function VP(){if(xb)return En;xb=1,Object.defineProperty(En,"__esModule",{value:!0}),En.AuthenticationError=En.TimeoutError=En.NetworkError=En.ApiError=void 0;class t extends Error{constructor(l,o,u,d){super(l),this.name="ApiError",this.statusCode=o,this.response=u,this.originalError=d,Error.captureStackTrace&&Error.captureStackTrace(this,t)}}En.ApiError=t;class s extends t{constructor(l,o){super(l,0,void 0,o),this.name="NetworkError"}}En.NetworkError=s;class n extends t{constructor(l,o){super(l,408),this.name="TimeoutError"}}En.TimeoutError=n;class i extends t{constructor(l,o){super(l,401,o),this.name="AuthenticationError"}}return En.AuthenticationError=i,En}var bb;function GP(){if(bb)return Tu;bb=1,Object.defineProperty(Tu,"__esModule",{value:!0}),Tu.extractErrorInfo=n;const t=Lg(),s=VP();function n(i,a){const l={errorType:"Unknown",errorName:"Error",message:"Unknown error",endpoint:a?.endpoint,method:a?.method,correlationId:a?.correlationId};if(i instanceof t.MisoClientError)l.errorType="MisoClientError",l.errorName=i.name,l.message=i.message,l.statusCode=i.statusCode,l.stackTrace=i.stack,i.errorResponse&&"correlationId"in i.errorResponse&&(l.correlationId=l.correlationId||i.errorResponse.correlationId),i.errorResponse?l.responseBody={errors:i.errorResponse.errors,type:i.errorResponse.type,title:i.errorResponse.title,statusCode:i.errorResponse.statusCode,instance:i.errorResponse.instance,correlationId:i.errorResponse.correlationId}:i.errorBody&&(l.responseBody=i.errorBody);else if(i instanceof s.ApiError){if(l.errorType=i.name,l.errorName=i.name,l.message=i.message,l.statusCode=i.statusCode,l.stackTrace=i.stack,l.originalError=i.originalError,i.response)try{l.responseBody={status:i.statusCode,message:i.message}}catch{}}else i instanceof s.AuthenticationError?(l.errorType="AuthenticationError",l.errorName=i.name,l.message=i.message,l.statusCode=401,l.stackTrace=i.stack):i instanceof s.NetworkError?(l.errorType="NetworkError",l.errorName=i.name,l.message=i.message,l.statusCode=0,l.stackTrace=i.stack):i instanceof s.TimeoutError?(l.errorType="TimeoutError",l.errorName=i.name,l.message=i.message,l.statusCode=408,l.stackTrace=i.stack):i instanceof Error?(l.errorType="Error",l.errorName=i.name,l.message=i.message,l.stackTrace=i.stack):(l.errorType="Unknown",l.errorName="UnknownError",l.message=typeof i=="string"?i:i&&typeof i=="object"&&"message"in i?String(i.message):"Unknown error occurred");return l}return Tu}var _u={},Cb;function JP(){if(Cb)return _u;Cb=1,Object.defineProperty(_u,"__esModule",{value:!0}),_u.logErrorWithContext=t;function t(s,n="[MisoClient]"){const i=s.correlationId||"no-correlation-id",a=[];a.push(`${s.errorName}: ${s.message}`),s.statusCode!==void 0&&a.push(`Status: ${s.statusCode}`),s.endpoint&&s.method?a.push(`Endpoint: ${s.method} ${s.endpoint}`):s.endpoint?a.push(`Endpoint: ${s.endpoint}`):s.method&&a.push(`Method: ${s.method}`);const l=a.join(" | ");console.error(`${n} [${i}] ${l}`),s.responseBody&&console.error(`${n} [${i}] Response Body:`,JSON.stringify(s.responseBody,null,2)),s.stackTrace&&console.error(`${n} [${i}] Stack Trace:`,s.stackTrace),s.originalError&&console.error(`${n} [${i}] Original Error:`,s.originalError)}return _u}var Tb;function HC(){if(Tb)return Tl;Tb=1,Object.defineProperty(Tl,"__esModule",{value:!0}),Tl.setErrorLogger=o,Tl.handleRouteError=E;const t=bd(),s=Cd(),n=GP(),i=JP(),a=gd();let l=null;function o(b){l=b}const u={P2002:409,P2025:404,P2003:400},d=[{pattern:/not found/i,status:404},{pattern:/already exists|duplicate/i,status:409},{pattern:/validation|invalid/i,status:400},{pattern:/unauthorized|authentication/i,status:401},{pattern:/forbidden|permission/i,status:403}];function h(b){if(b instanceof t.AppError)return b.statusCode;if(b&&typeof b=="object"&&"code"in b){const v=u[b.code];if(v)return v}const x=b instanceof Error?b.message:String(b||"");for(const{pattern:v,status:C}of d)if(v.test(x))return C;return 500}function f(b){return b instanceof Error?b.message:typeof b=="string"?b:"An unexpected error occurred"}function p(){const b=Date.now(),x=Math.random().toString(36).substring(2,8);return`express-${b}-${x}`}function y(b,x,v,C){let _;return b instanceof t.AppError&&b.validationErrors&&(_=b.validationErrors),(0,s.createErrorResponse)(b,x,v,C,_)}async function S(b,x,v,C,_,R,D){if((0,i.logErrorWithContext)(x,"[Express]"),l)try{await l.logError(v,{req:C,correlationId:x.correlationId||_,operation:D,statusCode:x.statusCode||R,url:C.originalUrl,method:C.method,errorMessage:x.message,errorName:x.errorName,errorType:x.errorType,stack:x.stackTrace})}catch(A){const j=A instanceof Error?A:new Error(String(A));process.stderr.write(`[ERROR] Failed to log error: ${j.message}
`),process.stderr.write(`[ERROR] Original error: ${f(b)}
`)}else process.stderr.write(`[ERROR] ${v}
`),b instanceof Error&&b.stack&&process.stderr.write(`[ERROR] Stack: ${b.stack}
`)}async function E(b,x,v,C){const _=(0,a.extractRequestContext)(x),R=x.correlationId||_.correlationId||p(),D=h(b),A=f(b),j=C||"unknown operation",k=(0,n.extractErrorInfo)(b,{endpoint:x.originalUrl||x.path,method:x.method,correlationId:R});await S(b,k,`${j} failed: ${A}`,x,R,D,j);const K=y(b,D,x,R);b instanceof t.AppError&&b.correlationId&&(K.correlationId=b.correlationId),(0,s.sendErrorResponse)(v,K)}return Tl}var _b;function YP(){if(_b)return Cl;_b=1,Object.defineProperty(Cl,"__esModule",{value:!0}),Cl.asyncHandler=s,Cl.asyncHandlerNamed=n;const t=HC();function s(i,a){return async(l,o,u)=>{try{await i(l,o,u)}catch(d){const h=a||`${l.method} ${l.route?.path||l.path}`;await(0,t.handleRouteError)(d,l,o,h)}}}function n(i,a){return s(a,i)}return Cl}var _l={},Rb;function XP(){if(Rb)return _l;Rb=1,Object.defineProperty(_l,"__esModule",{value:!0}),_l.ValidationHelper=void 0;const t=bd();class s{static async findOrFail(i,a,l){const o=await i();if(!o)throw new t.AppError(`${a} not found${l?`: ${l}`:""}`,404,!0,void 0,"/Errors/NotFound");return o}static async ensureNotExists(i,a,l){if(await i())throw new t.AppError(`${a} already exists${l?`: ${l}`:""}`,409,!0,void 0,"/Errors/Conflict")}static ensureOwnershipOrAdmin(i,a,l="No permission to access this resource"){const o=i.userId===a,u=i.userRoles?.includes("admin")||i.userRoles?.includes("superuser");if(!o&&!u)throw new t.AppError(l,403,!0,void 0,"/Errors/Forbidden")}static async validateAll(i){await Promise.all(i.map(a=>a()))}static validateRequiredFields(i,a,l){const o=a.filter(u=>i[u]===void 0||i[u]===null||i[u]==="");if(o.length>0)throw new t.AppError(`Missing required fields for ${l}: ${o.join(", ")}`,400,!0,void 0,"/Errors/BadRequest")}static ensureAuthenticated(i){if(!i.userId)throw new t.AppError("Authentication required",401,!0,void 0,"/Errors/Unauthorized")}static validateStringLength(i,a,l,o){if(l!==void 0&&i.length<l)throw new t.AppError(`${a} must be at least ${l} characters`,400,!0,void 0,"/Errors/BadRequest");if(o!==void 0&&i.length>o)throw new t.AppError(`${a} must not exceed ${o} characters`,400,!0,void 0,"/Errors/BadRequest")}}return _l.ValidationHelper=s,_l}var Ru={},kb;function BC(){if(kb)return Ru;kb=1,Object.defineProperty(Ru,"__esModule",{value:!0}),Ru.validateOrigin=n;function t(i){return i.trim().toLowerCase().replace(/\/$/,"")}function s(i,a){const l=t(i),o=t(a);if(l===o)return!0;if(a.includes(":*"))try{const u=new URL(l),d=new URL(o.replace(":*",""));if(u.protocol===d.protocol&&u.hostname===d.hostname)return!0}catch{}return!1}function n(i,a){if(!a||a.length===0)return{valid:!0};let l=Array.isArray(i.headers.origin)?i.headers.origin[0]:i.headers.origin;if(!l||typeof l!="string"){const u=Array.isArray(i.headers.referer)?i.headers.referer[0]:i.headers.referer;if(u&&typeof u=="string")try{const d=new URL(u);l=`${d.protocol}//${d.host}`}catch{return{valid:!1,error:"Missing origin header"}}else return{valid:!1,error:"Missing origin header"}}const o=l;for(const u of a)if(s(o,u))return{valid:!0};return{valid:!1,error:`Origin '${o}' is not allowed`}}return Ru}var ku={},Ib;function fy(){if(Ib)return ku;Ib=1,Object.defineProperty(ku,"__esModule",{value:!0}),ku.getEnvironmentToken=i;const t=BC(),s=zg(),n=$l();async function i(a,l){const o=a.getConfig(),u=o.allowedOrigins,d=(0,t.validateOrigin)(l,u);if(!d.valid){const h=`Origin validation failed: ${d.error}`,f=l.headers.origin||l.headers.referer||"unknown";throw await a.log.forRequest(l).addContext("origin",f).addContext("allowedOrigins",u||[]).addContext("reason","origin_validation_failed").error(h),await a.log.forRequest(l).addContext("reason","origin_validation_failed").addContext("origin",f).addContext("allowedOrigins",u||[]).audit("client.token.request.rejected","environment-token"),new Error(h)}try{(0,n.resolveControllerUrl)(o);const h=await a.getEnvironmentToken(),f=s.DataMasker.maskSensitiveData({clientId:o.clientId}),p=o.clientSecret?s.DataMasker.maskSensitiveData({clientSecret:o.clientSecret}):{clientSecret:void 0};return await a.log.forRequest(l).addContext("clientId",f.clientId).addContext("clientSecret",p.clientSecret).addContext("origin",l.headers.origin||l.headers.referer||"unknown").audit("client.token.request.success","environment-token"),h}catch(h){const f=h instanceof Error?h.message:"Unknown error",p=s.DataMasker.maskSensitiveData({clientId:o.clientId});throw await a.log.forRequest(l).addContext("clientId",p.clientId).addContext("origin",l.headers.origin||l.headers.referer||"unknown").addContext("reason","token_fetch_failed").error(`Failed to get environment token: ${f}`,h instanceof Error?h.stack:void 0),await a.log.forRequest(l).addContext("reason","token_fetch_failed").addContext("error",f).addContext("clientId",p.clientId).addContext("origin",l.headers.origin||l.headers.referer||"unknown").audit("client.token.request.failed","environment-token"),h}}return ku}var Rl={},Ab;function QP(){if(Ab)return Rl;Ab=1,Object.defineProperty(Rl,"__esModule",{value:!0}),Rl.hasConfig=i,Rl.createClientTokenEndpoint=d;const t=fy(),s=$l(),n=Cd();function i(h){return h.config!==void 0}function a(h){const f=h instanceof Error?h.message:"Unknown error",p=f.match(/status:\s*(\d+)/i)||f.match(/status code\s+(\d+)/i)||f.match(/status\s+(\d+)/i);let y=p?parseInt(p[1],10):void 0,S=!1,E=h;for(let b=0;b<5&&E;b++){if(E&&typeof E=="object"&&"isAxiosError"in E&&E.isAxiosError){const x=E;if(x.response){y=x.response.status;break}if(x.request&&!x.response){S=!0;break}}if(E&&typeof E=="object"&&"cause"in E)E=E.cause;else break}return{status:y,isNetworkError:S}}function l(h,f){const p=f||/ECONNREFUSED|ENOTFOUND|ETIMEDOUT|connect|Network Error|network error|getaddrinfo/i.test(h),y=h.includes("Request timeout: Failed to get environment token")||/timeout/i.test(h);return{isNetwork:p,isTimeout:y}}function o(h,f,p,y){const S=h instanceof Error?h.message:"Unknown error";if(S.includes("Origin validation failed")){(0,n.sendErrorResponse)(p,(0,n.createErrorResponse)(S,403,f));return}const{status:E,isNetworkError:b}=a(h);if(E){const C=E===401?"Failed to get environment token: Invalid client credentials or application not found":E===403?"Failed to get environment token: Access denied":S;(0,n.sendErrorResponse)(p,(0,n.createErrorResponse)(C,E,f));return}const{isNetwork:x,isTimeout:v}=l(S,b);if(x||v){const C=y.getConfig();let _;try{_=(0,s.resolveControllerUrl)(C)}catch{_=C.controllerPrivateUrl||C.controllerUrl||"NOT CONFIGURED"}const R=x?`Controller is unreachable. URL: ${_}.`:`Controller request timed out. URL: ${_}.`;(0,n.sendErrorResponse)(p,(0,n.createErrorResponse)(`Failed to get environment token: ${R}`,504,f));return}(0,n.sendErrorResponse)(p,(0,n.createErrorResponse)(S,500,f))}function u(h,f,p){const y=f.getConfig(),S=y.controllerPublicUrl||y.controllerUrl;return S?{baseUrl:`${h.protocol}://${h.get("host")||"localhost"}`,controllerUrl:S,controllerPublicUrl:y.controllerPublicUrl,clientId:y.clientId,clientTokenUri:p}:null}function d(h,f){const p={clientTokenUri:"/api/v1/auth/client-token",expiresIn:1800,includeConfig:!0,...f};return async(y,S)=>{const E=()=>S.headersSent||S.writableEnded;try{if(!h.isInitialized()){E()||(0,n.sendErrorResponse)(S,(0,n.createErrorResponse)("MisoClient is not initialized",503,y));return}const b=new Promise((C,_)=>setTimeout(()=>_(new Error("Request timeout: Failed to get environment token within 5 seconds")),5e3));let x;try{x=await Promise.race([(0,t.getEnvironmentToken)(h,y),b])}catch(C){E()||o(C,y,S,h);return}const v={token:x,expiresIn:p.expiresIn};if(p.includeConfig){const C=u(y,h,p.clientTokenUri);if(!C){E()||(0,n.sendErrorResponse)(S,(0,n.createErrorResponse)("Controller URL not configured",500,y));return}v.config=C}E()||S.json(v)}catch(b){if(E())return;const x=b instanceof Error?b.message:"Unknown error";if(x.includes("Origin validation failed")){(0,n.sendErrorResponse)(S,(0,n.createErrorResponse)(x,403,y));return}if(/timeout/i.test(x)){(0,n.sendErrorResponse)(S,(0,n.createErrorResponse)("Failed to get environment token: Request timed out",504,y));return}(0,n.sendErrorResponse)(S,(0,n.createErrorResponse)(x,500,y))}}}return Rl}var Iu={},Nb;function ZP(){if(Nb)return Iu;Nb=1,Object.defineProperty(Iu,"__esModule",{value:!0}),Iu.loggerContextMiddleware=l;const t=G1(),s=gd(),n=Kg();function i(){return`server-${Date.now()}-${Math.random().toString(36).substring(2,8)}`}function a(o){const u=(0,s.extractRequestContext)(o),d=o.headers.authorization?.replace("Bearer ",""),h=d?(0,n.extractJwtContext)(d):{},f=u.correlationId||i();return{ipAddress:u.ipAddress,method:u.method,path:u.path,userId:u.userId||h.userId,sessionId:u.sessionId||h.sessionId,applicationId:h.applicationId,userAgent:u.userAgent,referer:u.referer,requestSize:u.requestSize,correlationId:f,requestId:u.requestId,token:d}}function l(o,u,d){try{(0,t.setLoggerContext)(a(o)),d()}catch{d()}}return Iu}var Pb;function eO(){return Pb||(Pb=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.loggerContextMiddleware=t.hasConfig=t.createClientTokenEndpoint=t.extractClientTokenInfo=t.getEnvironmentToken=t.validateOrigin=t.sendErrorResponse=t.getErrorTitle=t.getErrorTypeUri=t.handleRouteError=t.setErrorLogger=t.createErrorResponse=t.createSuccessResponse=t.AppError=t.ValidationHelper=t.asyncHandlerNamed=t.asyncHandler=t.injectResponseHelpers=t.ResponseHelper=void 0;var s=FC();Object.defineProperty(t,"ResponseHelper",{enumerable:!0,get:function(){return s.ResponseHelper}});var n=WP();Object.defineProperty(t,"injectResponseHelpers",{enumerable:!0,get:function(){return n.injectResponseHelpers}});var i=YP();Object.defineProperty(t,"asyncHandler",{enumerable:!0,get:function(){return i.asyncHandler}}),Object.defineProperty(t,"asyncHandlerNamed",{enumerable:!0,get:function(){return i.asyncHandlerNamed}});var a=XP();Object.defineProperty(t,"ValidationHelper",{enumerable:!0,get:function(){return a.ValidationHelper}});var l=bd();Object.defineProperty(t,"AppError",{enumerable:!0,get:function(){return l.AppError}}),Object.defineProperty(t,"createSuccessResponse",{enumerable:!0,get:function(){return l.createSuccessResponse}}),Object.defineProperty(t,"createErrorResponse",{enumerable:!0,get:function(){return l.createErrorResponse}});var o=HC();Object.defineProperty(t,"setErrorLogger",{enumerable:!0,get:function(){return o.setErrorLogger}}),Object.defineProperty(t,"handleRouteError",{enumerable:!0,get:function(){return o.handleRouteError}});var u=Cd();Object.defineProperty(t,"getErrorTypeUri",{enumerable:!0,get:function(){return u.getErrorTypeUri}}),Object.defineProperty(t,"getErrorTitle",{enumerable:!0,get:function(){return u.getErrorTitle}}),Object.defineProperty(t,"sendErrorResponse",{enumerable:!0,get:function(){return u.sendErrorResponse}});var d=BC();Object.defineProperty(t,"validateOrigin",{enumerable:!0,get:function(){return d.validateOrigin}});var h=fy();Object.defineProperty(t,"getEnvironmentToken",{enumerable:!0,get:function(){return h.getEnvironmentToken}});var f=z1();Object.defineProperty(t,"extractClientTokenInfo",{enumerable:!0,get:function(){return f.extractClientTokenInfo}});var p=QP();Object.defineProperty(t,"createClientTokenEndpoint",{enumerable:!0,get:function(){return p.createClientTokenEndpoint}}),Object.defineProperty(t,"hasConfig",{enumerable:!0,get:function(){return p.hasConfig}});var y=ZP();Object.defineProperty(t,"loggerContextMiddleware",{enumerable:!0,get:function(){return y.loggerContextMiddleware}})})(Jm)),Jm}var en={},Ui={},Ob;function zC(){if(Ob)return Ui;Ob=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.getCachedEntry=s,Ui.setCacheEntry=n,Ui.isCacheEnabled=i,Ui.getCacheKeyForRequest=a;const t=nn();function s(l,o,u){const d=l.get(o);return d&&d.expiresAt>Date.now()?(u.cacheHits++,d.data):(u.cacheMisses++,null)}function n(l,o,u,d,h){if(l.set(o,{data:u,expiresAt:Date.now()+d*1e3,key:o}),l.size>h){const f=l.keys().next().value;f&&l.delete(f)}}function i(l,o,u){const d=l.toUpperCase()==="GET";return o?.enabled!==!1&&d&&u?.cache?.enabled!==!1}function a(l,o){return o?.cache?.key||(0,t.generateCacheKey)(l,o)}return Ui}var Ws={},Vs={},kl={},jb;function KC(){if(jb)return kl;jb=1,Object.defineProperty(kl,"__esModule",{value:!0}),kl.shouldSkipAudit=n,kl.logDataClientAudit=i;const t=Qo(),s=nn();function n(a,l){return l?.enabled?(l.skipEndpoints||[]).some(u=>a.includes(u)):!0}async function i(a,l,o,u,d,h,f,p,y,S,E,b,x,v,C){if(!(n(l,h)||!d)&&f())try{const _=p(),R=_?(0,s.extractUserIdFromToken)(_):void 0,D=h?.level||"standard",A={method:a,url:l,statusCode:o,duration:u};if(R&&(A.userId=R),D==="minimal"){await d.log.audit(`http.request.${a.toLowerCase()}`,l,A,{token:_||void 0});return}const j=h?.maxResponseSize||1e4,k=h?.maxMaskingSize||5e4;let K;if(v!==void 0){const V=(0,s.truncatePayload)(v,k);V.truncated?K=V.data:K=t.DataMasker.maskSensitiveData(V.data)}let Z;if(C!==void 0){const V=(0,s.truncatePayload)(C,j);V.truncated?Z=V.data:Z=t.DataMasker.maskSensitiveData(V.data)}const ie=b?t.DataMasker.maskSensitiveData(b):void 0,ce=x?t.DataMasker.maskSensitiveData(x):void 0;if(ie&&(A.requestHeaders=ie),ce&&(A.responseHeaders=ce),K!==void 0&&(A.requestBody=K),Z!==void 0&&(A.responseBody=Z),(D==="detailed"||D==="full")&&(y!==void 0&&(A.requestSize=y),S!==void 0&&(A.responseSize=S)),E){const V=t.DataMasker.maskSensitiveData({message:E.message,name:E.name,stack:E.stack});A.error=V}await d.log.audit(`http.request.${a.toLowerCase()}`,l,A,{token:_||void 0})}catch(_){const R=_,D=R.statusCode||R.response?.status,A=R.message||String(_),j=R.code,k=j==="ECONNREFUSED"||j==="ENOTFOUND"||A.includes("ERR_CONNECTION_REFUSED")||A.includes("Failed to fetch")||A.includes("NetworkError")||A.includes("network error");if(D===401||k)return;console.warn("Failed to log audit event:",_)}}return kl}var Lb;function tO(){if(Lb)return Vs;Lb=1,Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.generateCorrelationId=u,Vs.processSuccessfulResponse=d,Vs.handleNonRetryableError=h,Vs.handleAuthErrorCleanup=f,Vs.waitForRetry=R;const t=Qg(),s=nn(),n=zC(),i=KC(),a=Dr(),l=Lr(),o=WC();function u(D){if(D?.log&&typeof D.log.generateCorrelationId=="function")return D.log.generateCorrelationId();const A=Date.now(),j=Math.random().toString(36).substring(2,8);return`${A}-${j}`}async function d(D,A,j,k,K,Z,ie,ce,V,F,O,q,W,L,Y){const ee=Date.now()-K;if(p(L,ee),S(V,D,A,Y,Z,ie,ce),W.onResponse)return await W.onResponse(D,A);if(await E(D,A,j,k,ee,Z,F,O,q,Y),!D.ok)throw new t.ApiError(`Request failed with status ${D.status}`,D.status,D);return A}async function h(D,A,j,k,K,Z,ie,ce,V,F,O,q){const W=Date.now()-k;y(O);const L=b(D,j,A,ce);throw(0,l.logErrorWithContext)(L,"[DataClient]"),await v(D,K||Z||401,W,A,j,ie,ce,V,F,q,L),D}function f(D,A,j,k,K,Z,ie,ce,V,F,O,q){F(),y(O);const W=b(D,k,j,ie);if((0,l.logErrorWithContext)(W,"[DataClient] [AUTH]"),!q?.skipAudit){const L=Date.now()-K;(0,i.logDataClientAudit)(j,k,A,L,ie,Z.audit,ce,V,q?.body?(0,s.calculateSize)(q.body):void 0,void 0,D,(0,o.extractHeaders)(q?.headers),void 0,q?.body,void 0).catch(()=>{})}_(ie,W)}function p(D,A){D.totalRequests++,D.responseTimes.push(A)}function y(D){D.totalFailures++}function S(D,A,j,k,K,Z,ie){if(!D||!A.ok)return;const ce=k?.cache?.ttl||K.cache?.defaultTTL||300;(0,n.setCacheEntry)(Z,ie,j,ce,K.cache?.maxSize||100)}async function E(D,A,j,k,K,Z,ie,ce,V,F){if(F?.skipAudit)return;const O=F?.body?(0,s.calculateSize)(F.body):void 0,q=(0,s.calculateSize)(A);await(0,i.logDataClientAudit)(j,k,D.status,K,ie,Z.audit,ce,V,O,q,void 0,(0,o.extractHeaders)(F?.headers),(0,o.extractHeaders)(D.headers),F?.body,A)}function b(D,A,j,k){return(0,a.extractErrorInfo)(D,{endpoint:A,method:j,correlationId:u(k)})}function x(D){return D>=500?"server-error":D>=400?"client-error":"success"}async function v(D,A,j,k,K,Z,ie,ce,V,F,O,q){if(F?.skipAudit||!ie?.log)return;await(0,i.logDataClientAudit)(k,K,A,j,ie,Z.audit,ce,V,F?.body?(0,s.calculateSize)(F.body):void 0,void 0,D,(0,o.extractHeaders)(F?.headers),void 0,F?.body,void 0);const W=x(A);await C(ie,O,W)}async function C(D,A,j){try{await D.log.error(`Request failed: ${A.message}`,{errorType:A.errorType,errorName:A.errorName,statusCode:A.statusCode,endpoint:A.endpoint,method:A.method,responseBody:A.responseBody},A.stackTrace,{errorCategory:A.errorType.toLowerCase().replace("error",""),httpStatusCategory:j,correlationId:A.correlationId})}catch{}}function _(D,A){D?.log&&D.log.error(`Authentication error: ${A.message}`,{authFlow:"token_validation_failed",errorType:A.errorType,errorName:A.errorName,statusCode:A.statusCode,endpoint:A.endpoint,method:A.method,responseBody:A.responseBody},A.stackTrace,{errorCategory:"authentication",httpStatusCategory:"client-error",correlationId:A.correlationId}).catch(()=>{})}async function R(D,A,j,k){const K=k(D,A,j);await new Promise(Z=>setTimeout(Z,K))}return Vs}var Db;function WC(){if(Db)return Ws;Db=1,Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.extractHeaders=i,Ws.parseResponse=a,Ws.mergeSignals=l,Ws.makeFetchRequest=o,Ws.executeHttpRequest=u;const t=Qg(),s=nn(),n=tO();function i(d){if(!d)return;if(d instanceof Headers){const f={};return d.forEach((p,y)=>{f[y]=p}),f}if(Array.isArray(d)){const f={};return d.forEach(([p,y])=>{f[p]=String(y)}),f}const h={};return Object.entries(d).forEach(([f,p])=>{h[f]=Array.isArray(p)?p.join(", "):String(p)}),h}async function a(d){const h=d.headers.get("content-type")||"";return h.includes("application/json")?await d.json():h.includes("text/")?await d.text():await d.blob()}function l(d,h){const f=new AbortController,p=()=>{f.abort(),d.removeEventListener("abort",p),h.removeEventListener("abort",p)};return d.aborted||h.aborted?(f.abort(),f.signal):(d.addEventListener("abort",p),h.addEventListener("abort",p),f.signal)}async function o(d,h,f,p,y){const S=new Headers(f.defaultHeaders);if(y?.headers&&(y.headers instanceof Headers?y.headers.forEach((k,K)=>S.set(K,k)):Object.entries(y.headers).forEach(([k,K])=>{S.set(k,String(K))})),!y?.skipAuth){const k=p();k&&S.set("Authorization",`Bearer ${k}`)}const E=y?.timeout||f.timeout||3e4,b=new AbortController,x=setTimeout(()=>b.abort(),E),v=y?.signal?l(b.signal,y.signal):b.signal,{cache:C,skipAuth:_,retries:R,skipAudit:D,timeout:A,...j}=y||{};try{const k=await fetch(h,{method:d,headers:S,body:j.body,signal:v,...j});return clearTimeout(x),k}catch(k){throw clearTimeout(x),k instanceof Error&&k.name==="AbortError"?new t.TimeoutError(`Request timeout after ${E}ms`,E):new t.NetworkError(`Network error: ${k instanceof Error?k.message:"Unknown error"}`,k instanceof Error?k:void 0)}}async function u(d,h,f,p,y,S,E,b,x,v,C,_,R,D,A,j){const k=j?.retries!==void 0?j.retries:p.retry?.maxRetries||3,K=p.retry?.enabled!==!1,Z=p.retry?.baseDelay||1e3,ie=p.retry?.maxDelay||1e4;let ce=!1,V=!1;async function F(O){if(ce)throw new t.AuthenticationError("Authentication error detected - should not retry");let q,W;try{if(W=await o(d,h,p,C,j),q=W.status,q===401||q===403){if(q===401&&p.onTokenRefresh&&R&&O===0&&!V){V=!0;try{if((await R())?.token)return await new Promise(H=>setTimeout(H,10)),F(O+1)}catch(ee){console.warn("Token refresh failed, redirecting to login:",ee),ce=!0}}ce=!0;const Y=q===401?new t.AuthenticationError("Authentication required",W):new t.ApiError("Forbidden",403,W);throw(0,n.handleAuthErrorCleanup)(Y,q,d,f,b,p,x,v,C,_,A,j),Y}const L=await a(W);return await(0,n.processSuccessfulResponse)(W,L,d,f,b,p,y,S,E,x,v,C,D,A,j)}catch(L){if(V&&(q===401||q===403)||L instanceof t.AuthenticationError||q===401||q===403)throw ce=!0,L;const Y=L;if(Y.name==="AuthenticationError"||Y.statusCode===401||Y.statusCode===403)throw ce=!0,L;const ee=Y.response?.status,H=L instanceof t.AuthenticationError?401:Y.statusCode??ee??q??void 0,X=H&&H>=500&&H<600;if(!(K&&!X&&O<(X?0:k)&&(0,s.isRetryableError)(H,L))){if(L instanceof t.AuthenticationError||L.name==="AuthenticationError"||H===401||H===403||q===401||q===403)throw ce=!0,L;A.totalFailures++,await(0,n.handleNonRetryableError)(L,d,f,b,H,q,p,x,v,C,A,j)}if(ce)throw L;return await(0,n.waitForRetry)(O,Z,ie,s.calculateBackoffDelay),F(O+1)}}try{return await F(0)}catch(O){const q=O instanceof t.AuthenticationError||O.name==="AuthenticationError"||O.statusCode===401||O.statusCode===403;throw A.totalFailures++,D.onError&&!q?await D.onError(O):O}}return Ws}var Il={},Au={},Mb;function rO(){if(Mb)return Au;Mb=1,Object.defineProperty(Au,"__esModule",{value:!0}),Au.handleOAuthCallback=o;const t=nn(),s=Dr(),n=Lr();function i(){try{const u=globalThis;if(!u.window?.location||!u.window.history){console.warn("[handleOAuthCallback] window not available for hash cleanup");return}const d=u.window.location.pathname+u.window.location.search;u.window.history.replaceState(null,"",d)}catch(u){console.warn("[handleOAuthCallback] Failed to clean up hash:",u)}}function a(u){return!u||typeof u!="string"?!1:u.trim().length>=5}function l(u){return u==="localhost"||u==="127.0.0.1"||u==="[::1]"||u.startsWith("192.168.")||u.startsWith("10.")||/^172\.(1[6-9]|2[0-9]|3[0-1])\./.test(u)}function o(u){if(!(0,t.isBrowser)())return null;const d=globalThis;if(!d.window?.location)return null;const h=d.window.location.hash;if(!h||h.length<=1)return null;const f=h.substring(1);let p;try{p=new URLSearchParams(f)}catch(E){return console.warn("[handleOAuthCallback] Failed to parse hash:",E),null}const y=p.get("token")||p.get("access_token")||p.get("accessToken");if(!y)return null;if(!a(y)){const E=y?y.length:0;return console.error("[handleOAuthCallback] Invalid token format - token rejected",{tokenLength:E,isEmpty:!y||y.trim().length===0,tooShort:E>0&&E<5,expectedFormat:"Non-empty string with at least 5 characters"}),i(),null}u.misoConfig?.logLevel;{const E=d.window.location.protocol==="https:",b=d.window.location.hostname||"";if(!E&&!l(b))return console.error("[handleOAuthCallback] SECURITY WARNING: Token received over HTTP in production"),i(),null}i();const S=u.tokenKeys||["token","accessToken","authToken"];try{return S.forEach(E=>{try{(0,t.setLocalStorage)(E,y)}catch(b){console.warn(`[handleOAuthCallback] Failed to store token in key ${E}:`,b)}}),u.misoConfig?.logLevel==="debug"&&console.log("[handleOAuthCallback] OAuth token extracted and stored securely",{tokenLength:y.length,tokenKeys:S,storedInKeys:S.length}),y}catch(E){const b=E instanceof Error?E:new Error(String(E)),x=d.window.location.pathname||"/",v=(0,s.extractErrorInfo)(b,{endpoint:x,method:"GET"});return(0,n.logErrorWithContext)(v,"[DataClient] [AUTH] [OAuthCallback]"),console.error("[handleOAuthCallback] Failed to store token:",E),null}}return Au}var Uo={},$b;function VC(){if($b)return Uo;$b=1,Object.defineProperty(Uo,"__esModule",{value:!0}),Uo.getValidatedRedirectUrl=i,Uo.redirectToLogin=a,Uo.logout=l;const t=GC(),s=nn();function n(o){if(!o||typeof o!="string"||o.trim()==="")return null;const u=o.trim(),d=["javascript:","data:","vbscript:","file:","about:"],h=u.toLowerCase();for(const y of d)if(h.startsWith(y))return null;let f;try{if(u.startsWith("/")||!u.includes("://")){const y=globalThis.window.location.origin;f=new URL(u,y)}else f=new URL(u)}catch{return null}return f.protocol!=="http:"&&f.protocol!=="https:"?null:f.href}function i(o,u){const d=n(o);if(d)return d;if(u){const h=n(u);if(h)return h}return null}async function a(o,u,d){if(!(0,s.isBrowser)())return;const h=globalThis.window.location.href,f=d||h,p=(0,t.getControllerUrl)(o.misoConfig);if(!p){const b=new Error("Controller URL is not configured. Please configure controllerUrl or controllerPublicUrl in your DataClient configuration.");throw b.details={hasMisoConfig:!!o.misoConfig,controllerUrl:o.misoConfig?.controllerUrl,controllerPublicUrl:o.misoConfig?.controllerPublicUrl,controllerPrivateUrl:o.misoConfig?.controllerPrivateUrl},b}const y=await u();let S=o.loginUrl||"/login";S.startsWith("/api/")&&(console.warn(`âš ï¸ Warning: loginUrl is set to an API endpoint (${S}). redirectToLogin() should redirect to a login PAGE (e.g., '/login'), not an API endpoint. Using default '/login' instead.`),S="/login");let E;/^https?:\/\//i.test(S)?E=new URL(S):E=new URL(S,p),E.searchParams.set("redirect",f),y&&E.searchParams.set("x-client-token",y),globalThis.window.location.href=E.toString()}async function l(o,u,d,h,f,p){if(!(0,s.isBrowser)())return;const y=u(),S=await d();(o.tokenKeys||["token","accessToken","authToken"]).forEach(R=>{try{const D=globalThis.localStorage;D&&D.removeItem(R)}catch{}}),h();const b=(0,t.getControllerUrl)(o.misoConfig);if(!b){const R=f||o.logoutUrl||o.loginUrl||"/login",D=globalThis.window.location.origin,A=/^https?:\/\//i.test(R)?R:`${D}${R.startsWith("/")?R:`/${R}`}`,j=i(A);j&&(globalThis.window.location.href=j);return}const x=o.logoutUrl||o.loginUrl||"/logout";let v;/^https?:\/\//i.test(x)?v=new URL(x):v=new URL(x,b);const C=f||o.logoutUrl||o.loginUrl||"/login";let _;/^https?:\/\//i.test(C)?_=C:_=`${globalThis.window.location.origin}${C.startsWith("/")?C:`/${C}`}`,v.searchParams.set("redirect",_),S&&v.searchParams.set("x-client-token",S),y&&v.searchParams.set("token",y),globalThis.window.location.href=v.toString()}return Uo}var Ub;function GC(){return Ub||(Ub=1,(function(t){var s=Il&&Il.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(t,"__esModule",{value:!0}),t.logout=t.redirectToLogin=t.handleOAuthCallback=void 0,t.getToken=h,t.hasClientToken=f,t.hasAnyToken=p,t.getControllerUrl=y,t.getClientToken=b,t.getEnvironmentToken=v,t.getClientTokenInfo=C;const n=nn(),i=qC(),a=s(Jo()),l=KC(),o=Dr(),u=Lr();var d=rO();Object.defineProperty(t,"handleOAuthCallback",{enumerable:!0,get:function(){return d.handleOAuthCallback}});function h(_){if(!(0,n.isBrowser)())return null;const R=_||["token","accessToken","authToken"];for(const D of R){const A=(0,n.getLocalStorage)(D);if(A)return A}return null}function f(_,R){if(!(0,n.isBrowser)())return!!(_&&R?.clientSecret);if((0,n.getLocalStorage)("miso:client-token")){const A=(0,n.getLocalStorage)("miso:client-token-expires-at");if(A&&parseInt(A,10)>Date.now())return!0}return!!(R?.clientToken||R?.onClientTokenRefresh||R?.clientSecret)}function p(_,R,D){return h(_)!==null||f(R||null,D)}function y(_){return _&&(_.controllerPublicUrl||_.controllerUrl)||null}function S(_){try{const R=a.default.decode(_);return R?.exp?R.exp*1e3:null}catch{return null}}function E(_,R){if(!_)return!1;const D=Date.now();if(R){const j=parseInt(R,10);return!(!isNaN(j)&&j<=D)}const A=S(_);return!(A&&A<=D)}async function b(_,R,D){if(!(0,n.isBrowser)())return null;const A=_?.logLevel==="debug",j=(0,n.getLocalStorage)("miso:client-token"),k=(0,n.getLocalStorage)("miso:client-token-expires-at");if(A&&console.log("[getClientToken] Cache check:",{hasToken:!!j,hasExpiresAt:!!k}),j){if(E(j,k))return A&&console.log("[getClientToken] Returning valid cached token"),j;A&&console.log("[getClientToken] Token expired, removing from cache"),(0,n.removeLocalStorage)("miso:client-token"),(0,n.removeLocalStorage)("miso:client-token-expires-at")}if(_?.clientToken)return A&&console.log("[getClientToken] Returning token from config"),_.clientToken;try{A&&console.log("[getClientToken] Fetching new token via getEnvironmentToken()");const K=await D();return A&&console.log("[getClientToken] Got new token, length:",K?.length),K}catch(K){return console.error("[getClientToken] Failed to get environment token:",{method:"POST",path:"/api/v1/auth/token",errorMessage:K instanceof Error?K.message:String(K),stackTrace:K instanceof Error?K.stack:void 0}),null}}var x=VC();Object.defineProperty(t,"redirectToLogin",{enumerable:!0,get:function(){return x.redirectToLogin}}),Object.defineProperty(t,"logout",{enumerable:!0,get:function(){return x.logout}});async function v(_,R){if(!(0,n.isBrowser)())throw new Error("getEnvironmentToken() is only available in browser environment");const D="miso:client-token",A="miso:client-token-expires-at",j=(0,n.getLocalStorage)(D),k=(0,n.getLocalStorage)(A);if(j&&k){if(parseInt(k,10)>Date.now())return j;(0,n.removeLocalStorage)(D),(0,n.removeLocalStorage)(A)}const K=_.misoConfig?.clientTokenUri||"/api/v1/auth/client-token",Z=/^https?:\/\//i.test(K)?K:`${_.baseUrl}${K}`;try{const ie=await fetch(Z,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!ie.ok){const q=await ie.text();throw new Error(`Failed to get environment token: ${ie.status} ${ie.statusText}. ${q}`)}const ce=await ie.json(),V=ce.data?.token||ce.token||ce.accessToken||ce.access_token;if(!V||typeof V!="string")throw new Error("Invalid response format: token not found in response");const F=ce.data?.expiresIn||ce.expiresIn||ce.expires_in||3600,O=Date.now()+F*1e3;if((0,n.setLocalStorage)(D,V),(0,n.setLocalStorage)(A,O.toString()),R&&!(0,l.shouldSkipAudit)(K,_.audit))try{await R.log.audit("client.token.request.success",K,{method:"POST",url:K,statusCode:ie.status,cached:!1},{})}catch{}return V}catch(ie){const ce=(0,o.extractErrorInfo)(ie,{endpoint:K,method:"POST",correlationId:R?.log?.generateCorrelationId?.()});if((0,u.logErrorWithContext)(ce,"[DataClient] [AUTH] [ClientToken]"),R&&!(0,l.shouldSkipAudit)(K,_.audit))try{await R.log.audit("client.token.request.failed",K,{method:"POST",url:K,statusCode:ce.statusCode||0,error:ie instanceof Error?ie.message:"Unknown error",cached:!1,errorType:ce.errorType,errorName:ce.errorName},{errorCategory:"authentication",httpStatusCategory:ce.statusCode&&ce.statusCode>=500?"server-error":"client-error",correlationId:ce.correlationId})}catch{}throw ie}}function C(_){if(!(0,n.isBrowser)())return null;const R=(0,n.getLocalStorage)("miso:client-token");if(R)return(0,i.extractClientTokenInfo)(R);const D=_?.clientToken;return D?(0,i.extractClientTokenInfo)(D):null}})(Il)),Il}var qi={},qb;function nO(){if(qb)return qi;qb=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.createMisoConfigWithRefresh=h,qi.initializeBrowserServices=f,qi.warnIfClientSecretInBrowser=p,qi.createDefaultConfig=y;const t=$C(),s=UC(),n=og(),i=ag(),a=Xg(),l=Y1(),o=sg(),u=ig(),d=nn();function h(S,E){if(S.misoConfig)return{...S.misoConfig,onClientTokenRefresh:S.misoConfig.onClientTokenRefresh||((0,d.isBrowser)()&&!S.misoConfig.clientSecret?async()=>{const b=await E();if(!b)throw new Error("Failed to get client token");const x=(0,d.getLocalStorage)("miso:client-token-expires-at"),v=x?parseInt(x,10):Date.now()+36e5,C=Math.floor((v-Date.now())/1e3);return{token:b,expiresIn:C>0?C:3600}}:void 0)}}function f(S,E){if(!S||!E)return{permissionService:null,roleService:null};const b=new a.InternalHttpClient(E),x=new u.RedisService(E.redis),v=new o.LoggerService(b,x),C=new i.HttpClient(E,v);v.httpClient=C;const _=new l.ApiClient(C);v.setApiClient(_);const R=new n.CacheService(void 0),D=new t.BrowserPermissionService(C,_,R),A=new s.BrowserRoleService(C,_,R);return{permissionService:D,roleService:A}}function p(S){(0,d.isBrowser)()&&S.misoConfig?.clientSecret&&console.warn("âš ï¸ SECURITY WARNING: clientSecret detected in browser environment. Client secrets should NEVER be exposed in client-side code. Use the client token pattern instead (clientToken + onClientTokenRefresh). See documentation for browser-safe configuration.")}function y(S){return{tokenKeys:["token","accessToken","authToken"],loginUrl:"/login",timeout:3e4,cache:{enabled:!0,defaultTTL:300,maxSize:100},retry:{enabled:!0,maxRetries:3,baseDelay:1e3,maxDelay:1e4},audit:{enabled:!0,level:"standard",batchSize:10,maxResponseSize:1e4,maxMaskingSize:5e4,skipEndpoints:[]},...S}}return qi}var hs={},Fb;function sO(){if(Fb)return hs;Fb=1,Object.defineProperty(hs,"__esModule",{value:!0}),hs.getPermissions=t,hs.hasPermission=s,hs.hasAnyPermission=n,hs.hasAllPermissions=i,hs.refreshPermissions=a,hs.clearPermissionsCache=l;async function t(o,u,d,h){if(!u||!o)return[];const f=h||d();return f?o.getPermissions(f):[]}async function s(o,u,d,h,f){if(!u||!o)return!1;const p=f||d();return p?o.hasPermission(p,h):!1}async function n(o,u,d,h,f){if(!u||!o)return!1;const p=f||d();return p?o.hasAnyPermission(p,h):!1}async function i(o,u,d,h,f){if(!u||!o)return!1;const p=f||d();return p?o.hasAllPermissions(p,h):!1}async function a(o,u,d,h){if(!u||!o)return[];const f=h||d();return f?o.refreshPermissions(f):[]}async function l(o,u,d,h){if(!u||!o)return;const f=h||d();if(f)return o.clearPermissionsCache(f)}return hs}var ps={},Hb;function iO(){if(Hb)return ps;Hb=1,Object.defineProperty(ps,"__esModule",{value:!0}),ps.getRoles=t,ps.hasRole=s,ps.hasAnyRole=n,ps.hasAllRoles=i,ps.refreshRoles=a,ps.clearRolesCache=l;async function t(o,u,d,h){if(!u||!o)return[];const f=h||d();return f?o.getRoles(f):[]}async function s(o,u,d,h,f){if(!u||!o)return!1;const p=f||d();return p?o.hasRole(p,h):!1}async function n(o,u,d,h,f){if(!u||!o)return!1;const p=f||d();return p?o.hasAnyRole(p,h):!1}async function i(o,u,d,h,f){if(!u||!o)return!1;const p=f||d();return p?o.hasAllRoles(p,h):!1}async function a(o,u,d,h){if(!u||!o)return[];const f=h||d();return f?o.refreshRoles(f):[]}async function l(o,u,d,h){if(!u||!o)return;const f=h||d();if(f)return o.clearRolesCache(f)}return ps}var Bb;function JC(){if(Bb)return en;Bb=1;var t=en&&en.__createBinding||(Object.create?(function(x,v,C,_){_===void 0&&(_=C);var R=Object.getOwnPropertyDescriptor(v,C);(!R||("get"in R?!v.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return v[C]}}),Object.defineProperty(x,_,R)}):(function(x,v,C,_){_===void 0&&(_=C),x[_]=v[C]})),s=en&&en.__setModuleDefault||(Object.create?(function(x,v){Object.defineProperty(x,"default",{enumerable:!0,value:v})}):function(x,v){x.default=v}),n=en&&en.__importStar||(function(){var x=function(v){return x=Object.getOwnPropertyNames||function(C){var _=[];for(var R in C)Object.prototype.hasOwnProperty.call(C,R)&&(_[_.length]=R);return _},x(v)};return function(v){if(v&&v.__esModule)return v;var C={};if(v!=null)for(var _=x(v),R=0;R<_.length;R++)_[R]!=="default"&&t(C,v,_[R]);return s(C,v),C}})();Object.defineProperty(en,"__esModule",{value:!0}),en.DataClient=void 0,en.dataClient=b;const i=YC(),a=Qo(),l=nn(),o=zC(),u=WC(),d=GC(),h=VC(),f=nO(),p=n(sO()),y=n(iO());class S{constructor(v){this.misoClient=null,this.cache=new Map,this.pendingRequests=new Map,this.failedRequests=new Map,this.interceptors={},this.metrics={totalRequests:0,totalFailures:0,responseTimes:[],cacheHits:0,cacheMisses:0},this.permissionService=null,this.roleService=null,this.config=(0,f.createDefaultConfig)(v),(0,f.warnIfClientSecretInBrowser)(this.config);const C=(0,f.createMisoConfigWithRefresh)(this.config,()=>this.getEnvironmentToken());C&&(this.misoClient=new i.MisoClient(C)),this.config.misoConfig?.sensitiveFieldsConfig&&a.DataMasker.setConfigPath(this.config.misoConfig.sensitiveFieldsConfig);const _=(0,f.initializeBrowserServices)(this.misoClient,C);this.permissionService=_.permissionService,this.roleService=_.roleService,(0,l.isBrowser)()&&this.handleOAuthCallback()}getToken(){return(0,d.getToken)(this.config.tokenKeys)}hasClientToken(){return(0,d.hasClientToken)(this.misoClient,this.config.misoConfig)}hasAnyToken(){return(0,d.hasAnyToken)(this.config.tokenKeys,this.misoClient,this.config.misoConfig)}async getClientToken(){return(0,d.getClientToken)(this.config.misoConfig,this.config.baseUrl,()=>this.getEnvironmentToken())}getControllerUrl(){return(0,d.getControllerUrl)(this.config.misoConfig)}isAuthenticated(){return this.getToken()!==null}handleOAuthCallback(){return(0,d.handleOAuthCallback)(this.config)}async redirectToLogin(v){return(0,h.redirectToLogin)(this.config,()=>this.getClientToken(),v)}async logout(v){return(0,d.logout)(this.config,()=>this.getToken(),()=>this.getClientToken(),()=>this.clearCache(),v,this.misoClient)}setInterceptors(v){this.interceptors={...this.interceptors,...v}}setAuditConfig(v){this.config.audit={...this.config.audit,...v}}setLogLevel(v){if(this.misoClient&&this.config.misoConfig){this.config.misoConfig.logLevel=v;try{const C=this.misoClient.config;C&&(C.logLevel=v)}catch{}}}clearCache(){this.cache.clear()}getMetrics(){const v=(this.metrics.responseTimes||[]).sort((_,R)=>_-R),C=v.length;return{totalRequests:this.metrics.totalRequests,totalFailures:this.metrics.totalFailures,averageResponseTime:C>0?v.reduce((_,R)=>_+R,0)/C:0,responseTimeDistribution:{min:C>0?v[0]:0,max:C>0?v[C-1]:0,p50:C>0?v[Math.floor(C*.5)]:0,p95:C>0?v[Math.floor(C*.95)]:0,p99:C>0?v[Math.floor(C*.99)]:0},errorRate:this.metrics.totalRequests>0?this.metrics.totalFailures/this.metrics.totalRequests:0,cacheHitRate:this.metrics.cacheHits+this.metrics.cacheMisses>0?this.metrics.cacheHits/(this.metrics.cacheHits+this.metrics.cacheMisses):0}}checkCircuitBreaker(v){const C=this.failedRequests.get(v);if(!C)return;const _=Date.now()-C.timestamp,R=C.count||1;if(_<(R===1?5e3:R===2?15e3:3e4))throw C.error;this.failedRequests.delete(v)}recordFailure(v,C){const _=this.failedRequests.get(v),R=_?(_.count||1)+1:1;this.failedRequests.set(v,{timestamp:Date.now(),error:C,count:R}),setTimeout(()=>this.failedRequests.delete(v),3e4)}executeRequest(v,C,_,R,D,A,j){return(0,u.executeHttpRequest)(v,C,_,this.config,this.cache,R,D,A,this.misoClient,()=>this.hasAnyToken(),()=>this.getToken(),()=>this.handleAuthError(),()=>this.refreshUserToken(),this.interceptors,this.metrics,j)}async request(v,C,_){const R=Date.now(),D=`${this.config.baseUrl}${C}`,A=(0,o.getCacheKeyForRequest)(C,{..._,method:v.toUpperCase()}),j=v.toUpperCase()==="GET",k=(0,o.isCacheEnabled)(v,this.config.cache,_);if(this.checkCircuitBreaker(A),k){const Z=(0,o.getCachedEntry)(this.cache,A,this.metrics);if(Z!==null)return Z}if(j){const Z=this.pendingRequests.get(A);if(Z)return Z}const K=j?(async()=>{try{return await this.executeRequest(v,D,C,A,k,R,_)}finally{this.pendingRequests.delete(A)}})():this.executeRequest(v,D,C,A,k,R,_);j&&this.pendingRequests.set(A,K);try{const Z=await K;return this.failedRequests.delete(A),Z}catch(Z){throw this.recordFailure(A,Z),Z}}async refreshUserToken(){if(!this.config.onTokenRefresh)return null;try{const v=await this.config.onTokenRefresh();if((0,l.isBrowser)()&&v.token){const{setLocalStorage:C}=await Promise.resolve().then(()=>n(nn()));for(const _ of this.config.tokenKeys||["token","accessToken","authToken"])C(_,v.token)}return v}catch(v){return console.error("Token refresh failed:",v),null}}handleAuthError(){(0,l.isBrowser)()&&this.redirectToLogin().catch(v=>console.error("Failed to redirect to login:",v))}async applyRequestInterceptor(v,C){return this.interceptors.onRequest?await this.interceptors.onRequest(v,C):C}async get(v,C){const _=await this.applyRequestInterceptor(v,{...C,method:"GET"});return this.request("GET",v,_)}async post(v,C,_){const R=await this.applyRequestInterceptor(v,{..._,method:"POST",body:C?JSON.stringify(C):void 0,headers:{"Content-Type":"application/json",..._?.headers}});return this.request("POST",v,R)}async put(v,C,_){const R=await this.applyRequestInterceptor(v,{..._,method:"PUT",body:C?JSON.stringify(C):void 0,headers:{"Content-Type":"application/json",..._?.headers}});return this.request("PUT",v,R)}async patch(v,C,_){const R=await this.applyRequestInterceptor(v,{..._,method:"PATCH",body:C?JSON.stringify(C):void 0,headers:{"Content-Type":"application/json",..._?.headers}});return this.request("PATCH",v,R)}async delete(v,C){const _=await this.applyRequestInterceptor(v,{...C,method:"DELETE"});return this.request("DELETE",v,_)}async getPermissions(v){return p.getPermissions(this.permissionService,this.misoClient,()=>this.getToken(),v)}async hasPermission(v,C){return p.hasPermission(this.permissionService,this.misoClient,()=>this.getToken(),v,C)}async hasAnyPermission(v,C){return p.hasAnyPermission(this.permissionService,this.misoClient,()=>this.getToken(),v,C)}async hasAllPermissions(v,C){return p.hasAllPermissions(this.permissionService,this.misoClient,()=>this.getToken(),v,C)}async refreshPermissions(v){return p.refreshPermissions(this.permissionService,this.misoClient,()=>this.getToken(),v)}async clearPermissionsCache(v){return p.clearPermissionsCache(this.permissionService,this.misoClient,()=>this.getToken(),v)}async getRoles(v){return y.getRoles(this.roleService,this.misoClient,()=>this.getToken(),v)}async hasRole(v,C){return y.hasRole(this.roleService,this.misoClient,()=>this.getToken(),v,C)}async hasAnyRole(v,C){return y.hasAnyRole(this.roleService,this.misoClient,()=>this.getToken(),v,C)}async hasAllRoles(v,C){return y.hasAllRoles(this.roleService,this.misoClient,()=>this.getToken(),v,C)}async refreshRoles(v){return y.refreshRoles(this.roleService,this.misoClient,()=>this.getToken(),v)}async clearRolesCache(v){return y.clearRolesCache(this.roleService,this.misoClient,()=>this.getToken(),v)}async validateToken(v){if(!this.misoClient)return!1;const C=v||this.getToken();return C?this.misoClient.validateToken(C):!1}async getUser(v){if(!this.misoClient)return null;const C=v||this.getToken();return C?this.misoClient.getUser(C):null}async getUserInfo(v){if(!this.misoClient)return null;const C=v||this.getToken();return C?this.misoClient.getUserInfo(C):null}async isAuthenticatedAsync(v){return this.validateToken(v)}async getEnvironmentToken(){return(0,d.getEnvironmentToken)(this.config,this.misoClient)}getClientTokenInfo(){return(0,d.getClientTokenInfo)(this.config.misoConfig)}}en.DataClient=S;let E=null;function b(x){if(!E&&x&&(E=new S(x)),!E)throw new Error("DataClient not initialized. Call dataClient(config) first.");return E}return en}var Al={},Nl={},zb;function oO(){if(zb)return Nl;zb=1,Object.defineProperty(Nl,"__esModule",{value:!0}),Nl.hasConfig=i,Nl.createClientTokenEndpoint=d;const t=fy(),s=$l(),n=Cd();function i(h){return h.config!==void 0}function a(h){const f=h instanceof Error?h.message:"Unknown error",p=f.match(/status:\s*(\d+)/i)||f.match(/status code\s+(\d+)/i)||f.match(/status\s+(\d+)/i);let y=p?parseInt(p[1],10):void 0,S=!1,E=h;for(let b=0;b<5&&E;b++){if(E&&typeof E=="object"&&"isAxiosError"in E&&E.isAxiosError){const x=E;if(x.response){y=x.response.status;break}if(x.request&&!x.response){S=!0;break}}if(E&&typeof E=="object"&&"cause"in E)E=E.cause;else break}return{status:y,isNetworkError:S}}function l(h,f){const p=f||/ECONNREFUSED|ENOTFOUND|ETIMEDOUT|connect|Network Error|network error|getaddrinfo/i.test(h),y=h.includes("Request timeout: Failed to get environment token")||/timeout/i.test(h);return{isNetwork:p,isTimeout:y}}function o(h,f,p,y){const S=h instanceof Error?h.message:"Unknown error";if(S.includes("Origin validation failed")){(0,n.sendErrorResponse)(p,(0,n.createErrorResponse)(S,403,f));return}const{status:E,isNetworkError:b}=a(h);if(E){const C=E===401?"Failed to get environment token: Invalid client credentials or application not found":E===403?"Failed to get environment token: Access denied":S;(0,n.sendErrorResponse)(p,(0,n.createErrorResponse)(C,E,f));return}const{isNetwork:x,isTimeout:v}=l(S,b);if(x||v){const C=y.getConfig();let _;try{_=(0,s.resolveControllerUrl)(C)}catch{_=C.controllerPrivateUrl||C.controllerUrl||"NOT CONFIGURED"}const R=x?`Controller is unreachable. URL: ${_}.`:`Controller request timed out. URL: ${_}.`;(0,n.sendErrorResponse)(p,(0,n.createErrorResponse)(`Failed to get environment token: ${R}`,504,f));return}(0,n.sendErrorResponse)(p,(0,n.createErrorResponse)(S,500,f))}function u(h,f,p){const y=f.getConfig(),S=y.controllerPublicUrl||y.controllerUrl;return S?{baseUrl:`${h.protocol}://${h.get("host")||"localhost"}`,controllerUrl:S,controllerPublicUrl:y.controllerPublicUrl,clientId:y.clientId,clientTokenUri:p}:null}function d(h,f){const p={clientTokenUri:"/api/v1/auth/client-token",expiresIn:1800,includeConfig:!0,...f};return async(y,S)=>{const E=()=>S.headersSent||S.writableEnded;try{if(!h.isInitialized()){E()||(0,n.sendErrorResponse)(S,(0,n.createErrorResponse)("MisoClient is not initialized",503,y));return}const b=new Promise((C,_)=>setTimeout(()=>_(new Error("Request timeout: Failed to get environment token within 5 seconds")),5e3));let x;try{x=await Promise.race([(0,t.getEnvironmentToken)(h,y),b])}catch(C){E()||o(C,y,S,h);return}const v={token:x,expiresIn:p.expiresIn};if(p.includeConfig){const C=u(y,h,p.clientTokenUri);if(!C){E()||(0,n.sendErrorResponse)(S,(0,n.createErrorResponse)("Controller URL not configured",500,y));return}v.config=C}E()||S.json(v)}catch(b){if(E())return;const x=b instanceof Error?b.message:"Unknown error";if(x.includes("Origin validation failed")){(0,n.sendErrorResponse)(S,(0,n.createErrorResponse)(x,403,y));return}if(/timeout/i.test(x)){(0,n.sendErrorResponse)(S,(0,n.createErrorResponse)("Failed to get environment token: Request timed out",504,y));return}(0,n.sendErrorResponse)(S,(0,n.createErrorResponse)(x,500,y))}}}return Nl}var Kb;function aO(){if(Kb)return Al;Kb=1,Object.defineProperty(Al,"__esModule",{value:!0}),Al.getCachedDataClientConfig=a,Al.autoInitializeDataClient=u;const t=JC(),s=nn(),n=oO();function i(){if(!(0,s.isBrowser)())return null;try{const d=(0,s.getLocalStorage)("miso:dataclient-config");if(!d)return null;const h=JSON.parse(d);return h.expiresAt&&h.expiresAt<Date.now()?((0,s.removeLocalStorage)("miso:dataclient-config"),null):h}catch{return(0,s.removeLocalStorage)("miso:dataclient-config"),null}}function a(){return i()?.config||null}function l(d,h){if((0,s.isBrowser)())try{const f={config:d,expiresAt:Date.now()+h*1e3};(0,s.setLocalStorage)("miso:dataclient-config",JSON.stringify(f))}catch{}}async function o(d,h){const f=/^https?:\/\//i.test(h)?h:`${d}${h}`,p=3e4,y=new AbortController,S=setTimeout(()=>y.abort(),p);try{let E;try{E=await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",signal:y.signal})}catch(x){clearTimeout(S);const v=x instanceof Error?x.message:String(x);throw(x instanceof Error?x.name:"Unknown")==="AbortError"||v.includes("aborted")?new Error(`Request timeout: The client token endpoint did not respond within ${p}ms. Please check if the server is running and accessible at ${f}`):v.includes("ERR_EMPTY_RESPONSE")||v.includes("empty response")?new Error(`Connection error: The server closed the connection without sending a response. Please check if the server is running and accessible at ${f}`):v.includes("Failed to fetch")||v.includes("network")?new Error(`Network error: Cannot connect to ${f}. Please check your network connection and ensure the server is running.`):new Error(`Failed to fetch config: ${v}`)}if(clearTimeout(S),E.status===405){const x=new AbortController,v=setTimeout(()=>x.abort(),p);try{E=await fetch(f,{method:"GET",credentials:"include",signal:x.signal}),clearTimeout(v)}catch(C){clearTimeout(v);const _=C instanceof Error?C.message:String(C);throw(C instanceof Error?C.name:"Unknown")==="AbortError"||_.includes("aborted")?new Error(`Request timeout: The client token endpoint did not respond within ${p}ms. Please check if the server is running and accessible at ${f}`):new Error(`Failed to fetch config: ${_}`)}}if(!E.ok){let x=`Failed to fetch config: ${E.status} ${E.statusText}`,v;try{const _=E.headers.get("content-type");if(_&&_.includes("application/json")){const R=await E.json().catch(()=>null);if(R&&(typeof R.message=="string"?x=R.message:typeof R.error=="string"&&(x=R.error),R.details)){if(typeof R.details=="string")v=R.details;else if(typeof R.details=="object"&&R.details!==null){const D=R.details;typeof D.suggestion=="string"?v=D.suggestion:typeof D.controllerUrl=="string"&&(v=`Controller URL: ${D.controllerUrl}`)}}}else{const R=await E.text().catch(()=>"Unable to read error response");R&&R!=="Unable to read error response"&&(x=`${x}. ${R}`)}}catch{try{const R=await E.text().catch(()=>"");R&&(x=`${x}. ${R}`)}catch{}}const C=v?`${x}. ${v}`:x;throw new Error(C)}const b=await E.json();if(!(0,n.hasConfig)(b))throw new Error("Invalid response format: config not found in response. Make sure your server endpoint uses createClientTokenEndpoint() helper.");return b.config}catch(E){throw E instanceof Error?E:new Error(`Network error: ${String(E)}`)}}async function u(d){if(!(0,s.isBrowser)())throw new Error("autoInitializeDataClient() is only available in browser environment");const h={clientTokenUri:d?.clientTokenUri||"/api/v1/auth/client-token",cacheConfig:d?.cacheConfig??!0,baseUrl:d?.baseUrl,onError:d?.onError};try{const f=h.baseUrl||((0,s.isBrowser)()?globalThis.window.location.origin:"");if(!f)throw new Error("Unable to detect baseUrl. Please provide baseUrl option.");let p=null;if(h.cacheConfig){const S=i();S&&(p=S.config)}p||(p=await o(f,h.clientTokenUri),h.cacheConfig&&l(p,1800));const y={baseUrl:p.baseUrl,misoConfig:{clientId:p.clientId,controllerUrl:p.controllerUrl,controllerPublicUrl:p.controllerPublicUrl,clientTokenUri:p.clientTokenUri}};return new t.DataClient(y)}catch(f){const p=f instanceof Error?f:new Error(String(f));throw h.onError&&h.onError(p),p}}return Al}var Wb;function YC(){return Wb||(Wb=1,(function(t){var s=_i&&_i.__createBinding||(Object.create?(function(Ne,ue,ve,He){He===void 0&&(He=ve);var ft=Object.getOwnPropertyDescriptor(ue,ve);(!ft||("get"in ft?!ue.__esModule:ft.writable||ft.configurable))&&(ft={enumerable:!0,get:function(){return ue[ve]}}),Object.defineProperty(Ne,He,ft)}):(function(Ne,ue,ve,He){He===void 0&&(He=ve),Ne[He]=ue[ve]})),n=_i&&_i.__exportStar||function(Ne,ue){for(var ve in Ne)ve!=="default"&&!Object.prototype.hasOwnProperty.call(ue,ve)&&s(ue,Ne,ve)};Object.defineProperty(t,"__esModule",{value:!0}),t.autoInitializeDataClient=t.dataClient=t.DataClient=t.loggerContextMiddleware=t.hasConfig=t.createClientTokenEndpoint=t.sendErrorResponse=t.getErrorTitle=t.getErrorTypeUri=t.handleRouteError=t.setErrorLogger=t.createErrorResponse=t.createSuccessResponse=t.AppError=t.ValidationHelper=t.asyncHandlerNamed=t.asyncHandler=t.injectResponseHelpers=t.ResponseHelper=t.EncryptionError=t.EncryptionService=t.handleApiError=t.transformError=t.ApiErrorException=t.MisoClientError=t.extractRequestContext=t.extractLoggingContext=t.validateUrl=t.isBrowser=t.resolveKeycloakUrl=t.resolveControllerUrl=t.extractClientTokenInfo=t.getEnvironmentToken=t.validateOrigin=t.loadConfig=t.mergeLoggerContext=t.clearLoggerContext=t.setLoggerContext=t.getLogger=t.HttpClient=t.CacheService=t.RedisService=t.LoggerService=t.BrowserRoleService=t.BrowserPermissionService=t.PermissionService=t.RoleService=t.AuthService=t.detectAuthMethodFromHeaders=t.MisoClient=void 0,t.TokenValidationService=t.getCachedDataClientConfig=void 0;const i=w0(),a=VS(),l=JS(),o=sg(),u=ig(),d=og(),h=ag(),f=Xg(),p=Y1(),y=Qo(),S=J1(),E=lg(),b=Jx(),x=Qx();class v{constructor(ue){this.initialized=!1,this.config=ue,ue.sensitiveFieldsConfig&&y.DataMasker.setConfigPath(ue.sensitiveFieldsConfig);const ve=new f.InternalHttpClient(ue);this.redis=new u.RedisService(ue.redis),this.logger=new o.LoggerService(ve,this.redis),this.httpClient=new h.HttpClient(ue,this.logger),this.logger.httpClient=this.httpClient,this.apiClient=new p.ApiClient(this.httpClient),this.logger.setApiClient(this.apiClient);const{registerLoggerService:He}=eb();He(this.logger),this.cacheService=new d.CacheService(this.redis),this.auth=new i.AuthService(this.httpClient,this.apiClient,this.cacheService),this.roles=new a.RoleService(this.httpClient,this.apiClient,this.cacheService),this.permissions=new l.PermissionService(this.httpClient,this.apiClient,this.cacheService),this.tokenValidation=new b.TokenValidationService(ue.keycloak),this.encryptionService=new x.EncryptionService(this.apiClient,this.config.encryptionKey)}async initialize(){if(!this.initialized)try{await this.redis.connect(),this.initialized=!0}catch{this.initialized=!0}}async disconnect(){await this.redis.disconnect(),this.initialized=!1}isInitialized(){return this.initialized}getToken(ue){const ve=ue.headers.authorization;return ve?ve.startsWith("Bearer ")?ve.substring(7):ve:null}validateOrigin(ue,ve){const He=ve??this.config.allowedOrigins;return(0,E.validateOrigin)(ue,He)}async getEnvironmentToken(){return this.auth.getEnvironmentToken()}async login(ue){return this.auth.login(ue)}async validateToken(ue,ve){return this.auth.validateToken(ue,ve)}async getUser(ue,ve){return this.auth.getUser(ue,ve)}async getUserInfo(ue,ve){return this.auth.getUserInfo(ue,ve)}async isAuthenticated(ue,ve){return this.auth.isAuthenticated(ue,ve)}async logout(ue){return this.auth.logout(ue)}async refreshToken(ue,ve){return this.auth.refreshToken(ue,ve)}async validateTokenLocal(ue,ve){return this.tokenValidation.validateTokenLocal(ue,ve)}setKeycloakConfig(ue){this.tokenValidation.setKeycloakConfig(ue)}clearJwksCache(ue){this.tokenValidation.clearCache(ue)}clearValidationCache(){this.tokenValidation.clearResultCache()}clearAllTokenCaches(){this.tokenValidation.clearAllCaches()}async getRoles(ue,ve){return this.roles.getRoles(ue,ve)}async hasRole(ue,ve,He){return this.roles.hasRole(ue,ve,He)}async hasAnyRole(ue,ve,He){return this.roles.hasAnyRole(ue,ve,He)}async hasAllRoles(ue,ve,He){return this.roles.hasAllRoles(ue,ve,He)}async refreshRoles(ue,ve){return this.roles.refreshRoles(ue,ve)}async getPermissions(ue,ve){return this.permissions.getPermissions(ue,ve)}async hasPermission(ue,ve,He){return this.permissions.hasPermission(ue,ve,He)}async hasAnyPermission(ue,ve,He){return this.permissions.hasAnyPermission(ue,ve,He)}async hasAllPermissions(ue,ve,He){return this.permissions.hasAllPermissions(ue,ve,He)}async refreshPermissions(ue,ve){return this.permissions.refreshPermissions(ue,ve)}async clearPermissionsCache(ue,ve){return this.permissions.clearPermissionsCache(ue,ve)}get log(){return this.logger}get encryption(){return this.encryptionService}get cache(){return this.cacheService}getConfig(){return{...this.config}}isRedisConnected(){return this.redis.isConnected()}async requestWithAuthStrategy(ue,ve,He,ft,U){return this.httpClient.requestWithAuthStrategy(ue,ve,He,ft,U)}createAuthStrategy(ue,ve,He){return{methods:ue,bearerToken:ve,apiKey:He}}getDefaultAuthStrategy(ue){return S.AuthStrategyHandler.getDefaultStrategy(ue)}}t.MisoClient=v,n(Jg(),t),n(DC(),t),n(MC(),t);var C=Yg();Object.defineProperty(t,"detectAuthMethodFromHeaders",{enumerable:!0,get:function(){return C.detectAuthMethodFromHeaders}});var _=w0();Object.defineProperty(t,"AuthService",{enumerable:!0,get:function(){return _.AuthService}});var R=VS();Object.defineProperty(t,"RoleService",{enumerable:!0,get:function(){return R.RoleService}});var D=JS();Object.defineProperty(t,"PermissionService",{enumerable:!0,get:function(){return D.PermissionService}});var A=$C();Object.defineProperty(t,"BrowserPermissionService",{enumerable:!0,get:function(){return A.BrowserPermissionService}});var j=UC();Object.defineProperty(t,"BrowserRoleService",{enumerable:!0,get:function(){return j.BrowserRoleService}});var k=sg();Object.defineProperty(t,"LoggerService",{enumerable:!0,get:function(){return k.LoggerService}});var K=ig();Object.defineProperty(t,"RedisService",{enumerable:!0,get:function(){return K.RedisService}});var Z=og();Object.defineProperty(t,"CacheService",{enumerable:!0,get:function(){return Z.CacheService}});var ie=ag();Object.defineProperty(t,"HttpClient",{enumerable:!0,get:function(){return ie.HttpClient}});var ce=eb();Object.defineProperty(t,"getLogger",{enumerable:!0,get:function(){return ce.getLogger}}),Object.defineProperty(t,"setLoggerContext",{enumerable:!0,get:function(){return ce.setLoggerContext}}),Object.defineProperty(t,"clearLoggerContext",{enumerable:!0,get:function(){return ce.clearLoggerContext}}),Object.defineProperty(t,"mergeLoggerContext",{enumerable:!0,get:function(){return ce.mergeLoggerContext}});var V=LP();Object.defineProperty(t,"loadConfig",{enumerable:!0,get:function(){return V.loadConfig}});var F=lg();Object.defineProperty(t,"validateOrigin",{enumerable:!0,get:function(){return F.validateOrigin}});var O=DP();Object.defineProperty(t,"getEnvironmentToken",{enumerable:!0,get:function(){return O.getEnvironmentToken}});var q=qC();Object.defineProperty(t,"extractClientTokenInfo",{enumerable:!0,get:function(){return q.extractClientTokenInfo}});var W=zl();Object.defineProperty(t,"resolveControllerUrl",{enumerable:!0,get:function(){return W.resolveControllerUrl}}),Object.defineProperty(t,"resolveKeycloakUrl",{enumerable:!0,get:function(){return W.resolveKeycloakUrl}}),Object.defineProperty(t,"isBrowser",{enumerable:!0,get:function(){return W.isBrowser}}),Object.defineProperty(t,"validateUrl",{enumerable:!0,get:function(){return W.validateUrl}});var L=MP();Object.defineProperty(t,"extractLoggingContext",{enumerable:!0,get:function(){return L.extractLoggingContext}});var Y=$P();Object.defineProperty(t,"extractRequestContext",{enumerable:!0,get:function(){return Y.extractRequestContext}}),n(UP(),t),n(FP(),t),n(HP(),t),n(BP(),t);var ee=Xo();Object.defineProperty(t,"MisoClientError",{enumerable:!0,get:function(){return ee.MisoClientError}}),Object.defineProperty(t,"ApiErrorException",{enumerable:!0,get:function(){return ee.ApiErrorException}}),Object.defineProperty(t,"transformError",{enumerable:!0,get:function(){return ee.transformError}}),Object.defineProperty(t,"handleApiError",{enumerable:!0,get:function(){return ee.handleApiError}});var H=Qx();Object.defineProperty(t,"EncryptionService",{enumerable:!0,get:function(){return H.EncryptionService}});var X=zP();Object.defineProperty(t,"EncryptionError",{enumerable:!0,get:function(){return X.EncryptionError}});var ne=eO();Object.defineProperty(t,"ResponseHelper",{enumerable:!0,get:function(){return ne.ResponseHelper}}),Object.defineProperty(t,"injectResponseHelpers",{enumerable:!0,get:function(){return ne.injectResponseHelpers}}),Object.defineProperty(t,"asyncHandler",{enumerable:!0,get:function(){return ne.asyncHandler}}),Object.defineProperty(t,"asyncHandlerNamed",{enumerable:!0,get:function(){return ne.asyncHandlerNamed}}),Object.defineProperty(t,"ValidationHelper",{enumerable:!0,get:function(){return ne.ValidationHelper}}),Object.defineProperty(t,"AppError",{enumerable:!0,get:function(){return ne.AppError}}),Object.defineProperty(t,"createSuccessResponse",{enumerable:!0,get:function(){return ne.createSuccessResponse}}),Object.defineProperty(t,"createErrorResponse",{enumerable:!0,get:function(){return ne.createErrorResponse}}),Object.defineProperty(t,"setErrorLogger",{enumerable:!0,get:function(){return ne.setErrorLogger}}),Object.defineProperty(t,"handleRouteError",{enumerable:!0,get:function(){return ne.handleRouteError}}),Object.defineProperty(t,"getErrorTypeUri",{enumerable:!0,get:function(){return ne.getErrorTypeUri}}),Object.defineProperty(t,"getErrorTitle",{enumerable:!0,get:function(){return ne.getErrorTitle}}),Object.defineProperty(t,"sendErrorResponse",{enumerable:!0,get:function(){return ne.sendErrorResponse}}),Object.defineProperty(t,"createClientTokenEndpoint",{enumerable:!0,get:function(){return ne.createClientTokenEndpoint}}),Object.defineProperty(t,"hasConfig",{enumerable:!0,get:function(){return ne.hasConfig}}),Object.defineProperty(t,"loggerContextMiddleware",{enumerable:!0,get:function(){return ne.loggerContextMiddleware}});var fe=JC();Object.defineProperty(t,"DataClient",{enumerable:!0,get:function(){return fe.DataClient}}),Object.defineProperty(t,"dataClient",{enumerable:!0,get:function(){return fe.dataClient}});var he=aO();Object.defineProperty(t,"autoInitializeDataClient",{enumerable:!0,get:function(){return he.autoInitializeDataClient}}),Object.defineProperty(t,"getCachedDataClientConfig",{enumerable:!0,get:function(){return he.getCachedDataClientConfig}});var Ae=Jx();Object.defineProperty(t,"TokenValidationService",{enumerable:!0,get:function(){return Ae.TokenValidationService}})})(_i)),_i}var XC=YC();const QC=G.createContext(void 0);function lO({children:t,initOptions:s}){const[n,i]=G.useState(null),[a,l]=G.useState(!0),[o,u]=G.useState(null),[d,h]=G.useState(0),f=3,p=2e3,y=async(x=0)=>{l(!0),u(null);try{const v=await XC.autoInitializeDataClient({clientTokenUri:s?.clientTokenUri,baseUrl:s?.baseUrl,cacheConfig:s?.cacheConfig??!0,onError:C=>{u(C)}});i(v),h(0)}catch(v){const C=v instanceof Error?v:new Error(String(v));if(x<f){const _=x+1;h(_);const R=p*Math.pow(2,x);return await new Promise(D=>setTimeout(D,R)),y(_)}u(C),i(null)}finally{l(!1)}},S=async()=>{h(0),await y(0)},E=x=>{i(x),u(null),l(!1),h(0)};G.useEffect(()=>{y()},[]);const b=G.useMemo(()=>({dataClient:n,isLoading:a,error:o,retryCount:d,reinitialize:S,setManualClient:E}),[n,a,o,d]);return g.jsx(QC.Provider,{value:b,children:t})}function ea(){const t=G.useContext(QC);if(t===void 0)throw new Error("useDataClient must be used within DataClientProvider");return t}function Vb(t){if(!t)return null;const s=t.message||String(t);try{const n=t;if(n.response?.data){const i=n.response.data;if(typeof i=="object"&&i!==null){const a=i,l=a.title&&typeof a.title=="string"?a.title:"Error",o=a.detail&&typeof a.detail=="string"?a.detail:l;if(a.title||a.detail)return{title:l,detail:o}}}}catch{}try{const n=s.indexOf("{");if(n!==-1){let i=0,a=-1;for(let l=n;l<s.length;l++)if(s[l]==="{"&&i++,s[l]==="}"&&(i--,i===0)){a=l;break}if(a!==-1){const l=s.substring(n,a+1),o=JSON.parse(l);if(o.title||o.detail){const u=o.title&&typeof o.title=="string"?o.title:"Error",d=o.detail&&typeof o.detail=="string"?o.detail:u;return{title:u,detail:d}}if(o.message&&typeof o.message=="string")return{title:"Error",detail:o.message};if(o.error&&typeof o.error=="string")return{title:"Error",detail:o.error}}}}catch{}return s.includes("ERR_EMPTY_RESPONSE")||s.includes("empty response")||s.includes("Connection error")?{title:"Connection Error",detail:"The server closed the connection without sending a response. Please check if the server is running and accessible."}:s.includes("timeout")||s.includes("Timeout")||s.includes("did not respond within")?{title:"Timeout Error",detail:"Request timed out. Please check your network connection and ensure the server is running."}:s.includes("Network")||s.includes("Failed to fetch")||s.includes("network")?{title:"Network Error",detail:"Unable to connect to server. Please check if the server is running and accessible."}:s.includes("CORS")||s.includes("cross-origin")||s.includes("CORS policy")?{title:"CORS Error",detail:"Cross-origin request blocked. Please check CORS configuration on the server."}:s.includes("ECONNREFUSED")||s.includes("connection refused")?{title:"Connection Error",detail:"Connection refused. Please check if the server is running and accessible."}:s.includes("ENOTFOUND")||s.includes("getaddrinfo")?{title:"Connection Error",detail:"Unable to resolve server address. Please check the server URL configuration."}:null}function Tt(t){return t instanceof Error?t.message:typeof t=="string"?t:"Unknown error occurred"}function Ym(t){const s=t;return s?.status||s?.response?.status||null}function Gb(){const{dataClient:t,error:s,isLoading:n,reinitialize:i}=ea(),[a,l]=G.useState(!1),[o,u]=G.useState(null),d=()=>{const D=XC.getCachedDataClientConfig();return D?{baseUrl:D.baseUrl||"",controllerUrl:D.controllerUrl||"",clientId:D.clientId||"",clientTokenUri:D.clientTokenUri}:null};G.useEffect(()=>{if(t){const D=d();u(D||{baseUrl:typeof window<"u"?window.location.origin:"http://localhost:3183",controllerUrl:"",clientId:""})}else u(null)},[t]);const h=async()=>{l(!0);try{await i();const D=d();D&&u(D),pe.success("DataClient initialized successfully",{description:"Configuration fetched from server endpoint"})}catch(D){const A=D instanceof Error?D:new Error(Tt(D)),j=Vb(A),k=j?.title||"Failed to initialize DataClient",K=j?.detail||A.message||"Unknown error occurred";pe.error(k,{description:K,duration:5e3})}finally{l(!1)}},f=!!t,p=o?.baseUrl||(typeof window<"u"?window.location.origin:""),y=o?.controllerUrl||"Not set",S=o?.clientId||"Not set",E=s?Vb(s):null,b=E?.title||(s?"Error":null),x=E?.detail||(s?s.message:null),v=E!==null,C=!n&&!a,_=C&&s&&b&&x,R=C&&f&&!s;return g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsx("div",{className:"border-b border-border bg-white",children:g.jsxs("div",{className:"px-8 py-6",children:[g.jsx("h1",{className:"text-2xl",children:"Configuration"}),g.jsx("p",{className:"text-muted-foreground mt-1",children:"Initialize and configure the Data Client connection"})]})}),g.jsx("div",{className:"flex-1 overflow-auto p-8",children:g.jsxs("div",{className:"max-w-4xl space-y-6",children:[_&&g.jsx(be,{className:"border-red-200 bg-red-50",children:g.jsx(Ce,{className:"pt-6",children:g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsx(Y_,{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"}),g.jsxs("div",{className:"flex-1",children:[g.jsx("p",{className:"font-medium text-red-900 mb-1",children:b}),g.jsx("p",{className:`text-sm text-red-700 ${v?"":"font-mono break-all"}`,children:x})]})]})})}),R&&g.jsx(be,{className:"border-green-200 bg-green-50",children:g.jsx(Ce,{className:"pt-6",children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(Zb,{className:"w-6 h-6 text-green-600"}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium text-green-900",children:"DataClient Initialized"}),g.jsx("p",{className:"text-sm text-green-700",children:"Ready to make API requests"})]})]})})}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center",children:g.jsx(ER,{className:"w-5 h-5 text-blue-600"})}),g.jsxs("div",{children:[g.jsx(ke,{children:"Zero-Config Setup"}),g.jsx(We,{children:"Automatically fetch configuration from server (Recommended)"})]})]})}),g.jsx(Ce,{children:g.jsx(Qe,{onClick:h,disabled:n||a,className:"w-full",size:"lg",children:a?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Initializing..."]}):g.jsxs(g.Fragment,{children:["Auto-Initialize DataClient",g.jsx(W_,{className:"w-4 h-4 ml-2"})]})})})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-10 h-10 rounded-lg bg-muted flex items-center justify-center",children:g.jsx(e1,{className:"w-5 h-5 text-muted-foreground"})}),g.jsxs("div",{children:[g.jsx(ke,{children:"Configuration Settings"}),g.jsx(We,{children:"Configure settings via environment variables"})]})]})}),g.jsx(Ce,{children:g.jsxs("div",{className:"space-y-4",children:[g.jsxs("p",{className:"text-sm text-muted-foreground",children:["You can change configuration settings by editing the ",g.jsx("code",{className:"px-1.5 py-0.5 bg-muted rounded text-xs",children:".env"})," file in the root directory:"]}),g.jsxs("div",{className:"bg-muted rounded-lg p-4 font-mono text-xs space-y-1",children:[g.jsx("div",{className:"text-muted-foreground",children:"# Application port (default: 3083)"}),g.jsx("div",{className:"text-muted-foreground",children:"PORT=3183"}),g.jsx("div",{className:"text-muted-foreground",children:"# MISO Application Client Credentials (per application)"}),g.jsx("div",{children:"MISO_CLIENTID=miso-controller-dev-miso-test"}),g.jsx("div",{children:"MISO_CLIENTSECRET=your-secret-here"}),g.jsx("div",{className:"text-muted-foreground",children:"# MISO Controller URL"}),g.jsx("div",{children:"MISO_CONTROLLER_URL=http://localhost:3000"})]}),g.jsxs("p",{className:"text-sm text-muted-foreground",children:["After modifying the ",g.jsx("code",{className:"px-1.5 py-0.5 bg-muted rounded text-xs",children:".env"})," file, restart the server for changes to take effect."]})]})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{children:"Connection Information"}),g.jsx(We,{children:"Current configuration settings"})]}),g.jsx(Ce,{children:g.jsxs("div",{className:"space-y-3 text-sm",children:[g.jsxs("div",{className:"flex justify-between py-2 border-b border-border",children:[g.jsx("span",{className:"text-muted-foreground",children:"Status"}),g.jsx("span",{className:f?"text-green-600 font-medium":"text-muted-foreground",children:f?"Connected":"Not Initialized"})]}),g.jsxs("div",{className:"flex justify-between py-2 border-b border-border",children:[g.jsx("span",{className:"text-muted-foreground",children:"Base URL"}),g.jsx("span",{className:"font-mono text-xs",children:p})]}),g.jsxs("div",{className:"flex justify-between py-2 border-b border-border",children:[g.jsx("span",{className:"text-muted-foreground",children:"Controller URL"}),g.jsx("span",{className:"font-mono text-xs",children:y})]}),g.jsxs("div",{className:"flex justify-between py-2 border-b border-border",children:[g.jsx("span",{className:"text-muted-foreground",children:"Client ID"}),g.jsx("span",{className:"font-mono text-xs",children:S})]}),o?.clientTokenUri&&g.jsxs("div",{className:"flex justify-between py-2",children:[g.jsx("span",{className:"text-muted-foreground",children:"Client Token URI"}),g.jsx("span",{className:"font-mono text-xs",children:o.clientTokenUri})]})]})})]})]})})]})}function vs(t,s,{checkForDefaultPrevented:n=!0}={}){return function(a){if(t?.(a),n===!1||!a.defaultPrevented)return s?.(a)}}function hy(t,s=[]){let n=[];function i(l,o){const u=G.createContext(o),d=n.length;n=[...n,o];const h=p=>{const{scope:y,children:S,...E}=p,b=y?.[t]?.[d]||u,x=G.useMemo(()=>E,Object.values(E));return g.jsx(b.Provider,{value:x,children:S})};h.displayName=l+"Provider";function f(p,y){const S=y?.[t]?.[d]||u,E=G.useContext(S);if(E)return E;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${l}\``)}return[h,f]}const a=()=>{const l=n.map(o=>G.createContext(o));return function(u){const d=u?.[t]||l;return G.useMemo(()=>({[`__scope${t}`]:{...u,[t]:d}}),[u,d])}};return a.scopeName=t,[i,cO(a,...s)]}function cO(...t){const s=t[0];if(t.length===1)return s;const n=()=>{const i=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(l){const o=i.reduce((u,{useScope:d,scopeName:h})=>{const p=d(l)[`__scope${h}`];return{...u,...p}},{});return G.useMemo(()=>({[`__scope${s.scopeName}`]:o}),[o])}};return n.scopeName=s.scopeName,n}function yg(t){const s=uO(t),n=G.forwardRef((i,a)=>{const{children:l,...o}=i,u=G.Children.toArray(l),d=u.find(fO);if(d){const h=d.props.children,f=u.map(p=>p===d?G.Children.count(h)>1?G.Children.only(null):G.isValidElement(h)?h.props.children:null:p);return g.jsx(s,{...o,ref:a,children:G.isValidElement(h)?G.cloneElement(h,void 0,f):null})}return g.jsx(s,{...o,ref:a,children:l})});return n.displayName=`${t}.Slot`,n}function uO(t){const s=G.forwardRef((n,i)=>{const{children:a,...l}=n;if(G.isValidElement(a)){const o=pO(a),u=hO(l,a.props);return a.type!==G.Fragment&&(u.ref=i?bg(i,o):o),G.cloneElement(a,u)}return G.Children.count(a)>1?G.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var dO=Symbol("radix.slottable");function fO(t){return G.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===dO}function hO(t,s){const n={...s};for(const i in s){const a=t[i],l=s[i];/^on[A-Z]/.test(i)?a&&l?n[i]=(...u)=>{const d=l(...u);return a(...u),d}:a&&(n[i]=a):i==="style"?n[i]={...a,...l}:i==="className"&&(n[i]=[a,l].filter(Boolean).join(" "))}return{...t,...n}}function pO(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function mO(t){const s=t+"CollectionProvider",[n,i]=hy(s),[a,l]=n(s,{collectionRef:{current:null},itemMap:new Map}),o=b=>{const{scope:x,children:v}=b,C=G.useRef(null),_=G.useRef(new Map).current;return g.jsx(a,{scope:x,itemMap:_,collectionRef:C,children:v})};o.displayName=s;const u=t+"CollectionSlot",d=yg(u),h=G.forwardRef((b,x)=>{const{scope:v,children:C}=b,_=l(u,v),R=Lu(x,_.collectionRef);return g.jsx(d,{ref:R,children:C})});h.displayName=u;const f=t+"CollectionItemSlot",p="data-radix-collection-item",y=yg(f),S=G.forwardRef((b,x)=>{const{scope:v,children:C,..._}=b,R=G.useRef(null),D=Lu(x,R),A=l(f,v);return G.useEffect(()=>(A.itemMap.set(R,{ref:R,..._}),()=>void A.itemMap.delete(R))),g.jsx(y,{[p]:"",ref:D,children:C})});S.displayName=f;function E(b){const x=l(t+"CollectionConsumer",b);return G.useCallback(()=>{const C=x.collectionRef.current;if(!C)return[];const _=Array.from(C.querySelectorAll(`[${p}]`));return Array.from(x.itemMap.values()).sort((A,j)=>_.indexOf(A.ref.current)-_.indexOf(j.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:h,ItemSlot:S},E,i]}var Vu=globalThis?.document?G.useLayoutEffect:()=>{},gO=xg[" useId ".trim().toString()]||(()=>{}),yO=0;function ZC(t){const[s,n]=G.useState(gO());return Vu(()=>{n(i=>i??String(yO++))},[t]),t||(s?`radix-${s}`:"")}var vO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ta=vO.reduce((t,s)=>{const n=yg(`Primitive.${s}`),i=G.forwardRef((a,l)=>{const{asChild:o,...u}=a,d=o?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(d,{...u,ref:l})});return i.displayName=`Primitive.${s}`,{...t,[s]:i}},{});function EO(t){const s=G.useRef(t);return G.useEffect(()=>{s.current=t}),G.useMemo(()=>(...n)=>s.current?.(...n),[])}var wO=xg[" useInsertionEffect ".trim().toString()]||Vu;function eT({prop:t,defaultProp:s,onChange:n=()=>{},caller:i}){const[a,l,o]=SO({defaultProp:s,onChange:n}),u=t!==void 0,d=u?t:a;{const f=G.useRef(t!==void 0);G.useEffect(()=>{const p=f.current;p!==u&&console.warn(`${i} is changing from ${p?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=u},[u,i])}const h=G.useCallback(f=>{if(u){const p=xO(f)?f(t):f;p!==t&&o.current?.(p)}else l(f)},[u,t,l,o]);return[d,h]}function SO({defaultProp:t,onChange:s}){const[n,i]=G.useState(t),a=G.useRef(n),l=G.useRef(s);return wO(()=>{l.current=s},[s]),G.useEffect(()=>{a.current!==n&&(l.current?.(n),a.current=n)},[n,a]),[n,i,l]}function xO(t){return typeof t=="function"}var bO=G.createContext(void 0);function tT(t){const s=G.useContext(bO);return t||s||"ltr"}var Xm="rovingFocusGroup.onEntryFocus",CO={bubbles:!1,cancelable:!0},Gl="RovingFocusGroup",[vg,rT,TO]=mO(Gl),[_O,nT]=hy(Gl,[TO]),[RO,kO]=_O(Gl),sT=G.forwardRef((t,s)=>g.jsx(vg.Provider,{scope:t.__scopeRovingFocusGroup,children:g.jsx(vg.Slot,{scope:t.__scopeRovingFocusGroup,children:g.jsx(IO,{...t,ref:s})})}));sT.displayName=Gl;var IO=G.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:a=!1,dir:l,currentTabStopId:o,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...p}=t,y=G.useRef(null),S=Lu(s,y),E=tT(l),[b,x]=eT({prop:o,defaultProp:u??null,onChange:d,caller:Gl}),[v,C]=G.useState(!1),_=EO(h),R=rT(n),D=G.useRef(!1),[A,j]=G.useState(0);return G.useEffect(()=>{const k=y.current;if(k)return k.addEventListener(Xm,_),()=>k.removeEventListener(Xm,_)},[_]),g.jsx(RO,{scope:n,orientation:i,dir:E,loop:a,currentTabStopId:b,onItemFocus:G.useCallback(k=>x(k),[x]),onItemShiftTab:G.useCallback(()=>C(!0),[]),onFocusableItemAdd:G.useCallback(()=>j(k=>k+1),[]),onFocusableItemRemove:G.useCallback(()=>j(k=>k-1),[]),children:g.jsx(ta.div,{tabIndex:v||A===0?-1:0,"data-orientation":i,...p,ref:S,style:{outline:"none",...t.style},onMouseDown:vs(t.onMouseDown,()=>{D.current=!0}),onFocus:vs(t.onFocus,k=>{const K=!D.current;if(k.target===k.currentTarget&&K&&!v){const Z=new CustomEvent(Xm,CO);if(k.currentTarget.dispatchEvent(Z),!Z.defaultPrevented){const ie=R().filter(q=>q.focusable),ce=ie.find(q=>q.active),V=ie.find(q=>q.id===b),O=[ce,V,...ie].filter(Boolean).map(q=>q.ref.current);aT(O,f)}}D.current=!1}),onBlur:vs(t.onBlur,()=>C(!1))})})}),iT="RovingFocusGroupItem",oT=G.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:a=!1,tabStopId:l,children:o,...u}=t,d=ZC(),h=l||d,f=kO(iT,n),p=f.currentTabStopId===h,y=rT(n),{onFocusableItemAdd:S,onFocusableItemRemove:E,currentTabStopId:b}=f;return G.useEffect(()=>{if(i)return S(),()=>E()},[i,S,E]),g.jsx(vg.ItemSlot,{scope:n,id:h,focusable:i,active:a,children:g.jsx(ta.span,{tabIndex:p?0:-1,"data-orientation":f.orientation,...u,ref:s,onMouseDown:vs(t.onMouseDown,x=>{i?f.onItemFocus(h):x.preventDefault()}),onFocus:vs(t.onFocus,()=>f.onItemFocus(h)),onKeyDown:vs(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){f.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const v=PO(x,f.orientation,f.dir);if(v!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let _=y().filter(R=>R.focusable).map(R=>R.ref.current);if(v==="last")_.reverse();else if(v==="prev"||v==="next"){v==="prev"&&_.reverse();const R=_.indexOf(x.currentTarget);_=f.loop?OO(_,R+1):_.slice(R+1)}setTimeout(()=>aT(_))}}),children:typeof o=="function"?o({isCurrentTabStop:p,hasTabStop:b!=null}):o})})});oT.displayName=iT;var AO={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function NO(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function PO(t,s,n){const i=NO(t.key,n);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return AO[i]}function aT(t,s=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:s}),document.activeElement!==n))return}function OO(t,s){return t.map((n,i)=>t[(s+i)%t.length])}var jO=sT,LO=oT;function DO(t,s){return G.useReducer((n,i)=>s[n][i]??n,t)}var lT=t=>{const{present:s,children:n}=t,i=MO(s),a=typeof n=="function"?n({present:i.isPresent}):G.Children.only(n),l=Lu(i.ref,$O(a));return typeof n=="function"||i.isPresent?G.cloneElement(a,{ref:l}):null};lT.displayName="Presence";function MO(t){const[s,n]=G.useState(),i=G.useRef(null),a=G.useRef(t),l=G.useRef("none"),o=t?"mounted":"unmounted",[u,d]=DO(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return G.useEffect(()=>{const h=Nu(i.current);l.current=u==="mounted"?h:"none"},[u]),Vu(()=>{const h=i.current,f=a.current;if(f!==t){const y=l.current,S=Nu(h);t?d("MOUNT"):S==="none"||h?.display==="none"?d("UNMOUNT"):d(f&&y!==S?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,d]),Vu(()=>{if(s){let h;const f=s.ownerDocument.defaultView??window,p=S=>{const b=Nu(i.current).includes(CSS.escape(S.animationName));if(S.target===s&&b&&(d("ANIMATION_END"),!a.current)){const x=s.style.animationFillMode;s.style.animationFillMode="forwards",h=f.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=x)})}},y=S=>{S.target===s&&(l.current=Nu(i.current))};return s.addEventListener("animationstart",y),s.addEventListener("animationcancel",p),s.addEventListener("animationend",p),()=>{f.clearTimeout(h),s.removeEventListener("animationstart",y),s.removeEventListener("animationcancel",p),s.removeEventListener("animationend",p)}}else d("ANIMATION_END")},[s,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:G.useCallback(h=>{i.current=h?getComputedStyle(h):null,n(h)},[])}}function Nu(t){return t?.animationName||"none"}function $O(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Td="Tabs",[UO]=hy(Td,[nT]),cT=nT(),[qO,py]=UO(Td),uT=G.forwardRef((t,s)=>{const{__scopeTabs:n,value:i,onValueChange:a,defaultValue:l,orientation:o="horizontal",dir:u,activationMode:d="automatic",...h}=t,f=tT(u),[p,y]=eT({prop:i,onChange:a,defaultProp:l??"",caller:Td});return g.jsx(qO,{scope:n,baseId:ZC(),value:p,onValueChange:y,orientation:o,dir:f,activationMode:d,children:g.jsx(ta.div,{dir:f,"data-orientation":o,...h,ref:s})})});uT.displayName=Td;var dT="TabsList",fT=G.forwardRef((t,s)=>{const{__scopeTabs:n,loop:i=!0,...a}=t,l=py(dT,n),o=cT(n);return g.jsx(jO,{asChild:!0,...o,orientation:l.orientation,dir:l.dir,loop:i,children:g.jsx(ta.div,{role:"tablist","aria-orientation":l.orientation,...a,ref:s})})});fT.displayName=dT;var hT="TabsTrigger",pT=G.forwardRef((t,s)=>{const{__scopeTabs:n,value:i,disabled:a=!1,...l}=t,o=py(hT,n),u=cT(n),d=yT(o.baseId,i),h=vT(o.baseId,i),f=i===o.value;return g.jsx(LO,{asChild:!0,...u,focusable:!a,active:f,children:g.jsx(ta.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":h,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...l,ref:s,onMouseDown:vs(t.onMouseDown,p=>{!a&&p.button===0&&p.ctrlKey===!1?o.onValueChange(i):p.preventDefault()}),onKeyDown:vs(t.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&o.onValueChange(i)}),onFocus:vs(t.onFocus,()=>{const p=o.activationMode!=="manual";!f&&!a&&p&&o.onValueChange(i)})})})});pT.displayName=hT;var mT="TabsContent",gT=G.forwardRef((t,s)=>{const{__scopeTabs:n,value:i,forceMount:a,children:l,...o}=t,u=py(mT,n),d=yT(u.baseId,i),h=vT(u.baseId,i),f=i===u.value,p=G.useRef(f);return G.useEffect(()=>{const y=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(y)},[]),g.jsx(lT,{present:a||f,children:({present:y})=>g.jsx(ta.div,{"data-state":f?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":d,hidden:!y,id:h,tabIndex:0,...o,ref:s,style:{...t.style,animationDuration:p.current?"0s":void 0},children:y&&l})})});gT.displayName=mT;function yT(t,s){return`${t}-trigger-${s}`}function vT(t,s){return`${t}-content-${s}`}var FO=uT,HO=fT,BO=pT,zO=gT;function _d({className:t,...s}){return g.jsx(FO,{"data-slot":"tabs",className:sn("flex flex-col gap-2",t),...s})}function Rd({className:t,...s}){return g.jsx(HO,{"data-slot":"tabs-list",className:sn("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...s})}function yr({className:t,...s}){return g.jsx(BO,{"data-slot":"tabs-trigger",className:sn("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function vr({className:t,...s}){return g.jsx(zO,{"data-slot":"tabs-content",className:sn("flex-1 outline-none",t),...s})}function KO(t,s){const[n,i]=G.useState(!1),[a,l]=G.useState(null),o=async(j,k,K)=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{let Z;switch(j){case"GET":Z=await t.get(k,{cache:{enabled:!1}});break;case"POST":Z=await t.post(k,K);break;case"PUT":Z=await t.put(k,K);break;case"PATCH":Z=await t.patch(k,K);break;case"DELETE":Z=await t.delete(k);break;default:throw new Error(`Unsupported method: ${j}`)}l({method:j,endpoint:k,status:200,timestamp:new Date().toISOString(),data:Z}),pe.success(`${j} ${k} successful`)}catch(Z){const ie=Tt(Z),ce=Ym(Z)||"ERROR";l({method:j,endpoint:k,error:ie,status:ce,timestamp:new Date().toISOString()}),pe.error("Request failed",{description:ie})}finally{i(!1)}};return{loading:n,result:a,isDisabled:n||s||!t,httpMethods:{testGet:()=>{o("GET","/api/users")},testGetById:()=>{o("GET","/api/users/1")},testPost:()=>{o("POST","/api/users",{name:"New User",email:"newuser@example.com"})},testPut:()=>{o("PUT","/api/users/1",{name:"John Doe Updated",email:"john.updated@example.com"})},testPatch:()=>{o("PATCH","/api/users/1",{email:"john.patched@example.com"})},testDelete:()=>{o("DELETE","/api/users/1")}},auth:{testIsAuthenticated:async()=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{const j=t.isAuthenticated();l({authenticated:j,timestamp:new Date().toISOString()}),pe.success(j?"User is authenticated":"User is not authenticated")}catch(j){const k=Tt(j);pe.error("Failed to check authentication",{description:k})}finally{i(!1)}},testGetToken:async()=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{const j=await t.getEnvironmentToken();l({token:j||"No token available",timestamp:new Date().toISOString()}),pe.success("Token retrieved successfully")}catch(j){const k=Tt(j);pe.error("Failed to get token",{description:k})}finally{i(!1)}},testGetClientTokenInfo:async()=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{const j=t.getClientTokenInfo();l({tokenInfo:j||"No token info available",timestamp:new Date().toISOString()}),pe.success("Token info retrieved successfully")}catch(j){const k=Tt(j);pe.error("Failed to get token info",{description:k})}finally{i(!1)}},testGetUser:async()=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{const j=await t.getUser();if(!j){pe.error("No user info available. Please login first."),l({error:"No user info available. User may not be authenticated. Please login first.",timestamp:new Date().toISOString()});return}l({userInfo:j,timestamp:new Date().toISOString()}),pe.success("User info retrieved successfully")}catch(j){const k=Tt(j),K=Ym(j);K===401?pe.error("Authentication failed",{description:"Token is invalid or expired. Please login again."}):pe.error("Failed to get user info",{description:k}),l({error:k,status:K,timestamp:new Date().toISOString()})}finally{i(!1)}},testLogout:async()=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{await t.logout(),l({message:"User logged out successfully",timestamp:new Date().toISOString()}),pe.success("Logged out successfully")}catch(j){const k=Tt(j);pe.error("Logout failed",{description:k})}finally{i(!1)}},testRedirectToLogin:async()=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{l({message:"Redirecting to login... (Page will redirect to miso-controller login endpoint)",timestamp:new Date().toISOString()}),await t.redirectToLogin()}catch(j){const k=Tt(j);l({error:k,timestamp:new Date().toISOString()}),pe.error("Redirect to login failed",{description:k}),i(!1)}}},errors:{testNetworkError:async()=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{await t.get("/api/invalid-endpoint-that-does-not-exist-12345",{cache:{enabled:!1}})}catch(j){const k=Tt(j);l({error:k,type:"NETWORK_ERROR",message:k,timestamp:new Date().toISOString()}),pe.error("Network error occurred",{description:k})}finally{i(!1)}},testTimeout:async()=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{await t.get("/api/slow-endpoint",{cache:{enabled:!1},timeout:100})}catch(j){const k=Tt(j);l({error:k,type:"TIMEOUT_ERROR",message:k,timestamp:new Date().toISOString()}),pe.error("Request timeout occurred",{description:k})}finally{i(!1)}},testApiError:async()=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{await t.post("/api/users",{invalid:"data"})}catch(j){const k=Tt(j),K=Ym(j);l({error:k,status:K||400,details:j.response?.data||k,timestamp:new Date().toISOString()}),pe.error("API error occurred",{description:k})}finally{i(!1)}}}}}function WO({isDisabled:t,httpMethods:s}){return g.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"GET Requests"}),g.jsx(We,{children:"Retrieve data from the server"})]}),g.jsxs(Ce,{className:"space-y-2",children:[g.jsx(Qe,{onClick:s.testGet,disabled:t,className:"w-full bg-green-600 hover:bg-green-700",children:"GET /api/users"}),g.jsx(Qe,{onClick:s.testGetById,disabled:t,className:"w-full bg-green-600 hover:bg-green-700",children:"GET /api/users/:id"})]})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"POST Requests"}),g.jsx(We,{children:"Create new resources"})]}),g.jsx(Ce,{children:g.jsx(Qe,{onClick:s.testPost,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700",children:"POST /api/users"})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"PUT Requests"}),g.jsx(We,{children:"Update existing resources"})]}),g.jsx(Ce,{children:g.jsx(Qe,{onClick:s.testPut,disabled:t,className:"w-full bg-orange-600 hover:bg-orange-700",children:"PUT /api/users/:id"})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"PATCH Requests"}),g.jsx(We,{children:"Partially update resources"})]}),g.jsx(Ce,{children:g.jsx(Qe,{onClick:s.testPatch,disabled:t,className:"w-full bg-orange-600 hover:bg-orange-700",children:"PATCH /api/users/:id"})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"DELETE Requests"}),g.jsx(We,{children:"Remove resources"})]}),g.jsx(Ce,{children:g.jsx(Qe,{onClick:s.testDelete,disabled:t,variant:"destructive",className:"w-full",children:"DELETE /api/users/:id"})})]})]})}function VO({isDisabled:t,auth:s}){return g.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Check Authentication"}),g.jsx(We,{children:"Verify user authentication status"})]}),g.jsx(Ce,{children:g.jsx(Qe,{onClick:s.testIsAuthenticated,disabled:t,className:"w-full",children:"isAuthenticated()"})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Get Token"}),g.jsx(We,{children:"Retrieve environment token"})]}),g.jsx(Ce,{children:g.jsx(Qe,{onClick:s.testGetToken,disabled:t,className:"w-full",children:"getEnvironmentToken()"})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Get Token Info"}),g.jsx(We,{children:"Get client token information"})]}),g.jsx(Ce,{children:g.jsx(Qe,{onClick:s.testGetClientTokenInfo,disabled:t,className:"w-full",children:"getClientTokenInfo()"})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Get User"}),g.jsx(We,{children:"Get current user information"})]}),g.jsx(Ce,{children:g.jsx(Qe,{onClick:s.testGetUser,disabled:t,className:"w-full !bg-purple-600 hover:!bg-purple-700 !text-white",children:"getUser()"})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Logout"}),g.jsx(We,{children:"End user session"})]}),g.jsx(Ce,{children:g.jsx(Qe,{onClick:s.testLogout,disabled:t,variant:"destructive",className:"w-full",children:"logout()"})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Redirect to Login"}),g.jsx(We,{children:"Redirect to miso-controller login page"})]}),g.jsx(Ce,{children:g.jsx(Qe,{onClick:s.testRedirectToLogin,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700",children:"redirectToLogin()"})})]})]})}function GO({isDisabled:t,errors:s}){return g.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Network Error"}),g.jsx(We,{children:"Simulate connection failure"})]}),g.jsx(Ce,{children:g.jsx(Qe,{onClick:s.testNetworkError,disabled:t,variant:"destructive",className:"w-full",children:"Test Network Error"})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Timeout Error"}),g.jsx(We,{children:"Simulate request timeout"})]}),g.jsx(Ce,{children:g.jsx(Qe,{onClick:s.testTimeout,disabled:t,variant:"destructive",className:"w-full",children:"Test Timeout"})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"API Error (400)"}),g.jsx(We,{children:"Simulate validation error"})]}),g.jsx(Ce,{children:g.jsx(Qe,{onClick:s.testApiError,disabled:t,variant:"destructive",className:"w-full",children:"Test API Error"})})]})]})}function JO(){const{dataClient:t,isLoading:s}=ea(),{result:n,isDisabled:i,httpMethods:a,auth:l,errors:o}=KO(t,s);return g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsx("div",{className:"border-b border-border bg-white",children:g.jsxs("div",{className:"px-8 py-6",children:[g.jsx("h1",{className:"text-2xl",children:"API Testing"}),g.jsx("p",{className:"text-muted-foreground mt-1",children:"Test HTTP methods, authentication, and error handling"})]})}),g.jsx("div",{className:"flex-1 overflow-auto p-8",children:g.jsxs("div",{className:"max-w-6xl",children:[g.jsxs(_d,{defaultValue:"http",className:"space-y-6",children:[g.jsxs(Rd,{children:[g.jsx(yr,{value:"http",children:"HTTP Methods"}),g.jsx(yr,{value:"auth",children:"Authentication"}),g.jsx(yr,{value:"errors",children:"Error Handling"})]}),g.jsx(vr,{value:"http",className:"space-y-6",children:g.jsx(WO,{isDisabled:i,httpMethods:a})}),g.jsx(vr,{value:"auth",className:"space-y-6",children:g.jsx(VO,{isDisabled:i,auth:l})}),g.jsx(vr,{value:"errors",className:"space-y-6",children:g.jsx(GO,{isDisabled:i,errors:o})})]}),n&&g.jsxs(be,{className:"mt-6",children:[g.jsx(Re,{children:g.jsx(ke,{className:"text-lg",children:"Response"})}),g.jsx(Ce,{children:g.jsx("pre",{className:"text-xs bg-muted p-4 rounded-lg overflow-x-auto",children:JSON.stringify(n,null,2)})})]})]})})]})}function Fi({className:t,type:s,...n}){return g.jsx("input",{type:s,"data-slot":"input",className:sn("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}var YO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],XO=YO.reduce((t,s)=>{const n=r1(`Primitive.${s}`),i=G.forwardRef((a,l)=>{const{asChild:o,...u}=a,d=o?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(d,{...u,ref:l})});return i.displayName=`Primitive.${s}`,{...t,[s]:i}},{}),QO="Label",ET=G.forwardRef((t,s)=>g.jsx(XO.label,{...t,ref:s,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));ET.displayName=QO;var ZO=ET;function ms({className:t,...s}){return g.jsx(ZO,{"data-slot":"label",className:sn("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}function ej(){const{dataClient:t,isLoading:s}=ea(),[n,i]=G.useState(!1),[a,l]=G.useState(null),[o,u]=G.useState("60000"),d=async()=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{const E=Date.now(),b=await t.get("/api/users",{cache:{enabled:!0,ttl:parseInt(o,10)}}),x=Date.now()-E;l({data:b,cached:x<100,cacheKey:"GET:/api/users",ttl:o+"ms",duration:x+"ms",timestamp:new Date().toISOString()}),pe.success("Data retrieved",{description:x<100?"Response served from cache":"Fetched from server"})}catch(E){const b=E instanceof Error?E.message:"Unknown error";pe.error("Request failed",{description:b})}finally{i(!1)}},h=async()=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{const E=Date.now(),b=await t.get("/api/users",{cache:{enabled:!1}}),x=Date.now()-E;l({data:b,cached:!1,duration:x+"ms",timestamp:new Date().toISOString()}),pe.success("Fresh data retrieved",{description:"Cache bypassed, fetched from server"})}catch(E){const b=E instanceof Error?E.message:"Unknown error";pe.error("Request failed",{description:b})}finally{i(!1)}},f=async()=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{t.clearCache();const E=t.getMetrics();l({message:"Cache cleared successfully",cacheHitRate:E.cacheHitRate,timestamp:new Date().toISOString()}),pe.success("Cache cleared",{description:"All cache entries removed"})}catch(E){const b=E instanceof Error?E.message:"Unknown error";pe.error("Failed to clear cache",{description:b})}finally{i(!1)}},p=async()=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{t.setInterceptors({onRequest:async(b,x)=>({...x,headers:{...x.headers,"X-Custom-Header":"intercepted","Cache-Control":"max-age=3600"}})});const E={url:"/api/users",method:"GET"};await t.get("/api/users",{cache:{enabled:!1}}),l({interceptor:"request",originalRequest:E,modifiedRequest:{...E,headers:{"X-Custom-Header":"intercepted","Cache-Control":"max-age=3600"}},timestamp:new Date().toISOString()}),pe.success("Request interceptor applied")}catch(E){const b=E instanceof Error?E.message:"Unknown error";pe.error("Interceptor test failed",{description:b})}finally{i(!1)}},y=async()=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{pe.info("Attempting request with retries...");const E=Date.now();await t.get("/api/users",{cache:{enabled:!1}});const b=Date.now()-E;l({message:"Request succeeded",duration:b+"ms",retries:"Automatic retries handled by DataClient",timestamp:new Date().toISOString()}),pe.success("Request completed")}catch(E){const b=E instanceof Error?E.message:"Unknown error";l({error:b,retries:"Retry logic attempted",timestamp:new Date().toISOString()}),pe.error("Request failed after retries",{description:b})}finally{i(!1)}},S=n||s||!t;return g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsx("div",{className:"border-b border-border bg-white",children:g.jsxs("div",{className:"px-8 py-6",children:[g.jsx("h1",{className:"text-2xl",children:"Caching & Storage"}),g.jsx("p",{className:"text-muted-foreground mt-1",children:"Test caching mechanisms, interceptors, and retry logic"})]})}),g.jsx("div",{className:"flex-1 overflow-auto p-8",children:g.jsxs("div",{className:"max-w-6xl space-y-6",children:[g.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[g.jsxs(be,{children:[g.jsx(Re,{children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 flex items-center justify-center",children:g.jsx(Zm,{className:"w-5 h-5 text-green-600"})}),g.jsxs("div",{children:[g.jsx(ke,{className:"text-lg",children:"Cache Enabled"}),g.jsx(We,{children:"Retrieve data with caching"})]})]})}),g.jsxs(Ce,{className:"space-y-3",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(ms,{htmlFor:"cacheTTL",children:"Cache TTL (milliseconds)"}),g.jsx(Fi,{id:"cacheTTL",type:"number",value:o,onChange:E=>u(E.target.value),placeholder:"60000"})]}),g.jsxs(Qe,{onClick:d,disabled:S,className:"w-full bg-green-600 hover:bg-green-700",children:[g.jsx(Zm,{className:"w-4 h-4 mr-2"}),"GET with Cache"]})]})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center",children:g.jsx(ju,{className:"w-5 h-5 text-blue-600"})}),g.jsxs("div",{children:[g.jsx(ke,{className:"text-lg",children:"Cache Bypassed"}),g.jsx(We,{children:"Fetch fresh data from server"})]})]})}),g.jsx(Ce,{children:g.jsxs(Qe,{onClick:h,disabled:S,className:"w-full bg-blue-600 hover:bg-blue-700",children:[g.jsx(ju,{className:"w-4 h-4 mr-2"}),"GET without Cache"]})})]})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Cache Management"}),g.jsx(We,{children:"Clear cache entries"})]}),g.jsx(Ce,{className:"space-y-4",children:g.jsx("div",{className:"grid grid-cols-2 gap-4",children:g.jsxs(Qe,{onClick:f,disabled:S,variant:"outline",className:"border-orange-200 text-orange-700 hover:bg-orange-50",children:[g.jsx(tg,{className:"w-4 h-4 mr-2"}),"Clear All Cache"]})})})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Request Interceptors"}),g.jsx(We,{children:"Modify requests before sending"})]}),g.jsx(Ce,{children:g.jsx(Qe,{onClick:p,disabled:S,className:"w-full",children:"Test Request Interceptor"})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Retry Logic"}),g.jsx(We,{children:"Automatic retry on failures"})]}),g.jsx(Ce,{children:g.jsx(Qe,{onClick:y,disabled:S,className:"w-full",children:"Test Retry Mechanism"})})]})]}),a&&g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{className:"text-lg",children:"Response"})}),g.jsx(Ce,{children:g.jsx("pre",{className:"text-xs bg-muted p-4 rounded-lg overflow-x-auto",children:JSON.stringify(a,null,2)})})]})]})})]})}function tj(){const{dataClient:t,isLoading:s}=ea(),[n,i]=G.useState(!1),[a,l]=G.useState(null),[o,u]=G.useState([]),d=()=>{if(t)try{const x=t.getMetrics();l({totalRequests:x.totalRequests,successfulRequests:x.totalRequests-x.totalFailures,failedRequests:x.totalFailures,cacheHits:Math.round(x.cacheHitRate*x.totalRequests*.3),cacheMisses:Math.round(x.totalRequests*.7),averageResponseTime:Math.round(x.averageResponseTime),cacheHitRate:x.cacheHitRate,errorRate:x.errorRate})}catch(x){console.error("Failed to load metrics:",x)}};G.useEffect(()=>{t&&d()},[t]);const h=async()=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{d(),pe.success("Metrics retrieved successfully")}catch(x){const v=x instanceof Error?x.message:"Unknown error";pe.error("Failed to get metrics",{description:v})}finally{i(!1)}},f=async()=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{pe.info("Making multiple requests...");const x=Date.now(),v=[t.get("/api/users",{cache:{enabled:!1}}).catch(()=>null),t.get("/api/products",{cache:{enabled:!1}}).catch(()=>null),t.get("/api/orders",{cache:{enabled:!1}}).catch(()=>null)];await Promise.all(v);const C=Date.now()-x,_=[{endpoint:"/api/users",status:200,duration:`${Math.round(C/3)}ms`,timestamp:new Date().toISOString()},{endpoint:"/api/products",status:200,duration:`${Math.round(C/3)}ms`,timestamp:new Date().toISOString()},{endpoint:"/api/orders",status:200,duration:`${Math.round(C/3)}ms`,timestamp:new Date().toISOString()}];u(R=>[..._,...R]),d(),pe.success("All requests completed",{description:`Total duration: ${C}ms`})}catch(x){const v=x instanceof Error?x.message:"Unknown error";pe.error("Some requests failed",{description:v})}finally{i(!1)}},p=async()=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{const x=Date.now();await t.put("/api/users/1",{name:"Updated User",email:"updated@example.com"}).catch(()=>null);const v=Date.now()-x,C={id:"audit-"+Date.now(),action:"USER_UPDATE",timestamp:new Date().toISOString(),endpoint:"/api/users/1",method:"PUT",status:200,duration:`${v}ms`};u(_=>[C,..._]),d(),pe.success("Audit log created")}catch(x){const v=x instanceof Error?x.message:"Unknown error";pe.error("Audit logging test failed",{description:v})}finally{i(!1)}},y=()=>{u([]),pe.success("Audit logs cleared")},S=a&&a.totalRequests>0?(a.successfulRequests/a.totalRequests*100).toFixed(1):"0",E=a&&a.cacheHitRate!==void 0?(a.cacheHitRate*100).toFixed(1):a&&a.cacheHits+a.cacheMisses>0?(a.cacheHits/(a.cacheHits+a.cacheMisses)*100).toFixed(1):"0",b=n||s||!t;return g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsx("div",{className:"border-b border-border bg-white",children:g.jsxs("div",{className:"px-8 py-6",children:[g.jsx("h1",{className:"text-2xl",children:"Monitoring & Logs"}),g.jsx("p",{className:"text-muted-foreground mt-1",children:"View performance metrics, audit logs, and system health"})]})}),g.jsx("div",{className:"flex-1 overflow-auto p-8",children:g.jsx("div",{className:"max-w-6xl",children:g.jsxs(_d,{defaultValue:"metrics",className:"space-y-6",children:[g.jsxs(Rd,{children:[g.jsx(yr,{value:"metrics",children:"Metrics"}),g.jsx(yr,{value:"audit",children:"Audit Logs"})]}),g.jsxs(vr,{value:"metrics",className:"space-y-6",children:[g.jsxs("div",{className:"flex gap-2",children:[g.jsxs(Qe,{onClick:h,disabled:b,className:"bg-blue-600 hover:bg-blue-700",children:[g.jsx(z_,{className:"w-4 h-4 mr-2"}),"Refresh Metrics"]}),g.jsxs(Qe,{onClick:f,disabled:b,className:"bg-green-600 hover:bg-green-700",children:[g.jsx(ME,{className:"w-4 h-4 mr-2"}),"Make Multiple Requests"]})]}),a&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[g.jsx(be,{children:g.jsxs(Ce,{className:"pt-6",children:[g.jsx("div",{className:"text-2xl font-semibold",children:a.totalRequests}),g.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Total Requests"})]})}),g.jsx(be,{children:g.jsxs(Ce,{className:"pt-6",children:[g.jsxs("div",{className:"text-2xl font-semibold text-green-600",children:[S,"%"]}),g.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Success Rate"})]})}),g.jsx(be,{children:g.jsxs(Ce,{className:"pt-6",children:[g.jsxs("div",{className:"text-2xl font-semibold text-blue-600",children:[E,"%"]}),g.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Cache Hit Rate"})]})}),g.jsx(be,{children:g.jsxs(Ce,{className:"pt-6",children:[g.jsxs("div",{className:"text-2xl font-semibold",children:[a.averageResponseTime,"ms"]}),g.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Avg Response Time"})]})})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Request Status"}),g.jsx(We,{children:"Breakdown by success/failure"})]}),g.jsx(Ce,{children:g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-sm text-muted-foreground",children:"Successful"}),g.jsx("span",{className:"text-sm font-medium text-green-600",children:a.successfulRequests})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-sm text-muted-foreground",children:"Failed"}),g.jsx("span",{className:"text-sm font-medium text-red-600",children:a.failedRequests})]}),g.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-border",children:[g.jsx("span",{className:"text-sm font-medium",children:"Total"}),g.jsx("span",{className:"text-sm font-medium",children:a.totalRequests})]})]})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Cache Performance"}),g.jsx(We,{children:"Cache hits vs misses"})]}),g.jsx(Ce,{children:g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-sm text-muted-foreground",children:"Cache Hits"}),g.jsx("span",{className:"text-sm font-medium text-green-600",children:a.cacheHits})]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-sm text-muted-foreground",children:"Cache Misses"}),g.jsx("span",{className:"text-sm font-medium text-orange-600",children:a.cacheMisses})]}),g.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-border",children:[g.jsx("span",{className:"text-sm font-medium",children:"Hit Rate"}),g.jsxs("span",{className:"text-sm font-medium text-blue-600",children:[E,"%"]})]})]})})]})]}),a&&g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Metrics Details"}),g.jsx(We,{children:"Detailed performance metrics"})]}),g.jsx(Ce,{children:g.jsxs("div",{className:"space-y-3 text-sm",children:[g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{className:"text-muted-foreground",children:"Total Requests"}),g.jsx("span",{className:"font-medium",children:a.totalRequests})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{className:"text-muted-foreground",children:"Successful"}),g.jsx("span",{className:"font-medium text-green-600",children:a.successfulRequests})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{className:"text-muted-foreground",children:"Failed"}),g.jsx("span",{className:"font-medium text-red-600",children:a.failedRequests})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{className:"text-muted-foreground",children:"Error Rate"}),g.jsxs("span",{className:"font-medium",children:[(a.errorRate*100).toFixed(1),"%"]})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{className:"text-muted-foreground",children:"Average Response Time"}),g.jsxs("span",{className:"font-medium",children:[a.averageResponseTime,"ms"]})]})]})})]})]})]}),g.jsxs(vr,{value:"audit",className:"space-y-6",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{className:"flex gap-2",children:[g.jsxs(Qe,{onClick:p,disabled:b,children:[g.jsx(e1,{className:"w-4 h-4 mr-2"}),"Create Audit Log"]}),g.jsxs(Qe,{onClick:f,disabled:b,className:"bg-green-600 hover:bg-green-700",children:[g.jsx(ME,{className:"w-4 h-4 mr-2"}),"Make Multiple Requests"]})]}),o.length>0&&g.jsx(Qe,{onClick:y,variant:"outline",size:"sm",children:"Clear Logs"})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Audit Log Entries"}),g.jsx(We,{children:"Recent activity and requests"})]}),g.jsx(Ce,{children:o.length===0?g.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No audit logs yet. Make some requests to see logs here."}):g.jsx("div",{className:"space-y-2",children:o.map((x,v)=>g.jsxs("div",{className:"p-3 bg-muted rounded-lg text-sm",children:[g.jsxs("div",{className:"flex items-center justify-between mb-1",children:[g.jsx("span",{className:"font-mono text-xs",children:x.endpoint}),g.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(x.timestamp).toLocaleTimeString()})]}),g.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[g.jsxs("span",{children:["Method: ",g.jsx("span",{className:"font-medium",children:x.method||"GET"})]}),g.jsxs("span",{children:["Status: ",g.jsx("span",{className:`font-medium ${x.status===200?"text-green-600":"text-red-600"}`,children:x.status})]}),g.jsxs("span",{children:["Duration: ",g.jsx("span",{className:"font-medium",children:x.duration})]})]})]},v))})})]})]})]})})})]})}function rj(t){return!t||t.trim().length===0?{valid:!1,error:"Role name cannot be empty"}:t.length>100?{valid:!1,error:"Role name must be 100 characters or less"}:/^[a-zA-Z0-9_-]+$/.test(t.trim())?{valid:!0}:{valid:!1,error:"Role name can only contain letters, numbers, underscores, and hyphens"}}function wT(t){return!t||t.trim().length===0?{valid:!1,error:"Permission name cannot be empty"}:t.length>100?{valid:!1,error:"Permission name must be 100 characters or less"}:/^[a-zA-Z0-9_.-]+$/.test(t.trim())?{valid:!0}:{valid:!1,error:"Permission name can only contain letters, numbers, underscores, dots, and hyphens"}}function Jb(t){if(!t||t.trim().length===0)return{valid:!1,error:"Permissions cannot be empty"};const s=t.split(",").map(n=>n.trim()).filter(Boolean);if(s.length===0)return{valid:!1,error:"At least one permission must be provided"};for(const n of s){const i=wT(n);if(!i.valid)return{valid:!1,error:`Invalid permission: ${n}. ${i.error}`}}return{valid:!0}}function nj(t,s){const[n,i]=G.useState(!1),[a,l]=G.useState(null),[o,u]=G.useState([]),[d,h]=G.useState([]);return{loading:n,result:a,roles:o,permissions:d,isDisabled:n||s||!t,testGetRoles:async()=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{const j=await t.getRoles();u(j),l({roles:j,count:j.length,timestamp:new Date().toISOString()}),pe.success(`Retrieved ${j.length} roles`)}catch(j){const k=Tt(j);pe.error("Failed to get roles",{description:k}),u([])}finally{i(!1)}},testGetPermissions:async()=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{const j=await t.getPermissions();h(j),l({permissions:j,count:j.length,timestamp:new Date().toISOString()}),pe.success(`Retrieved ${j.length} permissions`)}catch(j){const k=Tt(j);pe.error("Failed to get permissions",{description:k}),h([])}finally{i(!1)}},testHasRole:async j=>{if(!t){pe.error("DataClient not initialized");return}const k=rj(j);if(!k.valid){pe.error(k.error||"Invalid role name");return}i(!0);try{const K=await t.hasRole(j);l({role:j,hasRole:K,timestamp:new Date().toISOString()}),pe.success(K?`User has role: ${j}`:`User does not have role: ${j}`)}catch(K){const Z=Tt(K);pe.error("Failed to check role",{description:Z})}finally{i(!1)}},testHasPermission:async j=>{if(!t){pe.error("DataClient not initialized");return}const k=wT(j);if(!k.valid){pe.error(k.error||"Invalid permission name");return}i(!0);try{const K=await t.hasPermission(j);l({permission:j,hasPermission:K,timestamp:new Date().toISOString()}),pe.success(K?`User has permission: ${j}`:`User does not have permission: ${j}`)}catch(K){const Z=Tt(K);pe.error("Failed to check permission",{description:Z})}finally{i(!1)}},testHasAnyRole:async j=>{if(!t){pe.error("DataClient not initialized");return}if(!j){pe.error("Please enter roles to check (comma-separated)");return}i(!0);try{const k=j.split(",").map(Z=>Z.trim()).filter(Boolean),K=await t.hasAnyRole(k);l({roles:k,hasAnyRole:K,timestamp:new Date().toISOString()}),pe.success(K?"User has at least one of the roles":"User does not have any of the roles")}catch(k){const K=Tt(k);pe.error("Failed to check roles",{description:K})}finally{i(!1)}},testHasAllRoles:async j=>{if(!t){pe.error("DataClient not initialized");return}if(!j){pe.error("Please enter roles to check (comma-separated)");return}i(!0);try{const k=j.split(",").map(Z=>Z.trim()).filter(Boolean),K=await t.hasAllRoles(k);l({roles:k,hasAllRoles:K,timestamp:new Date().toISOString()}),pe.success(K?"User has all of the roles":"User does not have all of the roles")}catch(k){const K=Tt(k);pe.error("Failed to check roles",{description:K})}finally{i(!1)}},testHasAnyPermission:async j=>{if(!t){pe.error("DataClient not initialized");return}const k=Jb(j);if(!k.valid){pe.error(k.error||"Invalid permissions");return}i(!0);try{const K=j.split(",").map(ie=>ie.trim()).filter(Boolean),Z=await t.hasAnyPermission(K);l({permissions:K,hasAnyPermission:Z,timestamp:new Date().toISOString()}),pe.success(Z?"User has at least one of the permissions":"User does not have any of the permissions")}catch(K){const Z=Tt(K);pe.error("Failed to check permissions",{description:Z})}finally{i(!1)}},testHasAllPermissions:async j=>{if(!t){pe.error("DataClient not initialized");return}const k=Jb(j);if(!k.valid){pe.error(k.error||"Invalid permissions");return}i(!0);try{const K=j.split(",").map(ie=>ie.trim()).filter(Boolean),Z=await t.hasAllPermissions(K);l({permissions:K,hasAllPermissions:Z,timestamp:new Date().toISOString()}),pe.success(Z?"User has all of the permissions":"User does not have all of the permissions")}catch(K){const Z=Tt(K);pe.error("Failed to check permissions",{description:Z})}finally{i(!1)}},testRefreshRoles:async()=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{const j=await t.refreshRoles();u(j),l({message:"Roles cache refreshed",roles:j,timestamp:new Date().toISOString()}),pe.success("Roles cache refreshed")}catch(j){const k=Tt(j);pe.error("Failed to refresh roles",{description:k})}finally{i(!1)}},testRefreshPermissions:async()=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{const j=await t.refreshPermissions();h(j),l({message:"Permissions cache refreshed",permissions:j,timestamp:new Date().toISOString()}),pe.success("Permissions cache refreshed")}catch(j){const k=Tt(j);pe.error("Failed to refresh permissions",{description:k})}finally{i(!1)}},testClearRolesCache:async()=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{await t.clearRolesCache(),l({message:"Roles cache cleared",timestamp:new Date().toISOString()}),pe.success("Roles cache cleared")}catch(j){const k=Tt(j);pe.error("Failed to clear roles cache",{description:k})}finally{i(!1)}},testClearPermissionsCache:async()=>{if(!t){pe.error("DataClient not initialized");return}i(!0);try{await t.clearPermissionsCache(),l({message:"Permissions cache cleared",timestamp:new Date().toISOString()}),pe.success("Permissions cache cleared")}catch(j){const k=Tt(j);pe.error("Failed to clear permissions cache",{description:k})}finally{i(!1)}}}}function sj(){const{dataClient:t,isLoading:s}=ea(),{result:n,roles:i,permissions:a,isDisabled:l,testGetRoles:o,testGetPermissions:u,testHasRole:d,testHasPermission:h,testHasAnyRole:f,testHasAllRoles:p,testHasAnyPermission:y,testHasAllPermissions:S,testRefreshRoles:E,testRefreshPermissions:b,testClearRolesCache:x,testClearPermissionsCache:v}=nj(t,s),[C,_]=G.useState(""),[R,D]=G.useState(""),[A,j]=G.useState(""),[k,K]=G.useState("");return g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsx("div",{className:"border-b border-border bg-white",children:g.jsxs("div",{className:"px-8 py-6",children:[g.jsx("h1",{className:"text-2xl",children:"Authorization"}),g.jsx("p",{className:"text-muted-foreground mt-1",children:"Test roles and permissions using DataClient methods"})]})}),g.jsx("div",{className:"flex-1 overflow-auto p-8",children:g.jsxs("div",{className:"max-w-6xl",children:[g.jsxs(_d,{defaultValue:"roles",className:"space-y-6",children:[g.jsxs(Rd,{children:[g.jsx(yr,{value:"roles",children:"Roles"}),g.jsx(yr,{value:"permissions",children:"Permissions"})]}),g.jsx(vr,{value:"roles",className:"space-y-6",children:g.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Get Roles"}),g.jsx(We,{children:"Retrieve user roles (auto-retrieves token from localStorage)"})]}),g.jsxs(Ce,{children:[g.jsxs(Qe,{onClick:o,disabled:l,className:"w-full",children:[g.jsx(eg,{className:"w-4 h-4 mr-2"}),"getRoles()"]}),i.length>0&&g.jsx("div",{className:"mt-4",children:g.jsxs(ms,{children:["Current Roles: ",i.length]})})]})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Check Role"}),g.jsx(We,{children:"Check if user has a specific role"})]}),g.jsxs(Ce,{className:"space-y-3",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(ms,{htmlFor:"roleToCheck",children:"Role Name"}),g.jsx(Fi,{id:"roleToCheck",value:C,onChange:Z=>_(Z.target.value),placeholder:"admin"})]}),g.jsx(Qe,{onClick:()=>d(C),disabled:l,className:"w-full",children:"hasRole()"})]})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Check Any Role"}),g.jsx(We,{children:"Check if user has any of the specified roles"})]}),g.jsxs(Ce,{className:"space-y-3",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(ms,{htmlFor:"rolesToCheck",children:"Roles (comma-separated)"}),g.jsx(Fi,{id:"rolesToCheck",value:A,onChange:Z=>j(Z.target.value),placeholder:"admin, user"})]}),g.jsx(Qe,{onClick:()=>f(A),disabled:l,className:"w-full",children:"hasAnyRole()"})]})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Check All Roles"}),g.jsx(We,{children:"Check if user has all of the specified roles"})]}),g.jsxs(Ce,{className:"space-y-3",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(ms,{htmlFor:"rolesToCheckAll",children:"Roles (comma-separated)"}),g.jsx(Fi,{id:"rolesToCheckAll",value:A,onChange:Z=>j(Z.target.value),placeholder:"admin, user"})]}),g.jsx(Qe,{onClick:()=>p(A),disabled:l,className:"w-full",children:"hasAllRoles()"})]})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Refresh Roles"}),g.jsx(We,{children:"Force refresh roles (bypass cache)"})]}),g.jsx(Ce,{children:g.jsxs(Qe,{onClick:E,disabled:l,className:"w-full",children:[g.jsx(ju,{className:"w-4 h-4 mr-2"}),"refreshRoles()"]})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Clear Roles Cache"}),g.jsx(We,{children:"Clear cached roles"})]}),g.jsx(Ce,{children:g.jsxs(Qe,{onClick:x,disabled:l,variant:"outline",className:"w-full",children:[g.jsx(tg,{className:"w-4 h-4 mr-2"}),"clearRolesCache()"]})})]})]})}),g.jsx(vr,{value:"permissions",className:"space-y-6",children:g.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Get Permissions"}),g.jsx(We,{children:"Retrieve user permissions (auto-retrieves token from localStorage)"})]}),g.jsxs(Ce,{children:[g.jsxs(Qe,{onClick:u,disabled:l,className:"w-full",children:[g.jsx(eg,{className:"w-4 h-4 mr-2"}),"getPermissions()"]}),a.length>0&&g.jsx("div",{className:"mt-4",children:g.jsxs(ms,{children:["Current Permissions: ",a.length]})})]})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Check Permission"}),g.jsx(We,{children:"Check if user has a specific permission"})]}),g.jsxs(Ce,{className:"space-y-3",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(ms,{htmlFor:"permissionToCheck",children:"Permission Name"}),g.jsx(Fi,{id:"permissionToCheck",value:R,onChange:Z=>D(Z.target.value),placeholder:"users:read"})]}),g.jsx(Qe,{onClick:()=>h(R),disabled:l,className:"w-full",children:"hasPermission()"})]})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Check Any Permission"}),g.jsx(We,{children:"Check if user has any of the specified permissions"})]}),g.jsxs(Ce,{className:"space-y-3",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(ms,{htmlFor:"permissionsToCheck",children:"Permissions (comma-separated)"}),g.jsx(Fi,{id:"permissionsToCheck",value:k,onChange:Z=>K(Z.target.value),placeholder:"users:read, users:write"})]}),g.jsx(Qe,{onClick:()=>y(k),disabled:l,className:"w-full",children:"hasAnyPermission()"})]})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Check All Permissions"}),g.jsx(We,{children:"Check if user has all of the specified permissions"})]}),g.jsxs(Ce,{className:"space-y-3",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(ms,{htmlFor:"permissionsToCheckAll",children:"Permissions (comma-separated)"}),g.jsx(Fi,{id:"permissionsToCheckAll",value:k,onChange:Z=>K(Z.target.value),placeholder:"users:read, users:write"})]}),g.jsx(Qe,{onClick:()=>S(k),disabled:l,className:"w-full",children:"hasAllPermissions()"})]})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Refresh Permissions"}),g.jsx(We,{children:"Force refresh permissions (bypass cache)"})]}),g.jsx(Ce,{children:g.jsxs(Qe,{onClick:b,disabled:l,className:"w-full",children:[g.jsx(ju,{className:"w-4 h-4 mr-2"}),"refreshPermissions()"]})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{className:"text-lg",children:"Clear Permissions Cache"}),g.jsx(We,{children:"Clear cached permissions"})]}),g.jsx(Ce,{children:g.jsxs(Qe,{onClick:v,disabled:l,variant:"outline",className:"w-full",children:[g.jsx(tg,{className:"w-4 h-4 mr-2"}),"clearPermissionsCache()"]})})]})]})})]}),n&&g.jsxs(be,{className:"mt-6",children:[g.jsx(Re,{children:g.jsx(ke,{className:"text-lg",children:"Response"})}),g.jsx(Ce,{children:g.jsx("pre",{className:"text-xs bg-muted p-4 rounded-lg overflow-x-auto",children:JSON.stringify(n,null,2)})})]})]})})]})}const Xe={gettingStarted:{serverSetup:`import express from 'express';
import { MisoClient, createClientTokenEndpoint, loadConfig } from '@aifabrix/miso-client';

const app = express();
app.use(express.json());

// Initialize MisoClient with environment variables
const misoClient = new MisoClient(loadConfig());
await misoClient.initialize();

// Create client token endpoint (environment token endpoint)
// This endpoint:
// - Validates request origin (CORS)
// - Fetches environment token (client token) from MISO Controller
// - Returns environment token + DataClient configuration
// NOTE: This provides an ENVIRONMENT TOKEN, not a user token
app.post('/api/v1/auth/client-token', createClientTokenEndpoint(misoClient));

// Your API routes
app.get('/api/users', async (req, res) => {
  // Your business logic here
  res.json({ users: [] });
});

app.listen(3000, () => {
  console.log('Server running on http://localhost:3000');
});`,environmentVariables:`# Server-side environment variables (.env)
# Required for MisoClient initialization

# MISO Controller Configuration
MISO_CLIENTID=ctrl-dev-my-app
MISO_CLIENTSECRET=your-client-secret-here
MISO_CONTROLLER_URL=https://controller.aifabrix.ai

# Optional: Redis for caching (recommended for production)
REDIS_HOST=localhost
REDIS_PORT=6379

# Optional: Logging level
MISO_LOG_LEVEL=info`,clientSetup:`import { autoInitializeDataClient } from '@aifabrix/miso-client';

// Zero-config initialization
// Automatically fetches config from server's /api/v1/auth/client-token endpoint
const dataClient = await autoInitializeDataClient();

// Now you can use DataClient
const users = await dataClient.get('/api/users');
console.log('Users:', users);`,completeExample:`// ============================================
// SERVER-SIDE (Express.js)
// ============================================

import express from 'express';
import { MisoClient, createClientTokenEndpoint, loadConfig } from '@aifabrix/miso-client';

const app = express();
app.use(express.json());

// 1. Initialize MisoClient
const misoClient = new MisoClient(loadConfig());
await misoClient.initialize();

// 2. Create client token endpoint (environment token endpoint)
// This endpoint:
// - Validates request origin (CORS)
// - Fetches environment token (client token) from MISO Controller
// - Returns environment token + DataClient configuration
// NOTE: This provides an ENVIRONMENT TOKEN (client token), not a user token
app.post('/api/v1/auth/client-token', createClientTokenEndpoint(misoClient));

// 3. Your API routes
// Option A: Public routes (no authentication)
app.get('/api/public', async (req, res) => {
  res.json({ message: 'Public endpoint' });
});

// Option B: Protected routes (validate user token)
app.get('/api/users', async (req, res) => {
  // Extract user token from Authorization header
  const userToken = misoClient.getToken(req);
  
  if (!userToken) {
    return res.status(401).json({ error: 'Unauthorized - no token' });
  }
  
  // Validate user token with MISO Controller
  const isValid = await misoClient.auth.validateToken(userToken);
  if (!isValid) {
    return res.status(401).json({ error: 'Unauthorized - invalid token' });
  }
  
  // Token is valid, proceed with business logic
  res.json({ users: [{ id: 1, name: 'John' }] });
});

app.listen(3000);

// ============================================
// CLIENT-SIDE (Browser/React)
// ============================================

import { autoInitializeDataClient } from '@aifabrix/miso-client';

// 1. Initialize DataClient (zero-config)
// Automatically calls POST /api/v1/auth/client-token
// Receives: environment token (client token) + DataClient config
const dataClient = await autoInitializeDataClient();

// 2. Use DataClient
// Environment token is automatically sent in x-client-token header
// This authenticates the CLIENT APPLICATION, not the user
const users = await dataClient.get('/api/users');
console.log('Users:', users);

// 3. For user-authenticated requests:
// User must login first (via MISO Controller)
// User token is stored in localStorage by DataClient
// DataClient automatically includes user token in Authorization header`,howItWorks:`// HOW IT WORKS:
//
// 1. SERVER SETUP:
//    - Server has MISO_CLIENTID and MISO_CLIENTSECRET (never exposed to browser)
//    - Server creates /api/v1/auth/client-token endpoint
//    - This endpoint fetches ENVIRONMENT TOKEN (client token) from MISO Controller
//    - Returns environment token + DataClient configuration to browser
//    - Validates request origin (CORS) before returning token
//
// 2. CLIENT SETUP:
//    - Browser calls autoInitializeDataClient()
//    - DataClient calls POST /api/v1/auth/client-token
//    - Receives environment token (client token) + configuration
//    - Stores environment token in localStorage (with expiration)
//    - Initializes DataClient with received config
//
// 3. REQUEST FLOW:
//    - Client makes request: dataClient.get('/api/users')
//    - DataClient automatically adds x-client-token header (environment token)
//    - Environment token authenticates the CLIENT APPLICATION
//    - For user authentication, validate user token (Bearer token) in your routes
//
// TOKEN TYPES:
// - ENVIRONMENT TOKEN (client token): Authenticates the client application
//   - Sent in x-client-token header
//   - Used to authenticate with MISO Controller
//   - Short-lived (default: 30 minutes)
//   - Automatically refreshed when expired
//
// - USER TOKEN: Authenticates the user
//   - Sent in Authorization: Bearer <token> header
//   - Obtained via login flow
//   - Validated in your API routes using misoClient.auth.validateToken()
//
// SECURITY:
// - Client secret NEVER exposed to browser
// - Environment token is short-lived (default: 30 minutes)
// - Token automatically refreshed when expired
// - Origin validation prevents token theft
// - Your API routes should validate USER tokens, not client tokens`,validateUserTokens:`// ============================================
// VALIDATING USER TOKENS IN API ROUTES
// ============================================

import express from 'express';
import { MisoClient, loadConfig } from '@aifabrix/miso-client';

const app = express();
app.use(express.json());

const misoClient = new MisoClient(loadConfig());
await misoClient.initialize();

// Option 1: Manual validation in each route
app.get('/api/users', async (req, res) => {
  // Extract user token from Authorization header
  const userToken = misoClient.getToken(req);
  
  if (!userToken) {
    return res.status(401).json({ error: 'Unauthorized - no token' });
  }
  
  // Validate user token with MISO Controller
  const isValid = await misoClient.auth.validateToken(userToken);
  if (!isValid) {
    return res.status(401).json({ error: 'Unauthorized - invalid token' });
  }
  
  // Get user info if needed
  const userInfo = await misoClient.auth.getUserInfo(userToken);
  
  // Token is valid, proceed with business logic
  res.json({ users: [], currentUser: userInfo });
});

// Option 2: Create middleware for reusable validation
function requireAuth(misoClient: MisoClient) {
  return async (req: express.Request, res: express.Response, next: express.NextFunction) => {
    const userToken = misoClient.getToken(req);
    
    if (!userToken) {
      return res.status(401).json({ error: 'Unauthorized - no token' });
    }
    
    const isValid = await misoClient.auth.validateToken(userToken);
    if (!isValid) {
      return res.status(401).json({ error: 'Unauthorized - invalid token' });
    }
    
    // Attach token to request for use in route handlers
    (req as any).userToken = userToken;
    next();
  };
}

// Use middleware
app.get('/api/protected', requireAuth(misoClient), async (req, res) => {
  const userToken = (req as any).userToken;
  const userInfo = await misoClient.auth.getUserInfo(userToken);
  res.json({ message: 'Protected route', user: userInfo });
});

// IMPORTANT NOTES:
// - Environment token (x-client-token) is for client app authentication
// - User token (Authorization: Bearer) is for user authentication
// - Your routes should validate USER tokens, not environment tokens
// - Environment token is handled automatically by DataClient`},initialization:{zeroConfig:`import { autoInitializeDataClient } from '@aifabrix/miso-client';

// One line - automatically fetches config and initializes DataClient
const dataClient = await autoInitializeDataClient();

// Use DataClient
const users = await dataClient.get('/api/users');`,manual:`import { DataClient } from '@aifabrix/miso-client';

// Manual configuration (browser-safe, no clientSecret)
const dataClient = new DataClient({
  baseUrl: 'https://api.example.com',
  misoConfig: {
    controllerUrl: 'https://controller.aifabrix.ai',
    clientId: 'ctrl-dev-my-app',
    // Use server-provided token pattern
    clientTokenUri: '/api/v1/auth/client-token',
  },
});`,reactContext:`import { DataClientProvider, useDataClient } from './contexts/DataClientContext';

// Wrap your app with DataClientProvider
function App() {
  return (
    <DataClientProvider>
      <YourComponents />
    </DataClientProvider>
  );
}

// Use DataClient in components
function MyComponent() {
  const { dataClient, isLoading, error } = useDataClient();
  
  if (isLoading) return <div>Loading...</div>;
  if (error) return <div>Error: {error.message}</div>;
  if (!dataClient) return <div>Not initialized</div>;
  
  // Use dataClient...
}`},httpMethods:{get:`// GET request with cache
const users = await dataClient.get('/api/users');

// GET request without cache
const freshUsers = await dataClient.get('/api/users', {
  cache: { enabled: false },
});

// GET request with custom options
const user = await dataClient.get('/api/users/1', {
  headers: { 'X-Custom-Header': 'value' },
  timeout: 5000,
});`,post:`// POST request
const newUser = await dataClient.post('/api/users', {
  name: 'John Doe',
  email: 'john@example.com',
});

// POST with error handling
try {
  const result = await dataClient.post('/api/users', userData);
  console.log('User created:', result);
} catch (error) {
  console.error('Failed to create user:', error.message);
}`,put:`// PUT request (full update)
const updatedUser = await dataClient.put('/api/users/1', {
  name: 'John Doe Updated',
  email: 'john.updated@example.com',
});`,patch:`// PATCH request (partial update)
const patchedUser = await dataClient.patch('/api/users/1', {
  email: 'john.newemail@example.com',
});`,delete:`// DELETE request
await dataClient.delete('/api/users/1');

// DELETE with error handling
try {
  await dataClient.delete('/api/users/1');
  console.log('User deleted');
} catch (error) {
  console.error('Failed to delete user:', error.message);
}`},authentication:{isAuthenticated:`// Check if user is authenticated
const isAuth = dataClient.isAuthenticated();
if (isAuth) {
  console.log('User is authenticated');
} else {
  console.log('User is not authenticated');
}`,getToken:`// Get environment token
const token = await dataClient.getEnvironmentToken();
if (token) {
  console.log('Token:', token);
} else {
  console.log('No token available');
}`,getTokenInfo:`// Get client token information
const tokenInfo = dataClient.getClientTokenInfo();
if (tokenInfo) {
  console.log('Token expires at:', tokenInfo.expiresAt);
  console.log('Token issued at:', tokenInfo.issuedAt);
}`,logout:`// Logout user
try {
  await dataClient.logout();
  console.log('User logged out');
} catch (error) {
  console.error('Logout failed:', error.message);
}`,redirectToLogin:`// Redirect to login
try {
  await dataClient.redirectToLogin();
} catch (error) {
  console.error('Redirect failed:', error.message);
}`,handleOAuthCallback:`// OAuth callback handling (automatically called on initialization)
// Token is extracted from URL hash fragment (#token=...) and stored securely
// Hash fragment is immediately removed from URL (< 100ms) for security

// Auto-called on DataClient initialization
const dataClient = new DataClient(config);
// Token is automatically extracted if present in URL hash

// Or manually call if needed
const token = dataClient.handleOAuthCallback();
if (token) {
  console.log('Token extracted and stored');
}

// OAuth Flow:
// 1. User calls redirectToLogin() â†’ redirects to controller login page
// 2. Controller handles OAuth flow with Keycloak
// 3. Controller redirects back: https://myapp.com/dashboard#token=eyJhbGc...
// 4. handleOAuthCallback() extracts token from hash fragment
// 5. Token is validated and stored in localStorage
// 6. Hash fragment is immediately removed from URL (< 100ms)
// 7. User sees clean URL: https://myapp.com/dashboard`,tokenRefresh:`// Token refresh callback (automatic refresh on 401 errors)
// Configure onTokenRefresh callback to handle token renewal securely
const dataClientWithRefresh = new DataClient({
  baseUrl: 'https://api.example.com',
  misoConfig: {
    controllerUrl: 'https://controller.aifabrix.ai',
    clientId: 'ctrl-dev-my-app',
    clientTokenUri: '/api/v1/auth/client-token',
  },
  onTokenRefresh: async () => {
    // Call your backend endpoint that handles refresh token securely
    // Backend should use httpOnly cookies or session storage for refresh token
    const response = await fetch('/api/refresh-token', {
      method: 'POST',
      credentials: 'include', // Include cookies for auth
      headers: {
        'Content-Type': 'application/json',
      },
    });
    
    if (!response.ok) {
      throw new Error('Token refresh failed');
    }
    
    const data = await response.json();
    // Return new access token and expiration time
    return {
      token: data.token, // New access token
      expiresIn: data.expiresIn, // Expiration in seconds
    };
  },
});

// How it works:
// - Automatically called when a request receives 401 Unauthorized
// - Refreshes token using your secure backend endpoint
// - Retries the original request with new token
// - Prevents infinite retry loops with tokenRefreshAttempted flag
// - Refresh tokens are NEVER stored in browser localStorage (security requirement)`},caching:{enabled:`// Cache-enabled GET request
const users = await dataClient.get('/api/users', {
  cache: { enabled: true, ttl: 60000 }, // Cache for 60 seconds
});`,disabled:`// Cache-bypassed GET request
const freshUsers = await dataClient.get('/api/users', {
  cache: { enabled: false },
});`,clearCache:`// Clear all cache
dataClient.clearCache();
console.log('Cache cleared');`},interceptors:{request:`// Set request interceptor
dataClient.setInterceptors({
  onRequest: async (url, options) => {
    // Modify request before sending
    return {
      ...options,
      headers: {
        ...options.headers,
        'X-Custom-Header': 'value',
      },
    };
  },
});`,response:`// Set response interceptor
dataClient.setInterceptors({
  onResponse: async (response) => {
    // Modify response before returning
    console.log('Response received:', response);
    return response;
  },
});`,error:`// Set error interceptor
dataClient.setInterceptors({
  onError: async (error) => {
    // Handle errors
    console.error('Request error:', error);
    throw error; // Re-throw to maintain error flow
  },
});`},roles:{getRoles:`// Get user roles (auto-retrieves token from localStorage)
const roles = await dataClient.getRoles();
console.log('User roles:', roles);`,hasRole:`// Check specific role
const isAdmin = await dataClient.hasRole('admin');
if (isAdmin) {
  console.log('User is admin');
}`,hasAnyRole:`// Check if user has any of the roles
const hasAccess = await dataClient.hasAnyRole(['admin', 'moderator']);
if (hasAccess) {
  console.log('User has access');
}`,hasAllRoles:`// Check if user has all of the roles
const isSuperAdmin = await dataClient.hasAllRoles(['admin', 'super']);
if (isSuperAdmin) {
  console.log('User is super admin');
}`,refreshRoles:`// Force refresh roles (bypass cache)
const refreshedRoles = await dataClient.refreshRoles();
console.log('Refreshed roles:', refreshedRoles);`,clearRolesCache:`// Clear cached roles
await dataClient.clearRolesCache();
console.log('Roles cache cleared');`},permissions:{getPermissions:`// Get user permissions (auto-retrieves token from localStorage)
const permissions = await dataClient.getPermissions();
console.log('User permissions:', permissions);`,hasPermission:`// Check specific permission
const canRead = await dataClient.hasPermission('users:read');
if (canRead) {
  console.log('User can read users');
}`,hasAnyPermission:`// Check if user has any of the permissions
const canAccess = await dataClient.hasAnyPermission(['users:read', 'users:write']);
if (canAccess) {
  console.log('User has access');
}`,hasAllPermissions:`// Check if user has all of the permissions
const canManage = await dataClient.hasAllPermissions(['users:read', 'users:write', 'users:delete']);
if (canManage) {
  console.log('User can manage users');
}`,refreshPermissions:`// Force refresh permissions (bypass cache)
const refreshedPermissions = await dataClient.refreshPermissions();
console.log('Refreshed permissions:', refreshedPermissions);`,clearPermissionsCache:`// Clear cached permissions
await dataClient.clearPermissionsCache();
console.log('Permissions cache cleared');`},errorHandling:{tryCatch:`// Basic error handling
try {
  const users = await dataClient.get('/api/users');
  console.log('Users:', users);
} catch (error) {
  console.error('Request failed:', error.message);
  // Display user-friendly error message
}`,networkError:`// Handle network errors
try {
  const users = await dataClient.get('/api/users');
} catch (error) {
  if (error.message.includes('Network')) {
    console.error('Network error - check your connection');
  } else {
    console.error('Request failed:', error.message);
  }
}`,apiError:`// Handle API errors
try {
  const result = await dataClient.post('/api/users', userData);
} catch (error: any) {
  if (error.status === 400) {
    console.error('Validation error:', error.response?.data);
  } else if (error.status === 401) {
    console.error('Unauthorized - please login');
  } else if (error.status === 403) {
    console.error('Forbidden - insufficient permissions');
  } else {
    console.error('Request failed:', error.message);
  }
}`},metrics:{getMetrics:`// Get request metrics
const metrics = dataClient.getMetrics();
console.log('Total requests:', metrics.totalRequests);
console.log('Failed requests:', metrics.totalFailures);
console.log('Average response time:', metrics.averageResponseTime);
console.log('Cache hit rate:', metrics.cacheHitRate);`}};function ij(){const[t,s]=G.useState(null),n=async(a,l)=>{try{await navigator.clipboard.writeText(a),s(l),pe.success("Code copied to clipboard"),setTimeout(()=>s(null),2e3)}catch{pe.error("Failed to copy code")}},i=({code:a,id:l})=>g.jsx("div",{className:"group",children:g.jsxs("pre",{className:"text-xs bg-muted p-4 rounded-lg overflow-x-auto relative",children:[g.jsx("code",{children:a}),g.jsx(Qe,{size:"sm",variant:"ghost",style:{position:"absolute",top:"0.5rem",right:"0.5rem"},className:"z-10 opacity-0 group-hover:opacity-100 transition-opacity bg-background/80 backdrop-blur-sm",onClick:()=>n(a,l),children:t===l?g.jsx(Zb,{className:"w-4 h-4 text-green-600"}):g.jsx(tR,{className:"w-4 h-4"})})]})});return g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsx("div",{className:"border-b border-border bg-white",children:g.jsxs("div",{className:"px-8 py-6",children:[g.jsx("h1",{className:"text-2xl",children:"Code Examples"}),g.jsx("p",{className:"text-muted-foreground mt-1",children:"Copyable code examples for using DataClient"})]})}),g.jsx("div",{className:"flex-1 overflow-auto p-8",children:g.jsxs("div",{className:"max-w-6xl",children:[g.jsxs(_d,{defaultValue:"gettingStarted",className:"space-y-6",children:[g.jsxs(Rd,{className:"grid w-full grid-cols-8",children:[g.jsx(yr,{value:"gettingStarted",children:"Getting Started"}),g.jsx(yr,{value:"initialization",children:"Init"}),g.jsx(yr,{value:"http",children:"HTTP"}),g.jsx(yr,{value:"auth",children:"Auth"}),g.jsx(yr,{value:"caching",children:"Cache"}),g.jsx(yr,{value:"interceptors",children:"Interceptors"}),g.jsx(yr,{value:"roles",children:"Roles"}),g.jsx(yr,{value:"permissions",children:"Permissions"})]}),g.jsxs(vr,{value:"gettingStarted",className:"space-y-6",children:[g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{children:"Server Setup"}),g.jsx(We,{children:"Set up Express.js server with client token endpoint"})]}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.gettingStarted.serverSetup,id:"getting-started-server"})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{children:"Environment Variables"}),g.jsx(We,{children:"Configure server-side environment variables"})]}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.gettingStarted.environmentVariables,id:"getting-started-env"})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{children:"Client Setup"}),g.jsx(We,{children:"Initialize DataClient in your browser application"})]}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.gettingStarted.clientSetup,id:"getting-started-client"})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{children:"Complete Example"}),g.jsx(We,{children:"Full server and client integration example"})]}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.gettingStarted.completeExample,id:"getting-started-complete"})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{children:"How It Works"}),g.jsx(We,{children:"Understanding the authentication flow and security model"})]}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.gettingStarted.howItWorks,id:"getting-started-how-it-works"})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{children:"Validating User Tokens in Routes"}),g.jsx(We,{children:"How to protect your API routes with user token validation"})]}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.gettingStarted.validateUserTokens,id:"getting-started-validate-tokens"})})]})]}),g.jsxs(vr,{value:"initialization",className:"space-y-6",children:[g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{children:"Zero-Config Initialization"}),g.jsx(We,{children:"Automatically fetch configuration from server"})]}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.initialization.zeroConfig,id:"init-zero"})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{children:"Manual Initialization"}),g.jsx(We,{children:"Configure DataClient with custom settings"})]}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.initialization.manual,id:"init-manual"})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{children:"React Context Setup"}),g.jsx(We,{children:"Use DataClient with React Context"})]}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.initialization.reactContext,id:"init-context"})})]})]}),g.jsxs(vr,{value:"http",className:"space-y-6",children:[g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"GET Requests"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.httpMethods.get,id:"http-get"})})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"POST Requests"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.httpMethods.post,id:"http-post"})})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"PUT Requests"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.httpMethods.put,id:"http-put"})})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"PATCH Requests"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.httpMethods.patch,id:"http-patch"})})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"DELETE Requests"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.httpMethods.delete,id:"http-delete"})})]})]}),g.jsxs(vr,{value:"auth",className:"space-y-6",children:[g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"Check Authentication"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.authentication.isAuthenticated,id:"auth-check"})})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"Get Token"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.authentication.getToken,id:"auth-token"})})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"Get Token Info"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.authentication.getTokenInfo,id:"auth-token-info"})})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"Logout"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.authentication.logout,id:"auth-logout"})})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"Redirect to Login"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.authentication.redirectToLogin,id:"auth-redirect"})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{children:"OAuth Callback Handling"}),g.jsx(We,{children:"Automatically extract and store tokens from OAuth redirect (hash fragment)"})]}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.authentication.handleOAuthCallback,id:"auth-oauth-callback"})})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{children:"Token Refresh Callback"}),g.jsx(We,{children:"Configure automatic token refresh on 401 errors using secure backend endpoint"})]}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.authentication.tokenRefresh,id:"auth-token-refresh"})})]})]}),g.jsxs(vr,{value:"caching",className:"space-y-6",children:[g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"Cache-Enabled Requests"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.caching.enabled,id:"cache-enabled"})})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"Cache-Bypassed Requests"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.caching.disabled,id:"cache-disabled"})})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"Clear Cache"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.caching.clearCache,id:"cache-clear"})})]})]}),g.jsxs(vr,{value:"interceptors",className:"space-y-6",children:[g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"Request Interceptor"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.interceptors.request,id:"interceptor-request"})})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"Response Interceptor"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.interceptors.response,id:"interceptor-response"})})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"Error Interceptor"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.interceptors.error,id:"interceptor-error"})})]})]}),g.jsxs(vr,{value:"roles",className:"space-y-6",children:[g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"Get Roles"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.roles.getRoles,id:"roles-get"})})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"Check Role"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.roles.hasRole,id:"roles-has"})})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"Check Any Role"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.roles.hasAnyRole,id:"roles-any"})})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"Check All Roles"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.roles.hasAllRoles,id:"roles-all"})})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"Refresh Roles"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.roles.refreshRoles,id:"roles-refresh"})})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"Clear Roles Cache"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.roles.clearRolesCache,id:"roles-clear"})})]})]}),g.jsxs(vr,{value:"permissions",className:"space-y-6",children:[g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"Get Permissions"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.permissions.getPermissions,id:"perms-get"})})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"Check Permission"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.permissions.hasPermission,id:"perms-has"})})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"Check Any Permission"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.permissions.hasAnyPermission,id:"perms-any"})})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"Check All Permissions"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.permissions.hasAllPermissions,id:"perms-all"})})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"Refresh Permissions"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.permissions.refreshPermissions,id:"perms-refresh"})})]}),g.jsxs(be,{children:[g.jsx(Re,{children:g.jsx(ke,{children:"Clear Permissions Cache"})}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.permissions.clearPermissionsCache,id:"perms-clear"})})]})]})]}),g.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-6",children:[g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{children:"Error Handling"}),g.jsx(We,{children:"Patterns for handling errors"})]}),g.jsxs(Ce,{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-medium mb-2",children:"Basic Try-Catch"}),g.jsx(i,{code:Xe.errorHandling.tryCatch,id:"error-basic"})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-medium mb-2",children:"Network Errors"}),g.jsx(i,{code:Xe.errorHandling.networkError,id:"error-network"})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-medium mb-2",children:"API Errors"}),g.jsx(i,{code:Xe.errorHandling.apiError,id:"error-api"})]})]})]}),g.jsxs(be,{children:[g.jsxs(Re,{children:[g.jsx(ke,{children:"Metrics"}),g.jsx(We,{children:"Get request metrics"})]}),g.jsx(Ce,{children:g.jsx(i,{code:Xe.metrics.getMetrics,id:"metrics-get"})})]})]})]})})]})}var oj=(t,s,n,i,a,l,o,u)=>{let d=document.documentElement,h=["light","dark"];function f(S){(Array.isArray(t)?t:[t]).forEach(E=>{let b=E==="class",x=b&&l?a.map(v=>l[v]||v):a;b?(d.classList.remove(...x),d.classList.add(l&&l[S]?l[S]:S)):d.setAttribute(E,S)}),p(S)}function p(S){u&&h.includes(S)&&(d.style.colorScheme=S)}function y(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(i)f(i);else try{let S=localStorage.getItem(s)||n,E=o&&S==="system"?y():S;f(E)}catch{}},Yb=["light","dark"],ST="(prefers-color-scheme: dark)",aj=typeof window>"u",my=G.createContext(void 0),lj={setTheme:t=>{},themes:[]},cj=()=>{var t;return(t=G.useContext(my))!=null?t:lj},uj=t=>G.useContext(my)?G.createElement(G.Fragment,null,t.children):G.createElement(fj,{...t}),dj=["light","dark"],fj=({forcedTheme:t,disableTransitionOnChange:s=!1,enableSystem:n=!0,enableColorScheme:i=!0,storageKey:a="theme",themes:l=dj,defaultTheme:o=n?"system":"light",attribute:u="data-theme",value:d,children:h,nonce:f,scriptProps:p})=>{let[y,S]=G.useState(()=>pj(a,o)),[E,b]=G.useState(()=>y==="system"?Qm():y),x=d?Object.values(d):l,v=G.useCallback(D=>{let A=D;if(!A)return;D==="system"&&n&&(A=Qm());let j=d?d[A]:A,k=s?mj(f):null,K=document.documentElement,Z=ie=>{ie==="class"?(K.classList.remove(...x),j&&K.classList.add(j)):ie.startsWith("data-")&&(j?K.setAttribute(ie,j):K.removeAttribute(ie))};if(Array.isArray(u)?u.forEach(Z):Z(u),i){let ie=Yb.includes(o)?o:null,ce=Yb.includes(A)?A:ie;K.style.colorScheme=ce}k?.()},[f]),C=G.useCallback(D=>{let A=typeof D=="function"?D(y):D;S(A);try{localStorage.setItem(a,A)}catch{}},[y]),_=G.useCallback(D=>{let A=Qm(D);b(A),y==="system"&&n&&!t&&v("system")},[y,t]);G.useEffect(()=>{let D=window.matchMedia(ST);return D.addListener(_),_(D),()=>D.removeListener(_)},[_]),G.useEffect(()=>{let D=A=>{A.key===a&&(A.newValue?S(A.newValue):C(o))};return window.addEventListener("storage",D),()=>window.removeEventListener("storage",D)},[C]),G.useEffect(()=>{v(t??y)},[t,y]);let R=G.useMemo(()=>({theme:y,setTheme:C,forcedTheme:t,resolvedTheme:y==="system"?E:y,themes:n?[...l,"system"]:l,systemTheme:n?E:void 0}),[y,C,t,E,n,l]);return G.createElement(my.Provider,{value:R},G.createElement(hj,{forcedTheme:t,storageKey:a,attribute:u,enableSystem:n,enableColorScheme:i,defaultTheme:o,value:d,themes:l,nonce:f,scriptProps:p}),h)},hj=G.memo(({forcedTheme:t,storageKey:s,attribute:n,enableSystem:i,enableColorScheme:a,defaultTheme:l,value:o,themes:u,nonce:d,scriptProps:h})=>{let f=JSON.stringify([n,s,l,t,u,o,i,a]).slice(1,-1);return G.createElement("script",{...h,suppressHydrationWarning:!0,nonce:typeof window>"u"?d:"",dangerouslySetInnerHTML:{__html:`(${oj.toString()})(${f})`}})}),pj=(t,s)=>{if(aj)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||s},mj=t=>{let s=document.createElement("style");return t&&s.setAttribute("nonce",t),s.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(s),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(s)},1)}},Qm=t=>(t||(t=window.matchMedia(ST)),t.matches?"dark":"light");const gj=({...t})=>{const{theme:s="system"}=cj();return g.jsx(Kk,{theme:s,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})},Pu={p18cc100:"M34.4572 24.1629C34.1171 23.2828 33.8371 22.5727 33.6171 22.0526C33.407 21.5126 33.137 21.0225 32.8169 20.5624C32.5069 20.1023 32.0868 19.7323 31.5668 19.4423C31.0567 19.1422 30.4166 18.9922 29.6465 18.9922C28.8764 18.9922 28.2463 19.1422 27.7262 19.4423C27.2161 19.7323 26.7961 20.1124 26.476 20.5824C26.166 21.0525 25.8659 21.6526 25.5759 22.3727C25.3059 23.0828 25.0658 23.6929 24.8658 24.2029L17.8648 41.9855C17.5748 42.6956 17.3747 43.2457 17.2447 43.6457C17.1247 44.0458 17.0547 44.4258 17.0547 44.8059C17.0547 45.456 17.3247 46.0361 17.8548 46.5461C18.3849 47.0562 19.005 47.3162 19.7051 47.3162C20.5252 47.3162 21.1153 47.0762 21.4753 46.6061C21.8354 46.1161 22.2754 45.1959 22.7855 43.8257L24.0957 40.3152H35.2273L36.5375 43.7557C36.7075 44.1758 36.9175 44.6759 37.1576 45.2359C37.4076 45.786 37.6376 46.1961 37.8477 46.4661C38.0577 46.7262 38.3177 46.9362 38.6278 47.0862C38.9378 47.2462 39.3079 47.3262 39.7479 47.3262C40.498 47.3262 41.1281 47.0662 41.6482 46.5461C42.1883 46.0061 42.4483 45.426 42.4483 44.7859C42.4483 44.1458 42.1683 43.1956 41.6082 41.8555L34.4572 24.1829V24.1629ZM25.5459 36.1346L29.5965 24.833L33.7271 36.1346H25.5459Z",p2888f670:"M66.9996 29.5342C65.3393 29.5342 63.9992 30.8744 63.9992 32.5346V46.8167C63.9992 51.4073 62.2089 55.728 58.9684 58.9684C55.728 62.2189 51.4074 63.9991 46.8167 63.9991H23.1833C18.5927 63.9991 14.272 62.2089 11.0316 58.9684C7.78111 55.718 6.00086 51.4073 6.00086 46.8167V23.1833C6.00086 18.5927 7.79111 14.272 11.0316 11.0316C14.272 7.79112 18.5927 6.00086 23.1833 6.00086H46.8167C48.4769 6.00086 49.8171 4.66067 49.8171 3.00043C49.8171 1.34019 48.4769 0 46.8167 0H23.1833C16.9924 0 11.1716 2.41035 6.79097 6.79097C2.41034 11.1716 0 16.9924 0 23.1833V46.8167C0 53.0076 2.41034 58.8284 6.79097 63.209C11.1716 67.5897 16.9924 70 23.1833 70H46.8167C53.0076 70 58.8384 67.5897 63.209 63.209C67.5897 58.8284 70 53.0076 70 46.8167V32.5346C70 30.8744 68.6598 29.5342 66.9996 29.5342Z",p3d0c8dc0:"M63.3766 24.1126C69.5907 24.1126 74.6282 19.0751 74.6282 12.861C74.6282 6.64689 69.5907 1.60938 63.3766 1.60938C57.1625 1.60938 52.125 6.64689 52.125 12.861C52.125 19.0751 57.1625 24.1126 63.3766 24.1126Z",p5723880:"M48.7157 26.5742C47.9656 26.5742 47.3555 26.8343 46.8854 27.3443C46.4253 27.8544 46.1953 28.6145 46.1953 29.6247V44.2167C46.1953 45.2169 46.4253 45.977 46.8854 46.5171C47.3555 47.0571 47.9656 47.3172 48.7157 47.3172C49.4658 47.3172 50.0759 47.0571 50.5659 46.5371C51.056 46.017 51.296 45.2369 51.296 44.2167V29.4746C51.296 28.5645 51.056 27.8544 50.5659 27.3443C50.0759 26.8343 49.4658 26.5742 48.7157 26.5742Z"},yj="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%2075%2070%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22clip0_5723_7999%22%3E%0A%3Cpath%20id%3D%22Vector%22%20d%3D%22M75%200H0V70H75V0Z%22%20fill%3D%22var(--fill-0%2C%20black)%22%2F%3E%0A%3C%2Fg%3E%0A%3C%2Fsvg%3E%0A";function vj(){return g.jsx("div",{className:"relative size-full","data-name":"favicon 1",children:g.jsx("div",{className:"absolute contents inset-0","data-name":"Clip path group",children:g.jsx("div",{className:"absolute inset-[0_0.5%_0_0] mask-alpha mask-intersect mask-no-clip mask-no-repeat mask-position-[0px] mask-size-[75px_70px]","data-name":"Group",style:{maskImage:`url('${yj}')`},children:g.jsx("svg",{className:"block size-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 75 70",children:g.jsxs("g",{id:"Group",children:[g.jsx("path",{d:Pu.p5723880,fill:"var(--fill-0, #111827)",id:"Vector"}),g.jsx("path",{d:Pu.p18cc100,fill:"var(--fill-0, #111827)",id:"Vector_2"}),g.jsx("path",{d:Pu.p2888f670,fill:"var(--fill-0, #0062FF)",id:"Vector_3"}),g.jsx("path",{d:Pu.p3d0c8dc0,fill:"var(--fill-0, #0062FF)",id:"Vector_4"})]})})})})})}function Ej(){const[t,s]=G.useState("configuration"),n=()=>{switch(t){case"configuration":return g.jsx(Gb,{});case"api-testing":return g.jsx(JO,{});case"caching":return g.jsx(ej,{});case"monitoring":return g.jsx(tj,{});case"authorization":return g.jsx(sj,{});case"code-examples":return g.jsx(ij,{});default:return g.jsx(Gb,{})}};return g.jsxs("div",{className:"flex h-screen bg-background",children:[g.jsx(Sj,{activeSection:t,onSectionChange:s}),g.jsx("main",{className:"flex-1 overflow-auto",children:n()}),g.jsx(gj,{position:"top-right"})]})}function wj(){const{dataClient:t,isLoading:s}=ea(),[n,i]=G.useState(!1),[a,l]=G.useState(!1);G.useEffect(()=>{if(!t)return;const d=()=>{t.handleOAuthCallback()?(i(!0),pe.success("Authentication successful",{description:"You have been successfully authenticated",duration:3e3})):i(t.isAuthenticated())};d();const h=()=>{d()};window.addEventListener("hashchange",h);const f=()=>{setTimeout(d,100)};return window.addEventListener("focus",f),()=>{window.removeEventListener("hashchange",h),window.removeEventListener("focus",f)}},[t]);const o=async()=>{if(!t){pe.error("DataClient not initialized",{description:"Please initialize DataClient first on the Configuration page",duration:5e3});return}l(!0);try{await t.redirectToLogin(),l(!1)}catch(d){const h=d instanceof Error?d.message:"Unknown error";pe.error("Login failed",{description:h,duration:1e4}),l(!1)}},u=async()=>{if(!t){pe.error("DataClient not initialized");return}l(!0);try{await t.logout(),i(!1),pe.success("Logged out successfully")}catch(d){const h=d instanceof Error?d.message:"Unknown error";pe.error("Logout failed",{description:h})}finally{l(!1)}};return s?g.jsx("div",{className:"p-4 border-t border-sidebar-border",children:g.jsx("div",{className:"text-xs text-muted-foreground",children:"Loading..."})}):g.jsxs("div",{className:"p-4 border-t border-sidebar-border space-y-3",children:[g.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[g.jsx(yR,{className:"w-3 h-3"}),g.jsx("span",{className:n?"text-green-600":"text-muted-foreground",children:n?"Authenticated":"Not authenticated"})]}),n?g.jsxs(Qe,{variant:"outline",size:"sm",className:"w-full",onClick:u,disabled:a||!t,children:[g.jsx(aR,{className:"w-3 h-3 mr-2"}),a?"Logging out...":"Logout"]}):g.jsxs(Qe,{variant:"default",size:"sm",className:"w-full",onClick:o,disabled:a||!t,children:[g.jsx(iR,{className:"w-3 h-3 mr-2"}),a?"Redirecting...":"Login"]})]})}function Sj({activeSection:t,onSectionChange:s}){const n=[{id:"configuration",label:"Configuration",icon:fR},{id:"api-testing",label:"API Testing",icon:cR},{id:"caching",label:"Caching & Storage",icon:Zm},{id:"monitoring",label:"Monitoring & Logs",icon:G_},{id:"authorization",label:"Authorization",icon:eg},{id:"code-examples",label:"Code Examples",icon:Z_}];return g.jsxs("div",{className:"w-64 bg-sidebar border-r border-sidebar-border flex flex-col",children:[g.jsx("div",{className:"p-6 border-b border-sidebar-border",children:g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-10 h-10",children:g.jsx(vj,{})}),g.jsxs("div",{children:[g.jsx("h1",{className:"text-sidebar-foreground font-medium",children:"AI Fabrix"}),g.jsx("p",{className:"text-sm text-muted-foreground",children:"MISO Data Client"})]})]})}),g.jsx("nav",{className:"flex-1 p-4",role:"navigation","aria-label":"Main navigation",children:g.jsx("ul",{className:"space-y-1",children:n.map(i=>{const a=t===i.id,l=i.icon;return g.jsx("li",{children:g.jsxs("button",{onClick:()=>s(i.id),className:`
                    w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors
                    ${a?"bg-sidebar-accent text-sidebar-accent-foreground font-medium":"text-sidebar-foreground hover:bg-sidebar-accent/50"}
                  `,children:[g.jsx(l,{className:"w-4 h-4"}),g.jsx("span",{children:i.label})]})},i.id)})})}),g.jsx(wj,{}),g.jsx("div",{className:"p-4 border-t border-sidebar-border",children:g.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{children:"Version"}),g.jsx("span",{className:"font-medium",children:"1.0.0"})]}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("span",{children:"Environment"}),g.jsx("span",{className:"font-medium text-green-600",children:"Development"})]})]})})]})}$_.createRoot(document.getElementById("root")).render(g.jsx(uj,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:g.jsx(lO,{children:g.jsx(Ej,{})})}))});export default xj();
//# sourceMappingURL=index-BXCp39Ve.js.map
